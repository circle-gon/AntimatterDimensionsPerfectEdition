(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();var yD;(function(t){var e=function(){function n(){this._dropEffect="move",this._effectAllowed="all",this._data={}}return Object.defineProperty(n.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(r){this._dropEffect=r},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(r){this._effectAllowed=r},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),n.prototype.clearData=function(r){r!=null?delete this._data[r]:this._data=null},n.prototype.getData=function(r){return this._data[r]||""},n.prototype.setData=function(r,s){this._data[r]=s},n.prototype.setDragImage=function(r,s,a){var o=i._instance;o._imgCustom=r,o._imgOffset={x:s,y:a}},n}();t.DataTransfer=e;var i=function(){function n(){if(this._lastClick=0,n._instance)throw"DragDropTouch instance already created.";var r=!1;if(document.addEventListener("test",function(){},{get passive(){return r=!0,!0}}),"ontouchstart"in document){var s=document,a=this._touchstart.bind(this),o=this._touchmove.bind(this),c=this._touchend.bind(this),d=r?{passive:!1,capture:!1}:!1;s.addEventListener("touchstart",a,d),s.addEventListener("touchmove",o,d),s.addEventListener("touchend",c),s.addEventListener("touchcancel",c)}}return n.getInstance=function(){return n._instance},n.prototype._touchstart=function(r){var s=this;if(this._shouldHandle(r)){if(Date.now()-this._lastClick<n._DBLCLICK&&this._dispatchEvent(r,"dblclick",r.target)){r.cancelable&&r.preventDefault(),this._reset();return}this._reset();var a=this._closestDraggable(r.target);a&&!this._dispatchEvent(r,"mousemove",r.target)&&!this._dispatchEvent(r,"mousedown",r.target)&&(this._dragSource=a,this._ptDown=this._getPoint(r),this._lastTouch=r,r.cancelable&&r.preventDefault(),setTimeout(function(){s._dragSource==a&&s._img==null&&s._dispatchEvent(r,"contextmenu",a)&&s._reset()},n._CTXMENU),n._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){s._isDragEnabled=!0,s._touchmove(r)},n._PRESSHOLDAWAIT)))}},n.prototype._touchmove=function(r){if(this._shouldCancelPressHoldMove(r)){this._reset();return}if(this._shouldHandleMove(r)||this._shouldHandlePressHoldMove(r)){var s=this._getTarget(r);if(this._dispatchEvent(r,"mousemove",s)){this._lastTouch=r,r.cancelable&&r.preventDefault();return}this._dragSource&&!this._img&&this._shouldStartDragging(r)&&(this._dispatchEvent(r,"dragstart",this._dragSource),this._createImage(r),this._dispatchEvent(r,"dragenter",s)),this._img&&(this._lastTouch=r,r.cancelable&&r.preventDefault(),s!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(r,"dragenter",s),this._lastTarget=s),this._moveImage(r),this._isDropZone=this._dispatchEvent(r,"dragover",s))}},n.prototype._touchend=function(r){if(this._shouldHandle(r)){if(this._dispatchEvent(this._lastTouch,"mouseup",r.target)){r.cancelable&&r.preventDefault();return}this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",r.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(r.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())}},n.prototype._shouldHandle=function(r){return r&&!r.defaultPrevented&&r.touches&&r.touches.length<2},n.prototype._shouldHandleMove=function(r){return!n._ISPRESSHOLDMODE&&this._shouldHandle(r)},n.prototype._shouldHandlePressHoldMove=function(r){return n._ISPRESSHOLDMODE&&this._isDragEnabled&&r&&r.touches&&r.touches.length},n.prototype._shouldCancelPressHoldMove=function(r){return n._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(r)>n._PRESSHOLDMARGIN},n.prototype._shouldStartDragging=function(r){var s=this._getDelta(r);return s>n._THRESHOLD||n._ISPRESSHOLDMODE&&s>=n._PRESSHOLDTHRESHOLD},n.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new e,clearInterval(this._pressHoldInterval)},n.prototype._getPoint=function(r,s){return r&&r.touches&&(r=r.touches[0]),{x:s?r.pageX:r.clientX,y:s?r.pageY:r.clientY}},n.prototype._getDelta=function(r){if(n._ISPRESSHOLDMODE&&!this._ptDown)return 0;var s=this._getPoint(r);return Math.abs(s.x-this._ptDown.x)+Math.abs(s.y-this._ptDown.y)},n.prototype._getTarget=function(r){for(var s=this._getPoint(r),a=document.elementFromPoint(s.x,s.y);a&&getComputedStyle(a).pointerEvents=="none";)a=a.parentElement;return a},n.prototype._createImage=function(r){this._img&&this._destroyImage();var s=this._imgCustom||this._dragSource;if(this._img=s.cloneNode(!0),this._copyStyle(s,this._img),this._img.style.top=this._img.style.left="-9999px",!this._imgCustom){var a=s.getBoundingClientRect(),o=this._getPoint(r);this._imgOffset={x:o.x-a.left,y:o.y-a.top},this._img.style.opacity=n._OPACITY.toString()}this._moveImage(r),document.body.appendChild(this._img)},n.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},n.prototype._moveImage=function(r){var s=this;requestAnimationFrame(function(){if(s._img){var a=s._getPoint(r,!0),o=s._img.style;o.position="absolute",o.pointerEvents="none",o.zIndex="999999",o.left=Math.round(a.x-s._imgOffset.x)+"px",o.top=Math.round(a.y-s._imgOffset.y)+"px"}})},n.prototype._copyProps=function(r,s,a){for(var o=0;o<a.length;o++){var c=a[o];r[c]=s[c]}},n.prototype._copyStyle=function(r,s){if(n._rmvAtts.forEach(function(m){s.removeAttribute(m)}),r instanceof HTMLCanvasElement){var a=r,o=s;o.width=a.width,o.height=a.height,o.getContext("2d").drawImage(a,0,0)}for(var c=getComputedStyle(r),d=0;d<c.length;d++){var p=c[d];p.indexOf("transition")<0&&(s.style[p]=c[p])}s.style.pointerEvents="none";for(var d=0;d<r.children.length;d++)this._copyStyle(r.children[d],s.children[d])},n.prototype._dispatchEvent=function(r,s,a){if(r&&a){var o=document.createEvent("Event"),c=r.touches?r.touches[0]:r;return o.initEvent(s,!0,!0),o.button=0,o.which=o.buttons=1,this._copyProps(o,r,n._kbdProps),this._copyProps(o,c,n._ptProps),o.dataTransfer=this._dataTransfer,a.dispatchEvent(o),o.defaultPrevented}return!1},n.prototype._closestDraggable=function(r){for(;r;r=r.parentElement)if(r.hasAttribute("draggable")&&r.draggable)return r;return null},n}();i._instance=new i,i._THRESHOLD=5,i._OPACITY=.5,i._DBLCLICK=500,i._CTXMENU=900,i._ISPRESSHOLDMODE=!1,i._PRESSHOLDAWAIT=400,i._PRESSHOLDMARGIN=25,i._PRESSHOLDTHRESHOLD=0,i._rmvAtts="id,class,style,draggable".split(","),i._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),i._ptProps="pageX,pageY,clientX,clientY,screenX,screenY".split(","),t.DragDropTouch=i})(yD||(yD={}));var Si=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ru(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function M6(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var m2={exports:{}};(function(t,e){(function(i,n){t.exports=n()})(Si,function(){var i=navigator.userAgent,n=navigator.platform,r=/gecko\/\d/i.test(i),s=/MSIE \d/.test(i),a=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(i),o=/Edge\/(\d+)/.exec(i),c=s||a||o,d=c&&(s?document.documentMode||6:+(o||a)[1]),p=!o&&/WebKit\//.test(i),m=p&&/Qt\/\d+\.\d+/.test(i),y=!o&&/Chrome\//.test(i),_=/Opera\//.test(i),E=/Apple Computer/.test(navigator.vendor),C=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(i),S=/PhantomJS/.test(i),k=E&&(/Mobile\/\w+/.test(i)||navigator.maxTouchPoints>2),R=/Android/.test(i),O=k||R||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(i),I=k||/Mac/.test(n),F=/\bCrOS\b/.test(i),P=/win/i.test(n),x=_&&i.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(_=!1,p=!0);var M=I&&(m||_&&(x==null||x<12.11)),q=r||c&&d>=9;function $(u){return new RegExp("(^|\\s)"+u+"(?:$|\\s)\\s*")}var B=function(u,f){var v=u.className,g=$(f).exec(v);if(g){var T=v.slice(g.index+g[0].length);u.className=v.slice(0,g.index)+(T?g[1]+T:"")}};function j(u){for(var f=u.childNodes.length;f>0;--f)u.removeChild(u.firstChild);return u}function z(u,f){return j(u).appendChild(f)}function X(u,f,v,g){var T=document.createElement(u);if(v&&(T.className=v),g&&(T.style.cssText=g),typeof f=="string")T.appendChild(document.createTextNode(f));else if(f)for(var A=0;A<f.length;++A)T.appendChild(f[A]);return T}function se(u,f,v,g){var T=X(u,f,v,g);return T.setAttribute("role","presentation"),T}var ue;document.createRange?ue=function(u,f,v,g){var T=document.createRange();return T.setEnd(g||u,v),T.setStart(u,f),T}:ue=function(u,f,v){var g=document.body.createTextRange();try{g.moveToElementText(u.parentNode)}catch{return g}return g.collapse(!0),g.moveEnd("character",v),g.moveStart("character",f),g};function ve(u,f){if(f.nodeType==3&&(f=f.parentNode),u.contains)return u.contains(f);do if(f.nodeType==11&&(f=f.host),f==u)return!0;while(f=f.parentNode)}function _e(){var u;try{u=document.activeElement}catch{u=document.body||null}for(;u&&u.shadowRoot&&u.shadowRoot.activeElement;)u=u.shadowRoot.activeElement;return u}function de(u,f){var v=u.className;$(f).test(v)||(u.className+=(v?" ":"")+f)}function oe(u,f){for(var v=u.split(" "),g=0;g<v.length;g++)v[g]&&!$(v[g]).test(f)&&(f+=" "+v[g]);return f}var Q=function(u){u.select()};k?Q=function(u){u.selectionStart=0,u.selectionEnd=u.value.length}:c&&(Q=function(u){try{u.select()}catch{}});function Z(u){var f=Array.prototype.slice.call(arguments,1);return function(){return u.apply(null,f)}}function W(u,f,v){f||(f={});for(var g in u)u.hasOwnProperty(g)&&(v!==!1||!f.hasOwnProperty(g))&&(f[g]=u[g]);return f}function ne(u,f,v,g,T){f==null&&(f=u.search(/[^\s\u00a0]/),f==-1&&(f=u.length));for(var A=g||0,N=T||0;;){var U=u.indexOf("	",A);if(U<0||U>=f)return N+(f-A);N+=U-A,N+=v-N%v,A=U+1}}var ce=function(){this.id=null,this.f=null,this.time=0,this.handler=Z(this.onTimeout,this)};ce.prototype.onTimeout=function(u){u.id=0,u.time<=+new Date?u.f():setTimeout(u.handler,u.time-+new Date)},ce.prototype.set=function(u,f){this.f=f;var v=+new Date+u;(!this.id||v<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,u),this.time=v)};function J(u,f){for(var v=0;v<u.length;++v)if(u[v]==f)return v;return-1}var pe=50,he={toString:function(){return"CodeMirror.Pass"}},fe={scroll:!1},be={origin:"*mouse"},re={origin:"+move"};function Ft(u,f,v){for(var g=0,T=0;;){var A=u.indexOf("	",g);A==-1&&(A=u.length);var N=A-g;if(A==u.length||T+N>=f)return g+Math.min(N,f-T);if(T+=A-g,T+=v-T%v,g=A+1,T>=f)return g}}var Dt=[""];function ft(u){for(;Dt.length<=u;)Dt.push(Ae(Dt)+" ");return Dt[u]}function Ae(u){return u[u.length-1]}function ei(u,f){for(var v=[],g=0;g<u.length;g++)v[g]=f(u[g],g);return v}function $t(u,f,v){for(var g=0,T=v(f);g<u.length&&v(u[g])<=T;)g++;u.splice(g,0,f)}function At(){}function It(u,f){var v;return Object.create?v=Object.create(u):(At.prototype=u,v=new At),f&&W(f,v),v}var St=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function rt(u){return/\w/.test(u)||u>""&&(u.toUpperCase()!=u.toLowerCase()||St.test(u))}function De(u,f){return f?f.source.indexOf("\\w")>-1&&rt(u)?!0:f.test(u):rt(u)}function qe(u){for(var f in u)if(u.hasOwnProperty(f)&&u[f])return!1;return!0}var Pt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ot(u){return u.charCodeAt(0)>=768&&Pt.test(u)}function Ei(u,f,v){for(;(v<0?f>0:f<u.length)&&ot(u.charAt(f));)f+=v;return f}function yi(u,f,v){for(var g=f>v?-1:1;;){if(f==v)return f;var T=(f+v)/2,A=g<0?Math.ceil(T):Math.floor(T);if(A==f)return u(A)?f:v;u(A)?v=A:f=A+g}}function Ti(u,f,v,g){if(!u)return g(f,v,"ltr",0);for(var T=!1,A=0;A<u.length;++A){var N=u[A];(N.from<v&&N.to>f||f==v&&N.to==f)&&(g(Math.max(N.from,f),Math.min(N.to,v),N.level==1?"rtl":"ltr",A),T=!0)}T||g(f,v,"ltr")}var wi=null;function hi(u,f,v){var g;wi=null;for(var T=0;T<u.length;++T){var A=u[T];if(A.from<f&&A.to>f)return T;A.to==f&&(A.from!=A.to&&v=="before"?g=T:wi=T),A.from==f&&(A.from!=A.to&&v!="before"?g=T:wi=T)}return g??wi}var Ki=function(){var u="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",f="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function v(Y){return Y<=247?u.charAt(Y):1424<=Y&&Y<=1524?"R":1536<=Y&&Y<=1785?f.charAt(Y-1536):1774<=Y&&Y<=2220?"r":8192<=Y&&Y<=8203?"w":Y==8204?"b":"L"}var g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,T=/[stwN]/,A=/[LRr]/,N=/[Lb1n]/,U=/[1n]/;function H(Y,ie,le){this.level=Y,this.from=ie,this.to=le}return function(Y,ie){var le=ie=="ltr"?"L":"R";if(Y.length==0||ie=="ltr"&&!g.test(Y))return!1;for(var ye=Y.length,me=[],Se=0;Se<ye;++Se)me.push(v(Y.charCodeAt(Se)));for(var Ie=0,Fe=le;Ie<ye;++Ie){var Ye=me[Ie];Ye=="m"?me[Ie]=Fe:Fe=Ye}for(var et=0,We=le;et<ye;++et){var st=me[et];st=="1"&&We=="r"?me[et]="n":A.test(st)&&(We=st,st=="r"&&(me[et]="R"))}for(var vt=1,mt=me[0];vt<ye-1;++vt){var qt=me[vt];qt=="+"&&mt=="1"&&me[vt+1]=="1"?me[vt]="1":qt==","&&mt==me[vt+1]&&(mt=="1"||mt=="n")&&(me[vt]=mt),mt=qt}for(var Yi=0;Yi<ye;++Yi){var _r=me[Yi];if(_r==",")me[Yi]="N";else if(_r=="%"){var bn=void 0;for(bn=Yi+1;bn<ye&&me[bn]=="%";++bn);for(var ra=Yi&&me[Yi-1]=="!"||bn<ye&&me[bn]=="1"?"1":"N",Us=Yi;Us<bn;++Us)me[Us]=ra;Yi=bn-1}}for(var Yn=0,Ls=le;Yn<ye;++Yn){var xr=me[Yn];Ls=="L"&&xr=="1"?me[Yn]="L":A.test(xr)&&(Ls=xr)}for(var nr=0;nr<ye;++nr)if(T.test(me[nr])){var Wn=void 0;for(Wn=nr+1;Wn<ye&&T.test(me[Wn]);++Wn);for(var xn=(nr?me[nr-1]:le)=="L",Bs=(Wn<ye?me[Wn]:le)=="L",mp=xn==Bs?xn?"L":"R":le,Uu=nr;Uu<Wn;++Uu)me[Uu]=mp;nr=Wn-1}for(var Jr=[],Ml,Er=0;Er<ye;)if(N.test(me[Er])){var y1=Er;for(++Er;Er<ye&&N.test(me[Er]);++Er);Jr.push(new H(0,y1,Er))}else{var Dc=Er,vh=Jr.length,bh=ie=="rtl"?1:0;for(++Er;Er<ye&&me[Er]!="L";++Er);for(var bs=Dc;bs<Er;)if(U.test(me[bs])){Dc<bs&&(Jr.splice(vh,0,new H(1,Dc,bs)),vh+=bh);var yp=bs;for(++bs;bs<Er&&U.test(me[bs]);++bs);Jr.splice(vh,0,new H(2,yp,bs)),vh+=bh,Dc=bs}else++bs;Dc<Er&&Jr.splice(vh,0,new H(1,Dc,Er))}return ie=="ltr"&&(Jr[0].level==1&&(Ml=Y.match(/^\s+/))&&(Jr[0].from=Ml[0].length,Jr.unshift(new H(0,0,Ml[0].length))),Ae(Jr).level==1&&(Ml=Y.match(/\s+$/))&&(Ae(Jr).to-=Ml[0].length,Jr.push(new H(0,ye-Ml[0].length,ye)))),ie=="rtl"?Jr.reverse():Jr}}();function xt(u,f){var v=u.order;return v==null&&(v=u.order=Ki(u.text,f)),v}var zt=[],Ke=function(u,f,v){if(u.addEventListener)u.addEventListener(f,v,!1);else if(u.attachEvent)u.attachEvent("on"+f,v);else{var g=u._handlers||(u._handlers={});g[f]=(g[f]||zt).concat(v)}};function Xt(u,f){return u._handlers&&u._handlers[f]||zt}function dt(u,f,v){if(u.removeEventListener)u.removeEventListener(f,v,!1);else if(u.detachEvent)u.detachEvent("on"+f,v);else{var g=u._handlers,T=g&&g[f];if(T){var A=J(T,v);A>-1&&(g[f]=T.slice(0,A).concat(T.slice(A+1)))}}}function Ot(u,f){var v=Xt(u,f);if(v.length)for(var g=Array.prototype.slice.call(arguments,2),T=0;T<v.length;++T)v[T].apply(null,g)}function ge(u,f,v){return typeof f=="string"&&(f={type:f,preventDefault:function(){this.defaultPrevented=!0}}),Ot(u,v||f.type,u,f),Kt(f)||f.codemirrorIgnore}function Oe(u){var f=u._handlers&&u._handlers.cursorActivity;if(f)for(var v=u.curOp.cursorActivityHandlers||(u.curOp.cursorActivityHandlers=[]),g=0;g<f.length;++g)J(v,f[g])==-1&&v.push(f[g])}function Be(u,f){return Xt(u,f).length>0}function ct(u){u.prototype.on=function(f,v){Ke(this,f,v)},u.prototype.off=function(f,v){dt(this,f,v)}}function it(u){u.preventDefault?u.preventDefault():u.returnValue=!1}function at(u){u.stopPropagation?u.stopPropagation():u.cancelBubble=!0}function Kt(u){return u.defaultPrevented!=null?u.defaultPrevented:u.returnValue==!1}function fi(u){it(u),at(u)}function An(u){return u.target||u.srcElement}function Sa(u){var f=u.which;return f==null&&(u.button&1?f=1:u.button&2?f=3:u.button&4&&(f=2)),I&&u.ctrlKey&&f==1&&(f=3),f}var dr=function(){if(c&&d<9)return!1;var u=X("div");return"draggable"in u||"dragDrop"in u}(),Zi;function ka(u){if(Zi==null){var f=X("span","​");z(u,X("span",[f,document.createTextNode("x")])),u.firstChild.offsetHeight!=0&&(Zi=f.offsetWidth<=1&&f.offsetHeight>2&&!(c&&d<8))}var v=Zi?X("span","​"):X("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return v.setAttribute("cm-text",""),v}var Oi;function Xd(u){if(Oi!=null)return Oi;var f=z(u,document.createTextNode("AخA")),v=ue(f,0,1).getBoundingClientRect(),g=ue(f,1,2).getBoundingClientRect();return j(u),!v||v.left==v.right?!1:Oi=g.right-v.right<3}var Rs=`

b`.split(/\n/).length!=3?function(u){for(var f=0,v=[],g=u.length;f<=g;){var T=u.indexOf(`
`,f);T==-1&&(T=u.length);var A=u.slice(f,u.charAt(T-1)=="\r"?T-1:T),N=A.indexOf("\r");N!=-1?(v.push(A.slice(0,N)),f+=N+1):(v.push(A),f=T+1)}return v}:function(u){return u.split(/\r\n?|\n/)},Gn=window.getSelection?function(u){try{return u.selectionStart!=u.selectionEnd}catch{return!1}}:function(u){var f;try{f=u.ownerDocument.selection.createRange()}catch{}return!f||f.parentElement()!=u?!1:f.compareEndPoints("StartToEnd",f)!=0},Kd=function(){var u=X("div");return"oncopy"in u?!0:(u.setAttribute("oncopy","return;"),typeof u.oncopy=="function")}(),Is=null;function Zd(u){if(Is!=null)return Is;var f=z(u,X("span","x")),v=f.getBoundingClientRect(),g=ue(f,0,1).getBoundingClientRect();return Is=Math.abs(v.left-g.left)>1}var co={},uo={};function Qd(u,f){arguments.length>2&&(f.dependencies=Array.prototype.slice.call(arguments,2)),co[u]=f}function Jd(u,f){uo[u]=f}function bl(u){if(typeof u=="string"&&uo.hasOwnProperty(u))u=uo[u];else if(u&&typeof u.name=="string"&&uo.hasOwnProperty(u.name)){var f=uo[u.name];typeof f=="string"&&(f={name:f}),u=It(f,u),u.name=f.name}else{if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(u))return bl("application/xml");if(typeof u=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(u))return bl("application/json")}return typeof u=="string"?{name:u}:u||{name:"null"}}function vc(u,f){f=bl(f);var v=co[f.name];if(!v)return vc(u,"text/plain");var g=v(u,f);if(Ds.hasOwnProperty(f.name)){var T=Ds[f.name];for(var A in T)T.hasOwnProperty(A)&&(g.hasOwnProperty(A)&&(g["_"+A]=g[A]),g[A]=T[A])}if(g.name=f.name,f.helperType&&(g.helperType=f.helperType),f.modeProps)for(var N in f.modeProps)g[N]=f.modeProps[N];return g}var Ds={};function eh(u,f){var v=Ds.hasOwnProperty(u)?Ds[u]:Ds[u]={};W(f,v)}function hr(u,f){if(f===!0)return f;if(u.copyState)return u.copyState(f);var v={};for(var g in f){var T=f[g];T instanceof Array&&(T=T.concat([])),v[g]=T}return v}function bc(u,f){for(var v;u.innerMode&&(v=u.innerMode(f),!(!v||v.mode==u));)f=v.state,u=v.mode;return v||{mode:u,state:f}}function pu(u,f,v){return u.startState?u.startState(f,v):!0}var Qi=function(u,f,v){this.pos=this.start=0,this.string=u,this.tabSize=f||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=v};Qi.prototype.eol=function(){return this.pos>=this.string.length},Qi.prototype.sol=function(){return this.pos==this.lineStart},Qi.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Qi.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Qi.prototype.eat=function(u){var f=this.string.charAt(this.pos),v;if(typeof u=="string"?v=f==u:v=f&&(u.test?u.test(f):u(f)),v)return++this.pos,f},Qi.prototype.eatWhile=function(u){for(var f=this.pos;this.eat(u););return this.pos>f},Qi.prototype.eatSpace=function(){for(var u=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>u},Qi.prototype.skipToEnd=function(){this.pos=this.string.length},Qi.prototype.skipTo=function(u){var f=this.string.indexOf(u,this.pos);if(f>-1)return this.pos=f,!0},Qi.prototype.backUp=function(u){this.pos-=u},Qi.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ne(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ne(this.string,this.lineStart,this.tabSize):0)},Qi.prototype.indentation=function(){return ne(this.string,null,this.tabSize)-(this.lineStart?ne(this.string,this.lineStart,this.tabSize):0)},Qi.prototype.match=function(u,f,v){if(typeof u=="string"){var g=function(N){return v?N.toLowerCase():N},T=this.string.substr(this.pos,u.length);if(g(T)==g(u))return f!==!1&&(this.pos+=u.length),!0}else{var A=this.string.slice(this.pos).match(u);return A&&A.index>0?null:(A&&f!==!1&&(this.pos+=A[0].length),A)}},Qi.prototype.current=function(){return this.string.slice(this.start,this.pos)},Qi.prototype.hideFirstChars=function(u,f){this.lineStart+=u;try{return f()}finally{this.lineStart-=u}},Qi.prototype.lookAhead=function(u){var f=this.lineOracle;return f&&f.lookAhead(u)},Qi.prototype.baseToken=function(){var u=this.lineOracle;return u&&u.baseToken(this.pos)};function lt(u,f){if(f-=u.first,f<0||f>=u.size)throw new Error("There is no line "+(f+u.first)+" in the document.");for(var v=u;!v.lines;)for(var g=0;;++g){var T=v.children[g],A=T.chunkSize();if(f<A){v=T;break}f-=A}return v.lines[f]}function as(u,f,v){var g=[],T=f.line;return u.iter(f.line,v.line+1,function(A){var N=A.text;T==v.line&&(N=N.slice(0,v.ch)),T==f.line&&(N=N.slice(f.ch)),g.push(N),++T}),g}function _c(u,f,v){var g=[];return u.iter(f,v,function(T){g.push(T.text)}),g}function fr(u,f){var v=f-u.height;if(v)for(var g=u;g;g=g.parent)g.height+=v}function Ge(u){if(u.parent==null)return null;for(var f=u.parent,v=J(f.lines,u),g=f.parent;g;f=g,g=g.parent)for(var T=0;g.children[T]!=f;++T)v+=g.children[T].chunkSize();return v+f.first}function os(u,f){var v=u.first;e:do{for(var g=0;g<u.children.length;++g){var T=u.children[g],A=T.height;if(f<A){u=T;continue e}f-=A,v+=T.chunkSize()}return v}while(!u.lines);for(var N=0;N<u.lines.length;++N){var U=u.lines[N],H=U.height;if(f<H)break;f-=H}return v+N}function Oo(u,f){return f>=u.first&&f<u.first+u.size}function kr(u,f){return String(u.lineNumberFormatter(f+u.firstLineNumber))}function xe(u,f,v){if(v===void 0&&(v=null),!(this instanceof xe))return new xe(u,f,v);this.line=u,this.ch=f,this.sticky=v}function gt(u,f){return u.line-f.line||u.ch-f.ch}function ho(u,f){return u.sticky==f.sticky&&gt(u,f)==0}function xs(u){return xe(u.line,u.ch)}function ls(u,f){return gt(u,f)<0?f:u}function cs(u,f){return gt(u,f)<0?u:f}function mu(u,f){return Math.max(u.first,Math.min(f,u.first+u.size-1))}function bt(u,f){if(f.line<u.first)return xe(u.first,0);var v=u.first+u.size-1;return f.line>v?xe(v,lt(u,v).text.length):oi(f,lt(u,f.line).text.length)}function oi(u,f){var v=u.ch;return v==null||v>f?xe(u.line,f):v<0?xe(u.line,0):u}function rn(u,f){for(var v=[],g=0;g<f.length;g++)v[g]=bt(u,f[g]);return v}var Aa=function(u,f){this.state=u,this.lookAhead=f},us=function(u,f,v,g){this.state=f,this.doc=u,this.line=v,this.maxLookAhead=g||0,this.baseTokens=null,this.baseTokenPos=1};us.prototype.lookAhead=function(u){var f=this.doc.getLine(this.line+u);return f!=null&&u>this.maxLookAhead&&(this.maxLookAhead=u),f},us.prototype.baseToken=function(u){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=u;)this.baseTokenPos+=2;var f=this.baseTokens[this.baseTokenPos+1];return{type:f&&f.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-u}},us.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},us.fromSaved=function(u,f,v){return f instanceof Aa?new us(u,hr(u.mode,f.state),v,f.lookAhead):new us(u,hr(u.mode,f),v)},us.prototype.save=function(u){var f=u!==!1?hr(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Aa(f,this.maxLookAhead):f};function No(u,f,v,g){var T=[u.state.modeGen],A={};Fo(u,f.text,u.doc.mode,v,function(Y,ie){return T.push(Y,ie)},A,g);for(var N=v.state,U=function(Y){v.baseTokens=T;var ie=u.state.overlays[Y],le=1,ye=0;v.state=!0,Fo(u,f.text,ie.mode,v,function(me,Se){for(var Ie=le;ye<me;){var Fe=T[le];Fe>me&&T.splice(le,1,me,T[le+1],Fe),le+=2,ye=Math.min(me,Fe)}if(Se)if(ie.opaque)T.splice(Ie,le-Ie,me,"overlay "+Se),le=Ie+2;else for(;Ie<le;Ie+=2){var Ye=T[Ie+1];T[Ie+1]=(Ye?Ye+" ":"")+"overlay "+Se}},A),v.state=N,v.baseTokens=null,v.baseTokenPos=1},H=0;H<u.state.overlays.length;++H)U(H);return{styles:T,classes:A.bgClass||A.textClass?A:null}}function Go(u,f,v){if(!f.styles||f.styles[0]!=u.state.modeGen){var g=qr(u,Ge(f)),T=f.text.length>u.options.maxHighlightLength&&hr(u.doc.mode,g.state),A=No(u,f,g);T&&(g.state=T),f.stateAfter=g.save(!T),f.styles=A.styles,A.classes?f.styleClasses=A.classes:f.styleClasses&&(f.styleClasses=null),v===u.doc.highlightFrontier&&(u.doc.modeFrontier=Math.max(u.doc.modeFrontier,++u.doc.highlightFrontier))}return f.styles}function qr(u,f,v){var g=u.doc,T=u.display;if(!g.mode.startState)return new us(g,!0,f);var A=th(u,f,v),N=A>g.first&&lt(g,A-1).stateAfter,U=N?us.fromSaved(g,N,A):new us(g,pu(g.mode),A);return g.iter(A,f,function(H){fo(u,H.text,U);var Y=U.line;H.stateAfter=Y==f-1||Y%5==0||Y>=T.viewFrom&&Y<T.viewTo?U.save():null,U.nextLine()}),v&&(g.modeFrontier=U.line),U}function fo(u,f,v,g){var T=u.doc.mode,A=new Qi(f,u.options.tabSize,v);for(A.start=A.pos=g||0,f==""&&Uo(T,v.state);!A.eol();)gn(T,A,v.state),A.start=A.pos}function Uo(u,f){if(u.blankLine)return u.blankLine(f);if(u.innerMode){var v=bc(u,f);if(v.mode.blankLine)return v.mode.blankLine(v.state)}}function gn(u,f,v,g){for(var T=0;T<10;T++){g&&(g[0]=bc(u,v).mode);var A=u.token(f,v);if(f.pos>f.start)return A}throw new Error("Mode "+u.name+" failed to advance stream.")}var Lo=function(u,f,v){this.start=u.start,this.end=u.pos,this.string=u.current(),this.type=f||null,this.state=v};function Bo(u,f,v,g){var T=u.doc,A=T.mode,N;f=bt(T,f);var U=lt(T,f.line),H=qr(u,f.line,v),Y=new Qi(U.text,u.options.tabSize,H),ie;for(g&&(ie=[]);(g||Y.pos<f.ch)&&!Y.eol();)Y.start=Y.pos,N=gn(A,Y,H.state),g&&ie.push(new Lo(Y,N,hr(T.mode,H.state)));return g?ie:new Lo(Y,N,H.state)}function Yr(u,f){if(u)for(;;){var v=u.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!v)break;u=u.slice(0,v.index)+u.slice(v.index+v[0].length);var g=v[1]?"bgClass":"textClass";f[g]==null?f[g]=v[2]:new RegExp("(?:^|\\s)"+v[2]+"(?:$|\\s)").test(f[g])||(f[g]+=" "+v[2])}return u}function Fo(u,f,v,g,T,A,N){var U=v.flattenSpans;U==null&&(U=u.options.flattenSpans);var H=0,Y=null,ie=new Qi(f,u.options.tabSize,g),le,ye=u.options.addModeClass&&[null];for(f==""&&Yr(Uo(v,g.state),A);!ie.eol();){if(ie.pos>u.options.maxHighlightLength?(U=!1,N&&fo(u,f,g,ie.pos),ie.pos=f.length,le=null):le=Yr(gn(v,ie,g.state,ye),A),ye){var me=ye[0].name;me&&(le="m-"+(le?me+" "+le:me))}if(!U||Y!=le){for(;H<ie.start;)H=Math.min(ie.start,H+5e3),T(H,Y);Y=le}ie.start=ie.pos}for(;H<ie.pos;){var Se=Math.min(ie.pos,H+5e3);T(Se,Y),H=Se}}function th(u,f,v){for(var g,T,A=u.doc,N=v?-1:f-(u.doc.mode.innerMode?1e3:100),U=f;U>N;--U){if(U<=A.first)return A.first;var H=lt(A,U-1),Y=H.stateAfter;if(Y&&(!v||U+(Y instanceof Aa?Y.lookAhead:0)<=A.modeFrontier))return U;var ie=ne(H.text,null,u.options.tabSize);(T==null||g>ie)&&(T=U-1,g=ie)}return T}function ih(u,f){if(u.modeFrontier=Math.min(u.modeFrontier,f),!(u.highlightFrontier<f-10)){for(var v=u.first,g=f-1;g>v;g--){var T=lt(u,g).stateAfter;if(T&&(!(T instanceof Aa)||g+T.lookAhead<f)){v=g+1;break}}u.highlightFrontier=Math.min(u.highlightFrontier,v)}}var $o=!1,vn=!1;function _l(){$o=!0}function Ia(){vn=!0}function Da(u,f,v){this.marker=u,this.from=f,this.to=v}function Js(u,f){if(u)for(var v=0;v<u.length;++v){var g=u[v];if(g.marker==f)return g}}function El(u,f){for(var v,g=0;g<u.length;++g)u[g]!=f&&(v||(v=[])).push(u[g]);return v}function xa(u,f,v){var g=v&&window.WeakSet&&(v.markedSpans||(v.markedSpans=new WeakSet));g&&g.has(u.markedSpans)?u.markedSpans.push(f):(u.markedSpans=u.markedSpans?u.markedSpans.concat([f]):[f],g&&g.add(u.markedSpans)),f.marker.attachLine(u)}function Pi(u,f,v){var g;if(u)for(var T=0;T<u.length;++T){var A=u[T],N=A.marker,U=A.from==null||(N.inclusiveLeft?A.from<=f:A.from<f);if(U||A.from==f&&N.type=="bookmark"&&(!v||!A.marker.insertLeft)){var H=A.to==null||(N.inclusiveRight?A.to>=f:A.to>f);(g||(g=[])).push(new Da(N,A.from,H?null:A.to))}}return g}function un(u,f,v){var g;if(u)for(var T=0;T<u.length;++T){var A=u[T],N=A.marker,U=A.to==null||(N.inclusiveRight?A.to>=f:A.to>f);if(U||A.from==f&&N.type=="bookmark"&&(!v||A.marker.insertLeft)){var H=A.from==null||(N.inclusiveLeft?A.from<=f:A.from<f);(g||(g=[])).push(new Da(N,H?null:A.from-f,A.to==null?null:A.to-f))}}return g}function Ec(u,f){if(f.full)return null;var v=Oo(u,f.from.line)&&lt(u,f.from.line).markedSpans,g=Oo(u,f.to.line)&&lt(u,f.to.line).markedSpans;if(!v&&!g)return null;var T=f.from.ch,A=f.to.ch,N=gt(f.from,f.to)==0,U=Pi(v,T,N),H=un(g,A,N),Y=f.text.length==1,ie=Ae(f.text).length+(Y?T:0);if(U)for(var le=0;le<U.length;++le){var ye=U[le];if(ye.to==null){var me=Js(H,ye.marker);me?Y&&(ye.to=me.to==null?null:me.to+ie):ye.to=T}}if(H)for(var Se=0;Se<H.length;++Se){var Ie=H[Se];if(Ie.to!=null&&(Ie.to+=ie),Ie.from==null){var Fe=Js(U,Ie.marker);Fe||(Ie.from=ie,Y&&(U||(U=[])).push(Ie))}else Ie.from+=ie,Y&&(U||(U=[])).push(Ie)}U&&(U=yu(U)),H&&H!=U&&(H=yu(H));var Ye=[U];if(!Y){var et=f.text.length-2,We;if(et>0&&U)for(var st=0;st<U.length;++st)U[st].to==null&&(We||(We=[])).push(new Da(U[st].marker,null,null));for(var vt=0;vt<et;++vt)Ye.push(We);Ye.push(H)}return Ye}function yu(u){for(var f=0;f<u.length;++f){var v=u[f];v.from!=null&&v.from==v.to&&v.marker.clearWhenEmpty!==!1&&u.splice(f--,1)}return u.length?u:null}function nh(u,f,v){var g=null;if(u.iter(f.line,v.line+1,function(me){if(me.markedSpans)for(var Se=0;Se<me.markedSpans.length;++Se){var Ie=me.markedSpans[Se].marker;Ie.readOnly&&(!g||J(g,Ie)==-1)&&(g||(g=[])).push(Ie)}}),!g)return null;for(var T=[{from:f,to:v}],A=0;A<g.length;++A)for(var N=g[A],U=N.find(0),H=0;H<T.length;++H){var Y=T[H];if(!(gt(Y.to,U.from)<0||gt(Y.from,U.to)>0)){var ie=[H,1],le=gt(Y.from,U.from),ye=gt(Y.to,U.to);(le<0||!N.inclusiveLeft&&!le)&&ie.push({from:Y.from,to:U.from}),(ye>0||!N.inclusiveRight&&!ye)&&ie.push({from:U.to,to:Y.to}),T.splice.apply(T,ie),H+=ie.length-3}}return T}function Rn(u){var f=u.markedSpans;if(f){for(var v=0;v<f.length;++v)f[v].marker.detachLine(u);u.markedSpans=null}}function Wr(u,f){if(f){for(var v=0;v<f.length;++v)f[v].marker.attachLine(u);u.markedSpans=f}}function Ma(u){return u.inclusiveLeft?-1:0}function Pa(u){return u.inclusiveRight?1:0}function Ms(u,f){var v=u.lines.length-f.lines.length;if(v!=0)return v;var g=u.find(),T=f.find(),A=gt(g.from,T.from)||Ma(u)-Ma(f);if(A)return-A;var N=gt(g.to,T.to)||Pa(u)-Pa(f);return N||f.id-u.id}function ea(u,f){var v=vn&&u.markedSpans,g;if(v)for(var T=void 0,A=0;A<v.length;++A)T=v[A],T.marker.collapsed&&(f?T.from:T.to)==null&&(!g||Ms(g,T.marker)<0)&&(g=T.marker);return g}function Ho(u){return ea(u,!0)}function Tl(u){return ea(u,!1)}function rh(u,f){var v=vn&&u.markedSpans,g;if(v)for(var T=0;T<v.length;++T){var A=v[T];A.marker.collapsed&&(A.from==null||A.from<f)&&(A.to==null||A.to>f)&&(!g||Ms(g,A.marker)<0)&&(g=A.marker)}return g}function Qn(u,f,v,g,T){var A=lt(u,f),N=vn&&A.markedSpans;if(N)for(var U=0;U<N.length;++U){var H=N[U];if(H.marker.collapsed){var Y=H.marker.find(0),ie=gt(Y.from,v)||Ma(H.marker)-Ma(T),le=gt(Y.to,g)||Pa(H.marker)-Pa(T);if(!(ie>=0&&le<=0||ie<=0&&le>=0)&&(ie<=0&&(H.marker.inclusiveRight&&T.inclusiveLeft?gt(Y.to,v)>=0:gt(Y.to,v)>0)||ie>=0&&(H.marker.inclusiveRight&&T.inclusiveLeft?gt(Y.from,g)<=0:gt(Y.from,g)<0)))return!0}}}function Jn(u){for(var f;f=Ho(u);)u=f.find(-1,!0).line;return u}function wl(u){for(var f;f=Tl(u);)u=f.find(1,!0).line;return u}function ds(u){for(var f,v;f=Tl(u);)u=f.find(1,!0).line,(v||(v=[])).push(u);return v}function Ps(u,f){var v=lt(u,f),g=Jn(v);return v==g?f:Ge(g)}function In(u,f){if(f>u.lastLine())return f;var v=lt(u,f),g;if(!jr(u,v))return f;for(;g=Tl(v);)v=g.find(1,!0).line;return Ge(v)+1}function jr(u,f){var v=vn&&f.markedSpans;if(v){for(var g=void 0,T=0;T<v.length;++T)if(g=v[T],!!g.marker.collapsed){if(g.from==null)return!0;if(!g.marker.widgetNode&&g.from==0&&g.marker.inclusiveLeft&&Ut(u,f,g))return!0}}}function Ut(u,f,v){if(v.to==null){var g=v.marker.find(1,!0);return Ut(u,g.line,Js(g.line.markedSpans,v.marker))}if(v.marker.inclusiveRight&&v.to==f.text.length)return!0;for(var T=void 0,A=0;A<f.markedSpans.length;++A)if(T=f.markedSpans[A],T.marker.collapsed&&!T.marker.widgetNode&&T.from==v.to&&(T.to==null||T.to!=v.from)&&(T.marker.inclusiveLeft||v.marker.inclusiveRight)&&Ut(u,f,T))return!0}function Ar(u){u=Jn(u);for(var f=0,v=u.parent,g=0;g<v.lines.length;++g){var T=v.lines[g];if(T==u)break;f+=T.height}for(var A=v.parent;A;v=A,A=v.parent)for(var N=0;N<A.children.length;++N){var U=A.children[N];if(U==v)break;f+=U.height}return f}function hs(u){if(u.height==0)return 0;for(var f=u.text.length,v,g=u;v=Ho(g);){var T=v.find(0,!0);g=T.from.line,f+=T.from.ch-T.to.ch}for(g=u;v=Tl(g);){var A=v.find(0,!0);f-=g.text.length-A.from.ch,g=A.to.line,f+=g.text.length-A.to.ch}return f}function Rr(u){var f=u.display,v=u.doc;f.maxLine=lt(v,v.first),f.maxLineLength=hs(f.maxLine),f.maxLineChanged=!0,v.iter(function(g){var T=hs(g);T>f.maxLineLength&&(f.maxLineLength=T,f.maxLine=g)})}var je=function(u,f,v){this.text=u,Wr(this,f),this.height=v?v(this):1};je.prototype.lineNo=function(){return Ge(this)},ct(je);function Cl(u,f,v,g){u.text=f,u.stateAfter&&(u.stateAfter=null),u.styles&&(u.styles=null),u.order!=null&&(u.order=null),Rn(u),Wr(u,v);var T=g?g(u):1;T!=u.height&&fr(u,T)}function Sl(u){u.parent=null,Rn(u)}var fs={},Oa={};function zr(u,f){if(!u||/^\s*$/.test(u))return null;var v=f.addModeClass?Oa:fs;return v[u]||(v[u]=u.replace(/\S+/g,"cm-$&"))}function gu(u,f){var v=se("span",null,null,p?"padding-right: .1px":null),g={pre:se("pre",[v],"CodeMirror-line"),content:v,col:0,pos:0,cm:u,trailingSpace:!1,splitSpaces:u.getOption("lineWrapping")};f.measure={};for(var T=0;T<=(f.rest?f.rest.length:0);T++){var A=T?f.rest[T-1]:f.line,N=void 0;g.pos=0,g.addToken=sh,Xd(u.display.measure)&&(N=xt(A,u.doc.direction))&&(g.addToken=ah(g.addToken,N)),g.map=[];var U=f!=u.display.externalMeasured&&Ge(A);Na(A,g,Go(u,A,U)),A.styleClasses&&(A.styleClasses.bgClass&&(g.bgClass=oe(A.styleClasses.bgClass,g.bgClass||"")),A.styleClasses.textClass&&(g.textClass=oe(A.styleClasses.textClass,g.textClass||""))),g.map.length==0&&g.map.push(0,0,g.content.appendChild(ka(u.display.measure))),T==0?(f.measure.map=g.map,f.measure.cache={}):((f.measure.maps||(f.measure.maps=[])).push(g.map),(f.measure.caches||(f.measure.caches=[])).push({}))}if(p){var H=g.content.lastChild;(/\bcm-tab\b/.test(H.className)||H.querySelector&&H.querySelector(".cm-tab"))&&(g.content.className="cm-tab-wrap-hack")}return Ot(u,"renderLine",u,f.line,g.pre),g.pre.className&&(g.textClass=oe(g.pre.className,g.textClass||"")),g}function ps(u){var f=X("span","•","cm-invalidchar");return f.title="\\u"+u.charCodeAt(0).toString(16),f.setAttribute("aria-label",f.title),f}function sh(u,f,v,g,T,A,N){if(f){var U=u.splitSpaces?ms(f,u.trailingSpace):f,H=u.cm.state.specialChars,Y=!1,ie;if(!H.test(f))u.col+=f.length,ie=document.createTextNode(U),u.map.push(u.pos,u.pos+f.length,ie),c&&d<9&&(Y=!0),u.pos+=f.length;else{ie=document.createDocumentFragment();for(var le=0;;){H.lastIndex=le;var ye=H.exec(f),me=ye?ye.index-le:f.length-le;if(me){var Se=document.createTextNode(U.slice(le,le+me));c&&d<9?ie.appendChild(X("span",[Se])):ie.appendChild(Se),u.map.push(u.pos,u.pos+me,Se),u.col+=me,u.pos+=me}if(!ye)break;le+=me+1;var Ie=void 0;if(ye[0]=="	"){var Fe=u.cm.options.tabSize,Ye=Fe-u.col%Fe;Ie=ie.appendChild(X("span",ft(Ye),"cm-tab")),Ie.setAttribute("role","presentation"),Ie.setAttribute("cm-text","	"),u.col+=Ye}else ye[0]=="\r"||ye[0]==`
`?(Ie=ie.appendChild(X("span",ye[0]=="\r"?"␍":"␤","cm-invalidchar")),Ie.setAttribute("cm-text",ye[0]),u.col+=1):(Ie=u.cm.options.specialCharPlaceholder(ye[0]),Ie.setAttribute("cm-text",ye[0]),c&&d<9?ie.appendChild(X("span",[Ie])):ie.appendChild(Ie),u.col+=1);u.map.push(u.pos,u.pos+1,Ie),u.pos++}}if(u.trailingSpace=U.charCodeAt(f.length-1)==32,v||g||T||Y||A||N){var et=v||"";g&&(et+=g),T&&(et+=T);var We=X("span",[ie],et,A);if(N)for(var st in N)N.hasOwnProperty(st)&&st!="style"&&st!="class"&&We.setAttribute(st,N[st]);return u.content.appendChild(We)}u.content.appendChild(ie)}}function ms(u,f){if(u.length>1&&!/  /.test(u))return u;for(var v=f,g="",T=0;T<u.length;T++){var A=u.charAt(T);A==" "&&v&&(T==u.length-1||u.charCodeAt(T+1)==32)&&(A=" "),g+=A,v=A==" "}return g}function ah(u,f){return function(v,g,T,A,N,U,H){T=T?T+" cm-force-border":"cm-force-border";for(var Y=v.pos,ie=Y+g.length;;){for(var le=void 0,ye=0;ye<f.length&&(le=f[ye],!(le.to>Y&&le.from<=Y));ye++);if(le.to>=ie)return u(v,g,T,A,N,U,H);u(v,g.slice(0,le.to-Y),T,A,null,U,H),A=null,g=g.slice(le.to-Y),Y=le.to}}}function er(u,f,v,g){var T=!g&&v.widgetNode;T&&u.map.push(u.pos,u.pos+f,T),!g&&u.cm.display.input.needsContentAttribute&&(T||(T=u.content.appendChild(document.createElement("span"))),T.setAttribute("cm-marker",v.id)),T&&(u.cm.display.input.setUneditable(T),u.content.appendChild(T)),u.pos+=f,u.trailingSpace=!1}function Na(u,f,v){var g=u.markedSpans,T=u.text,A=0;if(!g){for(var N=1;N<v.length;N+=2)f.addToken(f,T.slice(A,A=v[N]),zr(v[N+1],f.cm.options));return}for(var U=T.length,H=0,Y=1,ie="",le,ye,me=0,Se,Ie,Fe,Ye,et;;){if(me==H){Se=Ie=Fe=ye="",et=null,Ye=null,me=1/0;for(var We=[],st=void 0,vt=0;vt<g.length;++vt){var mt=g[vt],qt=mt.marker;if(qt.type=="bookmark"&&mt.from==H&&qt.widgetNode)We.push(qt);else if(mt.from<=H&&(mt.to==null||mt.to>H||qt.collapsed&&mt.to==H&&mt.from==H)){if(mt.to!=null&&mt.to!=H&&me>mt.to&&(me=mt.to,Ie=""),qt.className&&(Se+=" "+qt.className),qt.css&&(ye=(ye?ye+";":"")+qt.css),qt.startStyle&&mt.from==H&&(Fe+=" "+qt.startStyle),qt.endStyle&&mt.to==me&&(st||(st=[])).push(qt.endStyle,mt.to),qt.title&&((et||(et={})).title=qt.title),qt.attributes)for(var Yi in qt.attributes)(et||(et={}))[Yi]=qt.attributes[Yi];qt.collapsed&&(!Ye||Ms(Ye.marker,qt)<0)&&(Ye=mt)}else mt.from>H&&me>mt.from&&(me=mt.from)}if(st)for(var _r=0;_r<st.length;_r+=2)st[_r+1]==me&&(Ie+=" "+st[_r]);if(!Ye||Ye.from==H)for(var bn=0;bn<We.length;++bn)er(f,0,We[bn]);if(Ye&&(Ye.from||0)==H){if(er(f,(Ye.to==null?U+1:Ye.to)-H,Ye.marker,Ye.from==null),Ye.to==null)return;Ye.to==H&&(Ye=!1)}}if(H>=U)break;for(var ra=Math.min(U,me);;){if(ie){var Us=H+ie.length;if(!Ye){var Yn=Us>ra?ie.slice(0,ra-H):ie;f.addToken(f,Yn,le?le+Se:Se,Fe,H+Yn.length==me?Ie:"",ye,et)}if(Us>=ra){ie=ie.slice(ra-H),H=ra;break}H=Us,Fe=""}ie=T.slice(A,A=v[Y++]),le=zr(v[Y++],f.cm.options)}}}function ta(u,f,v){this.line=f,this.rest=ds(f),this.size=this.rest?Ge(Ae(this.rest))-v+1:1,this.node=this.text=null,this.hidden=jr(u,f)}function pr(u,f,v){for(var g=[],T,A=f;A<v;A=T){var N=new ta(u.doc,lt(u.doc,A),A);T=A+N.size,g.push(N)}return g}var Ir=null;function kl(u){Ir?Ir.ops.push(u):u.ownsGroup=Ir={ops:[u],delayedCallbacks:[]}}function dn(u){var f=u.delayedCallbacks,v=0;do{for(;v<f.length;v++)f[v].call(null);for(var g=0;g<u.ops.length;g++){var T=u.ops[g];if(T.cursorActivityHandlers)for(;T.cursorActivityCalled<T.cursorActivityHandlers.length;)T.cursorActivityHandlers[T.cursorActivityCalled++].call(null,T.cm)}}while(v<f.length)}function mr(u,f){var v=u.ownsGroup;if(v)try{dn(v)}finally{Ir=null,f(v)}}var Xr=null;function Hi(u,f){var v=Xt(u,f);if(v.length){var g=Array.prototype.slice.call(arguments,2),T;Ir?T=Ir.delayedCallbacks:Xr?T=Xr:(T=Xr=[],setTimeout(ut,0));for(var A=function(U){T.push(function(){return v[U].apply(null,g)})},N=0;N<v.length;++N)A(N)}}function ut(){var u=Xr;Xr=null;for(var f=0;f<u.length;++f)u[f]()}function Vo(u,f,v,g){for(var T=0;T<f.changes.length;T++){var A=f.changes[T];A=="text"?oh(u,f):A=="gutter"?ht(u,f,v,g):A=="class"?po(u,f):A=="widget"&&yr(u,f,g)}f.changes=null}function ia(u){return u.node==u.text&&(u.node=X("div",null,null,"position: relative"),u.text.parentNode&&u.text.parentNode.replaceChild(u.node,u.text),u.node.appendChild(u.text),c&&d<8&&(u.node.style.zIndex=2)),u.node}function Al(u,f){var v=f.bgClass?f.bgClass+" "+(f.line.bgClass||""):f.line.bgClass;if(v&&(v+=" CodeMirror-linebackground"),f.background)v?f.background.className=v:(f.background.parentNode.removeChild(f.background),f.background=null);else if(v){var g=ia(f);f.background=g.insertBefore(X("div",null,v),g.firstChild),u.display.input.setUneditable(f.background)}}function vu(u,f){var v=u.display.externalMeasured;return v&&v.line==f.line?(u.display.externalMeasured=null,f.measure=v.measure,v.built):gu(u,f)}function oh(u,f){var v=f.text.className,g=vu(u,f);f.text==f.node&&(f.node=g.pre),f.text.parentNode.replaceChild(g.pre,f.text),f.text=g.pre,g.bgClass!=f.bgClass||g.textClass!=f.textClass?(f.bgClass=g.bgClass,f.textClass=g.textClass,po(u,f)):v&&(f.text.className=v)}function po(u,f){Al(u,f),f.line.wrapClass?ia(f).className=f.line.wrapClass:f.node!=f.text&&(f.node.className="");var v=f.textClass?f.textClass+" "+(f.line.textClass||""):f.line.textClass;f.text.className=v||""}function ht(u,f,v,g){if(f.gutter&&(f.node.removeChild(f.gutter),f.gutter=null),f.gutterBackground&&(f.node.removeChild(f.gutterBackground),f.gutterBackground=null),f.line.gutterClass){var T=ia(f);f.gutterBackground=X("div",null,"CodeMirror-gutter-background "+f.line.gutterClass,"left: "+(u.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px; width: "+g.gutterTotalWidth+"px"),u.display.input.setUneditable(f.gutterBackground),T.insertBefore(f.gutterBackground,f.text)}var A=f.line.gutterMarkers;if(u.options.lineNumbers||A){var N=ia(f),U=f.gutter=X("div",null,"CodeMirror-gutter-wrapper","left: "+(u.options.fixedGutter?g.fixedPos:-g.gutterTotalWidth)+"px");if(U.setAttribute("aria-hidden","true"),u.display.input.setUneditable(U),N.insertBefore(U,f.text),f.line.gutterClass&&(U.className+=" "+f.line.gutterClass),u.options.lineNumbers&&(!A||!A["CodeMirror-linenumbers"])&&(f.lineNumber=U.appendChild(X("div",kr(u.options,v),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+g.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.display.lineNumInnerWidth+"px"))),A)for(var H=0;H<u.display.gutterSpecs.length;++H){var Y=u.display.gutterSpecs[H].className,ie=A.hasOwnProperty(Y)&&A[Y];ie&&U.appendChild(X("div",[ie],"CodeMirror-gutter-elt","left: "+g.gutterLeft[Y]+"px; width: "+g.gutterWidth[Y]+"px"))}}}function yr(u,f,v){f.alignable&&(f.alignable=null);for(var g=$("CodeMirror-linewidget"),T=f.node.firstChild,A=void 0;T;T=A)A=T.nextSibling,g.test(T.className)&&f.node.removeChild(T);bu(u,f,v)}function lh(u,f,v,g){var T=vu(u,f);return f.text=f.node=T.pre,T.bgClass&&(f.bgClass=T.bgClass),T.textClass&&(f.textClass=T.textClass),po(u,f),ht(u,f,v,g),bu(u,f,g),f.node}function bu(u,f,v){if(_u(u,f.line,f,v,!0),f.rest)for(var g=0;g<f.rest.length;g++)_u(u,f.rest[g],f,v,!1)}function _u(u,f,v,g,T){if(f.widgets)for(var A=ia(v),N=0,U=f.widgets;N<U.length;++N){var H=U[N],Y=X("div",[H.node],"CodeMirror-linewidget"+(H.className?" "+H.className:""));H.handleMouseEvents||Y.setAttribute("cm-ignore-events","true"),ys(H,Y,v,g),u.display.input.setUneditable(Y),T&&H.above?A.insertBefore(Y,v.gutter||v.text):A.appendChild(Y),Hi(H,"redraw")}}function ys(u,f,v,g){if(u.noHScroll){(v.alignable||(v.alignable=[])).push(f);var T=g.wrapperWidth;f.style.left=g.fixedPos+"px",u.coverGutter||(T-=g.gutterTotalWidth,f.style.paddingLeft=g.gutterTotalWidth+"px"),f.style.width=T+"px"}u.coverGutter&&(f.style.zIndex=5,f.style.position="relative",u.noHScroll||(f.style.marginLeft=-g.gutterTotalWidth+"px"))}function Kr(u){if(u.height!=null)return u.height;var f=u.doc.cm;if(!f)return 0;if(!ve(document.body,u.node)){var v="position: relative;";u.coverGutter&&(v+="margin-left: -"+f.display.gutters.offsetWidth+"px;"),u.noHScroll&&(v+="width: "+f.display.wrapper.clientWidth+"px;"),z(f.display.measure,X("div",[u.node],null,v))}return u.height=u.node.parentNode.offsetHeight}function Os(u,f){for(var v=An(f);v!=u.wrapper;v=v.parentNode)if(!v||v.nodeType==1&&v.getAttribute("cm-ignore-events")=="true"||v.parentNode==u.sizer&&v!=u.mover)return!0}function Rl(u){return u.lineSpace.offsetTop}function Tc(u){return u.mover.offsetHeight-u.lineSpace.offsetHeight}function tr(u){if(u.cachedPaddingH)return u.cachedPaddingH;var f=z(u.measure,X("pre","x","CodeMirror-line-like")),v=window.getComputedStyle?window.getComputedStyle(f):f.currentStyle,g={left:parseInt(v.paddingLeft),right:parseInt(v.paddingRight)};return!isNaN(g.left)&&!isNaN(g.right)&&(u.cachedPaddingH=g),g}function gs(u){return pe-u.display.nativeBarWidth}function Ga(u){return u.display.scroller.clientWidth-gs(u)-u.display.barWidth}function qn(u){return u.display.scroller.clientHeight-gs(u)-u.display.barHeight}function ch(u,f,v){var g=u.options.lineWrapping,T=g&&Ga(u);if(!f.measure.heights||g&&f.measure.width!=T){var A=f.measure.heights=[];if(g){f.measure.width=T;for(var N=f.text.firstChild.getClientRects(),U=0;U<N.length-1;U++){var H=N[U],Y=N[U+1];Math.abs(H.bottom-Y.bottom)>2&&A.push((H.bottom+Y.top)/2-v.top)}}A.push(v.bottom-v.top)}}function Eu(u,f,v){if(u.line==f)return{map:u.measure.map,cache:u.measure.cache};if(u.rest){for(var g=0;g<u.rest.length;g++)if(u.rest[g]==f)return{map:u.measure.maps[g],cache:u.measure.caches[g]};for(var T=0;T<u.rest.length;T++)if(Ge(u.rest[T])>v)return{map:u.measure.maps[T],cache:u.measure.caches[T],before:!0}}}function uh(u,f){f=Jn(f);var v=Ge(f),g=u.display.externalMeasured=new ta(u.doc,f,v);g.lineN=v;var T=g.built=gu(u,g);return g.text=T.pre,z(u.display.lineMeasure,T.pre),g}function Tu(u,f,v,g){return gr(u,Ns(u,f),v,g)}function wc(u,f){if(f>=u.display.viewFrom&&f<u.display.viewTo)return u.display.view[G(u,f)];var v=u.display.externalMeasured;if(v&&f>=v.lineN&&f<v.lineN+v.size)return v}function Ns(u,f){var v=Ge(f),g=wc(u,v);g&&!g.text?g=null:g&&g.changes&&(Vo(u,g,v,l(u)),u.curOp.forceUpdate=!0),g||(g=uh(u,f));var T=Eu(g,f,v);return{line:f,view:g,rect:null,map:T.map,cache:T.cache,before:T.before,hasHeights:!1}}function gr(u,f,v,g,T){f.before&&(v=-1);var A=v+(g||""),N;return f.cache.hasOwnProperty(A)?N=f.cache[A]:(f.rect||(f.rect=f.view.text.getBoundingClientRect()),f.hasHeights||(ch(u,f.view,f.rect),f.hasHeights=!0),N=dh(u,f,v,g),N.bogus||(f.cache[A]=N)),{left:N.left,right:N.right,top:T?N.rtop:N.top,bottom:T?N.rbottom:N.bottom}}var wu={left:0,right:0,top:0,bottom:0};function Cu(u,f,v){for(var g,T,A,N,U,H,Y=0;Y<u.length;Y+=3)if(U=u[Y],H=u[Y+1],f<U?(T=0,A=1,N="left"):f<H?(T=f-U,A=T+1):(Y==u.length-3||f==H&&u[Y+3]>f)&&(A=H-U,T=A-1,f>=H&&(N="right")),T!=null){if(g=u[Y+2],U==H&&v==(g.insertLeft?"left":"right")&&(N=v),v=="left"&&T==0)for(;Y&&u[Y-2]==u[Y-3]&&u[Y-1].insertLeft;)g=u[(Y-=3)+2],N="left";if(v=="right"&&T==H-U)for(;Y<u.length-3&&u[Y+3]==u[Y+4]&&!u[Y+5].insertLeft;)g=u[(Y+=3)+2],N="right";break}return{node:g,start:T,end:A,collapse:N,coverStart:U,coverEnd:H}}function Vi(u,f){var v=wu;if(f=="left")for(var g=0;g<u.length&&(v=u[g]).left==v.right;g++);else for(var T=u.length-1;T>=0&&(v=u[T]).left==v.right;T--);return v}function dh(u,f,v,g){var T=Cu(f.map,v,g),A=T.node,N=T.start,U=T.end,H=T.collapse,Y;if(A.nodeType==3){for(var ie=0;ie<4;ie++){for(;N&&ot(f.line.text.charAt(T.coverStart+N));)--N;for(;T.coverStart+U<T.coverEnd&&ot(f.line.text.charAt(T.coverStart+U));)++U;if(c&&d<9&&N==0&&U==T.coverEnd-T.coverStart?Y=A.parentNode.getBoundingClientRect():Y=Vi(ue(A,N,U).getClientRects(),g),Y.left||Y.right||N==0)break;U=N,N=N-1,H="right"}c&&d<11&&(Y=ae(u.display.measure,Y))}else{N>0&&(H=g="right");var le;u.options.lineWrapping&&(le=A.getClientRects()).length>1?Y=le[g=="right"?le.length-1:0]:Y=A.getBoundingClientRect()}if(c&&d<9&&!N&&(!Y||!Y.left&&!Y.right)){var ye=A.parentNode.getClientRects()[0];ye?Y={left:ye.left,right:ye.left+Pe(u.display),top:ye.top,bottom:ye.bottom}:Y=wu}for(var me=Y.top-f.rect.top,Se=Y.bottom-f.rect.top,Ie=(me+Se)/2,Fe=f.view.measure.heights,Ye=0;Ye<Fe.length-1&&!(Ie<Fe[Ye]);Ye++);var et=Ye?Fe[Ye-1]:0,We=Fe[Ye],st={left:(H=="right"?Y.right:Y.left)-f.rect.left,right:(H=="left"?Y.left:Y.right)-f.rect.left,top:et,bottom:We};return!Y.left&&!Y.right&&(st.bogus=!0),u.options.singleCursorHeightPerLine||(st.rtop=me,st.rbottom=Se),st}function ae(u,f){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Zd(u))return f;var v=screen.logicalXDPI/screen.deviceXDPI,g=screen.logicalYDPI/screen.deviceYDPI;return{left:f.left*v,right:f.right*v,top:f.top*g,bottom:f.bottom*g}}function ze(u){if(u.measure&&(u.measure.cache={},u.measure.heights=null,u.rest))for(var f=0;f<u.rest.length;f++)u.measure.caches[f]={}}function Ri(u){u.display.externalMeasure=null,j(u.display.lineMeasure);for(var f=0;f<u.display.view.length;f++)ze(u.display.view[f])}function qo(u){Ri(u),u.display.cachedCharWidth=u.display.cachedTextHeight=u.display.cachedPaddingH=null,u.options.lineWrapping||(u.display.maxLineChanged=!0),u.display.lineNumChars=null}function Su(){return y&&R?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ku(){return y&&R?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Cc(u){var f=Jn(u),v=f.widgets,g=0;if(v)for(var T=0;T<v.length;++T)v[T].above&&(g+=Kr(v[T]));return g}function Il(u,f,v,g,T){if(!T){var A=Cc(f);v.top+=A,v.bottom+=A}if(g=="line")return v;g||(g="local");var N=Ar(f);if(g=="local"?N+=Rl(u.display):N-=u.display.viewOffset,g=="page"||g=="window"){var U=u.display.lineSpace.getBoundingClientRect();N+=U.top+(g=="window"?0:ku());var H=U.left+(g=="window"?0:Su());v.left+=H,v.right+=H}return v.top+=N,v.bottom+=N,v}function Au(u,f,v){if(v=="div")return f;var g=f.left,T=f.top;if(v=="page")g-=Su(),T-=ku();else if(v=="local"||!v){var A=u.display.sizer.getBoundingClientRect();g+=A.left,T+=A.top}var N=u.display.lineSpace.getBoundingClientRect();return{left:g-N.left,top:T-N.top}}function Dl(u,f,v,g,T){return g||(g=lt(u.doc,f.line)),Il(u,g,Tu(u,g,f.ch,T),v)}function Zr(u,f,v,g,T,A){g=g||lt(u.doc,f.line),T||(T=Ns(u,g));function N(Se,Ie){var Fe=gr(u,T,Se,Ie?"right":"left",A);return Ie?Fe.left=Fe.right:Fe.right=Fe.left,Il(u,g,Fe,v)}var U=xt(g,u.doc.direction),H=f.ch,Y=f.sticky;if(H>=g.text.length?(H=g.text.length,Y="before"):H<=0&&(H=0,Y="after"),!U)return N(Y=="before"?H-1:H,Y=="before");function ie(Se,Ie,Fe){var Ye=U[Ie],et=Ye.level==1;return N(Fe?Se-1:Se,et!=Fe)}var le=hi(U,H,Y),ye=wi,me=ie(H,le,Y=="before");return ye!=null&&(me.other=ie(H,ye,Y!="before")),me}function Ru(u,f){var v=0;f=bt(u.doc,f),u.options.lineWrapping||(v=Pe(u.display)*f.ch);var g=lt(u.doc,f.line),T=Ar(g)+Rl(u.display);return{left:v,right:v,top:T,bottom:T+g.height}}function Sc(u,f,v,g,T){var A=xe(u,f,v);return A.xRel=T,g&&(A.outside=g),A}function kc(u,f,v){var g=u.doc;if(v+=u.display.viewOffset,v<0)return Sc(g.first,0,null,-1,-1);var T=os(g,v),A=g.first+g.size-1;if(T>A)return Sc(g.first+g.size-1,lt(g,A).text.length,null,1,1);f<0&&(f=0);for(var N=lt(g,T);;){var U=hh(u,N,T,f,v),H=rh(N,U.ch+(U.xRel>0||U.outside>0?1:0));if(!H)return U;var Y=H.find(1);if(Y.line==T)return Y;N=lt(g,T=Y.line)}}function Iu(u,f,v,g){g-=Cc(f);var T=f.text.length,A=yi(function(N){return gr(u,v,N-1).bottom<=g},T,0);return T=yi(function(N){return gr(u,v,N).top>g},A,T),{begin:A,end:T}}function Du(u,f,v,g){v||(v=Ns(u,f));var T=Il(u,f,gr(u,v,g),"line").top;return Iu(u,f,v,T)}function Ac(u,f,v,g){return u.bottom<=v?!1:u.top>v?!0:(g?u.left:u.right)>f}function hh(u,f,v,g,T){T-=Ar(f);var A=Ns(u,f),N=Cc(f),U=0,H=f.text.length,Y=!0,ie=xt(f,u.doc.direction);if(ie){var le=(u.options.lineWrapping?qi:fh)(u,f,v,A,ie,g,T);Y=le.level!=1,U=Y?le.from:le.to-1,H=Y?le.to:le.from-1}var ye=null,me=null,Se=yi(function(vt){var mt=gr(u,A,vt);return mt.top+=N,mt.bottom+=N,Ac(mt,g,T,!1)?(mt.top<=T&&mt.left<=g&&(ye=vt,me=mt),!0):!1},U,H),Ie,Fe,Ye=!1;if(me){var et=g-me.left<me.right-g,We=et==Y;Se=ye+(We?0:1),Fe=We?"after":"before",Ie=et?me.left:me.right}else{!Y&&(Se==H||Se==U)&&Se++,Fe=Se==0?"after":Se==f.text.length?"before":gr(u,A,Se-(Y?1:0)).bottom+N<=T==Y?"after":"before";var st=Zr(u,xe(v,Se,Fe),"line",f,A);Ie=st.left,Ye=T<st.top?-1:T>=st.bottom?1:0}return Se=Ei(f.text,Se,1),Sc(v,Se,Fe,Ye,g-Ie)}function fh(u,f,v,g,T,A,N){var U=yi(function(le){var ye=T[le],me=ye.level!=1;return Ac(Zr(u,xe(v,me?ye.to:ye.from,me?"before":"after"),"line",f,g),A,N,!0)},0,T.length-1),H=T[U];if(U>0){var Y=H.level!=1,ie=Zr(u,xe(v,Y?H.from:H.to,Y?"after":"before"),"line",f,g);Ac(ie,A,N,!0)&&ie.top>N&&(H=T[U-1])}return H}function qi(u,f,v,g,T,A,N){var U=Iu(u,f,g,N),H=U.begin,Y=U.end;/\s/.test(f.text.charAt(Y-1))&&Y--;for(var ie=null,le=null,ye=0;ye<T.length;ye++){var me=T[ye];if(!(me.from>=Y||me.to<=H)){var Se=me.level!=1,Ie=gr(u,g,Se?Math.min(Y,me.to)-1:Math.max(H,me.from)).right,Fe=Ie<A?A-Ie+1e9:Ie-A;(!ie||le>Fe)&&(ie=me,le=Fe)}}return ie||(ie=T[T.length-1]),ie.from<H&&(ie={from:H,to:ie.to,level:ie.level}),ie.to>Y&&(ie={from:ie.from,to:Y,level:ie.level}),ie}var Qt;function Dr(u){if(u.cachedTextHeight!=null)return u.cachedTextHeight;if(Qt==null){Qt=X("pre",null,"CodeMirror-line-like");for(var f=0;f<49;++f)Qt.appendChild(document.createTextNode("x")),Qt.appendChild(X("br"));Qt.appendChild(document.createTextNode("x"))}z(u.measure,Qt);var v=Qt.offsetHeight/50;return v>3&&(u.cachedTextHeight=v),j(u.measure),v||1}function Pe(u){if(u.cachedCharWidth!=null)return u.cachedCharWidth;var f=X("span","xxxxxxxxxx"),v=X("pre",[f],"CodeMirror-line-like");z(u.measure,v);var g=f.getBoundingClientRect(),T=(g.right-g.left)/10;return T>2&&(u.cachedCharWidth=T),T||10}function l(u){for(var f=u.display,v={},g={},T=f.gutters.clientLeft,A=f.gutters.firstChild,N=0;A;A=A.nextSibling,++N){var U=u.display.gutterSpecs[N].className;v[U]=A.offsetLeft+A.clientLeft+T,g[U]=A.clientWidth}return{fixedPos:h(f),gutterTotalWidth:f.gutters.offsetWidth,gutterLeft:v,gutterWidth:g,wrapperWidth:f.wrapper.clientWidth}}function h(u){return u.scroller.getBoundingClientRect().left-u.sizer.getBoundingClientRect().left}function b(u){var f=Dr(u.display),v=u.options.lineWrapping,g=v&&Math.max(5,u.display.scroller.clientWidth/Pe(u.display)-3);return function(T){if(jr(u.doc,T))return 0;var A=0;if(T.widgets)for(var N=0;N<T.widgets.length;N++)T.widgets[N].height&&(A+=T.widgets[N].height);return v?A+(Math.ceil(T.text.length/g)||1)*f:A+f}}function w(u){var f=u.doc,v=b(u);f.iter(function(g){var T=v(g);T!=g.height&&fr(g,T)})}function D(u,f,v,g){var T=u.display;if(!v&&An(f).getAttribute("cm-not-content")=="true")return null;var A,N,U=T.lineSpace.getBoundingClientRect();try{A=f.clientX-U.left,N=f.clientY-U.top}catch{return null}var H=kc(u,A,N),Y;if(g&&H.xRel>0&&(Y=lt(u.doc,H.line).text).length==H.ch){var ie=ne(Y,Y.length,u.options.tabSize)-Y.length;H=xe(H.line,Math.max(0,Math.round((A-tr(u.display).left)/Pe(u.display))-ie))}return H}function G(u,f){if(f>=u.display.viewTo||(f-=u.display.viewFrom,f<0))return null;for(var v=u.display.view,g=0;g<v.length;g++)if(f-=v[g].size,f<0)return g}function te(u,f,v,g){f==null&&(f=u.doc.first),v==null&&(v=u.doc.first+u.doc.size),g||(g=0);var T=u.display;if(g&&v<T.viewTo&&(T.updateLineNumbers==null||T.updateLineNumbers>f)&&(T.updateLineNumbers=f),u.curOp.viewChanged=!0,f>=T.viewTo)vn&&Ps(u.doc,f)<T.viewTo&&Ne(u);else if(v<=T.viewFrom)vn&&In(u.doc,v+g)>T.viewFrom?Ne(u):(T.viewFrom+=g,T.viewTo+=g);else if(f<=T.viewFrom&&v>=T.viewTo)Ne(u);else if(f<=T.viewFrom){var A=Ct(u,v,v+g,1);A?(T.view=T.view.slice(A.index),T.viewFrom=A.lineN,T.viewTo+=g):Ne(u)}else if(v>=T.viewTo){var N=Ct(u,f,f,-1);N?(T.view=T.view.slice(0,N.index),T.viewTo=N.lineN):Ne(u)}else{var U=Ct(u,f,f,-1),H=Ct(u,v,v+g,1);U&&H?(T.view=T.view.slice(0,U.index).concat(pr(u,U.lineN,H.lineN)).concat(T.view.slice(H.index)),T.viewTo+=g):Ne(u)}var Y=T.externalMeasured;Y&&(v<Y.lineN?Y.lineN+=g:f<Y.lineN+Y.size&&(T.externalMeasured=null))}function Te(u,f,v){u.curOp.viewChanged=!0;var g=u.display,T=u.display.externalMeasured;if(T&&f>=T.lineN&&f<T.lineN+T.size&&(g.externalMeasured=null),!(f<g.viewFrom||f>=g.viewTo)){var A=g.view[G(u,f)];if(A.node!=null){var N=A.changes||(A.changes=[]);J(N,v)==-1&&N.push(v)}}}function Ne(u){u.display.viewFrom=u.display.viewTo=u.doc.first,u.display.view=[],u.display.viewOffset=0}function Ct(u,f,v,g){var T=G(u,f),A,N=u.display.view;if(!vn||v==u.doc.first+u.doc.size)return{index:T,lineN:v};for(var U=u.display.viewFrom,H=0;H<T;H++)U+=N[H].size;if(U!=f){if(g>0){if(T==N.length-1)return null;A=U+N[T].size-f,T++}else A=U-f;f+=A,v+=A}for(;Ps(u.doc,v)!=v;){if(T==(g<0?0:N.length-1))return null;v+=g*N[T-(g<0?1:0)].size,T+=g}return{index:T,lineN:v}}function Jt(u,f,v){var g=u.display,T=g.view;T.length==0||f>=g.viewTo||v<=g.viewFrom?(g.view=pr(u,f,v),g.viewFrom=f):(g.viewFrom>f?g.view=pr(u,f,g.viewFrom).concat(g.view):g.viewFrom<f&&(g.view=g.view.slice(G(u,f))),g.viewFrom=f,g.viewTo<v?g.view=g.view.concat(pr(u,g.viewTo,v)):g.viewTo>v&&(g.view=g.view.slice(0,G(u,v)))),g.viewTo=v}function ir(u){for(var f=u.display.view,v=0,g=0;g<f.length;g++){var T=f[g];!T.hidden&&(!T.node||T.changes)&&++v}return v}function Dn(u){u.display.input.showSelection(u.display.input.prepareSelection())}function xu(u,f){f===void 0&&(f=!0);var v=u.doc,g={},T=g.cursors=document.createDocumentFragment(),A=g.selection=document.createDocumentFragment(),N=u.options.$customCursor;N&&(f=!0);for(var U=0;U<v.sel.ranges.length;U++)if(!(!f&&U==v.sel.primIndex)){var H=v.sel.ranges[U];if(!(H.from().line>=u.display.viewTo||H.to().line<u.display.viewFrom)){var Y=H.empty();if(N){var ie=N(u,H);ie&&mo(u,ie,T)}else(Y||u.options.showCursorWhenSelecting)&&mo(u,H.head,T);Y||Ua(u,H,A)}}return g}function mo(u,f,v){var g=Zr(u,f,"div",null,null,!u.options.singleCursorHeightPerLine),T=v.appendChild(X("div"," ","CodeMirror-cursor"));if(T.style.left=g.left+"px",T.style.top=g.top+"px",T.style.height=Math.max(0,g.bottom-g.top)*u.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(u.getWrapperElement().className)){var A=Dl(u,f,"div",null,null),N=A.right-A.left;T.style.width=(N>0?N:u.defaultCharWidth())+"px"}if(g.other){var U=v.appendChild(X("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));U.style.display="",U.style.left=g.other.left+"px",U.style.top=g.other.top+"px",U.style.height=(g.other.bottom-g.other.top)*.85+"px"}}function xl(u,f){return u.top-f.top||u.left-f.left}function Ua(u,f,v){var g=u.display,T=u.doc,A=document.createDocumentFragment(),N=tr(u.display),U=N.left,H=Math.max(g.sizerWidth,Ga(u)-g.sizer.offsetLeft)-N.right,Y=T.direction=="ltr";function ie(We,st,vt,mt){st<0&&(st=0),st=Math.round(st),mt=Math.round(mt),A.appendChild(X("div",null,"CodeMirror-selected","position: absolute; left: "+We+`px;
                             top: `+st+"px; width: "+(vt??H-We)+`px;
                             height: `+(mt-st)+"px"))}function le(We,st,vt){var mt=lt(T,We),qt=mt.text.length,Yi,_r;function bn(Yn,Ls){return Dl(u,xe(We,Yn),"div",mt,Ls)}function ra(Yn,Ls,xr){var nr=Du(u,mt,null,Yn),Wn=Ls=="ltr"==(xr=="after")?"left":"right",xn=xr=="after"?nr.begin:nr.end-(/\s/.test(mt.text.charAt(nr.end-1))?2:1);return bn(xn,Wn)[Wn]}var Us=xt(mt,T.direction);return Ti(Us,st||0,vt??qt,function(Yn,Ls,xr,nr){var Wn=xr=="ltr",xn=bn(Yn,Wn?"left":"right"),Bs=bn(Ls-1,Wn?"right":"left"),mp=st==null&&Yn==0,Uu=vt==null&&Ls==qt,Jr=nr==0,Ml=!Us||nr==Us.length-1;if(Bs.top-xn.top<=3){var Er=(Y?mp:Uu)&&Jr,y1=(Y?Uu:mp)&&Ml,Dc=Er?U:(Wn?xn:Bs).left,vh=y1?H:(Wn?Bs:xn).right;ie(Dc,xn.top,vh-Dc,xn.bottom)}else{var bh,bs,yp,g1;Wn?(bh=Y&&mp&&Jr?U:xn.left,bs=Y?H:ra(Yn,xr,"before"),yp=Y?U:ra(Ls,xr,"after"),g1=Y&&Uu&&Ml?H:Bs.right):(bh=Y?ra(Yn,xr,"before"):U,bs=!Y&&mp&&Jr?H:xn.right,yp=!Y&&Uu&&Ml?U:Bs.left,g1=Y?ra(Ls,xr,"after"):H),ie(bh,xn.top,bs-bh,xn.bottom),xn.bottom<Bs.top&&ie(U,xn.bottom,null,Bs.top),ie(yp,Bs.top,g1-yp,Bs.bottom)}(!Yi||xl(xn,Yi)<0)&&(Yi=xn),xl(Bs,Yi)<0&&(Yi=Bs),(!_r||xl(xn,_r)<0)&&(_r=xn),xl(Bs,_r)<0&&(_r=Bs)}),{start:Yi,end:_r}}var ye=f.from(),me=f.to();if(ye.line==me.line)le(ye.line,ye.ch,me.ch);else{var Se=lt(T,ye.line),Ie=lt(T,me.line),Fe=Jn(Se)==Jn(Ie),Ye=le(ye.line,ye.ch,Fe?Se.text.length+1:null).end,et=le(me.line,Fe?0:null,me.ch).start;Fe&&(Ye.top<et.top-2?(ie(Ye.right,Ye.top,null,Ye.bottom),ie(U,et.top,et.left,et.bottom)):ie(Ye.right,Ye.top,et.left-Ye.right,Ye.bottom)),Ye.bottom<et.top&&ie(U,Ye.bottom,null,et.top)}v.appendChild(A)}function YT(u){if(u.state.focused){var f=u.display;clearInterval(f.blinker);var v=!0;f.cursorDiv.style.visibility="",u.options.cursorBlinkRate>0?f.blinker=setInterval(function(){u.hasFocus()||np(u),f.cursorDiv.style.visibility=(v=!v)?"":"hidden"},u.options.cursorBlinkRate):u.options.cursorBlinkRate<0&&(f.cursorDiv.style.visibility="hidden")}}function rI(u){u.hasFocus()||(u.display.input.focus(),u.state.focused||jT(u))}function WT(u){u.state.delayingBlurEvent=!0,setTimeout(function(){u.state.delayingBlurEvent&&(u.state.delayingBlurEvent=!1,u.state.focused&&np(u))},100)}function jT(u,f){u.state.delayingBlurEvent&&!u.state.draggingText&&(u.state.delayingBlurEvent=!1),u.options.readOnly!="nocursor"&&(u.state.focused||(Ot(u,"focus",u,f),u.state.focused=!0,de(u.display.wrapper,"CodeMirror-focused"),!u.curOp&&u.display.selForContextMenu!=u.doc.sel&&(u.display.input.reset(),p&&setTimeout(function(){return u.display.input.reset(!0)},20)),u.display.input.receivedFocus()),YT(u))}function np(u,f){u.state.delayingBlurEvent||(u.state.focused&&(Ot(u,"blur",u,f),u.state.focused=!1,B(u.display.wrapper,"CodeMirror-focused")),clearInterval(u.display.blinker),setTimeout(function(){u.state.focused||(u.display.shift=!1)},150))}function Bb(u){for(var f=u.display,v=f.lineDiv.offsetTop,g=Math.max(0,f.scroller.getBoundingClientRect().top),T=f.lineDiv.getBoundingClientRect().top,A=0,N=0;N<f.view.length;N++){var U=f.view[N],H=u.options.lineWrapping,Y=void 0,ie=0;if(!U.hidden){if(T+=U.line.height,c&&d<8){var le=U.node.offsetTop+U.node.offsetHeight;Y=le-v,v=le}else{var ye=U.node.getBoundingClientRect();Y=ye.bottom-ye.top,!H&&U.text.firstChild&&(ie=U.text.firstChild.getBoundingClientRect().right-ye.left-1)}var me=U.line.height-Y;if((me>.005||me<-.005)&&(T<g&&(A-=me),fr(U.line,Y),sI(U.line),U.rest))for(var Se=0;Se<U.rest.length;Se++)sI(U.rest[Se]);if(ie>u.display.sizerWidth){var Ie=Math.ceil(ie/Pe(u.display));Ie>u.display.maxLineLength&&(u.display.maxLineLength=Ie,u.display.maxLine=U.line,u.display.maxLineChanged=!0)}}}Math.abs(A)>2&&(f.scroller.scrollTop+=A)}function sI(u){if(u.widgets)for(var f=0;f<u.widgets.length;++f){var v=u.widgets[f],g=v.node.parentNode;g&&(v.height=g.offsetHeight)}}function Fb(u,f,v){var g=v&&v.top!=null?Math.max(0,v.top):u.scroller.scrollTop;g=Math.floor(g-Rl(u));var T=v&&v.bottom!=null?v.bottom:g+u.wrapper.clientHeight,A=os(f,g),N=os(f,T);if(v&&v.ensure){var U=v.ensure.from.line,H=v.ensure.to.line;U<A?(A=U,N=os(f,Ar(lt(f,U))+u.wrapper.clientHeight)):Math.min(H,f.lastLine())>=N&&(A=os(f,Ar(lt(f,H))-u.wrapper.clientHeight),N=H)}return{from:A,to:Math.max(N,A+1)}}function _H(u,f){if(!ge(u,"scrollCursorIntoView")){var v=u.display,g=v.sizer.getBoundingClientRect(),T=null;if(f.top+g.top<0?T=!0:f.bottom+g.top>(window.innerHeight||document.documentElement.clientHeight)&&(T=!1),T!=null&&!S){var A=X("div","​",null,`position: absolute;
                         top: `+(f.top-v.viewOffset-Rl(u.display))+`px;
                         height: `+(f.bottom-f.top+gs(u)+v.barHeight)+`px;
                         left: `+f.left+"px; width: "+Math.max(2,f.right-f.left)+"px;");u.display.lineSpace.appendChild(A),A.scrollIntoView(T),u.display.lineSpace.removeChild(A)}}}function EH(u,f,v,g){g==null&&(g=0);var T;!u.options.lineWrapping&&f==v&&(v=f.sticky=="before"?xe(f.line,f.ch+1,"before"):f,f=f.ch?xe(f.line,f.sticky=="before"?f.ch-1:f.ch,"after"):f);for(var A=0;A<5;A++){var N=!1,U=Zr(u,f),H=!v||v==f?U:Zr(u,v);T={left:Math.min(U.left,H.left),top:Math.min(U.top,H.top)-g,right:Math.max(U.left,H.left),bottom:Math.max(U.bottom,H.bottom)+g};var Y=zT(u,T),ie=u.doc.scrollTop,le=u.doc.scrollLeft;if(Y.scrollTop!=null&&(vy(u,Y.scrollTop),Math.abs(u.doc.scrollTop-ie)>1&&(N=!0)),Y.scrollLeft!=null&&(ph(u,Y.scrollLeft),Math.abs(u.doc.scrollLeft-le)>1&&(N=!0)),!N)break}return T}function TH(u,f){var v=zT(u,f);v.scrollTop!=null&&vy(u,v.scrollTop),v.scrollLeft!=null&&ph(u,v.scrollLeft)}function zT(u,f){var v=u.display,g=Dr(u.display);f.top<0&&(f.top=0);var T=u.curOp&&u.curOp.scrollTop!=null?u.curOp.scrollTop:v.scroller.scrollTop,A=qn(u),N={};f.bottom-f.top>A&&(f.bottom=f.top+A);var U=u.doc.height+Tc(v),H=f.top<g,Y=f.bottom>U-g;if(f.top<T)N.scrollTop=H?0:f.top;else if(f.bottom>T+A){var ie=Math.min(f.top,(Y?U:f.bottom)-A);ie!=T&&(N.scrollTop=ie)}var le=u.options.fixedGutter?0:v.gutters.offsetWidth,ye=u.curOp&&u.curOp.scrollLeft!=null?u.curOp.scrollLeft:v.scroller.scrollLeft-le,me=Ga(u)-v.gutters.offsetWidth,Se=f.right-f.left>me;return Se&&(f.right=f.left+me),f.left<10?N.scrollLeft=0:f.left<ye?N.scrollLeft=Math.max(0,f.left+le-(Se?0:10)):f.right>me+ye-3&&(N.scrollLeft=f.right+(Se?0:10)-me),N}function XT(u,f){f!=null&&($b(u),u.curOp.scrollTop=(u.curOp.scrollTop==null?u.doc.scrollTop:u.curOp.scrollTop)+f)}function rp(u){$b(u);var f=u.getCursor();u.curOp.scrollToPos={from:f,to:f,margin:u.options.cursorScrollMargin}}function gy(u,f,v){(f!=null||v!=null)&&$b(u),f!=null&&(u.curOp.scrollLeft=f),v!=null&&(u.curOp.scrollTop=v)}function wH(u,f){$b(u),u.curOp.scrollToPos=f}function $b(u){var f=u.curOp.scrollToPos;if(f){u.curOp.scrollToPos=null;var v=Ru(u,f.from),g=Ru(u,f.to);aI(u,v,g,f.margin)}}function aI(u,f,v,g){var T=zT(u,{left:Math.min(f.left,v.left),top:Math.min(f.top,v.top)-g,right:Math.max(f.right,v.right),bottom:Math.max(f.bottom,v.bottom)+g});gy(u,T.scrollLeft,T.scrollTop)}function vy(u,f){Math.abs(u.doc.scrollTop-f)<2||(r||ZT(u,{top:f}),oI(u,f,!0),r&&ZT(u),Ey(u,100))}function oI(u,f,v){f=Math.max(0,Math.min(u.display.scroller.scrollHeight-u.display.scroller.clientHeight,f)),!(u.display.scroller.scrollTop==f&&!v)&&(u.doc.scrollTop=f,u.display.scrollbars.setScrollTop(f),u.display.scroller.scrollTop!=f&&(u.display.scroller.scrollTop=f))}function ph(u,f,v,g){f=Math.max(0,Math.min(f,u.display.scroller.scrollWidth-u.display.scroller.clientWidth)),!((v?f==u.doc.scrollLeft:Math.abs(u.doc.scrollLeft-f)<2)&&!g)&&(u.doc.scrollLeft=f,hI(u),u.display.scroller.scrollLeft!=f&&(u.display.scroller.scrollLeft=f),u.display.scrollbars.setScrollLeft(f))}function by(u){var f=u.display,v=f.gutters.offsetWidth,g=Math.round(u.doc.height+Tc(u.display));return{clientHeight:f.scroller.clientHeight,viewHeight:f.wrapper.clientHeight,scrollWidth:f.scroller.scrollWidth,clientWidth:f.scroller.clientWidth,viewWidth:f.wrapper.clientWidth,barLeft:u.options.fixedGutter?v:0,docHeight:g,scrollHeight:g+gs(u)+f.barHeight,nativeBarWidth:f.nativeBarWidth,gutterWidth:v}}var mh=function(u,f,v){this.cm=v;var g=this.vert=X("div",[X("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),T=this.horiz=X("div",[X("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");g.tabIndex=T.tabIndex=-1,u(g),u(T),Ke(g,"scroll",function(){g.clientHeight&&f(g.scrollTop,"vertical")}),Ke(T,"scroll",function(){T.clientWidth&&f(T.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,c&&d<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};mh.prototype.update=function(u){var f=u.scrollWidth>u.clientWidth+1,v=u.scrollHeight>u.clientHeight+1,g=u.nativeBarWidth;if(v){this.vert.style.display="block",this.vert.style.bottom=f?g+"px":"0";var T=u.viewHeight-(f?g:0);this.vert.firstChild.style.height=Math.max(0,u.scrollHeight-u.clientHeight+T)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(f){this.horiz.style.display="block",this.horiz.style.right=v?g+"px":"0",this.horiz.style.left=u.barLeft+"px";var A=u.viewWidth-u.barLeft-(v?g:0);this.horiz.firstChild.style.width=Math.max(0,u.scrollWidth-u.clientWidth+A)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&u.clientHeight>0&&(g==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:v?g:0,bottom:f?g:0}},mh.prototype.setScrollLeft=function(u){this.horiz.scrollLeft!=u&&(this.horiz.scrollLeft=u),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},mh.prototype.setScrollTop=function(u){this.vert.scrollTop!=u&&(this.vert.scrollTop=u),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},mh.prototype.zeroWidthHack=function(){var u=I&&!C?"12px":"18px";this.horiz.style.height=this.vert.style.width=u,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ce,this.disableVert=new ce},mh.prototype.enableZeroWidthBar=function(u,f,v){u.style.pointerEvents="auto";function g(){var T=u.getBoundingClientRect(),A=v=="vert"?document.elementFromPoint(T.right-1,(T.top+T.bottom)/2):document.elementFromPoint((T.right+T.left)/2,T.bottom-1);A!=u?u.style.pointerEvents="none":f.set(1e3,g)}f.set(1e3,g)},mh.prototype.clear=function(){var u=this.horiz.parentNode;u.removeChild(this.horiz),u.removeChild(this.vert)};var _y=function(){};_y.prototype.update=function(){return{bottom:0,right:0}},_y.prototype.setScrollLeft=function(){},_y.prototype.setScrollTop=function(){},_y.prototype.clear=function(){};function sp(u,f){f||(f=by(u));var v=u.display.barWidth,g=u.display.barHeight;lI(u,f);for(var T=0;T<4&&v!=u.display.barWidth||g!=u.display.barHeight;T++)v!=u.display.barWidth&&u.options.lineWrapping&&Bb(u),lI(u,by(u)),v=u.display.barWidth,g=u.display.barHeight}function lI(u,f){var v=u.display,g=v.scrollbars.update(f);v.sizer.style.paddingRight=(v.barWidth=g.right)+"px",v.sizer.style.paddingBottom=(v.barHeight=g.bottom)+"px",v.heightForcer.style.borderBottom=g.bottom+"px solid transparent",g.right&&g.bottom?(v.scrollbarFiller.style.display="block",v.scrollbarFiller.style.height=g.bottom+"px",v.scrollbarFiller.style.width=g.right+"px"):v.scrollbarFiller.style.display="",g.bottom&&u.options.coverGutterNextToScrollbar&&u.options.fixedGutter?(v.gutterFiller.style.display="block",v.gutterFiller.style.height=g.bottom+"px",v.gutterFiller.style.width=f.gutterWidth+"px"):v.gutterFiller.style.display=""}var cI={native:mh,null:_y};function uI(u){u.display.scrollbars&&(u.display.scrollbars.clear(),u.display.scrollbars.addClass&&B(u.display.wrapper,u.display.scrollbars.addClass)),u.display.scrollbars=new cI[u.options.scrollbarStyle](function(f){u.display.wrapper.insertBefore(f,u.display.scrollbarFiller),Ke(f,"mousedown",function(){u.state.focused&&setTimeout(function(){return u.display.input.focus()},0)}),f.setAttribute("cm-not-content","true")},function(f,v){v=="horizontal"?ph(u,f):vy(u,f)},u),u.display.scrollbars.addClass&&de(u.display.wrapper,u.display.scrollbars.addClass)}var CH=0;function yh(u){u.curOp={cm:u,viewChanged:!1,startHeight:u.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++CH,markArrays:null},kl(u.curOp)}function gh(u){var f=u.curOp;f&&mr(f,function(v){for(var g=0;g<v.ops.length;g++)v.ops[g].cm.curOp=null;SH(v)})}function SH(u){for(var f=u.ops,v=0;v<f.length;v++)kH(f[v]);for(var g=0;g<f.length;g++)AH(f[g]);for(var T=0;T<f.length;T++)RH(f[T]);for(var A=0;A<f.length;A++)IH(f[A]);for(var N=0;N<f.length;N++)DH(f[N])}function kH(u){var f=u.cm,v=f.display;MH(f),u.updateMaxLine&&Rr(f),u.mustUpdate=u.viewChanged||u.forceUpdate||u.scrollTop!=null||u.scrollToPos&&(u.scrollToPos.from.line<v.viewFrom||u.scrollToPos.to.line>=v.viewTo)||v.maxLineChanged&&f.options.lineWrapping,u.update=u.mustUpdate&&new Hb(f,u.mustUpdate&&{top:u.scrollTop,ensure:u.scrollToPos},u.forceUpdate)}function AH(u){u.updatedDisplay=u.mustUpdate&&KT(u.cm,u.update)}function RH(u){var f=u.cm,v=f.display;u.updatedDisplay&&Bb(f),u.barMeasure=by(f),v.maxLineChanged&&!f.options.lineWrapping&&(u.adjustWidthTo=Tu(f,v.maxLine,v.maxLine.text.length).left+3,f.display.sizerWidth=u.adjustWidthTo,u.barMeasure.scrollWidth=Math.max(v.scroller.clientWidth,v.sizer.offsetLeft+u.adjustWidthTo+gs(f)+f.display.barWidth),u.maxScrollLeft=Math.max(0,v.sizer.offsetLeft+u.adjustWidthTo-Ga(f))),(u.updatedDisplay||u.selectionChanged)&&(u.preparedSelection=v.input.prepareSelection())}function IH(u){var f=u.cm;u.adjustWidthTo!=null&&(f.display.sizer.style.minWidth=u.adjustWidthTo+"px",u.maxScrollLeft<f.doc.scrollLeft&&ph(f,Math.min(f.display.scroller.scrollLeft,u.maxScrollLeft),!0),f.display.maxLineChanged=!1);var v=u.focus&&u.focus==_e();u.preparedSelection&&f.display.input.showSelection(u.preparedSelection,v),(u.updatedDisplay||u.startHeight!=f.doc.height)&&sp(f,u.barMeasure),u.updatedDisplay&&JT(f,u.barMeasure),u.selectionChanged&&YT(f),f.state.focused&&u.updateInput&&f.display.input.reset(u.typing),v&&rI(u.cm)}function DH(u){var f=u.cm,v=f.display,g=f.doc;if(u.updatedDisplay&&dI(f,u.update),v.wheelStartX!=null&&(u.scrollTop!=null||u.scrollLeft!=null||u.scrollToPos)&&(v.wheelStartX=v.wheelStartY=null),u.scrollTop!=null&&oI(f,u.scrollTop,u.forceScroll),u.scrollLeft!=null&&ph(f,u.scrollLeft,!0,!0),u.scrollToPos){var T=EH(f,bt(g,u.scrollToPos.from),bt(g,u.scrollToPos.to),u.scrollToPos.margin);_H(f,T)}var A=u.maybeHiddenMarkers,N=u.maybeUnhiddenMarkers;if(A)for(var U=0;U<A.length;++U)A[U].lines.length||Ot(A[U],"hide");if(N)for(var H=0;H<N.length;++H)N[H].lines.length&&Ot(N[H],"unhide");v.wrapper.offsetHeight&&(g.scrollTop=f.display.scroller.scrollTop),u.changeObjs&&Ot(f,"changes",f,u.changeObjs),u.update&&u.update.finish()}function na(u,f){if(u.curOp)return f();yh(u);try{return f()}finally{gh(u)}}function vr(u,f){return function(){if(u.curOp)return f.apply(u,arguments);yh(u);try{return f.apply(u,arguments)}finally{gh(u)}}}function vs(u){return function(){if(this.curOp)return u.apply(this,arguments);yh(this);try{return u.apply(this,arguments)}finally{gh(this)}}}function br(u){return function(){var f=this.cm;if(!f||f.curOp)return u.apply(this,arguments);yh(f);try{return u.apply(this,arguments)}finally{gh(f)}}}function Ey(u,f){u.doc.highlightFrontier<u.display.viewTo&&u.state.highlight.set(f,Z(xH,u))}function xH(u){var f=u.doc;if(!(f.highlightFrontier>=u.display.viewTo)){var v=+new Date+u.options.workTime,g=qr(u,f.highlightFrontier),T=[];f.iter(g.line,Math.min(f.first+f.size,u.display.viewTo+500),function(A){if(g.line>=u.display.viewFrom){var N=A.styles,U=A.text.length>u.options.maxHighlightLength?hr(f.mode,g.state):null,H=No(u,A,g,!0);U&&(g.state=U),A.styles=H.styles;var Y=A.styleClasses,ie=H.classes;ie?A.styleClasses=ie:Y&&(A.styleClasses=null);for(var le=!N||N.length!=A.styles.length||Y!=ie&&(!Y||!ie||Y.bgClass!=ie.bgClass||Y.textClass!=ie.textClass),ye=0;!le&&ye<N.length;++ye)le=N[ye]!=A.styles[ye];le&&T.push(g.line),A.stateAfter=g.save(),g.nextLine()}else A.text.length<=u.options.maxHighlightLength&&fo(u,A.text,g),A.stateAfter=g.line%5==0?g.save():null,g.nextLine();if(+new Date>v)return Ey(u,u.options.workDelay),!0}),f.highlightFrontier=g.line,f.modeFrontier=Math.max(f.modeFrontier,g.line),T.length&&na(u,function(){for(var A=0;A<T.length;A++)Te(u,T[A],"text")})}}var Hb=function(u,f,v){var g=u.display;this.viewport=f,this.visible=Fb(g,u.doc,f),this.editorIsHidden=!g.wrapper.offsetWidth,this.wrapperHeight=g.wrapper.clientHeight,this.wrapperWidth=g.wrapper.clientWidth,this.oldDisplayWidth=Ga(u),this.force=v,this.dims=l(u),this.events=[]};Hb.prototype.signal=function(u,f){Be(u,f)&&this.events.push(arguments)},Hb.prototype.finish=function(){for(var u=0;u<this.events.length;u++)Ot.apply(null,this.events[u])};function MH(u){var f=u.display;!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=gs(u)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=gs(u)+"px",f.scrollbarsClipped=!0)}function PH(u){if(u.hasFocus())return null;var f=_e();if(!f||!ve(u.display.lineDiv,f))return null;var v={activeElt:f};if(window.getSelection){var g=window.getSelection();g.anchorNode&&g.extend&&ve(u.display.lineDiv,g.anchorNode)&&(v.anchorNode=g.anchorNode,v.anchorOffset=g.anchorOffset,v.focusNode=g.focusNode,v.focusOffset=g.focusOffset)}return v}function OH(u){if(!(!u||!u.activeElt||u.activeElt==_e())&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&ve(document.body,u.anchorNode)&&ve(document.body,u.focusNode))){var f=window.getSelection(),v=document.createRange();v.setEnd(u.anchorNode,u.anchorOffset),v.collapse(!1),f.removeAllRanges(),f.addRange(v),f.extend(u.focusNode,u.focusOffset)}}function KT(u,f){var v=u.display,g=u.doc;if(f.editorIsHidden)return Ne(u),!1;if(!f.force&&f.visible.from>=v.viewFrom&&f.visible.to<=v.viewTo&&(v.updateLineNumbers==null||v.updateLineNumbers>=v.viewTo)&&v.renderedView==v.view&&ir(u)==0)return!1;fI(u)&&(Ne(u),f.dims=l(u));var T=g.first+g.size,A=Math.max(f.visible.from-u.options.viewportMargin,g.first),N=Math.min(T,f.visible.to+u.options.viewportMargin);v.viewFrom<A&&A-v.viewFrom<20&&(A=Math.max(g.first,v.viewFrom)),v.viewTo>N&&v.viewTo-N<20&&(N=Math.min(T,v.viewTo)),vn&&(A=Ps(u.doc,A),N=In(u.doc,N));var U=A!=v.viewFrom||N!=v.viewTo||v.lastWrapHeight!=f.wrapperHeight||v.lastWrapWidth!=f.wrapperWidth;Jt(u,A,N),v.viewOffset=Ar(lt(u.doc,v.viewFrom)),u.display.mover.style.top=v.viewOffset+"px";var H=ir(u);if(!U&&H==0&&!f.force&&v.renderedView==v.view&&(v.updateLineNumbers==null||v.updateLineNumbers>=v.viewTo))return!1;var Y=PH(u);return H>4&&(v.lineDiv.style.display="none"),NH(u,v.updateLineNumbers,f.dims),H>4&&(v.lineDiv.style.display=""),v.renderedView=v.view,OH(Y),j(v.cursorDiv),j(v.selectionDiv),v.gutters.style.height=v.sizer.style.minHeight=0,U&&(v.lastWrapHeight=f.wrapperHeight,v.lastWrapWidth=f.wrapperWidth,Ey(u,400)),v.updateLineNumbers=null,!0}function dI(u,f){for(var v=f.viewport,g=!0;;g=!1){if(!g||!u.options.lineWrapping||f.oldDisplayWidth==Ga(u)){if(v&&v.top!=null&&(v={top:Math.min(u.doc.height+Tc(u.display)-qn(u),v.top)}),f.visible=Fb(u.display,u.doc,v),f.visible.from>=u.display.viewFrom&&f.visible.to<=u.display.viewTo)break}else g&&(f.visible=Fb(u.display,u.doc,v));if(!KT(u,f))break;Bb(u);var T=by(u);Dn(u),sp(u,T),JT(u,T),f.force=!1}f.signal(u,"update",u),(u.display.viewFrom!=u.display.reportedViewFrom||u.display.viewTo!=u.display.reportedViewTo)&&(f.signal(u,"viewportChange",u,u.display.viewFrom,u.display.viewTo),u.display.reportedViewFrom=u.display.viewFrom,u.display.reportedViewTo=u.display.viewTo)}function ZT(u,f){var v=new Hb(u,f);if(KT(u,v)){Bb(u),dI(u,v);var g=by(u);Dn(u),sp(u,g),JT(u,g),v.finish()}}function NH(u,f,v){var g=u.display,T=u.options.lineNumbers,A=g.lineDiv,N=A.firstChild;function U(Se){var Ie=Se.nextSibling;return p&&I&&u.display.currentWheelTarget==Se?Se.style.display="none":Se.parentNode.removeChild(Se),Ie}for(var H=g.view,Y=g.viewFrom,ie=0;ie<H.length;ie++){var le=H[ie];if(!le.hidden)if(!le.node||le.node.parentNode!=A){var ye=lh(u,le,Y,v);A.insertBefore(ye,N)}else{for(;N!=le.node;)N=U(N);var me=T&&f!=null&&f<=Y&&le.lineNumber;le.changes&&(J(le.changes,"gutter")>-1&&(me=!1),Vo(u,le,Y,v)),me&&(j(le.lineNumber),le.lineNumber.appendChild(document.createTextNode(kr(u.options,Y)))),N=le.node.nextSibling}Y+=le.size}for(;N;)N=U(N)}function QT(u){var f=u.gutters.offsetWidth;u.sizer.style.marginLeft=f+"px",Hi(u,"gutterChanged",u)}function JT(u,f){u.display.sizer.style.minHeight=f.docHeight+"px",u.display.heightForcer.style.top=f.docHeight+"px",u.display.gutters.style.height=f.docHeight+u.display.barHeight+gs(u)+"px"}function hI(u){var f=u.display,v=f.view;if(!(!f.alignWidgets&&(!f.gutters.firstChild||!u.options.fixedGutter))){for(var g=h(f)-f.scroller.scrollLeft+u.doc.scrollLeft,T=f.gutters.offsetWidth,A=g+"px",N=0;N<v.length;N++)if(!v[N].hidden){u.options.fixedGutter&&(v[N].gutter&&(v[N].gutter.style.left=A),v[N].gutterBackground&&(v[N].gutterBackground.style.left=A));var U=v[N].alignable;if(U)for(var H=0;H<U.length;H++)U[H].style.left=A}u.options.fixedGutter&&(f.gutters.style.left=g+T+"px")}}function fI(u){if(!u.options.lineNumbers)return!1;var f=u.doc,v=kr(u.options,f.first+f.size-1),g=u.display;if(v.length!=g.lineNumChars){var T=g.measure.appendChild(X("div",[X("div",v)],"CodeMirror-linenumber CodeMirror-gutter-elt")),A=T.firstChild.offsetWidth,N=T.offsetWidth-A;return g.lineGutter.style.width="",g.lineNumInnerWidth=Math.max(A,g.lineGutter.offsetWidth-N)+1,g.lineNumWidth=g.lineNumInnerWidth+N,g.lineNumChars=g.lineNumInnerWidth?v.length:-1,g.lineGutter.style.width=g.lineNumWidth+"px",QT(u.display),!0}return!1}function e1(u,f){for(var v=[],g=!1,T=0;T<u.length;T++){var A=u[T],N=null;if(typeof A!="string"&&(N=A.style,A=A.className),A=="CodeMirror-linenumbers")if(f)g=!0;else continue;v.push({className:A,style:N})}return f&&!g&&v.push({className:"CodeMirror-linenumbers",style:null}),v}function pI(u){var f=u.gutters,v=u.gutterSpecs;j(f),u.lineGutter=null;for(var g=0;g<v.length;++g){var T=v[g],A=T.className,N=T.style,U=f.appendChild(X("div",null,"CodeMirror-gutter "+A));N&&(U.style.cssText=N),A=="CodeMirror-linenumbers"&&(u.lineGutter=U,U.style.width=(u.lineNumWidth||1)+"px")}f.style.display=v.length?"":"none",QT(u)}function Ty(u){pI(u.display),te(u),hI(u)}function GH(u,f,v,g){var T=this;this.input=v,T.scrollbarFiller=X("div",null,"CodeMirror-scrollbar-filler"),T.scrollbarFiller.setAttribute("cm-not-content","true"),T.gutterFiller=X("div",null,"CodeMirror-gutter-filler"),T.gutterFiller.setAttribute("cm-not-content","true"),T.lineDiv=se("div",null,"CodeMirror-code"),T.selectionDiv=X("div",null,null,"position: relative; z-index: 1"),T.cursorDiv=X("div",null,"CodeMirror-cursors"),T.measure=X("div",null,"CodeMirror-measure"),T.lineMeasure=X("div",null,"CodeMirror-measure"),T.lineSpace=se("div",[T.measure,T.lineMeasure,T.selectionDiv,T.cursorDiv,T.lineDiv],null,"position: relative; outline: none");var A=se("div",[T.lineSpace],"CodeMirror-lines");T.mover=X("div",[A],null,"position: relative"),T.sizer=X("div",[T.mover],"CodeMirror-sizer"),T.sizerWidth=null,T.heightForcer=X("div",null,null,"position: absolute; height: "+pe+"px; width: 1px;"),T.gutters=X("div",null,"CodeMirror-gutters"),T.lineGutter=null,T.scroller=X("div",[T.sizer,T.heightForcer,T.gutters],"CodeMirror-scroll"),T.scroller.setAttribute("tabIndex","-1"),T.wrapper=X("div",[T.scrollbarFiller,T.gutterFiller,T.scroller],"CodeMirror"),T.wrapper.setAttribute("translate","no"),c&&d<8&&(T.gutters.style.zIndex=-1,T.scroller.style.paddingRight=0),!p&&!(r&&O)&&(T.scroller.draggable=!0),u&&(u.appendChild?u.appendChild(T.wrapper):u(T.wrapper)),T.viewFrom=T.viewTo=f.first,T.reportedViewFrom=T.reportedViewTo=f.first,T.view=[],T.renderedView=null,T.externalMeasured=null,T.viewOffset=0,T.lastWrapHeight=T.lastWrapWidth=0,T.updateLineNumbers=null,T.nativeBarWidth=T.barHeight=T.barWidth=0,T.scrollbarsClipped=!1,T.lineNumWidth=T.lineNumInnerWidth=T.lineNumChars=null,T.alignWidgets=!1,T.cachedCharWidth=T.cachedTextHeight=T.cachedPaddingH=null,T.maxLine=null,T.maxLineLength=0,T.maxLineChanged=!1,T.wheelDX=T.wheelDY=T.wheelStartX=T.wheelStartY=null,T.shift=!1,T.selForContextMenu=null,T.activeTouch=null,T.gutterSpecs=e1(g.gutters,g.lineNumbers),pI(T),v.init(T)}var Vb=0,Rc=null;c?Rc=-.53:r?Rc=15:y?Rc=-.7:E&&(Rc=-1/3);function mI(u){var f=u.wheelDeltaX,v=u.wheelDeltaY;return f==null&&u.detail&&u.axis==u.HORIZONTAL_AXIS&&(f=u.detail),v==null&&u.detail&&u.axis==u.VERTICAL_AXIS?v=u.detail:v==null&&(v=u.wheelDelta),{x:f,y:v}}function UH(u){var f=mI(u);return f.x*=Rc,f.y*=Rc,f}function yI(u,f){var v=mI(f),g=v.x,T=v.y,A=Rc;f.deltaMode===0&&(g=f.deltaX,T=f.deltaY,A=1);var N=u.display,U=N.scroller,H=U.scrollWidth>U.clientWidth,Y=U.scrollHeight>U.clientHeight;if(g&&H||T&&Y){if(T&&I&&p){e:for(var ie=f.target,le=N.view;ie!=U;ie=ie.parentNode)for(var ye=0;ye<le.length;ye++)if(le[ye].node==ie){u.display.currentWheelTarget=ie;break e}}if(g&&!r&&!_&&A!=null){T&&Y&&vy(u,Math.max(0,U.scrollTop+T*A)),ph(u,Math.max(0,U.scrollLeft+g*A)),(!T||T&&Y)&&it(f),N.wheelStartX=null;return}if(T&&A!=null){var me=T*A,Se=u.doc.scrollTop,Ie=Se+N.wrapper.clientHeight;me<0?Se=Math.max(0,Se+me-50):Ie=Math.min(u.doc.height,Ie+me+50),ZT(u,{top:Se,bottom:Ie})}Vb<20&&f.deltaMode!==0&&(N.wheelStartX==null?(N.wheelStartX=U.scrollLeft,N.wheelStartY=U.scrollTop,N.wheelDX=g,N.wheelDY=T,setTimeout(function(){if(N.wheelStartX!=null){var Fe=U.scrollLeft-N.wheelStartX,Ye=U.scrollTop-N.wheelStartY,et=Ye&&N.wheelDY&&Ye/N.wheelDY||Fe&&N.wheelDX&&Fe/N.wheelDX;N.wheelStartX=N.wheelStartY=null,et&&(Rc=(Rc*Vb+et)/(Vb+1),++Vb)}},200)):(N.wheelDX+=g,N.wheelDY+=T))}}var La=function(u,f){this.ranges=u,this.primIndex=f};La.prototype.primary=function(){return this.ranges[this.primIndex]},La.prototype.equals=function(u){if(u==this)return!0;if(u.primIndex!=this.primIndex||u.ranges.length!=this.ranges.length)return!1;for(var f=0;f<this.ranges.length;f++){var v=this.ranges[f],g=u.ranges[f];if(!ho(v.anchor,g.anchor)||!ho(v.head,g.head))return!1}return!0},La.prototype.deepCopy=function(){for(var u=[],f=0;f<this.ranges.length;f++)u[f]=new Ii(xs(this.ranges[f].anchor),xs(this.ranges[f].head));return new La(u,this.primIndex)},La.prototype.somethingSelected=function(){for(var u=0;u<this.ranges.length;u++)if(!this.ranges[u].empty())return!0;return!1},La.prototype.contains=function(u,f){f||(f=u);for(var v=0;v<this.ranges.length;v++){var g=this.ranges[v];if(gt(f,g.from())>=0&&gt(u,g.to())<=0)return v}return-1};var Ii=function(u,f){this.anchor=u,this.head=f};Ii.prototype.from=function(){return cs(this.anchor,this.head)},Ii.prototype.to=function(){return ls(this.anchor,this.head)},Ii.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Yo(u,f,v){var g=u&&u.options.selectionsMayTouch,T=f[v];f.sort(function(ye,me){return gt(ye.from(),me.from())}),v=J(f,T);for(var A=1;A<f.length;A++){var N=f[A],U=f[A-1],H=gt(U.to(),N.from());if(g&&!N.empty()?H>0:H>=0){var Y=cs(U.from(),N.from()),ie=ls(U.to(),N.to()),le=U.empty()?N.from()==N.head:U.from()==U.head;A<=v&&--v,f.splice(--A,2,new Ii(le?ie:Y,le?Y:ie))}}return new La(f,v)}function Mu(u,f){return new La([new Ii(u,f||u)],0)}function Pu(u){return u.text?xe(u.from.line+u.text.length-1,Ae(u.text).length+(u.text.length==1?u.from.ch:0)):u.to}function gI(u,f){if(gt(u,f.from)<0)return u;if(gt(u,f.to)<=0)return Pu(f);var v=u.line+f.text.length-(f.to.line-f.from.line)-1,g=u.ch;return u.line==f.to.line&&(g+=Pu(f).ch-f.to.ch),xe(v,g)}function t1(u,f){for(var v=[],g=0;g<u.sel.ranges.length;g++){var T=u.sel.ranges[g];v.push(new Ii(gI(T.anchor,f),gI(T.head,f)))}return Yo(u.cm,v,u.sel.primIndex)}function vI(u,f,v){return u.line==f.line?xe(v.line,u.ch-f.ch+v.ch):xe(v.line+(u.line-f.line),u.ch)}function LH(u,f,v){for(var g=[],T=xe(u.first,0),A=T,N=0;N<f.length;N++){var U=f[N],H=vI(U.from,T,A),Y=vI(Pu(U),T,A);if(T=U.to,A=Y,v=="around"){var ie=u.sel.ranges[N],le=gt(ie.head,ie.anchor)<0;g[N]=new Ii(le?Y:H,le?H:Y)}else g[N]=new Ii(H,H)}return new La(g,u.sel.primIndex)}function i1(u){u.doc.mode=vc(u.options,u.doc.modeOption),wy(u)}function wy(u){u.doc.iter(function(f){f.stateAfter&&(f.stateAfter=null),f.styles&&(f.styles=null)}),u.doc.modeFrontier=u.doc.highlightFrontier=u.doc.first,Ey(u,100),u.state.modeGen++,u.curOp&&te(u)}function bI(u,f){return f.from.ch==0&&f.to.ch==0&&Ae(f.text)==""&&(!u.cm||u.cm.options.wholeLineUpdateBefore)}function n1(u,f,v,g){function T(et){return v?v[et]:null}function A(et,We,st){Cl(et,We,st,g),Hi(et,"change",et,f)}function N(et,We){for(var st=[],vt=et;vt<We;++vt)st.push(new je(Y[vt],T(vt),g));return st}var U=f.from,H=f.to,Y=f.text,ie=lt(u,U.line),le=lt(u,H.line),ye=Ae(Y),me=T(Y.length-1),Se=H.line-U.line;if(f.full)u.insert(0,N(0,Y.length)),u.remove(Y.length,u.size-Y.length);else if(bI(u,f)){var Ie=N(0,Y.length-1);A(le,le.text,me),Se&&u.remove(U.line,Se),Ie.length&&u.insert(U.line,Ie)}else if(ie==le)if(Y.length==1)A(ie,ie.text.slice(0,U.ch)+ye+ie.text.slice(H.ch),me);else{var Fe=N(1,Y.length-1);Fe.push(new je(ye+ie.text.slice(H.ch),me,g)),A(ie,ie.text.slice(0,U.ch)+Y[0],T(0)),u.insert(U.line+1,Fe)}else if(Y.length==1)A(ie,ie.text.slice(0,U.ch)+Y[0]+le.text.slice(H.ch),T(0)),u.remove(U.line+1,Se);else{A(ie,ie.text.slice(0,U.ch)+Y[0],T(0)),A(le,ye+le.text.slice(H.ch),me);var Ye=N(1,Y.length-1);Se>1&&u.remove(U.line+1,Se-1),u.insert(U.line+1,Ye)}Hi(u,"change",u,f)}function Ou(u,f,v){function g(T,A,N){if(T.linked)for(var U=0;U<T.linked.length;++U){var H=T.linked[U];if(H.doc!=A){var Y=N&&H.sharedHist;v&&!Y||(f(H.doc,Y),g(H.doc,T,Y))}}}g(u,null,!0)}function _I(u,f){if(f.cm)throw new Error("This document is already in use.");u.doc=f,f.cm=u,w(u),i1(u),EI(u),u.options.direction=f.direction,u.options.lineWrapping||Rr(u),u.options.mode=f.modeOption,te(u)}function EI(u){(u.doc.direction=="rtl"?de:B)(u.display.lineDiv,"CodeMirror-rtl")}function BH(u){na(u,function(){EI(u),te(u)})}function qb(u){this.done=[],this.undone=[],this.undoDepth=u?u.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=u?u.maxGeneration:1}function r1(u,f){var v={from:xs(f.from),to:Pu(f),text:as(u,f.from,f.to)};return CI(u,v,f.from.line,f.to.line+1),Ou(u,function(g){return CI(g,v,f.from.line,f.to.line+1)},!0),v}function TI(u){for(;u.length;){var f=Ae(u);if(f.ranges)u.pop();else break}}function FH(u,f){if(f)return TI(u.done),Ae(u.done);if(u.done.length&&!Ae(u.done).ranges)return Ae(u.done);if(u.done.length>1&&!u.done[u.done.length-2].ranges)return u.done.pop(),Ae(u.done)}function wI(u,f,v,g){var T=u.history;T.undone.length=0;var A=+new Date,N,U;if((T.lastOp==g||T.lastOrigin==f.origin&&f.origin&&(f.origin.charAt(0)=="+"&&T.lastModTime>A-(u.cm?u.cm.options.historyEventDelay:500)||f.origin.charAt(0)=="*"))&&(N=FH(T,T.lastOp==g)))U=Ae(N.changes),gt(f.from,f.to)==0&&gt(f.from,U.to)==0?U.to=Pu(f):N.changes.push(r1(u,f));else{var H=Ae(T.done);for((!H||!H.ranges)&&Yb(u.sel,T.done),N={changes:[r1(u,f)],generation:T.generation},T.done.push(N);T.done.length>T.undoDepth;)T.done.shift(),T.done[0].ranges||T.done.shift()}T.done.push(v),T.generation=++T.maxGeneration,T.lastModTime=T.lastSelTime=A,T.lastOp=T.lastSelOp=g,T.lastOrigin=T.lastSelOrigin=f.origin,U||Ot(u,"historyAdded")}function $H(u,f,v,g){var T=f.charAt(0);return T=="*"||T=="+"&&v.ranges.length==g.ranges.length&&v.somethingSelected()==g.somethingSelected()&&new Date-u.history.lastSelTime<=(u.cm?u.cm.options.historyEventDelay:500)}function HH(u,f,v,g){var T=u.history,A=g&&g.origin;v==T.lastSelOp||A&&T.lastSelOrigin==A&&(T.lastModTime==T.lastSelTime&&T.lastOrigin==A||$H(u,A,Ae(T.done),f))?T.done[T.done.length-1]=f:Yb(f,T.done),T.lastSelTime=+new Date,T.lastSelOrigin=A,T.lastSelOp=v,g&&g.clearRedo!==!1&&TI(T.undone)}function Yb(u,f){var v=Ae(f);v&&v.ranges&&v.equals(u)||f.push(u)}function CI(u,f,v,g){var T=f["spans_"+u.id],A=0;u.iter(Math.max(u.first,v),Math.min(u.first+u.size,g),function(N){N.markedSpans&&((T||(T=f["spans_"+u.id]={}))[A]=N.markedSpans),++A})}function VH(u){if(!u)return null;for(var f,v=0;v<u.length;++v)u[v].marker.explicitlyCleared?f||(f=u.slice(0,v)):f&&f.push(u[v]);return f?f.length?f:null:u}function qH(u,f){var v=f["spans_"+u.id];if(!v)return null;for(var g=[],T=0;T<f.text.length;++T)g.push(VH(v[T]));return g}function SI(u,f){var v=qH(u,f),g=Ec(u,f);if(!v)return g;if(!g)return v;for(var T=0;T<v.length;++T){var A=v[T],N=g[T];if(A&&N)e:for(var U=0;U<N.length;++U){for(var H=N[U],Y=0;Y<A.length;++Y)if(A[Y].marker==H.marker)continue e;A.push(H)}else N&&(v[T]=N)}return v}function ap(u,f,v){for(var g=[],T=0;T<u.length;++T){var A=u[T];if(A.ranges){g.push(v?La.prototype.deepCopy.call(A):A);continue}var N=A.changes,U=[];g.push({changes:U});for(var H=0;H<N.length;++H){var Y=N[H],ie=void 0;if(U.push({from:Y.from,to:Y.to,text:Y.text}),f)for(var le in Y)(ie=le.match(/^spans_(\d+)$/))&&J(f,Number(ie[1]))>-1&&(Ae(U)[le]=Y[le],delete Y[le])}}return g}function s1(u,f,v,g){if(g){var T=u.anchor;if(v){var A=gt(f,T)<0;A!=gt(v,T)<0?(T=f,f=v):A!=gt(f,v)<0&&(f=v)}return new Ii(T,f)}else return new Ii(v||f,f)}function Wb(u,f,v,g,T){T==null&&(T=u.cm&&(u.cm.display.shift||u.extend)),Qr(u,new La([s1(u.sel.primary(),f,v,T)],0),g)}function kI(u,f,v){for(var g=[],T=u.cm&&(u.cm.display.shift||u.extend),A=0;A<u.sel.ranges.length;A++)g[A]=s1(u.sel.ranges[A],f[A],null,T);var N=Yo(u.cm,g,u.sel.primIndex);Qr(u,N,v)}function a1(u,f,v,g){var T=u.sel.ranges.slice(0);T[f]=v,Qr(u,Yo(u.cm,T,u.sel.primIndex),g)}function AI(u,f,v,g){Qr(u,Mu(f,v),g)}function YH(u,f,v){var g={ranges:f.ranges,update:function(T){this.ranges=[];for(var A=0;A<T.length;A++)this.ranges[A]=new Ii(bt(u,T[A].anchor),bt(u,T[A].head))},origin:v&&v.origin};return Ot(u,"beforeSelectionChange",u,g),u.cm&&Ot(u.cm,"beforeSelectionChange",u.cm,g),g.ranges!=f.ranges?Yo(u.cm,g.ranges,g.ranges.length-1):f}function RI(u,f,v){var g=u.history.done,T=Ae(g);T&&T.ranges?(g[g.length-1]=f,jb(u,f,v)):Qr(u,f,v)}function Qr(u,f,v){jb(u,f,v),HH(u,u.sel,u.cm?u.cm.curOp.id:NaN,v)}function jb(u,f,v){(Be(u,"beforeSelectionChange")||u.cm&&Be(u.cm,"beforeSelectionChange"))&&(f=YH(u,f,v));var g=v&&v.bias||(gt(f.primary().head,u.sel.primary().head)<0?-1:1);II(u,xI(u,f,g,!0)),!(v&&v.scroll===!1)&&u.cm&&u.cm.getOption("readOnly")!="nocursor"&&rp(u.cm)}function II(u,f){f.equals(u.sel)||(u.sel=f,u.cm&&(u.cm.curOp.updateInput=1,u.cm.curOp.selectionChanged=!0,Oe(u.cm)),Hi(u,"cursorActivity",u))}function DI(u){II(u,xI(u,u.sel,null,!1))}function xI(u,f,v,g){for(var T,A=0;A<f.ranges.length;A++){var N=f.ranges[A],U=f.ranges.length==u.sel.ranges.length&&u.sel.ranges[A],H=zb(u,N.anchor,U&&U.anchor,v,g),Y=zb(u,N.head,U&&U.head,v,g);(T||H!=N.anchor||Y!=N.head)&&(T||(T=f.ranges.slice(0,A)),T[A]=new Ii(H,Y))}return T?Yo(u.cm,T,f.primIndex):f}function op(u,f,v,g,T){var A=lt(u,f.line);if(A.markedSpans)for(var N=0;N<A.markedSpans.length;++N){var U=A.markedSpans[N],H=U.marker,Y="selectLeft"in H?!H.selectLeft:H.inclusiveLeft,ie="selectRight"in H?!H.selectRight:H.inclusiveRight;if((U.from==null||(Y?U.from<=f.ch:U.from<f.ch))&&(U.to==null||(ie?U.to>=f.ch:U.to>f.ch))){if(T&&(Ot(H,"beforeCursorEnter"),H.explicitlyCleared))if(A.markedSpans){--N;continue}else break;if(!H.atomic)continue;if(v){var le=H.find(g<0?1:-1),ye=void 0;if((g<0?ie:Y)&&(le=MI(u,le,-g,le&&le.line==f.line?A:null)),le&&le.line==f.line&&(ye=gt(le,v))&&(g<0?ye<0:ye>0))return op(u,le,f,g,T)}var me=H.find(g<0?-1:1);return(g<0?Y:ie)&&(me=MI(u,me,g,me.line==f.line?A:null)),me?op(u,me,f,g,T):null}}return f}function zb(u,f,v,g,T){var A=g||1,N=op(u,f,v,A,T)||!T&&op(u,f,v,A,!0)||op(u,f,v,-A,T)||!T&&op(u,f,v,-A,!0);return N||(u.cantEdit=!0,xe(u.first,0))}function MI(u,f,v,g){return v<0&&f.ch==0?f.line>u.first?bt(u,xe(f.line-1)):null:v>0&&f.ch==(g||lt(u,f.line)).text.length?f.line<u.first+u.size-1?xe(f.line+1,0):null:new xe(f.line,f.ch+v)}function PI(u){u.setSelection(xe(u.firstLine(),0),xe(u.lastLine()),fe)}function OI(u,f,v){var g={canceled:!1,from:f.from,to:f.to,text:f.text,origin:f.origin,cancel:function(){return g.canceled=!0}};return v&&(g.update=function(T,A,N,U){T&&(g.from=bt(u,T)),A&&(g.to=bt(u,A)),N&&(g.text=N),U!==void 0&&(g.origin=U)}),Ot(u,"beforeChange",u,g),u.cm&&Ot(u.cm,"beforeChange",u.cm,g),g.canceled?(u.cm&&(u.cm.curOp.updateInput=2),null):{from:g.from,to:g.to,text:g.text,origin:g.origin}}function lp(u,f,v){if(u.cm){if(!u.cm.curOp)return vr(u.cm,lp)(u,f,v);if(u.cm.state.suppressEdits)return}if(!((Be(u,"beforeChange")||u.cm&&Be(u.cm,"beforeChange"))&&(f=OI(u,f,!0),!f))){var g=$o&&!v&&nh(u,f.from,f.to);if(g)for(var T=g.length-1;T>=0;--T)NI(u,{from:g[T].from,to:g[T].to,text:T?[""]:f.text,origin:f.origin});else NI(u,f)}}function NI(u,f){if(!(f.text.length==1&&f.text[0]==""&&gt(f.from,f.to)==0)){var v=t1(u,f);wI(u,f,v,u.cm?u.cm.curOp.id:NaN),Cy(u,f,v,Ec(u,f));var g=[];Ou(u,function(T,A){!A&&J(g,T.history)==-1&&(BI(T.history,f),g.push(T.history)),Cy(T,f,null,Ec(T,f))})}}function Xb(u,f,v){var g=u.cm&&u.cm.state.suppressEdits;if(!(g&&!v)){for(var T=u.history,A,N=u.sel,U=f=="undo"?T.done:T.undone,H=f=="undo"?T.undone:T.done,Y=0;Y<U.length&&(A=U[Y],!(v?A.ranges&&!A.equals(u.sel):!A.ranges));Y++);if(Y!=U.length){for(T.lastOrigin=T.lastSelOrigin=null;;)if(A=U.pop(),A.ranges){if(Yb(A,H),v&&!A.equals(u.sel)){Qr(u,A,{clearRedo:!1});return}N=A}else if(g){U.push(A);return}else break;var ie=[];Yb(N,H),H.push({changes:ie,generation:T.generation}),T.generation=A.generation||++T.maxGeneration;for(var le=Be(u,"beforeChange")||u.cm&&Be(u.cm,"beforeChange"),ye=function(Ie){var Fe=A.changes[Ie];if(Fe.origin=f,le&&!OI(u,Fe,!1))return U.length=0,{};ie.push(r1(u,Fe));var Ye=Ie?t1(u,Fe):Ae(U);Cy(u,Fe,Ye,SI(u,Fe)),!Ie&&u.cm&&u.cm.scrollIntoView({from:Fe.from,to:Pu(Fe)});var et=[];Ou(u,function(We,st){!st&&J(et,We.history)==-1&&(BI(We.history,Fe),et.push(We.history)),Cy(We,Fe,null,SI(We,Fe))})},me=A.changes.length-1;me>=0;--me){var Se=ye(me);if(Se)return Se.v}}}}function GI(u,f){if(f!=0&&(u.first+=f,u.sel=new La(ei(u.sel.ranges,function(T){return new Ii(xe(T.anchor.line+f,T.anchor.ch),xe(T.head.line+f,T.head.ch))}),u.sel.primIndex),u.cm)){te(u.cm,u.first,u.first-f,f);for(var v=u.cm.display,g=v.viewFrom;g<v.viewTo;g++)Te(u.cm,g,"gutter")}}function Cy(u,f,v,g){if(u.cm&&!u.cm.curOp)return vr(u.cm,Cy)(u,f,v,g);if(f.to.line<u.first){GI(u,f.text.length-1-(f.to.line-f.from.line));return}if(!(f.from.line>u.lastLine())){if(f.from.line<u.first){var T=f.text.length-1-(u.first-f.from.line);GI(u,T),f={from:xe(u.first,0),to:xe(f.to.line+T,f.to.ch),text:[Ae(f.text)],origin:f.origin}}var A=u.lastLine();f.to.line>A&&(f={from:f.from,to:xe(A,lt(u,A).text.length),text:[f.text[0]],origin:f.origin}),f.removed=as(u,f.from,f.to),v||(v=t1(u,f)),u.cm?WH(u.cm,f,g):n1(u,f,g),jb(u,v,fe),u.cantEdit&&zb(u,xe(u.firstLine(),0))&&(u.cantEdit=!1)}}function WH(u,f,v){var g=u.doc,T=u.display,A=f.from,N=f.to,U=!1,H=A.line;u.options.lineWrapping||(H=Ge(Jn(lt(g,A.line))),g.iter(H,N.line+1,function(me){if(me==T.maxLine)return U=!0,!0})),g.sel.contains(f.from,f.to)>-1&&Oe(u),n1(g,f,v,b(u)),u.options.lineWrapping||(g.iter(H,A.line+f.text.length,function(me){var Se=hs(me);Se>T.maxLineLength&&(T.maxLine=me,T.maxLineLength=Se,T.maxLineChanged=!0,U=!1)}),U&&(u.curOp.updateMaxLine=!0)),ih(g,A.line),Ey(u,400);var Y=f.text.length-(N.line-A.line)-1;f.full?te(u):A.line==N.line&&f.text.length==1&&!bI(u.doc,f)?Te(u,A.line,"text"):te(u,A.line,N.line+1,Y);var ie=Be(u,"changes"),le=Be(u,"change");if(le||ie){var ye={from:A,to:N,text:f.text,removed:f.removed,origin:f.origin};le&&Hi(u,"change",u,ye),ie&&(u.curOp.changeObjs||(u.curOp.changeObjs=[])).push(ye)}u.display.selForContextMenu=null}function cp(u,f,v,g,T){var A;g||(g=v),gt(g,v)<0&&(A=[g,v],v=A[0],g=A[1]),typeof f=="string"&&(f=u.splitLines(f)),lp(u,{from:v,to:g,text:f,origin:T})}function UI(u,f,v,g){v<u.line?u.line+=g:f<u.line&&(u.line=f,u.ch=0)}function LI(u,f,v,g){for(var T=0;T<u.length;++T){var A=u[T],N=!0;if(A.ranges){A.copied||(A=u[T]=A.deepCopy(),A.copied=!0);for(var U=0;U<A.ranges.length;U++)UI(A.ranges[U].anchor,f,v,g),UI(A.ranges[U].head,f,v,g);continue}for(var H=0;H<A.changes.length;++H){var Y=A.changes[H];if(v<Y.from.line)Y.from=xe(Y.from.line+g,Y.from.ch),Y.to=xe(Y.to.line+g,Y.to.ch);else if(f<=Y.to.line){N=!1;break}}N||(u.splice(0,T+1),T=0)}}function BI(u,f){var v=f.from.line,g=f.to.line,T=f.text.length-(g-v)-1;LI(u.done,v,g,T),LI(u.undone,v,g,T)}function Sy(u,f,v,g){var T=f,A=f;return typeof f=="number"?A=lt(u,mu(u,f)):T=Ge(f),T==null?null:(g(A,T)&&u.cm&&Te(u.cm,T,v),A)}function ky(u){this.lines=u,this.parent=null;for(var f=0,v=0;v<u.length;++v)u[v].parent=this,f+=u[v].height;this.height=f}ky.prototype={chunkSize:function(){return this.lines.length},removeInner:function(u,f){for(var v=u,g=u+f;v<g;++v){var T=this.lines[v];this.height-=T.height,Sl(T),Hi(T,"delete")}this.lines.splice(u,f)},collapse:function(u){u.push.apply(u,this.lines)},insertInner:function(u,f,v){this.height+=v,this.lines=this.lines.slice(0,u).concat(f).concat(this.lines.slice(u));for(var g=0;g<f.length;++g)f[g].parent=this},iterN:function(u,f,v){for(var g=u+f;u<g;++u)if(v(this.lines[u]))return!0}};function Ay(u){this.children=u;for(var f=0,v=0,g=0;g<u.length;++g){var T=u[g];f+=T.chunkSize(),v+=T.height,T.parent=this}this.size=f,this.height=v,this.parent=null}Ay.prototype={chunkSize:function(){return this.size},removeInner:function(u,f){this.size-=f;for(var v=0;v<this.children.length;++v){var g=this.children[v],T=g.chunkSize();if(u<T){var A=Math.min(f,T-u),N=g.height;if(g.removeInner(u,A),this.height-=N-g.height,T==A&&(this.children.splice(v--,1),g.parent=null),(f-=A)==0)break;u=0}else u-=T}if(this.size-f<25&&(this.children.length>1||!(this.children[0]instanceof ky))){var U=[];this.collapse(U),this.children=[new ky(U)],this.children[0].parent=this}},collapse:function(u){for(var f=0;f<this.children.length;++f)this.children[f].collapse(u)},insertInner:function(u,f,v){this.size+=f.length,this.height+=v;for(var g=0;g<this.children.length;++g){var T=this.children[g],A=T.chunkSize();if(u<=A){if(T.insertInner(u,f,v),T.lines&&T.lines.length>50){for(var N=T.lines.length%25+25,U=N;U<T.lines.length;){var H=new ky(T.lines.slice(U,U+=25));T.height-=H.height,this.children.splice(++g,0,H),H.parent=this}T.lines=T.lines.slice(0,N),this.maybeSpill()}break}u-=A}},maybeSpill:function(){if(!(this.children.length<=10)){var u=this;do{var f=u.children.splice(u.children.length-5,5),v=new Ay(f);if(u.parent){u.size-=v.size,u.height-=v.height;var T=J(u.parent.children,u);u.parent.children.splice(T+1,0,v)}else{var g=new Ay(u.children);g.parent=u,u.children=[g,v],u=g}v.parent=u.parent}while(u.children.length>10);u.parent.maybeSpill()}},iterN:function(u,f,v){for(var g=0;g<this.children.length;++g){var T=this.children[g],A=T.chunkSize();if(u<A){var N=Math.min(f,A-u);if(T.iterN(u,N,v))return!0;if((f-=N)==0)break;u=0}else u-=A}}};var Ry=function(u,f,v){if(v)for(var g in v)v.hasOwnProperty(g)&&(this[g]=v[g]);this.doc=u,this.node=f};Ry.prototype.clear=function(){var u=this.doc.cm,f=this.line.widgets,v=this.line,g=Ge(v);if(!(g==null||!f)){for(var T=0;T<f.length;++T)f[T]==this&&f.splice(T--,1);f.length||(v.widgets=null);var A=Kr(this);fr(v,Math.max(0,v.height-A)),u&&(na(u,function(){FI(u,v,-A),Te(u,g,"widget")}),Hi(u,"lineWidgetCleared",u,this,g))}},Ry.prototype.changed=function(){var u=this,f=this.height,v=this.doc.cm,g=this.line;this.height=null;var T=Kr(this)-f;T&&(jr(this.doc,g)||fr(g,g.height+T),v&&na(v,function(){v.curOp.forceUpdate=!0,FI(v,g,T),Hi(v,"lineWidgetChanged",v,u,Ge(g))}))},ct(Ry);function FI(u,f,v){Ar(f)<(u.curOp&&u.curOp.scrollTop||u.doc.scrollTop)&&XT(u,v)}function jH(u,f,v,g){var T=new Ry(u,v,g),A=u.cm;return A&&T.noHScroll&&(A.display.alignWidgets=!0),Sy(u,f,"widget",function(N){var U=N.widgets||(N.widgets=[]);if(T.insertAt==null?U.push(T):U.splice(Math.min(U.length,Math.max(0,T.insertAt)),0,T),T.line=N,A&&!jr(u,N)){var H=Ar(N)<u.scrollTop;fr(N,N.height+Kr(T)),H&&XT(A,T.height),A.curOp.forceUpdate=!0}return!0}),A&&Hi(A,"lineWidgetAdded",A,T,typeof f=="number"?f:Ge(f)),T}var $I=0,Nu=function(u,f){this.lines=[],this.type=f,this.doc=u,this.id=++$I};Nu.prototype.clear=function(){if(!this.explicitlyCleared){var u=this.doc.cm,f=u&&!u.curOp;if(f&&yh(u),Be(this,"clear")){var v=this.find();v&&Hi(this,"clear",v.from,v.to)}for(var g=null,T=null,A=0;A<this.lines.length;++A){var N=this.lines[A],U=Js(N.markedSpans,this);u&&!this.collapsed?Te(u,Ge(N),"text"):u&&(U.to!=null&&(T=Ge(N)),U.from!=null&&(g=Ge(N))),N.markedSpans=El(N.markedSpans,U),U.from==null&&this.collapsed&&!jr(this.doc,N)&&u&&fr(N,Dr(u.display))}if(u&&this.collapsed&&!u.options.lineWrapping)for(var H=0;H<this.lines.length;++H){var Y=Jn(this.lines[H]),ie=hs(Y);ie>u.display.maxLineLength&&(u.display.maxLine=Y,u.display.maxLineLength=ie,u.display.maxLineChanged=!0)}g!=null&&u&&this.collapsed&&te(u,g,T+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,u&&DI(u.doc)),u&&Hi(u,"markerCleared",u,this,g,T),f&&gh(u),this.parent&&this.parent.clear()}},Nu.prototype.find=function(u,f){u==null&&this.type=="bookmark"&&(u=1);for(var v,g,T=0;T<this.lines.length;++T){var A=this.lines[T],N=Js(A.markedSpans,this);if(N.from!=null&&(v=xe(f?A:Ge(A),N.from),u==-1))return v;if(N.to!=null&&(g=xe(f?A:Ge(A),N.to),u==1))return g}return v&&{from:v,to:g}},Nu.prototype.changed=function(){var u=this,f=this.find(-1,!0),v=this,g=this.doc.cm;!f||!g||na(g,function(){var T=f.line,A=Ge(f.line),N=wc(g,A);if(N&&(ze(N),g.curOp.selectionChanged=g.curOp.forceUpdate=!0),g.curOp.updateMaxLine=!0,!jr(v.doc,T)&&v.height!=null){var U=v.height;v.height=null;var H=Kr(v)-U;H&&fr(T,T.height+H)}Hi(g,"markerChanged",g,u)})},Nu.prototype.attachLine=function(u){if(!this.lines.length&&this.doc.cm){var f=this.doc.cm.curOp;(!f.maybeHiddenMarkers||J(f.maybeHiddenMarkers,this)==-1)&&(f.maybeUnhiddenMarkers||(f.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(u)},Nu.prototype.detachLine=function(u){if(this.lines.splice(J(this.lines,u),1),!this.lines.length&&this.doc.cm){var f=this.doc.cm.curOp;(f.maybeHiddenMarkers||(f.maybeHiddenMarkers=[])).push(this)}},ct(Nu);function up(u,f,v,g,T){if(g&&g.shared)return zH(u,f,v,g,T);if(u.cm&&!u.cm.curOp)return vr(u.cm,up)(u,f,v,g,T);var A=new Nu(u,T),N=gt(f,v);if(g&&W(g,A,!1),N>0||N==0&&A.clearWhenEmpty!==!1)return A;if(A.replacedWith&&(A.collapsed=!0,A.widgetNode=se("span",[A.replacedWith],"CodeMirror-widget"),g.handleMouseEvents||A.widgetNode.setAttribute("cm-ignore-events","true"),g.insertLeft&&(A.widgetNode.insertLeft=!0)),A.collapsed){if(Qn(u,f.line,f,v,A)||f.line!=v.line&&Qn(u,v.line,f,v,A))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ia()}A.addToHistory&&wI(u,{from:f,to:v,origin:"markText"},u.sel,NaN);var U=f.line,H=u.cm,Y;if(u.iter(U,v.line+1,function(le){H&&A.collapsed&&!H.options.lineWrapping&&Jn(le)==H.display.maxLine&&(Y=!0),A.collapsed&&U!=f.line&&fr(le,0),xa(le,new Da(A,U==f.line?f.ch:null,U==v.line?v.ch:null),u.cm&&u.cm.curOp),++U}),A.collapsed&&u.iter(f.line,v.line+1,function(le){jr(u,le)&&fr(le,0)}),A.clearOnEnter&&Ke(A,"beforeCursorEnter",function(){return A.clear()}),A.readOnly&&(_l(),(u.history.done.length||u.history.undone.length)&&u.clearHistory()),A.collapsed&&(A.id=++$I,A.atomic=!0),H){if(Y&&(H.curOp.updateMaxLine=!0),A.collapsed)te(H,f.line,v.line+1);else if(A.className||A.startStyle||A.endStyle||A.css||A.attributes||A.title)for(var ie=f.line;ie<=v.line;ie++)Te(H,ie,"text");A.atomic&&DI(H.doc),Hi(H,"markerAdded",H,A)}return A}var Iy=function(u,f){this.markers=u,this.primary=f;for(var v=0;v<u.length;++v)u[v].parent=this};Iy.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var u=0;u<this.markers.length;++u)this.markers[u].clear();Hi(this,"clear")}},Iy.prototype.find=function(u,f){return this.primary.find(u,f)},ct(Iy);function zH(u,f,v,g,T){g=W(g),g.shared=!1;var A=[up(u,f,v,g,T)],N=A[0],U=g.widgetNode;return Ou(u,function(H){U&&(g.widgetNode=U.cloneNode(!0)),A.push(up(H,bt(H,f),bt(H,v),g,T));for(var Y=0;Y<H.linked.length;++Y)if(H.linked[Y].isParent)return;N=Ae(A)}),new Iy(A,N)}function HI(u){return u.findMarks(xe(u.first,0),u.clipPos(xe(u.lastLine())),function(f){return f.parent})}function XH(u,f){for(var v=0;v<f.length;v++){var g=f[v],T=g.find(),A=u.clipPos(T.from),N=u.clipPos(T.to);if(gt(A,N)){var U=up(u,A,N,g.primary,g.primary.type);g.markers.push(U),U.parent=g}}}function KH(u){for(var f=function(g){var T=u[g],A=[T.primary.doc];Ou(T.primary.doc,function(H){return A.push(H)});for(var N=0;N<T.markers.length;N++){var U=T.markers[N];J(A,U.doc)==-1&&(U.parent=null,T.markers.splice(N--,1))}},v=0;v<u.length;v++)f(v)}var ZH=0,Gs=function(u,f,v,g,T){if(!(this instanceof Gs))return new Gs(u,f,v,g,T);v==null&&(v=0),Ay.call(this,[new ky([new je("",null)])]),this.first=v,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=v;var A=xe(v,0);this.sel=Mu(A),this.history=new qb(null),this.id=++ZH,this.modeOption=f,this.lineSep=g,this.direction=T=="rtl"?"rtl":"ltr",this.extend=!1,typeof u=="string"&&(u=this.splitLines(u)),n1(this,{from:A,to:A,text:u}),Qr(this,Mu(A),fe)};Gs.prototype=It(Ay.prototype,{constructor:Gs,iter:function(u,f,v){v?this.iterN(u-this.first,f-u,v):this.iterN(this.first,this.first+this.size,u)},insert:function(u,f){for(var v=0,g=0;g<f.length;++g)v+=f[g].height;this.insertInner(u-this.first,f,v)},remove:function(u,f){this.removeInner(u-this.first,f)},getValue:function(u){var f=_c(this,this.first,this.first+this.size);return u===!1?f:f.join(u||this.lineSeparator())},setValue:br(function(u){var f=xe(this.first,0),v=this.first+this.size-1;lp(this,{from:f,to:xe(v,lt(this,v).text.length),text:this.splitLines(u),origin:"setValue",full:!0},!0),this.cm&&gy(this.cm,0,0),Qr(this,Mu(f),fe)}),replaceRange:function(u,f,v,g){f=bt(this,f),v=v?bt(this,v):f,cp(this,u,f,v,g)},getRange:function(u,f,v){var g=as(this,bt(this,u),bt(this,f));return v===!1?g:v===""?g.join(""):g.join(v||this.lineSeparator())},getLine:function(u){var f=this.getLineHandle(u);return f&&f.text},getLineHandle:function(u){if(Oo(this,u))return lt(this,u)},getLineNumber:function(u){return Ge(u)},getLineHandleVisualStart:function(u){return typeof u=="number"&&(u=lt(this,u)),Jn(u)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(u){return bt(this,u)},getCursor:function(u){var f=this.sel.primary(),v;return u==null||u=="head"?v=f.head:u=="anchor"?v=f.anchor:u=="end"||u=="to"||u===!1?v=f.to():v=f.from(),v},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:br(function(u,f,v){AI(this,bt(this,typeof u=="number"?xe(u,f||0):u),null,v)}),setSelection:br(function(u,f,v){AI(this,bt(this,u),bt(this,f||u),v)}),extendSelection:br(function(u,f,v){Wb(this,bt(this,u),f&&bt(this,f),v)}),extendSelections:br(function(u,f){kI(this,rn(this,u),f)}),extendSelectionsBy:br(function(u,f){var v=ei(this.sel.ranges,u);kI(this,rn(this,v),f)}),setSelections:br(function(u,f,v){if(u.length){for(var g=[],T=0;T<u.length;T++)g[T]=new Ii(bt(this,u[T].anchor),bt(this,u[T].head||u[T].anchor));f==null&&(f=Math.min(u.length-1,this.sel.primIndex)),Qr(this,Yo(this.cm,g,f),v)}}),addSelection:br(function(u,f,v){var g=this.sel.ranges.slice(0);g.push(new Ii(bt(this,u),bt(this,f||u))),Qr(this,Yo(this.cm,g,g.length-1),v)}),getSelection:function(u){for(var f=this.sel.ranges,v,g=0;g<f.length;g++){var T=as(this,f[g].from(),f[g].to());v=v?v.concat(T):T}return u===!1?v:v.join(u||this.lineSeparator())},getSelections:function(u){for(var f=[],v=this.sel.ranges,g=0;g<v.length;g++){var T=as(this,v[g].from(),v[g].to());u!==!1&&(T=T.join(u||this.lineSeparator())),f[g]=T}return f},replaceSelection:function(u,f,v){for(var g=[],T=0;T<this.sel.ranges.length;T++)g[T]=u;this.replaceSelections(g,f,v||"+input")},replaceSelections:br(function(u,f,v){for(var g=[],T=this.sel,A=0;A<T.ranges.length;A++){var N=T.ranges[A];g[A]={from:N.from(),to:N.to(),text:this.splitLines(u[A]),origin:v}}for(var U=f&&f!="end"&&LH(this,g,f),H=g.length-1;H>=0;H--)lp(this,g[H]);U?RI(this,U):this.cm&&rp(this.cm)}),undo:br(function(){Xb(this,"undo")}),redo:br(function(){Xb(this,"redo")}),undoSelection:br(function(){Xb(this,"undo",!0)}),redoSelection:br(function(){Xb(this,"redo",!0)}),setExtending:function(u){this.extend=u},getExtending:function(){return this.extend},historySize:function(){for(var u=this.history,f=0,v=0,g=0;g<u.done.length;g++)u.done[g].ranges||++f;for(var T=0;T<u.undone.length;T++)u.undone[T].ranges||++v;return{undo:f,redo:v}},clearHistory:function(){var u=this;this.history=new qb(this.history),Ou(this,function(f){return f.history=u.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(u){return u&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(u){return this.history.generation==(u||this.cleanGeneration)},getHistory:function(){return{done:ap(this.history.done),undone:ap(this.history.undone)}},setHistory:function(u){var f=this.history=new qb(this.history);f.done=ap(u.done.slice(0),null,!0),f.undone=ap(u.undone.slice(0),null,!0)},setGutterMarker:br(function(u,f,v){return Sy(this,u,"gutter",function(g){var T=g.gutterMarkers||(g.gutterMarkers={});return T[f]=v,!v&&qe(T)&&(g.gutterMarkers=null),!0})}),clearGutter:br(function(u){var f=this;this.iter(function(v){v.gutterMarkers&&v.gutterMarkers[u]&&Sy(f,v,"gutter",function(){return v.gutterMarkers[u]=null,qe(v.gutterMarkers)&&(v.gutterMarkers=null),!0})})}),lineInfo:function(u){var f;if(typeof u=="number"){if(!Oo(this,u)||(f=u,u=lt(this,u),!u))return null}else if(f=Ge(u),f==null)return null;return{line:f,handle:u,text:u.text,gutterMarkers:u.gutterMarkers,textClass:u.textClass,bgClass:u.bgClass,wrapClass:u.wrapClass,widgets:u.widgets}},addLineClass:br(function(u,f,v){return Sy(this,u,f=="gutter"?"gutter":"class",function(g){var T=f=="text"?"textClass":f=="background"?"bgClass":f=="gutter"?"gutterClass":"wrapClass";if(!g[T])g[T]=v;else{if($(v).test(g[T]))return!1;g[T]+=" "+v}return!0})}),removeLineClass:br(function(u,f,v){return Sy(this,u,f=="gutter"?"gutter":"class",function(g){var T=f=="text"?"textClass":f=="background"?"bgClass":f=="gutter"?"gutterClass":"wrapClass",A=g[T];if(A)if(v==null)g[T]=null;else{var N=A.match($(v));if(!N)return!1;var U=N.index+N[0].length;g[T]=A.slice(0,N.index)+(!N.index||U==A.length?"":" ")+A.slice(U)||null}else return!1;return!0})}),addLineWidget:br(function(u,f,v){return jH(this,u,f,v)}),removeLineWidget:function(u){u.clear()},markText:function(u,f,v){return up(this,bt(this,u),bt(this,f),v,v&&v.type||"range")},setBookmark:function(u,f){var v={replacedWith:f&&(f.nodeType==null?f.widget:f),insertLeft:f&&f.insertLeft,clearWhenEmpty:!1,shared:f&&f.shared,handleMouseEvents:f&&f.handleMouseEvents};return u=bt(this,u),up(this,u,u,v,"bookmark")},findMarksAt:function(u){u=bt(this,u);var f=[],v=lt(this,u.line).markedSpans;if(v)for(var g=0;g<v.length;++g){var T=v[g];(T.from==null||T.from<=u.ch)&&(T.to==null||T.to>=u.ch)&&f.push(T.marker.parent||T.marker)}return f},findMarks:function(u,f,v){u=bt(this,u),f=bt(this,f);var g=[],T=u.line;return this.iter(u.line,f.line+1,function(A){var N=A.markedSpans;if(N)for(var U=0;U<N.length;U++){var H=N[U];!(H.to!=null&&T==u.line&&u.ch>=H.to||H.from==null&&T!=u.line||H.from!=null&&T==f.line&&H.from>=f.ch)&&(!v||v(H.marker))&&g.push(H.marker.parent||H.marker)}++T}),g},getAllMarks:function(){var u=[];return this.iter(function(f){var v=f.markedSpans;if(v)for(var g=0;g<v.length;++g)v[g].from!=null&&u.push(v[g].marker)}),u},posFromIndex:function(u){var f,v=this.first,g=this.lineSeparator().length;return this.iter(function(T){var A=T.text.length+g;if(A>u)return f=u,!0;u-=A,++v}),bt(this,xe(v,f))},indexFromPos:function(u){u=bt(this,u);var f=u.ch;if(u.line<this.first||u.ch<0)return 0;var v=this.lineSeparator().length;return this.iter(this.first,u.line,function(g){f+=g.text.length+v}),f},copy:function(u){var f=new Gs(_c(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return f.scrollTop=this.scrollTop,f.scrollLeft=this.scrollLeft,f.sel=this.sel,f.extend=!1,u&&(f.history.undoDepth=this.history.undoDepth,f.setHistory(this.getHistory())),f},linkedDoc:function(u){u||(u={});var f=this.first,v=this.first+this.size;u.from!=null&&u.from>f&&(f=u.from),u.to!=null&&u.to<v&&(v=u.to);var g=new Gs(_c(this,f,v),u.mode||this.modeOption,f,this.lineSep,this.direction);return u.sharedHist&&(g.history=this.history),(this.linked||(this.linked=[])).push({doc:g,sharedHist:u.sharedHist}),g.linked=[{doc:this,isParent:!0,sharedHist:u.sharedHist}],XH(g,HI(this)),g},unlinkDoc:function(u){if(u instanceof hn&&(u=u.doc),this.linked)for(var f=0;f<this.linked.length;++f){var v=this.linked[f];if(v.doc==u){this.linked.splice(f,1),u.unlinkDoc(this),KH(HI(this));break}}if(u.history==this.history){var g=[u.id];Ou(u,function(T){return g.push(T.id)},!0),u.history=new qb(null),u.history.done=ap(this.history.done,g),u.history.undone=ap(this.history.undone,g)}},iterLinkedDocs:function(u){Ou(this,u)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(u){return this.lineSep?u.split(this.lineSep):Rs(u)},lineSeparator:function(){return this.lineSep||`
`},setDirection:br(function(u){u!="rtl"&&(u="ltr"),u!=this.direction&&(this.direction=u,this.iter(function(f){return f.order=null}),this.cm&&BH(this.cm))})}),Gs.prototype.eachLine=Gs.prototype.iter;var VI=0;function QH(u){var f=this;if(qI(f),!(ge(f,u)||Os(f.display,u))){it(u),c&&(VI=+new Date);var v=D(f,u,!0),g=u.dataTransfer.files;if(!(!v||f.isReadOnly()))if(g&&g.length&&window.FileReader&&window.File)for(var T=g.length,A=Array(T),N=0,U=function(){++N==T&&vr(f,function(){v=bt(f.doc,v);var me={from:v,to:v,text:f.doc.splitLines(A.filter(function(Se){return Se!=null}).join(f.doc.lineSeparator())),origin:"paste"};lp(f.doc,me),RI(f.doc,Mu(bt(f.doc,v),bt(f.doc,Pu(me))))})()},H=function(me,Se){if(f.options.allowDropFileTypes&&J(f.options.allowDropFileTypes,me.type)==-1){U();return}var Ie=new FileReader;Ie.onerror=function(){return U()},Ie.onload=function(){var Fe=Ie.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Fe)){U();return}A[Se]=Fe,U()},Ie.readAsText(me)},Y=0;Y<g.length;Y++)H(g[Y],Y);else{if(f.state.draggingText&&f.doc.sel.contains(v)>-1){f.state.draggingText(u),setTimeout(function(){return f.display.input.focus()},20);return}try{var ie=u.dataTransfer.getData("Text");if(ie){var le;if(f.state.draggingText&&!f.state.draggingText.copy&&(le=f.listSelections()),jb(f.doc,Mu(v,v)),le)for(var ye=0;ye<le.length;++ye)cp(f.doc,"",le[ye].anchor,le[ye].head,"drag");f.replaceSelection(ie,"around","paste"),f.display.input.focus()}}catch{}}}}function JH(u,f){if(c&&(!u.state.draggingText||+new Date-VI<100)){fi(f);return}if(!(ge(u,f)||Os(u.display,f))&&(f.dataTransfer.setData("Text",u.getSelection()),f.dataTransfer.effectAllowed="copyMove",f.dataTransfer.setDragImage&&!E)){var v=X("img",null,null,"position: fixed; left: 0; top: 0;");v.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",_&&(v.width=v.height=1,u.display.wrapper.appendChild(v),v._top=v.offsetTop),f.dataTransfer.setDragImage(v,0,0),_&&v.parentNode.removeChild(v)}}function e6(u,f){var v=D(u,f);if(v){var g=document.createDocumentFragment();mo(u,v,g),u.display.dragCursor||(u.display.dragCursor=X("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),u.display.lineSpace.insertBefore(u.display.dragCursor,u.display.cursorDiv)),z(u.display.dragCursor,g)}}function qI(u){u.display.dragCursor&&(u.display.lineSpace.removeChild(u.display.dragCursor),u.display.dragCursor=null)}function YI(u){if(document.getElementsByClassName){for(var f=document.getElementsByClassName("CodeMirror"),v=[],g=0;g<f.length;g++){var T=f[g].CodeMirror;T&&v.push(T)}v.length&&v[0].operation(function(){for(var A=0;A<v.length;A++)u(v[A])})}}var WI=!1;function t6(){WI||(i6(),WI=!0)}function i6(){var u;Ke(window,"resize",function(){u==null&&(u=setTimeout(function(){u=null,YI(n6)},100))}),Ke(window,"blur",function(){return YI(np)})}function n6(u){var f=u.display;f.cachedCharWidth=f.cachedTextHeight=f.cachedPaddingH=null,f.scrollbarsClipped=!1,u.setSize()}for(var Gu={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Dy=0;Dy<10;Dy++)Gu[Dy+48]=Gu[Dy+96]=String(Dy);for(var Kb=65;Kb<=90;Kb++)Gu[Kb]=String.fromCharCode(Kb);for(var xy=1;xy<=12;xy++)Gu[xy+111]=Gu[xy+63235]="F"+xy;var Ic={};Ic.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ic.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ic.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ic.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ic.default=I?Ic.macDefault:Ic.pcDefault;function r6(u){var f=u.split(/-(?!$)/);u=f[f.length-1];for(var v,g,T,A,N=0;N<f.length-1;N++){var U=f[N];if(/^(cmd|meta|m)$/i.test(U))A=!0;else if(/^a(lt)?$/i.test(U))v=!0;else if(/^(c|ctrl|control)$/i.test(U))g=!0;else if(/^s(hift)?$/i.test(U))T=!0;else throw new Error("Unrecognized modifier name: "+U)}return v&&(u="Alt-"+u),g&&(u="Ctrl-"+u),A&&(u="Cmd-"+u),T&&(u="Shift-"+u),u}function s6(u){var f={};for(var v in u)if(u.hasOwnProperty(v)){var g=u[v];if(/^(name|fallthrough|(de|at)tach)$/.test(v))continue;if(g=="..."){delete u[v];continue}for(var T=ei(v.split(" "),r6),A=0;A<T.length;A++){var N=void 0,U=void 0;A==T.length-1?(U=T.join(" "),N=g):(U=T.slice(0,A+1).join(" "),N="...");var H=f[U];if(!H)f[U]=N;else if(H!=N)throw new Error("Inconsistent bindings for "+U)}delete u[v]}for(var Y in f)u[Y]=f[Y];return u}function dp(u,f,v,g){f=Zb(f);var T=f.call?f.call(u,g):f[u];if(T===!1)return"nothing";if(T==="...")return"multi";if(T!=null&&v(T))return"handled";if(f.fallthrough){if(Object.prototype.toString.call(f.fallthrough)!="[object Array]")return dp(u,f.fallthrough,v,g);for(var A=0;A<f.fallthrough.length;A++){var N=dp(u,f.fallthrough[A],v,g);if(N)return N}}}function jI(u){var f=typeof u=="string"?u:Gu[u.keyCode];return f=="Ctrl"||f=="Alt"||f=="Shift"||f=="Mod"}function zI(u,f,v){var g=u;return f.altKey&&g!="Alt"&&(u="Alt-"+u),(M?f.metaKey:f.ctrlKey)&&g!="Ctrl"&&(u="Ctrl-"+u),(M?f.ctrlKey:f.metaKey)&&g!="Mod"&&(u="Cmd-"+u),!v&&f.shiftKey&&g!="Shift"&&(u="Shift-"+u),u}function XI(u,f){if(_&&u.keyCode==34&&u.char)return!1;var v=Gu[u.keyCode];return v==null||u.altGraphKey?!1:(u.keyCode==3&&u.code&&(v=u.code),zI(v,u,f))}function Zb(u){return typeof u=="string"?Ic[u]:u}function hp(u,f){for(var v=u.doc.sel.ranges,g=[],T=0;T<v.length;T++){for(var A=f(v[T]);g.length&&gt(A.from,Ae(g).to)<=0;){var N=g.pop();if(gt(N.from,A.from)<0){A.from=N.from;break}}g.push(A)}na(u,function(){for(var U=g.length-1;U>=0;U--)cp(u.doc,"",g[U].from,g[U].to,"+delete");rp(u)})}function o1(u,f,v){var g=Ei(u.text,f+v,v);return g<0||g>u.text.length?null:g}function l1(u,f,v){var g=o1(u,f.ch,v);return g==null?null:new xe(f.line,g,v<0?"after":"before")}function c1(u,f,v,g,T){if(u){f.doc.direction=="rtl"&&(T=-T);var A=xt(v,f.doc.direction);if(A){var N=T<0?Ae(A):A[0],U=T<0==(N.level==1),H=U?"after":"before",Y;if(N.level>0||f.doc.direction=="rtl"){var ie=Ns(f,v);Y=T<0?v.text.length-1:0;var le=gr(f,ie,Y).top;Y=yi(function(ye){return gr(f,ie,ye).top==le},T<0==(N.level==1)?N.from:N.to-1,Y),H=="before"&&(Y=o1(v,Y,1))}else Y=T<0?N.to:N.from;return new xe(g,Y,H)}}return new xe(g,T<0?v.text.length:0,T<0?"before":"after")}function a6(u,f,v,g){var T=xt(f,u.doc.direction);if(!T)return l1(f,v,g);v.ch>=f.text.length?(v.ch=f.text.length,v.sticky="before"):v.ch<=0&&(v.ch=0,v.sticky="after");var A=hi(T,v.ch,v.sticky),N=T[A];if(u.doc.direction=="ltr"&&N.level%2==0&&(g>0?N.to>v.ch:N.from<v.ch))return l1(f,v,g);var U=function(Ye,et){return o1(f,Ye instanceof xe?Ye.ch:Ye,et)},H,Y=function(Ye){return u.options.lineWrapping?(H=H||Ns(u,f),Du(u,f,H,Ye)):{begin:0,end:f.text.length}},ie=Y(v.sticky=="before"?U(v,-1):v.ch);if(u.doc.direction=="rtl"||N.level==1){var le=N.level==1==g<0,ye=U(v,le?1:-1);if(ye!=null&&(le?ye<=N.to&&ye<=ie.end:ye>=N.from&&ye>=ie.begin)){var me=le?"before":"after";return new xe(v.line,ye,me)}}var Se=function(Ye,et,We){for(var st=function(Yi,_r){return _r?new xe(v.line,U(Yi,1),"before"):new xe(v.line,Yi,"after")};Ye>=0&&Ye<T.length;Ye+=et){var vt=T[Ye],mt=et>0==(vt.level!=1),qt=mt?We.begin:U(We.end,-1);if(vt.from<=qt&&qt<vt.to||(qt=mt?vt.from:U(vt.to,-1),We.begin<=qt&&qt<We.end))return st(qt,mt)}},Ie=Se(A+g,g,ie);if(Ie)return Ie;var Fe=g>0?ie.end:U(ie.begin,-1);return Fe!=null&&!(g>0&&Fe==f.text.length)&&(Ie=Se(g>0?0:T.length-1,g,Y(Fe)),Ie)?Ie:null}var My={selectAll:PI,singleSelection:function(u){return u.setSelection(u.getCursor("anchor"),u.getCursor("head"),fe)},killLine:function(u){return hp(u,function(f){if(f.empty()){var v=lt(u.doc,f.head.line).text.length;return f.head.ch==v&&f.head.line<u.lastLine()?{from:f.head,to:xe(f.head.line+1,0)}:{from:f.head,to:xe(f.head.line,v)}}else return{from:f.from(),to:f.to()}})},deleteLine:function(u){return hp(u,function(f){return{from:xe(f.from().line,0),to:bt(u.doc,xe(f.to().line+1,0))}})},delLineLeft:function(u){return hp(u,function(f){return{from:xe(f.from().line,0),to:f.from()}})},delWrappedLineLeft:function(u){return hp(u,function(f){var v=u.charCoords(f.head,"div").top+5,g=u.coordsChar({left:0,top:v},"div");return{from:g,to:f.from()}})},delWrappedLineRight:function(u){return hp(u,function(f){var v=u.charCoords(f.head,"div").top+5,g=u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:v},"div");return{from:f.from(),to:g}})},undo:function(u){return u.undo()},redo:function(u){return u.redo()},undoSelection:function(u){return u.undoSelection()},redoSelection:function(u){return u.redoSelection()},goDocStart:function(u){return u.extendSelection(xe(u.firstLine(),0))},goDocEnd:function(u){return u.extendSelection(xe(u.lastLine()))},goLineStart:function(u){return u.extendSelectionsBy(function(f){return KI(u,f.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(u){return u.extendSelectionsBy(function(f){return ZI(u,f.head)},{origin:"+move",bias:1})},goLineEnd:function(u){return u.extendSelectionsBy(function(f){return o6(u,f.head.line)},{origin:"+move",bias:-1})},goLineRight:function(u){return u.extendSelectionsBy(function(f){var v=u.cursorCoords(f.head,"div").top+5;return u.coordsChar({left:u.display.lineDiv.offsetWidth+100,top:v},"div")},re)},goLineLeft:function(u){return u.extendSelectionsBy(function(f){var v=u.cursorCoords(f.head,"div").top+5;return u.coordsChar({left:0,top:v},"div")},re)},goLineLeftSmart:function(u){return u.extendSelectionsBy(function(f){var v=u.cursorCoords(f.head,"div").top+5,g=u.coordsChar({left:0,top:v},"div");return g.ch<u.getLine(g.line).search(/\S/)?ZI(u,f.head):g},re)},goLineUp:function(u){return u.moveV(-1,"line")},goLineDown:function(u){return u.moveV(1,"line")},goPageUp:function(u){return u.moveV(-1,"page")},goPageDown:function(u){return u.moveV(1,"page")},goCharLeft:function(u){return u.moveH(-1,"char")},goCharRight:function(u){return u.moveH(1,"char")},goColumnLeft:function(u){return u.moveH(-1,"column")},goColumnRight:function(u){return u.moveH(1,"column")},goWordLeft:function(u){return u.moveH(-1,"word")},goGroupRight:function(u){return u.moveH(1,"group")},goGroupLeft:function(u){return u.moveH(-1,"group")},goWordRight:function(u){return u.moveH(1,"word")},delCharBefore:function(u){return u.deleteH(-1,"codepoint")},delCharAfter:function(u){return u.deleteH(1,"char")},delWordBefore:function(u){return u.deleteH(-1,"word")},delWordAfter:function(u){return u.deleteH(1,"word")},delGroupBefore:function(u){return u.deleteH(-1,"group")},delGroupAfter:function(u){return u.deleteH(1,"group")},indentAuto:function(u){return u.indentSelection("smart")},indentMore:function(u){return u.indentSelection("add")},indentLess:function(u){return u.indentSelection("subtract")},insertTab:function(u){return u.replaceSelection("	")},insertSoftTab:function(u){for(var f=[],v=u.listSelections(),g=u.options.tabSize,T=0;T<v.length;T++){var A=v[T].from(),N=ne(u.getLine(A.line),A.ch,g);f.push(ft(g-N%g))}u.replaceSelections(f)},defaultTab:function(u){u.somethingSelected()?u.indentSelection("add"):u.execCommand("insertTab")},transposeChars:function(u){return na(u,function(){for(var f=u.listSelections(),v=[],g=0;g<f.length;g++)if(f[g].empty()){var T=f[g].head,A=lt(u.doc,T.line).text;if(A){if(T.ch==A.length&&(T=new xe(T.line,T.ch-1)),T.ch>0)T=new xe(T.line,T.ch+1),u.replaceRange(A.charAt(T.ch-1)+A.charAt(T.ch-2),xe(T.line,T.ch-2),T,"+transpose");else if(T.line>u.doc.first){var N=lt(u.doc,T.line-1).text;N&&(T=new xe(T.line,1),u.replaceRange(A.charAt(0)+u.doc.lineSeparator()+N.charAt(N.length-1),xe(T.line-1,N.length-1),T,"+transpose"))}}v.push(new Ii(T,T))}u.setSelections(v)})},newlineAndIndent:function(u){return na(u,function(){for(var f=u.listSelections(),v=f.length-1;v>=0;v--)u.replaceRange(u.doc.lineSeparator(),f[v].anchor,f[v].head,"+input");f=u.listSelections();for(var g=0;g<f.length;g++)u.indentLine(f[g].from().line,null,!0);rp(u)})},openLine:function(u){return u.replaceSelection(`
`,"start")},toggleOverwrite:function(u){return u.toggleOverwrite()}};function KI(u,f){var v=lt(u.doc,f),g=Jn(v);return g!=v&&(f=Ge(g)),c1(!0,u,g,f,1)}function o6(u,f){var v=lt(u.doc,f),g=wl(v);return g!=v&&(f=Ge(g)),c1(!0,u,v,f,-1)}function ZI(u,f){var v=KI(u,f.line),g=lt(u.doc,v.line),T=xt(g,u.doc.direction);if(!T||T[0].level==0){var A=Math.max(v.ch,g.text.search(/\S/)),N=f.line==v.line&&f.ch<=A&&f.ch;return xe(v.line,N?0:A,v.sticky)}return v}function Qb(u,f,v){if(typeof f=="string"&&(f=My[f],!f))return!1;u.display.input.ensurePolled();var g=u.display.shift,T=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),v&&(u.display.shift=!1),T=f(u)!=he}finally{u.display.shift=g,u.state.suppressEdits=!1}return T}function l6(u,f,v){for(var g=0;g<u.state.keyMaps.length;g++){var T=dp(f,u.state.keyMaps[g],v,u);if(T)return T}return u.options.extraKeys&&dp(f,u.options.extraKeys,v,u)||dp(f,u.options.keyMap,v,u)}var c6=new ce;function Py(u,f,v,g){var T=u.state.keySeq;if(T){if(jI(f))return"handled";if(/\'$/.test(f)?u.state.keySeq=null:c6.set(50,function(){u.state.keySeq==T&&(u.state.keySeq=null,u.display.input.reset())}),QI(u,T+" "+f,v,g))return!0}return QI(u,f,v,g)}function QI(u,f,v,g){var T=l6(u,f,g);return T=="multi"&&(u.state.keySeq=f),T=="handled"&&Hi(u,"keyHandled",u,f,v),(T=="handled"||T=="multi")&&(it(v),YT(u)),!!T}function JI(u,f){var v=XI(f,!0);return v?f.shiftKey&&!u.state.keySeq?Py(u,"Shift-"+v,f,function(g){return Qb(u,g,!0)})||Py(u,v,f,function(g){if(typeof g=="string"?/^go[A-Z]/.test(g):g.motion)return Qb(u,g)}):Py(u,v,f,function(g){return Qb(u,g)}):!1}function u6(u,f,v){return Py(u,"'"+v+"'",f,function(g){return Qb(u,g,!0)})}var u1=null;function eD(u){var f=this;if(!(u.target&&u.target!=f.display.input.getField())&&(f.curOp.focus=_e(),!ge(f,u))){c&&d<11&&u.keyCode==27&&(u.returnValue=!1);var v=u.keyCode;f.display.shift=v==16||u.shiftKey;var g=JI(f,u);_&&(u1=g?v:null,!g&&v==88&&!Kd&&(I?u.metaKey:u.ctrlKey)&&f.replaceSelection("",null,"cut")),r&&!I&&!g&&v==46&&u.shiftKey&&!u.ctrlKey&&document.execCommand&&document.execCommand("cut"),v==18&&!/\bCodeMirror-crosshair\b/.test(f.display.lineDiv.className)&&d6(f)}}function d6(u){var f=u.display.lineDiv;de(f,"CodeMirror-crosshair");function v(g){(g.keyCode==18||!g.altKey)&&(B(f,"CodeMirror-crosshair"),dt(document,"keyup",v),dt(document,"mouseover",v))}Ke(document,"keyup",v),Ke(document,"mouseover",v)}function tD(u){u.keyCode==16&&(this.doc.sel.shift=!1),ge(this,u)}function iD(u){var f=this;if(!(u.target&&u.target!=f.display.input.getField())&&!(Os(f.display,u)||ge(f,u)||u.ctrlKey&&!u.altKey||I&&u.metaKey)){var v=u.keyCode,g=u.charCode;if(_&&v==u1){u1=null,it(u);return}if(!(_&&(!u.which||u.which<10)&&JI(f,u))){var T=String.fromCharCode(g??v);T!="\b"&&(u6(f,u,T)||f.display.input.onKeyPress(u))}}}var h6=400,d1=function(u,f,v){this.time=u,this.pos=f,this.button=v};d1.prototype.compare=function(u,f,v){return this.time+h6>u&&gt(f,this.pos)==0&&v==this.button};var Oy,Ny;function f6(u,f){var v=+new Date;return Ny&&Ny.compare(v,u,f)?(Oy=Ny=null,"triple"):Oy&&Oy.compare(v,u,f)?(Ny=new d1(v,u,f),Oy=null,"double"):(Oy=new d1(v,u,f),Ny=null,"single")}function nD(u){var f=this,v=f.display;if(!(ge(f,u)||v.activeTouch&&v.input.supportsTouch())){if(v.input.ensurePolled(),v.shift=u.shiftKey,Os(v,u)){p||(v.scroller.draggable=!1,setTimeout(function(){return v.scroller.draggable=!0},100));return}if(!h1(f,u)){var g=D(f,u),T=Sa(u),A=g?f6(g,T):"single";window.focus(),T==1&&f.state.selectingText&&f.state.selectingText(u),!(g&&p6(f,T,g,A,u))&&(T==1?g?y6(f,g,A,u):An(u)==v.scroller&&it(u):T==2?(g&&Wb(f.doc,g),setTimeout(function(){return v.input.focus()},20)):T==3&&(q?f.display.input.onContextMenu(u):WT(f)))}}}function p6(u,f,v,g,T){var A="Click";return g=="double"?A="Double"+A:g=="triple"&&(A="Triple"+A),A=(f==1?"Left":f==2?"Middle":"Right")+A,Py(u,zI(A,T),T,function(N){if(typeof N=="string"&&(N=My[N]),!N)return!1;var U=!1;try{u.isReadOnly()&&(u.state.suppressEdits=!0),U=N(u,v)!=he}finally{u.state.suppressEdits=!1}return U})}function m6(u,f,v){var g=u.getOption("configureMouse"),T=g?g(u,f,v):{};if(T.unit==null){var A=F?v.shiftKey&&v.metaKey:v.altKey;T.unit=A?"rectangle":f=="single"?"char":f=="double"?"word":"line"}return(T.extend==null||u.doc.extend)&&(T.extend=u.doc.extend||v.shiftKey),T.addNew==null&&(T.addNew=I?v.metaKey:v.ctrlKey),T.moveOnDrag==null&&(T.moveOnDrag=!(I?v.altKey:v.ctrlKey)),T}function y6(u,f,v,g){c?setTimeout(Z(rI,u),0):u.curOp.focus=_e();var T=m6(u,v,g),A=u.doc.sel,N;u.options.dragDrop&&dr&&!u.isReadOnly()&&v=="single"&&(N=A.contains(f))>-1&&(gt((N=A.ranges[N]).from(),f)<0||f.xRel>0)&&(gt(N.to(),f)>0||f.xRel<0)?g6(u,g,f,T):v6(u,g,f,T)}function g6(u,f,v,g){var T=u.display,A=!1,N=vr(u,function(Y){p&&(T.scroller.draggable=!1),u.state.draggingText=!1,u.state.delayingBlurEvent&&(u.hasFocus()?u.state.delayingBlurEvent=!1:WT(u)),dt(T.wrapper.ownerDocument,"mouseup",N),dt(T.wrapper.ownerDocument,"mousemove",U),dt(T.scroller,"dragstart",H),dt(T.scroller,"drop",N),A||(it(Y),g.addNew||Wb(u.doc,v,null,null,g.extend),p&&!E||c&&d==9?setTimeout(function(){T.wrapper.ownerDocument.body.focus({preventScroll:!0}),T.input.focus()},20):T.input.focus())}),U=function(Y){A=A||Math.abs(f.clientX-Y.clientX)+Math.abs(f.clientY-Y.clientY)>=10},H=function(){return A=!0};p&&(T.scroller.draggable=!0),u.state.draggingText=N,N.copy=!g.moveOnDrag,Ke(T.wrapper.ownerDocument,"mouseup",N),Ke(T.wrapper.ownerDocument,"mousemove",U),Ke(T.scroller,"dragstart",H),Ke(T.scroller,"drop",N),u.state.delayingBlurEvent=!0,setTimeout(function(){return T.input.focus()},20),T.scroller.dragDrop&&T.scroller.dragDrop()}function rD(u,f,v){if(v=="char")return new Ii(f,f);if(v=="word")return u.findWordAt(f);if(v=="line")return new Ii(xe(f.line,0),bt(u.doc,xe(f.line+1,0)));var g=v(u,f);return new Ii(g.from,g.to)}function v6(u,f,v,g){c&&WT(u);var T=u.display,A=u.doc;it(f);var N,U,H=A.sel,Y=H.ranges;if(g.addNew&&!g.extend?(U=A.sel.contains(v),U>-1?N=Y[U]:N=new Ii(v,v)):(N=A.sel.primary(),U=A.sel.primIndex),g.unit=="rectangle")g.addNew||(N=new Ii(v,v)),v=D(u,f,!0,!0),U=-1;else{var ie=rD(u,v,g.unit);g.extend?N=s1(N,ie.anchor,ie.head,g.extend):N=ie}g.addNew?U==-1?(U=Y.length,Qr(A,Yo(u,Y.concat([N]),U),{scroll:!1,origin:"*mouse"})):Y.length>1&&Y[U].empty()&&g.unit=="char"&&!g.extend?(Qr(A,Yo(u,Y.slice(0,U).concat(Y.slice(U+1)),0),{scroll:!1,origin:"*mouse"}),H=A.sel):a1(A,U,N,be):(U=0,Qr(A,new La([N],0),be),H=A.sel);var le=v;function ye(We){if(gt(le,We)!=0)if(le=We,g.unit=="rectangle"){for(var st=[],vt=u.options.tabSize,mt=ne(lt(A,v.line).text,v.ch,vt),qt=ne(lt(A,We.line).text,We.ch,vt),Yi=Math.min(mt,qt),_r=Math.max(mt,qt),bn=Math.min(v.line,We.line),ra=Math.min(u.lastLine(),Math.max(v.line,We.line));bn<=ra;bn++){var Us=lt(A,bn).text,Yn=Ft(Us,Yi,vt);Yi==_r?st.push(new Ii(xe(bn,Yn),xe(bn,Yn))):Us.length>Yn&&st.push(new Ii(xe(bn,Yn),xe(bn,Ft(Us,_r,vt))))}st.length||st.push(new Ii(v,v)),Qr(A,Yo(u,H.ranges.slice(0,U).concat(st),U),{origin:"*mouse",scroll:!1}),u.scrollIntoView(We)}else{var Ls=N,xr=rD(u,We,g.unit),nr=Ls.anchor,Wn;gt(xr.anchor,nr)>0?(Wn=xr.head,nr=cs(Ls.from(),xr.anchor)):(Wn=xr.anchor,nr=ls(Ls.to(),xr.head));var xn=H.ranges.slice(0);xn[U]=b6(u,new Ii(bt(A,nr),Wn)),Qr(A,Yo(u,xn,U),be)}}var me=T.wrapper.getBoundingClientRect(),Se=0;function Ie(We){var st=++Se,vt=D(u,We,!0,g.unit=="rectangle");if(vt)if(gt(vt,le)!=0){u.curOp.focus=_e(),ye(vt);var mt=Fb(T,A);(vt.line>=mt.to||vt.line<mt.from)&&setTimeout(vr(u,function(){Se==st&&Ie(We)}),150)}else{var qt=We.clientY<me.top?-20:We.clientY>me.bottom?20:0;qt&&setTimeout(vr(u,function(){Se==st&&(T.scroller.scrollTop+=qt,Ie(We))}),50)}}function Fe(We){u.state.selectingText=!1,Se=1/0,We&&(it(We),T.input.focus()),dt(T.wrapper.ownerDocument,"mousemove",Ye),dt(T.wrapper.ownerDocument,"mouseup",et),A.history.lastSelOrigin=null}var Ye=vr(u,function(We){We.buttons===0||!Sa(We)?Fe(We):Ie(We)}),et=vr(u,Fe);u.state.selectingText=et,Ke(T.wrapper.ownerDocument,"mousemove",Ye),Ke(T.wrapper.ownerDocument,"mouseup",et)}function b6(u,f){var v=f.anchor,g=f.head,T=lt(u.doc,v.line);if(gt(v,g)==0&&v.sticky==g.sticky)return f;var A=xt(T);if(!A)return f;var N=hi(A,v.ch,v.sticky),U=A[N];if(U.from!=v.ch&&U.to!=v.ch)return f;var H=N+(U.from==v.ch==(U.level!=1)?0:1);if(H==0||H==A.length)return f;var Y;if(g.line!=v.line)Y=(g.line-v.line)*(u.doc.direction=="ltr"?1:-1)>0;else{var ie=hi(A,g.ch,g.sticky),le=ie-N||(g.ch-v.ch)*(U.level==1?-1:1);ie==H-1||ie==H?Y=le<0:Y=le>0}var ye=A[H+(Y?-1:0)],me=Y==(ye.level==1),Se=me?ye.from:ye.to,Ie=me?"after":"before";return v.ch==Se&&v.sticky==Ie?f:new Ii(new xe(v.line,Se,Ie),g)}function sD(u,f,v,g){var T,A;if(f.touches)T=f.touches[0].clientX,A=f.touches[0].clientY;else try{T=f.clientX,A=f.clientY}catch{return!1}if(T>=Math.floor(u.display.gutters.getBoundingClientRect().right))return!1;g&&it(f);var N=u.display,U=N.lineDiv.getBoundingClientRect();if(A>U.bottom||!Be(u,v))return Kt(f);A-=U.top-N.viewOffset;for(var H=0;H<u.display.gutterSpecs.length;++H){var Y=N.gutters.childNodes[H];if(Y&&Y.getBoundingClientRect().right>=T){var ie=os(u.doc,A),le=u.display.gutterSpecs[H];return Ot(u,v,u,ie,le.className,f),Kt(f)}}}function h1(u,f){return sD(u,f,"gutterClick",!0)}function aD(u,f){Os(u.display,f)||_6(u,f)||ge(u,f,"contextmenu")||q||u.display.input.onContextMenu(f)}function _6(u,f){return Be(u,"gutterContextMenu")?sD(u,f,"gutterContextMenu",!1):!1}function oD(u){u.display.wrapper.className=u.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+u.options.theme.replace(/(^|\s)\s*/g," cm-s-"),qo(u)}var fp={toString:function(){return"CodeMirror.Init"}},lD={},Jb={};function E6(u){var f=u.optionHandlers;function v(g,T,A,N){u.defaults[g]=T,A&&(f[g]=N?function(U,H,Y){Y!=fp&&A(U,H,Y)}:A)}u.defineOption=v,u.Init=fp,v("value","",function(g,T){return g.setValue(T)},!0),v("mode",null,function(g,T){g.doc.modeOption=T,i1(g)},!0),v("indentUnit",2,i1,!0),v("indentWithTabs",!1),v("smartIndent",!0),v("tabSize",4,function(g){wy(g),qo(g),te(g)},!0),v("lineSeparator",null,function(g,T){if(g.doc.lineSep=T,!!T){var A=[],N=g.doc.first;g.doc.iter(function(H){for(var Y=0;;){var ie=H.text.indexOf(T,Y);if(ie==-1)break;Y=ie+T.length,A.push(xe(N,ie))}N++});for(var U=A.length-1;U>=0;U--)cp(g.doc,T,A[U],xe(A[U].line,A[U].ch+T.length))}}),v("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(g,T,A){g.state.specialChars=new RegExp(T.source+(T.test("	")?"":"|	"),"g"),A!=fp&&g.refresh()}),v("specialCharPlaceholder",ps,function(g){return g.refresh()},!0),v("electricChars",!0),v("inputStyle",O?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),v("spellcheck",!1,function(g,T){return g.getInputField().spellcheck=T},!0),v("autocorrect",!1,function(g,T){return g.getInputField().autocorrect=T},!0),v("autocapitalize",!1,function(g,T){return g.getInputField().autocapitalize=T},!0),v("rtlMoveVisually",!P),v("wholeLineUpdateBefore",!0),v("theme","default",function(g){oD(g),Ty(g)},!0),v("keyMap","default",function(g,T,A){var N=Zb(T),U=A!=fp&&Zb(A);U&&U.detach&&U.detach(g,N),N.attach&&N.attach(g,U||null)}),v("extraKeys",null),v("configureMouse",null),v("lineWrapping",!1,w6,!0),v("gutters",[],function(g,T){g.display.gutterSpecs=e1(T,g.options.lineNumbers),Ty(g)},!0),v("fixedGutter",!0,function(g,T){g.display.gutters.style.left=T?h(g.display)+"px":"0",g.refresh()},!0),v("coverGutterNextToScrollbar",!1,function(g){return sp(g)},!0),v("scrollbarStyle","native",function(g){uI(g),sp(g),g.display.scrollbars.setScrollTop(g.doc.scrollTop),g.display.scrollbars.setScrollLeft(g.doc.scrollLeft)},!0),v("lineNumbers",!1,function(g,T){g.display.gutterSpecs=e1(g.options.gutters,T),Ty(g)},!0),v("firstLineNumber",1,Ty,!0),v("lineNumberFormatter",function(g){return g},Ty,!0),v("showCursorWhenSelecting",!1,Dn,!0),v("resetSelectionOnContextMenu",!0),v("lineWiseCopyCut",!0),v("pasteLinesPerSelection",!0),v("selectionsMayTouch",!1),v("readOnly",!1,function(g,T){T=="nocursor"&&(np(g),g.display.input.blur()),g.display.input.readOnlyChanged(T)}),v("screenReaderLabel",null,function(g,T){T=T===""?null:T,g.display.input.screenReaderLabelChanged(T)}),v("disableInput",!1,function(g,T){T||g.display.input.reset()},!0),v("dragDrop",!0,T6),v("allowDropFileTypes",null),v("cursorBlinkRate",530),v("cursorScrollMargin",0),v("cursorHeight",1,Dn,!0),v("singleCursorHeightPerLine",!0,Dn,!0),v("workTime",100),v("workDelay",100),v("flattenSpans",!0,wy,!0),v("addModeClass",!1,wy,!0),v("pollInterval",100),v("undoDepth",200,function(g,T){return g.doc.history.undoDepth=T}),v("historyEventDelay",1250),v("viewportMargin",10,function(g){return g.refresh()},!0),v("maxHighlightLength",1e4,wy,!0),v("moveInputWithCursor",!0,function(g,T){T||g.display.input.resetPosition()}),v("tabindex",null,function(g,T){return g.display.input.getField().tabIndex=T||""}),v("autofocus",null),v("direction","ltr",function(g,T){return g.doc.setDirection(T)},!0),v("phrases",null)}function T6(u,f,v){var g=v&&v!=fp;if(!f!=!g){var T=u.display.dragFunctions,A=f?Ke:dt;A(u.display.scroller,"dragstart",T.start),A(u.display.scroller,"dragenter",T.enter),A(u.display.scroller,"dragover",T.over),A(u.display.scroller,"dragleave",T.leave),A(u.display.scroller,"drop",T.drop)}}function w6(u){u.options.lineWrapping?(de(u.display.wrapper,"CodeMirror-wrap"),u.display.sizer.style.minWidth="",u.display.sizerWidth=null):(B(u.display.wrapper,"CodeMirror-wrap"),Rr(u)),w(u),te(u),qo(u),setTimeout(function(){return sp(u)},100)}function hn(u,f){var v=this;if(!(this instanceof hn))return new hn(u,f);this.options=f=f?W(f):{},W(lD,f,!1);var g=f.value;typeof g=="string"?g=new Gs(g,f.mode,null,f.lineSeparator,f.direction):f.mode&&(g.modeOption=f.mode),this.doc=g;var T=new hn.inputStyles[f.inputStyle](this),A=this.display=new GH(u,g,T,f);A.wrapper.CodeMirror=this,oD(this),f.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),uI(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ce,keySeq:null,specialChars:null},f.autofocus&&!O&&A.input.focus(),c&&d<11&&setTimeout(function(){return v.display.input.reset(!0)},20),C6(this),t6(),yh(this),this.curOp.forceUpdate=!0,_I(this,g),f.autofocus&&!O||this.hasFocus()?setTimeout(function(){v.hasFocus()&&!v.state.focused&&jT(v)},20):np(this);for(var N in Jb)Jb.hasOwnProperty(N)&&Jb[N](this,f[N],fp);fI(this),f.finishInit&&f.finishInit(this);for(var U=0;U<f1.length;++U)f1[U](this);gh(this),p&&f.lineWrapping&&getComputedStyle(A.lineDiv).textRendering=="optimizelegibility"&&(A.lineDiv.style.textRendering="auto")}hn.defaults=lD,hn.optionHandlers=Jb;function C6(u){var f=u.display;Ke(f.scroller,"mousedown",vr(u,nD)),c&&d<11?Ke(f.scroller,"dblclick",vr(u,function(H){if(!ge(u,H)){var Y=D(u,H);if(!(!Y||h1(u,H)||Os(u.display,H))){it(H);var ie=u.findWordAt(Y);Wb(u.doc,ie.anchor,ie.head)}}})):Ke(f.scroller,"dblclick",function(H){return ge(u,H)||it(H)}),Ke(f.scroller,"contextmenu",function(H){return aD(u,H)}),Ke(f.input.getField(),"contextmenu",function(H){f.scroller.contains(H.target)||aD(u,H)});var v,g={end:0};function T(){f.activeTouch&&(v=setTimeout(function(){return f.activeTouch=null},1e3),g=f.activeTouch,g.end=+new Date)}function A(H){if(H.touches.length!=1)return!1;var Y=H.touches[0];return Y.radiusX<=1&&Y.radiusY<=1}function N(H,Y){if(Y.left==null)return!0;var ie=Y.left-H.left,le=Y.top-H.top;return ie*ie+le*le>20*20}Ke(f.scroller,"touchstart",function(H){if(!ge(u,H)&&!A(H)&&!h1(u,H)){f.input.ensurePolled(),clearTimeout(v);var Y=+new Date;f.activeTouch={start:Y,moved:!1,prev:Y-g.end<=300?g:null},H.touches.length==1&&(f.activeTouch.left=H.touches[0].pageX,f.activeTouch.top=H.touches[0].pageY)}}),Ke(f.scroller,"touchmove",function(){f.activeTouch&&(f.activeTouch.moved=!0)}),Ke(f.scroller,"touchend",function(H){var Y=f.activeTouch;if(Y&&!Os(f,H)&&Y.left!=null&&!Y.moved&&new Date-Y.start<300){var ie=u.coordsChar(f.activeTouch,"page"),le;!Y.prev||N(Y,Y.prev)?le=new Ii(ie,ie):!Y.prev.prev||N(Y,Y.prev.prev)?le=u.findWordAt(ie):le=new Ii(xe(ie.line,0),bt(u.doc,xe(ie.line+1,0))),u.setSelection(le.anchor,le.head),u.focus(),it(H)}T()}),Ke(f.scroller,"touchcancel",T),Ke(f.scroller,"scroll",function(){f.scroller.clientHeight&&(vy(u,f.scroller.scrollTop),ph(u,f.scroller.scrollLeft,!0),Ot(u,"scroll",u))}),Ke(f.scroller,"mousewheel",function(H){return yI(u,H)}),Ke(f.scroller,"DOMMouseScroll",function(H){return yI(u,H)}),Ke(f.wrapper,"scroll",function(){return f.wrapper.scrollTop=f.wrapper.scrollLeft=0}),f.dragFunctions={enter:function(H){ge(u,H)||fi(H)},over:function(H){ge(u,H)||(e6(u,H),fi(H))},start:function(H){return JH(u,H)},drop:vr(u,QH),leave:function(H){ge(u,H)||qI(u)}};var U=f.input.getField();Ke(U,"keyup",function(H){return tD.call(u,H)}),Ke(U,"keydown",vr(u,eD)),Ke(U,"keypress",vr(u,iD)),Ke(U,"focus",function(H){return jT(u,H)}),Ke(U,"blur",function(H){return np(u,H)})}var f1=[];hn.defineInitHook=function(u){return f1.push(u)};function Gy(u,f,v,g){var T=u.doc,A;v==null&&(v="add"),v=="smart"&&(T.mode.indent?A=qr(u,f).state:v="prev");var N=u.options.tabSize,U=lt(T,f),H=ne(U.text,null,N);U.stateAfter&&(U.stateAfter=null);var Y=U.text.match(/^\s*/)[0],ie;if(!g&&!/\S/.test(U.text))ie=0,v="not";else if(v=="smart"&&(ie=T.mode.indent(A,U.text.slice(Y.length),U.text),ie==he||ie>150)){if(!g)return;v="prev"}v=="prev"?f>T.first?ie=ne(lt(T,f-1).text,null,N):ie=0:v=="add"?ie=H+u.options.indentUnit:v=="subtract"?ie=H-u.options.indentUnit:typeof v=="number"&&(ie=H+v),ie=Math.max(0,ie);var le="",ye=0;if(u.options.indentWithTabs)for(var me=Math.floor(ie/N);me;--me)ye+=N,le+="	";if(ye<ie&&(le+=ft(ie-ye)),le!=Y)return cp(T,le,xe(f,0),xe(f,Y.length),"+input"),U.stateAfter=null,!0;for(var Se=0;Se<T.sel.ranges.length;Se++){var Ie=T.sel.ranges[Se];if(Ie.head.line==f&&Ie.head.ch<Y.length){var Fe=xe(f,Y.length);a1(T,Se,new Ii(Fe,Fe));break}}}var Wo=null;function e_(u){Wo=u}function p1(u,f,v,g,T){var A=u.doc;u.display.shift=!1,g||(g=A.sel);var N=+new Date-200,U=T=="paste"||u.state.pasteIncoming>N,H=Rs(f),Y=null;if(U&&g.ranges.length>1)if(Wo&&Wo.text.join(`
`)==f){if(g.ranges.length%Wo.text.length==0){Y=[];for(var ie=0;ie<Wo.text.length;ie++)Y.push(A.splitLines(Wo.text[ie]))}}else H.length==g.ranges.length&&u.options.pasteLinesPerSelection&&(Y=ei(H,function(Ye){return[Ye]}));for(var le=u.curOp.updateInput,ye=g.ranges.length-1;ye>=0;ye--){var me=g.ranges[ye],Se=me.from(),Ie=me.to();me.empty()&&(v&&v>0?Se=xe(Se.line,Se.ch-v):u.state.overwrite&&!U?Ie=xe(Ie.line,Math.min(lt(A,Ie.line).text.length,Ie.ch+Ae(H).length)):U&&Wo&&Wo.lineWise&&Wo.text.join(`
`)==H.join(`
`)&&(Se=Ie=xe(Se.line,0)));var Fe={from:Se,to:Ie,text:Y?Y[ye%Y.length]:H,origin:T||(U?"paste":u.state.cutIncoming>N?"cut":"+input")};lp(u.doc,Fe),Hi(u,"inputRead",u,Fe)}f&&!U&&uD(u,f),rp(u),u.curOp.updateInput<2&&(u.curOp.updateInput=le),u.curOp.typing=!0,u.state.pasteIncoming=u.state.cutIncoming=-1}function cD(u,f){var v=u.clipboardData&&u.clipboardData.getData("Text");if(v)return u.preventDefault(),!f.isReadOnly()&&!f.options.disableInput&&na(f,function(){return p1(f,v,0,null,"paste")}),!0}function uD(u,f){if(!(!u.options.electricChars||!u.options.smartIndent))for(var v=u.doc.sel,g=v.ranges.length-1;g>=0;g--){var T=v.ranges[g];if(!(T.head.ch>100||g&&v.ranges[g-1].head.line==T.head.line)){var A=u.getModeAt(T.head),N=!1;if(A.electricChars){for(var U=0;U<A.electricChars.length;U++)if(f.indexOf(A.electricChars.charAt(U))>-1){N=Gy(u,T.head.line,"smart");break}}else A.electricInput&&A.electricInput.test(lt(u.doc,T.head.line).text.slice(0,T.head.ch))&&(N=Gy(u,T.head.line,"smart"));N&&Hi(u,"electricInput",u,T.head.line)}}}function dD(u){for(var f=[],v=[],g=0;g<u.doc.sel.ranges.length;g++){var T=u.doc.sel.ranges[g].head.line,A={anchor:xe(T,0),head:xe(T+1,0)};v.push(A),f.push(u.getRange(A.anchor,A.head))}return{text:f,ranges:v}}function hD(u,f,v,g){u.setAttribute("autocorrect",v?"":"off"),u.setAttribute("autocapitalize",g?"":"off"),u.setAttribute("spellcheck",!!f)}function fD(){var u=X("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),f=X("div",[u],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return p?u.style.width="1000px":u.setAttribute("wrap","off"),k&&(u.style.border="1px solid black"),hD(u),f}function S6(u){var f=u.optionHandlers,v=u.helpers={};u.prototype={constructor:u,focus:function(){window.focus(),this.display.input.focus()},setOption:function(g,T){var A=this.options,N=A[g];A[g]==T&&g!="mode"||(A[g]=T,f.hasOwnProperty(g)&&vr(this,f[g])(this,T,N),Ot(this,"optionChange",this,g))},getOption:function(g){return this.options[g]},getDoc:function(){return this.doc},addKeyMap:function(g,T){this.state.keyMaps[T?"push":"unshift"](Zb(g))},removeKeyMap:function(g){for(var T=this.state.keyMaps,A=0;A<T.length;++A)if(T[A]==g||T[A].name==g)return T.splice(A,1),!0},addOverlay:vs(function(g,T){var A=g.token?g:u.getMode(this.options,g);if(A.startState)throw new Error("Overlays may not be stateful.");$t(this.state.overlays,{mode:A,modeSpec:g,opaque:T&&T.opaque,priority:T&&T.priority||0},function(N){return N.priority}),this.state.modeGen++,te(this)}),removeOverlay:vs(function(g){for(var T=this.state.overlays,A=0;A<T.length;++A){var N=T[A].modeSpec;if(N==g||typeof g=="string"&&N.name==g){T.splice(A,1),this.state.modeGen++,te(this);return}}}),indentLine:vs(function(g,T,A){typeof T!="string"&&typeof T!="number"&&(T==null?T=this.options.smartIndent?"smart":"prev":T=T?"add":"subtract"),Oo(this.doc,g)&&Gy(this,g,T,A)}),indentSelection:vs(function(g){for(var T=this.doc.sel.ranges,A=-1,N=0;N<T.length;N++){var U=T[N];if(U.empty())U.head.line>A&&(Gy(this,U.head.line,g,!0),A=U.head.line,N==this.doc.sel.primIndex&&rp(this));else{var H=U.from(),Y=U.to(),ie=Math.max(A,H.line);A=Math.min(this.lastLine(),Y.line-(Y.ch?0:1))+1;for(var le=ie;le<A;++le)Gy(this,le,g);var ye=this.doc.sel.ranges;H.ch==0&&T.length==ye.length&&ye[N].from().ch>0&&a1(this.doc,N,new Ii(H,ye[N].to()),fe)}}}),getTokenAt:function(g,T){return Bo(this,g,T)},getLineTokens:function(g,T){return Bo(this,xe(g),T,!0)},getTokenTypeAt:function(g){g=bt(this.doc,g);var T=Go(this,lt(this.doc,g.line)),A=0,N=(T.length-1)/2,U=g.ch,H;if(U==0)H=T[2];else for(;;){var Y=A+N>>1;if((Y?T[Y*2-1]:0)>=U)N=Y;else if(T[Y*2+1]<U)A=Y+1;else{H=T[Y*2+2];break}}var ie=H?H.indexOf("overlay "):-1;return ie<0?H:ie==0?null:H.slice(0,ie-1)},getModeAt:function(g){var T=this.doc.mode;return T.innerMode?u.innerMode(T,this.getTokenAt(g).state).mode:T},getHelper:function(g,T){return this.getHelpers(g,T)[0]},getHelpers:function(g,T){var A=[];if(!v.hasOwnProperty(T))return A;var N=v[T],U=this.getModeAt(g);if(typeof U[T]=="string")N[U[T]]&&A.push(N[U[T]]);else if(U[T])for(var H=0;H<U[T].length;H++){var Y=N[U[T][H]];Y&&A.push(Y)}else U.helperType&&N[U.helperType]?A.push(N[U.helperType]):N[U.name]&&A.push(N[U.name]);for(var ie=0;ie<N._global.length;ie++){var le=N._global[ie];le.pred(U,this)&&J(A,le.val)==-1&&A.push(le.val)}return A},getStateAfter:function(g,T){var A=this.doc;return g=mu(A,g??A.first+A.size-1),qr(this,g+1,T).state},cursorCoords:function(g,T){var A,N=this.doc.sel.primary();return g==null?A=N.head:typeof g=="object"?A=bt(this.doc,g):A=g?N.from():N.to(),Zr(this,A,T||"page")},charCoords:function(g,T){return Dl(this,bt(this.doc,g),T||"page")},coordsChar:function(g,T){return g=Au(this,g,T||"page"),kc(this,g.left,g.top)},lineAtHeight:function(g,T){return g=Au(this,{top:g,left:0},T||"page").top,os(this.doc,g+this.display.viewOffset)},heightAtLine:function(g,T,A){var N=!1,U;if(typeof g=="number"){var H=this.doc.first+this.doc.size-1;g<this.doc.first?g=this.doc.first:g>H&&(g=H,N=!0),U=lt(this.doc,g)}else U=g;return Il(this,U,{top:0,left:0},T||"page",A||N).top+(N?this.doc.height-Ar(U):0)},defaultTextHeight:function(){return Dr(this.display)},defaultCharWidth:function(){return Pe(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(g,T,A,N,U){var H=this.display;g=Zr(this,bt(this.doc,g));var Y=g.bottom,ie=g.left;if(T.style.position="absolute",T.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(T),H.sizer.appendChild(T),N=="over")Y=g.top;else if(N=="above"||N=="near"){var le=Math.max(H.wrapper.clientHeight,this.doc.height),ye=Math.max(H.sizer.clientWidth,H.lineSpace.clientWidth);(N=="above"||g.bottom+T.offsetHeight>le)&&g.top>T.offsetHeight?Y=g.top-T.offsetHeight:g.bottom+T.offsetHeight<=le&&(Y=g.bottom),ie+T.offsetWidth>ye&&(ie=ye-T.offsetWidth)}T.style.top=Y+"px",T.style.left=T.style.right="",U=="right"?(ie=H.sizer.clientWidth-T.offsetWidth,T.style.right="0px"):(U=="left"?ie=0:U=="middle"&&(ie=(H.sizer.clientWidth-T.offsetWidth)/2),T.style.left=ie+"px"),A&&TH(this,{left:ie,top:Y,right:ie+T.offsetWidth,bottom:Y+T.offsetHeight})},triggerOnKeyDown:vs(eD),triggerOnKeyPress:vs(iD),triggerOnKeyUp:tD,triggerOnMouseDown:vs(nD),execCommand:function(g){if(My.hasOwnProperty(g))return My[g].call(null,this)},triggerElectric:vs(function(g){uD(this,g)}),findPosH:function(g,T,A,N){var U=1;T<0&&(U=-1,T=-T);for(var H=bt(this.doc,g),Y=0;Y<T&&(H=m1(this.doc,H,U,A,N),!H.hitSide);++Y);return H},moveH:vs(function(g,T){var A=this;this.extendSelectionsBy(function(N){return A.display.shift||A.doc.extend||N.empty()?m1(A.doc,N.head,g,T,A.options.rtlMoveVisually):g<0?N.from():N.to()},re)}),deleteH:vs(function(g,T){var A=this.doc.sel,N=this.doc;A.somethingSelected()?N.replaceSelection("",null,"+delete"):hp(this,function(U){var H=m1(N,U.head,g,T,!1);return g<0?{from:H,to:U.head}:{from:U.head,to:H}})}),findPosV:function(g,T,A,N){var U=1,H=N;T<0&&(U=-1,T=-T);for(var Y=bt(this.doc,g),ie=0;ie<T;++ie){var le=Zr(this,Y,"div");if(H==null?H=le.left:le.left=H,Y=pD(this,le,U,A),Y.hitSide)break}return Y},moveV:vs(function(g,T){var A=this,N=this.doc,U=[],H=!this.display.shift&&!N.extend&&N.sel.somethingSelected();if(N.extendSelectionsBy(function(ie){if(H)return g<0?ie.from():ie.to();var le=Zr(A,ie.head,"div");ie.goalColumn!=null&&(le.left=ie.goalColumn),U.push(le.left);var ye=pD(A,le,g,T);return T=="page"&&ie==N.sel.primary()&&XT(A,Dl(A,ye,"div").top-le.top),ye},re),U.length)for(var Y=0;Y<N.sel.ranges.length;Y++)N.sel.ranges[Y].goalColumn=U[Y]}),findWordAt:function(g){var T=this.doc,A=lt(T,g.line).text,N=g.ch,U=g.ch;if(A){var H=this.getHelper(g,"wordChars");(g.sticky=="before"||U==A.length)&&N?--N:++U;for(var Y=A.charAt(N),ie=De(Y,H)?function(le){return De(le,H)}:/\s/.test(Y)?function(le){return/\s/.test(le)}:function(le){return!/\s/.test(le)&&!De(le)};N>0&&ie(A.charAt(N-1));)--N;for(;U<A.length&&ie(A.charAt(U));)++U}return new Ii(xe(g.line,N),xe(g.line,U))},toggleOverwrite:function(g){g!=null&&g==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?de(this.display.cursorDiv,"CodeMirror-overwrite"):B(this.display.cursorDiv,"CodeMirror-overwrite"),Ot(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==_e()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:vs(function(g,T){gy(this,g,T)}),getScrollInfo:function(){var g=this.display.scroller;return{left:g.scrollLeft,top:g.scrollTop,height:g.scrollHeight-gs(this)-this.display.barHeight,width:g.scrollWidth-gs(this)-this.display.barWidth,clientHeight:qn(this),clientWidth:Ga(this)}},scrollIntoView:vs(function(g,T){g==null?(g={from:this.doc.sel.primary().head,to:null},T==null&&(T=this.options.cursorScrollMargin)):typeof g=="number"?g={from:xe(g,0),to:null}:g.from==null&&(g={from:g,to:null}),g.to||(g.to=g.from),g.margin=T||0,g.from.line!=null?wH(this,g):aI(this,g.from,g.to,g.margin)}),setSize:vs(function(g,T){var A=this,N=function(H){return typeof H=="number"||/^\d+$/.test(String(H))?H+"px":H};g!=null&&(this.display.wrapper.style.width=N(g)),T!=null&&(this.display.wrapper.style.height=N(T)),this.options.lineWrapping&&Ri(this);var U=this.display.viewFrom;this.doc.iter(U,this.display.viewTo,function(H){if(H.widgets){for(var Y=0;Y<H.widgets.length;Y++)if(H.widgets[Y].noHScroll){Te(A,U,"widget");break}}++U}),this.curOp.forceUpdate=!0,Ot(this,"refresh",this)}),operation:function(g){return na(this,g)},startOperation:function(){return yh(this)},endOperation:function(){return gh(this)},refresh:vs(function(){var g=this.display.cachedTextHeight;te(this),this.curOp.forceUpdate=!0,qo(this),gy(this,this.doc.scrollLeft,this.doc.scrollTop),QT(this.display),(g==null||Math.abs(g-Dr(this.display))>.5||this.options.lineWrapping)&&w(this),Ot(this,"refresh",this)}),swapDoc:vs(function(g){var T=this.doc;return T.cm=null,this.state.selectingText&&this.state.selectingText(),_I(this,g),qo(this),this.display.input.reset(),gy(this,g.scrollLeft,g.scrollTop),this.curOp.forceScroll=!0,Hi(this,"swapDoc",this,T),T}),phrase:function(g){var T=this.options.phrases;return T&&Object.prototype.hasOwnProperty.call(T,g)?T[g]:g},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ct(u),u.registerHelper=function(g,T,A){v.hasOwnProperty(g)||(v[g]=u[g]={_global:[]}),v[g][T]=A},u.registerGlobalHelper=function(g,T,A,N){u.registerHelper(g,T,N),v[g]._global.push({pred:A,val:N})}}function m1(u,f,v,g,T){var A=f,N=v,U=lt(u,f.line),H=T&&u.direction=="rtl"?-v:v;function Y(){var et=f.line+H;return et<u.first||et>=u.first+u.size?!1:(f=new xe(et,f.ch,f.sticky),U=lt(u,et))}function ie(et){var We;if(g=="codepoint"){var st=U.text.charCodeAt(f.ch+(v>0?0:-1));if(isNaN(st))We=null;else{var vt=v>0?st>=55296&&st<56320:st>=56320&&st<57343;We=new xe(f.line,Math.max(0,Math.min(U.text.length,f.ch+v*(vt?2:1))),-v)}}else T?We=a6(u.cm,U,f,v):We=l1(U,f,v);if(We==null)if(!et&&Y())f=c1(T,u.cm,U,f.line,H);else return!1;else f=We;return!0}if(g=="char"||g=="codepoint")ie();else if(g=="column")ie(!0);else if(g=="word"||g=="group")for(var le=null,ye=g=="group",me=u.cm&&u.cm.getHelper(f,"wordChars"),Se=!0;!(v<0&&!ie(!Se));Se=!1){var Ie=U.text.charAt(f.ch)||`
`,Fe=De(Ie,me)?"w":ye&&Ie==`
`?"n":!ye||/\s/.test(Ie)?null:"p";if(ye&&!Se&&!Fe&&(Fe="s"),le&&le!=Fe){v<0&&(v=1,ie(),f.sticky="after");break}if(Fe&&(le=Fe),v>0&&!ie(!Se))break}var Ye=zb(u,f,A,N,!0);return ho(A,Ye)&&(Ye.hitSide=!0),Ye}function pD(u,f,v,g){var T=u.doc,A=f.left,N;if(g=="page"){var U=Math.min(u.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),H=Math.max(U-.5*Dr(u.display),3);N=(v>0?f.bottom:f.top)+v*H}else g=="line"&&(N=v>0?f.bottom+3:f.top-3);for(var Y;Y=kc(u,A,N),!!Y.outside;){if(v<0?N<=0:N>=T.height){Y.hitSide=!0;break}N+=v*5}return Y}var Ni=function(u){this.cm=u,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ce,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ni.prototype.init=function(u){var f=this,v=this,g=v.cm,T=v.div=u.lineDiv;T.contentEditable=!0,hD(T,g.options.spellcheck,g.options.autocorrect,g.options.autocapitalize);function A(U){for(var H=U.target;H;H=H.parentNode){if(H==T)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(H.className))break}return!1}Ke(T,"paste",function(U){!A(U)||ge(g,U)||cD(U,g)||d<=11&&setTimeout(vr(g,function(){return f.updateFromDOM()}),20)}),Ke(T,"compositionstart",function(U){f.composing={data:U.data,done:!1}}),Ke(T,"compositionupdate",function(U){f.composing||(f.composing={data:U.data,done:!1})}),Ke(T,"compositionend",function(U){f.composing&&(U.data!=f.composing.data&&f.readFromDOMSoon(),f.composing.done=!0)}),Ke(T,"touchstart",function(){return v.forceCompositionEnd()}),Ke(T,"input",function(){f.composing||f.readFromDOMSoon()});function N(U){if(!(!A(U)||ge(g,U))){if(g.somethingSelected())e_({lineWise:!1,text:g.getSelections()}),U.type=="cut"&&g.replaceSelection("",null,"cut");else if(g.options.lineWiseCopyCut){var H=dD(g);e_({lineWise:!0,text:H.text}),U.type=="cut"&&g.operation(function(){g.setSelections(H.ranges,0,fe),g.replaceSelection("",null,"cut")})}else return;if(U.clipboardData){U.clipboardData.clearData();var Y=Wo.text.join(`
`);if(U.clipboardData.setData("Text",Y),U.clipboardData.getData("Text")==Y){U.preventDefault();return}}var ie=fD(),le=ie.firstChild;g.display.lineSpace.insertBefore(ie,g.display.lineSpace.firstChild),le.value=Wo.text.join(`
`);var ye=_e();Q(le),setTimeout(function(){g.display.lineSpace.removeChild(ie),ye.focus(),ye==T&&v.showPrimarySelection()},50)}}Ke(T,"copy",N),Ke(T,"cut",N)},Ni.prototype.screenReaderLabelChanged=function(u){u?this.div.setAttribute("aria-label",u):this.div.removeAttribute("aria-label")},Ni.prototype.prepareSelection=function(){var u=xu(this.cm,!1);return u.focus=_e()==this.div,u},Ni.prototype.showSelection=function(u,f){!u||!this.cm.display.view.length||((u.focus||f)&&this.showPrimarySelection(),this.showMultipleSelections(u))},Ni.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ni.prototype.showPrimarySelection=function(){var u=this.getSelection(),f=this.cm,v=f.doc.sel.primary(),g=v.from(),T=v.to();if(f.display.viewTo==f.display.viewFrom||g.line>=f.display.viewTo||T.line<f.display.viewFrom){u.removeAllRanges();return}var A=t_(f,u.anchorNode,u.anchorOffset),N=t_(f,u.focusNode,u.focusOffset);if(!(A&&!A.bad&&N&&!N.bad&&gt(cs(A,N),g)==0&&gt(ls(A,N),T)==0)){var U=f.display.view,H=g.line>=f.display.viewFrom&&mD(f,g)||{node:U[0].measure.map[2],offset:0},Y=T.line<f.display.viewTo&&mD(f,T);if(!Y){var ie=U[U.length-1].measure,le=ie.maps?ie.maps[ie.maps.length-1]:ie.map;Y={node:le[le.length-1],offset:le[le.length-2]-le[le.length-3]}}if(!H||!Y){u.removeAllRanges();return}var ye=u.rangeCount&&u.getRangeAt(0),me;try{me=ue(H.node,H.offset,Y.offset,Y.node)}catch{}me&&(!r&&f.state.focused?(u.collapse(H.node,H.offset),me.collapsed||(u.removeAllRanges(),u.addRange(me))):(u.removeAllRanges(),u.addRange(me)),ye&&u.anchorNode==null?u.addRange(ye):r&&this.startGracePeriod()),this.rememberSelection()}},Ni.prototype.startGracePeriod=function(){var u=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){u.gracePeriod=!1,u.selectionChanged()&&u.cm.operation(function(){return u.cm.curOp.selectionChanged=!0})},20)},Ni.prototype.showMultipleSelections=function(u){z(this.cm.display.cursorDiv,u.cursors),z(this.cm.display.selectionDiv,u.selection)},Ni.prototype.rememberSelection=function(){var u=this.getSelection();this.lastAnchorNode=u.anchorNode,this.lastAnchorOffset=u.anchorOffset,this.lastFocusNode=u.focusNode,this.lastFocusOffset=u.focusOffset},Ni.prototype.selectionInEditor=function(){var u=this.getSelection();if(!u.rangeCount)return!1;var f=u.getRangeAt(0).commonAncestorContainer;return ve(this.div,f)},Ni.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||_e()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ni.prototype.blur=function(){this.div.blur()},Ni.prototype.getField=function(){return this.div},Ni.prototype.supportsTouch=function(){return!0},Ni.prototype.receivedFocus=function(){var u=this,f=this;this.selectionInEditor()?setTimeout(function(){return u.pollSelection()},20):na(this.cm,function(){return f.cm.curOp.selectionChanged=!0});function v(){f.cm.state.focused&&(f.pollSelection(),f.polling.set(f.cm.options.pollInterval,v))}this.polling.set(this.cm.options.pollInterval,v)},Ni.prototype.selectionChanged=function(){var u=this.getSelection();return u.anchorNode!=this.lastAnchorNode||u.anchorOffset!=this.lastAnchorOffset||u.focusNode!=this.lastFocusNode||u.focusOffset!=this.lastFocusOffset},Ni.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var u=this.getSelection(),f=this.cm;if(R&&y&&this.cm.display.gutterSpecs.length&&k6(u.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var v=t_(f,u.anchorNode,u.anchorOffset),g=t_(f,u.focusNode,u.focusOffset);v&&g&&na(f,function(){Qr(f.doc,Mu(v,g),fe),(v.bad||g.bad)&&(f.curOp.selectionChanged=!0)})}}},Ni.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var u=this.cm,f=u.display,v=u.doc.sel.primary(),g=v.from(),T=v.to();if(g.ch==0&&g.line>u.firstLine()&&(g=xe(g.line-1,lt(u.doc,g.line-1).length)),T.ch==lt(u.doc,T.line).text.length&&T.line<u.lastLine()&&(T=xe(T.line+1,0)),g.line<f.viewFrom||T.line>f.viewTo-1)return!1;var A,N,U;g.line==f.viewFrom||(A=G(u,g.line))==0?(N=Ge(f.view[0].line),U=f.view[0].node):(N=Ge(f.view[A].line),U=f.view[A-1].node.nextSibling);var H=G(u,T.line),Y,ie;if(H==f.view.length-1?(Y=f.viewTo-1,ie=f.lineDiv.lastChild):(Y=Ge(f.view[H+1].line)-1,ie=f.view[H+1].node.previousSibling),!U)return!1;for(var le=u.doc.splitLines(A6(u,U,ie,N,Y)),ye=as(u.doc,xe(N,0),xe(Y,lt(u.doc,Y).text.length));le.length>1&&ye.length>1;)if(Ae(le)==Ae(ye))le.pop(),ye.pop(),Y--;else if(le[0]==ye[0])le.shift(),ye.shift(),N++;else break;for(var me=0,Se=0,Ie=le[0],Fe=ye[0],Ye=Math.min(Ie.length,Fe.length);me<Ye&&Ie.charCodeAt(me)==Fe.charCodeAt(me);)++me;for(var et=Ae(le),We=Ae(ye),st=Math.min(et.length-(le.length==1?me:0),We.length-(ye.length==1?me:0));Se<st&&et.charCodeAt(et.length-Se-1)==We.charCodeAt(We.length-Se-1);)++Se;if(le.length==1&&ye.length==1&&N==g.line)for(;me&&me>g.ch&&et.charCodeAt(et.length-Se-1)==We.charCodeAt(We.length-Se-1);)me--,Se++;le[le.length-1]=et.slice(0,et.length-Se).replace(/^\u200b+/,""),le[0]=le[0].slice(me).replace(/\u200b+$/,"");var vt=xe(N,me),mt=xe(Y,ye.length?Ae(ye).length-Se:0);if(le.length>1||le[0]||gt(vt,mt))return cp(u.doc,le,vt,mt,"+input"),!0},Ni.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ni.prototype.reset=function(){this.forceCompositionEnd()},Ni.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ni.prototype.readFromDOMSoon=function(){var u=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(u.readDOMTimeout=null,u.composing)if(u.composing.done)u.composing=null;else return;u.updateFromDOM()},80))},Ni.prototype.updateFromDOM=function(){var u=this;(this.cm.isReadOnly()||!this.pollContent())&&na(this.cm,function(){return te(u.cm)})},Ni.prototype.setUneditable=function(u){u.contentEditable="false"},Ni.prototype.onKeyPress=function(u){u.charCode==0||this.composing||(u.preventDefault(),this.cm.isReadOnly()||vr(this.cm,p1)(this.cm,String.fromCharCode(u.charCode==null?u.keyCode:u.charCode),0))},Ni.prototype.readOnlyChanged=function(u){this.div.contentEditable=String(u!="nocursor")},Ni.prototype.onContextMenu=function(){},Ni.prototype.resetPosition=function(){},Ni.prototype.needsContentAttribute=!0;function mD(u,f){var v=wc(u,f.line);if(!v||v.hidden)return null;var g=lt(u.doc,f.line),T=Eu(v,g,f.line),A=xt(g,u.doc.direction),N="left";if(A){var U=hi(A,f.ch);N=U%2?"right":"left"}var H=Cu(T.map,f.ch,N);return H.offset=H.collapse=="right"?H.end:H.start,H}function k6(u){for(var f=u;f;f=f.parentNode)if(/CodeMirror-gutter-wrapper/.test(f.className))return!0;return!1}function pp(u,f){return f&&(u.bad=!0),u}function A6(u,f,v,g,T){var A="",N=!1,U=u.doc.lineSeparator(),H=!1;function Y(me){return function(Se){return Se.id==me}}function ie(){N&&(A+=U,H&&(A+=U),N=H=!1)}function le(me){me&&(ie(),A+=me)}function ye(me){if(me.nodeType==1){var Se=me.getAttribute("cm-text");if(Se){le(Se);return}var Ie=me.getAttribute("cm-marker"),Fe;if(Ie){var Ye=u.findMarks(xe(g,0),xe(T+1,0),Y(+Ie));Ye.length&&(Fe=Ye[0].find(0))&&le(as(u.doc,Fe.from,Fe.to).join(U));return}if(me.getAttribute("contenteditable")=="false")return;var et=/^(pre|div|p|li|table|br)$/i.test(me.nodeName);if(!/^br$/i.test(me.nodeName)&&me.textContent.length==0)return;et&&ie();for(var We=0;We<me.childNodes.length;We++)ye(me.childNodes[We]);/^(pre|p)$/i.test(me.nodeName)&&(H=!0),et&&(N=!0)}else me.nodeType==3&&le(me.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;ye(f),f!=v;)f=f.nextSibling,H=!1;return A}function t_(u,f,v){var g;if(f==u.display.lineDiv){if(g=u.display.lineDiv.childNodes[v],!g)return pp(u.clipPos(xe(u.display.viewTo-1)),!0);f=null,v=0}else for(g=f;;g=g.parentNode){if(!g||g==u.display.lineDiv)return null;if(g.parentNode&&g.parentNode==u.display.lineDiv)break}for(var T=0;T<u.display.view.length;T++){var A=u.display.view[T];if(A.node==g)return R6(A,f,v)}}function R6(u,f,v){var g=u.text.firstChild,T=!1;if(!f||!ve(g,f))return pp(xe(Ge(u.line),0),!0);if(f==g&&(T=!0,f=g.childNodes[v],v=0,!f)){var A=u.rest?Ae(u.rest):u.line;return pp(xe(Ge(A),A.text.length),T)}var N=f.nodeType==3?f:null,U=f;for(!N&&f.childNodes.length==1&&f.firstChild.nodeType==3&&(N=f.firstChild,v&&(v=N.nodeValue.length));U.parentNode!=g;)U=U.parentNode;var H=u.measure,Y=H.maps;function ie(Fe,Ye,et){for(var We=-1;We<(Y?Y.length:0);We++)for(var st=We<0?H.map:Y[We],vt=0;vt<st.length;vt+=3){var mt=st[vt+2];if(mt==Fe||mt==Ye){var qt=Ge(We<0?u.line:u.rest[We]),Yi=st[vt]+et;return(et<0||mt!=Fe)&&(Yi=st[vt+(et?1:0)]),xe(qt,Yi)}}}var le=ie(N,U,v);if(le)return pp(le,T);for(var ye=U.nextSibling,me=N?N.nodeValue.length-v:0;ye;ye=ye.nextSibling){if(le=ie(ye,ye.firstChild,0),le)return pp(xe(le.line,le.ch-me),T);me+=ye.textContent.length}for(var Se=U.previousSibling,Ie=v;Se;Se=Se.previousSibling){if(le=ie(Se,Se.firstChild,-1),le)return pp(xe(le.line,le.ch+Ie),T);Ie+=Se.textContent.length}}var Un=function(u){this.cm=u,this.prevInput="",this.pollingFast=!1,this.polling=new ce,this.hasSelection=!1,this.composing=null};Un.prototype.init=function(u){var f=this,v=this,g=this.cm;this.createField(u);var T=this.textarea;u.wrapper.insertBefore(this.wrapper,u.wrapper.firstChild),k&&(T.style.width="0px"),Ke(T,"input",function(){c&&d>=9&&f.hasSelection&&(f.hasSelection=null),v.poll()}),Ke(T,"paste",function(N){ge(g,N)||cD(N,g)||(g.state.pasteIncoming=+new Date,v.fastPoll())});function A(N){if(!ge(g,N)){if(g.somethingSelected())e_({lineWise:!1,text:g.getSelections()});else if(g.options.lineWiseCopyCut){var U=dD(g);e_({lineWise:!0,text:U.text}),N.type=="cut"?g.setSelections(U.ranges,null,fe):(v.prevInput="",T.value=U.text.join(`
`),Q(T))}else return;N.type=="cut"&&(g.state.cutIncoming=+new Date)}}Ke(T,"cut",A),Ke(T,"copy",A),Ke(u.scroller,"paste",function(N){if(!(Os(u,N)||ge(g,N))){if(!T.dispatchEvent){g.state.pasteIncoming=+new Date,v.focus();return}var U=new Event("paste");U.clipboardData=N.clipboardData,T.dispatchEvent(U)}}),Ke(u.lineSpace,"selectstart",function(N){Os(u,N)||it(N)}),Ke(T,"compositionstart",function(){var N=g.getCursor("from");v.composing&&v.composing.range.clear(),v.composing={start:N,range:g.markText(N,g.getCursor("to"),{className:"CodeMirror-composing"})}}),Ke(T,"compositionend",function(){v.composing&&(v.poll(),v.composing.range.clear(),v.composing=null)})},Un.prototype.createField=function(u){this.wrapper=fD(),this.textarea=this.wrapper.firstChild},Un.prototype.screenReaderLabelChanged=function(u){u?this.textarea.setAttribute("aria-label",u):this.textarea.removeAttribute("aria-label")},Un.prototype.prepareSelection=function(){var u=this.cm,f=u.display,v=u.doc,g=xu(u);if(u.options.moveInputWithCursor){var T=Zr(u,v.sel.primary().head,"div"),A=f.wrapper.getBoundingClientRect(),N=f.lineDiv.getBoundingClientRect();g.teTop=Math.max(0,Math.min(f.wrapper.clientHeight-10,T.top+N.top-A.top)),g.teLeft=Math.max(0,Math.min(f.wrapper.clientWidth-10,T.left+N.left-A.left))}return g},Un.prototype.showSelection=function(u){var f=this.cm,v=f.display;z(v.cursorDiv,u.cursors),z(v.selectionDiv,u.selection),u.teTop!=null&&(this.wrapper.style.top=u.teTop+"px",this.wrapper.style.left=u.teLeft+"px")},Un.prototype.reset=function(u){if(!(this.contextMenuPending||this.composing)){var f=this.cm;if(f.somethingSelected()){this.prevInput="";var v=f.getSelection();this.textarea.value=v,f.state.focused&&Q(this.textarea),c&&d>=9&&(this.hasSelection=v)}else u||(this.prevInput=this.textarea.value="",c&&d>=9&&(this.hasSelection=null))}},Un.prototype.getField=function(){return this.textarea},Un.prototype.supportsTouch=function(){return!1},Un.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!O||_e()!=this.textarea))try{this.textarea.focus()}catch{}},Un.prototype.blur=function(){this.textarea.blur()},Un.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Un.prototype.receivedFocus=function(){this.slowPoll()},Un.prototype.slowPoll=function(){var u=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){u.poll(),u.cm.state.focused&&u.slowPoll()})},Un.prototype.fastPoll=function(){var u=!1,f=this;f.pollingFast=!0;function v(){var g=f.poll();!g&&!u?(u=!0,f.polling.set(60,v)):(f.pollingFast=!1,f.slowPoll())}f.polling.set(20,v)},Un.prototype.poll=function(){var u=this,f=this.cm,v=this.textarea,g=this.prevInput;if(this.contextMenuPending||!f.state.focused||Gn(v)&&!g&&!this.composing||f.isReadOnly()||f.options.disableInput||f.state.keySeq)return!1;var T=v.value;if(T==g&&!f.somethingSelected())return!1;if(c&&d>=9&&this.hasSelection===T||I&&/[\uf700-\uf7ff]/.test(T))return f.display.input.reset(),!1;if(f.doc.sel==f.display.selForContextMenu){var A=T.charCodeAt(0);if(A==8203&&!g&&(g="​"),A==8666)return this.reset(),this.cm.execCommand("undo")}for(var N=0,U=Math.min(g.length,T.length);N<U&&g.charCodeAt(N)==T.charCodeAt(N);)++N;return na(f,function(){p1(f,T.slice(N),g.length-N,null,u.composing?"*compose":null),T.length>1e3||T.indexOf(`
`)>-1?v.value=u.prevInput="":u.prevInput=T,u.composing&&(u.composing.range.clear(),u.composing.range=f.markText(u.composing.start,f.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Un.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Un.prototype.onKeyPress=function(){c&&d>=9&&(this.hasSelection=null),this.fastPoll()},Un.prototype.onContextMenu=function(u){var f=this,v=f.cm,g=v.display,T=f.textarea;f.contextMenuPending&&f.contextMenuPending();var A=D(v,u),N=g.scroller.scrollTop;if(!A||_)return;var U=v.options.resetSelectionOnContextMenu;U&&v.doc.sel.contains(A)==-1&&vr(v,Qr)(v.doc,Mu(A),fe);var H=T.style.cssText,Y=f.wrapper.style.cssText,ie=f.wrapper.offsetParent.getBoundingClientRect();f.wrapper.style.cssText="position: static",T.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(u.clientY-ie.top-5)+"px; left: "+(u.clientX-ie.left-5)+`px;
      z-index: 1000; background: `+(c?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var le;p&&(le=window.scrollY),g.input.focus(),p&&window.scrollTo(null,le),g.input.reset(),v.somethingSelected()||(T.value=f.prevInput=" "),f.contextMenuPending=me,g.selForContextMenu=v.doc.sel,clearTimeout(g.detectingSelectAll);function ye(){if(T.selectionStart!=null){var Ie=v.somethingSelected(),Fe="​"+(Ie?T.value:"");T.value="⇚",T.value=Fe,f.prevInput=Ie?"":"​",T.selectionStart=1,T.selectionEnd=Fe.length,g.selForContextMenu=v.doc.sel}}function me(){if(f.contextMenuPending==me&&(f.contextMenuPending=!1,f.wrapper.style.cssText=Y,T.style.cssText=H,c&&d<9&&g.scrollbars.setScrollTop(g.scroller.scrollTop=N),T.selectionStart!=null)){(!c||c&&d<9)&&ye();var Ie=0,Fe=function(){g.selForContextMenu==v.doc.sel&&T.selectionStart==0&&T.selectionEnd>0&&f.prevInput=="​"?vr(v,PI)(v):Ie++<10?g.detectingSelectAll=setTimeout(Fe,500):(g.selForContextMenu=null,g.input.reset())};g.detectingSelectAll=setTimeout(Fe,200)}}if(c&&d>=9&&ye(),q){fi(u);var Se=function(){dt(window,"mouseup",Se),setTimeout(me,20)};Ke(window,"mouseup",Se)}else setTimeout(me,50)},Un.prototype.readOnlyChanged=function(u){u||this.reset(),this.textarea.disabled=u=="nocursor",this.textarea.readOnly=!!u},Un.prototype.setUneditable=function(){},Un.prototype.needsContentAttribute=!1;function I6(u,f){if(f=f?W(f):{},f.value=u.value,!f.tabindex&&u.tabIndex&&(f.tabindex=u.tabIndex),!f.placeholder&&u.placeholder&&(f.placeholder=u.placeholder),f.autofocus==null){var v=_e();f.autofocus=v==u||u.getAttribute("autofocus")!=null&&v==document.body}function g(){u.value=U.getValue()}var T;if(u.form&&(Ke(u.form,"submit",g),!f.leaveSubmitMethodAlone)){var A=u.form;T=A.submit;try{var N=A.submit=function(){g(),A.submit=T,A.submit(),A.submit=N}}catch{}}f.finishInit=function(H){H.save=g,H.getTextArea=function(){return u},H.toTextArea=function(){H.toTextArea=isNaN,g(),u.parentNode.removeChild(H.getWrapperElement()),u.style.display="",u.form&&(dt(u.form,"submit",g),!f.leaveSubmitMethodAlone&&typeof u.form.submit=="function"&&(u.form.submit=T))}},u.style.display="none";var U=hn(function(H){return u.parentNode.insertBefore(H,u.nextSibling)},f);return U}function D6(u){u.off=dt,u.on=Ke,u.wheelEventPixels=UH,u.Doc=Gs,u.splitLines=Rs,u.countColumn=ne,u.findColumn=Ft,u.isWordChar=rt,u.Pass=he,u.signal=Ot,u.Line=je,u.changeEnd=Pu,u.scrollbarModel=cI,u.Pos=xe,u.cmpPos=gt,u.modes=co,u.mimeModes=uo,u.resolveMode=bl,u.getMode=vc,u.modeExtensions=Ds,u.extendMode=eh,u.copyState=hr,u.startState=pu,u.innerMode=bc,u.commands=My,u.keyMap=Ic,u.keyName=XI,u.isModifierKey=jI,u.lookupKey=dp,u.normalizeKeyMap=s6,u.StringStream=Qi,u.SharedTextMarker=Iy,u.TextMarker=Nu,u.LineWidget=Ry,u.e_preventDefault=it,u.e_stopPropagation=at,u.e_stop=fi,u.addClass=de,u.contains=ve,u.rmClass=B,u.keyNames=Gu}E6(hn),S6(hn);var x6="iter insert remove copy getEditor constructor".split(" ");for(var i_ in Gs.prototype)Gs.prototype.hasOwnProperty(i_)&&J(x6,i_)<0&&(hn.prototype[i_]=function(u){return function(){return u.apply(this.doc,arguments)}}(Gs.prototype[i_]));return ct(Gs),hn.inputStyles={textarea:Un,contenteditable:Ni},hn.defineMode=function(u){!hn.defaults.mode&&u!="null"&&(hn.defaults.mode=u),Qd.apply(this,arguments)},hn.defineMIME=Jd,hn.defineMode("null",function(){return{token:function(u){return u.skipToEnd()}}}),hn.defineMIME("text/plain","null"),hn.defineExtension=function(u,f){hn.prototype[u]=f},hn.defineDocExtension=function(u,f){Gs.prototype[u]=f},hn.fromTextArea=I6,D6(hn),hn.version="5.65.1",hn})})(m2);var Fm=m2.exports;const P6=ru(Fm);var O6=function(t,e,i){if(t==null||e==null)return t;var n=String(t),r=typeof e=="number"?e:parseInt(e,10);if(isNaN(r)||!isFinite(r))return n;var s=n.length;if(s>=r)return n;var a=i==null?"":String(i);a===""&&(a=" ");for(var o=r-s;a.length<o;)a+=a;var c=a.length>o?a.substr(0,o):a;return n+c};const v1=ru(O6);var $l=9e15,n_=function(){for(var t=[],e=-323;e<=308;e++)t.push(+("1e"+e));return function(i){return t[i+323]}}(),$e=function(t){return t instanceof di?t:new di(t)},sa=function(t,e){return new di().fromMantissaExponent(t,e)},Gh=function(t,e){return new di().fromMantissaExponent_noNormalize(t,e)};function N6(t,e,i,n){var r=e.mul(i.pow(n));return di.floor(t.div(r).mul(i.sub(1)).add(1).log10()/i.log10())}function G6(t,e,i,n){return e.mul(i.pow(n)).mul(di.sub(1,i.pow(t))).div(di.sub(1,i))}var di=function(){function t(e){this.mantissa=NaN,this.exponent=NaN,e===void 0?(this.m=0,this.e=0):e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):this.fromString(e)}return Object.defineProperty(t.prototype,"m",{get:function(){return this.mantissa},set:function(e){this.mantissa=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"e",{get:function(){return this.exponent},set:function(e){this.exponent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s",{get:function(){return this.sign()},set:function(e){if(e===0)return this.e=0,void(this.m=0);this.sgn()!==e&&(this.m=-this.m)},enumerable:!1,configurable:!0}),t.fromMantissaExponent=function(e,i){return new t().fromMantissaExponent(e,i)},t.fromMantissaExponent_noNormalize=function(e,i){return new t().fromMantissaExponent_noNormalize(e,i)},t.fromDecimal=function(e){return new t().fromDecimal(e)},t.fromNumber=function(e){return new t().fromNumber(e)},t.fromString=function(e){return new t().fromString(e)},t.fromValue=function(e){return new t().fromValue(e)},t.fromValue_noAlloc=function(e){return e instanceof t?e:new t(e)},t.abs=function(e){return $e(e).abs()},t.neg=function(e){return $e(e).neg()},t.negate=function(e){return $e(e).neg()},t.negated=function(e){return $e(e).neg()},t.sign=function(e){return $e(e).sign()},t.sgn=function(e){return $e(e).sign()},t.round=function(e){return $e(e).round()},t.floor=function(e){return $e(e).floor()},t.ceil=function(e){return $e(e).ceil()},t.trunc=function(e){return $e(e).trunc()},t.add=function(e,i){return $e(e).add(i)},t.plus=function(e,i){return $e(e).add(i)},t.sub=function(e,i){return $e(e).sub(i)},t.subtract=function(e,i){return $e(e).sub(i)},t.minus=function(e,i){return $e(e).sub(i)},t.mul=function(e,i){return $e(e).mul(i)},t.multiply=function(e,i){return $e(e).mul(i)},t.times=function(e,i){return $e(e).mul(i)},t.div=function(e,i){return $e(e).div(i)},t.divide=function(e,i){return $e(e).div(i)},t.recip=function(e){return $e(e).recip()},t.reciprocal=function(e){return $e(e).recip()},t.reciprocate=function(e){return $e(e).reciprocate()},t.cmp=function(e,i){return $e(e).cmp(i)},t.compare=function(e,i){return $e(e).cmp(i)},t.eq=function(e,i){return $e(e).eq(i)},t.equals=function(e,i){return $e(e).eq(i)},t.neq=function(e,i){return $e(e).neq(i)},t.notEquals=function(e,i){return $e(e).notEquals(i)},t.lt=function(e,i){return $e(e).lt(i)},t.lte=function(e,i){return $e(e).lte(i)},t.gt=function(e,i){return $e(e).gt(i)},t.gte=function(e,i){return $e(e).gte(i)},t.max=function(e,i){return $e(e).max(i)},t.min=function(e,i){return $e(e).min(i)},t.clamp=function(e,i,n){return $e(e).clamp(i,n)},t.clampMin=function(e,i){return $e(e).clampMin(i)},t.clampMax=function(e,i){return $e(e).clampMax(i)},t.cmp_tolerance=function(e,i,n){return $e(e).cmp_tolerance(i,n)},t.compare_tolerance=function(e,i,n){return $e(e).cmp_tolerance(i,n)},t.eq_tolerance=function(e,i,n){return $e(e).eq_tolerance(i,n)},t.equals_tolerance=function(e,i,n){return $e(e).eq_tolerance(i,n)},t.neq_tolerance=function(e,i,n){return $e(e).neq_tolerance(i,n)},t.notEquals_tolerance=function(e,i,n){return $e(e).notEquals_tolerance(i,n)},t.lt_tolerance=function(e,i,n){return $e(e).lt_tolerance(i,n)},t.lte_tolerance=function(e,i,n){return $e(e).lte_tolerance(i,n)},t.gt_tolerance=function(e,i,n){return $e(e).gt_tolerance(i,n)},t.gte_tolerance=function(e,i,n){return $e(e).gte_tolerance(i,n)},t.log10=function(e){return $e(e).log10()},t.absLog10=function(e){return $e(e).absLog10()},t.pLog10=function(e){return $e(e).pLog10()},t.log=function(e,i){return $e(e).log(i)},t.log2=function(e){return $e(e).log2()},t.ln=function(e){return $e(e).ln()},t.logarithm=function(e,i){return $e(e).logarithm(i)},t.pow10=function(e){return Number.isInteger(e)?Gh(1,e):sa(Math.pow(10,e%1),Math.trunc(e))},t.pow=function(e,i){return typeof e=="number"&&e===10&&typeof i=="number"&&Number.isInteger(i)?Gh(1,i):$e(e).pow(i)},t.exp=function(e){return $e(e).exp()},t.sqr=function(e){return $e(e).sqr()},t.sqrt=function(e){return $e(e).sqrt()},t.cube=function(e){return $e(e).cube()},t.cbrt=function(e){return $e(e).cbrt()},t.dp=function(e){return $e(e).dp()},t.decimalPlaces=function(e){return $e(e).dp()},t.affordGeometricSeries=function(e,i,n,r){return N6($e(e),$e(i),$e(n),r)},t.sumGeometricSeries=function(e,i,n,r){return G6(e,$e(i),$e(n),r)},t.affordArithmeticSeries=function(e,i,n,r){return function(s,a,o,c){var d=a.add(c.mul(o)).sub(o.div(2)),p=d.pow(2);return d.neg().add(p.add(o.mul(s).mul(2)).sqrt()).div(o).floor()}($e(e),$e(i),$e(n),$e(r))},t.sumArithmeticSeries=function(e,i,n,r){return function(s,a,o,c){var d=a.add(c.mul(o));return s.div(2).mul(d.mul(2).plus(s.sub(1).mul(o)))}($e(e),$e(i),$e(n),$e(r))},t.efficiencyOfPurchase=function(e,i,n){return function(r,s,a){return r.div(s).add(r.div(a))}($e(e),$e(i),$e(n))},t.randomDecimalForTesting=function(e){if(20*Math.random()<1)return Gh(0,0);var i=10*Math.random();10*Math.random()<1&&(i=Math.round(i)),i*=Math.sign(2*Math.random()-1);var n=Math.floor(Math.random()*e*2)-e;return sa(i,n)},t.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var e=Math.floor(Math.log10(Math.abs(this.m)));return this.m=e===-324?10*this.m/1e-323:this.m/n_(e),this.e+=e,this},t.prototype.fromMantissaExponent=function(e,i){return isFinite(e)&&isFinite(i)?(this.m=e,this.e=i,this.normalize(),this):(e=Number.NaN,i=Number.NaN,this)},t.prototype.fromMantissaExponent_noNormalize=function(e,i){return this.m=e,this.e=i,this},t.prototype.fromDecimal=function(e){return this.m=e.m,this.e=e.e,this},t.prototype.fromNumber=function(e){return isNaN(e)?(this.m=Number.NaN,this.e=Number.NaN):e===Number.POSITIVE_INFINITY?(this.m=1,this.e=$l):e===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=$l):e===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(e))),this.m=this.e===-324?10*e/1e-323:e/n_(this.e),this.normalize()),this},t.prototype.fromString=function(e){if(e.indexOf("e")!==-1){var i=e.split("e");this.m=parseFloat(i[0]),this.e=parseFloat(i[1]),this.normalize()}else if(e==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(e)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+e);return this},t.prototype.fromValue=function(e){return e instanceof t?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.m=0,this.e=0,this)},t.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var e=this.m*n_(this.e);if(!isFinite(e)||this.e<0)return e;var i=Math.round(e);return Math.abs(i-e)<1e-10?i:e},t.prototype.mantissaWithDecimalPlaces=function(e){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var i=e+1,n=Math.ceil(Math.log10(Math.abs(this.m))),r=Math.round(this.m*Math.pow(10,i-n))*Math.pow(10,n-i);return parseFloat(r.toFixed(Math.max(i-n,0)))},t.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=$l?this.m>0?"Infinity":"-Infinity":this.e<=-$l||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toExponential=function(e){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=$l)return this.m>0?"Infinity":"-Infinity";if(this.e<=-$l||this.m===0)return"0"+(e>0?v1(".",e+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(e);isFinite(e)||(e=17);var i=e+1,n=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,i-n))*Math.pow(10,n-i)).toFixed(Math.max(i-n,0))+"e"+(this.e>=0?"+":"")+this.e},t.prototype.toFixed=function(e){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=$l?this.m>0?"Infinity":"-Infinity":this.e<=-$l||this.m===0?"0"+(e>0?v1(".",e+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(e>0?v1(".",e+1,"0"):""):this.toNumber().toFixed(e)},t.prototype.toPrecision=function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.e-1):this.toExponential(e-1)},t.prototype.valueOf=function(){return this.toString()},t.prototype.toJSON=function(){return this.toString()},t.prototype.toStringWithDecimalPlaces=function(e){return this.toExponential(e)},t.prototype.abs=function(){return Gh(Math.abs(this.m),this.e)},t.prototype.neg=function(){return Gh(-this.m,this.e)},t.prototype.negate=function(){return this.neg()},t.prototype.negated=function(){return this.neg()},t.prototype.sign=function(){return Math.sign(this.m)},t.prototype.sgn=function(){return this.sign()},t.prototype.round=function(){return this.e<-1?new t(0):this.e<17?new t(Math.round(this.toNumber())):this},t.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new t(0):new t(-1):this.e<17?new t(Math.floor(this.toNumber())):this},t.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new t(1):new t(0):this.e<17?new t(Math.ceil(this.toNumber())):this},t.prototype.trunc=function(){return this.e<0?new t(0):this.e<17?new t(Math.trunc(this.toNumber())):this},t.prototype.add=function(e){var i,n,r=$e(e);if(this.m===0)return r;if(r.m===0)return this;if(this.e>=r.e?(i=this,n=r):(i=r,n=this),i.e-n.e>17)return i;var s=Math.round(1e14*i.m+1e14*n.m*n_(n.e-i.e));return sa(s,i.e-14)},t.prototype.plus=function(e){return this.add(e)},t.prototype.sub=function(e){return this.add($e(e).neg())},t.prototype.subtract=function(e){return this.sub(e)},t.prototype.minus=function(e){return this.sub(e)},t.prototype.mul=function(e){if(typeof e=="number")return e<1e307&&e>-1e307?sa(this.m*e,this.e):sa(1e-307*this.m*e,this.e+307);var i=typeof e=="string"?new t(e):e;return sa(this.m*i.m,this.e+i.e)},t.prototype.multiply=function(e){return this.mul(e)},t.prototype.times=function(e){return this.mul(e)},t.prototype.div=function(e){return this.mul($e(e).recip())},t.prototype.divide=function(e){return this.div(e)},t.prototype.divideBy=function(e){return this.div(e)},t.prototype.dividedBy=function(e){return this.div(e)},t.prototype.recip=function(){return sa(1/this.m,-this.e)},t.prototype.reciprocal=function(){return this.recip()},t.prototype.reciprocate=function(){return this.recip()},t.prototype.cmp=function(e){var i=$e(e);if(this.m===0){if(i.m===0)return 0;if(i.m<0)return 1;if(i.m>0)return-1}if(i.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return i.m<0||this.e>i.e?1:this.e<i.e?-1:this.m>i.m?1:this.m<i.m?-1:0;if(this.m<0)return i.m>0||this.e>i.e?-1:this.e<i.e||this.m>i.m?1:this.m<i.m?-1:0;throw Error("Unreachable code")},t.prototype.compare=function(e){return this.cmp(e)},t.prototype.eq=function(e){var i=$e(e);return this.e===i.e&&this.m===i.m},t.prototype.equals=function(e){return this.eq(e)},t.prototype.neq=function(e){return!this.eq(e)},t.prototype.notEquals=function(e){return this.neq(e)},t.prototype.lt=function(e){var i=$e(e);return this.m===0?i.m>0:i.m===0?this.m<=0:this.e===i.e?this.m<i.m:this.m>0?i.m>0&&this.e<i.e:i.m>0||this.e>i.e},t.prototype.lte=function(e){return!this.gt(e)},t.prototype.gt=function(e){var i=$e(e);return this.m===0?i.m<0:i.m===0?this.m>0:this.e===i.e?this.m>i.m:this.m>0?i.m<0||this.e>i.e:i.m<0&&this.e<i.e},t.prototype.gte=function(e){return!this.lt(e)},t.prototype.max=function(e){var i=$e(e);return this.lt(i)?i:this},t.prototype.min=function(e){var i=$e(e);return this.gt(i)?i:this},t.prototype.clamp=function(e,i){return this.max(e).min(i)},t.prototype.clampMin=function(e){return this.max(e)},t.prototype.clampMax=function(e){return this.min(e)},t.prototype.cmp_tolerance=function(e,i){var n=$e(e);return this.eq_tolerance(n,i)?0:this.cmp(n)},t.prototype.compare_tolerance=function(e,i){return this.cmp_tolerance(e,i)},t.prototype.eq_tolerance=function(e,i){var n=$e(e);return t.lte(this.sub(n).abs(),t.max(this.abs(),n.abs()).mul(i))},t.prototype.equals_tolerance=function(e,i){return this.eq_tolerance(e,i)},t.prototype.neq_tolerance=function(e,i){return!this.eq_tolerance(e,i)},t.prototype.notEquals_tolerance=function(e,i){return this.neq_tolerance(e,i)},t.prototype.lt_tolerance=function(e,i){var n=$e(e);return!this.eq_tolerance(n,i)&&this.lt(n)},t.prototype.lte_tolerance=function(e,i){var n=$e(e);return this.eq_tolerance(n,i)||this.lt(n)},t.prototype.gt_tolerance=function(e,i){var n=$e(e);return!this.eq_tolerance(n,i)&&this.gt(n)},t.prototype.gte_tolerance=function(e,i){var n=$e(e);return this.eq_tolerance(n,i)||this.gt(n)},t.prototype.log10=function(){return this.e+Math.log10(this.m)},t.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},t.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},t.prototype.log=function(e){return Math.LN10/Math.log(e)*this.log10()},t.prototype.log2=function(){return 3.321928094887362*this.log10()},t.prototype.ln=function(){return 2.302585092994045*this.log10()},t.prototype.logarithm=function(e){return this.log(e)},t.prototype.pow=function(e){var i,n=e instanceof t?e.toNumber():e,r=this.e*n;if(Number.isSafeInteger(r)&&(i=Math.pow(this.m,n),isFinite(i)&&i!==0))return sa(i,r);var s=Math.trunc(r),a=r-s;if(i=Math.pow(10,n*Math.log10(this.m)+a),isFinite(i)&&i!==0)return sa(i,s);var o=t.pow10(n*this.absLog10());return this.sign()===-1?Math.abs(n%2)===1?o.neg():Math.abs(n%2)===0?o:new t(Number.NaN):o},t.prototype.pow_base=function(e){return $e(e).pow(this)},t.prototype.factorial=function(){var e=this.toNumber()+1;return t.pow(e/Math.E*Math.sqrt(e*Math.sinh(1/e)+1/(810*Math.pow(e,6))),e).mul(Math.sqrt(2*Math.PI/e))},t.prototype.exp=function(){var e=this.toNumber();return-706<e&&e<709?t.fromNumber(Math.exp(e)):t.pow(Math.E,e)},t.prototype.sqr=function(){return sa(Math.pow(this.m,2),2*this.e)},t.prototype.sqrt=function(){return this.m<0?new t(Number.NaN):this.e%2!=0?sa(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):sa(Math.sqrt(this.m),Math.floor(this.e/2))},t.prototype.cube=function(){return sa(Math.pow(this.m,3),3*this.e)},t.prototype.cbrt=function(){var e=1,i=this.m;i<0&&(e=-1,i=-i);var n=e*Math.pow(i,1/3),r=this.e%3;return sa(r===1||r===-1?2.154434690031883*n:r!==0?4.641588833612778*n:n,Math.floor(this.e/3))},t.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},t.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},t.prototype.tanh=function(){return this.sinh().div(this.cosh())},t.prototype.asinh=function(){return t.ln(this.add(this.sqr().add(1).sqrt()))},t.prototype.acosh=function(){return t.ln(this.add(this.sqr().sub(1).sqrt()))},t.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:t.ln(this.add(1).div(new t(1).sub(this)))/2},t.prototype.ascensionPenalty=function(e){return e===0?this:this.pow(Math.pow(10,-e))},t.prototype.egg=function(){return this.add(9)},t.prototype.lessThanOrEqualTo=function(e){return this.cmp(e)<1},t.prototype.lessThan=function(e){return this.cmp(e)<0},t.prototype.greaterThanOrEqualTo=function(e){return this.cmp(e)>-1},t.prototype.greaterThan=function(e){return this.cmp(e)>0},t.prototype.decimalPlaces=function(){return this.dp()},t.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var e=this.mantissa,i=-this.exponent,n=1;Math.abs(Math.round(e*n)/n-e)>1e-10;)n*=10,i++;return i>0?i:0},Object.defineProperty(t,"MAX_VALUE",{get:function(){return U6},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MIN_VALUE",{get:function(){return L6},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MAX_VALUE",{get:function(){return B6},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NUMBER_MIN_VALUE",{get:function(){return F6},enumerable:!1,configurable:!0}),t}(),U6=Gh(1,$l),L6=Gh(1,-$l),B6=$e(Number.MAX_VALUE),F6=$e(Number.MIN_VALUE),$6={};/*!
 * Vue.js v2.7.16
 * (c) 2014-2023 Evan You
 * Released under the MIT License.
 */var Qa=Object.freeze({}),ai=Array.isArray;function Gt(t){return t==null}function ke(t){return t!=null}function On(t){return t===!0}function H6(t){return t===!1}function Yv(t){return typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="boolean"}function Cn(t){return typeof t=="function"}function Ss(t){return t!==null&&typeof t=="object"}var fk=Object.prototype.toString;function to(t){return fk.call(t)==="[object Object]"}function V6(t){return fk.call(t)==="[object RegExp]"}function y2(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function pC(t){return ke(t)&&typeof t.then=="function"&&typeof t.catch=="function"}function q6(t){return t==null?"":Array.isArray(t)||to(t)&&t.toString===fk?JSON.stringify(t,Y6,2):String(t)}function Y6(t,e){return e&&e.__v_isRef?e.value:e}function nv(t){var e=parseFloat(t);return isNaN(e)?t:e}function hl(t,e){for(var i=Object.create(null),n=t.split(","),r=0;r<n.length;r++)i[n[r]]=!0;return e?function(s){return i[s.toLowerCase()]}:function(s){return i[s]}}hl("slot,component",!0);var W6=hl("key,ref,slot,slot-scope,is");function Hd(t,e){var i=t.length;if(i){if(e===t[i-1]){t.length=i-1;return}var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var j6=Object.prototype.hasOwnProperty;function Ks(t,e){return j6.call(t,e)}function Of(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var z6=/-(\w)/g,lf=Of(function(t){return t.replace(z6,function(e,i){return i?i.toUpperCase():""})}),X6=Of(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),K6=/\B([A-Z])/g,Wv=Of(function(t){return t.replace(K6,"-$1").toLowerCase()});function Z6(t,e){function i(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return i._length=t.length,i}function Q6(t,e){return t.bind(e)}var g2=Function.prototype.bind?Q6:Z6;function mC(t,e){e=e||0;for(var i=t.length-e,n=new Array(i);i--;)n[i]=t[i+e];return n}function ln(t,e){for(var i in e)t[i]=e[i];return t}function v2(t){for(var e={},i=0;i<t.length;i++)t[i]&&ln(e,t[i]);return e}function Hr(t,e,i){}var r_=function(t,e,i){return!1},b2=function(t){return t};function cf(t,e){if(t===e)return!0;var i=Ss(t),n=Ss(e);if(i&&n)try{var r=Array.isArray(t),s=Array.isArray(e);if(r&&s)return t.length===e.length&&t.every(function(c,d){return cf(c,e[d])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(!r&&!s){var a=Object.keys(t),o=Object.keys(e);return a.length===o.length&&a.every(function(c){return cf(t[c],e[c])})}else return!1}catch{return!1}else return!i&&!n?String(t)===String(e):!1}function _2(t,e){for(var i=0;i<t.length;i++)if(cf(t[i],e))return i;return-1}function G0(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function J6(t,e){return t===e?t===0&&1/t!==1/e:t===t||e===e}var gD="data-server-rendered",qE=["component","directive","filter"],E2=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],Co={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:r_,isReservedAttr:r_,isUnknownElement:r_,getTagNamespace:Hr,parsePlatformTagName:b2,mustUseProp:r_,async:!0,_lifecycleHooks:E2},eV=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function T2(t){var e=(t+"").charCodeAt(0);return e===36||e===95}function gd(t,e,i,n){Object.defineProperty(t,e,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var tV=new RegExp("[^".concat(eV.source,".$_\\d]"));function iV(t){if(!tV.test(t)){var e=t.split(".");return function(i){for(var n=0;n<e.length;n++){if(!i)return;i=i[e[n]]}return i}}}var nV="__proto__"in{},ro=typeof window<"u",Ro=ro&&window.navigator.userAgent.toLowerCase(),$m=Ro&&/msie|trident/.test(Ro),Hm=Ro&&Ro.indexOf("msie 9.0")>0,w2=Ro&&Ro.indexOf("edge/")>0;Ro&&Ro.indexOf("android")>0;var rV=Ro&&/iphone|ipad|ipod|ios/.test(Ro),vD=Ro&&Ro.match(/firefox\/(\d+)/),yC={}.watch,C2=!1;if(ro)try{var bD={};Object.defineProperty(bD,"passive",{get:function(){C2=!0}}),window.addEventListener("test-passive",null,bD)}catch{}var s_,jv=function(){return s_===void 0&&(!ro&&typeof global<"u"?s_=global.process&&$6.VUE_ENV==="server":s_=!1),s_},U0=ro&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function tm(t){return typeof t=="function"&&/native code/.test(t.toString())}var zv=typeof Symbol<"u"&&tm(Symbol)&&typeof Reflect<"u"&&tm(Reflect.ownKeys),rv;typeof Set<"u"&&tm(Set)?rv=Set:rv=function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(e){return this.set[e]===!0},t.prototype.add=function(e){this.set[e]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var im=null;function Dd(t){t===void 0&&(t=null),t||im&&im._scope.off(),im=t,t&&t._scope.on()}var io=function(){function t(e,i,n,r,s,a,o,c){this.tag=e,this.data=i,this.children=n,this.text=r,this.elm=s,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=i&&i.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=c,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(t.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),t}(),Zh=function(t){t===void 0&&(t="");var e=new io;return e.text=t,e.isComment=!0,e};function $p(t){return new io(void 0,void 0,void 0,String(t))}function gC(t){var e=new io(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var sV=0,n0=[],aV=function(){for(var t=0;t<n0.length;t++){var e=n0[t];e.subs=e.subs.filter(function(i){return i}),e._pending=!1}n0.length=0},xd=function(){function t(){this._pending=!1,this.id=sV++,this.subs=[]}return t.prototype.addSub=function(e){this.subs.push(e)},t.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,n0.push(this))},t.prototype.depend=function(e){t.target&&t.target.addDep(this)},t.prototype.notify=function(e){for(var i=this.subs.filter(function(a){return a}),n=0,r=i.length;n<r;n++){var s=i[n];s.update()}},t}();xd.target=null;var r0=[];function Vm(t){r0.push(t),xd.target=t}function qm(){r0.pop(),xd.target=r0[r0.length-1]}var S2=Array.prototype,L0=Object.create(S2),oV=["push","pop","shift","unshift","splice","sort","reverse"];oV.forEach(function(t){var e=S2[t];gd(L0,t,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.apply(this,n),a=this.__ob__,o;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2);break}return o&&a.observeArray(o),a.dep.notify(),s})});var _D=Object.getOwnPropertyNames(L0),k2={},pk=!0;function Md(t){pk=t}var lV={notify:Hr,depend:Hr,addSub:Hr,removeSub:Hr},ED=function(){function t(e,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=!1),this.value=e,this.shallow=i,this.mock=n,this.dep=n?lV:new xd,this.vmCount=0,gd(e,"__ob__",this),ai(e)){if(!n)if(nV)e.__proto__=L0;else for(var r=0,s=_D.length;r<s;r++){var a=_D[r];gd(e,a,L0[a])}i||this.observeArray(e)}else for(var o=Object.keys(e),r=0;r<o.length;r++){var a=o[r];uf(e,a,k2,void 0,i,n)}}return t.prototype.observeArray=function(e){for(var i=0,n=e.length;i<n;i++)tu(e[i],!1,this.mock)},t}();function tu(t,e,i){if(t&&Ks(t,"__ob__")&&t.__ob__ instanceof ED)return t.__ob__;if(pk&&(i||!jv())&&(ai(t)||to(t))&&Object.isExtensible(t)&&!t.__v_skip&&!ic(t)&&!(t instanceof io))return new ED(t,e,i)}function uf(t,e,i,n,r,s,a){a===void 0&&(a=!1);var o=new xd,c=Object.getOwnPropertyDescriptor(t,e);if(!(c&&c.configurable===!1)){var d=c&&c.get,p=c&&c.set;(!d||p)&&(i===k2||arguments.length===2)&&(i=t[e]);var m=r?i&&i.__ob__:tu(i,!1,s);return Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var _=d?d.call(t):i;return xd.target&&(o.depend(),m&&(m.dep.depend(),ai(_)&&R2(_))),ic(_)&&!r?_.value:_},set:function(_){var E=d?d.call(t):i;if(J6(E,_)){if(p)p.call(t,_);else{if(d)return;if(!r&&ic(E)&&!ic(_)){E.value=_;return}else i=_}m=r?_&&_.__ob__:tu(_,!1,s),o.notify()}}}),o}}function mk(t,e,i){if(!yk(t)){var n=t.__ob__;return ai(t)&&y2(e)?(t.length=Math.max(t.length,e),t.splice(e,1,i),n&&!n.shallow&&n.mock&&tu(i,!1,!0),i):e in t&&!(e in Object.prototype)?(t[e]=i,i):t._isVue||n&&n.vmCount?i:n?(uf(n.value,e,i,void 0,n.shallow,n.mock),n.dep.notify(),i):(t[e]=i,i)}}function A2(t,e){if(ai(t)&&y2(e)){t.splice(e,1);return}var i=t.__ob__;t._isVue||i&&i.vmCount||yk(t)||Ks(t,e)&&(delete t[e],i&&i.dep.notify())}function R2(t){for(var e=void 0,i=0,n=t.length;i<n;i++)e=t[i],e&&e.__ob__&&e.__ob__.dep.depend(),ai(e)&&R2(e)}function I2(t){return cV(t,!0),gd(t,"__v_isShallow",!0),t}function cV(t,e){yk(t)||tu(t,e,jv())}function yk(t){return!!(t&&t.__v_isReadonly)}function ic(t){return!!(t&&t.__v_isRef===!0)}function vC(t,e,i){Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:function(){var n=e[i];if(ic(n))return n.value;var r=n&&n.__ob__;return r&&r.dep.depend(),n},set:function(n){var r=e[i];ic(r)&&!ic(n)?r.value=n:e[i]=n}})}var pa,uV=function(){function t(e){e===void 0&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=pa,!e&&pa&&(this.index=(pa.scopes||(pa.scopes=[])).push(this)-1)}return t.prototype.run=function(e){if(this.active){var i=pa;try{return pa=this,e()}finally{pa=i}}},t.prototype.on=function(){pa=this},t.prototype.off=function(){pa=this.parent},t.prototype.stop=function(e){if(this.active){var i=void 0,n=void 0;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].teardown();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!e){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}},t}();function dV(t,e){e===void 0&&(e=pa),e&&e.active&&e.effects.push(t)}function hV(){return pa}function fV(t){var e=t._provided,i=t.$parent&&t.$parent._provided;return i===e?t._provided=Object.create(i):e}var TD=Of(function(t){var e=t.charAt(0)==="&";t=e?t.slice(1):t;var i=t.charAt(0)==="~";t=i?t.slice(1):t;var n=t.charAt(0)==="!";return t=n?t.slice(1):t,{name:t,once:i,capture:n,passive:e}});function bC(t,e){function i(){var n=i.fns;if(ai(n))for(var r=n.slice(),s=0;s<r.length;s++)Pd(r[s],null,arguments,e,"v-on handler");else return Pd(n,null,arguments,e,"v-on handler")}return i.fns=t,i}function D2(t,e,i,n,r,s){var a,o,c,d;for(a in t)o=t[a],c=e[a],d=TD(a),Gt(o)||(Gt(c)?(Gt(o.fns)&&(o=t[a]=bC(o,s)),On(d.once)&&(o=t[a]=r(d.name,o,d.capture)),i(d.name,o,d.capture,d.passive,d.params)):o!==c&&(c.fns=o,t[a]=c));for(a in e)Gt(t[a])&&(d=TD(a),n(d.name,e[a],d.capture))}function ud(t,e,i){t instanceof io&&(t=t.data.hook||(t.data.hook={}));var n,r=t[e];function s(){i.apply(this,arguments),Hd(n.fns,s)}Gt(r)?n=bC([s]):ke(r.fns)&&On(r.merged)?(n=r,n.fns.push(s)):n=bC([r,s]),n.merged=!0,t[e]=n}function pV(t,e,i){var n=e.options.props;if(!Gt(n)){var r={},s=t.attrs,a=t.props;if(ke(s)||ke(a))for(var o in n){var c=Wv(o);wD(r,a,o,c,!0)||wD(r,s,o,c,!1)}return r}}function wD(t,e,i,n,r){if(ke(e)){if(Ks(e,i))return t[i]=e[i],r||delete e[i],!0;if(Ks(e,n))return t[i]=e[n],r||delete e[n],!0}return!1}function mV(t){for(var e=0;e<t.length;e++)if(ai(t[e]))return Array.prototype.concat.apply([],t);return t}function gk(t){return Yv(t)?[$p(t)]:ai(t)?x2(t):void 0}function Uy(t){return ke(t)&&ke(t.text)&&H6(t.isComment)}function x2(t,e){var i=[],n,r,s,a;for(n=0;n<t.length;n++)r=t[n],!(Gt(r)||typeof r=="boolean")&&(s=i.length-1,a=i[s],ai(r)?r.length>0&&(r=x2(r,"".concat(e||"","_").concat(n)),Uy(r[0])&&Uy(a)&&(i[s]=$p(a.text+r[0].text),r.shift()),i.push.apply(i,r)):Yv(r)?Uy(a)?i[s]=$p(a.text+r):r!==""&&i.push($p(r)):Uy(r)&&Uy(a)?i[s]=$p(a.text+r.text):(On(t._isVList)&&ke(r.tag)&&Gt(r.key)&&ke(e)&&(r.key="__vlist".concat(e,"_").concat(n,"__")),i.push(r)));return i}function yV(t,e){var i=null,n,r,s,a;if(ai(t)||typeof t=="string")for(i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=e(t[n],n);else if(typeof t=="number")for(i=new Array(t),n=0;n<t;n++)i[n]=e(n+1,n);else if(Ss(t))if(zv&&t[Symbol.iterator]){i=[];for(var o=t[Symbol.iterator](),c=o.next();!c.done;)i.push(e(c.value,i.length)),c=o.next()}else for(s=Object.keys(t),i=new Array(s.length),n=0,r=s.length;n<r;n++)a=s[n],i[n]=e(t[a],a,n);return ke(i)||(i=[]),i._isVList=!0,i}function gV(t,e,i,n){var r=this.$scopedSlots[t],s;r?(i=i||{},n&&(i=ln(ln({},n),i)),s=r(i)||(Cn(e)?e():e)):s=this.$slots[t]||(Cn(e)?e():e);var a=i&&i.slot;return a?this.$createElement("template",{slot:a},s):s}function vV(t){return q0(this.$options,"filters",t)||b2}function CD(t,e){return ai(t)?t.indexOf(e)===-1:t!==e}function bV(t,e,i,n,r){var s=Co.keyCodes[e]||i;return r&&n&&!Co.keyCodes[e]?CD(r,n):s?CD(s,t):n?Wv(n)!==e:t===void 0}function _V(t,e,i,n,r){if(i&&Ss(i)){ai(i)&&(i=v2(i));var s=void 0,a=function(c){if(c==="class"||c==="style"||W6(c))s=t;else{var d=t.attrs&&t.attrs.type;s=n||Co.mustUseProp(e,d,c)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var p=lf(c),m=Wv(c);if(!(p in s)&&!(m in s)&&(s[c]=i[c],r)){var y=t.on||(t.on={});y["update:".concat(c)]=function(_){i[c]=_}}};for(var o in i)a(o)}return t}function EV(t,e){var i=this._staticTrees||(this._staticTrees=[]),n=i[t];return n&&!e||(n=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,this._c,this),M2(n,"__static__".concat(t),!1)),n}function TV(t,e,i){return M2(t,"__once__".concat(e).concat(i?"_".concat(i):""),!0),t}function M2(t,e,i){if(ai(t))for(var n=0;n<t.length;n++)t[n]&&typeof t[n]!="string"&&SD(t[n],"".concat(e,"_").concat(n),i);else SD(t,e,i)}function SD(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function wV(t,e){if(e&&to(e)){var i=t.on=t.on?ln({},t.on):{};for(var n in e){var r=i[n],s=e[n];i[n]=r?[].concat(r,s):s}}return t}function P2(t,e,i,n){e=e||{$stable:!i};for(var r=0;r<t.length;r++){var s=t[r];ai(s)?P2(s,e,i):s&&(s.proxy&&(s.fn.proxy=!0),e[s.key]=s.fn)}return n&&(e.$key=n),e}function CV(t,e){for(var i=0;i<e.length;i+=2){var n=e[i];typeof n=="string"&&n&&(t[e[i]]=e[i+1])}return t}function SV(t,e){return typeof t=="string"?e+t:t}function O2(t){t._o=TV,t._n=nv,t._s=q6,t._l=yV,t._t=gV,t._q=cf,t._i=_2,t._m=EV,t._f=vV,t._k=bV,t._b=_V,t._v=$p,t._e=Zh,t._u=P2,t._g=wV,t._d=CV,t._p=SV}function vk(t,e){if(!t||!t.length)return{};for(var i={},n=0,r=t.length;n<r;n++){var s=t[n],a=s.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,(s.context===e||s.fnContext===e)&&a&&a.slot!=null){var o=a.slot,c=i[o]||(i[o]=[]);s.tag==="template"?c.push.apply(c,s.children||[]):c.push(s)}else(i.default||(i.default=[])).push(s)}for(var d in i)i[d].every(kV)&&delete i[d];return i}function kV(t){return t.isComment&&!t.asyncFactory||t.text===" "}function sv(t){return t.isComment&&t.asyncFactory}function Og(t,e,i,n){var r,s=Object.keys(i).length>0,a=e?!!e.$stable:!s,o=e&&e.$key;if(!e)r={};else{if(e._normalized)return e._normalized;if(a&&n&&n!==Qa&&o===n.$key&&!s&&!n.$hasNormal)return n;r={};for(var c in e)e[c]&&c[0]!=="$"&&(r[c]=AV(t,i,c,e[c]))}for(var d in i)d in r||(r[d]=RV(i,d));return e&&Object.isExtensible(e)&&(e._normalized=r),gd(r,"$stable",a),gd(r,"$key",o),gd(r,"$hasNormal",s),r}function AV(t,e,i,n){var r=function(){var s=im;Dd(t);var a=arguments.length?n.apply(null,arguments):n({});a=a&&typeof a=="object"&&!ai(a)?[a]:gk(a);var o=a&&a[0];return Dd(s),a&&(!o||a.length===1&&o.isComment&&!sv(o))?void 0:a};return n.proxy&&Object.defineProperty(e,i,{get:r,enumerable:!0,configurable:!0}),r}function RV(t,e){return function(){return t[e]}}function IV(t){var e=t.$options,i=e.setup;if(i){var n=t._setupContext=DV(t);Dd(t),Vm();var r=Pd(i,null,[t._props||I2({}),n],t,"setup");if(qm(),Dd(),Cn(r))e.render=r;else if(Ss(r))if(t._setupState=r,r.__sfc){var a=t._setupProxy={};for(var s in r)s!=="__sfc"&&vC(a,r,s)}else for(var s in r)T2(s)||vC(t,r,s)}}function DV(t){return{get attrs(){if(!t._attrsProxy){var e=t._attrsProxy={};gd(e,"_v_attr_proxy",!0),B0(e,t.$attrs,Qa,t,"$attrs")}return t._attrsProxy},get listeners(){if(!t._listenersProxy){var e=t._listenersProxy={};B0(e,t.$listeners,Qa,t,"$listeners")}return t._listenersProxy},get slots(){return MV(t)},emit:g2(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach(function(i){return vC(t,e,i)})}}}function B0(t,e,i,n,r){var s=!1;for(var a in e)a in t?e[a]!==i[a]&&(s=!0):(s=!0,xV(t,a,n,r));for(var a in t)a in e||(s=!0,delete t[a]);return s}function xV(t,e,i,n){Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return i[n][e]}})}function MV(t){return t._slotsProxy||N2(t._slotsProxy={},t.$scopedSlots),t._slotsProxy}function N2(t,e){for(var i in e)t[i]=e[i];for(var i in t)i in e||delete t[i]}function PV(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,n=i&&i.context;t.$slots=vk(e._renderChildren,n),t.$scopedSlots=i?Og(t.$parent,i.data.scopedSlots,t.$slots):Qa,t._c=function(s,a,o,c){return F0(t,s,a,o,c,!1)},t.$createElement=function(s,a,o,c){return F0(t,s,a,o,c,!0)};var r=i&&i.data;uf(t,"$attrs",r&&r.attrs||Qa,null,!0),uf(t,"$listeners",e._parentListeners||Qa,null,!0)}var s0=null;function OV(t){O2(t.prototype),t.prototype.$nextTick=function(e){return bk(e,this)},t.prototype._render=function(){var e=this,i=e.$options,n=i.render,r=i._parentVnode;r&&e._isMounted&&(e.$scopedSlots=Og(e.$parent,r.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&N2(e._slotsProxy,e.$scopedSlots)),e.$vnode=r;var s=im,a=s0,o;try{Dd(e),s0=e,o=n.call(e._renderProxy,e.$createElement)}catch(c){df(c,e,"render"),o=e._vnode}finally{s0=a,Dd(s)}return ai(o)&&o.length===1&&(o=o[0]),o instanceof io||(o=Zh()),o.parent=r,o}}function b1(t,e){return(t.__esModule||zv&&t[Symbol.toStringTag]==="Module")&&(t=t.default),Ss(t)?e.extend(t):t}function NV(t,e,i,n,r){var s=Zh();return s.asyncFactory=t,s.asyncMeta={data:e,context:i,children:n,tag:r},s}function GV(t,e){if(On(t.error)&&ke(t.errorComp))return t.errorComp;if(ke(t.resolved))return t.resolved;var i=s0;if(i&&ke(t.owners)&&t.owners.indexOf(i)===-1&&t.owners.push(i),On(t.loading)&&ke(t.loadingComp))return t.loadingComp;if(i&&!ke(t.owners)){var n=t.owners=[i],r=!0,s=null,a=null;i.$on("hook:destroyed",function(){return Hd(n,i)});var o=function(m){for(var y=0,_=n.length;y<_;y++)n[y].$forceUpdate();m&&(n.length=0,s!==null&&(clearTimeout(s),s=null),a!==null&&(clearTimeout(a),a=null))},c=G0(function(m){t.resolved=b1(m,e),r?n.length=0:o(!0)}),d=G0(function(m){ke(t.errorComp)&&(t.error=!0,o(!0))}),p=t(c,d);return Ss(p)&&(pC(p)?Gt(t.resolved)&&p.then(c,d):pC(p.component)&&(p.component.then(c,d),ke(p.error)&&(t.errorComp=b1(p.error,e)),ke(p.loading)&&(t.loadingComp=b1(p.loading,e),p.delay===0?t.loading=!0:s=setTimeout(function(){s=null,Gt(t.resolved)&&Gt(t.error)&&(t.loading=!0,o(!1))},p.delay||200)),ke(p.timeout)&&(a=setTimeout(function(){a=null,Gt(t.resolved)&&d(null)},p.timeout)))),r=!1,t.loading?t.loadingComp:t.resolved}}function G2(t){if(ai(t))for(var e=0;e<t.length;e++){var i=t[e];if(ke(i)&&(ke(i.componentOptions)||sv(i)))return i}}var UV=1,U2=2;function F0(t,e,i,n,r,s){return(ai(i)||Yv(i))&&(r=n,n=i,i=void 0),On(s)&&(r=U2),LV(t,e,i,n,r)}function LV(t,e,i,n,r){if(ke(i)&&ke(i.__ob__)||(ke(i)&&ke(i.is)&&(e=i.is),!e))return Zh();ai(n)&&Cn(n[0])&&(i=i||{},i.scopedSlots={default:n[0]},n.length=0),r===U2?n=gk(n):r===UV&&(n=mV(n));var s,a;if(typeof e=="string"){var o=void 0;a=t.$vnode&&t.$vnode.ns||Co.getTagNamespace(e),Co.isReservedTag(e)?s=new io(Co.parsePlatformTagName(e),i,n,void 0,void 0,t):(!i||!i.pre)&&ke(o=q0(t.$options,"components",e))?s=PD(o,i,t,n,e):s=new io(e,i,n,void 0,void 0,t)}else s=PD(e,i,t,n);return ai(s)?s:ke(s)?(ke(a)&&L2(s,a),ke(i)&&BV(i),s):Zh()}function L2(t,e,i){if(t.ns=e,t.tag==="foreignObject"&&(e=void 0,i=!0),ke(t.children))for(var n=0,r=t.children.length;n<r;n++){var s=t.children[n];ke(s.tag)&&(Gt(s.ns)||On(i)&&s.tag!=="svg")&&L2(s,e,i)}}function BV(t){Ss(t.style)&&$0(t.style),Ss(t.class)&&$0(t.class)}function df(t,e,i){Vm();try{if(e)for(var n=e;n=n.$parent;){var r=n.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{var a=r[s].call(n,t,e,i)===!1;if(a)return}catch(o){kD(o,n,"errorCaptured hook")}}kD(t,e,i)}finally{qm()}}function Pd(t,e,i,n,r){var s;try{s=i?t.apply(e,i):t.call(e),s&&!s._isVue&&pC(s)&&!s._handled&&(s.catch(function(a){return df(a,n,r+" (Promise/async)")}),s._handled=!0)}catch(a){df(a,n,r)}return s}function kD(t,e,i){if(Co.errorHandler)try{return Co.errorHandler.call(null,t,e,i)}catch(n){n!==t&&AD(n)}AD(t)}function AD(t,e,i){if(ro&&typeof console<"u")console.error(t);else throw t}var _C=!1,EC=[],TC=!1;function a_(){TC=!1;var t=EC.slice(0);EC.length=0;for(var e=0;e<t.length;e++)t[e]()}var hg;if(typeof Promise<"u"&&tm(Promise)){var FV=Promise.resolve();hg=function(){FV.then(a_),rV&&setTimeout(Hr)},_C=!0}else if(!$m&&typeof MutationObserver<"u"&&(tm(MutationObserver)||MutationObserver.toString()==="[object MutationObserverConstructor]")){var o_=1,$V=new MutationObserver(a_),RD=document.createTextNode(String(o_));$V.observe(RD,{characterData:!0}),hg=function(){o_=(o_+1)%2,RD.data=String(o_)},_C=!0}else typeof setImmediate<"u"&&tm(setImmediate)?hg=function(){setImmediate(a_)}:hg=function(){setTimeout(a_,0)};function bk(t,e){var i;if(EC.push(function(){if(t)try{t.call(e)}catch(n){df(n,e,"nextTick")}else i&&i(e)}),TC||(TC=!0,hg()),!t&&typeof Promise<"u")return new Promise(function(n){i=n})}var HV="2.7.16",ID=new rv;function $0(t){return a0(t,ID),ID.clear(),t}function a0(t,e){var i,n,r=ai(t);if(!(!r&&!Ss(t)||t.__v_skip||Object.isFrozen(t)||t instanceof io)){if(t.__ob__){var s=t.__ob__.dep.id;if(e.has(s))return;e.add(s)}if(r)for(i=t.length;i--;)a0(t[i],e);else if(ic(t))a0(t.value,e);else for(n=Object.keys(t),i=n.length;i--;)a0(t[n[i]],e)}}var VV=0,_k=function(){function t(e,i,n,r,s){dV(this,pa&&!pa._vm?pa:e?e._scope:void 0),(this.vm=e)&&s&&(e._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++VV,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new rv,this.newDepIds=new rv,this.expression="",Cn(i)?this.getter=i:(this.getter=iV(i),this.getter||(this.getter=Hr)),this.value=this.lazy?void 0:this.get()}return t.prototype.get=function(){Vm(this);var e,i=this.vm;try{e=this.getter.call(i,i)}catch(n){if(this.user)df(n,i,'getter for watcher "'.concat(this.expression,'"'));else throw n}finally{this.deep&&$0(e),qm(),this.cleanupDeps()}return e},t.prototype.addDep=function(e){var i=e.id;this.newDepIds.has(i)||(this.newDepIds.add(i),this.newDeps.push(e),this.depIds.has(i)||e.addSub(this))},t.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var i=this.deps[e];this.newDepIds.has(i.id)||i.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},t.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():sq(this)},t.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||Ss(e)||this.deep){var i=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');Pd(this.cb,this.vm,[e,i],this.vm,n)}else this.cb.call(this.vm,e,i)}}},t.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},t.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},t.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&Hd(this.vm._scope.effects,this),this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},t}();function qV(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&B2(t,e)}var av;function YV(t,e){av.$on(t,e)}function WV(t,e){av.$off(t,e)}function jV(t,e){var i=av;return function n(){var r=e.apply(null,arguments);r!==null&&i.$off(t,n)}}function B2(t,e,i){av=t,D2(e,i||{},YV,WV,jV,t),av=void 0}function zV(t){var e=/^hook:/;t.prototype.$on=function(i,n){var r=this;if(ai(i))for(var s=0,a=i.length;s<a;s++)r.$on(i[s],n);else(r._events[i]||(r._events[i]=[])).push(n),e.test(i)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(i,n){var r=this;function s(){r.$off(i,s),n.apply(r,arguments)}return s.fn=n,r.$on(i,s),r},t.prototype.$off=function(i,n){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(ai(i)){for(var s=0,a=i.length;s<a;s++)r.$off(i[s],n);return r}var o=r._events[i];if(!o)return r;if(!n)return r._events[i]=null,r;for(var c,d=o.length;d--;)if(c=o[d],c===n||c.fn===n){o.splice(d,1);break}return r},t.prototype.$emit=function(i){var n=this,r=n._events[i];if(r){r=r.length>1?mC(r):r;for(var s=mC(arguments,1),a='event handler for "'.concat(i,'"'),o=0,c=r.length;o<c;o++)Pd(r[o],n,s,n,a)}return n}}var Qh=null;function F2(t){var e=Qh;return Qh=t,function(){Qh=e}}function XV(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._provided=i?i._provided:Object.create(null),t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function KV(t){t.prototype._update=function(e,i){var n=this,r=n.$el,s=n._vnode,a=F2(n);n._vnode=e,s?n.$el=n.__patch__(s,e):n.$el=n.__patch__(n.$el,e,i,!1),a(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n);for(var o=n;o&&o.$vnode&&o.$parent&&o.$vnode===o.$parent._vnode;)o.$parent.$el=o.$el,o=o.$parent},t.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},t.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){ll(e,"beforeDestroy"),e._isBeingDestroyed=!0;var i=e.$parent;i&&!i._isBeingDestroyed&&!e.$options.abstract&&Hd(i.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),ll(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function ZV(t,e,i){t.$el=e,t.$options.render||(t.$options.render=Zh),ll(t,"beforeMount");var n;n=function(){t._update(t._render(),i)};var r={before:function(){t._isMounted&&!t._isDestroyed&&ll(t,"beforeUpdate")}};new _k(t,n,Hr,r,!0),i=!1;var s=t._preWatchers;if(s)for(var a=0;a<s.length;a++)s[a].run();return t.$vnode==null&&(t._isMounted=!0,ll(t,"mounted")),t}function QV(t,e,i,n,r){var s=n.data.scopedSlots,a=t.$scopedSlots,o=!!(s&&!s.$stable||a!==Qa&&!a.$stable||s&&t.$scopedSlots.$key!==s.$key||!s&&t.$scopedSlots.$key),c=!!(r||t.$options._renderChildren||o),d=t.$vnode;t.$options._parentVnode=n,t.$vnode=n,t._vnode&&(t._vnode.parent=n),t.$options._renderChildren=r;var p=n.data.attrs||Qa;t._attrsProxy&&B0(t._attrsProxy,p,d.data&&d.data.attrs||Qa,t,"$attrs")&&(c=!0),t.$attrs=p,i=i||Qa;var m=t.$options._parentListeners;if(t._listenersProxy&&B0(t._listenersProxy,i,m||Qa,t,"$listeners"),t.$listeners=t.$options._parentListeners=i,B2(t,i,m),e&&t.$options.props){Md(!1);for(var y=t._props,_=t.$options._propKeys||[],E=0;E<_.length;E++){var C=_[E],S=t.$options.props;y[C]=kk(C,S,e,t)}Md(!0),t.$options.propsData=e}c&&(t.$slots=vk(r,n.context),t.$forceUpdate())}function $2(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Ek(t,e){if(e){if(t._directInactive=!1,$2(t))return}else if(t._directInactive)return;if(t._inactive||t._inactive===null){t._inactive=!1;for(var i=0;i<t.$children.length;i++)Ek(t.$children[i]);ll(t,"activated")}}function H2(t,e){if(!(e&&(t._directInactive=!0,$2(t)))&&!t._inactive){t._inactive=!0;for(var i=0;i<t.$children.length;i++)H2(t.$children[i]);ll(t,"deactivated")}}function ll(t,e,i,n){n===void 0&&(n=!0),Vm();var r=im,s=hV();n&&Dd(t);var a=t.$options[e],o="".concat(e," hook");if(a)for(var c=0,d=a.length;c<d;c++)Pd(a[c],t,null,t,o);t._hasHookEvent&&t.$emit("hook:"+e),n&&(Dd(r),s&&s.on()),qm()}var Vc=[],Tk=[],H0={},wC=!1,wk=!1,Hp=0;function JV(){Hp=Vc.length=Tk.length=0,H0={},wC=wk=!1}var V2=0,CC=Date.now;if(ro&&!$m){var _1=window.performance;_1&&typeof _1.now=="function"&&CC()>document.createEvent("Event").timeStamp&&(CC=function(){return _1.now()})}var eq=function(t,e){if(t.post){if(!e.post)return 1}else if(e.post)return-1;return t.id-e.id};function tq(){V2=CC(),wk=!0;var t,e;for(Vc.sort(eq),Hp=0;Hp<Vc.length;Hp++)t=Vc[Hp],t.before&&t.before(),e=t.id,H0[e]=null,t.run();var i=Tk.slice(),n=Vc.slice();JV(),rq(i),iq(n),aV(),U0&&Co.devtools&&U0.emit("flush")}function iq(t){for(var e=t.length;e--;){var i=t[e],n=i.vm;n&&n._watcher===i&&n._isMounted&&!n._isDestroyed&&ll(n,"updated")}}function nq(t){t._inactive=!1,Tk.push(t)}function rq(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ek(t[e],!0)}function sq(t){var e=t.id;if(H0[e]==null&&!(t===xd.target&&t.noRecurse)){if(H0[e]=!0,!wk)Vc.push(t);else{for(var i=Vc.length-1;i>Hp&&Vc[i].id>t.id;)i--;Vc.splice(i+1,0,t)}wC||(wC=!0,bk(tq))}}function aq(t){var e=t.$options.provide;if(e){var i=Cn(e)?e.call(t):e;if(!Ss(i))return;for(var n=fV(t),r=zv?Reflect.ownKeys(i):Object.keys(i),s=0;s<r.length;s++){var a=r[s];Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))}}}function oq(t){var e=q2(t.$options.inject,t);e&&(Md(!1),Object.keys(e).forEach(function(i){uf(t,i,e[i])}),Md(!0))}function q2(t,e){if(t){for(var i=Object.create(null),n=zv?Reflect.ownKeys(t):Object.keys(t),r=0;r<n.length;r++){var s=n[r];if(s!=="__ob__"){var a=t[s].from;if(a in e._provided)i[s]=e._provided[a];else if("default"in t[s]){var o=t[s].default;i[s]=Cn(o)?o.call(e):o}}}return i}}function Ck(t,e,i,n,r){var s=this,a=r.options,o;Ks(n,"_uid")?(o=Object.create(n),o._original=n):(o=n,n=n._original);var c=On(a._compiled),d=!c;this.data=t,this.props=e,this.children=i,this.parent=n,this.listeners=t.on||Qa,this.injections=q2(a.inject,n),this.slots=function(){return s.$slots||Og(n,t.scopedSlots,s.$slots=vk(i,n)),s.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Og(n,t.scopedSlots,this.slots())}}),c&&(this.$options=a,this.$slots=this.slots(),this.$scopedSlots=Og(n,t.scopedSlots,this.$slots)),a._scopeId?this._c=function(p,m,y,_){var E=F0(o,p,m,y,_,d);return E&&!ai(E)&&(E.fnScopeId=a._scopeId,E.fnContext=n),E}:this._c=function(p,m,y,_){return F0(o,p,m,y,_,d)}}O2(Ck.prototype);function lq(t,e,i,n,r){var s=t.options,a={},o=s.props;if(ke(o))for(var c in o)a[c]=kk(c,o,e||Qa);else ke(i.attrs)&&xD(a,i.attrs),ke(i.props)&&xD(a,i.props);var d=new Ck(i,a,r,n,t),p=s.render.call(null,d._c,d);if(p instanceof io)return DD(p,i,d.parent,s);if(ai(p)){for(var m=gk(p)||[],y=new Array(m.length),_=0;_<m.length;_++)y[_]=DD(m[_],i,d.parent,s);return y}}function DD(t,e,i,n,r){var s=gC(t);return s.fnContext=i,s.fnOptions=n,e.slot&&((s.data||(s.data={})).slot=e.slot),s}function xD(t,e){for(var i in e)t[lf(i)]=e[i]}function V0(t){return t.name||t.__name||t._componentTag}var Sk={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var i=t;Sk.prepatch(i,i)}else{var n=t.componentInstance=cq(t,Qh);n.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var i=e.componentOptions,n=e.componentInstance=t.componentInstance;QV(n,i.propsData,i.listeners,e,i.children)},insert:function(t){var e=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,ll(i,"mounted")),t.data.keepAlive&&(e._isMounted?nq(i):Ek(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?H2(e,!0):e.$destroy())}},MD=Object.keys(Sk);function PD(t,e,i,n,r){if(!Gt(t)){var s=i.$options._base;if(Ss(t)&&(t=s.extend(t)),typeof t=="function"){var a;if(Gt(t.cid)&&(a=t,t=GV(a,s),t===void 0))return NV(a,e,i,n,r);e=e||{},Rk(t),ke(e.model)&&hq(t.options,e);var o=pV(e,t);if(On(t.options.functional))return lq(t,o,e,i,n);var c=e.on;if(e.on=e.nativeOn,On(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}uq(e);var p=V0(t.options)||r,m=new io("vue-component-".concat(t.cid).concat(p?"-".concat(p):""),e,void 0,void 0,void 0,i,{Ctor:t,propsData:o,listeners:c,tag:r,children:n},a);return m}}}function cq(t,e){var i={_isComponent:!0,_parentVnode:t,parent:e},n=t.data.inlineTemplate;return ke(n)&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new t.componentOptions.Ctor(i)}function uq(t){for(var e=t.hook||(t.hook={}),i=0;i<MD.length;i++){var n=MD[i],r=e[n],s=Sk[n];r!==s&&!(r&&r._merged)&&(e[n]=r?dq(s,r):s)}}function dq(t,e){var i=function(n,r){t(n,r),e(n,r)};return i._merged=!0,i}function hq(t,e){var i=t.model&&t.model.prop||"value",n=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[i]=e.model.value;var r=e.on||(e.on={}),s=r[n],a=e.model.callback;ke(s)?(ai(s)?s.indexOf(a)===-1:s!==a)&&(r[n]=[a].concat(s)):r[n]=a}var fq=Hr,Kl=Co.optionMergeStrategies;function ov(t,e,i){if(i===void 0&&(i=!0),!e)return t;for(var n,r,s,a=zv?Reflect.ownKeys(e):Object.keys(e),o=0;o<a.length;o++)n=a[o],n!=="__ob__"&&(r=t[n],s=e[n],!i||!Ks(t,n)?mk(t,n,s):r!==s&&to(r)&&to(s)&&ov(r,s));return t}function OD(t,e,i){return i?function(){var r=Cn(e)?e.call(i,i):e,s=Cn(t)?t.call(i,i):t;return r?ov(r,s):s}:e?t?function(){return ov(Cn(e)?e.call(this,this):e,Cn(t)?t.call(this,this):t)}:e:t}Kl.data=function(t,e,i){return i?OD(t,e,i):e&&typeof e!="function"?t:OD(t,e)};function pq(t,e){var i=e?t?t.concat(e):ai(e)?e:[e]:t;return i&&mq(i)}function mq(t){for(var e=[],i=0;i<t.length;i++)e.indexOf(t[i])===-1&&e.push(t[i]);return e}E2.forEach(function(t){Kl[t]=pq});function yq(t,e,i,n){var r=Object.create(t||null);return e?ln(r,e):r}qE.forEach(function(t){Kl[t+"s"]=yq});Kl.watch=function(t,e,i,n){if(t===yC&&(t=void 0),e===yC&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};ln(r,t);for(var s in e){var a=r[s],o=e[s];a&&!ai(a)&&(a=[a]),r[s]=a?a.concat(o):ai(o)?o:[o]}return r};Kl.props=Kl.methods=Kl.inject=Kl.computed=function(t,e,i,n){if(!t)return e;var r=Object.create(null);return ln(r,t),e&&ln(r,e),r};Kl.provide=function(t,e){return t?function(){var i=Object.create(null);return ov(i,Cn(t)?t.call(this):t),e&&ov(i,Cn(e)?e.call(this):e,!1),i}:e};var gq=function(t,e){return e===void 0?t:e};function vq(t,e){var i=t.props;if(i){var n={},r,s,a;if(ai(i))for(r=i.length;r--;)s=i[r],typeof s=="string"&&(a=lf(s),n[a]={type:null});else if(to(i))for(var o in i)s=i[o],a=lf(o),n[a]=to(s)?s:{type:s};t.props=n}}function bq(t,e){var i=t.inject;if(i){var n=t.inject={};if(ai(i))for(var r=0;r<i.length;r++)n[i[r]]={from:i[r]};else if(to(i))for(var s in i){var a=i[s];n[s]=to(a)?ln({from:s},a):{from:a}}}}function _q(t){var e=t.directives;if(e)for(var i in e){var n=e[i];Cn(n)&&(e[i]={bind:n,update:n})}}function hf(t,e,i){if(Cn(e)&&(e=e.options),vq(e),bq(e),_q(e),!e._base&&(e.extends&&(t=hf(t,e.extends,i)),e.mixins))for(var n=0,r=e.mixins.length;n<r;n++)t=hf(t,e.mixins[n],i);var s={},a;for(a in t)o(a);for(a in e)Ks(t,a)||o(a);function o(c){var d=Kl[c]||gq;s[c]=d(t[c],e[c],i,c)}return s}function q0(t,e,i,n){if(typeof i=="string"){var r=t[e];if(Ks(r,i))return r[i];var s=lf(i);if(Ks(r,s))return r[s];var a=X6(s);if(Ks(r,a))return r[a];var o=r[i]||r[s]||r[a];return o}}function kk(t,e,i,n){var r=e[t],s=!Ks(i,t),a=i[t],o=GD(Boolean,r.type);if(o>-1){if(s&&!Ks(r,"default"))a=!1;else if(a===""||a===Wv(t)){var c=GD(String,r.type);(c<0||o<c)&&(a=!0)}}if(a===void 0){a=Eq(n,r,t);var d=pk;Md(!0),tu(a),Md(d)}return a}function Eq(t,e,i){if(Ks(e,"default")){var n=e.default;return t&&t.$options.propsData&&t.$options.propsData[i]===void 0&&t._props[i]!==void 0?t._props[i]:Cn(n)&&SC(e.type)!=="Function"?n.call(t):n}}var Tq=/^\s*function (\w+)/;function SC(t){var e=t&&t.toString().match(Tq);return e?e[1]:""}function ND(t,e){return SC(t)===SC(e)}function GD(t,e){if(!ai(e))return ND(e,t)?0:-1;for(var i=0,n=e.length;i<n;i++)if(ND(e[i],t))return i;return-1}var id={enumerable:!0,configurable:!0,get:Hr,set:Hr};function Ak(t,e,i){id.get=function(){return this[e][i]},id.set=function(r){this[e][i]=r},Object.defineProperty(t,i,id)}function wq(t){var e=t.$options;if(e.props&&Cq(t,e.props),IV(t),e.methods&&Iq(t,e.methods),e.data)Sq(t);else{var i=tu(t._data={});i&&i.vmCount++}e.computed&&Rq(t,e.computed),e.watch&&e.watch!==yC&&Dq(t,e.watch)}function Cq(t,e){var i=t.$options.propsData||{},n=t._props=I2({}),r=t.$options._propKeys=[],s=!t.$parent;s||Md(!1);var a=function(c){r.push(c);var d=kk(c,e,i,t);uf(n,c,d,void 0,!0),c in t||Ak(t,"_props",c)};for(var o in e)a(o);Md(!0)}function Sq(t){var e=t.$options.data;e=t._data=Cn(e)?kq(e,t):e||{},to(e)||(e={});var i=Object.keys(e),n=t.$options.props;t.$options.methods;for(var r=i.length;r--;){var s=i[r];n&&Ks(n,s)||T2(s)||Ak(t,"_data",s)}var a=tu(e);a&&a.vmCount++}function kq(t,e){Vm();try{return t.call(e,e)}catch(i){return df(i,e,"data()"),{}}finally{qm()}}var Aq={lazy:!0};function Rq(t,e){var i=t._computedWatchers=Object.create(null),n=jv();for(var r in e){var s=e[r],a=Cn(s)?s:s.get;n||(i[r]=new _k(t,a||Hr,Hr,Aq)),r in t||Y2(t,r,s)}}function Y2(t,e,i){var n=!jv();Cn(i)?(id.get=n?UD(e):LD(i),id.set=Hr):(id.get=i.get?n&&i.cache!==!1?UD(e):LD(i.get):Hr,id.set=i.set||Hr),Object.defineProperty(t,e,id)}function UD(t){return function(){var i=this._computedWatchers&&this._computedWatchers[t];if(i)return i.dirty&&i.evaluate(),xd.target&&i.depend(),i.value}}function LD(t){return function(){return t.call(this,this)}}function Iq(t,e){t.$options.props;for(var i in e)t[i]=typeof e[i]!="function"?Hr:g2(e[i],t)}function Dq(t,e){for(var i in e){var n=e[i];if(ai(n))for(var r=0;r<n.length;r++)kC(t,i,n[r]);else kC(t,i,n)}}function kC(t,e,i,n){return to(i)&&(n=i,i=i.handler),typeof i=="string"&&(i=t[i]),t.$watch(e,i,n)}function xq(t){var e={};e.get=function(){return this._data};var i={};i.get=function(){return this._props},Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",i),t.prototype.$set=mk,t.prototype.$delete=A2,t.prototype.$watch=function(n,r,s){var a=this;if(to(r))return kC(a,n,r,s);s=s||{},s.user=!0;var o=new _k(a,n,r,s);if(s.immediate){var c='callback for immediate watcher "'.concat(o.expression,'"');Vm(),Pd(r,a,[o.value],a,c),qm()}return function(){o.teardown()}}}var Mq=0;function Pq(t){t.prototype._init=function(e){var i=this;i._uid=Mq++,i._isVue=!0,i.__v_skip=!0,i._scope=new uV(!0),i._scope.parent=void 0,i._scope._vm=!0,e&&e._isComponent?Oq(i,e):i.$options=hf(Rk(i.constructor),e||{},i),i._renderProxy=i,i._self=i,XV(i),qV(i),PV(i),ll(i,"beforeCreate",void 0,!1),oq(i),wq(i),aq(i),ll(i,"created"),i.$options.el&&i.$mount(i.$options.el)}}function Oq(t,e){var i=t.$options=Object.create(t.constructor.options),n=e._parentVnode;i.parent=e.parent,i._parentVnode=n;var r=n.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}function Rk(t){var e=t.options;if(t.super){var i=Rk(t.super),n=t.superOptions;if(i!==n){t.superOptions=i;var r=Nq(t);r&&ln(t.extendOptions,r),e=t.options=hf(i,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Nq(t){var e,i=t.options,n=t.sealedOptions;for(var r in i)i[r]!==n[r]&&(e||(e={}),e[r]=i[r]);return e}function Sn(t){this._init(t)}Pq(Sn);xq(Sn);zV(Sn);KV(Sn);OV(Sn);function Gq(t){t.use=function(e){var i=this._installedPlugins||(this._installedPlugins=[]);if(i.indexOf(e)>-1)return this;var n=mC(arguments,1);return n.unshift(this),Cn(e.install)?e.install.apply(e,n):Cn(e)&&e.apply(null,n),i.push(e),this}}function Uq(t){t.mixin=function(e){return this.options=hf(this.options,e),this}}function Lq(t){t.cid=0;var e=1;t.extend=function(i){i=i||{};var n=this,r=n.cid,s=i._Ctor||(i._Ctor={});if(s[r])return s[r];var a=V0(i)||V0(n.options),o=function(d){this._init(d)};return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.cid=e++,o.options=hf(n.options,i),o.super=n,o.options.props&&Bq(o),o.options.computed&&Fq(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,qE.forEach(function(c){o[c]=n[c]}),a&&(o.options.components[a]=o),o.superOptions=n.options,o.extendOptions=i,o.sealedOptions=ln({},o.options),s[r]=o,o}}function Bq(t){var e=t.options.props;for(var i in e)Ak(t.prototype,"_props",i)}function Fq(t){var e=t.options.computed;for(var i in e)Y2(t.prototype,i,e[i])}function $q(t){qE.forEach(function(e){t[e]=function(i,n){return n?(e==="component"&&to(n)&&(n.name=n.name||i,n=this.options._base.extend(n)),e==="directive"&&Cn(n)&&(n={bind:n,update:n}),this.options[e+"s"][i]=n,n):this.options[e+"s"][i]}})}function BD(t){return t&&(V0(t.Ctor.options)||t.tag)}function l_(t,e){return ai(t)?t.indexOf(e)>-1:typeof t=="string"?t.split(",").indexOf(e)>-1:V6(t)?t.test(e):!1}function FD(t,e){var i=t.cache,n=t.keys,r=t._vnode,s=t.$vnode;for(var a in i){var o=i[a];if(o){var c=o.name;c&&!e(c)&&AC(i,a,n,r)}}s.componentOptions.children=void 0}function AC(t,e,i,n){var r=t[e];r&&(!n||r.tag!==n.tag)&&r.componentInstance.$destroy(),t[e]=null,Hd(i,e)}var $D=[String,RegExp,Array],Hq={name:"keep-alive",abstract:!0,props:{include:$D,exclude:$D,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,i=t.keys,n=t.vnodeToCache,r=t.keyToCache;if(n){var s=n.tag,a=n.componentInstance,o=n.componentOptions;e[r]={name:BD(o),tag:s,componentInstance:a},i.push(r),this.max&&i.length>parseInt(this.max)&&AC(e,i[0],i,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)AC(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",function(e){FD(t,function(i){return l_(e,i)})}),this.$watch("exclude",function(e){FD(t,function(i){return!l_(e,i)})})},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=G2(t),i=e&&e.componentOptions;if(i){var n=BD(i),r=this,s=r.include,a=r.exclude;if(s&&(!n||!l_(s,n))||a&&n&&l_(a,n))return e;var o=this,c=o.cache,d=o.keys,p=e.key==null?i.Ctor.cid+(i.tag?"::".concat(i.tag):""):e.key;c[p]?(e.componentInstance=c[p].componentInstance,Hd(d,p),d.push(p)):(this.vnodeToCache=e,this.keyToCache=p),e.data.keepAlive=!0}return e||t&&t[0]}},Vq={KeepAlive:Hq};function qq(t){var e={};e.get=function(){return Co},Object.defineProperty(t,"config",e),t.util={warn:fq,extend:ln,mergeOptions:hf,defineReactive:uf},t.set=mk,t.delete=A2,t.nextTick=bk,t.observable=function(i){return tu(i),i},t.options=Object.create(null),qE.forEach(function(i){t.options[i+"s"]=Object.create(null)}),t.options._base=t,ln(t.options.components,Vq),Gq(t),Uq(t),Lq(t),$q(t)}qq(Sn);Object.defineProperty(Sn.prototype,"$isServer",{get:jv});Object.defineProperty(Sn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}});Object.defineProperty(Sn,"FunctionalRenderContext",{value:Ck});Sn.version=HV;var Yq=hl("style,class"),Wq=hl("input,textarea,option,select,progress"),jq=function(t,e,i){return i==="value"&&Wq(t)&&e!=="button"||i==="selected"&&t==="option"||i==="checked"&&t==="input"||i==="muted"&&t==="video"},W2=hl("contenteditable,draggable,spellcheck"),zq=hl("events,caret,typing,plaintext-only"),Xq=function(t,e){return Y0(e)||e==="false"?"false":t==="contenteditable"&&zq(e)?e:"true"},Kq=hl("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),RC="http://www.w3.org/1999/xlink",Ik=function(t){return t.charAt(5)===":"&&t.slice(0,5)==="xlink"},j2=function(t){return Ik(t)?t.slice(6,t.length):""},Y0=function(t){return t==null||t===!1};function Zq(t){for(var e=t.data,i=t,n=t;ke(n.componentInstance);)n=n.componentInstance._vnode,n&&n.data&&(e=HD(n.data,e));for(;ke(i=i.parent);)i&&i.data&&(e=HD(e,i.data));return Qq(e.staticClass,e.class)}function HD(t,e){return{staticClass:Dk(t.staticClass,e.staticClass),class:ke(t.class)?[t.class,e.class]:e.class}}function Qq(t,e){return ke(t)||ke(e)?Dk(t,xk(e)):""}function Dk(t,e){return t?e?t+" "+e:t:e||""}function xk(t){return Array.isArray(t)?Jq(t):Ss(t)?eY(t):typeof t=="string"?t:""}function Jq(t){for(var e="",i,n=0,r=t.length;n<r;n++)ke(i=xk(t[n]))&&i!==""&&(e&&(e+=" "),e+=i);return e}function eY(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}var tY={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},iY=hl("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Mk=hl("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),z2=function(t){return iY(t)||Mk(t)};function nY(t){if(Mk(t))return"svg";if(t==="math")return"math"}var c_=Object.create(null);function rY(t){if(!ro)return!0;if(z2(t))return!1;if(t=t.toLowerCase(),c_[t]!=null)return c_[t];var e=document.createElement(t);return t.indexOf("-")>-1?c_[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:c_[t]=/HTMLUnknownElement/.test(e.toString())}var IC=hl("text,number,password,search,email,tel,url");function sY(t){if(typeof t=="string"){var e=document.querySelector(t);return e||document.createElement("div")}else return t}function aY(t,e){var i=document.createElement(t);return t!=="select"||e.data&&e.data.attrs&&e.data.attrs.multiple!==void 0&&i.setAttribute("multiple","multiple"),i}function oY(t,e){return document.createElementNS(tY[t],e)}function lY(t){return document.createTextNode(t)}function cY(t){return document.createComment(t)}function uY(t,e,i){t.insertBefore(e,i)}function dY(t,e){t.removeChild(e)}function hY(t,e){t.appendChild(e)}function fY(t){return t.parentNode}function pY(t){return t.nextSibling}function mY(t){return t.tagName}function yY(t,e){t.textContent=e}function gY(t,e){t.setAttribute(e,"")}var vY=Object.freeze({__proto__:null,createElement:aY,createElementNS:oY,createTextNode:lY,createComment:cY,insertBefore:uY,removeChild:dY,appendChild:hY,parentNode:fY,nextSibling:pY,tagName:mY,setTextContent:yY,setStyleScope:gY}),bY={create:function(t,e){Vp(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Vp(t,!0),Vp(e))},destroy:function(t){Vp(t,!0)}};function Vp(t,e){var i=t.data.ref;if(ke(i)){var n=t.context,r=t.componentInstance||t.elm,s=e?null:r,a=e?void 0:r;if(Cn(i)){Pd(i,n,[s],n,"template ref function");return}var o=t.data.refInFor,c=typeof i=="string"||typeof i=="number",d=ic(i),p=n.$refs;if(c||d){if(o){var m=c?p[i]:i.value;e?ai(m)&&Hd(m,r):ai(m)?m.includes(r)||m.push(r):c?(p[i]=[r],VD(n,i,p[i])):i.value=[r]}else if(c){if(e&&p[i]!==r)return;p[i]=a,VD(n,i,s)}else if(d){if(e&&i.value!==r)return;i.value=s}}}}function VD(t,e,i){var n=t._setupState;n&&Ks(n,e)&&(ic(n[e])?n[e].value=i:n[e]=i)}var dd=new io("",{},[]),Ly=["create","activate","update","remove","destroy"];function _h(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&ke(t.data)===ke(e.data)&&_Y(t,e)||On(t.isAsyncPlaceholder)&&Gt(e.asyncFactory.error))}function _Y(t,e){if(t.tag!=="input")return!0;var i,n=ke(i=t.data)&&ke(i=i.attrs)&&i.type,r=ke(i=e.data)&&ke(i=i.attrs)&&i.type;return n===r||IC(n)&&IC(r)}function EY(t,e,i){var n,r,s={};for(n=e;n<=i;++n)r=t[n].key,ke(r)&&(s[r]=n);return s}function TY(t){var e,i,n={},r=t.modules,s=t.nodeOps;for(e=0;e<Ly.length;++e)for(n[Ly[e]]=[],i=0;i<r.length;++i)ke(r[i][Ly[e]])&&n[Ly[e]].push(r[i][Ly[e]]);function a(j){return new io(s.tagName(j).toLowerCase(),{},[],void 0,j)}function o(j,z){function X(){--X.listeners===0&&c(j)}return X.listeners=z,X}function c(j){var z=s.parentNode(j);ke(z)&&s.removeChild(z,j)}function d(j,z,X,se,ue,ve,_e){if(ke(j.elm)&&ke(ve)&&(j=ve[_e]=gC(j)),j.isRootInsert=!ue,!p(j,z,X,se)){var de=j.data,oe=j.children,Q=j.tag;ke(Q)?(j.elm=j.ns?s.createElementNS(j.ns,Q):s.createElement(Q,j),k(j),E(j,oe,z),ke(de)&&S(j,z),_(X,j.elm,se)):On(j.isComment)?(j.elm=s.createComment(j.text),_(X,j.elm,se)):(j.elm=s.createTextNode(j.text),_(X,j.elm,se))}}function p(j,z,X,se){var ue=j.data;if(ke(ue)){var ve=ke(j.componentInstance)&&ue.keepAlive;if(ke(ue=ue.hook)&&ke(ue=ue.init)&&ue(j,!1),ke(j.componentInstance))return m(j,z),_(X,j.elm,se),On(ve)&&y(j,z,X,se),!0}}function m(j,z){ke(j.data.pendingInsert)&&(z.push.apply(z,j.data.pendingInsert),j.data.pendingInsert=null),j.elm=j.componentInstance.$el,C(j)?(S(j,z),k(j)):(Vp(j),z.push(j))}function y(j,z,X,se){for(var ue,ve=j;ve.componentInstance;)if(ve=ve.componentInstance._vnode,ke(ue=ve.data)&&ke(ue=ue.transition)){for(ue=0;ue<n.activate.length;++ue)n.activate[ue](dd,ve);z.push(ve);break}_(X,j.elm,se)}function _(j,z,X){ke(j)&&(ke(X)?s.parentNode(X)===j&&s.insertBefore(j,z,X):s.appendChild(j,z))}function E(j,z,X){if(ai(z))for(var se=0;se<z.length;++se)d(z[se],X,j.elm,null,!0,z,se);else Yv(j.text)&&s.appendChild(j.elm,s.createTextNode(String(j.text)))}function C(j){for(;j.componentInstance;)j=j.componentInstance._vnode;return ke(j.tag)}function S(j,z){for(var X=0;X<n.create.length;++X)n.create[X](dd,j);e=j.data.hook,ke(e)&&(ke(e.create)&&e.create(dd,j),ke(e.insert)&&z.push(j))}function k(j){var z;if(ke(z=j.fnScopeId))s.setStyleScope(j.elm,z);else for(var X=j;X;)ke(z=X.context)&&ke(z=z.$options._scopeId)&&s.setStyleScope(j.elm,z),X=X.parent;ke(z=Qh)&&z!==j.context&&z!==j.fnContext&&ke(z=z.$options._scopeId)&&s.setStyleScope(j.elm,z)}function R(j,z,X,se,ue,ve){for(;se<=ue;++se)d(X[se],ve,j,z,!1,X,se)}function O(j){var z,X,se=j.data;if(ke(se))for(ke(z=se.hook)&&ke(z=z.destroy)&&z(j),z=0;z<n.destroy.length;++z)n.destroy[z](j);if(ke(z=j.children))for(X=0;X<j.children.length;++X)O(j.children[X])}function I(j,z,X){for(;z<=X;++z){var se=j[z];ke(se)&&(ke(se.tag)?(F(se),O(se)):c(se.elm))}}function F(j,z){if(ke(z)||ke(j.data)){var X,se=n.remove.length+1;for(ke(z)?z.listeners+=se:z=o(j.elm,se),ke(X=j.componentInstance)&&ke(X=X._vnode)&&ke(X.data)&&F(X,z),X=0;X<n.remove.length;++X)n.remove[X](j,z);ke(X=j.data.hook)&&ke(X=X.remove)?X(j,z):z()}else c(j.elm)}function P(j,z,X,se,ue){for(var ve=0,_e=0,de=z.length-1,oe=z[0],Q=z[de],Z=X.length-1,W=X[0],ne=X[Z],ce,J,pe,he,fe=!ue;ve<=de&&_e<=Z;)Gt(oe)?oe=z[++ve]:Gt(Q)?Q=z[--de]:_h(oe,W)?(M(oe,W,se,X,_e),oe=z[++ve],W=X[++_e]):_h(Q,ne)?(M(Q,ne,se,X,Z),Q=z[--de],ne=X[--Z]):_h(oe,ne)?(M(oe,ne,se,X,Z),fe&&s.insertBefore(j,oe.elm,s.nextSibling(Q.elm)),oe=z[++ve],ne=X[--Z]):_h(Q,W)?(M(Q,W,se,X,_e),fe&&s.insertBefore(j,Q.elm,oe.elm),Q=z[--de],W=X[++_e]):(Gt(ce)&&(ce=EY(z,ve,de)),J=ke(W.key)?ce[W.key]:x(W,z,ve,de),Gt(J)?d(W,se,j,oe.elm,!1,X,_e):(pe=z[J],_h(pe,W)?(M(pe,W,se,X,_e),z[J]=void 0,fe&&s.insertBefore(j,pe.elm,oe.elm)):d(W,se,j,oe.elm,!1,X,_e)),W=X[++_e]);ve>de?(he=Gt(X[Z+1])?null:X[Z+1].elm,R(j,he,X,_e,Z,se)):_e>Z&&I(z,ve,de)}function x(j,z,X,se){for(var ue=X;ue<se;ue++){var ve=z[ue];if(ke(ve)&&_h(j,ve))return ue}}function M(j,z,X,se,ue,ve){if(j!==z){ke(z.elm)&&ke(se)&&(z=se[ue]=gC(z));var _e=z.elm=j.elm;if(On(j.isAsyncPlaceholder)){ke(z.asyncFactory.resolved)?B(j.elm,z,X):z.isAsyncPlaceholder=!0;return}if(On(z.isStatic)&&On(j.isStatic)&&z.key===j.key&&(On(z.isCloned)||On(z.isOnce))){z.componentInstance=j.componentInstance;return}var de,oe=z.data;ke(oe)&&ke(de=oe.hook)&&ke(de=de.prepatch)&&de(j,z);var Q=j.children,Z=z.children;if(ke(oe)&&C(z)){for(de=0;de<n.update.length;++de)n.update[de](j,z);ke(de=oe.hook)&&ke(de=de.update)&&de(j,z)}Gt(z.text)?ke(Q)&&ke(Z)?Q!==Z&&P(_e,Q,Z,X,ve):ke(Z)?(ke(j.text)&&s.setTextContent(_e,""),R(_e,null,Z,0,Z.length-1,X)):ke(Q)?I(Q,0,Q.length-1):ke(j.text)&&s.setTextContent(_e,""):j.text!==z.text&&s.setTextContent(_e,z.text),ke(oe)&&ke(de=oe.hook)&&ke(de=de.postpatch)&&de(j,z)}}function q(j,z,X){if(On(X)&&ke(j.parent))j.parent.data.pendingInsert=z;else for(var se=0;se<z.length;++se)z[se].data.hook.insert(z[se])}var $=hl("attrs,class,staticClass,staticStyle,key");function B(j,z,X,se){var ue,ve=z.tag,_e=z.data,de=z.children;if(se=se||_e&&_e.pre,z.elm=j,On(z.isComment)&&ke(z.asyncFactory))return z.isAsyncPlaceholder=!0,!0;if(ke(_e)&&(ke(ue=_e.hook)&&ke(ue=ue.init)&&ue(z,!0),ke(ue=z.componentInstance)))return m(z,X),!0;if(ke(ve)){if(ke(de))if(!j.hasChildNodes())E(z,de,X);else if(ke(ue=_e)&&ke(ue=ue.domProps)&&ke(ue=ue.innerHTML)){if(ue!==j.innerHTML)return!1}else{for(var oe=!0,Q=j.firstChild,Z=0;Z<de.length;Z++){if(!Q||!B(Q,de[Z],X,se)){oe=!1;break}Q=Q.nextSibling}if(!oe||Q)return!1}if(ke(_e)){var W=!1;for(var ne in _e)if(!$(ne)){W=!0,S(z,X);break}!W&&_e.class&&$0(_e.class)}}else j.data!==z.text&&(j.data=z.text);return!0}return function(z,X,se,ue){if(Gt(X)){ke(z)&&O(z);return}var ve=!1,_e=[];if(Gt(z))ve=!0,d(X,_e);else{var de=ke(z.nodeType);if(!de&&_h(z,X))M(z,X,_e,null,null,ue);else{if(de){if(z.nodeType===1&&z.hasAttribute(gD)&&(z.removeAttribute(gD),se=!0),On(se)&&B(z,X,_e))return q(X,_e,!0),z;z=a(z)}var oe=z.elm,Q=s.parentNode(oe);if(d(X,_e,oe._leaveCb?null:Q,s.nextSibling(oe)),ke(X.parent))for(var Z=X.parent,W=C(X);Z;){for(var ne=0;ne<n.destroy.length;++ne)n.destroy[ne](Z);if(Z.elm=X.elm,W){for(var ce=0;ce<n.create.length;++ce)n.create[ce](dd,Z);var J=Z.data.hook.insert;if(J.merged)for(var pe=J.fns.slice(1),he=0;he<pe.length;he++)pe[he]()}else Vp(Z);Z=Z.parent}ke(Q)?I([z],0,0):ke(z.tag)&&O(z)}}return q(X,_e,ve),X.elm}}var wY={create:E1,update:E1,destroy:function(e){E1(e,dd)}};function E1(t,e){(t.data.directives||e.data.directives)&&CY(t,e)}function CY(t,e){var i=t===dd,n=e===dd,r=qD(t.data.directives,t.context),s=qD(e.data.directives,e.context),a=[],o=[],c,d,p;for(c in s)d=r[c],p=s[c],d?(p.oldValue=d.value,p.oldArg=d.arg,By(p,"update",e,t),p.def&&p.def.componentUpdated&&o.push(p)):(By(p,"bind",e,t),p.def&&p.def.inserted&&a.push(p));if(a.length){var m=function(){for(var y=0;y<a.length;y++)By(a[y],"inserted",e,t)};i?ud(e,"insert",m):m()}if(o.length&&ud(e,"postpatch",function(){for(var y=0;y<o.length;y++)By(o[y],"componentUpdated",e,t)}),!i)for(c in r)s[c]||By(r[c],"unbind",t,t,n)}var SY=Object.create(null);function qD(t,e){var i=Object.create(null);if(!t)return i;var n,r;for(n=0;n<t.length;n++){if(r=t[n],r.modifiers||(r.modifiers=SY),i[kY(r)]=r,e._setupState&&e._setupState.__sfc){var s=r.def||q0(e,"_setupState","v-"+r.name);typeof s=="function"?r.def={bind:s,update:s}:r.def=s}r.def=r.def||q0(e.$options,"directives",r.name)}return i}function kY(t){return t.rawName||"".concat(t.name,".").concat(Object.keys(t.modifiers||{}).join("."))}function By(t,e,i,n,r){var s=t.def&&t.def[e];if(s)try{s(i.elm,t,i,n,r)}catch(a){df(a,i.context,"directive ".concat(t.name," ").concat(e," hook"))}}var AY=[bY,wY];function YD(t,e){var i=e.componentOptions;if(!(ke(i)&&i.Ctor.options.inheritAttrs===!1)&&!(Gt(t.data.attrs)&&Gt(e.data.attrs))){var n,r,s,a=e.elm,o=t.data.attrs||{},c=e.data.attrs||{};(ke(c.__ob__)||On(c._v_attr_proxy))&&(c=e.data.attrs=ln({},c));for(n in c)r=c[n],s=o[n],s!==r&&WD(a,n,r,e.data.pre);($m||w2)&&c.value!==o.value&&WD(a,"value",c.value);for(n in o)Gt(c[n])&&(Ik(n)?a.removeAttributeNS(RC,j2(n)):W2(n)||a.removeAttribute(n))}}function WD(t,e,i,n){n||t.tagName.indexOf("-")>-1?jD(t,e,i):Kq(e)?Y0(i)?t.removeAttribute(e):(i=e==="allowfullscreen"&&t.tagName==="EMBED"?"true":e,t.setAttribute(e,i)):W2(e)?t.setAttribute(e,Xq(e,i)):Ik(e)?Y0(i)?t.removeAttributeNS(RC,j2(e)):t.setAttributeNS(RC,e,i):jD(t,e,i)}function jD(t,e,i){if(Y0(i))t.removeAttribute(e);else{if($m&&!Hm&&t.tagName==="TEXTAREA"&&e==="placeholder"&&i!==""&&!t.__ieph){var n=function(r){r.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,i)}}var RY={create:YD,update:YD};function zD(t,e){var i=e.elm,n=e.data,r=t.data;if(!(Gt(n.staticClass)&&Gt(n.class)&&(Gt(r)||Gt(r.staticClass)&&Gt(r.class)))){var s=Zq(e),a=i._transitionClasses;ke(a)&&(s=Dk(s,xk(a))),s!==i._prevClass&&(i.setAttribute("class",s),i._prevClass=s)}}var IY={create:zD,update:zD},T1="__r",w1="__c";function DY(t){if(ke(t[T1])){var e=$m?"change":"input";t[e]=[].concat(t[T1],t[e]||[]),delete t[T1]}ke(t[w1])&&(t.change=[].concat(t[w1],t.change||[]),delete t[w1])}var lv;function xY(t,e,i){var n=lv;return function r(){var s=e.apply(null,arguments);s!==null&&X2(t,r,i,n)}}var MY=_C&&!(vD&&Number(vD[1])<=53);function PY(t,e,i,n){if(MY){var r=V2,s=e;e=s._wrapper=function(a){if(a.target===a.currentTarget||a.timeStamp>=r||a.timeStamp<=0||a.target.ownerDocument!==document)return s.apply(this,arguments)}}lv.addEventListener(t,e,C2?{capture:i,passive:n}:i)}function X2(t,e,i,n){(n||lv).removeEventListener(t,e._wrapper||e,i)}function C1(t,e){if(!(Gt(t.data.on)&&Gt(e.data.on))){var i=e.data.on||{},n=t.data.on||{};lv=e.elm||t.elm,DY(i),D2(i,n,PY,X2,xY,e.context),lv=void 0}}var OY={create:C1,update:C1,destroy:function(t){return C1(t,dd)}},u_;function XD(t,e){if(!(Gt(t.data.domProps)&&Gt(e.data.domProps))){var i,n,r=e.elm,s=t.data.domProps||{},a=e.data.domProps||{};(ke(a.__ob__)||On(a._v_attr_proxy))&&(a=e.data.domProps=ln({},a));for(i in s)i in a||(r[i]="");for(i in a){if(n=a[i],i==="textContent"||i==="innerHTML"){if(e.children&&(e.children.length=0),n===s[i])continue;r.childNodes.length===1&&r.removeChild(r.childNodes[0])}if(i==="value"&&r.tagName!=="PROGRESS"){r._value=n;var o=Gt(n)?"":String(n);NY(r,o)&&(r.value=o)}else if(i==="innerHTML"&&Mk(r.tagName)&&Gt(r.innerHTML)){u_=u_||document.createElement("div"),u_.innerHTML="<svg>".concat(n,"</svg>");for(var c=u_.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;c.firstChild;)r.appendChild(c.firstChild)}else if(n!==s[i])try{r[i]=n}catch{}}}}function NY(t,e){return!t.composing&&(t.tagName==="OPTION"||GY(t,e)||UY(t,e))}function GY(t,e){var i=!0;try{i=document.activeElement!==t}catch{}return i&&t.value!==e}function UY(t,e){var i=t.value,n=t._vModifiers;if(ke(n)){if(n.number)return nv(i)!==nv(e);if(n.trim)return i.trim()!==e.trim()}return i!==e}var LY={create:XD,update:XD},BY=Of(function(t){var e={},i=/;(?![^(]*\))/g,n=/:(.+)/;return t.split(i).forEach(function(r){if(r){var s=r.split(n);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e});function S1(t){var e=K2(t.style);return t.staticStyle?ln(t.staticStyle,e):e}function K2(t){return Array.isArray(t)?v2(t):typeof t=="string"?BY(t):t}function FY(t,e){for(var i={},n,r=t;r.componentInstance;)r=r.componentInstance._vnode,r&&r.data&&(n=S1(r.data))&&ln(i,n);(n=S1(t.data))&&ln(i,n);for(var s=t;s=s.parent;)s.data&&(n=S1(s.data))&&ln(i,n);return i}var $Y=/^--/,KD=/\s*!important$/,ZD=function(t,e,i){if($Y.test(e))t.style.setProperty(e,i);else if(KD.test(i))t.style.setProperty(Wv(e),i.replace(KD,""),"important");else{var n=HY(e);if(Array.isArray(i))for(var r=0,s=i.length;r<s;r++)t.style[n]=i[r];else t.style[n]=i}},QD=["Webkit","Moz","ms"],d_,HY=Of(function(t){if(d_=d_||document.createElement("div").style,t=lf(t),t!=="filter"&&t in d_)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<QD.length;i++){var n=QD[i]+e;if(n in d_)return n}});function JD(t,e){var i=e.data,n=t.data;if(!(Gt(i.staticStyle)&&Gt(i.style)&&Gt(n.staticStyle)&&Gt(n.style))){var r,s,a=e.elm,o=n.staticStyle,c=n.normalizedStyle||n.style||{},d=o||c,p=K2(e.data.style)||{};e.data.normalizedStyle=ke(p.__ob__)?ln({},p):p;var m=FY(e);for(s in d)Gt(m[s])&&ZD(a,s,"");for(s in m)r=m[s],ZD(a,s,r??"")}}var VY={create:JD,update:JD},Z2=/\s+/;function Q2(t,e){if(!(!e||!(e=e.trim())))if(t.classList)e.indexOf(" ")>-1?e.split(Z2).forEach(function(n){return t.classList.add(n)}):t.classList.add(e);else{var i=" ".concat(t.getAttribute("class")||""," ");i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function J2(t,e){if(!(!e||!(e=e.trim())))if(t.classList)e.indexOf(" ")>-1?e.split(Z2).forEach(function(r){return t.classList.remove(r)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" ".concat(t.getAttribute("class")||""," "),n=" "+e+" ";i.indexOf(n)>=0;)i=i.replace(n," ");i=i.trim(),i?t.setAttribute("class",i):t.removeAttribute("class")}}function eG(t){if(t){if(typeof t=="object"){var e={};return t.css!==!1&&ln(e,ex(t.name||"v")),ln(e,t),e}else if(typeof t=="string")return ex(t)}}var ex=Of(function(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}}),tG=ro&&!Hm,xp="transition",k1="animation",o0="transition",W0="transitionend",DC="animation",iG="animationend";tG&&(window.ontransitionend===void 0&&window.onwebkittransitionend!==void 0&&(o0="WebkitTransition",W0="webkitTransitionEnd"),window.onanimationend===void 0&&window.onwebkitanimationend!==void 0&&(DC="WebkitAnimation",iG="webkitAnimationEnd"));var tx=ro?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function nG(t){tx(function(){tx(t)})}function Jh(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),Q2(t,e))}function qc(t,e){t._transitionClasses&&Hd(t._transitionClasses,e),J2(t,e)}function rG(t,e,i){var n=sG(t,e),r=n.type,s=n.timeout,a=n.propCount;if(!r)return i();var o=r===xp?W0:iG,c=0,d=function(){t.removeEventListener(o,p),i()},p=function(m){m.target===t&&++c>=a&&d()};setTimeout(function(){c<a&&d()},s+1),t.addEventListener(o,p)}var qY=/\b(transform|all)(,|$)/;function sG(t,e){var i=window.getComputedStyle(t),n=(i[o0+"Delay"]||"").split(", "),r=(i[o0+"Duration"]||"").split(", "),s=ix(n,r),a=(i[DC+"Delay"]||"").split(", "),o=(i[DC+"Duration"]||"").split(", "),c=ix(a,o),d,p=0,m=0;e===xp?s>0&&(d=xp,p=s,m=r.length):e===k1?c>0&&(d=k1,p=c,m=o.length):(p=Math.max(s,c),d=p>0?s>c?xp:k1:null,m=d?d===xp?r.length:o.length:0);var y=d===xp&&qY.test(i[o0+"Property"]);return{type:d,timeout:p,propCount:m,hasTransform:y}}function ix(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(i,n){return nx(i)+nx(t[n])}))}function nx(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function xC(t,e){var i=t.elm;ke(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var n=eG(t.data.transition);if(!Gt(n)&&!(ke(i._enterCb)||i.nodeType!==1)){for(var r=n.css,s=n.type,a=n.enterClass,o=n.enterToClass,c=n.enterActiveClass,d=n.appearClass,p=n.appearToClass,m=n.appearActiveClass,y=n.beforeEnter,_=n.enter,E=n.afterEnter,C=n.enterCancelled,S=n.beforeAppear,k=n.appear,R=n.afterAppear,O=n.appearCancelled,I=n.duration,F=Qh,P=Qh.$vnode;P&&P.parent;)F=P.context,P=P.parent;var x=!F._isMounted||!t.isRootInsert;if(!(x&&!k&&k!=="")){var M=x&&d?d:a,q=x&&m?m:c,$=x&&p?p:o,B=x&&S||y,j=x&&Cn(k)?k:_,z=x&&R||E,X=x&&O||C,se=nv(Ss(I)?I.enter:I),ue=r!==!1&&!Hm,ve=Pk(j),_e=i._enterCb=G0(function(){ue&&(qc(i,$),qc(i,q)),_e.cancelled?(ue&&qc(i,M),X&&X(i)):z&&z(i),i._enterCb=null});t.data.show||ud(t,"insert",function(){var de=i.parentNode,oe=de&&de._pending&&de._pending[t.key];oe&&oe.tag===t.tag&&oe.elm._leaveCb&&oe.elm._leaveCb(),j&&j(i,_e)}),B&&B(i),ue&&(Jh(i,M),Jh(i,q),nG(function(){qc(i,M),_e.cancelled||(Jh(i,$),ve||(oG(se)?setTimeout(_e,se):rG(i,s,_e)))})),t.data.show&&(e&&e(),j&&j(i,_e)),!ue&&!ve&&_e()}}}function aG(t,e){var i=t.elm;ke(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var n=eG(t.data.transition);if(Gt(n)||i.nodeType!==1)return e();if(ke(i._leaveCb))return;var r=n.css,s=n.type,a=n.leaveClass,o=n.leaveToClass,c=n.leaveActiveClass,d=n.beforeLeave,p=n.leave,m=n.afterLeave,y=n.leaveCancelled,_=n.delayLeave,E=n.duration,C=r!==!1&&!Hm,S=Pk(p),k=nv(Ss(E)?E.leave:E),R=i._leaveCb=G0(function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[t.key]=null),C&&(qc(i,o),qc(i,c)),R.cancelled?(C&&qc(i,a),y&&y(i)):(e(),m&&m(i)),i._leaveCb=null});_?_(O):O();function O(){R.cancelled||(!t.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[t.key]=t),d&&d(i),C&&(Jh(i,a),Jh(i,c),nG(function(){qc(i,a),R.cancelled||(Jh(i,o),S||(oG(k)?setTimeout(R,k):rG(i,s,R)))})),p&&p(i,R),!C&&!S&&R())}}function oG(t){return typeof t=="number"&&!isNaN(t)}function Pk(t){if(Gt(t))return!1;var e=t.fns;return ke(e)?Pk(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function rx(t,e){e.data.show!==!0&&xC(e)}var YY=ro?{create:rx,activate:rx,remove:function(t,e){t.data.show!==!0?aG(t,e):e()}}:{},WY=[RY,IY,OY,LY,VY,YY],jY=WY.concat(AY),zY=TY({nodeOps:vY,modules:jY});Hm&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Ok(t,"input")});var lG={inserted:function(t,e,i,n){i.tag==="select"?(n.elm&&!n.elm._vOptions?ud(i,"postpatch",function(){lG.componentUpdated(t,e,i)}):sx(t,e,i.context),t._vOptions=[].map.call(t.options,j0)):(i.tag==="textarea"||IC(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",XY),t.addEventListener("compositionend",lx),t.addEventListener("change",lx),Hm&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if(i.tag==="select"){sx(t,e,i.context);var n=t._vOptions,r=t._vOptions=[].map.call(t.options,j0);if(r.some(function(a,o){return!cf(a,n[o])})){var s=t.multiple?e.value.some(function(a){return ox(a,r)}):e.value!==e.oldValue&&ox(e.value,r);s&&Ok(t,"change")}}}};function sx(t,e,i){ax(t,e),($m||w2)&&setTimeout(function(){ax(t,e)},0)}function ax(t,e,i){var n=e.value,r=t.multiple;if(!(r&&!Array.isArray(n))){for(var s,a,o=0,c=t.options.length;o<c;o++)if(a=t.options[o],r)s=_2(n,j0(a))>-1,a.selected!==s&&(a.selected=s);else if(cf(j0(a),n)){t.selectedIndex!==o&&(t.selectedIndex=o);return}r||(t.selectedIndex=-1)}}function ox(t,e){return e.every(function(i){return!cf(i,t)})}function j0(t){return"_value"in t?t._value:t.value}function XY(t){t.target.composing=!0}function lx(t){t.target.composing&&(t.target.composing=!1,Ok(t.target,"input"))}function Ok(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function MC(t){return t.componentInstance&&(!t.data||!t.data.transition)?MC(t.componentInstance._vnode):t}var KY={bind:function(t,e,i){var n=e.value;i=MC(i);var r=i.data&&i.data.transition,s=t.__vOriginalDisplay=t.style.display==="none"?"":t.style.display;n&&r?(i.data.show=!0,xC(i,function(){t.style.display=s})):t.style.display=n?s:"none"},update:function(t,e,i){var n=e.value,r=e.oldValue;if(!n!=!r){i=MC(i);var s=i.data&&i.data.transition;s?(i.data.show=!0,n?xC(i,function(){t.style.display=t.__vOriginalDisplay}):aG(i,function(){t.style.display="none"})):t.style.display=n?t.__vOriginalDisplay:"none"}},unbind:function(t,e,i,n,r){r||(t.style.display=t.__vOriginalDisplay)}},ZY={model:lG,show:KY},cG={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function PC(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?PC(G2(e.children)):t}function uG(t){var e={},i=t.$options;for(var n in i.propsData)e[n]=t[n];var r=i._parentListeners;for(var n in r)e[lf(n)]=r[n];return e}function cx(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function QY(t){for(;t=t.parent;)if(t.data.transition)return!0}function JY(t,e){return e.key===t.key&&e.tag===t.tag}var e8=function(t){return t.tag||sv(t)},t8=function(t){return t.name==="show"},i8={name:"transition",props:cG,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(e8),!!i.length)){var n=this.mode,r=i[0];if(QY(this.$vnode))return r;var s=PC(r);if(!s)return r;if(this._leaving)return cx(t,r);var a="__transition-".concat(this._uid,"-");s.key=s.key==null?s.isComment?a+"comment":a+s.tag:Yv(s.key)?String(s.key).indexOf(a)===0?s.key:a+s.key:s.key;var o=(s.data||(s.data={})).transition=uG(this),c=this._vnode,d=PC(c);if(s.data.directives&&s.data.directives.some(t8)&&(s.data.show=!0),d&&d.data&&!JY(s,d)&&!sv(d)&&!(d.componentInstance&&d.componentInstance._vnode.isComment)){var p=d.data.transition=ln({},o);if(n==="out-in")return this._leaving=!0,ud(p,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),cx(t,r);if(n==="in-out"){if(sv(s))return c;var m,y=function(){m()};ud(o,"afterEnter",y),ud(o,"enterCancelled",y),ud(p,"delayLeave",function(_){m=_})}}return r}}},dG=ln({tag:String,moveClass:String},cG);delete dG.mode;var n8={props:dG,beforeMount:function(){var t=this,e=this._update;this._update=function(i,n){var r=F2(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,i,n)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],a=uG(this),o=0;o<r.length;o++){var c=r[o];c.tag&&c.key!=null&&String(c.key).indexOf("__vlist")!==0&&(s.push(c),i[c.key]=c,(c.data||(c.data={})).transition=a)}if(n){for(var d=[],p=[],o=0;o<n.length;o++){var c=n[o];c.data.transition=a,c.data.pos=c.elm.getBoundingClientRect(),i[c.key]?d.push(c):p.push(c)}this.kept=t(e,null,d),this.removed=p}return t(e,null,s)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";!t.length||!this.hasMove(t[0].elm,e)||(t.forEach(r8),t.forEach(s8),t.forEach(a8),this._reflow=document.body.offsetHeight,t.forEach(function(i){if(i.data.moved){var n=i.elm,r=n.style;Jh(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(W0,n._moveCb=function s(a){a&&a.target!==n||(!a||/transform$/.test(a.propertyName))&&(n.removeEventListener(W0,s),n._moveCb=null,qc(n,e))})}}))},methods:{hasMove:function(t,e){if(!tG)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(r){J2(i,r)}),Q2(i,e),i.style.display="none",this.$el.appendChild(i);var n=sG(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}};function r8(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function s8(t){t.data.newPos=t.elm.getBoundingClientRect()}function a8(t){var e=t.data.pos,i=t.data.newPos,n=e.left-i.left,r=e.top-i.top;if(n||r){t.data.moved=!0;var s=t.elm.style;s.transform=s.WebkitTransform="translate(".concat(n,"px,").concat(r,"px)"),s.transitionDuration="0s"}}var o8={Transition:i8,TransitionGroup:n8};Sn.config.mustUseProp=jq;Sn.config.isReservedTag=z2;Sn.config.isReservedAttr=Yq;Sn.config.getTagNamespace=nY;Sn.config.isUnknownElement=rY;ln(Sn.options.directives,ZY);ln(Sn.options.components,o8);Sn.prototype.__patch__=ro?zY:Hr;Sn.prototype.$mount=function(t,e){return t=t&&ro?sY(t):void 0,ZV(this,t,e)};ro&&setTimeout(function(){Co.devtools&&U0&&U0.emit("init",Sn)},0);(function(t,e){(function(i){i(Fm)})(function(i){i.defineSimpleMode=function(y,_){i.defineMode(y,function(E){return i.simpleMode(E,_)})},i.simpleMode=function(y,_){n(_,"start");var E={},C=_.meta||{},S=!1;for(var k in _)if(k!=C&&_.hasOwnProperty(k))for(var R=E[k]=[],O=_[k],I=0;I<O.length;I++){var F=O[I];R.push(new a(F,_)),(F.indent||F.dedent)&&(S=!0)}var P={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:S?[]:null}},copyState:function(M){var q={state:M.state,pending:M.pending,local:M.local,localState:null,indent:M.indent&&M.indent.slice(0)};M.localState&&(q.localState=i.copyState(M.local.mode,M.localState)),M.stack&&(q.stack=M.stack.slice(0));for(var $=M.persistentStates;$;$=$.next)q.persistentStates={mode:$.mode,spec:$.spec,state:$.state==M.localState?q.localState:i.copyState($.mode,$.state),next:q.persistentStates};return q},token:o(E,y),innerMode:function(M){return M.local&&{mode:M.local.mode,state:M.localState}},indent:m(E,C)};if(C)for(var x in C)C.hasOwnProperty(x)&&(P[x]=C[x]);return P};function n(y,_){if(!y.hasOwnProperty(_))throw new Error("Undefined state "+_+" in simple mode")}function r(y,_){if(!y)return/(?:)/;var E="";return y instanceof RegExp?(y.ignoreCase&&(E="i"),y.unicode&&(E+="u"),y=y.source):y=String(y),new RegExp((_===!1?"":"^")+"(?:"+y+")",E)}function s(y){if(!y)return null;if(y.apply)return y;if(typeof y=="string")return y.replace(/\./g," ");for(var _=[],E=0;E<y.length;E++)_.push(y[E]&&y[E].replace(/\./g," "));return _}function a(y,_){(y.next||y.push)&&n(_,y.next||y.push),this.regex=r(y.regex),this.token=s(y.token),this.data=y}function o(y,_){return function(E,C){if(C.pending){var S=C.pending.shift();return C.pending.length==0&&(C.pending=null),E.pos+=S.text.length,S.token}if(C.local)if(C.local.end&&E.match(C.local.end)){var k=C.local.endToken||null;return C.local=C.localState=null,k}else{var k=C.local.mode.token(E,C.localState),R;return C.local.endScan&&(R=C.local.endScan.exec(E.current()))&&(E.pos=E.start+R.index),k}for(var O=y[C.state],I=0;I<O.length;I++){var F=O[I],P=(!F.data.sol||E.sol())&&E.match(F.regex);if(P){F.data.next?C.state=F.data.next:F.data.push?((C.stack||(C.stack=[])).push(C.state),C.state=F.data.push):F.data.pop&&C.stack&&C.stack.length&&(C.state=C.stack.pop()),F.data.mode&&d(_,C,F.data.mode,F.token),F.data.indent&&C.indent.push(E.indentation()+_.indentUnit),F.data.dedent&&C.indent.pop();var x=F.token;if(x&&x.apply&&(x=x(P)),P.length>2&&F.token&&typeof F.token!="string"){for(var M=2;M<P.length;M++)P[M]&&(C.pending||(C.pending=[])).push({text:P[M],token:F.token[M-1]});return E.backUp(P[0].length-(P[1]?P[1].length:0)),x[0]}else return x&&x.join?x[0]:x}}return E.next(),null}}function c(y,_){if(y===_)return!0;if(!y||typeof y!="object"||!_||typeof _!="object")return!1;var E=0;for(var C in y)if(y.hasOwnProperty(C)){if(!_.hasOwnProperty(C)||!c(y[C],_[C]))return!1;E++}for(var C in _)_.hasOwnProperty(C)&&E--;return E==0}function d(y,_,E,C){var S;if(E.persistent)for(var k=_.persistentStates;k&&!S;k=k.next)(E.spec?c(E.spec,k.spec):E.mode==k.mode)&&(S=k);var R=S?S.mode:E.mode||i.getMode(y,E.spec),O=S?S.state:i.startState(R);E.persistent&&!S&&(_.persistentStates={mode:R,spec:E.spec,state:O,next:_.persistentStates}),_.localState=O,_.local={mode:R,end:E.end&&r(E.end),endScan:E.end&&E.forceEnd!==!1&&r(E.end,!1),endToken:C&&C.join?C[C.length-1]:C}}function p(y,_){for(var E=0;E<_.length;E++)if(_[E]===y)return!0}function m(y,_){return function(E,C,S){if(E.local&&E.local.mode.indent)return E.local.mode.indent(E.localState,C,S);if(E.indent==null||E.local||_.dontIndentStates&&p(E.state,_.dontIndentStates)>-1)return i.Pass;var k=E.indent.length-1,R=y[E.state];e:for(;;){for(var O=0;O<R.length;O++){var I=R[O];if(I.data.dedent&&I.data.dedentIfLineStart!==!1){var F=I.regex.exec(C);if(F&&F[0]){k--,(I.next||I.push)&&(R=y[I.next||I.push]),C=C.slice(F[0].length);continue e}}}break}return k<0?0:E.indent[k]}}})})();(function(t,e){(function(i){i(Fm)})(function(i){var n="CodeMirror-hint",r="CodeMirror-hint-active";i.showHint=function(k,R,O){if(!R)return k.showHint(O);O&&O.async&&(R.async=!0);var I={hint:R};if(O)for(var F in O)I[F]=O[F];return k.showHint(I)},i.defineExtension("showHint",function(k){k=c(this,this.getCursor("start"),k);var R=this.listSelections();if(!(R.length>1)){if(this.somethingSelected()){if(!k.hint.supportsSelection)return;for(var O=0;O<R.length;O++)if(R[O].head.line!=R[O].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var I=this.state.completionActive=new s(this,k);I.options.hint&&(i.signal(this,"startCompletion",this),I.update(!0))}}),i.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function s(k,R){if(this.cm=k,this.options=R,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var O=this;k.on("cursorActivity",this.activityFunc=function(){O.cursorActivity()})}}var a=window.requestAnimationFrame||function(k){return setTimeout(k,1e3/60)},o=window.cancelAnimationFrame||clearTimeout;s.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&i.signal(this.data,"close"),this.widget&&this.widget.close(),i.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(k,R){var O=k.list[R],I=this;this.cm.operation(function(){O.hint?O.hint(I.cm,k,O):I.cm.replaceRange(d(O),O.from||k.from,O.to||k.to,"complete"),i.signal(k,"pick",O),I.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(o(this.debounce),this.debounce=0);var k=this.startPos;this.data&&(k=this.data.from);var R=this.cm.getCursor(),O=this.cm.getLine(R.line);if(R.line!=this.startPos.line||O.length-R.ch!=this.startLen-this.startPos.ch||R.ch<k.ch||this.cm.somethingSelected()||!R.ch||this.options.closeCharacters.test(O.charAt(R.ch-1)))this.close();else{var I=this;this.debounce=a(function(){I.update()}),this.widget&&this.widget.disable()}},update:function(k){if(this.tick!=null){var R=this,O=++this.tick;E(this.options.hint,this.cm,this.options,function(I){R.tick==O&&R.finishUpdate(I,k)})}},finishUpdate:function(k,R){this.data&&i.signal(this.data,"update");var O=this.widget&&this.widget.picked||R&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=k,k&&k.list.length&&(O&&k.list.length==1?this.pick(k,0):(this.widget=new y(this,k),i.signal(k,"shown")))}};function c(k,R,O){var I=k.options.hintOptions,F={};for(var P in S)F[P]=S[P];if(I)for(var P in I)I[P]!==void 0&&(F[P]=I[P]);if(O)for(var P in O)O[P]!==void 0&&(F[P]=O[P]);return F.hint.resolve&&(F.hint=F.hint.resolve(k,R)),F}function d(k){return typeof k=="string"?k:k.text}function p(k,R){var O={Up:function(){R.moveFocus(-1)},Down:function(){R.moveFocus(1)},PageUp:function(){R.moveFocus(-R.menuSize()+1,!0)},PageDown:function(){R.moveFocus(R.menuSize()-1,!0)},Home:function(){R.setFocus(0)},End:function(){R.setFocus(R.length-1)},Enter:R.pick,Tab:R.pick,Esc:R.close},I=/Mac/.test(navigator.platform);I&&(O["Ctrl-P"]=function(){R.moveFocus(-1)},O["Ctrl-N"]=function(){R.moveFocus(1)});var F=k.options.customKeys,P=F?{}:O;function x($,B){var j;typeof B!="string"?j=function(z){return B(z,R)}:O.hasOwnProperty(B)?j=O[B]:j=B,P[$]=j}if(F)for(var M in F)F.hasOwnProperty(M)&&x(M,F[M]);var q=k.options.extraKeys;if(q)for(var M in q)q.hasOwnProperty(M)&&x(M,q[M]);return P}function m(k,R){for(;R&&R!=k;){if(R.nodeName.toUpperCase()==="LI"&&R.parentNode==k)return R;R=R.parentNode}}function y(k,R){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=k,this.data=R,this.picked=!1;var O=this,I=k.cm,F=I.getInputField().ownerDocument,P=F.defaultView||F.parentWindow,x=this.hints=F.createElement("ul");x.setAttribute("role","listbox"),x.setAttribute("aria-expanded","true"),x.id=this.id;var M=k.cm.options.theme;x.className="CodeMirror-hints "+M,this.selectedHint=R.selectedHint||0;for(var q=R.list,$=0;$<q.length;++$){var B=x.appendChild(F.createElement("li")),j=q[$],z=n+($!=this.selectedHint?"":" "+r);j.className!=null&&(z=j.className+" "+z),B.className=z,$==this.selectedHint&&B.setAttribute("aria-selected","true"),B.id=this.id+"-"+$,B.setAttribute("role","option"),j.render?j.render(B,R,j):B.appendChild(F.createTextNode(j.displayText||d(j))),B.hintId=$}var X=k.options.container||F.body,se=I.cursorCoords(k.options.alignWithWord?R.from:null),ue=se.left,ve=se.bottom,_e=!0,de=0,oe=0;if(X!==F.body){var Q=["absolute","relative","fixed"].indexOf(P.getComputedStyle(X).position)!==-1,Z=Q?X:X.offsetParent,W=Z.getBoundingClientRect(),ne=F.body.getBoundingClientRect();de=W.left-ne.left-Z.scrollLeft,oe=W.top-ne.top-Z.scrollTop}x.style.left=ue-de+"px",x.style.top=ve-oe+"px";var ce=P.innerWidth||Math.max(F.body.offsetWidth,F.documentElement.offsetWidth),J=P.innerHeight||Math.max(F.body.offsetHeight,F.documentElement.offsetHeight);X.appendChild(x),I.getInputField().setAttribute("aria-autocomplete","list"),I.getInputField().setAttribute("aria-owns",this.id),I.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var pe=k.options.moveOnOverlap?x.getBoundingClientRect():new DOMRect,he=k.options.paddingForScrollbar?x.scrollHeight>x.clientHeight+1:!1,fe;setTimeout(function(){fe=I.getScrollInfo()});var be=pe.bottom-J;if(be>0){var re=pe.bottom-pe.top,Ft=se.top-(se.bottom-pe.top);if(Ft-re>0)x.style.top=(ve=se.top-re-oe)+"px",_e=!1;else if(re>J){x.style.height=J-5+"px",x.style.top=(ve=se.bottom-pe.top-oe)+"px";var Dt=I.getCursor();R.from.ch!=Dt.ch&&(se=I.cursorCoords(Dt),x.style.left=(ue=se.left-de)+"px",pe=x.getBoundingClientRect())}}var ft=pe.right-ce;if(he&&(ft+=I.display.nativeBarWidth),ft>0&&(pe.right-pe.left>ce&&(x.style.width=ce-5+"px",ft-=pe.right-pe.left-ce),x.style.left=(ue=se.left-ft-de)+"px"),he)for(var Ae=x.firstChild;Ae;Ae=Ae.nextSibling)Ae.style.paddingRight=I.display.nativeBarWidth+"px";if(I.addKeyMap(this.keyMap=p(k,{moveFocus:function(At,It){O.changeActive(O.selectedHint+At,It)},setFocus:function(At){O.changeActive(At)},menuSize:function(){return O.screenAmount()},length:q.length,close:function(){k.close()},pick:function(){O.pick()},data:R})),k.options.closeOnUnfocus){var ei;I.on("blur",this.onBlur=function(){ei=setTimeout(function(){k.close()},100)}),I.on("focus",this.onFocus=function(){clearTimeout(ei)})}I.on("scroll",this.onScroll=function(){var At=I.getScrollInfo(),It=I.getWrapperElement().getBoundingClientRect();fe||(fe=I.getScrollInfo());var St=ve+fe.top-At.top,rt=St-(P.pageYOffset||(F.documentElement||F.body).scrollTop);if(_e||(rt+=x.offsetHeight),rt<=It.top||rt>=It.bottom)return k.close();x.style.top=St+"px",x.style.left=ue+fe.left-At.left+"px"}),i.on(x,"dblclick",function(At){var It=m(x,At.target||At.srcElement);It&&It.hintId!=null&&(O.changeActive(It.hintId),O.pick())}),i.on(x,"click",function(At){var It=m(x,At.target||At.srcElement);It&&It.hintId!=null&&(O.changeActive(It.hintId),k.options.completeOnSingleClick&&O.pick())}),i.on(x,"mousedown",function(){setTimeout(function(){I.focus()},20)});var $t=this.getSelectedHintRange();return($t.from!==0||$t.to!==0)&&this.scrollToActive(),i.signal(R,"select",q[this.selectedHint],x.childNodes[this.selectedHint]),!0}y.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var k=this.completion.cm.getInputField();k.removeAttribute("aria-activedescendant"),k.removeAttribute("aria-owns");var R=this.completion.cm;this.completion.options.closeOnUnfocus&&(R.off("blur",this.onBlur),R.off("focus",this.onFocus)),R.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var k=this;this.keyMap={Enter:function(){k.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(k,R){if(k>=this.data.list.length?k=R?this.data.list.length-1:0:k<0&&(k=R?0:this.data.list.length-1),this.selectedHint!=k){var O=this.hints.childNodes[this.selectedHint];O&&(O.className=O.className.replace(" "+r,""),O.removeAttribute("aria-selected")),O=this.hints.childNodes[this.selectedHint=k],O.className+=" "+r,O.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",O.id),this.scrollToActive(),i.signal(this.data,"select",this.data.list[this.selectedHint],O)}},scrollToActive:function(){var k=this.getSelectedHintRange(),R=this.hints.childNodes[k.from],O=this.hints.childNodes[k.to],I=this.hints.firstChild;R.offsetTop<this.hints.scrollTop?this.hints.scrollTop=R.offsetTop-I.offsetTop:O.offsetTop+O.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=O.offsetTop+O.offsetHeight-this.hints.clientHeight+I.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var k=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-k),to:Math.min(this.data.list.length-1,this.selectedHint+k)}}};function _(k,R){if(!k.somethingSelected())return R;for(var O=[],I=0;I<R.length;I++)R[I].supportsSelection&&O.push(R[I]);return O}function E(k,R,O,I){if(k.async)k(R,I,O);else{var F=k(R,O);F&&F.then?F.then(I):I(F)}}function C(k,R){var O=k.getHelpers(R,"hint"),I;if(O.length){var F=function(P,x,M){var q=_(P,O);function $(B){if(B==q.length)return x(null);E(q[B],P,M,function(j){j&&j.list.length>0?x(j):$(B+1)})}$(0)};return F.async=!0,F.supportsSelection=!0,F}else return(I=k.getHelper(k.getCursor(),"hintWords"))?function(P){return i.hint.fromList(P,{words:I})}:i.hint.anyword?function(P,x){return i.hint.anyword(P,x)}:function(){}}i.registerHelper("hint","auto",{resolve:C}),i.registerHelper("hint","fromList",function(k,R){var O=k.getCursor(),I=k.getTokenAt(O),F,P=i.Pos(O.line,I.start),x=O;I.start<O.ch&&/\w/.test(I.string.charAt(O.ch-I.start-1))?F=I.string.substr(0,O.ch-I.start):(F="",P=O);for(var M=[],q=0;q<R.words.length;q++){var $=R.words[q];$.slice(0,F.length)==F&&M.push($)}if(M.length)return{list:M,from:P,to:x}}),i.commands.autocomplete=i.showHint;var S={hint:i.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};i.defineOption("hintOptions",null)})})();(function(t,e){(function(i){i(Fm)})(function(i){var n="CodeMirror-lint-markers",r="CodeMirror-lint-line-";function s(x,M,q){var $=document.createElement("div");$.className="CodeMirror-lint-tooltip cm-s-"+x.options.theme,$.appendChild(q.cloneNode(!0)),x.state.lint.options.selfContain?x.getWrapperElement().appendChild($):document.body.appendChild($);function B(j){if(!$.parentNode)return i.off(document,"mousemove",B);$.style.top=Math.max(0,j.clientY-$.offsetHeight-5)+"px",$.style.left=j.clientX+5+"px"}return i.on(document,"mousemove",B),B(M),$.style.opacity!=null&&($.style.opacity=1),$}function a(x){x.parentNode&&x.parentNode.removeChild(x)}function o(x){x.parentNode&&(x.style.opacity==null&&a(x),x.style.opacity=0,setTimeout(function(){a(x)},600))}function c(x,M,q,$){var B=s(x,M,q);function j(){i.off($,"mouseout",j),B&&(o(B),B=null)}var z=setInterval(function(){if(B)for(var X=$;;X=X.parentNode){if(X&&X.nodeType==11&&(X=X.host),X==document.body)return;if(!X){j();break}}if(!B)return clearInterval(z)},400);i.on($,"mouseout",j)}function d(x,M,q){this.marked=[],M instanceof Function&&(M={getAnnotations:M}),(!M||M===!0)&&(M={}),this.options={},this.linterOptions=M.options||{};for(var $ in p)this.options[$]=p[$];for(var $ in M)p.hasOwnProperty($)?M[$]!=null&&(this.options[$]=M[$]):M.options||(this.linterOptions[$]=M[$]);this.timeout=null,this.hasGutter=q,this.onMouseOver=function(B){P(x,B)},this.waitingFor=0}var p={highlightLines:!1,tooltips:!0,delay:500,lintOnChange:!0,getAnnotations:null,async:!1,selfContain:null,formatAnnotation:null,onUpdateLinting:null};function m(x){var M=x.state.lint;M.hasGutter&&x.clearGutter(n),M.options.highlightLines&&y(x);for(var q=0;q<M.marked.length;++q)M.marked[q].clear();M.marked.length=0}function y(x){x.eachLine(function(M){var q=M.wrapClass&&/\bCodeMirror-lint-line-\w+\b/.exec(M.wrapClass);q&&x.removeLineClass(M,"wrap",q[0])})}function _(x,M,q,$,B){var j=document.createElement("div"),z=j;return j.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+q,$&&(z=j.appendChild(document.createElement("div")),z.className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),B!=!1&&i.on(z,"mouseover",function(X){c(x,X,M,z)}),j}function E(x,M){return x=="error"?x:M}function C(x){for(var M=[],q=0;q<x.length;++q){var $=x[q],B=$.from.line;(M[B]||(M[B]=[])).push($)}return M}function S(x){var M=x.severity;M||(M="error");var q=document.createElement("div");return q.className="CodeMirror-lint-message CodeMirror-lint-message-"+M,typeof x.messageHTML<"u"?q.innerHTML=x.messageHTML:q.appendChild(document.createTextNode(x.message)),q}function k(x,M){var q=x.state.lint,$=++q.waitingFor;function B(){$=-1,x.off("change",B)}x.on("change",B),M(x.getValue(),function(j,z){x.off("change",B),q.waitingFor==$&&(z&&j instanceof i&&(j=z),x.operation(function(){O(x,j)}))},q.linterOptions,x)}function R(x){var M=x.state.lint;if(M){var q=M.options,$=q.getAnnotations||x.getHelper(i.Pos(0,0),"lint");if($)if(q.async||$.async)k(x,$);else{var B=$(x.getValue(),M.linterOptions,x);if(!B)return;B.then?B.then(function(j){x.operation(function(){O(x,j)})}):x.operation(function(){O(x,B)})}}}function O(x,M){var q=x.state.lint;if(q){var $=q.options;m(x);for(var B=C(M),j=0;j<B.length;++j){var z=B[j];if(z){var X=[];z=z.filter(function(oe){return X.indexOf(oe.message)>-1?!1:X.push(oe.message)});for(var se=null,ue=q.hasGutter&&document.createDocumentFragment(),ve=0;ve<z.length;++ve){var _e=z[ve],de=_e.severity;de||(de="error"),se=E(se,de),$.formatAnnotation&&(_e=$.formatAnnotation(_e)),q.hasGutter&&ue.appendChild(S(_e)),_e.to&&q.marked.push(x.markText(_e.from,_e.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+de,__annotation:_e}))}q.hasGutter&&x.setGutterMarker(j,n,_(x,ue,se,B[j].length>1,$.tooltips)),$.highlightLines&&x.addLineClass(j,"wrap",r+se)}}$.onUpdateLinting&&$.onUpdateLinting(M,B,x)}}function I(x){var M=x.state.lint;M&&(clearTimeout(M.timeout),M.timeout=setTimeout(function(){R(x)},M.options.delay))}function F(x,M,q){for(var $=q.target||q.srcElement,B=document.createDocumentFragment(),j=0;j<M.length;j++){var z=M[j];B.appendChild(S(z))}c(x,q,B,$)}function P(x,M){var q=M.target||M.srcElement;if(/\bCodeMirror-lint-mark-/.test(q.className)){for(var $=q.getBoundingClientRect(),B=($.left+$.right)/2,j=($.top+$.bottom)/2,z=x.findMarksAt(x.coordsChar({left:B,top:j},"client")),X=[],se=0;se<z.length;++se){var ue=z[se].__annotation;ue&&X.push(ue)}X.length&&F(x,X,M)}}i.defineOption("lint",!1,function(x,M,q){if(q&&q!=i.Init&&(m(x),x.state.lint.options.lintOnChange!==!1&&x.off("change",I),i.off(x.getWrapperElement(),"mouseover",x.state.lint.onMouseOver),clearTimeout(x.state.lint.timeout),delete x.state.lint),M){for(var $=x.getOption("gutters"),B=!1,j=0;j<$.length;++j)$[j]==n&&(B=!0);var z=x.state.lint=new d(x,M,B);z.options.lintOnChange&&x.on("change",I),z.options.tooltips!=!1&&z.options.tooltips!="gutter"&&i.on(x.getWrapperElement(),"mouseover",z.onMouseOver),R(x)}}),i.defineExtension("performLint",function(){R(this)})})})();(function(t,e){(function(i){i(Fm)})(function(i){var n="CodeMirror-activeline",r="CodeMirror-activeline-background",s="CodeMirror-activeline-gutter";i.defineOption("styleActiveLine",!1,function(p,m,y){var _=y==i.Init?!1:y;m!=_&&(_&&(p.off("beforeSelectionChange",d),a(p),delete p.state.activeLines),m&&(p.state.activeLines=[],c(p,p.listSelections()),p.on("beforeSelectionChange",d)))});function a(p){for(var m=0;m<p.state.activeLines.length;m++)p.removeLineClass(p.state.activeLines[m],"wrap",n),p.removeLineClass(p.state.activeLines[m],"background",r),p.removeLineClass(p.state.activeLines[m],"gutter",s)}function o(p,m){if(p.length!=m.length)return!1;for(var y=0;y<p.length;y++)if(p[y]!=m[y])return!1;return!0}function c(p,m){for(var y=[],_=0;_<m.length;_++){var E=m[_],C=p.getOption("styleActiveLine");if(!(typeof C=="object"&&C.nonEmpty?E.anchor.line!=E.head.line:!E.empty())){var S=p.getLineHandleVisualStart(E.head.line);y[y.length-1]!=S&&y.push(S)}}o(p.state.activeLines,y)||p.operation(function(){a(p);for(var k=0;k<y.length;k++)p.addLineClass(y[k],"wrap",n),p.addLineClass(y[k],"background",r),p.addLineClass(y[k],"gutter",s);p.state.activeLines=y})}function d(p,m){c(p,m.ranges)}})})();(function(t,e){(function(i){i(Fm)})(function(i){var n={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},r=i.Pos;i.defineOption("autoCloseBrackets",!1,function(k,R,O){O&&O!=i.Init&&(k.removeKeyMap(a),k.state.closeBrackets=null),R&&(o(s(R,"pairs")),k.state.closeBrackets=R,k.addKeyMap(a))});function s(k,R){return R=="pairs"&&typeof k=="string"?k:typeof k=="object"&&k[R]!=null?k[R]:n[R]}var a={Backspace:p,Enter:m};function o(k){for(var R=0;R<k.length;R++){var O=k.charAt(R),I="'"+O+"'";a[I]||(a[I]=c(O))}}o(n.pairs+"`");function c(k){return function(R){return E(R,k)}}function d(k){var R=k.state.closeBrackets;if(!R||R.override)return R;var O=k.getModeAt(k.getCursor());return O.closeBrackets||R}function p(k){var R=d(k);if(!R||k.getOption("disableInput"))return i.Pass;for(var O=s(R,"pairs"),I=k.listSelections(),F=0;F<I.length;F++){if(!I[F].empty())return i.Pass;var P=C(k,I[F].head);if(!P||O.indexOf(P)%2!=0)return i.Pass}for(var F=I.length-1;F>=0;F--){var x=I[F].head;k.replaceRange("",r(x.line,x.ch-1),r(x.line,x.ch+1),"+delete")}}function m(k){var R=d(k),O=R&&s(R,"explode");if(!O||k.getOption("disableInput"))return i.Pass;for(var I=k.listSelections(),F=0;F<I.length;F++){if(!I[F].empty())return i.Pass;var P=C(k,I[F].head);if(!P||O.indexOf(P)%2!=0)return i.Pass}k.operation(function(){var x=k.lineSeparator()||`
`;k.replaceSelection(x+x,null),y(k,-1),I=k.listSelections();for(var M=0;M<I.length;M++){var q=I[M].head.line;k.indentLine(q,null,!0),k.indentLine(q+1,null,!0)}})}function y(k,R){for(var O=[],I=k.listSelections(),F=0,P=0;P<I.length;P++){var x=I[P];x.head==k.getCursor()&&(F=P);var M=x.head.ch||R>0?{line:x.head.line,ch:x.head.ch+R}:{line:x.head.line-1};O.push({anchor:M,head:M})}k.setSelections(O,F)}function _(k){var R=i.cmpPos(k.anchor,k.head)>0;return{anchor:new r(k.anchor.line,k.anchor.ch+(R?-1:1)),head:new r(k.head.line,k.head.ch+(R?1:-1))}}function E(k,R){var O=d(k);if(!O||k.getOption("disableInput"))return i.Pass;var I=s(O,"pairs"),F=I.indexOf(R);if(F==-1)return i.Pass;for(var P=s(O,"closeBefore"),x=s(O,"triples"),M=I.charAt(F+1)==R,q=k.listSelections(),$=F%2==0,B,j=0;j<q.length;j++){var z=q[j],X=z.head,se,ue=k.getRange(X,r(X.line,X.ch+1));if($&&!z.empty())se="surround";else if((M||!$)&&ue==R)M&&S(k,X)?se="both":x.indexOf(R)>=0&&k.getRange(X,r(X.line,X.ch+3))==R+R+R?se="skipThree":se="skip";else if(M&&X.ch>1&&x.indexOf(R)>=0&&k.getRange(r(X.line,X.ch-2),X)==R+R){if(X.ch>2&&/\bstring/.test(k.getTokenTypeAt(r(X.line,X.ch-2))))return i.Pass;se="addFour"}else if(M){var ve=X.ch==0?" ":k.getRange(r(X.line,X.ch-1),X);if(!i.isWordChar(ue)&&ve!=R&&!i.isWordChar(ve))se="both";else return i.Pass}else if($&&(ue.length===0||/\s/.test(ue)||P.indexOf(ue)>-1))se="both";else return i.Pass;if(!B)B=se;else if(B!=se)return i.Pass}var _e=F%2?I.charAt(F-1):R,de=F%2?R:I.charAt(F+1);k.operation(function(){if(B=="skip")y(k,1);else if(B=="skipThree")y(k,3);else if(B=="surround"){for(var oe=k.getSelections(),Q=0;Q<oe.length;Q++)oe[Q]=_e+oe[Q]+de;k.replaceSelections(oe,"around"),oe=k.listSelections().slice();for(var Q=0;Q<oe.length;Q++)oe[Q]=_(oe[Q]);k.setSelections(oe)}else B=="both"?(k.replaceSelection(_e+de,null),k.triggerElectric(_e+de),y(k,-1)):B=="addFour"&&(k.replaceSelection(_e+_e+_e+_e,"before"),y(k,1))})}function C(k,R){var O=k.getRange(r(R.line,R.ch-1),r(R.line,R.ch+1));return O.length==2?O:null}function S(k,R){var O=k.getTokenAt(r(R.line,R.ch+1));return/\bstring/.test(O.type)&&O.start==R.ch&&(R.ch==0||!/\bstring/.test(k.getTokenTypeAt(R)))}})})();window.CodeMirror=P6;window.Decimal=di;window.Vue=Sn;String.prototype.includes||(String.prototype.includes=function(t,e){return typeof e!="number"&&(e=0),e+t.length>this.length?!1:this.indexOf(t,e)!==-1});Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value(t,e){if(this===null)throw new TypeError('"this" is null or not defined');const i=Object(this),n=i.length>>>0;if(n===0)return!1;const r=e|0;let s=Math.max(r>=0?r:n-Math.abs(r),0);function a(o,c){return o===c||typeof o=="number"&&typeof c=="number"&&isNaN(o)&&isNaN(c)}for(;s<n;){if(a(i[s],t))return!0;s++}return!1}});Math.log10||(Math.log10=Math.log10||function(t){return Math.log(t)*Math.LOG10E});Math.log2||(Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E});window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(let i=0;i<this.length;i++)t.call(e,this[i],i,this)});Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value(t){if(this===null)throw new TypeError('"this" is null or not defined');const e=Object(this),i=e.length>>>0;if(typeof t!="function")throw new TypeError("predicate must be a function");const n=arguments[1];let r=0;for(;r<i;){const s=e[r];if(t.call(n,s,r,e))return s;r++}}});Array.max=function(t){return Math.max(...t)};Array.min=function(t){return Math.min(...t)};Object.invert=function(t){const e={},i=Object.keys(t);for(let n=0,r=i.length;n<r;n++)e[t[i[n]]]=i[n];return e};typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(e,i){if(e===null)throw new TypeError("Cannot convert undefined or null to object");const n=Object(e);for(let r=1;r<arguments.length;r++){const s=arguments[r];if(s!==null)for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])}return n},writable:!0,configurable:!0});function qp(t){return typeof t=="number"}function ux(t){return typeof t=="string"}function z0(t){return typeof t=="function"}function nm(t){return t instanceof Decimal}Array.prototype.distinct=function(){return this.filter((t,e,i)=>i.indexOf(t)===e)};Math.wrap=function(t,e,i){const n=i-e+1,r=(t-e)%n;return r<0?i+1+r:e+r};Math.clamp=function(t,e,i){return Math.clampMax(Math.clampMin(t,e),i)};Math.clampMin=function(t,e){return Math.max(t,e)};Math.clampMax=function(t,e){return Math.min(t,e)};Array.prototype.nextSiblingIndex=function(t){const e=this.indexOf(t);if(e===-1)throw"Current item is not in array";return e===this.length-1?0:e+1};Array.prototype.nextSibling=function(t){return this[this.nextSiblingIndex(t)]};Array.prototype.previousSiblingIndex=function(t){const e=this.indexOf(t);if(e===-1)throw"Current item is not in array";return e===0?this.length-1:e-1};Array.prototype.previousSibling=function(t){return this[this.previousSiblingIndex(t)]};Decimal.sumReducer=function(t,e){return Decimal.add(t,e)};Decimal.prodReducer=function(t,e){return Decimal.mul(t,e)};Number.sumReducer=function(t,e){return t+e};Number.prodReducer=function(t,e){return t*e};Decimal.maxReducer=function(t,e){return Decimal.max(t,e)};Decimal.prototype.copyFrom=function(t){if(!(t instanceof Decimal)&&!(t instanceof DecimalCurrency))throw"Copy value is not Decimal or DecimalCurrency";this.mantissa=t.mantissa,this.exponent=t.exponent};window.copyToClipboard=function(){const t=document.createElement("textarea");return document.body.appendChild(t),t.style.position="absolute",t.style.left="-9999999px",t.setAttribute("readonly",""),function(e){try{return t.value=e,t.select(),document.execCommand("copy")}catch(i){return console.log(i),!1}}}();window.safeCall=function(e){e&&e()};String.prototype.capitalize=function(){return this.toLowerCase().replace(/^\w/u,t=>t.toUpperCase())};String.prototype.splice=function(t,e,i){return this.slice(0,t)+i+this.slice(t+Math.abs(e))};Array.range=function(t,e){return[...Array(e).keys()].map(i=>i+t)};Array.repeat=function(t,e){return Array(e).fill(t)};Array.prototype.first=function(t){if(t===void 0)return this.length>0?this[0]:void 0;if(typeof t!="function")throw"Predicate must be a function";for(let e=0;e<this.length;e++)if(t(this[e])===!0)return this[e];throw"Array doesn't contain a matching item"};Array.prototype.last=function(t){if(t===void 0)return this.length>0?this[this.length-1]:void 0;if(typeof t!="function")throw"Predicate must be a function";for(let e=this.length-1;e>=0;e--)if(t(this[e])===!0)return this[e];throw"Array doesn't contain a matching item"};Array.prototype.mapToObject=function(t,e){if(typeof t!="function"||typeof e!="function")throw"keyFun and valueFun must be functions";const i={};for(let n=0;n<this.length;++n)i[t(this[n],n)]=e(this[n],n);return i};Array.dimensionTiers=Array.range(1,8);Array.prototype.sum=function(){return this.length===0?0:this.reduce(Number.sumReducer)};Array.prototype.max=function(){return this.length===0?0:this.reduce((t,e)=>Math.max(t,e))};Array.prototype.min=function(){return this.length===0?0:this.reduce((t,e)=>Math.min(t,e))};Array.prototype.countWhere=function(t){let e=0;for(const i of this)t(i)&&++e;return e};Decimal.prototype.clampMaxExponent=function(t){return this.exponent>=t?Decimal.fromMantissaExponent_noNormalize(1,t):this};Number.prototype.toDecimal=function(){return new Decimal(this.valueOf())};Math.log4=Math.log(4);Array.prototype.randomElement=function(){return this[Math.floor(Math.random()*this.length)]};Decimal.prototype.valueOf=()=>{throw new Error("Implicit conversion from Decimal to number")};Set.prototype.countWhere=function(t){let e=0;for(const i of this)t(i)&&++e;return e};Set.prototype.find=function(t){for(const e of this)if(t(e))return e};Set.prototype.some=function(t){for(const e of this)if(t(e))return!0;return!1};Set.prototype.every=function(t){for(const e of this)if(!t(e))return!1;return!0};Array.prototype.compact=function(){return this.filter(t=>t!=null)};Array.prototype.toBitmask=function(){return this.reduce((t,e)=>t|1<<e,0)};Set.prototype.toBitmask=function(){let t=0;for(const e of this)t|=1<<e;return t};Array.fromBitmask=function(t){const e=[];let i=0;for(;t!==0;)t&1&&e.push(i),t>>=1,++i;return e};String.isWhiteSpace=function(t){return t&&!t.trim()};Decimal.isFinite=function(t){return nm(t)?(isFinite(t.m)||isFinite(t.e))&&!(t.e>=9e15):isFinite(t)};window.NotImplementedError=class extends Error{constructor(){super("The method is not implemented."),this.name="NotImplementedError"}};window.GlobalErrorHandler={handled:!1,cleanStart:!1,onerror(t){if(!this.handled){if(this.handled=!0,!this.cleanStart){document.getElementById("loading").style.display="none",requestAnimationFrame(()=>this.crash(t));return}this.stopGame(),this.crash(t)}},stopGame(){GameKeyboard.disable(),GameIntervals.stop();function t(e,i){let n=e(()=>{},9999);for(;n--;)i(n)}t(setInterval,clearInterval),t(setTimeout,clearTimeout),t(requestAnimationFrame,cancelAnimationFrame)},crash(t){window.GameUI!==void 0&&GameUI.initialized&&Modal.message.show(`${t}<br>Check the console for more details`,{},3);debugger}};window.onerror=(t,e)=>{e.endsWith(".js")&&GlobalErrorHandler.onerror(t)};window.TimeSpan=class oa{static fromYears(e){return new oa(e*31536e6)}static fromDays(e){return new oa(e*864e5)}static fromHours(e){return new oa(e*36e5)}static fromMinutes(e){return new oa(e*6e4)}static fromSeconds(e){return new oa(e*1e3)}static fromMilliseconds(e){return new oa(e)}constructor(e){Eh.isNumber(e,"Value 'ms' must be a number"),this._ms=e}copyFrom(e){Eh.isTimeSpan(e),this._ms=e._ms}setFrom(e){Eh.isNumber(e),this._ms=e}get years(){return Math.floor(this.totalYears)}get days(){return Math.floor(this.totalDays%365)}get hours(){return Math.floor(this.totalHours%24)}get minutes(){return Math.floor(this.totalMinutes%60)}get seconds(){return Math.floor(this.totalSeconds%60)}get milliseconds(){return Math.floor(this.totalMilliseconds%1e3)}get totalYears(){return this._ms/31536e6}get totalDays(){return this._ms/864e5}get totalHours(){return this._ms/36e5}get totalMinutes(){return this._ms/6e4}get totalSeconds(){return this._ms/1e3}get totalMilliseconds(){return this._ms}plus(e){return Eh.isTimeSpan(e),new oa(this._ms+e._ms)}minus(e){return Eh.isTimeSpan(e),new oa(this._ms-e._ms)}times(e){return Eh.isNumber(e),new oa(this._ms*e)}dividedBy(e){return Eh.isNumber(e),new oa(this._ms/e)}toString(){return this.years>1e6?`${format(this.totalYears,3,0)} years`:this.totalSeconds>=10?this.toStringNoDecimals():this.toStringShort()}toStringNoDecimals(){const e=[];function i(r,s){r!==0&&n(r,s)}function n(r,s){e.push(r===1?`${formatInt(r)} ${s}`:`${formatInt(r)} ${s}s`)}return i(this.years,"year"),i(this.days,"day"),i(this.hours,"hour"),i(this.minutes,"minute"),i(this.seconds,"second"),e.length===0?`${formatInt(0)} seconds`:[e.slice(0,-1).join(", "),e.slice(-1)[0]].join(e.length<2?"":" and ")}toStringShort(e=!0,i=!1,n=!1){if(format(0)==="END"&&!n)return"END";const r=this.totalSeconds;if(r>5e-7&&r<.001)return`${format(1e3*r,0,3,n)} ms`;if(r<1)return`${format(1e3*r,0,0,n)} ms`;if(r<10)return`${format(r,0,3,n)} seconds`;if(r<60)return`${format(r,0,2,n)} seconds`;if(this.totalHours<100||i&&this.totalHours<1e3){if(e&&!Notations.current.isPainful){const o=a(this.seconds,this.milliseconds);return Math.floor(this.totalHours)===0?`${s(this.minutes)}:${o}`:`${s(Math.floor(this.totalHours))}:${s(this.minutes)}:${o}`}if(this.totalMinutes<60)return`${format(this.totalMinutes,0,2,n)} minutes`;if(this.totalHours<24)return`${format(this.totalHours,0,2,n)} hours`}if(this.totalDays<500)return`${i?this.totalDays.toFixed(2):format(this.totalDays,0,2,n)} days`;return`${i?this.totalYears.toFixed(3):format(this.totalYears,3,2,n)} years`;function s(o){const c=o.toString();return c.length===1?`0${c}`:c}function a(o,c){const d=s(o);return i?`${d}.${Math.floor(c/100)}`:d}}toTimeEstimate(){const e=this.totalSeconds;return e<1?`< ${formatInt(1)} second`:e>86400*365.25?`> ${formatInt(1)} year`:this.toStringShort()}static get zero(){return new oa(0)}static get maxValue(){return new oa(Number.MAX_VALUE)}static get minValue(){return new oa(Number.MIN_VALUE)}};const Eh={isDefined(t,e){if(t===void 0)throw e||"Value is defined"},isNumber(t,e){if(typeof t!="number")throw e||"Value is not a number"},isTimeSpan(t,e){if(!(t instanceof TimeSpan))throw e||"Value is not a TimeSpan"}},l8="modulepreload",c8=function(t,e){return new URL(t,e).href},dx={},u8=function(e,i,n){let r=Promise.resolve();if(i&&i.length>0){const s=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.all(i.map(c=>{if(c=c8(c,n),c in dx)return;dx[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(!!n)for(let _=s.length-1;_>=0;_--){const E=s[_];if(E.href===c&&(!d||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${p}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":l8,d||(y.as="script"),y.crossOrigin="",y.href=c,o&&y.setAttribute("nonce",o),document.head.appendChild(y),d)return new Promise((_,E)=>{y.addEventListener("load",_),y.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}return r.then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};var hG={exports:{}};/*
 * [js-sha512]{@link https://github.com/emn178/js-sha512}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",i="finalize already called",n=typeof window=="object",r=n?window:{};r.JS_SHA512_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",a=!r.JS_SHA512_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?r=Si:s&&(r=self);var o=!r.JS_SHA512_NO_COMMON_JS&&!0&&t.exports,c=!r.JS_SHA512_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",d="0123456789abcdef".split(""),p=[-2147483648,8388608,32768,128],m=[24,16,8,0],y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],_=["hex","array","digest","arrayBuffer"],E=[];(r.JS_SHA512_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(P){return Object.prototype.toString.call(P)==="[object Array]"}),c&&(r.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(P){return typeof P=="object"&&P.buffer&&P.buffer.constructor===ArrayBuffer});var C=function(P,x){return function(M){return new O(x,!0).update(M)[P]()}},S=function(P){var x=C("hex",P);x.create=function(){return new O(P)},x.update=function($){return x.create().update($)};for(var M=0;M<_.length;++M){var q=_[M];x[q]=C(q,P)}return x},k=function(P,x){return function(M,q){return new I(M,x,!0).update(q)[P]()}},R=function(P){var x=k("hex",P);x.create=function($){return new I($,P)},x.update=function($,B){return x.create($).update(B)};for(var M=0;M<_.length;++M){var q=_[M];x[q]=k(q,P)}return x};function O(P,x){x?(E[0]=E[1]=E[2]=E[3]=E[4]=E[5]=E[6]=E[7]=E[8]=E[9]=E[10]=E[11]=E[12]=E[13]=E[14]=E[15]=E[16]=E[17]=E[18]=E[19]=E[20]=E[21]=E[22]=E[23]=E[24]=E[25]=E[26]=E[27]=E[28]=E[29]=E[30]=E[31]=E[32]=0,this.blocks=E):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P==384?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):P==256?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):P==224?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=P,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}O.prototype.update=function(P){if(this.finalized)throw new Error(i);var x,M=typeof P;if(M!=="string"){if(M==="object"){if(P===null)throw new Error(e);if(c&&P.constructor===ArrayBuffer)P=new Uint8Array(P);else if(!Array.isArray(P)&&(!c||!ArrayBuffer.isView(P)))throw new Error(e)}else throw new Error(e);x=!0}for(var q,$=0,B,j=P.length,z=this.blocks;$<j;){if(this.hashed&&(this.hashed=!1,z[0]=this.block,z[1]=z[2]=z[3]=z[4]=z[5]=z[6]=z[7]=z[8]=z[9]=z[10]=z[11]=z[12]=z[13]=z[14]=z[15]=z[16]=z[17]=z[18]=z[19]=z[20]=z[21]=z[22]=z[23]=z[24]=z[25]=z[26]=z[27]=z[28]=z[29]=z[30]=z[31]=z[32]=0),x)for(B=this.start;$<j&&B<128;++$)z[B>>2]|=P[$]<<m[B++&3];else for(B=this.start;$<j&&B<128;++$)q=P.charCodeAt($),q<128?z[B>>2]|=q<<m[B++&3]:q<2048?(z[B>>2]|=(192|q>>6)<<m[B++&3],z[B>>2]|=(128|q&63)<<m[B++&3]):q<55296||q>=57344?(z[B>>2]|=(224|q>>12)<<m[B++&3],z[B>>2]|=(128|q>>6&63)<<m[B++&3],z[B>>2]|=(128|q&63)<<m[B++&3]):(q=65536+((q&1023)<<10|P.charCodeAt(++$)&1023),z[B>>2]|=(240|q>>18)<<m[B++&3],z[B>>2]|=(128|q>>12&63)<<m[B++&3],z[B>>2]|=(128|q>>6&63)<<m[B++&3],z[B>>2]|=(128|q&63)<<m[B++&3]);this.lastByteIndex=B,this.bytes+=B-this.start,B>=128?(this.block=z[32],this.start=B-128,this.hash(),this.hashed=!0):this.start=B}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},O.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var P=this.blocks,x=this.lastByteIndex;P[32]=this.block,P[x>>2]|=p[x&3],this.block=P[32],x>=112&&(this.hashed||this.hash(),P[0]=this.block,P[1]=P[2]=P[3]=P[4]=P[5]=P[6]=P[7]=P[8]=P[9]=P[10]=P[11]=P[12]=P[13]=P[14]=P[15]=P[16]=P[17]=P[18]=P[19]=P[20]=P[21]=P[22]=P[23]=P[24]=P[25]=P[26]=P[27]=P[28]=P[29]=P[30]=P[31]=P[32]=0),P[30]=this.hBytes<<3|this.bytes>>>29,P[31]=this.bytes<<3,this.hash()}},O.prototype.hash=function(){var P=this.h0h,x=this.h0l,M=this.h1h,q=this.h1l,$=this.h2h,B=this.h2l,j=this.h3h,z=this.h3l,X=this.h4h,se=this.h4l,ue=this.h5h,ve=this.h5l,_e=this.h6h,de=this.h6l,oe=this.h7h,Q=this.h7l,Z=this.blocks,W,ne,ce,J,pe,he,fe,be,re,Ft,Dt,ft,Ae,ei,$t,At,It,St,rt,De,qe,Pt,ot,Ei,yi;for(W=32;W<160;W+=2)De=Z[W-30],qe=Z[W-29],ne=(De>>>1|qe<<31)^(De>>>8|qe<<24)^De>>>7,ce=(qe>>>1|De<<31)^(qe>>>8|De<<24)^(qe>>>7|De<<25),De=Z[W-4],qe=Z[W-3],J=(De>>>19|qe<<13)^(qe>>>29|De<<3)^De>>>6,pe=(qe>>>19|De<<13)^(De>>>29|qe<<3)^(qe>>>6|De<<26),De=Z[W-32],qe=Z[W-31],Pt=Z[W-14],ot=Z[W-13],he=(ot&65535)+(qe&65535)+(ce&65535)+(pe&65535),fe=(ot>>>16)+(qe>>>16)+(ce>>>16)+(pe>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(ne&65535)+(J&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(ne>>>16)+(J>>>16)+(be>>>16),Z[W]=re<<16|be&65535,Z[W+1]=fe<<16|he&65535;var Ti=P,wi=x,hi=M,Ki=q,xt=$,zt=B,Ke=j,Xt=z,dt=X,Ot=se,ge=ue,Oe=ve,Be=_e,ct=de,it=oe,at=Q;for(At=hi&xt,It=Ki&zt,W=0;W<160;W+=8)ne=(Ti>>>28|wi<<4)^(wi>>>2|Ti<<30)^(wi>>>7|Ti<<25),ce=(wi>>>28|Ti<<4)^(Ti>>>2|wi<<30)^(Ti>>>7|wi<<25),J=(dt>>>14|Ot<<18)^(dt>>>18|Ot<<14)^(Ot>>>9|dt<<23),pe=(Ot>>>14|dt<<18)^(Ot>>>18|dt<<14)^(dt>>>9|Ot<<23),Ft=Ti&hi,Dt=wi&Ki,St=Ft^Ti&xt^At,rt=Dt^wi&zt^It,Ei=dt&ge^~dt&Be,yi=Ot&Oe^~Ot&ct,De=Z[W],qe=Z[W+1],Pt=y[W],ot=y[W+1],he=(ot&65535)+(qe&65535)+(yi&65535)+(pe&65535)+(at&65535),fe=(ot>>>16)+(qe>>>16)+(yi>>>16)+(pe>>>16)+(at>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(Ei&65535)+(J&65535)+(it&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(Ei>>>16)+(J>>>16)+(it>>>16)+(be>>>16),De=re<<16|be&65535,qe=fe<<16|he&65535,he=(rt&65535)+(ce&65535),fe=(rt>>>16)+(ce>>>16)+(he>>>16),be=(St&65535)+(ne&65535)+(fe>>>16),re=(St>>>16)+(ne>>>16)+(be>>>16),Pt=re<<16|be&65535,ot=fe<<16|he&65535,he=(Xt&65535)+(qe&65535),fe=(Xt>>>16)+(qe>>>16)+(he>>>16),be=(Ke&65535)+(De&65535)+(fe>>>16),re=(Ke>>>16)+(De>>>16)+(be>>>16),it=re<<16|be&65535,at=fe<<16|he&65535,he=(ot&65535)+(qe&65535),fe=(ot>>>16)+(qe>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(be>>>16),Ke=re<<16|be&65535,Xt=fe<<16|he&65535,ne=(Ke>>>28|Xt<<4)^(Xt>>>2|Ke<<30)^(Xt>>>7|Ke<<25),ce=(Xt>>>28|Ke<<4)^(Ke>>>2|Xt<<30)^(Ke>>>7|Xt<<25),J=(it>>>14|at<<18)^(it>>>18|at<<14)^(at>>>9|it<<23),pe=(at>>>14|it<<18)^(at>>>18|it<<14)^(it>>>9|at<<23),ft=Ke&Ti,Ae=Xt&wi,St=ft^Ke&hi^Ft,rt=Ae^Xt&Ki^Dt,Ei=it&dt^~it&ge,yi=at&Ot^~at&Oe,De=Z[W+2],qe=Z[W+3],Pt=y[W+2],ot=y[W+3],he=(ot&65535)+(qe&65535)+(yi&65535)+(pe&65535)+(ct&65535),fe=(ot>>>16)+(qe>>>16)+(yi>>>16)+(pe>>>16)+(ct>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(Ei&65535)+(J&65535)+(Be&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(Ei>>>16)+(J>>>16)+(Be>>>16)+(be>>>16),De=re<<16|be&65535,qe=fe<<16|he&65535,he=(rt&65535)+(ce&65535),fe=(rt>>>16)+(ce>>>16)+(he>>>16),be=(St&65535)+(ne&65535)+(fe>>>16),re=(St>>>16)+(ne>>>16)+(be>>>16),Pt=re<<16|be&65535,ot=fe<<16|he&65535,he=(zt&65535)+(qe&65535),fe=(zt>>>16)+(qe>>>16)+(he>>>16),be=(xt&65535)+(De&65535)+(fe>>>16),re=(xt>>>16)+(De>>>16)+(be>>>16),Be=re<<16|be&65535,ct=fe<<16|he&65535,he=(ot&65535)+(qe&65535),fe=(ot>>>16)+(qe>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(be>>>16),xt=re<<16|be&65535,zt=fe<<16|he&65535,ne=(xt>>>28|zt<<4)^(zt>>>2|xt<<30)^(zt>>>7|xt<<25),ce=(zt>>>28|xt<<4)^(xt>>>2|zt<<30)^(xt>>>7|zt<<25),J=(Be>>>14|ct<<18)^(Be>>>18|ct<<14)^(ct>>>9|Be<<23),pe=(ct>>>14|Be<<18)^(ct>>>18|Be<<14)^(Be>>>9|ct<<23),ei=xt&Ke,$t=zt&Xt,St=ei^xt&Ti^ft,rt=$t^zt&wi^Ae,Ei=Be&it^~Be&dt,yi=ct&at^~ct&Ot,De=Z[W+4],qe=Z[W+5],Pt=y[W+4],ot=y[W+5],he=(ot&65535)+(qe&65535)+(yi&65535)+(pe&65535)+(Oe&65535),fe=(ot>>>16)+(qe>>>16)+(yi>>>16)+(pe>>>16)+(Oe>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(Ei&65535)+(J&65535)+(ge&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(Ei>>>16)+(J>>>16)+(ge>>>16)+(be>>>16),De=re<<16|be&65535,qe=fe<<16|he&65535,he=(rt&65535)+(ce&65535),fe=(rt>>>16)+(ce>>>16)+(he>>>16),be=(St&65535)+(ne&65535)+(fe>>>16),re=(St>>>16)+(ne>>>16)+(be>>>16),Pt=re<<16|be&65535,ot=fe<<16|he&65535,he=(Ki&65535)+(qe&65535),fe=(Ki>>>16)+(qe>>>16)+(he>>>16),be=(hi&65535)+(De&65535)+(fe>>>16),re=(hi>>>16)+(De>>>16)+(be>>>16),ge=re<<16|be&65535,Oe=fe<<16|he&65535,he=(ot&65535)+(qe&65535),fe=(ot>>>16)+(qe>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(be>>>16),hi=re<<16|be&65535,Ki=fe<<16|he&65535,ne=(hi>>>28|Ki<<4)^(Ki>>>2|hi<<30)^(Ki>>>7|hi<<25),ce=(Ki>>>28|hi<<4)^(hi>>>2|Ki<<30)^(hi>>>7|Ki<<25),J=(ge>>>14|Oe<<18)^(ge>>>18|Oe<<14)^(Oe>>>9|ge<<23),pe=(Oe>>>14|ge<<18)^(Oe>>>18|ge<<14)^(ge>>>9|Oe<<23),At=hi&xt,It=Ki&zt,St=At^hi&Ke^ei,rt=It^Ki&Xt^$t,Ei=ge&Be^~ge&it,yi=Oe&ct^~Oe&at,De=Z[W+6],qe=Z[W+7],Pt=y[W+6],ot=y[W+7],he=(ot&65535)+(qe&65535)+(yi&65535)+(pe&65535)+(Ot&65535),fe=(ot>>>16)+(qe>>>16)+(yi>>>16)+(pe>>>16)+(Ot>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(Ei&65535)+(J&65535)+(dt&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(Ei>>>16)+(J>>>16)+(dt>>>16)+(be>>>16),De=re<<16|be&65535,qe=fe<<16|he&65535,he=(rt&65535)+(ce&65535),fe=(rt>>>16)+(ce>>>16)+(he>>>16),be=(St&65535)+(ne&65535)+(fe>>>16),re=(St>>>16)+(ne>>>16)+(be>>>16),Pt=re<<16|be&65535,ot=fe<<16|he&65535,he=(wi&65535)+(qe&65535),fe=(wi>>>16)+(qe>>>16)+(he>>>16),be=(Ti&65535)+(De&65535)+(fe>>>16),re=(Ti>>>16)+(De>>>16)+(be>>>16),dt=re<<16|be&65535,Ot=fe<<16|he&65535,he=(ot&65535)+(qe&65535),fe=(ot>>>16)+(qe>>>16)+(he>>>16),be=(Pt&65535)+(De&65535)+(fe>>>16),re=(Pt>>>16)+(De>>>16)+(be>>>16),Ti=re<<16|be&65535,wi=fe<<16|he&65535;he=(x&65535)+(wi&65535),fe=(x>>>16)+(wi>>>16)+(he>>>16),be=(P&65535)+(Ti&65535)+(fe>>>16),re=(P>>>16)+(Ti>>>16)+(be>>>16),this.h0h=re<<16|be&65535,this.h0l=fe<<16|he&65535,he=(q&65535)+(Ki&65535),fe=(q>>>16)+(Ki>>>16)+(he>>>16),be=(M&65535)+(hi&65535)+(fe>>>16),re=(M>>>16)+(hi>>>16)+(be>>>16),this.h1h=re<<16|be&65535,this.h1l=fe<<16|he&65535,he=(B&65535)+(zt&65535),fe=(B>>>16)+(zt>>>16)+(he>>>16),be=($&65535)+(xt&65535)+(fe>>>16),re=($>>>16)+(xt>>>16)+(be>>>16),this.h2h=re<<16|be&65535,this.h2l=fe<<16|he&65535,he=(z&65535)+(Xt&65535),fe=(z>>>16)+(Xt>>>16)+(he>>>16),be=(j&65535)+(Ke&65535)+(fe>>>16),re=(j>>>16)+(Ke>>>16)+(be>>>16),this.h3h=re<<16|be&65535,this.h3l=fe<<16|he&65535,he=(se&65535)+(Ot&65535),fe=(se>>>16)+(Ot>>>16)+(he>>>16),be=(X&65535)+(dt&65535)+(fe>>>16),re=(X>>>16)+(dt>>>16)+(be>>>16),this.h4h=re<<16|be&65535,this.h4l=fe<<16|he&65535,he=(ve&65535)+(Oe&65535),fe=(ve>>>16)+(Oe>>>16)+(he>>>16),be=(ue&65535)+(ge&65535)+(fe>>>16),re=(ue>>>16)+(ge>>>16)+(be>>>16),this.h5h=re<<16|be&65535,this.h5l=fe<<16|he&65535,he=(de&65535)+(ct&65535),fe=(de>>>16)+(ct>>>16)+(he>>>16),be=(_e&65535)+(Be&65535)+(fe>>>16),re=(_e>>>16)+(Be>>>16)+(be>>>16),this.h6h=re<<16|be&65535,this.h6l=fe<<16|he&65535,he=(Q&65535)+(at&65535),fe=(Q>>>16)+(at>>>16)+(he>>>16),be=(oe&65535)+(it&65535)+(fe>>>16),re=(oe>>>16)+(it>>>16)+(be>>>16),this.h7h=re<<16|be&65535,this.h7l=fe<<16|he&65535},O.prototype.hex=function(){this.finalize();var P=this.h0h,x=this.h0l,M=this.h1h,q=this.h1l,$=this.h2h,B=this.h2l,j=this.h3h,z=this.h3l,X=this.h4h,se=this.h4l,ue=this.h5h,ve=this.h5l,_e=this.h6h,de=this.h6l,oe=this.h7h,Q=this.h7l,Z=this.bits,W=d[P>>28&15]+d[P>>24&15]+d[P>>20&15]+d[P>>16&15]+d[P>>12&15]+d[P>>8&15]+d[P>>4&15]+d[P&15]+d[x>>28&15]+d[x>>24&15]+d[x>>20&15]+d[x>>16&15]+d[x>>12&15]+d[x>>8&15]+d[x>>4&15]+d[x&15]+d[M>>28&15]+d[M>>24&15]+d[M>>20&15]+d[M>>16&15]+d[M>>12&15]+d[M>>8&15]+d[M>>4&15]+d[M&15]+d[q>>28&15]+d[q>>24&15]+d[q>>20&15]+d[q>>16&15]+d[q>>12&15]+d[q>>8&15]+d[q>>4&15]+d[q&15]+d[$>>28&15]+d[$>>24&15]+d[$>>20&15]+d[$>>16&15]+d[$>>12&15]+d[$>>8&15]+d[$>>4&15]+d[$&15]+d[B>>28&15]+d[B>>24&15]+d[B>>20&15]+d[B>>16&15]+d[B>>12&15]+d[B>>8&15]+d[B>>4&15]+d[B&15]+d[j>>28&15]+d[j>>24&15]+d[j>>20&15]+d[j>>16&15]+d[j>>12&15]+d[j>>8&15]+d[j>>4&15]+d[j&15];return Z>=256&&(W+=d[z>>28&15]+d[z>>24&15]+d[z>>20&15]+d[z>>16&15]+d[z>>12&15]+d[z>>8&15]+d[z>>4&15]+d[z&15]),Z>=384&&(W+=d[X>>28&15]+d[X>>24&15]+d[X>>20&15]+d[X>>16&15]+d[X>>12&15]+d[X>>8&15]+d[X>>4&15]+d[X&15]+d[se>>28&15]+d[se>>24&15]+d[se>>20&15]+d[se>>16&15]+d[se>>12&15]+d[se>>8&15]+d[se>>4&15]+d[se&15]+d[ue>>28&15]+d[ue>>24&15]+d[ue>>20&15]+d[ue>>16&15]+d[ue>>12&15]+d[ue>>8&15]+d[ue>>4&15]+d[ue&15]+d[ve>>28&15]+d[ve>>24&15]+d[ve>>20&15]+d[ve>>16&15]+d[ve>>12&15]+d[ve>>8&15]+d[ve>>4&15]+d[ve&15]),Z==512&&(W+=d[_e>>28&15]+d[_e>>24&15]+d[_e>>20&15]+d[_e>>16&15]+d[_e>>12&15]+d[_e>>8&15]+d[_e>>4&15]+d[_e&15]+d[de>>28&15]+d[de>>24&15]+d[de>>20&15]+d[de>>16&15]+d[de>>12&15]+d[de>>8&15]+d[de>>4&15]+d[de&15]+d[oe>>28&15]+d[oe>>24&15]+d[oe>>20&15]+d[oe>>16&15]+d[oe>>12&15]+d[oe>>8&15]+d[oe>>4&15]+d[oe&15]+d[Q>>28&15]+d[Q>>24&15]+d[Q>>20&15]+d[Q>>16&15]+d[Q>>12&15]+d[Q>>8&15]+d[Q>>4&15]+d[Q&15]),W},O.prototype.toString=O.prototype.hex,O.prototype.digest=function(){this.finalize();var P=this.h0h,x=this.h0l,M=this.h1h,q=this.h1l,$=this.h2h,B=this.h2l,j=this.h3h,z=this.h3l,X=this.h4h,se=this.h4l,ue=this.h5h,ve=this.h5l,_e=this.h6h,de=this.h6l,oe=this.h7h,Q=this.h7l,Z=this.bits,W=[P>>24&255,P>>16&255,P>>8&255,P&255,x>>24&255,x>>16&255,x>>8&255,x&255,M>>24&255,M>>16&255,M>>8&255,M&255,q>>24&255,q>>16&255,q>>8&255,q&255,$>>24&255,$>>16&255,$>>8&255,$&255,B>>24&255,B>>16&255,B>>8&255,B&255,j>>24&255,j>>16&255,j>>8&255,j&255];return Z>=256&&W.push(z>>24&255,z>>16&255,z>>8&255,z&255),Z>=384&&W.push(X>>24&255,X>>16&255,X>>8&255,X&255,se>>24&255,se>>16&255,se>>8&255,se&255,ue>>24&255,ue>>16&255,ue>>8&255,ue&255,ve>>24&255,ve>>16&255,ve>>8&255,ve&255),Z==512&&W.push(_e>>24&255,_e>>16&255,_e>>8&255,_e&255,de>>24&255,de>>16&255,de>>8&255,de&255,oe>>24&255,oe>>16&255,oe>>8&255,oe&255,Q>>24&255,Q>>16&255,Q>>8&255,Q&255),W},O.prototype.array=O.prototype.digest,O.prototype.arrayBuffer=function(){this.finalize();var P=this.bits,x=new ArrayBuffer(P/8),M=new DataView(x);return M.setUint32(0,this.h0h),M.setUint32(4,this.h0l),M.setUint32(8,this.h1h),M.setUint32(12,this.h1l),M.setUint32(16,this.h2h),M.setUint32(20,this.h2l),M.setUint32(24,this.h3h),P>=256&&M.setUint32(28,this.h3l),P>=384&&(M.setUint32(32,this.h4h),M.setUint32(36,this.h4l),M.setUint32(40,this.h5h),M.setUint32(44,this.h5l)),P==512&&(M.setUint32(48,this.h6h),M.setUint32(52,this.h6l),M.setUint32(56,this.h7h),M.setUint32(60,this.h7l)),x},O.prototype.clone=function(){var P=new O(this.bits,!1);return this.copyTo(P),P},O.prototype.copyTo=function(P){var x=0,M=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(x=0;x<M.length;++x)P[M[x]]=this[M[x]];for(x=0;x<this.blocks.length;++x)P.blocks[x]=this.blocks[x]};function I(P,x,M){var q,$=typeof P;if($!=="string"){if($==="object"){if(P===null)throw new Error(e);if(c&&P.constructor===ArrayBuffer)P=new Uint8Array(P);else if(!Array.isArray(P)&&(!c||!ArrayBuffer.isView(P)))throw new Error(e)}else throw new Error(e);q=!0}var B=P.length;if(!q){for(var j=[],B=P.length,z=0,X,se=0;se<B;++se)X=P.charCodeAt(se),X<128?j[z++]=X:X<2048?(j[z++]=192|X>>6,j[z++]=128|X&63):X<55296||X>=57344?(j[z++]=224|X>>12,j[z++]=128|X>>6&63,j[z++]=128|X&63):(X=65536+((X&1023)<<10|P.charCodeAt(++se)&1023),j[z++]=240|X>>18,j[z++]=128|X>>12&63,j[z++]=128|X>>6&63,j[z++]=128|X&63);P=j}P.length>128&&(P=new O(x,!0).update(P).array());for(var ue=[],ve=[],se=0;se<128;++se){var _e=P[se]||0;ue[se]=92^_e,ve[se]=54^_e}O.call(this,x,M),this.update(ve),this.oKeyPad=ue,this.inner=!0,this.sharedMemory=M}I.prototype=new O,I.prototype.finalize=function(){if(O.prototype.finalize.call(this),this.inner){this.inner=!1;var P=this.array();O.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(P),O.prototype.finalize.call(this)}},I.prototype.clone=function(){var P=new I([],this.bits,!1);this.copyTo(P),P.inner=this.inner;for(var x=0;x<this.oKeyPad.length;++x)P.oKeyPad[x]=this.oKeyPad[x];return P};var F=S(512);F.sha512=F,F.sha384=S(384),F.sha512_256=S(256),F.sha512_224=S(224),F.sha512.hmac=R(512),F.sha384.hmac=R(384),F.sha512_256.hmac=R(256),F.sha512_224.hmac=R(224),o?t.exports=F:(r.sha512=F.sha512,r.sha384=F.sha384,r.sha512_256=F.sha512_256,r.sha512_224=F.sha512_224)})()})(hG);var ff=hG.exports;const d8=/[^ \n\t0-9]+/uig,h8="fuck",f8="0123456789ABCDEF",p8=["c2588f599d769e59e44495a99d7fbc6171eaafc8a4a4e2b8fa1ac9fe7fda6ebb","38e619330ed14898db52fea9aa31465dd585c62922912f3f698649975d300552","646dffd16c69a2f044a656a4a142e608090b13681ddc947c70c169eb722f654b","5fcb7be154dacd218aa4e4628a026ced4fdaf58b5baaadcf752e38e4f6b260a1","ad4b1130cf8a4a273598314d8fb4a9c4d20e3e46933bac78aba65c426a077409","30383b26c03755ed0a6c35d838d1fbc4f7bc3b33ec843ea518df24ee01987cc6","06421321f380fd5b1ee43474f58948009b6e2f73539480ea42eb3aadc1de82da","85b957f98c7a6d3a279c73d0c324fd5d7e106f5a11bd281fddee2cb8be2b64d0"];function hx(t){return p8.includes(ff.sha512_256(t))?t:t.replaceAll(d8,h8)}function Xv(t){var e;if(!((e=t.classList)!=null&&e.contains("c-news-ticker")))if(t.nodeValue===null){const i=t.getAttribute("ach-tooltip");i!==null&&t.setAttribute("ach-tooltip",hx(i));for(const n of t.childNodes)Xv(n)}else t.nodeValue=hx(t.nodeValue)}function bm(t){return t[Math.floor(Math.random()*t.length)]}function Nf(t){const e=typeof t=="number";let i=new Decimal(t);const n=i.lt(0);i=i.abs();const r=i.add(1).log10()+1;if(i=i.mul(Zl(1/r,r)),i.gte(1e10)){const s=Math.log10(i.log10());i=i.pow(Zl(1/s,s))}return n&&(i=i.neg()),e?i.toNumber():i}function h_(){let t="#";for(let e=0;e<6;e++)t+=bm(f8);return t}function Zl(t,e){return t+(e-t)*Math.random()}function Lc(t,e,i){document.body.style.setProperty(t,e,i)}function fG(){setTimeout(()=>{GameUI.notify.success("Pausing game..."),setTimeout(()=>{fG()},0)},Zl(6e4,9e4))}function pG(){setTimeout(()=>{GameUI.notify.success("Updating UI"),GameOptions.toggleUI(),pG()},Zl(5e3,6e4))}function m8(){Lc("background-color",h_()),Lc("color",h_(),"important"),setInterval(()=>{GameUI.notify.success("Loading colors"),Lc("background-color",h_()),Lc("color",h_(),"important")},6e4),setInterval(()=>{GameUI.notify.success("Improving user experience...");const t=bm([()=>`scale(${Zl(.9,1.1)})`,()=>`translate(${Zl(-.1,.1)*100}vw, ${Zl(-.1,.1)*100}vh)`,()=>`rotate(${Zl(-180,180)}deg)`])();Lc("transform",t)},6e4),setInterval(()=>{Lc("animation","a-spin4d 4s"),setTimeout(()=>{Lc("animation","")},4e3)},8e4),fG(),pG()}const fx=new MutationObserver(g8);let Fy;function y8(t){for(const e of t){const i=[...e.addedNodes].find(s=>s.classList.contains("general-tooltip")),n=Fy,r=[...e.removedNodes].some(s=>s===n);i?(Fy=i,fx.observe(Fy.children[1],{childList:!0}),Xv(Fy.children[1].childNodes[0])):r&&(Fy=null,fx.disconnect())}}function g8(t){for(const e of t){const i=e.addedNodes[0];i&&Xv(i)}}let l0;function mG(){const t=l0.all.findLastIndex(s=>s.hasReached(player)),e=l0.all[t].subProgressValue(player),i=l0.all.length,n=Math.clamp((t+e)/i,0,1),r=n*.12;Lc("opacity",1-.3*n),Lc("filter",`blur(calc(max(1vw, 1vh) * ${r}))`),requestAnimationFrame(mG)}requestAnimationFrame(async()=>{l0=(await u8(async()=>{const{GameProgress:t}=await Promise.resolve().then(()=>bde);return{GameProgress:t}},void 0,import.meta.url)).GameProgress,mG(),new MutationObserver(y8).observe(document.body,{childList:!0})});function Kv(){const t=GameEnd.endState>END_STATE_MARKERS.END_NUMBERS?1:(GameEnd.endState-END_STATE_MARKERS.FADE_AWAY)/2;return player.celestials.pelle.doomed&&Math.random()<t}window.format=function(e,i=0,n=0,r=!1){return Kv()&&!r?"END":Notations.current.format(Nf(e),i,n,3)};window.formatInt=function(e,i=!1){return Kv()&&!i?"END":Notations.current.isPainful&&Notations.current.name!=="Standard"?format(e,2):(e=Nf(e),formatWithCommas(typeof e=="number"?e.toFixed(0):e.toNumber().toFixed(0)))};window.formatFloat=function(e,i,n=!1){return Kv()&&!n?"END":Notations.current.isPainful?format(e,Math.max(2,i),i):formatWithCommas(Nf(e).toFixed(i))};window.formatPostBreak=function(e,i,n,r=!1){if(Kv()&&!r)return"END";const s=Notations.current;if(typeof e=="number"&&!Number.isFinite(e))return s.infinite;const a=Nf(Decimal.fromValue_noAlloc(e));if(a.exponent<-300)return a.sign()<0?s.formatVerySmallNegativeDecimal(a.abs(),n):s.formatVerySmallDecimal(a,n);if(a.exponent<3){const o=a.toNumber();return o<0?s.formatNegativeUnder1000(Math.abs(o),n):s.formatUnder1000(o,n)}return a.sign()<0?s.formatNegativeDecimal(a.abs(),i):s.formatDecimal(a,i)};window.formatX=function(e,i,n,r=!1){return`×${format(e,i,n,r)}`};window.formatPow=function(e,i,n,r=!1){return`^${format(e,i,n,r)}`};window.formatPercents=function(e,i,n=!1){return`${format(e*100,2,i,n)}%`};window.formatRarity=function(e,i){const n=e.toFixed(1).endsWith(".0")?0:1;return`${format(e,2,n,i)}%`};window.formatMachines=function(e,i,n=!1){if(Kv()&&!n)return"END";const r=[];return Decimal.neq(e,0)&&r.push(format(e,2)),Decimal.neq(i,0)&&r.push(`${format(i,2,2)}i`),Decimal.eq(e,0)&&Decimal.eq(i,0)?format(0):r.join(" + ")};window.timeDisplay=function(e){return TimeSpan.fromMilliseconds(Nf(e)).toString()};window.timeDisplayNoDecimals=function(e){return TimeSpan.fromMilliseconds(Nf(e)).toStringNoDecimals()};window.timeDisplayShort=function(e){return TimeSpan.fromMilliseconds(Nf(e)).toStringShort()};const v8=/\B(?=(\d{3})+(?!\d))/gu;window.formatWithCommas=function(e){const i=e.toString().split(".");return i[0]=i[0].replace(v8,","),i.join(".")};const b8=new Map([[/y$/u,"ies"],[/x$/u,"xes"],[/$/u,"s"]]),px=new Map([["Antimatter","Antimatter"],["Dilated Time","Dilated Time"],["Matter","Matter"],["Replicanti","Replicanti"]]);window.pluralize=function(e,i,n){if(e===void 0||i===void 0)throw"Arguments must be defined";if(Decimal.eq(i,1))return e;const r=n??px.get(e);if(r!==void 0)return r;const s=generatePlural(e);return px.set(e,s),s};window.generatePlural=function(e){for(const[i,n]of b8.entries()){const r=e.replace(i,n);if(e!==r)return r}return e};window.quantify=function(e,i,n,r,s=format){if(e===void 0||i===void 0)throw"Arguments must be defined";const a=s(i,n,r),o=pluralize(e,i);return`${a} ${o}`};window.quantifyInt=function(e,i){if(e===void 0||i===void 0)throw"Arguments must be defined";const n=formatInt(i),r=pluralize(e,i);return`${n} ${r}`};window.makeEnumeration=function(e){if(e.length===0)return"";if(e.length===1)return e[0];if(e.length===2)return`${e[0]} and ${e[1]}`;const i=e.slice(0,e.length-1).join(", "),n=e[e.length-1];return`${i}, and ${n}`};window.PRESTIGE_EVENT={DIMENSION_BOOST:0,ANTIMATTER_GALAXY:1,INFINITY:2,ETERNITY:3,REALITY:4};function yG(t){return Object.keys(t).forEach(e=>{const i=t[e];typeof i=="object"&&yG(i)}),Object.freeze(t)}const L=yG({DM1:new Decimal("-1"),D0:new Decimal("0"),D0_01:new Decimal("0.01"),D0_1:new Decimal("0.1"),D0_4:new Decimal("0.4"),D0_55:new Decimal("0.55"),D0_8446303389034288:new Decimal("0.8446303389034288"),D0_95:new Decimal("0.95"),D0_965:new Decimal("0.965"),D1:new Decimal("1"),D1_0000109:new Decimal("1.0000109"),D1_00038:new Decimal("1.00038"),D1_0004:new Decimal("1.0004"),D1_0025:new Decimal("1.0025"),D1_005:new Decimal("1.005"),D1_007:new Decimal("1.007"),D1_02:new Decimal("1.02"),D1_0285:new Decimal("1.0285"),D1_2:new Decimal("1.2"),D1_3:new Decimal("1.3"),D2:new Decimal("2"),D3:new Decimal("3"),D4:new Decimal("4"),D5:new Decimal("5"),D6_66:new Decimal("6.66"),D15:new Decimal("15"),D16:new Decimal("16"),D11111:new Decimal("11111"),D3E4:new Decimal("30000"),D2E5:new Decimal("2e5"),D2E6:new Decimal("2e6"),D5E7:new Decimal("5e7"),D2E9:new Decimal("2e9"),D2E25:new Decimal("2e25"),D2E22222:new Decimal("2e22222"),D9_99999E999:new Decimal("9.99999e999"),D9_9999E9999:new Decimal("9.9999e9999"),C1D1_1245:Decimal.div(1,1.1245),D2P30D0_61:Decimal.pow(2,30/.61),C2P30:Decimal.pow(2,30),C2P1024:Decimal.pow(2,1024),C10P16000D3:Decimal.pow(10,16e3/3),E1:new Decimal("1e1"),E2:new Decimal("1e2"),E3:new Decimal("1e3"),E5:new Decimal("1e5"),E6:new Decimal("1e6"),E8:new Decimal("1e8"),E9:new Decimal("1e9"),E10:new Decimal("1e10"),E12:new Decimal("1e12"),E15:new Decimal("1e15"),E20:new Decimal("1e20"),E25:new Decimal("1e25"),E29:new Decimal("1e29"),E30:new Decimal("1e30"),E31:new Decimal("1e31"),E40:new Decimal("1e40"),E45:new Decimal("1e45"),E50:new Decimal("1e50"),E55:new Decimal("1e55"),E58:new Decimal("1e58"),E60:new Decimal("1e60"),E63:new Decimal("1e63"),E70:new Decimal("1e70"),E75:new Decimal("1e75"),E80:new Decimal("1e80"),E90:new Decimal("1e90"),E100:new Decimal("1e100"),E140:new Decimal("1e140"),E150:new Decimal("1e150"),E160:new Decimal("1e160"),E170:new Decimal("1e170"),E175:new Decimal("1e175"),E200:new Decimal("1e200"),E250:new Decimal("1e250"),E260:new Decimal("1e260"),E280:new Decimal("1e280"),E300:new Decimal("1e300"),E308:new Decimal("1e308"),E309:new Decimal("1e309"),E310:new Decimal("1e310"),E315:new Decimal("1e315"),E320:new Decimal("1e320"),E349:new Decimal("1e349"),E400:new Decimal("1e400"),E450:new Decimal("1e450"),E500:new Decimal("1e500"),E530:new Decimal("1e530"),E550:new Decimal("1e550"),E600:new Decimal("1e600"),E616:new Decimal("1e616"),E650:new Decimal("1e650"),E750:new Decimal("1e750"),E850:new Decimal("1e850"),E900:new Decimal("1e900"),E925:new Decimal("1e925"),E975:new Decimal("1e975"),E1000:new Decimal("1e1000"),E1100:new Decimal("1e1100"),E1200:new Decimal("1e1200"),E1300:new Decimal("1e1300"),E1400:new Decimal("1e1400"),E1500:new Decimal("1e1500"),E1750:new Decimal("1e1750"),E1800:new Decimal("1e1800"),E1900:new Decimal("1e1900"),E2000:new Decimal("1e2000"),E2350:new Decimal("1e2350"),E2400:new Decimal("1e2400"),E2500:new Decimal("1e2500"),E2650:new Decimal("1e2650"),E2700:new Decimal("1e2700"),E2750:new Decimal("1e2750"),E2800:new Decimal("1e2800"),E2900:new Decimal("1e2900"),E3000:new Decimal("1e3000"),E3200:new Decimal("1e3200"),E3350:new Decimal("1e3350"),E4000:new Decimal("1e4000"),E5000:new Decimal("1e5000"),E6000:new Decimal("1e6000"),E8000:new Decimal("1e8000"),E9000:new Decimal("1e9000"),E10000:new Decimal("1e10000"),E10500:new Decimal("1e10500"),E11000:new Decimal("1e11000"),E11111:new Decimal("1e11111"),E11200:new Decimal("1e11200"),E12000:new Decimal("1e12000"),E13000:new Decimal("1e13000"),E14000:new Decimal("1e14000"),E16500:new Decimal("1e16500"),E17500:new Decimal("1e17500"),E18000:new Decimal("1e18000"),E20000:new Decimal("1e20000"),E22500:new Decimal("1e22500"),E23000:new Decimal("1e23000"),E27000:new Decimal("1e27000"),E28000:new Decimal("1e28000"),E30000:new Decimal("1e30000"),E45000:new Decimal("1e45000"),E54000:new Decimal("1e54000"),E60000:new Decimal("1e60000"),E100000:new Decimal("1e100000"),E110000:new Decimal("1e110000"),E164000:new Decimal("1e164000"),E200000:new Decimal("1e200000"),E201600:new Decimal("1e201600"),E208000:new Decimal("1e208000"),E210000:new Decimal("1e210000"),E300000:new Decimal("1e300000"),E320000:new Decimal("1e320000"),E500000:new Decimal("1e500000"),E1E6:new Decimal("1e1000000"),E3E6:new Decimal("1e3000000"),E6E6:new Decimal("1e6000000"),E1E7:new Decimal("1e10000000"),E2E7:new Decimal("1e20000000"),E4E7:new Decimal("1e40000000"),E6E7:new Decimal("1e60000000"),E1E8:new Decimal("1e100000000"),E1_5E12:new Decimal("1e1500000000000"),E1E15:new Decimal("1e1000000000000000")});window.AUTOBUYER_MODE={BUY_SINGLE:1,BUY_10:10,BUY_MAX:100};window.AUTO_CRUNCH_MODE={AMOUNT:0,TIME:1,X_HIGHEST:2};window.AUTO_ETERNITY_MODE={AMOUNT:0,TIME:1,X_HIGHEST:2};window.AUTO_REALITY_MODE={RM:0,GLYPH:1,EITHER:2,BOTH:3,TIME:4,RELIC_SHARD:5};window.RECENT_PRESTIGE_RESOURCE={ABSOLUTE_GAIN:0,RATE:1,CURRENCY:2,PRESTIGE_COUNT:3};window.TS171_MULTIPLIER=1.25;window.GLYPH_MIME_TYPE="text/x-ivark-glyph";window.GlyphRarities=[{minStrength:3.5,name:"Celestial",darkColor:"#3d3dec",lightColor:"#9696ff",darkHighContrast:"#ffff00",lightHighContrast:"#c0c000"},{minStrength:3.25,name:"Transcendent",darkColor:"#03ffec",lightColor:"#00c3c3",darkHighContrast:"#00ffff",lightHighContrast:"#00c0c0"},{minStrength:3,name:"Mythical",darkColor:"#d50000",lightColor:"#d50000",darkHighContrast:"#c00000",lightHighContrast:"#ff0000"},{minStrength:2.75,name:"Legendary",darkColor:"#ff9800",lightColor:"#d68100",darkHighContrast:"#ff8000",lightHighContrast:"#ff8000"},{minStrength:2.5,name:"Epic",darkColor:"#9c27b0",lightColor:"#9c27b0",darkHighContrast:"#ff00ff",lightHighContrast:"#ff00ff"},{minStrength:2,name:"Rare",darkColor:"#5096f3",lightColor:"#0d40ff",darkHighContrast:"#6060ff",lightHighContrast:"#0000ff"},{minStrength:1.5,name:"Uncommon",darkColor:"#43a047",lightColor:"#1e8622",darkHighContrast:"#00ff00",lightHighContrast:"#00b000"},{minStrength:1,name:"Common",darkColor:"#ffffff",lightColor:"#000000",darkHighContrast:"#ffffff",lightHighContrast:"#000000"}];window.GLYPH_BG_SETTING={AUTO:0,LIGHT:1,DARK:2};window.GLYPH_TYPES=["power","infinity","replication","time","dilation","effarig","reality","cursed","companion"];window.BASIC_GLYPH_TYPES=["power","infinity","replication","time","dilation"];window.ALCHEMY_BASIC_GLYPH_TYPES=["power","infinity","replication","time","dilation","effarig"];window.GLYPH_SYMBOLS={power:"Ω",infinity:"∞",replication:"Ξ",time:"Δ",dilation:"Ψ",effarig:"Ϙ",reality:"Ϟ",cursed:"⸸",companion:"♥"};window.CANCER_GLYPH_SYMBOLS={power:"⚡",infinity:"8",replication:"⚤",time:"🕟",dilation:"☎",effarig:"🦒",reality:"⛧",cursed:"☠",companion:"³"};window.ALTERATION_TYPE={ADDITION:1,EMPOWER:2,BOOST:3};window.BLACK_HOLE_PAUSE_MODE={NO_PAUSE:0,PAUSE_BEFORE_BH1:1,PAUSE_BEFORE_BH2:2};window.GLYPH_SIDEBAR_MODE={INVENTORY_MANAGEMENT:0,FILTER_SETTINGS:1,SAVED_SETS:2,SACRIFICE_TYPE:3};window.AUTO_SORT_MODE={NONE:0,LEVEL:1,POWER:2,EFFECT:3,SCORE:4};window.AUTO_GLYPH_SCORE={LOWEST_SACRIFICE:0,EFFECT_COUNT:1,RARITY_THRESHOLD:2,SPECIFIED_EFFECT:3,EFFECT_SCORE:4,LOWEST_ALCHEMY:5,ALCHEMY_VALUE:6};window.AUTO_GLYPH_REJECT={SACRIFICE:0,REFINE:1,REFINE_TO_CAP:2};window.TIME_STUDY_PATH={NONE:0,ANTIMATTER_DIM:1,INFINITY_DIM:2,TIME_DIM:3,ACTIVE:4,PASSIVE:5,IDLE:6,LIGHT:7,DARK:8};window.TIME_STUDY_TYPE={NORMAL:0,ETERNITY_CHALLENGE:1,DILATION:2,TRIAD:3};window.TS_REQUIREMENT_TYPE={AT_LEAST_ONE:0,ALL:1,DIMENSION_PATH:2};window.ALCHEMY_RESOURCE={POWER:0,INFINITY:1,TIME:2,REPLICATION:3,DILATION:4,CARDINALITY:5,ETERNITY:6,DIMENSIONALITY:7,INFLATION:8,ALTERNATION:9,EFFARIG:10,SYNERGISM:11,MOMENTUM:12,DECOHERENCE:13,EXPONENTIAL:14,FORCE:15,UNCOUNTABILITY:16,BOUNDLESS:17,MULTIVERSAL:18,UNPREDICTABILITY:19,REALITY:20};window.SINGULARITY_MILESTONE_RESOURCE={SINGULARITIES:0,CONDENSE_COUNT:1,MANUAL_TIME:2,AUTO_TIME:3};window.SINGULARITY_MILESTONE_SORT={SINGULARITIES_TO_NEXT:0,CURRENT_COMPLETIONS:1,PERCENT_COMPLETIONS:2,FINAL_COMPLETION:3,MOST_RECENT:4};window.COMPLETED_MILESTONES={FIRST:0,LAST:1,IGNORED:2};window.SORT_ORDER={ASCENDING:0,DESCENDING:1};window.PROGRESS_STAGE={PRE_INFINITY:1,EARLY_INFINITY:2,BREAK_INFINITY:3,REPLICANTI:4,EARLY_ETERNITY:5,ETERNITY_CHALLENGES:6,EARLY_DILATION:7,LATE_ETERNITY:8,EARLY_REALITY:9,TERESA:10,EFFARIG:11,ENSLAVED:12,V:13,RA:14,IMAGINARY_MACHINES:15,LAITELA:16,PELLE:17};window.STD_BACKEND_URL="https://antimatterdimensionspayments.ew.r.appspot.com";window.SPEEDRUN_SEED_STATE={UNKNOWN:0,FIXED:1,RANDOM:2,PLAYER:3};var gG={exports:{}},mx=7,yx=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23],_8=607/128,A1=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function vG(t){if(t<0)return+"0/0";for(var e=A1[0],i=A1.length-1;i>0;--i)e+=A1[i]/(t+i);var n=t+_8+.5;return .5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(e)-Math.log(t)}gG.exports=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(e>100)return Math.exp(vG(e));e-=1;for(var i=yx[0],n=1;n<mx+2;n++)i+=yx[n]/(e+n);var r=e+mx+.5;return Math.sqrt(2*Math.PI)*Math.pow(r,e+.5)*Math.exp(-r)*i};var E8=gG.exports.log=vG;window.LOG10_MAX_VALUE=Math.log10(Number.MAX_VALUE);window.LN_SQRT_2_PI=.5*Math.log(2*Math.PI);window.LOG10_2=Math.log10(2);window.LOG10_E=Math.log10(Math.E);Math.PI_2=Math.PI*2;window.bulkBuyBinarySearch=function(e,i,n){const r=i.costFunction,s=i.firstCost===void 0?r(n):i.firstCost,a=i.cumulative===void 0?!0:i.cumulative;if(e.lt(s))return null;let o=1,c;do o*=2,c=r(n+o-1);while(e.gte(c));if(o===2)return{quantity:1,purchasePrice:s};let d=o/2;if(o>Number.MAX_SAFE_INTEGER)throw new Error("Overflow in binary search");for(;o-d>1;){const E=Math.floor((d+o)/2);e.gte(r(n+E-1))?d=E:o=E}const p=r(n+d-1);if(!a)return{quantity:d,purchasePrice:p};let m=L.D0,y=0;for(let E=d-1;E>0;--E){const C=m.plus(r(n+E-1));if(C.eq(m))break;if(m=C,++y>1e3)throw new Error("unexpected long loop (buggy cost function?)")}let _=p.plus(m);return e.lt(_)&&(--d,_=m),{quantity:d,purchasePrice:_}};window.LinearMultiplierScaling=class{constructor(e,i){this.baseRatio=e,this.growth=i}scale(e){return this.baseRatio*=e,this.growth*=e,this}shift(e){return this.baseRatio+=this.growth*e,this}logTotalMultiplierAfterPurchases(e){if(e===0)return 0;const i=this.growth/this.baseRatio,n=i*e;return(1/i+e-.5)*Math.log1p(n)+e*(Math.log(this.baseRatio)-1)-i*n/(12*(1+n))}purchasesForLogTotalMultiplier(e){if(this.baseRatio<1.01)throw new Error("Ratio is too small for good calculations");const i=Math.log(this.baseRatio),n=this.growth/this.baseRatio,r=E=>{const C=n*E,S=Math.log1p(C),k=.5*n/(1+C),R=(1/n+E-.5)*S+E*(i-1)-(e+k*C/6),O=S+i-k*(k/3+1),I=k*(2+k*(2+k/3)),F=R/O;return E-2*F/(1+Math.sqrt(1-2*F*I/O))},s=e/i;if(n*s<.01)return r(r(s));const a=this.growth*e+this.baseRatio*(i-1),o=.183709519164226,c=.693791942633232,d=.049293492810849,p=Math.sqrt(2*(a+1)),m=p*(1+o*p)/(1+c*Math.log1p(d*p)),_=((1+m+a)/Math.log1p(m)-this.baseRatio)/this.growth;return r(r(_))}logTotalMultiplierAfterPurchasesBaseline(e){let i=0;const n=this.growth/this.baseRatio;for(let r=0;r<e;++r)i+=Math.log1p(n*r);return i+e*Math.log(this.baseRatio)}};window.getCostWithLinearCostScaling=function(e,i,n,r,s){const a=Math.max(0,Math.floor(Math.log(i/n)/Math.log(r))),o=Math.ceil(Math.pow(r,Math.min(a,e))*n),c=new LinearMultiplierScaling(r,s),d=Math.exp(c.logTotalMultiplierAfterPurchases(Math.max(0,e-a)));return o*d};window.findFirstInfiniteCostPurchase=function(e,i,n,r){let s=1;for(;Number.isFinite(getCostWithLinearCostScaling(s,e,i,n,r));)s*=2;let a=s/2;for(;a<s;){const o=Math.floor((a+s)/2),c=getCostWithLinearCostScaling(o,e,i,n,r);Number.isFinite(c)?a=o+1:s=o}return a};window.LinearCostScaling=class{constructor(e,i,n,r=Number.MAX_SAFE_INTEGER,s=!1){s?this._purchases=Math.clampMax(Math.floor(e.div(i).log10()/Math.log10(n)+1),r):this._purchases=Math.clampMax(Math.floor(e.mul(n-1).div(i).add(1).log10()/Math.log10(n)),r),this._totalCostMultiplier=Decimal.pow(n,this._purchases),s?this._totalCost=i.mul(Decimal.pow(n,this._purchases-1)):this._totalCost=i.mul(Decimal.sub(1,this._totalCostMultiplier)).div(1-n)}get purchases(){return this._purchases}get totalCostMultiplier(){return this._totalCostMultiplier}get totalCost(){return this._totalCost}};window.ExponentialCostScaling=class Mp{constructor(e){if(this._baseCost=new Decimal(e.baseCost),this._baseIncrease=e.baseIncrease,typeof this._baseIncrease!="number")throw new Error("baseIncrease must be a number");if(this._costScale=e.costScale,typeof this._costScale!="number")throw new Error("costScale must be a number");if(this._logBaseCost=Mp.log10(e.baseCost),this._logBaseIncrease=Mp.log10(e.baseIncrease),this._logCostScale=Mp.log10(e.costScale),e.purchasesBeforeScaling!==void 0)this._purchasesBeforeScaling=e.purchasesBeforeScaling;else if(e.scalingCostThreshold!==void 0)this._purchasesBeforeScaling=Math.ceil((Mp.log10(e.scalingCostThreshold)-this._logBaseCost)/this._logBaseIncrease);else throw new Error("Must specify either scalingCostThreshold or purchasesBeforeScaling");this.updateCostScale()}get costScale(){return this._costScale}set costScale(e){this._logCostScale=Mp.log10(e),this._costScale=e,this.updateCostScale()}updateCostScale(){this._precalcDiscriminant=Math.pow(2*this._logBaseIncrease+this._logCostScale,2)-8*this._logCostScale*(this._purchasesBeforeScaling*this._logBaseIncrease+this._logBaseCost),this._precalcCenter=-this._logBaseIncrease/this._logCostScale+this._purchasesBeforeScaling+.5}calculateCost(e){const i=this._logBaseIncrease,n=this._logBaseCost,r=e-this._purchasesBeforeScaling,s=r>0?e*i+n+.5*r*(r+1)*this._logCostScale:e*i+n;return L.E1.pow(s)}getMaxBought(e,i,n){const s=i.div(n).log10(),a=this._logBaseIncrease,o=this._logBaseCost;let c=Math.floor(1+(s-o)/a);if(c>this._purchasesBeforeScaling){const p=this._precalcDiscriminant+8*this._logCostScale*s;if(p<0)return null;c=Math.floor(this._precalcCenter+Math.sqrt(p)/(2*this._logCostScale))}if(c<=e)return null;let d;if(c<=this._purchasesBeforeScaling+1)d=(c-1)*a+o;else{const p=c-this._purchasesBeforeScaling;d=(c-1)*a+o+.5*p*(p-1)*this._logCostScale}return{quantity:c-e,logPrice:d+Math.log10(n)}}getContinuumValue(e,i){const r=e.div(i).log10(),s=this._logBaseIncrease,a=this._logBaseCost;let o=1+(r-a)/s;if(o>this._purchasesBeforeScaling){const c=this._precalcDiscriminant+8*this._logCostScale*r;if(c<0)return 0;o=this._precalcCenter+Math.sqrt(c)/(2*this._logCostScale)}return Math.clampMin(o,0)}static log10(e){return e instanceof Decimal?e.log10():Math.log10(e)}};window.productLog=function(e){let i=e,n=0;do n=i,i-=1-(1+e*Math.exp(-i))/(1+i);while(Math.abs(i-n)>1e-6*i);return i};window.permutationIndex=function(e,i){let n=1;for(let c=1;c<=e;c++)n*=c;let r=i%n,s=n/e;const a=Array.range(0,e),o=[];for(;a.length>0;){const c=Math.floor(r/s),d=r%s;o.push(a.splice(c,1)[0]),r=d,s/=a.length}return o};window.getHybridCostScaling=function(e,i,n,r,s,a,o,c){const d=getCostWithLinearCostScaling(e,i,n,r,s);if(Number.isFinite(d))return new Decimal(d);const p=e-findFirstInfiniteCostPurchase(i,n,r,s);return new ExponentialCostScaling({baseCost:a,baseIncrease:o,costScale:c,scalingCostThreshold:Number.MAX_VALUE}).calculateCost(p)};window.logFactorial=function(){const t=Array.range(1,11).map(Math.log),e=[0];for(const i of t)e.push(e[e.length-1]+i);return i=>typeof i!="number"||i<0?NaN:i<e.length?e[i]:E8(i+1)}();window.exp1m=function(t){return t.abs().gte(.001)?t.exp().minus(1):t.plus(t.pow(2).div(2)).plus(t.pow(3).div(6)).plus(t.pow(4).div(24)).plus(t.pow(5).div(120))};window.xorshift32Update=function(e){return e^=e<<13,e^=e>>>17,e^=e<<5,e};window.fastRandom=function(){let t=Math.floor(Date.now())%Math.pow(2,32);const e=1/Math.pow(2,32);return()=>(t=xorshift32Update(t),t*e+.5)}();window.normalDistribution=function(){let t=!1,e=0;return(i,n)=>{if(typeof i!="number"||typeof n!="number")return NaN;if(t)return t=!1,i+n*e;let r,s,a;do s=fastRandom()*2-1,a=fastRandom()*2-1,r=s*s+a*a;while(r>=1||r===0);const o=Math.sqrt(-2*Math.log(r)/r);return t=!0,e=a*o,i+n*s*o}}();window.binomialGeneratorFC=function(){const t=i=>-.08106146679532726+(i+.5)*Math.log1p(i)-i,e=Array.range(0,20).map(i=>logFactorial(i)-t(i));return i=>{if(typeof i!="number"||i<0)return NaN;if(i<e.length)return e[i];const n=1/(i+1);return(1/12-(1/360-n*n/1260)*(n*n))*n}}();window.binomialDistributionSmallExpected=function(e,i){const n=i/(1-i),r=(e+1)*n;let s=Math.exp(Math.log1p(-i)*e);const a=fastRandom();let o=s,c=0;for(;a>o&&(++c,s*=r/c-n,o+s!==o);)o+=s;return c};window.binomialDistribution=function t(e,i){if(i===0)return 0;if(e instanceof Decimal){if(e.e<308){const a=typeof i=="number"?i:i.toNumber();return new Decimal(t(e.toNumber(),a))}const s=e.times(i);return s.e>32?s:new Decimal(poissonDistribution(e.times(i)))}const n=e*i;if(n<15)return binomialDistributionSmallExpected(e,i);if(i>.5)return e-t(e,1-i);if(n>1e32)return n;const r=n*(1-i);return r>1e4?Math.round(normalDistribution(n,Math.sqrt(r))):binomialDistributionBTRD(e,i)};window.poissonDistribution=function t(e){return e===0?0:e instanceof Decimal?e.e>32?e:new Decimal(t(e.toNumber())):e>1e32?e:e>1e4?poissonDistributionViaNormal(e):e<20?poissonDistributionSmallExpected(e):poissonDistributionPTRD(e)};window.poissonDistributionViaNormal=function(e){const i=normalDistribution(Math.sqrt(e),.5);return Math.floor(i*i)};window.poissonDistributionSmallExpected=function(e){let i=Math.exp(-e),n=i;const r=fastRandom();let s=0;for(;r>n&&(++s,i*=e/s,n+i!==n);)n+=i;return s};window.binomialDistributionBTRD=function(e,i){const n=e*i,r=n*(1-i),s=Math.sqrt(r),a=Math.floor(n+i),o=i/(1-i),c=(e+1)*o,d=1.15+2.53*s,p=-.0873+.0248*d+.01*i,m=n+.5,y=(2.83+5.1/d)*s,_=.43,E=.92-4.2/d;for(;;){let C=fastRandom();if(C<=2*_*E){const B=C/E-_;return Math.floor((2*p/(.5-Math.abs(B))+d)*B+m)}let S;if(C>=E)S=fastRandom()-.5;else{const B=C/E-.93;C=fastRandom()*E,S=(B>0?.5:-.5)-B}const k=.5-Math.abs(S),R=Math.floor((2*p/k+d)*S+m);if(R<0||R>e)continue;C*=y/(p/(k*k)+d);const O=Math.abs(R-a);if(O<=40){let B=1;if(a<R)for(let j=a+1;j<=R;++j)B*=c/j-o;else if(a>R)for(let j=R+1;j<=a;++j)C*=c/j-o;if(C<=B)return R;continue}const I=O/r*(((O/3+.625)*O+1/6)/r+.5),F=-O*O/(2*r),P=Math.log(C);if(P<F-I)return R;if(P>F+I)continue;const x=e-a+1,M=e-R+1,q=(a+.5)*Math.log((a+1)/(o*x))+binomialGeneratorFC(a)+binomialGeneratorFC(e-a),$=(e+1)*Math.log(x/M)+(R+.5)*Math.log(M*o/(R+1))-binomialGeneratorFC(R)-binomialGeneratorFC(e-R);if(P<=q+$)return R}};window.poissonDistributionPTRD=function(e){const i=Math.sqrt(e),n=.931+2.53*i,r=-.059+.02483*n,s=1.1239+1.328/(n-3.4),a=.9277-3.6224/(n-2);for(;;){let o=Math.random();if(o<.86*a){const y=o/a-.43;return Math.floor((2*r/(.5-Math.abs(y))+n)*y+e+.445)}let c;if(o>=a)c=fastRandom()-.5;else{const y=o/a-.93;c=(y>0?.5:-.5)-y,o=fastRandom()*a}const d=.5-Math.abs(c);if(d<.013&&d<o)continue;const p=Math.floor((2*r/d+n)*c+e+.445);o*=s/(r/d/d+n);const m=1/p;if(p>=10){const y=(p+.5)*Math.log(e*m)-e-LN_SQRT_2_PI+p-(.08333333333333333-m*m/360)*m;if(Math.log(o*i)<=y)return p}else if(Math.log(o)<=p*Math.log(e)-e-logFactorial(p))return p}};window.depressedCubicRealRoots=function(e,i,n){if(e===0)return i===0?[]:[-n/i];if(i/=e,n/=e,n===0){if(i===0)return[0];if(i>0)return[];const o=Math.sqrt(-i);return[o,-o]}if(i===0)return[Math.cbrt(-n)];let r=.25*n*n+i*i*i/27;if(r>=0)return r=Math.sqrt(r),[Math.cbrt(-.5*n+r)+Math.cbrt(-.5*n-r)];const s=2*Math.sqrt(-i/3),a=Math.acos(3*n/(i*s))/3;return[s*Math.cos(a),s*Math.cos(a-2*Math.PI/3),s*Math.cos(a-4*Math.PI/3)]};window.quadraticRealRoots=function(e,i,n){if(e===0)return i===0?[]:[-n/i];if(i===0){const a=n/e;return a>0?[]:[Math.sqrt(-a),-Math.sqrt(-a)]}const r=i*i-4*e*n;if(r<0)return[];if(r===0)return[-i/(2*e)];const s=-i-Math.sign(i)*Math.sqrt(r);return[s/(2*e),2*n/s]};window.cubicRealRoots=function(e,i,n,r){if(e===0)return quadraticRealRoots(i,n,r);if(i===0)return depressedCubicRealRoots(e,n,r);const s=i/(3*e),a=s*s,o=n/e,c=o-3*a,d=2*s*a-s*o+r/e;return depressedCubicRealRoots(1,c,d).map(m=>m-s)};window.testCRR=function(e,i,n,r){const s=cubicRealRoots(e,i,n,r);console.log(s),console.log(s.map(a=>r+a*(n+a*(i+a*e))))};window.depressedQuarticRealRoots=function(e,i,n,r){if(e===0)return quadraticRealRoots(i,n,r);if(r===0){const y=depressedCubicRealRoots(e,i,n);return y.includes(0)||y.push(0),y}if(n===0){const y=quadraticRealRoots(e,i,r),_=[];for(const E of y)E<0||(E===0?_.push(0):_.push(Math.sqrt(E),-Math.sqrt(E)));return _}i/=e,n/=e,r/=e;const a=cubicRealRoots(8,8*i,2*i*i-8*r,-n*n).max();if(a<=0)return[];const o=Math.sqrt(2*a),c=2*n/o,d=-(2*i+2*a+c),p=[];d>0?p.push(.5*(o+Math.sqrt(d)),.5*(o-Math.sqrt(d))):d===0&&p.push(.5*o);const m=-(2*i+2*a-c);return m>0?p.push(.5*(-o+Math.sqrt(m)),.5*(-o-Math.sqrt(m))):m===0&&p.push(-.5*o),p};window.testDQRR=function(e,i,n,r){const s=depressedQuarticRealRoots(e,i,n,r);console.log(s),console.log(s.map(a=>r+a*(n+a*(i+a*a*e))))};window.solveSimpleBiquadratic=function(e,i,n,r,s,a){const o=[];if(e===0){if(i===0||s===0)return[];const m=-n/i;return r===0?[{x:-a/s,y:m}]:[{x:(-a-r*m*m)/s,y:m}]}if(r===0){if(i===0||s===0)return[];const m=-a/s;return[{x:m,y:(-n-e*m*m)/i}]}if(i===0){const m=quadraticRealRoots(e,0,n);for(const y of m){const _=a+s*y,E=quadraticRealRoots(r,0,_);for(const C of E)o.push({x:y,y:C})}return o}if(s===0){const m=quadraticRealRoots(r,0,a);for(const y of m){const _=n+i*y,E=quadraticRealRoots(e,0,_);for(const C of E)o.push({x:C,y})}return o}const c=e/i,d=n/i,p=depressedQuarticRealRoots(r*c*c,2*r*c*d,s,a+r*d*d);for(const m of p)o.push({x:m,y:-(c*m*m+d)});return o};window.testSSBQ=function(e,i,n,r,s,a){console.log({A:e,B:i,C:n,D:r,E:s,F:a});const o=solveSimpleBiquadratic(e,i,n,r,s,a);for(const c of o){const d=e*c.x*c.x+i*c.y+n,p=r*c.y*c.y+s*c.x+a;console.log(`${c.x} ${c.y} ${d} ${p}`)}};window.AffineTransform=class Va{constructor(e=1,i=0,n=0,r=1,s=0,a=0){this.a00=e,this.a01=i,this.a10=n,this.a11=r,this.o0=s,this.o1=a}times(e){if(e instanceof Va)return new Va(this.a00*e.a00+this.a01*e.a10,this.a00*e.a01+this.a01*e.a11,this.a10*e.a00+this.a11*e.a10,this.a10*e.a01+this.a11*e.a11,this.a00*e.o0+this.a01*e.o1+this.o0,this.a10*e.o0+this.a11*e.o1+this.o1);if(e instanceof Vector)return e.transformedBy(this);throw new Error("unsupported operation")}translated(e,i=void 0){return e instanceof Vector?new Va(this.a00,this.a01,this.a10,this.a11,this.o0+e.x,this.o1+e.y):new Va(this.a00,this.a01,this.a10,this.a11,this.o0+e,this.o1+i)}rotated(e){return Va.rotation(e).times(this)}scaled(e){return Va.scale(e).times(this)}get withoutTranslation(){return new Va(this.a00,this.a01,this.a10,this.a11)}static translation(e,i){return e instanceof Vector?new Va(1,0,0,1,e.x,e.y):new Va(1,0,0,1,e,i)}static rotation(e){const i=Math.cos(e),n=Math.sin(e);return new Va(i,-n,n,i)}static scale(e){return new Va(e,0,0,e)}static identity(){return new Va}};window.Vector=class la{constructor(e,i){this.x=e,this.y=i}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}plus(e){return new la(this.x+e.x,this.y+e.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}minus(e){return new la(this.x-e.x,this.y-e.y)}times(e){return new la(this.x*e,this.y*e)}asTranslate(){return`translate(${this.x}, ${this.y})`}asRotate(){return`rotate(${180/Math.PI*Math.atan2(this.y,this.x)})`}toString(){return`${this.x}, ${this.y}`}round(e){return new la(Math.round(this.x*e)/e,Math.round(this.y*e)/e)}get copy(){return new la(this.x,this.y)}matrixTransform(e,i,n,r){return new la(e*this.x+i*this.y,n*this.x+r*this.y)}transformedBy(e){return new la(e.a00*this.x+e.a01*this.y+e.o0,e.a10*this.x+e.a11*this.y+e.o1)}get negative(){return new la(-this.x,-this.y)}get normalized(){return this.times(1/this.length)}get right90(){return new la(this.y,-this.x)}get left90(){return new la(-this.y,this.x)}get angle(){return Math.atan2(this.y,this.x)}static horiz(e){return new la(e,0)}static unitFromRadians(e){return new la(Math.cos(e),Math.sin(e))}static unitFromDegrees(e){return la.unitFromRadians(e*Math.PI/180)}};window.Curve=class{position(){throw new NotImplementedError}derivative(){throw new NotImplementedError}secondDerivative(){throw new NotImplementedError}curvature(e){const i=this.derivative(e),n=this.secondDerivative(e),r=i.length;return i.cross(n)/(r*r*r)}shapeAt(e){const i=this.derivative(e);return{t:e,position:this.position(e),derivative:i,direction:i.normalized,curvature:this.curvature(e)}}minimumDistanceTo(e,i,n){let r=.5*(i+n);const s=Math.max(Math.abs(n),Math.abs(i))*Number.EPSILON*16;for(let a=0;;++a){const o=this.position(r),c=this.derivative(r),d=this.secondDerivative(r),p=o.minus(e),m=p.length,y=p.dot(c)*2;y>0?n=r:i=r;const _=(p.dot(d)+c.dot(c))*2,E=_<0?-m/y:-y/_;if(Math.abs(E)<s||a>=16)return m;r=Math.clamp(r+E,i,n)}}};window.LinearPath=class Pp extends Curve{constructor(e,i){super(),this.p0=e.copy,this.p1=i.copy}position(e){return this.p0.times(1-e).plus(this.p1.times(e))}derivative(){return this.p1.minus(this.p0)}secondDerivative(){return new Vector(0,0)}curvature(e){return 0}trimStart(e){const i=this.p1.minus(this.p0).normalized;return new Pp(this.p0.plus(i.times(e)),this.p1)}trimEnd(e){const i=this.p1.minus(this.p0).normalized;return new Pp(this.p0,this.p1.minus(i.times(e)))}transformed(e){return new Pp(this.p0.transformedBy(e),this.p1.transformedBy(e))}get relativeSVG(){const e=this.p1.minus(this.p0);return`l ${e.x} ${e.y}
`}createOffsetLine(e,i=0,n=1){const r=this.p1.minus(this.p0).normalized.right90.times(e);return new Pp(this.position(i).plus(r),this.position(n).plus(r))}static connectCircles(e,i,n,r){const s=n.minus(e).normalized;return new Pp(e.plus(s.times(i)),n.minus(s.times(r)))}};class Ng extends Curve{constructor(e,i,n,r){super(),this.p0=e.copy,this.p1=i.copy,this.p2=n.copy,this.p3=r.copy}position(e){const i=(1-e)*(1-e),n=e*e;return this.p0.times((1-e)*i).plus(this.p1.times(3*e*i)).plus(this.p2.times(3*n*(1-e))).plus(this.p3.times(n*e))}derivative(e){return this.p1.minus(this.p0).times(3*(1-e)*(1-e)).plus(this.p2.minus(this.p1).times(6*e*(1-e))).plus(this.p3.minus(this.p2).times(3*e*e))}secondDerivative(e){return this.p2.minus(this.p1.times(2)).plus(this.p0).times(6*(1-e)).plus(this.p3.minus(this.p2.times(2)).plus(this.p1).times(6*e))}transformed(e){return new Ng(this.p0.transformedBy(e),this.p1.transformedBy(e),this.p2.transformedBy(e),this.p3.transformedBy(e))}get relativeSVG(){const e=this.p1.minus(this.p0),i=this.p2.minus(this.p0),n=this.p3.minus(this.p0);return`c ${e.x} ${e.y} ${i.x} ${i.y} ${n.x} ${n.y}
`}get reverse(){return new Ng(this.p3,this.p2,this.p1,this.p0)}static fitCurveSection(e,i){const n=i.position.minus(e.position),r=e.t>i.t,s=e.direction.cross(i.direction);let a=solveSimpleBiquadratic(1.5*e.curvature,s,-e.direction.cross(n),1.5*i.curvature,s,i.direction.cross(n));return a=r?a.filter(o=>o.x<=0&&o.y<=0):a.filter(o=>o.x>=0&&o.y>=0),a.length===0?null:new Ng(e.position,e.position.plus(e.direction.times(a[0].x)),i.position.minus(i.direction.times(a[0].y)),i.position)}}window.OffsetCurve=class extends Curve{constructor(e,i){super(),this.base=e,this.offset=i}position(e){const i=this.base.position(e),n=this.base.derivative(e);return i.plus(n.normalized.right90.times(this.offset))}derivative(e){return this.base.derivative(e)}curvature(e){return 1/(1/this.base.curvature(e)+this.offset)}shapeAt(e){const i=this.base.shapeAt(e);return{t:i.t,position:i.position.plus(i.direction.right90.times(this.offset)),derivative:i.derivative,direction:i.direction,curvature:i.curvature/(1+this.offset*i.curvature)}}};window.LogarithmicSpiral=class bG extends Curve{constructor(e,i,n){super(),this.center=e,this.scale=i,this.rate=n}position(e){return Vector.unitFromRadians(e).times(this.scale*Math.exp(this.rate*e)).plus(this.center)}derivative(e){const i=Vector.unitFromRadians(e),n=this.scale*Math.exp(this.rate*e);return i.times(n*this.rate).plus(i.left90.times(n))}secondDerivative(e){const i=Vector.unitFromRadians(e),n=this.scale*Math.exp(this.rate*e);return i.times(n*(this.rate*this.rate-1)).plus(i.left90.times(2*n*this.rate))}shapeAt(e){const i=Vector.unitFromRadians(e),n=this.scale*Math.exp(this.rate*e),r=i.times(n),s=r.times(this.rate).plus(r.left90);return{t:e,position:r.plus(this.center),derivative:s,direction:s.normalized,curvature:1/(Math.abs(n)*Math.sqrt(1+this.rate*this.rate))}}angleFromRadius(e){return Math.log(e/this.scale)/this.rate}static fromPolarEndpoints(e,i,n,r,s){const a=Math.log(s/n)/(r-i);return new bG(e,n/Math.exp(a*i),a)}};window.PiecewisePath=class OC{constructor(e=void 0){this.path=e||[]}push(e){this.path.push(e)}transformedBy(e){return new OC(this.path.map(i=>i.transformed(e)))}toSVG(e){const i=this.path[0].position(0),n=[`${e} ${i.x} ${i.y}
`];for(const r of this.path)n.push(r.relativeSVG);return n.join("")}static cubicBezierFitToCurveSection(e,i,n,r=1,s=1){const a=new OC,o=e.shapeAt(i),c=e.shapeAt(n);function d(m,y,_=8){const E=e.shapeAt(.5*(m.t+y.t));return p(m,E,_-1)&&p(E,y,_-1)}function p(m,y,_=8){const E=Ng.fitCurveSection(m,y);if(E===null){if(_<=0)throw new Error("coulnd't decompose curve");return d(m,y,_)}const C=.5*(m.t+y.t);return E.minimumDistanceTo(e.position(C),0,1)>r?d(m,y,_):(a.push(E),!0)}return s>1?d(o,c):p(o,c),a}};window.ExponentialMovingAverage=class{constructor(e=.02,i=5,n=3,r=.4){this.alpha=e,this.maxOutliers=i,this.highOutlierThreshold=n,this.lowOutlierThreshold=r,this.outliers=0,this._average=void 0}get average(){return this._average===void 0?0:this._average}addValue(e){if(this._average===void 0)this._average=e;else{this._average+=this.alpha*(e-this._average);const i=Math.abs(e),n=Math.abs(this._average),r=i>n*this.highOutlierThreshold,s=i<n*this.lowOutlierThreshold;r||s?(this.outliers++,this.outliers>=this.maxOutliers&&(this._average=e,this.outliers=0)):this.outliers=0}}};window.Async={_enabled:!0,get enabled(){return this._enabled},set enabled(t){this._enabled=t},runForTime(t,e,i){const n=i.batchSize||1,r=i.maxTime,s=Date.now();for(let a=e;a>0;){for(let o=0;o<Math.min(a,n);++o)t(a),--a;if(Date.now()-s>=r)return a}return 0},sleepPromise:t=>new Promise(e=>setTimeout(e,t)),run(t,e,i){if(this.enabled){this.enabled=!1;const n=this._run(t,e,i);return i.then?n.then(()=>{i.then(),this.enabled=!0}):n}for(let n=0;n<e;++n)t(n);i.then&&i.then()},async _run(t,e,i){i.progress||(i.progress={}),i.progress.maxIter=e,i.progress.remaining=this.runForTime(t,i.progress.maxIter,i);const n=i.sleepTime||1;if(i.progress.remaining){i.asyncEntry&&i.asyncEntry(i.progress.maxIter-i.progress.remaining);do await this.sleepPromise(n),i.progress.remaining=this.runForTime(t,i.progress.remaining,i),i.asyncProgress&&i.asyncProgress(i.progress.maxIter-i.progress.remaining);while(i.progress.remaining>0);i.asyncExit&&i.asyncExit()}}};window.EventHub=class fg{constructor(){this._handlers={}}on(e,i,n){let r=this._handlers[e];r===void 0&&(r=[],this._handlers[e]=r),r.push({fn:i,target:n})}offAll(e){for(const i of Object.keys(this._handlers))this._handlers[i]=this._handlers[i].filter(n=>n.target!==e)}dispatch(e,i){const n=this._handlers[e];if(n!==void 0)for(const r of n)r.fn(i)}static dispatch(e,...i){fg.logic.dispatch(e,i),GameUI.dispatch(e,i)}static get stats(){function e(i){return Object.values(i._handlers).map(n=>n.length).sum()}return`UI(UPDATE/Total): ${fg.ui._handlers[GAME_EVENT.UPDATE].length}/${e(fg.ui)}; Logic(Total): ${e(fg.logic)}`}};EventHub.logic=new EventHub;EventHub.ui=new EventHub;window.GAME_EVENT={GAME_TICK_BEFORE:"GAME_TICK_BEFORE",GAME_TICK_AFTER:"GAME_TICK_AFTER",REPLICANTI_TICK_BEFORE:"REPLICANTI_TICK_BEFORE",REPLICANTI_TICK_AFTER:"REPLICANTI_TICK_AFTER",DIMBOOST_BEFORE:"DIMBOOST_BEFORE",DIMBOOST_AFTER:"DIMBOOST_AFTER",GALAXY_RESET_BEFORE:"GALAXY_RESET_BEFORE",GALAXY_RESET_AFTER:"GALAXY_RESET_AFTER",SACRIFICE_RESET_BEFORE:"SACRIFICE_RESET_BEFORE",SACRIFICE_RESET_AFTER:"SACRIFICE_RESET_AFTER",BIG_CRUNCH_BEFORE:"BIG_CRUNCH_BEFORE",BIG_CRUNCH_AFTER:"BIG_CRUNCH_AFTER",ETERNITY_RESET_BEFORE:"ETERNITY_RESET_BEFORE",ETERNITY_RESET_AFTER:"ETERNITY_RESET_AFTER",REALITY_RESET_BEFORE:"REALITY_RESET_BEFORE",REALITY_RESET_AFTER:"REALITY_RESET_AFTER",SINGULARITY_RESET_BEFORE:"SINGULARITY_RESET_BEFORE",SINGULARITY_RESET_AFTER:"SINGULARITY_RESET_AFTER",ARMAGEDDON_BEFORE:"ARMAGEDDON_BEFORE",ARMAGEDDON_AFTER:"ARMAGEDDON_AFTER",GLYPHS_EQUIPPED_CHANGED:"GLYPHS_EQUIPPED_CHANGED",GLYPHS_CHANGED:"GLYPHS_CHANGED",GLYPH_SACRIFICED:"GLYPH_SACRIFICED",GLYPH_SET_SAVE_CHANGE:"GLYPH_SET_SAVE_CHANGE",GLYPH_VISUAL_CHANGE:"GLYPH_VISUAL_CHANGE",BREAK_INFINITY:"BREAK_INFINITY",FIX_INFINITY:"FIX_INFINITY",INFINITY_DIMENSION_UNLOCKED:"INFINITY_DIMENSION_UNLOCKED",INFINITY_CHALLENGE_COMPLETED:"INFINITY_CHALLENGE_COMPLETED",INFINITY_UPGRADE_BOUGHT:"INFINITY_UPGRADE_BOUGHT",INFINITY_UPGRADE_CHARGED:"INFINITY_UPGRADE_CHARGED",INFINITY_UPGRADES_DISCHARGED:"INFINITY_UPGRADES_DISCHARGED",ACHIEVEMENT_UNLOCKED:"ACHIEVEMENT_UNLOCKED",CHALLENGE_FAILED:"CHALLENGE_FAILED",REALITY_UPGRADE_BOUGHT:"REALITY_UPGRADE_BOUGHT",REALITY_UPGRADE_TEN_BOUGHT:"REALITY_UPGRADE_TEN_BOUGHT",PERK_BOUGHT:"PERK_BOUGHT",BLACK_HOLE_UNLOCKED:"BLACK_HOLE_UNLOCKED",BLACK_HOLE_UPGRADE_BOUGHT:"BLACK_HOLE_UPGRADE_BOUGHT",GAME_LOAD:"GAME_LOAD",OFFLINE_CURRENCY_GAINED:"OFFLINE_CURRENCY_GAINED",SAVE_CONVERTED_FROM_PREVIOUS_VERSION:"SAVE_CONVERTED_FROM_PREVIOUS_VERSION",REALITY_FIRST_UNLOCKED:"REALITY_FIRST_UNLOCKED",AUTOMATOR_TYPE_CHANGED:"AUTOMATOR_TYPE_CHANGED",AUTOMATOR_SAVE_CHANGED:"AUTOMATOR_SAVE_CHANGED",AUTOMATOR_CONSTANT_CHANGED:"AUTOMATOR_CONSTANT_CHANGED",PELLE_STRIKE_UNLOCKED:"PELLE_STRIKE_UNLOCKED",ACHIEVEMENT_EVENT_OTHER:"ACHIEVEMENT_EVENT_OTHER",ENTER_PRESSED:"ENTER_PRESSED",ARROW_KEY_PRESSED:"ARROW_KEY_PRESSED",UPDATE:"UPDATE",TAB_CHANGED:"TAB_CHANGED",CLOSE_MODAL:"CLOSE_MODAL"};class pg{constructor(e,i,n){if(e===void 0||this.isCustomEffect)return;const r=y=>typeof y=="function",s=y=>typeof y=="number",a=y=>y instanceof Decimal,o=y=>s(y)||a(y);if(!r(e)&&!o(e))throw new Error("Unknown effect value type.");const c=()=>({configurable:!1}),d=(y,_)=>{if(o(_))y.writable=!1,y.value=_;else if(r(_))y.get=_;else throw new Error("Unknown getter type.")};if(n!==void 0){if(!r(n))throw new Error("Effect condition must be a function.");const y=c();y.get=n,Object.defineProperty(this,"isEffectConditionSatisfied",y)}const p=c();if(d(p,e),Object.defineProperty(this,"uncappedEffectValue",p),i!==void 0){const y=c();d(y,i),Object.defineProperty(this,"cap",y)}const m=c();d(m,e),o(i)?s(e)?m.get=()=>Math.min(e,this.cap):a(e)?m.get=()=>Decimal.min(e,this.cap):r(e)&&(m.configurable=!0,m.get=()=>{const y=e(),_=c();if(s(y))_.get=()=>Math.min(e(),this.cap);else if(a(y))_.get=()=>Decimal.min(e(),this.cap);else throw new Error("Unknown effect value type.");return Object.defineProperty(this,"effectValue",_),_.get()}):r(i)&&(s(e)?m.get=()=>{const y=this.cap;return y===void 0?e:Math.min(e,y)}:a(e)?m.get=()=>{const y=this.cap;return y===void 0?e:Decimal.min(e,y)}:r(e)&&(m.configurable=!0,m.get=()=>{const y=e(),_=c();if(s(y))_.get=()=>{const E=this.cap;return E===void 0?e():Math.min(e(),E)};else if(a(y))_.get=()=>{const E=this.cap;return E===void 0?e():Decimal.min(e(),E)};else throw new Error("Unknown effect value type.");return Object.defineProperty(this,"effectValue",_),_.get()})),Object.defineProperty(this,"effectValue",m)}get effectValue(){throw new Error("Effect is undefined.")}get uncappedEffectValue(){throw new Error("Effect is undefined.")}get cap(){throw new Error("Cap is undefined.")}get isEffectConditionSatisfied(){return!0}get isEffectActive(){return!0}get canBeApplied(){return this.isEffectActive&&this.isEffectConditionSatisfied}effectOrDefault(e){return this.canBeApplied?this.effectValue:e}applyEffect(e){this.canBeApplied&&e(this.effectValue)}get isCustomEffect(){return!1}}const T8={sum(...t){let e=0;return Yc(t,i=>e+=i),e},product(...t){let e=1;return Yc(t,i=>e*=i),e},last(t,...e){let i=t,n=!1;const r=e.filter(a=>a!=null).reverse(),s=a=>{i=a,n=!0};for(const a of r)if(a.applyEffect(s),n)break;return i},max(t,...e){let i=t;return Yc(e,n=>i=Math.max(i,n)),i},min(t,...e){let i=t;return Yc(e,n=>i=Math.min(i,n)),i}};Decimal.prototype.plusEffectOf=function(t){let e=this;return t.applyEffect(i=>e=e.plus(i)),e};Decimal.prototype.plusEffectsOf=function(...t){let e=this;return Yc(t,i=>e=e.plus(i)),e};Decimal.prototype.minusEffectOf=function(t){let e=this;return t.applyEffect(i=>e=e.minus(i)),e};Decimal.prototype.minusEffectsOf=function(...t){let e=this;return Yc(t,i=>e=e.minus(i)),e};Decimal.prototype.timesEffectOf=function(t){let e=this;return t.applyEffect(i=>e=e.times(i)),e};Decimal.prototype.timesEffectsOf=function(...t){let e=this.mantissa,i=this.exponent;return Yc(t,n=>{const r=typeof n=="number"?new Decimal(n):n;e*=r.mantissa,i+=r.exponent}),Decimal.fromMantissaExponent(e,i)};Decimal.prototype.dividedByEffectOf=function(t){let e=this;return t.applyEffect(i=>e=e.dividedBy(i)),e};Decimal.prototype.dividedByEffectsOf=function(...t){let e=this;return Yc(t,i=>e=e.dividedBy(i)),e};Decimal.prototype.powEffectOf=function(t){let e=this;return t.applyEffect(i=>e=e.pow(i)),e};Decimal.prototype.powEffectsOf=function(...t){let e=this;return Yc(t,i=>e=e.pow(i)),e};function Yc(t,e){for(const i of t)i!=null&&i.applyEffect(e)}class yn extends pg{constructor(e){if(!e)throw new Error("Must specify config for GameMechanicState");if(super(e.effect,e.cap,e.effectCondition),this._config=e,e.effects!==void 0){this.effects={};for(const i in e.effects){const n=e.effects[i];let r;typeof n=="number"||n instanceof Decimal?r=new pg(n):typeof n=="function"?r=new pg(e.effect?()=>n(this.effectValue):n):r=new pg(n.effect,n.cap,n.effectCondition),Object.defineProperty(r,"canBeApplied",{configurable:!1,get:()=>this.canBeApplied}),this.effects[i]=r}}}get config(){return this._config}get id(){return this.config.id}registerEvents(e,i){if(e!==void 0)for(const n of e instanceof Array?e:[e])EventHub.logic.on(n,i,this)}static createAccessor(e){const i=mapGameData(e,r=>new this(r)),n=r=>i[r];return n.index=i,n}}class Vd extends yn{constructor(e){if(super(e),this.id<0||this.id>31)throw new Error(`Id ${this.id} out of bit range`)}get bits(){throw new NotImplementedError}set bits(e){throw new NotImplementedError}get isUnlocked(){return!!(this.bits&1<<this.id)}get canBeApplied(){return this.isUnlocked&&this.isEffectActive}get canBeUnlocked(){return!this.isUnlocked}onUnlock(){}unlock(){this.canBeUnlocked&&(this.bits|=1<<this.id,this.onUnlock())}}class Nk extends yn{get currency(){throw new NotImplementedError}get isAffordable(){return this.currency.gte(this.cost)}get isAvailableForPurchase(){return!0}get isRebuyable(){return!1}get cost(){return this.config.cost}get isBought(){throw new NotImplementedError}set isBought(e){throw new NotImplementedError}get canBeBought(){return!this.isBought&&this.isAffordable&&this.isAvailableForPurchase}purchase(){return this.canBeBought?(this.currency.subtract(this.cost),this.isBought=!0,this.onPurchased(),GameUI.update(),!0):!1}onPurchased(){}get isEffectActive(){return this.isBought}}class Gf extends Nk{get set(){throw new NotImplementedError}get isBought(){return this.set.has(this.id)}set isBought(e){e?this.set.add(this.id):this.set.delete(this.id)}}class Gk extends Nk{get bits(){throw new NotImplementedError}set bits(e){throw new NotImplementedError}get bitIndex(){throw new NotImplementedError}get isBought(){return(this.bits&1<<this.bitIndex)!==0}set isBought(e){e?this.bits|=1<<this.bitIndex:this.bits&=~(1<<this.bitIndex)}}class su extends yn{get currency(){throw new NotImplementedError}get isAffordable(){return this.currency.gte(this.cost)}get cost(){return this.config.cost()}get isAvailableForPurchase(){return!0}get isCapped(){return!1}get isRebuyable(){return!0}get boughtAmount(){throw new NotImplementedError}set boughtAmount(e){throw new NotImplementedError}get isEffectActive(){return this.boughtAmount>0}get canBeBought(){return this.isAffordable&&this.isAvailableForPurchase&&!this.isCapped}purchase(){return!this.canBeBought||GameEnd.creditsEverClosed?!1:(this.currency.subtract(this.cost),this.boughtAmount++,this.onPurchased(),GameUI.update(),!0)}onPurchased(){}}const w8=Object.freeze(Object.defineProperty({__proto__:null,BitPurchasableMechanicState:Gk,BitUpgradeState:Vd,Effect:pg,Effects:T8,GameMechanicState:yn,PurchasableMechanicState:Nk,RebuyableMechanicState:su,SetPurchasableMechanicState:Gf},Symbol.toStringTag,{value:"Module"})),He={activeDimCount(t){switch(t){case"AD":return Math.clamp(AntimatterDimensions.all.filter(e=>e.isProducing).length,1,EternityChallenge(7).isRunning?7:8);case"ID":return InfinityDimensions.all.filter(e=>e.isProducing).length;case"TD":return TimeDimensions.all.filter(e=>e.isProducing).length;default:throw new Error("Unrecognized Dimension type in Multiplier tab GameDB entry")}},globalGalaxyMult(){return Effects.product(InfinityUpgrade.galaxyBoost,InfinityUpgrade.galaxyBoost.chargedEffect,BreakInfinityUpgrade.galaxyBoost,TimeStudy(212),TimeStudy(232),Achievement(86),Achievement(178),InfinityChallenge(5).reward,PelleUpgrade.galaxyPower,PelleRifts.decay.milestones[1])*Pelle.specialGlyphEffect.power},decomposeTickspeed(){let t=effectiveBaseGalaxies();const e=this.globalGalaxyMult();let i,n;if(t<3){let o=1.1245;player.galaxies===1&&(o=1.11888888),player.galaxies===2&&(o=1.11267177),NormalChallenge(5).isRunning&&(o=1.08,player.galaxies===1&&(o=1.07632),player.galaxies===2&&(o=1.072)),o/=.965**2;const c=Math.log10(o),d=.02*e;t*=Pelle.specialGlyphEffect.power,n=Tickspeed.totalUpgrades*c,i=-Math.log10(Math.max(.01,1/o-t*d))/c}else{t-=2,t*=e,t*=getAdjustedGlyphEffect("realitygalaxies")*(1+ImaginaryUpgrade(9).effectOrDefault(0)),t*=Pelle.specialGlyphEffect.power;const o=.965**2/(NormalChallenge(5).isRunning?.83:.8),c=Math.log10(o),d=-L.D0_965.log10();n=Tickspeed.totalUpgrades*c,i=1+t/c*d}i*=3;const r=L.D1.dividedByEffectsOf(Achievement(36),Achievement(45),Achievement(66),Achievement(83));let s=r.log10()/Tickspeed.perSecond.log10();r.eq(1)&&(s=0),t===0&&(i=0);let a=(1-s)/(n+i);return Tickspeed.totalUpgrades===0&&(a=0),{base:s,tickspeed:n*a,galaxies:i*a}},achievementDimCheck(t,e){switch(t){case 23:return e==="AD8";case 28:case 31:case 68:case 71:return e==="AD1";case 94:return e==="ID1";case 34:return e.substr(0,2)==="AD"&&Number(e.charAt(2))!==8;case 64:return e.substr(0,2)==="AD"&&Number(e.charAt(2))<=4;default:return!0}},timeStudyDimCheck(t,e){switch(t){case 11:return e==="TD1";case 71:return e.substr(0,2)==="AD"&&Number(e.charAt(2))!==8;case 72:return e==="ID4";case 73:return e==="TD3";case 214:return e==="AD8";case 227:return e==="TD4";case 234:return e==="AD1";default:return!0}},ICDimCheck(t,e){switch(t){case 1:case 6:return e.substr(0,2)==="ID";case 3:case 4:return e.substr(0,2)==="AD";case 8:return e.substr(0,2)==="AD"&&Number(e.charAt(2))>1&&Number(e.charAt(2))<8;default:return!1}},ECDimCheck(t,e){switch(t){case 1:case 10:return e.substr(0,2)==="TD";case 2:return e==="ID1";case 4:case 9:return e.substr(0,2)==="ID";case 7:return e==="ID8";default:return!1}},blackHoleSpeeds(){const t=BlackHoles.list.filter(r=>r.isUnlocked).map(r=>r.isActive?r.power:1).reduce((r,s)=>r*s,1),e=BlackHole(1),i=BlackHole(2),n=1+(e.isUnlocked?e.dutyCycle*(e.power-1):0)+(i.isUnlocked?e.dutyCycle*i.dutyCycle*e.power*(i.power-1):0);return{current:t,average:n}},pluralizeDimensions(t){return t===1?"Dimension ":"Dimensions"},evenDimNC12Production(){const t=i=>[2,4,6].includes(i)?.1*(8-i):0,e=Math.clampMin(2*Math.floor(He.activeDimCount("AD")/2),2);return AntimatterDimensions.all.filter(i=>i.isProducing&&i.tier%2===0).map(i=>i.multiplier.times(i.amount.pow(t(i.tier)))).reduce((i,n)=>i.times(n),L.D1).times(AntimatterDimension(e).totalAmount)},oddDimNC12Production(){const t=Math.clampMin(2*Math.floor(He.activeDimCount("AD")/2-.5)+1,1);return AntimatterDimensions.all.filter(e=>e.isProducing&&e.tier%2===1).map(e=>e.multiplier).reduce((e,i)=>e.times(i),L.D1).times(AntimatterDimension(t).totalAmount)},actualNC12Production(){return Decimal.max(this.evenDimNC12Production(),this.oddDimNC12Production())},multInNC12(t){const e=n=>[2,4,6].includes(n)?.1*(8-n):0,i=AntimatterDimension(t);return i.isProducing?i.multiplier.times(i.totalAmount.pow(e(t))):L.D1},isNC12ProducingEven(){return this.evenDimNC12Production().gt(this.oddDimNC12Production())}},C8={time:{id:"time",symbol:GLYPH_SYMBOLS.time,color:"#b241e3",primaryEffect:"timepow",alchemyResource:ALCHEMY_RESOURCE.TIME,hasRarity:!0},dilation:{id:"dilation",symbol:GLYPH_SYMBOLS.dilation,color:"#64dd17",alchemyResource:ALCHEMY_RESOURCE.DILATION,hasRarity:!0},replication:{id:"replication",symbol:GLYPH_SYMBOLS.replication,color:"#03a9f4",alchemyResource:ALCHEMY_RESOURCE.REPLICATION,hasRarity:!0},infinity:{id:"infinity",symbol:GLYPH_SYMBOLS.infinity,color:"#b67f33",primaryEffect:"infinitypow",alchemyResource:ALCHEMY_RESOURCE.INFINITY,hasRarity:!0},power:{id:"power",symbol:GLYPH_SYMBOLS.power,color:"#22aa48",primaryEffect:"powerpow",alchemyResource:ALCHEMY_RESOURCE.POWER,hasRarity:!0},effarig:{id:"effarig",symbol:GLYPH_SYMBOLS.effarig,color:"#e21717",isUnlocked:()=>EffarigUnlock.reality.isUnlocked,canCustomize:()=>EffarigUnlock.reality.isUnlocked,alchemyResource:ALCHEMY_RESOURCE.EFFARIG,hasRarity:!0},reality:{id:"reality",symbol:GLYPH_SYMBOLS.reality,fixedSymbolColor:!0,isUnlocked:()=>!1,canCustomize:()=>player.reality.glyphs.createdRealityGlyph,alchemyResource:ALCHEMY_RESOURCE.REALITY},cursed:{id:"cursed",symbol:GLYPH_SYMBOLS.cursed,color:"#000000",fixedSymbolColor:!0,isUnlocked:()=>!1,canCustomize:()=>V.isFlipped},companion:{id:"companion",symbol:GLYPH_SYMBOLS.companion,color:"#feaec9",fixedSymbolColor:!0,isUnlocked:()=>!1,canCustomize:()=>!1}},S8={music:{id:"music",symbol:"♫",color:"#FF80AB",isUnlocked:()=>TeresaUnlocks.shop.isUnlocked},blob:{id:"blob",symbol:"",color:"#E4B51A",preventBlur:!0,isUnlocked:()=>Themes.available().map(t=>t.name).includes("S11"),canCustomize:()=>!1}},Et={ANTIMATTER:"ANTIMATTER",INFINITY:"INFINITY",ETERNITY:"ETERNITY",DILATION:"DILATION",REALITY:"REALITY",AUTOMATION:"AUTOMATION",ACHIEVEMENT:"ACHIEVEMENT"},NC={firstPerk:{id:0,label:"START",family:Et.REALITY,get description(){return`Remove the achievement requirement from the Reality Study
      and allow you to choose from ${formatInt(4)} different Glyphs on Reality.`},effect:4,layoutPosList:[76596,80200,80600,80200,80188,67769]},startAM:{id:10,label:"SAM",family:Et.ANTIMATTER,get description(){return`Start every reset with ${format(5e130)} antimatter.`},bumpCurrency:()=>Currency.antimatter.bumpTo(5e130),effect:5e130,layoutPosList:[76559,80600,80199,80600,82191,75745]},startIP1:{id:12,label:"SIP1",family:Et.INFINITY,get description(){return`Start every Eternity and Reality with ${format(5e15)} Infinity Points.`},bumpCurrency:()=>Currency.infinityPoints.bumpTo(5e15),effect:5e15,layoutPosList:[74523,80599,79798,80599,82594,91322]},startIP2:{id:13,label:"SIP2",family:Et.INFINITY,get description(){return`Start every Eternity and Reality with ${format(5e130)} Infinity Points.`},bumpCurrency:()=>Currency.infinityPoints.bumpTo(5e130),effect:5e130,layoutPosList:[62111,80598,79797,80998,82597,91690]},startEP1:{id:14,label:"SEP1",family:Et.ETERNITY,get description(){return`Start every Reality with ${formatInt(10)} Eternity Points.`},bumpCurrency:()=>Currency.eternityPoints.bumpTo(10),effect:10,automatorPoints:5,shortDescription:()=>`Start with ${formatInt(10)} EP`,layoutPosList:[88915,80999,79398,80598,82197,103734]},startEP2:{id:15,label:"SEP2",family:Et.ETERNITY,get description(){return`Start every Reality with ${format(5e3)} Eternity Points.`},bumpCurrency:()=>Currency.eternityPoints.bumpTo(5e3),effect:5e3,layoutPosList:[92484,81398,78998,80597,82200,102193]},startEP3:{id:16,label:"SEP3",family:Et.ETERNITY,get description(){return`Start every Reality with ${format(5e9)} Eternity Points.`},bumpCurrency:()=>Currency.eternityPoints.bumpTo(5e9),effect:5e9,automatorPoints:10,shortDescription:()=>`Start with ${format(5e9)} EP`,layoutPosList:[96459,81798,78997,80596,82203,106224]},startTP:{id:17,label:"STP",family:Et.DILATION,get description(){return`After unlocking Dilation, gain ${formatInt(10)} Tachyon Particles.`},effect:()=>Enslaved.isRunning?1:10,automatorPoints:5,shortDescription:()=>`Start with ${formatInt(10)} TP`,layoutPosList:[102120,81399,79399,80197,81800,109376]},antimatterNoReset:{id:30,label:"ANR",family:Et.ANTIMATTER,description:`Dimension Boosts and Antimatter Galaxies no longer reset
      Antimatter, Antimatter Dimensions, Tickspeed, or Dimensional Sacrifice.`,layoutPosList:[85343,81e3,79799,80199,82194,92553]},studyPassive:{id:31,label:"PASS",family:Et.ETERNITY,get description(){return`Improve Time Study 122 to ${formatX(50)} Eternity Points and
        Time Study 142 to ${formatX(L.E50)} Infinity Points.
        ${Pelle.isDoomed?"":`In addition, Time Study 132 also makes Replicanti ${format(3)} times faster.`}`},layoutPosList:[67054,79400,80999,80202,78594,52589]},autounlockEU1:{id:40,label:"EU1",family:Et.ETERNITY,description:"Automatically unlock the first row of Eternity Upgrades for free once you have Eternities.",layoutPosList:[89407,80601,80201,79800,80591,73007]},autounlockEU2:{id:41,label:"EU2",family:Et.ETERNITY,get description(){return`The second row of Eternity Upgrades is automatically purchased
        at ${formatX(1e10)} times less than their original price.`},layoutPosList:[103008,81001,80202,79400,80594,81867]},autounlockDilation1:{id:42,label:"DU1",family:Et.DILATION,description:"After unlocking Dilation, automatically unlock the second row of Dilation Upgrades for free.",layoutPosList:[119833,81801,79403,79398,80200,97510]},autounlockDilation2:{id:43,label:"DU2",family:Et.DILATION,description:"After unlocking Dilation, automatically unlock the third row of Dilation Upgrades for free.",layoutPosList:[124260,82201,79003,79397,80203,85513]},autounlockDilation3:{id:44,label:"ATT",family:Et.DILATION,description:"Automatically purchase the passive Time Theorem generation Dilation Upgrade once you can afford it.",automatorPoints:5,shortDescription:()=>"Auto-purchase TT generation",layoutPosList:[124289,82601,79002,79396,80206,72282]},autounlockTD:{id:45,label:"ATD",family:Et.DILATION,description:"Auto-unlock Time Dimensions 5-8 once you can afford them.",automatorPoints:5,shortDescription:()=>"Auto-unlock TD 5-8",layoutPosList:[127117,82600,79001,79796,80209,61869]},autounlockReality:{id:46,label:"REAL",family:Et.REALITY,get description(){return`Auto-unlocks Reality once you have ${format(L.E4000)} Eternity Points
        and have unlocked Time Dimension 8.`},automatorPoints:10,shortDescription:()=>"Auto-unlock Reality",layoutPosList:[124343,83e3,79e3,79795,80212,71046]},bypassIDAntimatter:{id:51,label:"IDR",family:Et.INFINITY,description:"Infinity Dimensions no longer have antimatter requirements.",layoutPosList:[51317,80998,79397,80997,82600,104489]},bypassTGReset:{id:52,label:"TGR",family:Et.DILATION,description:"The 2nd rebuyable Dilation Upgrade no longer resets your Dilated Time.",layoutPosList:[116568,81800,79801,79798,81400,112677]},bypassECDilation:{id:53,label:"DILR",family:Et.DILATION,description:"Remove the Eternity Challenge 11, Eternity Challenge 12, and total Time Theorem requirements from Time Dilation unlock.",automatorPoints:5,shortDescription:()=>"Unlocking Dilation only requires TT",layoutPosList:[129011,81802,80203,80198,80600,109116]},bypassEC1Lock:{id:54,label:"EC1R",family:Et.ETERNITY,description:"Remove the Eternity Challenge 1 requirement from Time Study 181.",layoutPosList:[64284,79e3,81399,80603,78597,44167]},bypassEC2Lock:{id:55,label:"EC2R",family:Et.ETERNITY,description:"Remove the Eternity Challenge 2 requirement from Time Study 181.",layoutPosList:[55463,78999,80998,80602,78197,48944]},bypassEC3Lock:{id:56,label:"EC3R",family:Et.ETERNITY,description:"Remove the Eternity Challenge 3 requirement from Time Study 181.",layoutPosList:[75475,79001,81400,80203,78997,47822]},bypassEC5Lock:{id:57,label:"EC5R",family:Et.ETERNITY,description:"Remove the Eternity Challenge 5 requirement from Time Study 62.",layoutPosList:[70626,79800,81e3,80201,78591,62607]},autocompleteEC1:{id:60,label:"PEC1",family:Et.AUTOMATION,get description(){return`Auto-complete one Eternity Challenge every ${formatInt(60)} minutes (real-time).
              ECs will be completed sequentially, requiring all previous
              ECs to be fully completed before progressing to the next EC.`},effect:60,automatorPoints:5,shortDescription:()=>`Auto-complete ECs every ${formatInt(60)} minutes`,layoutPosList:[90660,79402,81002,79803,79397,46664]},autocompleteEC2:{id:61,label:"PEC2",family:Et.AUTOMATION,get description(){return`Auto-complete one Eternity Challenge every ${formatInt(40)} minutes (real-time).
        (${formatInt(20)} minute decrease)`},effect:40,layoutPosList:[95485,79002,81402,79804,79400,53486]},autocompleteEC3:{id:62,label:"PEC3",family:Et.AUTOMATION,get description(){return`Auto-complete one Eternity Challenge every ${formatInt(20)} minutes (real-time).
        (${formatInt(20)} minute decrease)`},effect:20,automatorPoints:10,shortDescription:()=>`Auto-complete ECs every ${formatInt(20)} minutes`,layoutPosList:[96311,78602,81401,80204,79403,61903]},studyActiveEP:{id:70,label:"ACT",family:Et.ETERNITY,description:"Active path multipliers are always maximized.",layoutPosList:[56633,79399,80599,80601,78194,58565]},studyIdleEP:{id:71,label:"IDL",family:Et.ETERNITY,get description(){return`Idle path multipliers start as if you have spent ${formatInt(15)} minutes in this Infinity/Eternity.`},effect:15,layoutPosList:[80248,79401,81001,79802,78994,56239]},studyECRequirement:{id:72,label:"ECR",family:Et.ETERNITY,description:"Remove non-Time Theorem requirements for unlocking Eternity Challenges.",automatorPoints:10,shortDescription:()=>"Remove EC secondary requirements",layoutPosList:[62714,78600,81398,80604,78600,40599]},studyECBulk:{id:73,label:"ECB",family:Et.ETERNITY,description:`You can complete multiple tiers of Eternity Challenges at once if
      you reach the goal for a higher completion of that challenge.`,automatorPoints:15,shortDescription:()=>"Bulk EC Completion",layoutPosList:[62741,78200,81397,81004,78603,41435]},retroactiveTP1:{id:80,label:"TP1",family:Et.DILATION,get description(){return`When buying the 3rd rebuyable Dilation Upgrade,
        multiply your current Tachyon Particle amount by ${formatFloat(1.5,1)}.`},effect:1.5,layoutPosList:[111739,81799,79800,79797,81403,115434]},retroactiveTP2:{id:81,label:"TP2",family:Et.DILATION,get description(){return`When buying the 3rd rebuyable Dilation Upgrade,
        multiply your current Tachyon Particle amount by ${formatInt(2)}.`},effect:2,layoutPosList:[103757,82199,79401,80196,81406,117382]},retroactiveTP3:{id:82,label:"TP3",family:Et.DILATION,get description(){return`When buying the 3rd rebuyable Dilation Upgrade,
        multiply your current Tachyon Particle amount by ${formatFloat(2.5,1)}.`},effect:2.5,layoutPosList:[96175,82599,79400,80195,81409,116540]},retroactiveTP4:{id:83,label:"TP4",family:Et.DILATION,get description(){return`When buying the 3rd rebuyable Dilation Upgrade,
        multiply your current Tachyon Particle amount by ${formatInt(3)}.`},effect:3,automatorPoints:10,shortDescription:()=>`${formatX(3)} TP upgrade applies retroactively`,layoutPosList:[86984,82598,78999,80595,81412,114103]},autobuyerDilation:{id:100,label:"DAU",family:Et.AUTOMATION,description:"Unlock autobuyers for the repeatable Dilation Upgrades.",automatorPoints:5,shortDescription:()=>"Dilation Upgrade Autobuyers",layoutPosList:[117401,81401,79802,79799,80597,96672]},autobuyerFasterID:{id:101,label:"IDAS",family:Et.AUTOMATION,get description(){return`Infinity Dimension autobuyers work ${formatX(3)} faster.`},effect:1/3,automatorPoints:5,shortDescription:()=>"Faster ID Autobuyers",layoutPosList:[74095,80199,80198,81e3,82997,77720]},autobuyerFasterReplicanti:{id:102,label:"REPAS",family:Et.AUTOMATION,get description(){return`Replicanti autobuyers work ${formatX(3)} faster.`},effect:1/3,automatorPoints:5,shortDescription:()=>"Faster Replicanti Autobuyers",layoutPosList:[57685,80198,80197,80999,83e3,79297]},autobuyerFasterDilation:{id:103,label:"DAS",family:Et.AUTOMATION,get description(){return`Dilation Upgrade autobuyers work ${formatX(3)} faster.`},effect:1/3,automatorPoints:5,shortDescription:()=>"Faster Dilation Autobuyers",layoutPosList:[113895,82602,79402,79395,80609,72715]},ttBuySingle:{id:104,label:"TTS",family:Et.AUTOMATION,description:"Unlock a Time Theorem Autobuyer which buys single Time Theorems every tick.",automatorPoints:5,shortDescription:()=>"Single TT Autobuyer",layoutPosList:[44631,79398,80598,81001,77797,57325]},ttFree:{id:105,label:"TTF",family:Et.AUTOMATION,get description(){return"Purchasing Time Theorems no longer spends your Antimatter, Infinity Points, or Eternity Points."},layoutPosList:[33840,78998,80597,81002,77800,67309]},ttBuyMax:{id:106,label:"TTM",family:Et.AUTOMATION,get description(){return"Upgrade the Time Theorem Autobuyer to buy max Time Theorems."},automatorPoints:10,shortDescription:()=>"Max TT Autobuyer",layoutPosList:[25055,78598,80997,81003,77803,65739]},dilationAutobuyerBulk:{id:107,label:"DAB",family:Et.AUTOMATION,get description(){return"Dilation Upgrade autobuyers buy three times as many Dilation Upgrades at once."},effect:3,automatorPoints:5,shortDescription:()=>"Dilation Autobuyer bulk",layoutPosList:[127384,81400,79803,79399,81e3,103048]},achievementGroup1:{id:201,label:"ACH1",family:Et.ACHIEVEMENT,get description(){return`Reduce the Achievement timer to ${formatInt(20)} minutes per
        Achievement (${formatInt(10)} minute decrease).`},effect:10,automatorPoints:5,shortDescription:()=>`Faster Achievements: every ${formatInt(20)} minutes`,layoutPosList:[65386,80201,80601,79801,79791,81371]},achievementGroup2:{id:202,label:"ACH2",family:Et.ACHIEVEMENT,get description(){return`Reduce the Achievement timer to ${formatInt(12)} minutes per
        Achievement (${formatInt(8)} minute decrease).`},effect:8,layoutPosList:[54976,80202,80602,79401,79794,93780]},achievementGroup3:{id:203,label:"ACH3",family:Et.ACHIEVEMENT,get description(){return`Reduce the Achievement timer to ${formatInt(6)} minutes per
        Achievement (${formatInt(6)} minute decrease).`},effect:6,layoutPosList:[44168,80602,80603,79402,79797,83005]},achievementGroup4:{id:204,label:"ACH4",family:Et.ACHIEVEMENT,get description(){return`Reduce the Achievement timer to ${formatInt(2)} minutes per
        Achievement (${formatInt(4)} minute decrease).`},effect:4,layoutPosList:[33760,81002,81003,79403,79800,95422]},achievementGroup5:{id:205,label:"ACHNR",family:Et.ACHIEVEMENT,get description(){return`Immediately unlock the first ${formatInt(13)} rows of Achievements
        and Reality no longer resets them.`},automatorPoints:10,shortDescription:()=>"Keep Achievements on Reality",layoutPosList:[23353,81402,81403,79404,79803,84639]}},k8=function(){const t=NC,e=[[t.firstPerk,t.achievementGroup1,t.startAM,t.autounlockEU1,t.bypassEC5Lock],[t.startAM,t.antimatterNoReset,t.startIP1],[t.antimatterNoReset,t.startEP1],[t.startIP1,t.startIP2,t.startEP1,t.autobuyerFasterID],[t.startIP2,t.bypassIDAntimatter,t.autobuyerFasterReplicanti],[t.startEP1,t.startEP2,t.startTP],[t.startEP2,t.startEP3],[t.startTP,t.startEP1,t.retroactiveTP1],[t.autounlockEU1,t.autounlockEU2],[t.autounlockEU2,t.autounlockEU1,t.autobuyerDilation],[t.autounlockDilation1,t.autounlockDilation2],[t.autounlockDilation2,t.autounlockDilation3],[t.autounlockDilation3,t.autobuyerFasterDilation,t.autounlockTD],[t.autounlockTD,t.autounlockReality],[t.bypassTGReset,t.autobuyerDilation,t.retroactiveTP1],[t.bypassEC1Lock,t.bypassEC2Lock,t.bypassEC3Lock,t.studyECRequirement],[t.bypassEC2Lock,t.studyActiveEP,t.bypassEC1Lock],[t.bypassEC3Lock,t.studyIdleEP,t.bypassEC1Lock],[t.bypassEC5Lock,t.studyActiveEP,t.studyIdleEP,t.studyPassive],[t.studyPassive,t.bypassEC1Lock],[t.autocompleteEC1,t.autocompleteEC2],[t.autocompleteEC2,t.autocompleteEC3],[t.studyActiveEP,t.bypassEC2Lock,t.ttBuySingle],[t.studyIdleEP,t.bypassEC3Lock,t.autocompleteEC1],[t.studyECRequirement,t.studyECBulk],[t.retroactiveTP1,t.bypassTGReset,t.startTP,t.retroactiveTP2],[t.retroactiveTP2,t.retroactiveTP3],[t.retroactiveTP3,t.retroactiveTP4],[t.autobuyerDilation,t.autounlockEU2,t.autounlockDilation1,t.bypassECDilation,t.bypassTGReset,t.dilationAutobuyerBulk],[t.autobuyerFasterID],[t.ttBuySingle,t.ttFree],[t.ttFree,t.ttBuyMax],[t.achievementGroup1,t.achievementGroup2],[t.achievementGroup2,t.achievementGroup3],[t.achievementGroup3,t.achievementGroup4],[t.achievementGroup4,t.achievementGroup5]],i={};for(const n of Object.values(NC)){const r=[],s=e.find(o=>o[0]===n);s!==void 0&&r.push(...s.slice(1));const a=e.filter(o=>o.slice(1).some(c=>c===n)).map(o=>o[0]);r.push(...a),i[n.id]=[...new Set(r.map(o=>o.id))]}return i}();function K(t,e,i,n,r,s,a,o){var c=typeof t=="function"?t.options:t;return e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),s&&(c._scopeId="data-v-"+s),{exports:t,options:c}}const A8={name:"AutobuyerInput",props:{autobuyer:{type:Object,required:!0},property:{type:String,required:!0},type:{type:String,required:!0}},data(){return{isValid:!0,isFocused:!1,displayValue:"0"}},computed:{inputType(){return this.type==="int"?"number":"text"},typeFunctions(){const t=c0[this.type];if(t===void 0)throw new Error("Unknown autobuyer input type");return t},validityClass(){return this.isValid?void 0:"o-autobuyer-input--invalid"}},methods:{update(){this.isFocused||this.updateActualValue()},updateActualValue(){const t=this.autobuyer[this.property];this.areEqual(this.actualValue,t)||(this.actualValue=this.typeFunctions.copyValue(t),this.updateDisplayValue())},areEqual(t,e){return e===void 0||t===void 0?!1:this.typeFunctions.areEqual(t,e)},updateDisplayValue(){this.displayValue=this.typeFunctions.formatValue(this.actualValue)},handleInput(t){const e=t.target.value;if(this.displayValue=e,e.length===0){this.isValid=!1;return}const i=this.typeFunctions.tryParse(e);this.isValid=i!==void 0,this.actualValue=this.typeFunctions.copyValue(i)},handleFocus(){this.isFocused=!0},handleChange(t){this.displayValue==="69"&&SecretAchievement(28).unlock(),this.isValid?this.autobuyer[this.property]=this.typeFunctions.copyValue(this.actualValue):this.updateActualValue(),this.updateDisplayValue(),this.isValid=!0,this.isFocused=!1,t.target.blur()}}},c0={decimal:{areEqual:(t,e)=>Decimal.eq(t,e),formatValue:t=>Notation.scientific.format(t,2,2),copyValue:t=>new Decimal(t),tryParse:t=>{if(t)try{let e;if(/^e\d*[.]?\d+$/u.test(t.replaceAll(",","")))e=Decimal.pow10(parseFloat(t.replaceAll(",","").slice(1)));else if(/^\d*[.]?\d+(e\d+)?$/u.test(t.replaceAll(",","")))e=Decimal.fromString(t.replaceAll(",",""));else if(/^\d*[.]?\d+(e\d*[.]?\d+)?$/u.test(t.replaceAll(",",""))){const i=/(?<mantissa>\d*[.]?\d+)e(?<exponent>\d*[.]?\d+)/u,n=t.replaceAll(",","").match(i);e=Decimal.pow10(Math.log10(Number(n.groups.mantissa))+Number(n.groups.exponent))}else return;return isNaN(e.mantissa)||isNaN(e.exponent)?void 0:e}catch{return}}},float:{areEqual:(t,e)=>t===e,formatValue:t=>t.toString(),copyValue:t=>t,tryParse:t=>{const e=parseFloat(t);return isNaN(e)?void 0:e}},int:{areEqual:(t,e)=>t===e,formatValue:t=>t.toString(),copyValue:t=>t,tryParse:t=>{if(!t||!/^\d+$/u.test(t.replaceAll(",","")))return;const e=parseInt(t,10);return isNaN(e)||!Number.isInteger(e)?void 0:e}}};var R8=function(){var e=this,i=e._self._c;return i("input",{staticClass:"o-autobuyer-input",class:e.validityClass,attrs:{type:e.inputType},domProps:{value:e.displayValue},on:{change:e.handleChange,focus:e.handleFocus,input:e.handleInput}})},I8=[],D8=K(A8,R8,I8,!1,null,"508218a0");const Ym=D8.exports,x8={paramTypes:[{name:"tree",isValidString:t=>{const e=TimeStudyTree.isValidImportString(t),i=t.match(/^(NAME (.{1,4})|ID (\d))$/u),n=i?player.timestudy.presets.some(r=>r.name===i[2])||Number(i[3])>0&&Number(i[3])<7:!1;return e||n}},{name:"integer",isValidString:t=>c0.int.tryParse(t),map:t=>Math.round(parseInt(t,10))},{name:"decimal",isValidString:t=>c0.decimal.tryParse(t),map:t=>c0.decimal.tryParse(t)},{name:"boolean",boolDisplay:[!0,!1]},{name:"nowait",boolDisplay:["Continue onward","Keep buying Studies"]},{name:"mode",boolDisplay:["X times highest","Seconds since last"],map:t=>t?"mult":"time"}],scripts:[{name:"Climb EP",description:`This script performs repeated Eternities, attempting to re-purchase a Time Study Tree every
        Eternity. Autobuyer settings must be supplied for the Infinity and Eternity Autobuyers. The script will
        repeat until a final Eternity Point value is reached.`,inputs:[{name:"treeStudies",type:"tree",prompt:"Or directly enter your time studies"},{name:"treeNowait",type:"nowait",prompt:"Missing Study behavior"},{name:"finalEP",type:"decimal",prompt:"Target EP"},{name:"autoInfMode",type:"mode",prompt:"Infinity Autobuyer Mode"},{name:"autoInfValue",type:"decimal",prompt:"Infinity Autobuyer Threshold"},{name:"autoEterMode",type:"mode",prompt:"Eternity Autobuyer Mode"},{name:"autoEterValue",type:"decimal",prompt:"Eternity Autobuyer Threshold"}],warnings:()=>{const t=[];return RealityUpgrade(10).isBought||t.push(`This script will be unable to properly set Autobuyer modes without at least ${formatInt(100)}
            Eternities. Consider getting Reality Upgrade "${RealityUpgrade(10).name}" before using this at the start
            of a Reality.`),RealityUpgrade(13).isBought||t.push(`This template may perform poorly without Reality Upgrade "${RealityUpgrade(13).name}"`),Perk.ttBuySingle.isBought||t.push(`This template may perform poorly without Perk "${Perk.ttBuySingle.label}" unless you can generate
            Time Theorems without purchsing them`),t}},{name:"Grind Eternities",description:`This script performs repeated fast Eternities after buying a specified Time Study Tree.
        Auto-Infinity will be set to "Times Highest" with a specified number of crunches and Auto-Eternity will
        trigger as soon as possible. The script will repeat until a final Eternity count is reached.`,inputs:[{name:"treeStudies",type:"tree",prompt:"Or directly enter your time studies"},{name:"treeNowait",type:"nowait",prompt:"Missing Study behavior"},{name:"crunchesPerEternity",type:"integer",prompt:"Crunches per Eternity"},{name:"eternities",type:"decimal",prompt:"Target Eternity Count"}],warnings:()=>{const t=[];return RealityUpgrade(14).isBought&&t.push(`You probably do not need to use this due to Reality Upgrade "${RealityUpgrade(14).name}"`),t}},{name:"Grind Infinities",description:`This script buys a specified Time Study Tree and then configures your Autobuyers for gaining
        Infinities. It will repeat until a final Infinity count is reached; the count can be for Banked Infinities,
        in which case it will get all Infinities before performing a single Eternity.`,inputs:[{name:"treeStudies",type:"tree",prompt:"Or directly enter your time studies"},{name:"treeNowait",type:"nowait",prompt:"Missing Study behavior"},{name:"infinities",type:"decimal",prompt:"Target Infinity Count"},{name:"isBanked",type:"boolean",prompt:"Use Banked for Target?"}],warnings:()=>{const t=[];return Perk.achievementGroup5.isBought||t.push(`You will not start this Reality with Achievement "${Achievement(131).name}" - grinding
            Infinities may be less useful than expected since they cannot be Banked until later`),RealityUpgrade(11).isBought&&t.push(`You probably do not need to use this due to Reality Upgrade "${RealityUpgrade(11).name}"`),t}},{name:"Complete Eternity Challenge",description:`This script buys a specified Time Study Tree and then unlocks a specified Eternity Challenge.
        Then it will set your Infinity Autobuyer to your specified settings and enter the Eternity Challenge.
        Finally, it will wait until at least the desired number of completions before triggering an Eternity to
        complete the Challenge.`,inputs:[{name:"treeStudies",type:"tree",prompt:"Or directly enter your time studies"},{name:"treeNowait",type:"nowait",prompt:"Missing Study behavior"},{name:"ec",type:"integer",prompt:"Eternity Challenge ID"},{name:"completions",type:"integer",prompt:"Target Completion Count"},{name:"autoInfMode",type:"mode",prompt:"Infinity Autobuyer Mode"},{name:"autoInfValue",type:"decimal",prompt:"Infinity Autobuyer Threshold"}],warnings:()=>{const t=[];return Perk.studyECRequirement.isBought||t.push(`Eternity Challenges may not be reliably unlockable due to secondary resource requirements, consider
            unlocking Perk "${Perk.studyECRequirement.label}" before using this template`),Perk.studyECBulk.isBought||t.push(`Using this template without bulk completions of Eternity Challenges may lead to long scripts which
            are slower and difficult to modify. If you use this template, consider returning to simplify your scripts
            after unlocking Perk "${Perk.studyECBulk.label}"`),t}},{name:"Unlock Dilation",description:`This script performs repeated Eternities, attempting to re-purchase a Time Study Tree every
        Eternity. Settings must be supplied for the Eternity Autobuyer; your Infinity Autobuyer will be
        turned off. The script loops until you have the total Time Theorem requirement to unlock Dilation, and then
        it will unlock Dilation once it does.`,inputs:[{name:"treeStudies",type:"tree",prompt:"Or directly enter your time studies"},{name:"treeNowait",type:"nowait",prompt:"Missing Study behavior"},{name:"finalEP",type:"decimal",prompt:"Target EP"},{name:"autoEterMode",type:"mode",prompt:"Eternity Autobuyer Mode"},{name:"autoEterValue",type:"decimal",prompt:"Eternity Autobuyer Threshold"}],warnings:()=>{const t=[];return RealityUpgrade(13).isBought||t.push(`This template may perform poorly without Reality Upgrade "${RealityUpgrade(13).name}"`),Perk.ttBuySingle.isBought||t.push(`This template may perform poorly without Perk "${Perk.ttBuySingle.label}" unless you can generate
            Time Theorems without purchsing them`),t}}]},M8={categoryNames:["Time Studies","Event Triggers","Alter Settings","Information","Script Flow"],commands:[{id:0,isUnlocked:()=>!0,keyword:"STUDIES RESPEC",category:0,syntax:"<b>studies respec</b>",description:`This command turns on the respec option, which will respec your Time Studies on the next manual or
        automatic Eternity. Note that this does not actually perform an Eternity on its own; make sure your Autobuyer
        is on or you manually run the ETERNITY command (although ETERNITY has its own built-in respec option).`,examples:["studies respec"]},{id:1,isUnlocked:()=>!0,keyword:"STUDIES LOAD",category:0,syntax:`<b>studies</b> [nowait] <b>load id</b> <u>selector</u><br>
        <b>studies</b> [nowait] <b>load name</b> <u>name</u>`,description:"Loads a Time Study preset, as if you had clicked on the button in the Time Study tab.",sections:[{name:"INPUTS",items:[{header:"<i>nowait</i>",description:`
                If present, the Automator will purchase as many studies as possible before continuing onward. By default
                (ie. without "nowait") this command will repeat this line indefinitely until all of the studies in the
                preset are bought; this may cause the Automator to get stuck indefinitely if you are not careful.
              `},{header:"<i>selector</i>",description:`
                Finds and loads the specified Time Study preset by its slot number. This is numbered one through six,
                ordered from left to right.`},{header:"<i>name</i>",description:"Finds and loads the specified Time Study preset by its given name. This is case-sensitive."}]}],examples:["studies load id 2","studies load name ANTI","studies nowait load name dil"]},{id:2,isUnlocked:()=>!0,keyword:"STUDIES PURCHASE",category:0,syntax:"<b>studies</b> [nowait] <b>purchase <u>study_list</u></b>",description:"Purchase Time Studies specified from a list of Time Studies.",sections:[{name:"INPUTS",items:[{header:"<i>nowait</i>",description:`
                If present, the Automator will purchase as many studies as possible before continuing onward. By default
                (ie. without "nowait") this command will repeat this line indefinitely until all of the studies in the
                preset are bought; this may cause the Automator to get stuck indefinitely if you are not careful.
              `},{header:"<i>study_list</i>",description:`
                The exported Time Study tree format is supported here, which is simply a list of Time Study IDs
                separated by commas. This command also supports a more flexible formatting, additionally allowing
                ranges of studies (for example, <u>11-62</u>) and the following aliases:<br>
                <blockquote><b>antimatter, infinity, time, active, passive, idle, light, dark</b></blockquote>
                A variable name may be used in place of the entire Time Study list as well (see the definition panel),
                although in that case the shorthand ranges and aliases are not allowed.`}]}],examples:["studies nowait purchase 11,21,31","studies purchase 11-62, antimatter, 111, idle","studies nowait purchase ec6Studies"]},{id:3,isUnlocked:()=>!0,keyword:"PRESTIGE",category:1,syntax:`
        <b>infinity</b> [nowait]<br>
        <b>eternity</b> [nowait] [respec]<br>
        <b>reality</b> [nowait] [respec]`,description:`Triggers an Infinity, Eternity, or Reality reset if possible, otherwise the automator will wait at
        this command until it becomes possible. If you find that your script often gets stuck on this command, an
        Autobuyer may be triggering a prestige before the Automator reaches this line - consider using <i>nowait</i> or
        adjusting your Autobuyer settings using AUTO.`,sections:[{name:"MODIFIERS",items:[{header:"<i>nowait</i>",description:`
                If present, the Automator will move on to the next command instead of repeatedly trying on this
                command in situations where the prestige is not possible (eg. within an EC below the goal).
              `},{header:"<i>respec</i>",description:`
                For non-Infinity prestiges, also does the related respec action when triggering prestige.
                Eternity: Respec Time Studies and Eternity.<br>
                Reality: Unequip Glyphs and Reality.
              `}]}],examples:["infinity","eternity respec","reality nowait"]},{id:4,isUnlocked:()=>!0,keyword:"UNLOCK",category:1,syntax:"<b>unlock</b> [nowait] <u>feature</u>",description:"Unlocks the specified Eternity Challenge or Time Dilation.",sections:[{name:"MODIFIERS",items:[{header:"<i>nowait</i>",description:`
                If present, the Automator will move on to the next command even if unlocking the feature fails. By
                default, the Automator will keep running this command until the unlock succeeds.
              `}]}],examples:["unlock dilation","unlock ec7"]},{id:5,isUnlocked:()=>!0,keyword:"START",category:1,syntax:`
        <b>start</b> ec<u>N</u><br>
        <b>start</b> dilation`,description:`Start a specified Eternity Challenge or a Dilated Eternity. This command will also attempt
        to unlock the EC if not unlocked, but will not do the same for Dilation (use UNLOCK command to do that).
        If you are already in the specified EC or Dilated Eternity, running this command again will do nothing;
        otherwise, the Automator will keep attempting to start the Eternity until it succeeds.`,examples:["start ec12","start dilation"]},{id:6,isUnlocked:()=>!0,keyword:"AUTO",category:2,syntax:`<b>auto infinity</b> [setting]<br>
        <b>auto eternity</b> [setting]<br>
        <b>auto reality</b> [setting]`,description:`Turns prestige Autobuyers on or off and allows you to change their settings. If the setting option
        is not present, this command will toggle the Autobuyer state, turning it off if it is on and turning it on if
        it is off. <b>This command will not work if you try to modify an Autobuyer or setting you do not have.</b>`,sections:[{name:"SETTINGS",items:[{header:"<i>on</i> | <i>off</i>",description:"Turns specified Autobuyer on or off."},{header:"<u><i>number</i></u> <u><i>time units</i></u>",description:`Usable with Infinity and Eternity only.
                Turns the Autobuyer on and set it to trigger at the given interval.`},{header:"<u><i>number</i></u> x highest",description:`Usable with Infinity and Eternity only. Turns the Autobuyer on and sets it to
                "X times highest" mode.`},{header:"<i><u>number</u> <u>currency</u></i>",description:`Turns the Autobuyer on and sets it to trigger at a specific amount. The currency must
                match the autobuyer type (IP, EP, or RM). This will select "Reality Machines" mode for the Reality
                Autobuyer. Glyph Level mode cannot be changed or set via the Automator, only manually.`}]}],examples:["auto infinity on","auto eternity off","auto infinity 30s","auto eternity 10 seconds","auto eternity 1e100 x highest"]},{id:7,isUnlocked:()=>BlackHole(1).isUnlocked,keyword:"BLACK HOLE",category:2,syntax:"<b>black hole</b> <u>state</u>",description:`Toggles the speedup effect from the Black Hole on or off. Turning the Black Hole on via the
        Automator does not bypass the gradual acceleration from off to max speed which occurs before they are
        permanent.`,examples:["black hole on","black hole off"]},{id:8,isUnlocked:()=>Enslaved.isUnlocked,keyword:"STORE GAME TIME",category:2,syntax:"<b>store game time</b> <u>action</u>",description:"Changes whether or not the Black Hole is storing time. Also allows usage of stored time.",sections:[{name:"ACTIONS",items:[{header:"<i>on</i> | <i>off</i>",description:`
                Turns storing game time on or off.
              `},{header:"<i>use</i>",description:`
                Uses all stored game time. Does not alter the on/off state of time storage.
              `}]}],examples:["store game time on","store game time off","store game time use"]},{id:9,isUnlocked:()=>!0,keyword:"NOTIFY",category:3,syntax:'<b>notify</b> "<u>text</u>"',description:`Takes the specified text and posts it in the top-right corner as
        a text notification, in the same spot and style as other notifications such as auto-save
        and achievement/upgrade unlocks. Can be useful for seeing automator status while
        on tabs other than the Automator tab.`,examples:['notify "Dilation reached"','notify "ECs completed"']},{id:10,isUnlocked:()=>!0,keyword:"Adding Comments",category:3,syntax:"<b>#</b> text<br><b>//</b> text",description:`Allows you to leave a note to yourself within your script. This may be
        useful for organizing or keeping track of which parts of your script do various things,
        in a way that appears more readable than just the commands. These commands mainly serve as a tool to
        help you keep the steps of your scripts easier to follow if desired.`,sections:[{name:"NOTES",items:[{header:"<i>Inline comments</i>",description:`
                The Automator does not support comments which are placed after an already functional
                line of code, on the same line. As an example, the single line "studies load name TDI // Load push"
                will be an invalid command. In this case, you will need to move the comment to a separate line
                in the automator.
              `},{header:"<i>Execution speed</i>",description:`
                Having comments will not slow down your script, as they are completely skipped during
                execution and do not count as a command for the purposes of running. For example, even if you have
                a really long explanation in the form of comments on lines 20-40, the Automator will still
                <i>immediately</i> skip from line 19 to 41 during execution.
              `}]}],examples:["# get 1e20 before starting ec1","// this loop alternates dilation and pushing"]},{id:11,isUnlocked:()=>!0,keyword:"WAIT",category:4,syntax:"<b>wait</b> <u>condition</u>",description:`Forces Automator to wait for some condition or event. To wait for a certain duration of time,
        use the PAUSE command instead.`,sections:[{name:"POSSIBLE CONDITIONS",items:[{header:"<i>comparison</i>",description:`
                Wait until the comparison statement is true. Check the entry for "Formatting Comparisons" for details
                on how to properly input this option.
              `},{header:"<i>prestige</i>",description:`
                Wait until the specified prestige (Infinity, Eternity, or Reality) has been triggered by its respective
                Autobuyer. This must happen <i>after</i> this command is reached; if the Autobuyer triggers
                <i>before</i> the command is reached, your script may get stuck.
              `},{header:"<i>black hole (state)</i>",description:`
                Wait until the Black Hole(s) are in the specified state. Valid inputs for state are
                "off", "bh1", and "bh2", corresponding to no active Black Hole(s), at least the first Black Hole active,
                and both Black Holes active.
              `}]}],examples:["wait am >= 1e308","wait pending completions >= 5","wait ec9 completions >= 4","wait infinity","wait black hole bh1"]},{id:12,isUnlocked:()=>!0,keyword:"PAUSE",category:4,syntax:"<b>pause</b> <u>interval</u>",description:`Tells the automator to stop moving forward and executing commands for a certain amount of time.
        Note that if the pause duration is shorter than the automator's execution speed, the automator will wait until
        the next execution tick before moving on.`,examples:["pause 10s","pause 1 minute","pause 34 seconds"],sections:[{name:"INTERVAL FORMATTING",items:[{header:"<i>Specified Interval</i>",description:`This command accepts time units of milliseconds ("ms"), seconds ("s", "sec", or "seconds"),
                minutes ("m", "min", or "minutes"), and hours ("h" or "hours"). You cannot provide just a number and
                nothing else; a unit of time must be specified.`},{header:"<i>Defined Constant</i>",description:`A defined constant may be used instead, see the definition panel. The defined value will
                be assumed to be in units of seconds.`}]},{name:"OTHER",items:[{header:"<i>Offline Side-effects</i>",description:`This command may behave undesirably when it runs during offline progress due to limited
                tick count. A 1-second pause that is usually 20-30 ticks might be only 1 game tick when processing
                hours of offline progress, which might not be enough for the resources needed for the rest of the
                script.`},{header:"<i>Alternatives</i>",description:`Using another command like 'WAIT' will allow you to set it for a certain resource amount,
                in order to ensure that the game has the proper state before moving onward.`},{header:"<i>Manual Skip</i>",description:`You can manually force the Automator to continue execution past a PAUSE command without
                waiting the entire specified time by stepping forward one line (to put it on the next one) and then
                resuming execution. If you find yourself doing this regularly, consider modifying your script.`}]}]},{id:13,isUnlocked:()=>!0,keyword:"IF",category:4,syntax:`<b>if</b> <u>condition</u> {<br>
        <blockquote>commands</blockquote>
        }`,description:`Defines an inner block of block of the automator script which will only be executed if the specified
        comparison is true when this line is reached. If the comparison is false, the automator will instead skip to the
        first line after the block and continue execution from there.`,examples:["if ec10 completions < 5","if ep > 1e6000"]},{id:14,isUnlocked:()=>!0,keyword:"UNTIL",category:4,syntax:`<b>until</b> <u>comparison</u> {<br>
        <blockquote>commands</blockquote>
        }<br><b>until</b> <u>prestige_event</u> {<br>
          <blockquote>commands</blockquote>
        }`,description:`Defines an inner block of the script where commands are repeated; the comparison is checked at the
        start and every time the loop repeats. If the condition is true when the UNTIL statement is first reached, the
        inner block of commands will be skipped entirely.
        <br><br>
        If an prestige event (ie. Infinity, Eternity, or Reality) is specified instead of a condition, then the block
        will always be entered and the commands within the block will repeat until the event occurs for the first time
        <i>after</i> entering the block. Note that the Automator will finish the rest of the loop and then exit after
        the prestige event occurs - it will not immediately exit the loop in the middle.`,examples:["until ep > 1e500","until reality"]},{id:15,isUnlocked:()=>!0,keyword:"WHILE",category:4,syntax:`<b>while</b> <u>comparison</u> {<br>
        <blockquote>commands</blockquote>
      }`,description:`Defines an inner block of the script where commands are repeated; the comparison is checked at the
        start and every time the loop repeats. If the condition is false when the WHILE statement is first reached, the
        inner block of commands will be skipped entirely.`,examples:["while ep < 1e500","while myThreshold > am"]},{id:16,isUnlocked:()=>!0,keyword:"STOP",category:4,syntax:"<b>stop</b>",description:`When the Automator runs this line, it will stop execution as if you clicked the
        <i class="fas fa-stop"></i> button on the control panel in the top-left of the Automator. This
        does not need to be placed at the end of every script in order to stop them, as turning off the
        <i class="fas fa-sync-alt"></i> option on the left panel will do this automatically.
        This command may be useful when used inside of an IF command, in order to stop execution
        only under certain conditions.`,examples:["stop"]},{id:17,isUnlocked:()=>!0,keyword:"Currency List",category:4,syntax:"<i>You can use these in any IF, WHILE, UNTIL, or WAIT command</i>",description:()=>{const t=EffarigUnlock.glyphFilter.isUnlocked?"<b>filter score</b> - Glyph filter score of the Glyph which your filter will select this Reality<br>":"",e=V.spaceTheorems>0?`<b>space theorems</b> - Current unspent Space Theorem amount<br>
            <b>total space theorems</b> - TOTAL Space Theorems, including ones spent on current Studies<br>`:"";return`This is a list of "currencies" or numbers that you can use within the Automator.<br>
          Note that when used, most currencies will need to be in scientific notation.<br>
          <b>am</b> - Current Antimatter amount  <br>
          <b>ip</b> - Current Infinity Point amount  <br>
          <b>ep</b> - Current Eternity Point amount  <br>
          <b>rm</b> - Current Reality Machine amount  <br>
          <b>infinities</b> - Current Infinity amount <br>
          <b>banked infinities</b> - Current Banked Infinity amount <br>
          <b>eternities</b> - Current Eternity amount <br>
          <b>realities</b> - Current Reality amount <br>
          <b>pending ip</b> - IP gained on Infinity (0 if not available)<br>
          <b>pending ep</b> - EP gained on Eternity (0 if not available)<br>
          <b>pending tp</b> - TP gained on exiting Dilation<br>
          <b>pending rm</b> - RM gained on Reality (0 if not available)<br>
          <b>pending glyph level</b> - Glyph Level gained on Reality (0 if not available)<br>
          <b>dt</b> - Current Dilated Time amount <br>
          <b>tp</b> - Current Tachyon Particle amount<br>
          <b>rg</b> - Current Replicanti Galaxy amount (does not use scientific)<br>
          <b>rep</b> - Current Replicanti amount <br>
          <b>tt</b> - Current Time Theorem amount <br>
          <b>total tt</b> - TOTAL Time Theorems, includes all forms of generated TT and any spent on Studies <br>
          <b>spent tt</b> - Time Theorems currently spent on all Time Studies <br>
          <b>total completions</b> - Total completions of all Eternity Challenges <br>
          <b>pending completions</b> - Total completions of current EC at Eternity <br>
          <b>ec<u>X</u> completions</b> - Amount of EC completions for a certain EC (eg. "ec6 completions")<br>
          ${t}
          ${e}
        `}},{id:18,isUnlocked:()=>!0,keyword:"Formatting Comparisons",category:4,syntax:"<u>resource1</u> <u>condition</u> <u>resource2</u>",description:`
        Comparisons are used within certain commands, which allow you to control the behavior of the automator based
        on the game's current state. They have a standard format with two value inputs and a comparison operator, but
        the value inputs can be anything as long as it is formatted correctly overall.`,sections:[{name:"CONDITIONS",items:[{header:"<i>resource</i>",description:`
                This can be any Automator Currency, a defined constant, or a number which must be formatted in
                scientific notation (eg. 1000, 1e100, 1.8e308). Unlike more general programming languages, this must
                be a single value (ie. math expressions such as "ip + pending ip" are not allowed).
              `},{header:"<i>condition</i>",description:`
                This must be an inequality operator (<, <=, >, >=), which takes on its typical mathematical meaning.
                Equality operators (==, !=) are not allowed, as the nature of the game means that numbers will often
                never be exactly equal and thus checking based on direct equality may lead to unexpected script
                behavior.
              `}]}],examples:["ep < 1e20","total tt > 14000"]},{id:19,isUnlocked:()=>!0,keyword:"Commands with inner blocks",category:4,syntax:`<b>header_command</b> {<br>
        <blockquote>inner_commands</blockquote>
        }`,description:`Some commands are associated with an "inner block" of commands. This inner block can contain still
        contain any other valid command, but may or may not actually get executed based on what the state of the game is
        when <b>header_command</b> is executed. This allows you to repeat some commands over and over (eg. Time Study
        purchasing), or to skip them entirely (eg. not entering an EC if it already has full completions). These blocks
        can be nested if desired, with inner blocks being placed within one another.
        <br><br>
        In the text editor mode: Specify the inner block with curly braces, with the opening brace { on the same line as
        the comparison and the closing brace } on its own line after the last line you want inside the block. Inner
        commands do not need to be indented, although it may be visually helpful to do so.
        <br><br>
        In the block editor mode: These commands come with an empty dotted rectangle which indicates which commands are
        within the inner block. Subsequent blocks can then be dragged inside the dotted rectangle.
        `,examples:[`if ec10 completions < 5 {<br>
          <blockquote>
          unlock ec10<br>
          start ec10</blockquote>
        }`,`until ep > 1e8 {<br>
          <blockquote>
          studies nowait purchase 11-62<br>
          pause 10s<br>
          eternity respec</blockquote>
        }`]}],otherAutomatorPoints:[{name:"Reality Count",automatorPoints:()=>2*Math.clampMax(Currency.realities.value,50),shortDescription:()=>`+${formatInt(2)} per Reality, up to ${formatInt(50)} Realities`,symbol:"Ϟ"},{name:"Black Hole",automatorPoints:()=>BlackHole(1).isUnlocked?10:0,shortDescription:()=>`Unlocking gives ${formatInt(10)} AP`,symbol:"<i class='fas fa-circle'></i>"}],templates:x8},P8={cards:{id:"cards",name:"Playing Card Suits",symbol:["♠","♥","♦","♣","♤","♧","♡","♢"],color:["W#000000","B#FF2222"]},lower:{id:"lower",name:"Lowercase Glyphs",symbol:["ω","ξ","δ","ψ"]},sus:{id:"sus",name:"Suspicious",symbol:["ඔ","ඕ","ඞ","ඩ"],color:["B#FCA40A"]},currency:{id:"currency",name:"Modern Currency",symbol:["$","₽","¥","€","¢","£","₩"],preventBlur:!0,color:["W#00DD00"]},oldCurrency:{id:"oldCurrency",name:"Older Currency",symbol:["₷","₰","₳","₯","₻"],preventBlur:!0,color:["B#00DD00"]},pipe:{id:"pipe",name:"Single Pipes",symbol:["┌","┐","└","┘","─","│"],color:["B#33FF33"]},pipe2:{id:"pipe2",name:"Double Pipes",symbol:["╔","╗","╚","╝","═","║"],color:["W#33FF33"]},trigram:{id:"trigram",name:"Trigrams",symbol:["☰","☱","☲","☳","☴","☵","☶","☷"],preventBlur:!0,color:["B#FFFFFF"]},arrow:{id:"arrow",name:"Single Arrows",symbol:["←","↓","↑","→","↖","↗","↘","↙"],color:["W#CC0000"]},arrow2:{id:"arrow2",name:"Double Arrows",symbol:["⇄","⇅","⇔","⇕"],color:["W#0000CC"]},arrow3:{id:"arrow3",name:"Special Arrows",symbol:["↺","↯","↬","⇱","⇲","⇮","↭"],preventBlur:!0,color:["W#CCCC00"]},integral:{id:"integral",name:"Integration",symbol:["∬","∭","∮","∯","∰","∱","∲","∳"],preventBlur:!0,color:["B#123456"]},numbers:{id:"numbers",name:"Circled Numbers",symbol:["①","②","③","④","⑤","⑥","⑦","⑧"],preventBlur:!0,color:["B#607D8B"]},blocks:{id:"blocks",name:"2x2 Blocks",symbol:["▘","▚","▞","▙","▛","▜","▟"]},shapes:{id:"shapes",name:"Miscellaneous Shapes",symbol:["▰","▲","◆","◎","◍"],preventBlur:!0},chess:{id:"chess",name:"Chess Pieces",symbol:["♟","♞","♝","♜","♛","♚"],preventBlur:!0,color:["B#AAAAAA"]},planet:{id:"planet",name:"Planetary Symbols",symbol:["☿","♀","♁","♂","♃","♄","♆","♇"],preventBlur:!0,color:["B#964B00"]},musical:{id:"musical",name:"Musical Symbols",symbol:["♩","♪","♬","♭","♮","♯"],preventBlur:!0,color:["W#E621E6"]},recycle:{id:"recycle",name:"Recycling Symbols",symbol:["♻","♳","♴","♵","♶","♷","♸","♹"],preventBlur:!0},dice:{id:"dice",name:"Dice Faces",symbol:["⚀","⚁","⚂","⚃","⚄","⚅"],preventBlur:!0},hazard:{id:"hazard",name:"Hazard Symbols",symbol:["☠","☢","☣","⚠"],preventBlur:!0,color:["W#FCA40A"]},celestial:{id:"celestial",name:"Celestial Icons",symbol:["","⌬","","ᛝ","♅"],color:["B#00BCD4"]},alchemy:{id:"alchemy",name:"Alchemical Symbols",symbol:["🜁","🜂","🜃","🜄","🜔","🜍","🜞","🜚"],color:["B#FFD700"]},blob:{id:"blob",name:"Blobs",symbol:["","","","","","",""],preventBlur:!0,color:["B#E4B51A"]},blob2:{id:"blob2",name:"More Blobs",symbol:["","","","","","",""],preventBlur:!0},star:{id:"star",name:"Geometric Stars",symbol:["★","☆","✪","✯","✭","✫","🜞"]},star2:{id:"star2",name:"Realistic Stars",symbol:["✶","✦","✧","✺","✹","✷"],color:["W#D4FFFF","W#FDFFCC"]},gem:{id:"gem",name:"Gemstones",symbol:["💎"],color:["B#035E3B","B#943B47","B#032C54"]},heiroglyph:{id:"heiroglyph",name:"Common Hieroglyphs",symbol:["𓂀","𓀶","𓅊","𓇌","𓊝","☥"],preventBlur:!0},paperclip:{id:"paperclip",name:"Useless Paperclips",symbol:["𓄲","𓄳","𓄴","𓄵","𓄶","𓄷","𓄸"],preventBlur:!0,color:["B#222222"]},snake:{id:"snake",name:"Various Snakes",symbol:["𓆓","𓆔","𓆕","𓆖","𓆗","𓆘"],preventBlur:!0},egyptNumber:{id:"egyptNumber",name:"Egyptian Numbers",symbol:["𓆄","𓅔","𓆾","𓂰","𓍦","𓎋","𓐀","𓃐"],preventBlur:!0,color:["W#123456"]},egyptWeather:{id:"egyptWeather",name:"Egyptian Weathervanes",symbol:["𓈹","𓈧","𓈷","𓉈","𓈩","𓈻","𓈽"],preventBlur:!0,color:["W#607D8B"]},limbs:{id:"limbs",name:"Awkward Limbs",symbol:["𓈝","𓄒","𓃂","𓃁","𓂩","𓂙","𓂓","𓂼"],preventBlur:!0,color:["B#E621E6"]},animal:{id:"animal",name:"Moses' Ark",symbol:["𓆏","𓆉","𓅬","𓅃","𓃲","𓆣","𓆊","𓃰"],preventBlur:!0,color:["W#0000AA"]}},ii=Object.freeze({add:t=>t.reduce(Number.sumReducer,0),multiply:t=>t.reduce(Number.prodReducer,1),addExponents:t=>t.reduce(Number.sumReducer,1-t.length),multiplyDecimal:t=>t.reduce(Decimal.prodReducer,L.D1)}),O8={timepow:{id:"timepow",bitmaskIndex:0,isGenerated:!0,glyphTypes:["time"],singleDesc:"Time Dimension power +{value}",totalDesc:"Time Dimension multipliers ^{value}",shortDesc:"TD power +{value}",effect:(t,e)=>1.01+Math.pow(t,.32)*Math.pow(e,.45)/75,formatEffect:t=>format(t,3,3),formatSingleEffect:t=>format(t-1,3,3),combine:ii.addExponents,enabledInDoomed:!0},timespeed:{id:"timespeed",bitmaskIndex:1,isGenerated:!0,glyphTypes:["time"],singleDesc:"Multiply game speed by {value}",totalDesc:"Game runs ×{value} faster",genericDesc:"Game speed multiplier",shortDesc:"Game speed ×{value}",effect:(t,e)=>GlyphAlteration.isEmpowered("time")?1+Math.pow(t,.35):1+Math.pow(t,.3)*Math.pow(e,.65)/20,formatEffect:t=>format(t,3,3),combine:ii.multiply,alteredColor:()=>GlyphAlteration.getEmpowermentColor("time"),alterationType:ALTERATION_TYPE.EMPOWER,enabledInDoomed:!0},timeetermult:{id:"timeetermult",bitmaskIndex:2,isGenerated:!0,glyphTypes:["time"],singleDesc:"Multiply Eternity gain by {value}",totalDesc:"Eternity gain ×{value}",genericDesc:"Eternity gain multiplier",shortDesc:"Eternities ×{value}",effect:(t,e)=>Math.pow((e+3)*t,.9)*Math.pow(3,GlyphAlteration.sacrificeBoost("time")),formatEffect:t=>format(t,2,2),combine:ii.multiply,alteredColor:()=>GlyphAlteration.getBoostColor("time"),alterationType:ALTERATION_TYPE.BOOST},timeEP:{id:"timeEP",bitmaskIndex:3,isGenerated:!0,glyphTypes:["time"],singleDesc:()=>GlyphAlteration.isAdded("time")?`Eternity Point gain 
×{value} [and ^]{value2}`:"Multiply Eternity Point gain by {value}",totalDesc:()=>GlyphAlteration.isAdded("time")?"Eternity Point gain ×{value} and ^{value2}":"Eternity Point gain ×{value}",genericDesc:()=>GlyphAlteration.isAdded("time")?"Eternity Point gain multiplier and power":"Eternity Point gain multiplier",shortDesc:()=>GlyphAlteration.isAdded("time")?"EP ×{value} and ^{value2}":"EP ×{value}",effect:(t,e)=>Math.pow(t*e,3)*100,formatEffect:t=>format(t,2,3),combine:ii.multiply,conversion:t=>1+Math.log10(t)/1e3,formatSecondaryEffect:t=>format(t,4,4),alteredColor:()=>GlyphAlteration.getAdditionColor("time"),alterationType:ALTERATION_TYPE.ADDITION},dilationDT:{id:"dilationDT",bitmaskIndex:4,isGenerated:!0,glyphTypes:["dilation"],singleDesc:"Multiply Dilated Time gain by {value}",totalDesc:"Dilated Time gain ×{value}",shortDesc:"DT ×{value}",effect:(t,e)=>GlyphAlteration.isEmpowered("dilation")?L.D1_005.pow(t).times(15):Decimal.pow(t*e,1.5).times(2),formatEffect:t=>format(t,2,1),combine:ii.multiplyDecimal,alteredColor:()=>GlyphAlteration.getEmpowermentColor("dilation"),alterationType:ALTERATION_TYPE.EMPOWER},dilationgalaxyThreshold:{id:"dilationgalaxyThreshold",bitmaskIndex:5,isGenerated:!0,glyphTypes:["dilation"],singleDesc:"Tachyon Galaxy threshold multiplier ×{value}",genericDesc:"Tachyon Galaxy cost multiplier",shortDesc:"TG threshold ×{value}",effect:(t,e)=>1-Math.pow(t,.17)*Math.pow(e,.35)/100-GlyphAlteration.sacrificeBoost("dilation")/50,formatEffect:t=>format(t,3,3),alteredColor:()=>GlyphAlteration.getBoostColor("dilation"),alterationType:ALTERATION_TYPE.BOOST,combine:t=>{const e=t.reduce(Number.prodReducer,1);return e<.4?{value:.4-Math.pow(.4-e,1.7),capped:!0}:{value:e,capped:!1}},enabledInDoomed:!0},dilationTTgen:{id:"dilationTTgen",bitmaskIndex:6,isGenerated:!0,glyphTypes:["dilation"],singleDesc:()=>GlyphAlteration.isAdded("dilation")?`Generates {value} Time Theorems/hour 
[and multiplies Time Theorem 
generation by] {value2}`:"Generates {value} Time Theorems per hour",totalDesc:()=>GlyphAlteration.isAdded("dilation")?"Generating {value} Time Theorems/hour and Time Theorem generation ×{value2}":"Generating {value} Time Theorems per hour",genericDesc:()=>GlyphAlteration.isAdded("dilation")?"Time Theorem generation and multiplier":"Time Theorem generation",shortDesc:()=>GlyphAlteration.isAdded("dilation")?"{value} TT/hr and TTgen ×{value2}":"{value} TT/hr",effect:(t,e)=>Math.pow(t*e,.5)/1e4,formatEffect:t=>format(3600*t,2,2),combine:ii.add,conversion:t=>Math.clampMin(Math.pow(1e4*t,1.6),1),formatSecondaryEffect:t=>format(t,2,2),alteredColor:()=>GlyphAlteration.getAdditionColor("dilation"),alterationType:ALTERATION_TYPE.ADDITION},dilationpow:{id:"dilationpow",bitmaskIndex:7,isGenerated:!0,glyphTypes:["dilation"],singleDesc:"Antimatter Dimension power +{value} while Dilated",totalDesc:"Antimatter Dimension multipliers ^{value} while Dilated",genericDesc:"Antimatter Dimensions ^x while Dilated",shortDesc:"Dilated AD power +{value}",effect:(t,e)=>1.1+Math.pow(t,.7)*Math.pow(e,.7)/25,formatEffect:t=>format(t,2,2),formatSingleEffect:t=>format(t-1,2,2),combine:ii.addExponents,enabledInDoomed:!0},replicationspeed:{id:"replicationspeed",bitmaskIndex:8,isGenerated:!0,glyphTypes:["replication"],singleDesc:"Multiply Replication speed by {value}",totalDesc:"Replication speed ×{value}",genericDesc:"Replication speed multiplier",shortDesc:"Replication speed ×{value}",effect:(t,e)=>GlyphAlteration.isEmpowered("replication")?L.D1_007.pow(t).times(10):Decimal.times(t,e).times(3),formatEffect:t=>format(t,2,1),combine:ii.multiplyDecimal,alteredColor:()=>GlyphAlteration.getEmpowermentColor("replication"),alterationType:ALTERATION_TYPE.EMPOWER},replicationpow:{id:"replicationpow",bitmaskIndex:9,isGenerated:!0,glyphTypes:["replication"],singleDesc:"Replicanti multiplier power +{value}",totalDesc:"Replicanti multiplier ^{value}",shortDesc:"Replicanti mult. power +{value}",effect:(t,e)=>1.1+Math.pow(t,.5)*e/25+GlyphAlteration.sacrificeBoost("replication")*3,formatEffect:t=>format(t,2,2),formatSingleEffect:t=>format(t-1,2,2),combine:ii.addExponents,alteredColor:()=>GlyphAlteration.getBoostColor("replication"),alterationType:ALTERATION_TYPE.BOOST,enabledInDoomed:!0},replicationdtgain:{id:"replicationdtgain",bitmaskIndex:10,isGenerated:!0,glyphTypes:["replication"],singleDesc:()=>GlyphAlteration.isAdded("replication")?`Multiply Dilated Time 
[and Replicanti speed] by 
+{value} per ${format(L.E10000)} replicanti`:`Multiply Dilated Time gain by 
+{value} per ${format(L.E10000)} replicanti`,totalDesc:()=>GlyphAlteration.isAdded("replication")?`Multiply Dilated Time and Replication speed by +{value} per ${format(L.E10000)} replicanti`:`Multiply Dilated Time gain by +{value} per ${format(L.E10000)} replicanti`,genericDesc:()=>GlyphAlteration.isAdded("replication")?"Dilated Time+Replicanti mult from replicanti":"Dilated Time gain multiplier from replicanti",shortDesc:()=>GlyphAlteration.isAdded("replication")?`×DT and repl. by +{value} per ${format(L.E10000)} replicanti`:`×DT by +{value} per ${format(L.E10000)} replicanti`,effect:(t,e)=>3e-4*Math.pow(t,.3)*Math.pow(e,.65),formatEffect:t=>format(1e4*t,2,2),formatSingleEffect:t=>format(1e4*t,2,2),combine:t=>({value:t.length===0?0:t.reduce(Number.prodReducer,Math.pow(1e-4,1-t.length)),capped:!1}),conversion:t=>t,formatSecondaryEffect:t=>format(t,2,3),formatSingleSecondaryEffect:t=>format(t,5,5),alteredColor:()=>GlyphAlteration.getAdditionColor("replication"),alterationType:ALTERATION_TYPE.ADDITION},replicationglyphlevel:{id:"replicationglyphlevel",bitmaskIndex:11,isGenerated:!0,glyphTypes:["replication"],singleDesc:()=>`Replicanti factor for Glyph level:
 ^${format(.4,1,1)}
      ➜ ^(${format(.4,1,1)} + {value})`,totalDesc:()=>`Replicanti factor for Glyph level: ^${format(.4,1,1)}
      ➜ ^(${format(.4,1,1)} + {value})`,genericDesc:"Replicanti factor for Glyph level",shortDesc:"Replicanti pow. for level +{value}",effect:(t,e)=>Math.pow(Math.pow(t,.25)*Math.pow(e,.4),.5)/50,formatEffect:t=>format(t,3,3),combine:t=>{let e=t.reduce(Number.sumReducer,0);return t.length>2&&(e*=6/(t.length+4)),e>.1?{value:.1+.2*(e-.1),capped:!0}:{value:e,capped:t.length>2}},enabledInDoomed:!0},infinitypow:{id:"infinitypow",bitmaskIndex:12,isGenerated:!0,glyphTypes:["infinity"],singleDesc:"Infinity Dimension power +{value}",totalDesc:"Infinity Dimension multipliers ^{value}",shortDesc:"ID power +{value}",effect:(t,e)=>1.007+Math.pow(t,.21)*Math.pow(e,.4)/75+GlyphAlteration.sacrificeBoost("infinity")/50,formatEffect:t=>format(t,3,3),formatSingleEffect:t=>format(t-1,3,3),combine:ii.addExponents,alteredColor:()=>GlyphAlteration.getBoostColor("infinity"),alterationType:ALTERATION_TYPE.BOOST,enabledInDoomed:!0},infinityrate:{id:"infinityrate",bitmaskIndex:13,isGenerated:!0,glyphTypes:["infinity"],singleDesc:()=>`Infinity Power conversion rate: 
^${formatInt(7)}
      ➜ ^(${formatInt(7)} + {value})`,totalDesc:()=>`Infinity Power conversion rate: ^${formatInt(7)}
      ➜ ^(${formatInt(7)} + {value})`,genericDesc:"Infinity Power conversion rate",shortDesc:"Infinity Power conversion +{value}",effect:(t,e)=>Math.pow(t,.2)*Math.pow(e,.4)*.04,formatEffect:t=>format(t,2,2),combine:ii.add,enabledInDoomed:!0},infinityIP:{id:"infinityIP",bitmaskIndex:14,isGenerated:!0,glyphTypes:["infinity"],singleDesc:()=>GlyphAlteration.isAdded("infinity")?`Infinity Point gain 
×{value} [and ^]{value2}`:"Multiply Infinity Point gain by {value}",totalDesc:()=>GlyphAlteration.isAdded("infinity")?"Infinity Point gain ×{value} and ^{value2}":"Infinity Point gain ×{value}",genericDesc:()=>GlyphAlteration.isAdded("infinity")?"Infinity Point gain multiplier and power":"Infinity Point gain multiplier",shortDesc:()=>GlyphAlteration.isAdded("infinity")?"IP ×{value} and ^{value2}":"IP ×{value}",effect:(t,e)=>Math.pow(t*(e+1),6)*1e4,formatEffect:t=>format(t,2,3),combine:ii.multiply,softcap:t=>Effarig.eternityCap!==void 0?Math.min(t,Effarig.eternityCap.toNumber()):t,conversion:t=>1+Math.log10(t)/1800,formatSecondaryEffect:t=>format(t,4,4),alteredColor:()=>GlyphAlteration.getAdditionColor("infinity"),alterationType:ALTERATION_TYPE.ADDITION},infinityinfmult:{id:"infinityinfmult",bitmaskIndex:15,isGenerated:!0,glyphTypes:["infinity"],singleDesc:"Multiply Infinity gain by {value}",totalDesc:"Infinity gain ×{value}",genericDesc:"Infinity gain multiplier",shortDesc:"Infinities ×{value}",effect:(t,e)=>GlyphAlteration.isEmpowered("infinity")?L.D1_02.pow(t):Decimal.pow(t*e,1.5).times(2),formatEffect:t=>format(t,2,1),combine:ii.multiplyDecimal,alteredColor:()=>GlyphAlteration.getEmpowermentColor("infinity"),alterationType:ALTERATION_TYPE.EMPOWER},powerpow:{id:"powerpow",bitmaskIndex:16,isGenerated:!0,glyphTypes:["power"],singleDesc:()=>GlyphAlteration.isAdded("power")?`Antimatter Dimension power +{value}
[and Antimatter Galaxy cost ×]{value2}`:"Antimatter Dimension power +{value}",totalDesc:()=>GlyphAlteration.isAdded("power")?"Antimatter Dimension multipliers ^{value} and Antimatter Galaxy cost ×{value2}":"Antimatter Dimension multipliers ^{value}",genericDesc:()=>GlyphAlteration.isAdded("power")?"Antimatter Dimensions multipliers ^x and Antimatter Galaxy cost multiplier":"Antimatter Dimension multipliers ^x",shortDesc:()=>GlyphAlteration.isAdded("power")?"AD power +{value} and AG cost ×{value2}":"AD power +{value}",effect:(t,e)=>1.015+Math.pow(t,.2)*Math.pow(e,.4)/75,formatEffect:t=>format(t,3,3),formatSingleEffect:t=>format(t-1,3,3),combine:ii.addExponents,conversion:t=>2/(t+1),formatSecondaryEffect:t=>format(t,3,3),alteredColor:()=>GlyphAlteration.getAdditionColor("power"),alterationType:ALTERATION_TYPE.ADDITION,enabledInDoomed:!0},powermult:{id:"powermult",bitmaskIndex:17,isGenerated:!0,glyphTypes:["power"],singleDesc:"Antimatter Dimension multipliers ×{value}",shortDesc:"AD ×{value}",effect:(t,e)=>GlyphAlteration.isEmpowered("power")?L.D11111.pow(t*220):Decimal.pow(t*e*10,t*e*10),formatEffect:t=>formatPostBreak(t,2,0),combine:ii.multiplyDecimal,alteredColor:()=>GlyphAlteration.getEmpowermentColor("power"),alterationType:ALTERATION_TYPE.EMPOWER,enabledInDoomed:!0},powerdimboost:{id:"powerdimboost",bitmaskIndex:18,isGenerated:!0,glyphTypes:["power"],singleDesc:"Dimension Boost multiplier ×{value}",genericDesc:"Dimension Boost multiplier",shortDesc:"Dimboost mult. ×{value}",effect:(t,e)=>Math.pow(t*e,.5)*Math.pow(1+GlyphAlteration.sacrificeBoost("power"),3),formatEffect:t=>format(t,2,2),combine:ii.multiply,alteredColor:()=>GlyphAlteration.getBoostColor("power"),alterationType:ALTERATION_TYPE.BOOST,enabledInDoomed:!0},powerbuy10:{id:"powerbuy10",bitmaskIndex:19,isGenerated:!0,glyphTypes:["power"],singleDesc:()=>`Increase the bonus from buying ${formatInt(10)} Antimatter Dimensions by {value}`,totalDesc:()=>`Multiplier from "Buy ${formatInt(10)}" ×{value}`,genericDesc:()=>`"Buy ${formatInt(10)}" bonus increase`,shortDesc:()=>`AD "Buy ${formatInt(10)}" mult. ×{value}`,effect:(t,e)=>1+t*e/12,formatEffect:t=>format(t,2,2),combine:ii.addExponents,enabledInDoomed:!0},effarigrm:{id:"effarigrm",bitmaskIndex:20,isGenerated:!0,glyphTypes:["effarig"],singleDesc:"Reality Machine multiplier ×{value}",genericDesc:"Reality Machine multiplier",shortDesc:"RM ×{value}",effect:(t,e)=>GlyphAlteration.isEmpowered("effarig")?Math.pow(t,1.5):Math.pow(t,.6)*e,formatEffect:t=>format(t,2,2),combine:ii.multiply,alteredColor:()=>GlyphAlteration.getEmpowermentColor("effarig"),alterationType:ALTERATION_TYPE.EMPOWER},effarigglyph:{id:"effarigglyph",bitmaskIndex:21,isGenerated:!0,glyphTypes:["effarig"],singleDesc:"Glyph Instability starting level +{value}",genericDesc:"Glyph Instability delay",shortDesc:"Instability delay +{value}",effect:(t,e)=>Math.floor(10*Math.pow(t*e,.5)),formatEffect:t=>formatInt(t),combine:ii.add},effarigblackhole:{id:"effarigblackhole",bitmaskIndex:22,isGenerated:!0,glyphTypes:["effarig"],singleDesc:"Game speed power +{value}",totalDesc:"Game speed ^{value}",genericDesc:"Game speed ^x",shortDesc:"Game speed power +{value}",effect:(t,e)=>1+Math.pow(t,.25)*Math.pow(e,.4)/75,formatEffect:t=>format(t,3,3),formatSingleEffect:t=>format(t-1,3,3),combine:ii.addExponents},effarigachievement:{id:"effarigachievement",bitmaskIndex:23,isGenerated:!0,glyphTypes:["effarig"],singleDesc:"Achievement multiplier power +{value}",totalDesc:"Achievement multiplier ^{value}",genericDesc:"Achievement multiplier ^x",shortDesc:"Achievement mult. power +{value}",effect:(t,e)=>1+Math.pow(t,.4)*Math.pow(e,.6)/60+GlyphAlteration.sacrificeBoost("effarig")/10,formatEffect:t=>format(t,3,3),formatSingleEffect:t=>format(t-1,3,3),combine:ii.addExponents,alteredColor:()=>GlyphAlteration.getBoostColor("effarig"),alterationType:ALTERATION_TYPE.BOOST},effarigforgotten:{id:"effarigforgotten",bitmaskIndex:24,isGenerated:!0,glyphTypes:["effarig"],singleDesc:()=>GlyphAlteration.isAdded("effarig")?`"Buy ${formatInt(10)}" multiplier ^{value} [and
Dimension Boost multiplier ^]{value2}`:`Bonus from buying ${formatInt(10)} Dimensions ^{value}`,totalDesc:()=>GlyphAlteration.isAdded("effarig")?`Multiplier from "Buy ${formatInt(10)}" ^{value} and Dimension Boost multiplier ^{value2}`:`Multiplier from "Buy ${formatInt(10)}" ^{value}`,genericDesc:()=>GlyphAlteration.isAdded("effarig")?`"Buy ${formatInt(10)}" and Dimension Boost multipliers ^x`:`"Buy ${formatInt(10)}" multiplier ^x`,shortDesc:()=>GlyphAlteration.isAdded("effarig")?`Buy ${formatInt(10)} mult. ^{value}, Dimboost mult. ^{value2}`:`Buy ${formatInt(10)} mult. ^{value}`,effect:(t,e)=>1+2*Math.pow(t,.25)*Math.pow(e,.4),formatEffect:t=>format(t,2,2),combine:ii.multiply,conversion:t=>Math.pow(t,.4),formatSecondaryEffect:t=>format(t,2,2),alteredColor:()=>GlyphAlteration.getAdditionColor("effarig"),alterationType:ALTERATION_TYPE.ADDITION},effarigdimensions:{id:"effarigdimensions",bitmaskIndex:25,isGenerated:!0,glyphTypes:["effarig"],singleDesc:"All Dimension power +{value}",totalDesc:"All Dimension multipliers ^{value}",genericDesc:"All Dimension multipliers ^x",shortDesc:"All Dimension power +{value}",effect:(t,e)=>1+Math.pow(t,.25)*Math.pow(e,.4)/500,formatEffect:t=>format(t,3,3),formatSingleEffect:t=>format(t-1,3,3),combine:ii.addExponents},effarigantimatter:{id:"effarigantimatter",bitmaskIndex:26,isGenerated:!0,glyphTypes:["effarig"],singleDesc:()=>`Antimatter production:
${formatInt(10)}^x ➜ ${formatInt(10)}^(x^{value})`,genericDesc:"Antimatter production exponent power",shortDesc:"AM production exponent ^{value}",effect:(t,e)=>1+Math.pow(t,.25)*Math.pow(e,.4)/5e3,formatEffect:t=>format(t,4,4),combine:ii.multiply},timeshardpow:{id:"timeshardpow",bitmaskIndex:27,isGenerated:!0,glyphTypes:[],singleDesc:"Time Shard power +{value}",totalDesc:"Time Shard gain ^{value}",genericDesc:"Time Shards ^x",shortDesc:"Time Shard power +{value}",effect:(t,e)=>1+e/3.5*Math.pow(t,.35)/400,formatEffect:t=>format(t,3,3),formatSingleEffect:t=>format(t-1,3,3),combine:ii.addExponents,enabledInDoomed:!0},cursedgalaxies:{id:"cursedgalaxies",bitmaskIndex:0,isGenerated:!1,glyphTypes:["cursed"],singleDesc:"All Galaxies are {value} weaker",totalDesc:"All Galaxy strength -{value}",shortDesc:"Galaxy Strength -{value}",effect:t=>Math.pow(t,-.03),formatEffect:t=>formatPercents(1-t,2),combine:ii.multiply},curseddimensions:{id:"curseddimensions",bitmaskIndex:1,isGenerated:!1,glyphTypes:["cursed"],singleDesc:"All Dimension multipliers ^{value}",shortDesc:"All Dimensions ^{value}",effect:t=>Math.pow(t,-.035),formatEffect:t=>format(t,3,3),combine:ii.multiply},cursedtickspeed:{id:"cursedtickspeed",bitmaskIndex:2,isGenerated:!1,glyphTypes:["cursed"],singleDesc:"The threshold for Tickspeed Upgrades from Time Dimensions is multiplied by ×{value}",totalDesc:"The threshold for Tickspeed Upgrades from Time Dimensions is increased by ×{value}",shortDesc:"TD Tickspeed threshold ×{value}",effect:t=>Math.clampMin(Math.log10(t),1),formatEffect:t=>format(t,3,3),combine:ii.add},cursedEP:{id:"cursedEP",bitmaskIndex:3,isGenerated:!1,glyphTypes:["cursed"],singleDesc:"Divide Eternity Point gain by {value}",totalDesc:"Eternity Point gain / {value}",shortDesc:"EP / {value}",effect:t=>Decimal.pow10(-t/10),formatEffect:t=>format(t.reciprocal()),combine:ii.multiplyDecimal},realityglyphlevel:{id:"realityglyphlevel",bitmaskIndex:4,isGenerated:!1,glyphTypes:["reality"],singleDesc:"Increase the effective level of equipped basic Glyphs by {value}",totalDesc:"Equipped basic Glyph level +{value}",shortDesc:"Basic Glyph Level +{value}",effect:t=>Math.floor(Math.sqrt(t*90)),formatEffect:t=>formatInt(t),combine:ii.add},realitygalaxies:{id:"realitygalaxies",bitmaskIndex:5,isGenerated:!1,glyphTypes:["reality"],singleDesc:"All Galaxies are {value} stronger",totalDesc:"All Galaxy strength +{value}",shortDesc:"Galaxy Strength +{value}",effect:t=>1+Math.pow(t/1e5,.5),formatEffect:t=>formatPercents(t-1,2),combine:ii.multiply},realityrow1pow:{id:"realityrow1pow",bitmaskIndex:6,isGenerated:!1,glyphTypes:["reality"],singleDesc:"Multiplier from Reality Upgrade Amplifiers ^{value}",totalDesc:"Reality Upgrade Amplifier multiplier ^{value}",shortDesc:"Amplifier Multiplier ^{value}",effect:t=>1+t/125e3,formatEffect:t=>format(t,3,3),combine:ii.addExponents},realityDTglyph:{id:"realityDTglyph",bitmaskIndex:7,isGenerated:!1,glyphTypes:["reality"],singleDesc:()=>`Dilated Time factor for Glyph level: 
^${format(1.3,1,1)}
      ➜ ^(${format(1.3,1,1)} + {value})`,totalDesc:()=>`Dilated Time factor for Glyph level: ^${format(1.3,1,1)}
      ➜ ^(${format(1.3,1,1)} + {value})`,genericDesc:"Dilated Time factor for Glyph level",shortDesc:"DT pow. for level +{value}",effect:()=>.1,formatEffect:t=>format(t,2,2),combine:ii.add},companiondescription:{id:"companiondescription",bitmaskIndex:8,isGenerated:!1,glyphTypes:["companion"],singleDesc:"It does nothing but sit there and cutely smile at you, whisper into your dreams politely, and plot the demise of all who stand against you. This one-of-a-kind Glyph will never leave you.",totalDesc:"+{value} happiness",shortDesc:"Doesn't want to hurt you",effect:()=>{if(Enslaved.isRunning)return 0;const t=Glyphs.active.countWhere(e=>(e==null?void 0:e.type)==="cursed");return t>0?Math.pow(.2+.2*Math.random(),t):.4+.6*Math.random()},formatEffect:t=>formatPercents(t,2,2),combine:ii.add,enabledInDoomed:!0},companionEP:{id:"companionEP",bitmaskIndex:9,isGenerated:!1,glyphTypes:["companion"],singleDesc:"Thanks for your dedication for the game! You reached {value} Eternity Points on your first Reality.",shortDesc:"It loves you very, very much",totalDesc:()=>Enslaved.isRunning||Glyphs.active.countWhere(t=>(t==null?void 0:t.type)==="cursed")?"Help me":"Yay!",effect:(t,e)=>Decimal.pow10(1e6*strengthToRarity(e)),formatEffect:t=>formatPostBreak(t,2),combine:ii.multiplyDecimal,enabledInDoomed:!0}},N8={power:{id:"power",effect:t=>{if(Pelle.isDisabled("glyphsac"))return 0;const e=player.reality.glyphs.sac.power+(t??0),i=Math.clampMax(e,GlyphSacrificeHandler.maxSacrificeForEffects),n=Math.log10(i+1)/Math.log10(GlyphSacrificeHandler.maxSacrificeForEffects);return Math.floor(750*Math.pow(n,1.2))},description:t=>{const e=GlyphSacrificeHandler.maxSacrificeForEffects,i=Math.pow(10,Math.pow((t+1)/750,1/1.2)*Math.log10(e))-1,n=t<750?` (next at ${format(i,2,2)})`:"";return`Distant Galaxy scaling starts ${formatInt(t)} later${n}`},cap:()=>GlyphSacrificeHandler.maxSacrificeForEffects},infinity:{id:"infinity",effect:t=>{if(Pelle.isDisabled("glyphsac"))return 1;const e=player.reality.glyphs.sac.infinity+(t??0),i=Math.clampMax(e,GlyphSacrificeHandler.maxSacrificeForEffects);return 1+Math.log10(1+Math.pow(i,.2)/100)},description:t=>`${formatX(t,2,2)} bigger multiplier when buying 8th Infinity Dimension`,cap:()=>GlyphSacrificeHandler.maxSacrificeForEffects},time:{id:"time",effect:t=>{if(Pelle.isDisabled("glyphsac"))return 1;const e=player.reality.glyphs.sac.time+(t??0),i=Math.clampMax(e,GlyphSacrificeHandler.maxSacrificeForEffects);return Math.pow(1+Math.pow(i,.2)/100,2)},description:t=>`${formatX(t,2,2)} bigger multiplier when buying 8th Time Dimension`,cap:()=>GlyphSacrificeHandler.maxSacrificeForEffects},replication:{id:"replication",effect:t=>{if(Pelle.isDisabled("glyphsac"))return 0;const e=player.reality.glyphs.sac.replication+(t??0),i=Math.clampMax(e,GlyphSacrificeHandler.maxSacrificeForEffects),n=Math.log10(i+1)/Math.log10(GlyphSacrificeHandler.maxSacrificeForEffects);return Math.floor(1500*Math.pow(n,1.2))},description:t=>{const e=GlyphSacrificeHandler.maxSacrificeForEffects,i=Math.pow(10,Math.pow((t+1)/1500,1/1.2)*Math.log10(e))-1,n=t<1500?` (next at ${format(i,2,2)})`:"";return`Replicanti Galaxy scaling starts ${formatInt(t)} later${n}`},cap:()=>GlyphSacrificeHandler.maxSacrificeForEffects},dilation:{id:"dilation",effect:t=>{if(Pelle.isDisabled("glyphsac"))return 1;const e=player.reality.glyphs.sac.dilation+(t??0),i=Math.clampMax(e,GlyphSacrificeHandler.maxSacrificeForEffects),n=.32*Math.pow(Math.log10(i+1)/Math.log10(GlyphSacrificeHandler.maxSacrificeForEffects),.1);return Math.pow(Math.clampMin(i,1),n)},description:t=>`Multiply Tachyon Particle gain by ${formatX(t,2,2)}`,cap:()=>GlyphSacrificeHandler.maxSacrificeForEffects},effarig:{id:"effarig",effect:t=>{if(Pelle.isDisabled("glyphsac"))return 0;const e=player.reality.glyphs.sac.effarig+(t??0),i=Math.clampMax(e,1e70);return 2*Math.log10(i/1e20+1)},description:t=>`+${formatPercents(t/100,2)} additional Glyph rarity`,cap:()=>1e70},reality:{id:"reality",effect:t=>{if(Pelle.isDisabled("glyphsac"))return 0;const e=player.reality.glyphs.sac.reality+(t??0);return Math.clampMax(1+Math.sqrt(e)/15,100)},description:t=>`Multiply Memory Chunk gain by ${formatX(t,2,3)}`,cap:()=>GlyphSacrificeHandler.maxSacrificeForEffects}},Pl=t=>{t.cost=()=>t.initialCost*Math.pow(t.costMult,player.reality.imaginaryRebuyables[t.id]);const{effect:e}=t;return t.isDecimal?t.effect=()=>Decimal.pow(e,player.reality.imaginaryRebuyables[t.id]):t.effect=()=>e*player.reality.imaginaryRebuyables[t.id],t.formatEffect||(t.formatEffect=i=>`+${format(i,2,2)}`),t.formatCost=i=>format(i,2,0),t},G8=[Pl({name:"Temporal Intensifier",id:1,initialCost:3,costMult:60,description:()=>`Increase Temporal Amplifier multiplier by +${format(.15,2,2)}`,effect:.15}),Pl({name:"Replicative Intensifier",id:2,initialCost:4,costMult:60,description:()=>`Increase Replicative Amplifier multiplier by +${format(.15,2,2)}`,effect:.15}),Pl({name:"Eternal Intensifier",id:3,initialCost:1,costMult:40,description:()=>`Increase Eternal Amplifier multiplier by +${format(.4,2,2)}`,effect:.4}),Pl({name:"Superluminal Intensifier",id:4,initialCost:5,costMult:80,description:()=>`Increase Superluminal Amplifier multiplier by +${format(.15,2,2)}`,effect:.15}),Pl({name:"Boundless Intensifier",id:5,initialCost:1,costMult:30,description:()=>`Increase Boundless Amplifier multiplier by +${format(.6,2,2)}`,effect:.6}),Pl({name:"Elliptic Materiality",id:6,initialCost:1e4,costMult:500,description:()=>`Increase the Reality Machine cap by ${formatX(1e100)}`,effect:1e100,formatEffect:t=>`${formatX(t)}`,isDecimal:!0}),Pl({name:"Runic Assurance",id:7,initialCost:2e5,costMult:500,description:()=>`Delay Glyph Instability starting level by ${formatInt(200)}`,effect:200,formatEffect:t=>`+${formatInt(t)} levels`}),Pl({name:"Hyperbolic Apeirogon",id:8,initialCost:1e7,costMult:800,description:()=>`Multiply Infinity Dimensions by ${format("1e100000")}`,effect:L.E100000,formatEffect:t=>`${formatX(t)}`,isDecimal:!0}),Pl({name:"Cosmic Filament",id:9,initialCost:1e9,costMult:1e3,description:()=>"Increase Galaxy strength",effect:.03,formatEffect:t=>`+${formatPercents(t)}`}),Pl({name:"Entropic Condensing",id:10,initialCost:8e9,costMult:2e3,description:()=>"Increase Singularity gain",effect:1,formatEffect:t=>`${formatX(1+t,2)}`}),{name:"Suspicion of Interference",id:11,cost:5e7,requirement:()=>`${format(1e90)} total Relic Shards
      (You have ${format(player.celestials.effarig.relicShards,2)})`,hasFailed:()=>!1,checkRequirement:()=>player.celestials.effarig.relicShards>=1e90,checkEvent:GAME_EVENT.REALITY_RESET_AFTER,description:"Time Dimension power based on total antimatter",effect:()=>1+Math.log10(player.records.totalAntimatter.log10())/100,formatEffect:t=>`${formatPow(t,0,4)}`,isDisabledInDoomed:!0},{name:"Consequences of Illusions",id:12,cost:5e7,requirement:()=>`Make a level ${formatInt(9e3)} Glyph with a single Glyph level factor weight at
    ${formatInt(100)}`,hasFailed:()=>!1,checkRequirement:()=>Object.values(player.celestials.effarig.glyphWeights).some(t=>t===100)&&gainedGlyphLevel().actualLevel>=9e3,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,description:"Gain free Dimboosts based on Imaginary rebuyable count",effect:()=>2e4*ImaginaryUpgrades.totalRebuyables,formatEffect:t=>`${format(t,1)}`,isDisabledInDoomed:!0},{name:"Transience of Information",id:13,cost:5e7,requirement:()=>`Reach ${format(Number.MAX_VALUE,2)} projected Reality Machines within
      The Nameless Ones' Reality`,hasFailed:()=>!Enslaved.isRunning,checkRequirement:()=>Enslaved.isRunning&&MachineHandler.uncappedRM.times(simulatedRealityCount(!1)+1).gte(Number.MAX_VALUE),checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:"Increase Imaginary Machine Cap based on Imaginary Upgrades purchased",effect:()=>1+ImaginaryUpgrades.totalRebuyables/20+ImaginaryUpgrades.totalSinglePurchase/2,formatEffect:t=>`${formatX(t,2,1)}`,isDisabledInDoomed:!0},{name:"Recollection of Intrusion",id:14,cost:35e7,formatCost:t=>format(t,1),requirement:()=>`Reach a tickspeed of ${format("1e75000000000")} / sec within Eternity Challenge 5`,hasFailed:()=>!1,checkRequirement:()=>EternityChallenge(5).isRunning&&Tickspeed.perSecond.exponent>=75e9,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:()=>`Raise all Dimension per-purchase multipliers to ${formatPow(1.5,0,1)}`,effect:1.5,isDisabledInDoomed:!0},{name:"Fabrication of Ideals",id:15,cost:1e9,requirement:()=>`Reach ${format("1e1500000000000")} antimatter without
      ever having any 1st Infinity Dimensions`,hasFailed:()=>player.requirementChecks.reality.maxID1.gt(0),checkRequirement:()=>player.requirementChecks.reality.maxID1.eq(0)&&player.antimatter.exponent>=15e11,checkEvent:GAME_EVENT.GAME_TICK_AFTER,canLock:!0,description:()=>`${Pelle.isDoomed?"Unlock":"Convert Antimatter Dimensions to Continuum and unlock"} Lai'tela, Celestial of Dimensions`},{name:"Massless Momentum",id:16,cost:35e8,formatCost:t=>format(t,1),requirement:()=>`Destabilize Lai'tela's Reality in under ${formatInt(30)} seconds twice`,hasFailed:()=>!1,checkRequirement:()=>Laitela.maxAllowedDimension<=6,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:"Unlock the 2nd Dark Matter Dimension"},{name:"Chiral Oscillation",id:17,cost:6e9,requirement:()=>`Automatically condense at least ${formatInt(20)} Singularities at once`,hasFailed:()=>!1,checkRequirement:()=>Singularity.singularitiesGained>=20&&Currency.darkEnergy.gte(Singularity.cap*SingularityMilestone.autoCondense.effectOrDefault(1/0)),checkEvent:GAME_EVENT.SINGULARITY_RESET_BEFORE,description:"Unlock the 3rd Dark Matter Dimension"},{name:"Dimensional Symmetry",id:18,cost:15e9,formatCost:t=>format(t,1),requirement:()=>`Have ${formatInt(8e4)} total Galaxies`,hasFailed:()=>!1,checkRequirement:()=>Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies>=8e4,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:"Unlock the 4th Dark Matter Dimension"},{name:"Deterministic Radiation",id:19,cost:28e9,formatCost:t=>format(t,1),requirement:()=>`Reach ${formatInt(385e4)} Tickspeed Continuum without ever having more than
      ${formatInt(8)} Time Studies in this Reality`,hasFailed:()=>player.requirementChecks.reality.maxStudies>8,checkRequirement:()=>player.requirementChecks.reality.maxStudies<=8&&Tickspeed.continuumValue>=385e4,checkEvent:GAME_EVENT.GAME_TICK_AFTER,canLock:!0,lockEvent:()=>`purchase more than ${formatInt(8)} Time Studies`,description:"Unlock Dark Matter Annihilation"},{name:"Vacuum Acceleration",id:20,cost:3e12,requirement:()=>`Have a Continuum increase of at least ${formatPercents(1)}`,hasFailed:()=>!1,checkRequirement:()=>Laitela.matterExtraPurchaseFactor>=2,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:()=>`Unlock Autobuyers for repeatable Imaginary Upgrades and generate Imaginary Machines
      ${formatInt(10)} times faster`,effect:10,isDisabledInDoomed:!0},{name:"Existential Elimination",id:21,cost:1e13,requirement:()=>`Reach ${format("1e7400000000000")} antimatter with Continuum disabled for the entire Reality`,hasFailed:()=>!player.requirementChecks.reality.noContinuum,checkRequirement:()=>player.requirementChecks.reality.noContinuum&&Currency.antimatter.value.log10()>=74e11,checkEvent:GAME_EVENT.GAME_TICK_AFTER,canLock:!0,lockEvent:"enable Continuum",description:"Annihilation multiplier gain is improved based on Imaginary Machines",effect:()=>Math.clampMin(Math.pow(Math.log10(Currency.imaginaryMachines.value)-10,3),1),formatEffect:t=>`${formatX(t,2,1)}`,isDisabledInDoomed:!0},{name:"Total Termination",id:22,cost:15e13,formatCost:t=>format(t,1),requirement:()=>`Reach ${format("1e150000000000")} antimatter in Effarig's Reality with
      at least ${formatInt(4)} Cursed Glyphs equipped`,hasFailed:()=>!Effarig.isRunning||player.requirementChecks.reality.maxGlyphs>-10,checkRequirement:()=>Effarig.isRunning&&player.requirementChecks.reality.maxGlyphs<-10&&Currency.antimatter.value.exponent>=15e10,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:()=>`All Glyph Sacrifice totals are increased to ${format(1e100)}`,effect:1e100,isDisabledInDoomed:!0},{name:"Planar Purification",id:23,cost:6e14,requirement:()=>`Reach Glyph level ${formatInt(2e4)} in Ra's Reality with
      at most ${formatInt(0)} Glyphs equipped`,hasFailed:()=>!Ra.isRunning||player.requirementChecks.reality.maxGlyphs>0,checkRequirement:()=>Ra.isRunning&&player.requirementChecks.reality.maxGlyphs<=0&&gainedGlyphLevel().actualLevel>=2e4,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:"Increase free Dimboost count based on Tesseract count",effect:()=>Math.floor(.25*Math.pow(Tesseracts.effectiveCount,2)),formatEffect:t=>`${formatX(t)}`,isDisabledInDoomed:!0},{name:"Absolute Annulment",id:24,cost:6e14,requirement:()=>`Have ${formatInt(13e3)} Antimatter Galaxies in Ra's Reality
      with a fully inverted Black Hole`,hasFailed:()=>!Ra.isRunning||player.requirementChecks.reality.slowestBH>1e-300,checkRequirement:()=>Ra.isRunning&&player.requirementChecks.reality.slowestBH<=1e-300&&player.galaxies>=13e3,checkEvent:GAME_EVENT.GAME_TICK_AFTER,canLock:!0,description:"Increase free Dimboost strength based on Singularity count",effect:()=>Decimal.pow(player.celestials.laitela.singularities,300),formatEffect:t=>`${formatX(t,2,1)}`,isDisabledInDoomed:!0},{name:"Omnipresent Obliteration",id:25,cost:16e14,formatCost:t=>format(t,1),requirement:()=>`Reach Reality in Lai'tela's Reality with all Dimensions disabled and
      at least ${formatInt(4)} empty Glyph slots`,hasFailed:()=>!Laitela.isRunning||Laitela.maxAllowedDimension!==0||Glyphs.activeWithoutCompanion.length>1,checkRequirement:()=>Laitela.isRunning&&Laitela.maxAllowedDimension===0&&Glyphs.activeWithoutCompanion.length<=1&&TimeStudy.reality.isBought,checkEvent:GAME_EVENT.GAME_TICK_AFTER,canLock:!0,lockEvent:"equip another non-Companion Glyph",description:"Unlock Pelle, Celestial of Antimatter"}],$y=t=>{t.cost=()=>getHybridCostScaling(player.reality.rebuyables[t.id],1e30,t.initialCost,t.costMult,t.costMult/10,L.E309,1e3,t.initialCost*t.costMult);const{effect:e}=t;return t.effect=()=>Math.pow(e+ImaginaryUpgrade(t.id).effectOrDefault(0),player.reality.rebuyables[t.id]*getAdjustedGlyphEffect("realityrow1pow")),t.description=()=>t.textTemplate.replace("{value}",ImaginaryUpgrade(t.id).effectValue===0?formatInt(e):format(e+ImaginaryUpgrade(t.id).effectValue,2,2)),t.formatEffect=i=>formatX(i,2,0),t.formatCost=i=>format(i,2,0),t},U8=[$y({name:"Temporal Amplifier",id:1,initialCost:1,costMult:30,textTemplate:"You gain Dilated Time {value} times faster",effect:3}),$y({name:"Replicative Amplifier",id:2,initialCost:1,costMult:30,textTemplate:"You gain Replicanti {value} times faster",effect:3}),$y({name:"Eternal Amplifier",id:3,initialCost:2,costMult:30,textTemplate:"You gain {value} times more Eternities",effect:3}),$y({name:"Superluminal Amplifier",id:4,initialCost:2,costMult:30,textTemplate:"You gain {value} times more Tachyon Particles",effect:3}),$y({name:"Boundless Amplifier",id:5,initialCost:3,costMult:50,textTemplate:"You gain {value} times more Infinities",effect:5}),{name:"Cosmically Duplicate",id:6,cost:15,requirement:"Complete your first manual Eternity without using Replicanti Galaxies",hasFailed:()=>!(player.requirementChecks.eternity.noRG&&player.requirementChecks.reality.noEternities),checkRequirement:()=>player.requirementChecks.eternity.noRG&&player.requirementChecks.reality.noEternities,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE,canLock:!0,lockEvent:"gain a Replicanti Galaxy",description:"Replicanti speed is multiplied based on Replicanti Galaxies",effect:()=>1+Replicanti.galaxies.total/50,formatEffect:t=>formatX(t,2,2)},{name:"Innumerably Construct",id:7,cost:15,requirement:"Complete your first Infinity with at most 1 Antimatter Galaxy",hasFailed:()=>!(player.galaxies<=1&&player.requirementChecks.reality.noInfinities),checkRequirement:()=>player.galaxies<=1&&player.requirementChecks.reality.noInfinities,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,canLock:!0,lockEvent:"gain another Antimatter Galaxy",description:"Infinity gain is boosted from Antimatter Galaxy count",effect:()=>1+player.galaxies/30,formatEffect:t=>formatX(t,2,2)},{name:"Paradoxically Attain",id:8,cost:15,requirement:"Manually Eternity without any automatic Achievements",hasFailed:()=>player.reality.gainedAutoAchievements,checkRequirement:()=>!player.reality.gainedAutoAchievements,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE,canLock:!0,description:"Tachyon Particle gain is boosted based on Achievement multiplier",effect:()=>Math.sqrt(Achievements.power),formatEffect:t=>formatX(t,2,2)},{name:"Linguistically Expand",id:9,cost:15,requirement:()=>`Eternity for ${format("1e4000")} Eternity Points using
      only a single Glyph which must be level ${formatInt(3)}+.`,hasFailed:()=>{const t=Glyphs.activeWithoutCompanion.length>1||Glyphs.activeWithoutCompanion.length===1&&Glyphs.activeWithoutCompanion[0].level<3,e=Glyphs.inventory.countWhere(i=>i&&i.level>=3)>0;return t||Glyphs.activeWithoutCompanion.length===0&&!e},checkRequirement:()=>Currency.eternityPoints.exponent>=4e3&&Glyphs.activeWithoutCompanion.length===1&&Glyphs.activeWithoutCompanion[0].level>=3,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER,canLock:!0,description:"Gain another Glyph slot",effect:()=>1},{name:"Existentially Prolong",id:10,cost:15,requirement:()=>`Complete your first manual Eternity with at least ${formatPostBreak(L.E400)} Infinity Points`,hasFailed:()=>!player.requirementChecks.reality.noEternities,checkRequirement:()=>Currency.infinityPoints.exponent>=400&&player.requirementChecks.reality.noEternities,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE,canLock:!0,lockEvent:"Eternity",bypassLock:()=>Currency.infinityPoints.exponent>=400,description:()=>`Start every Reality with ${formatInt(100)} Eternities (also applies to current Reality)`,automatorPoints:15,shortDescription:()=>`Start with ${formatInt(100)} Eternities`,effect:()=>100},{name:"The Boundless Flow",id:11,cost:50,requirement:()=>`${format(Currency.infinitiesBanked.value,2)}/${format(L.E12)} Banked Infinities`,checkRequirement:()=>Currency.infinitiesBanked.exponent>=12,checkEvent:[GAME_EVENT.ETERNITY_RESET_AFTER,GAME_EVENT.REALITY_FIRST_UNLOCKED],description:"Every second, gain 10% of the Infinities you would normally gain by Infinitying",automatorPoints:5,shortDescription:()=>"Continuous Infinity generation",effect:()=>gainedInfinities().times(.1),formatEffect:t=>`${format(t)} per second`},{name:"The Knowing Existence",id:12,cost:50,requirement:()=>`Eternity for ${format(L.E70)} Eternity Points without completing Eternity Challenge 1`,hasFailed:()=>EternityChallenge(1).completions!==0,checkRequirement:()=>Currency.eternityPoints.exponent>=70&&EternityChallenge(1).completions===0,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER,canLock:!0,lockEvent:"complete Eternity Challenge 1",description:"Eternity Point multiplier based on Reality and Time Theorem count",effect:()=>Currency.timeTheorems.value.minus(L.E3).clampMin(2).pow(Math.log2(Math.min(Currency.realities.value,1e4))).clampMin(1),formatEffect:t=>formatX(t,2,2)},{name:"The Telemechanical Process",id:13,cost:50,requirement:()=>`Eternity for ${format(L.E4000)} Eternity Points without Time Dim. 5-8`,hasFailed:()=>!Array.range(5,4).every(t=>TimeDimension(t).amount.equals(0)),checkRequirement:()=>Currency.eternityPoints.exponent>=4e3&&Array.range(5,4).every(t=>TimeDimension(t).amount.equals(0)),checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER,canLock:!0,lockEvent:"purchase a Time Dimension above the 4th TD",description:()=>`Improve Eternity Autobuyer and unlock autobuyers for Time Dimensions and ${formatX(5)} EP`,automatorPoints:10,shortDescription:()=>`TD and ${formatX(5)} EP Autobuyers, improved Eternity Autobuyer`},{name:"The Eternal Flow",id:14,cost:50,requirement:()=>`${format(Currency.eternities.value,2)}/${format(1e7)} Eternities`,checkRequirement:()=>Currency.eternities.gte(1e7),checkEvent:[GAME_EVENT.ETERNITY_RESET_AFTER,GAME_EVENT.REALITY_FIRST_UNLOCKED],description:"Gain Eternities per second equal to your Reality count",automatorPoints:5,shortDescription:()=>"Continuous Eternity generation",effect:()=>Currency.realities.value*Ra.unlocks.continuousTTBoost.effects.eternity.effectOrDefault(1),formatEffect:t=>`${format(t)} per second`},{name:"The Paradoxical Forever",id:15,cost:50,requirement:()=>`Have ${format(L.E10)} Eternity Points without purchasing
      the ${formatX(5)} Eternity Point upgrade`,hasFailed:()=>player.epmultUpgrades!==0,checkRequirement:()=>Currency.eternityPoints.exponent>=10&&player.epmultUpgrades===0,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER,canLock:!0,lockEvent:()=>`purchase a ${formatX(5)} EP upgrade`,description:()=>`Boost Tachyon Particle gain based on ${formatX(5)} Eternity Point multiplier`,effect:()=>Math.max(Math.sqrt(Decimal.log10(EternityUpgrade.epMult.effectValue))/9,1),formatEffect:t=>formatX(t,2,2)},{name:"Disparity of Rarity",id:16,cost:1500,requirement:()=>`Reality with ${formatInt(4)} Glyphs equipped of uncommon or better rarity
      (${formatInt(Glyphs.activeWithoutCompanion.countWhere(t=>t&&t.strength>=1.5))} equipped)`,hasFailed:()=>{const t=Glyphs.inventory.countWhere(n=>n&&n.strength>=1.5),e=Glyphs.activeWithoutCompanion.countWhere(n=>n.strength>=1.5),i=Glyphs.activeSlotCount-Glyphs.activeList.length;return e+Math.min(t,i)<4},checkRequirement:()=>Glyphs.activeWithoutCompanion.countWhere(t=>t.strength>=1.5)===4,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,description:"Improve the Glyph rarity formula",effect:1.3,formatCost:t=>format(t,1,0)},{name:"Duplicity of Potency",id:17,cost:1500,requirement:()=>`Reality with ${formatInt(4)} Glyphs equipped, each having at least ${formatInt(2)} effects
      (${formatInt(Glyphs.activeWithoutCompanion.countWhere(t=>t&&countValuesFromBitmask(t.effects)>=2))}
      equipped)`,hasFailed:()=>{const t=Glyphs.inventory.countWhere(n=>n&&countValuesFromBitmask(n.effects)>=2),e=Glyphs.activeWithoutCompanion.countWhere(n=>countValuesFromBitmask(n.effects)>=2),i=Glyphs.activeSlotCount-Glyphs.activeList.length;return e+Math.min(t,i)<4},checkRequirement:()=>Glyphs.activeWithoutCompanion.countWhere(t=>countValuesFromBitmask(t.effects)>=2)===4,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,description:()=>`${formatPercents(.5)} chance to get an additional effect on Glyphs`,effect:.5,formatCost:t=>format(t,1,0)},{name:"Measure of Forever",id:18,cost:1500,requirement:()=>`Reality with ${formatInt(4)} Glyphs equipped, each at level ${formatInt(10)} or higher
      (${formatInt(Glyphs.activeWithoutCompanion.countWhere(t=>t&&t.level>=10))} equipped)`,hasFailed:()=>{const t=Glyphs.inventory.countWhere(n=>n&&n.level>=10),e=Glyphs.activeWithoutCompanion.countWhere(n=>n.level>=10),i=Glyphs.activeSlotCount-Glyphs.activeList.length;return e+Math.min(t,i)<4},checkRequirement:()=>Glyphs.activeWithoutCompanion.countWhere(t=>t.level>=10)===4,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,description:"Eternity count boosts Glyph level",effect:()=>Math.max(Math.sqrt(Currency.eternities.value.plus(1).log10())*.45,1),formatCost:t=>format(t,1,0)},{name:"Scour to Empower",id:19,cost:1500,requirement:()=>`Have a total of ${formatInt(30)} or more Glyphs at once
      (You have ${formatInt(Glyphs.allGlyphs.countWhere(t=>t.type!=="companion"))})`,hasFailed:()=>Glyphs.allGlyphs.countWhere(t=>t.type!=="companion")<30,checkRequirement:()=>Glyphs.allGlyphs.countWhere(t=>t.type!=="companion")>=30,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,description:"You can sacrifice Glyphs for permanent bonuses (Shift + click)",formatCost:t=>format(t,1,0)},{name:"Parity of Singularity",id:20,cost:1500,requirement:()=>`${formatInt(100)} days total play time after unlocking the Black Hole
      (Currently: ${Time.timeSinceBlackHole.toStringShort(!1)})`,hasFailed:()=>!BlackHole(1).isUnlocked&&Currency.realityMachines.lt(100),checkRequirement:()=>Time.timeSinceBlackHole.totalDays>=100&&BlackHole(1).isUnlocked,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:"Unlock another Black Hole",automatorPoints:10,shortDescription:()=>"Second Black Hole",formatCost:t=>format(t,1,0)},{name:"Cosmic Conglomerate",id:21,cost:1e5,requirement:()=>`${formatInt(Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies)}/${formatInt(2800)} total Galaxies from all types`,checkRequirement:()=>Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies>=2800,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:()=>`Remote Antimatter Galaxy scaling is moved to ${formatInt(1e5)} galaxies`,effect:1e5},{name:"Temporal Transcendence",id:22,cost:1e5,requirement:()=>`${format(Currency.timeShards.value,1)}/${format(L.E28000)} Time Shards`,checkRequirement:()=>Currency.timeShards.exponent>=28e3,checkEvent:GAME_EVENT.GAME_TICK_AFTER,description:"Time Dimension multiplier based on days spent in this Reality",effect:()=>Decimal.pow10(Math.pow(1+2*Math.log10(Time.thisReality.totalDays+1),1.6)),formatEffect:t=>formatX(t,2,2)},{name:"Replicative Rapidity",id:23,cost:1e5,requirement:()=>`Reality in under ${formatInt(15)} minutes of game time
      (Fastest: ${Time.bestReality.toStringShort()})`,hasFailed:()=>Time.thisReality.totalMinutes>=15,checkRequirement:()=>Time.thisReality.totalMinutes<15,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,description:"Replicanti speed is boosted based on your fastest game-time Reality",effect:()=>15/Math.clamp(Time.bestReality.totalMinutes,1/12,15),cap:180,formatEffect:t=>formatX(t,2,2)},{name:"Synthetic Symbolism",id:24,cost:1e5,requirement:()=>`Reality for ${formatInt(5e3)} Reality Machines without equipped Glyphs`,hasFailed:()=>Glyphs.activeWithoutCompanion.length>0,checkRequirement:()=>MachineHandler.gainedRealityMachines.gte(5e3)&&Glyphs.activeWithoutCompanion.length===0,canLock:!0,lockEvent:"equip a non-Companion Glyph",checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,description:"Gain another Glyph slot",effect:()=>1},{name:"Effortless Existence",id:25,cost:1e5,requirement:()=>`Reach ${format(L.E11111)} EP (Best: ${format(player.records.bestReality.bestEP,2)} EP)`,checkRequirement:()=>player.records.bestReality.bestEP.exponent>=11111,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER,description:"Unlock the Reality autobuyer and Automator command",automatorPoints:100,shortDescription:()=>"Reality Autobuyer"}],u0={automator:M8,cosmeticGlyphs:S8,glyphCosmeticSets:P8,glyphEffects:O8,glyphSacrifice:N8,glyphTypes:C8,imaginaryUpgrades:G8,perks:NC,perkConnections:k8,upgrades:U8},Ee={DIMENSION(t,e){const i=e??"";switch(t){case"AD":return{symbol:`<b>Ω${i}</b>`,color:"var(--color-antimatter)"};case"ID":return{symbol:`<b>∞${i}</b>`,color:"var(--color-infinity)"};case"TD":return{symbol:`<b>Δ${i}</b>`,color:"var(--color-eternity)"};default:throw new Error("Unrecognized dimension type in multiplier tab icons")}},PURCHASE(t,e){const i=`<i class="fas fa-arrow-up-right-dots" />${e??""}`;switch(t){case"AD":return{symbol:i,color:"var(--color-antimatter)"};case"ID":return{symbol:i,color:"var(--color-infinity)"};case"TD":return{symbol:i,color:"var(--color-eternity)"};case"baseID":return{symbol:'<i class="fas fa-arrows-up-to-line" />',color:"var(--color-infinity)"};case"tesseractID":return{symbol:'<i class="fas fa-up-right-and-down-left-from-center" />',color:"var(--color-enslaved--base)"};default:throw new Error("Unrecognized purchase type in multiplier tab icons")}},CHALLENGE(t,e){const i=`<i class="fas fa-arrow-down-wide-short" />${e??""}`;switch(t){case"infinity":return{symbol:`<b>∞</b>${i}`,color:"var(--color-infinity)"};case"eternity":return{symbol:`<b>Δ</b>${i}`,color:"var(--color-eternity)"};default:throw new Error("Unrecognized challenge type in multiplier tab icons")}},SACRIFICE(t){const e='<i class="fas fa-turn-down" />';switch(t){case"antimatter":return{symbol:`<b>Ω</b>${e}`,color:"var(--color-antimatter)"};case"infinity":return{symbol:`<b>∞</b>${e}`,color:"var(--color-infinity)"};case"time":return{symbol:`<b>Δ</b>${e}`,color:"var(--color-eternity)"};case"dilation":return{symbol:`<b>Ψ</b>${e}`,color:"var(--color-dilation)",textColor:"black"};default:throw new Error("Unrecognized sacrifice type in multiplier tab icons")}},UPGRADE(t){const e='<i class="fas fa-arrow-up" />';switch(t){case"infinity":return{symbol:`<b>∞</b>${e}`,color:"var(--color-infinity)"};case"eternity":return{symbol:`<b>Δ</b>${e}`,color:"var(--color-eternity)"};case"dilation":return{symbol:`<b>Ψ</b>${e}`,color:"var(--color-dilation)"};case"reality":return{symbol:`<b>Ϟ</b>${e}`,color:"var(--color-reality)"};case"imaginary":return{symbol:`<i class="far fa-lightbulb" />${e}`,color:"var(--color-ra--base)"};default:throw new Error("Unrecognized upgrade type in multiplier tab icons")}},CONVERT_FROM(t){return t==="AM"?{symbol:"<i class='fas fa-atom' /><i class='fa-solid fa-arrow-right-arrow-left' />",color:"var(--color-antimatter)"}:t==="IP"?{symbol:"<b>∞</b><i class='fa-solid fa-arrow-right-arrow-left' />",color:"var(--color-infinity)"}:{}},DIVISOR(t){let e;return t==="IP"&&(e="var(--color-infinity)"),t==="EP"&&(e="var(--color-eternity)"),{symbol:"<i class='fas fa-calculator' />",color:e}},ANTIMATTER:{symbol:"<i class='fas fa-atom' />",color:"var(--color-antimatter)"},DIMBOOST:{symbol:'<i class="fas fa-angles-up" />',color:u0.glyphTypes.power.color},TICKSPEED:{symbol:'<i class="fas fa-clock" />',color:"var(--color-eternity)"},GALAXY:{symbol:'<i class="fas fa-bahai" />',color:"var(--color-eternity)"},ACHIEVEMENT:{symbol:'<i class="fas fa-trophy" />',color:"var(--color-v--base)",textColor:"black"},BREAK_INFINITY:{symbol:"<b>∝</b>",color:"var(--color-infinity)",textColor:"black"},INFINITY_POWER:{symbol:'<b>∞</b><i class="fas fa-arrows-turn-right" />',color:"var(--color-infinity)",textColor:"black"},IPOW_CONVERSION:{symbol:'<i class="fas fa-arrow-down-up-across-line" />',color:"var(--color-infinity)",textColor:"black"},TIME_STUDY:{symbol:'<i class="fas fa-book" />',color:"var(--color-eternity)"},TACHYON_PARTICLES:{symbol:'<i class="fas fa-meteor" />',color:"var(--color-dilation)"},GENERIC_GLYPH:{symbol:'<i class="fas fa-clone" />',color:"var(--color-reality)"},SPECIFIC_GLYPH(t){return{symbol:`<b>${u0.glyphTypes[t].symbol}</b>`,color:u0.glyphTypes[t].color}},BLACK_HOLE:{symbol:'<i class="fas fa-circle" />',color:"var(--color-reality)"},GAMESPEED:{symbol:'<i class="fas fa-clock" />',color:"var(--color-reality)"},GENERIC_TERESA:{symbol:"<b>Ϟ</b>",color:"var(--color-teresa--base)"},GENERIC_ENSLAVED:{symbol:'<div class="o-tab-btn--cel3"></div>',color:"var(--color-enslaved--base)"},GENERIC_V:{symbol:"<b>⌬</b>",color:"var(--color-v--base)",textColor:"black"},GENERIC_RA:{symbol:'<i class="fas fa-sun" />',color:"var(--color-ra--base)"},ALCHEMY:{symbol:'<i class="fas fa-vial" />',color:"var(--color-ra-pet--effarig)"},BH_PULSE:{symbol:'<i class="fas fa-expand-arrows-alt" />',color:"var(--color-reality)"},GENERIC_LAITELA:{symbol:"<b>ᛝ</b>",color:"var(--color-laitela--base)",textColor:"var(--color-laitela--accent)"},SINGULARITY:{symbol:'<i class="fas fa-arrows-up-down-left-right" />',color:"var(--color-laitela--base)",textColor:"var(--color-laitela--accent)"},PELLE:{symbol:"<b>♅</b>",color:"var(--color-pelle--base)"},IAP:{symbol:'<i class="fas fa-coins" />',color:"var(--color-accent)"}},L8={total:{name:"Total Tickspeed",displayOverride:()=>{const t=Tickspeed.perSecond,e=He.activeDimCount("AD"),i=He.pluralizeDimensions(e);return`${format(t,2,2)}/sec on ${formatInt(e)} ${i}
        ➜ ${formatX(t.pow(e),2,2)}`},fakeValue:L.E100,multValue:()=>Tickspeed.perSecond.pow(He.activeDimCount("AD")),isActive:()=>Tickspeed.perSecond.gt(1)&&effectiveBaseGalaxies()>0,dilationEffect:()=>Effarig.isRunning?Effarig.tickDilation:1,overlay:["<i class='fa-solid fa-clock' />"],icon:Ee.TICKSPEED},base:{name:"Base Tickspeed from Achievements",displayOverride:()=>{const t=L.D1.dividedByEffectsOf(Achievement(36),Achievement(45),Achievement(66),Achievement(83));return`${format(t,2,2)}/sec`},multValue:()=>new Decimal.pow10(100*He.decomposeTickspeed().base),isActive:()=>[36,45,66,83].some(t=>Achievement(t).canBeApplied),icon:Ee.ACHIEVEMENT},upgrades:{name:"Tickspeed Upgrades",displayOverride:()=>`${formatInt(Tickspeed.totalUpgrades)} Total`,multValue:()=>new Decimal.pow10(100*He.decomposeTickspeed().tickspeed),isActive:!0,icon:Ee.PURCHASE("AD")},galaxies:{name:"Galaxies",displayOverride:()=>{const t=player.galaxies+GalaxyGenerator.galaxies,e=Replicanti.galaxies.total,i=player.dilation.totalTachyonGalaxies;return`${formatInt(t+e+i)} Total`},multValue:()=>new Decimal.pow10(100*He.decomposeTickspeed().galaxies),isActive:!0,icon:Ee.GALAXY},pelleTickspeedPow:{name:"Tickspeed Dilation Upgrade",powValue:()=>DilationUpgrade.tickspeedPower.effectValue,isActive:()=>DilationUpgrade.tickspeedPower.canBeApplied,icon:Ee.UPGRADE("dilation")}},B8={purchased:{name:"Purchased Tickspeed Upgrades",displayOverride:()=>Laitela.continuumActive?formatFloat(Tickspeed.continuumValue,2,2):formatInt(player.totalTickBought),multValue:()=>Decimal.pow10(Laitela.continuumActive?Tickspeed.continuumValue:player.totalTickBought),isActive:()=>!0,icon:Ee.PURCHASE("AD")},free:{name:"Tickspeed Upgrades from TD",displayOverride:()=>formatInt(player.totalTickGained),multValue:()=>Decimal.pow10(player.totalTickGained),isActive:()=>Currency.timeShards.gt(0),icon:Ee.SPECIFIC_GLYPH("time")}};let on=class Op{constructor(e){this._player=e}get isInfinityUnlocked(){const e=this._player.infinitied?this._player.infinitied:this._player.infinities;return new Decimal(e).gt(0)||this.isEternityUnlocked}get isEternityUnlocked(){return new Decimal(this._player.eternities).gt(0)||this.isRealityUnlocked}get isRealityUnlocked(){return this._player.realities>0}get hasFullCompletion(){var e;return((e=this._player.records)==null?void 0:e.fullGameCompletions)>0}static get current(){return new Op(player)}static of(e){return new Op(e)}static infinityUnlocked(){return Op.current.isInfinityUnlocked}static hasBroken(){return player.break||this.isEternityUnlocked||this.isRealityUnlocked}static replicantiUnlocked(){return Replicanti.areUnlocked||this.isEternityUnlocked}static eternityUnlocked(){return Op.current.isEternityUnlocked}static dilationUnlocked(){return TimeStudy.dilation.isBought}static realityUnlocked(){return Op.current.isRealityUnlocked}static seenAlteredSpeed(){const e=EternityChallenge(12);return this.realityUnlocked()||e.completions>0||e.isRunning}static challengeCompleted(){return NormalChallenges.all.slice(1).some(e=>e.isCompleted)}static infinityChallengeCompleted(){return InfinityChallenges.all.some(e=>e.isCompleted)}};const F8={total:{name:t=>t?`AD ${t} Multiplier`:NormalChallenge(12).isRunning?He.actualNC12Production().eq(0)?"Base AD Production from All Dimensions":`Base AD Production from ${He.isNC12ProducingEven()?"Even":"Odd"} Dimensions`:"Base AD Production",displayOverride:t=>{if(t){const i=NormalChallenge(12).isRunning?He.multInNC12(t):AntimatterDimension(t).multiplier;return formatX(i,2,2)}const e=EternityChallenge(7).isRunning?7:He.activeDimCount("AD");return NormalChallenge(12).isRunning?`${format(He.actualNC12Production(),2)}/sec`:`${format(AntimatterDimensions.all.filter(i=>i.isProducing).map(i=>i.multiplier).reduce((i,n)=>i.times(n),L.D1).times(AntimatterDimension(e).totalAmount),2)}/sec`},multValue:t=>{if(NormalChallenge(12).isRunning){const n=He.actualNC12Production();return t?(He.isNC12ProducingEven()?t%2===0:t%2===1)?He.multInNC12(t):L.D1:n.eq(0)?1:n}const e=t?AntimatterDimension(t).multiplier:AntimatterDimensions.all.filter(n=>n.isProducing).map(n=>n.multiplier).reduce((n,r)=>n.times(r),L.D1),i=AntimatterDimension(EternityChallenge(7).isRunning?7:He.activeDimCount("AD")).totalAmount;return e.times(i).clampMin(1)},isActive:t=>t?t<=He.activeDimCount("AD"):!0,dilationEffect:()=>(player.dilation.active||Enslaved.isRunning?.75*Effects.product(DilationUpgrade.dilationPenalty):1)*(Effarig.isRunning?Effarig.multDilation:1),isDilated:!0,overlay:["Ω","<i class='fas fa-cube' />"],icon:t=>Ee.DIMENSION("AD",t)},purchase:{name:t=>t?`Purchased AD ${t}`:"Purchases",multValue:t=>{const e=i=>Laitela.continuumActive?AntimatterDimension(i).continuumValue:Math.floor(AntimatterDimension(i).bought/10);return t?Decimal.pow(AntimatterDimensions.buyTenMultiplier,e(t)):AntimatterDimensions.all.filter(i=>i.isProducing).map(i=>Decimal.pow(AntimatterDimensions.buyTenMultiplier,e(i.tier))).reduce((i,n)=>i.times(n),L.D1)},isActive:()=>!EternityChallenge(11).isRunning,icon:t=>Ee.PURCHASE("AD",t)},highestDim:{name:()=>"Amount of highest Dimension",displayOverride:()=>{const t=EternityChallenge(7).isRunning?7:He.activeDimCount("AD");return`AD ${t}, ${format(AntimatterDimension(t).totalAmount,2)}`},multValue:()=>{const t=EternityChallenge(7).isRunning?7:He.activeDimCount("AD");return AntimatterDimension(t).totalAmount},isActive:()=>AntimatterDimension(1).isProducing,icon:Ee.DIMENSION("AD")},dimboost:{name:t=>t?`Dimboosts on AD ${t}`:"Dimboosts",multValue:t=>t?DimBoost.multiplierToNDTier(t):AntimatterDimensions.all.filter(e=>e.isProducing).map(e=>DimBoost.multiplierToNDTier(e.tier)).reduce((e,i)=>e.times(i),L.D1),isActive:!0,icon:Ee.DIMBOOST},sacrifice:{name:"Sacrifice Multiplier",multValue:t=>!t||t===8?Sacrifice.totalBoost:L.D1,isActive:t=>(!t||t===8)&&Sacrifice.totalBoost.gt(1)&&!EternityChallenge(11).isRunning,icon:Ee.SACRIFICE("antimatter")},achievementMult:{name:"Achievement Multiplier",multValue:t=>Decimal.pow(Achievements.power,t?1:He.activeDimCount("AD")),isActive:()=>!Pelle.isDoomed&&!EternityChallenge(11).isRunning,icon:Ee.ACHIEVEMENT},achievement:{name:"Achievement Rewards",multValue:t=>{const e=L.D1.timesEffectsOf(Achievement(48),Achievement(56),Achievement(65),Achievement(72),Achievement(73),Achievement(74),Achievement(76),Achievement(84),Achievement(91),Achievement(92)),i=Array.repeat(L.D1,9);for(let r=1;r<=8;r++)r===1&&(i[r]=i[r].timesEffectsOf(Achievement(28),Achievement(31),Achievement(68),Achievement(71))),i[r]=i[r].timesEffectsOf(r===8?Achievement(23):null,r<8?Achievement(34):null,r<=4?Achievement(64):null),Achievement(43).isUnlocked&&(i[r]=i[r].times(1+r/100));if(t)return e.times(i[t]);let n=L.D1;for(let r=1;r<=He.activeDimCount("AD");r++)n=n.times(i[r]).times(e);return n},powValue:()=>Achievement(183).effectOrDefault(1),isActive:()=>!EternityChallenge(11).isRunning,icon:Ee.ACHIEVEMENT},infinityUpgrade:{name:t=>t?`Infinity Upgrades (AD ${t})`:"Infinity Upgrades",multValue:t=>{const e=L.D1.timesEffectsOf(InfinityUpgrade.totalTimeMult,InfinityUpgrade.thisInfinityTimeMult),i=Array.repeat(L.D1,9);for(let r=1;r<=8;r++)r===1&&(i[r]=i[r].timesEffectsOf(InfinityUpgrade.unspentIPMult,InfinityUpgrade.unspentIPMult.chargedEffect)),i[r]=i[r].timesEffectsOf(AntimatterDimension(r).infinityUpgrade);if(t)return e.times(i[t]);let n=L.D1;for(let r=1;r<=He.activeDimCount("AD");r++)n=n.times(i[r]).times(e);return n},powValue:t=>{const e=InfinityUpgrade.totalTimeMult.chargedEffect.effectOrDefault(1)*InfinityUpgrade.thisInfinityTimeMult.chargedEffect.effectOrDefault(1),i=Array.repeat(1,9);for(let n=1;n<=8;n++)i[n]=AntimatterDimension(n).infinityUpgrade.chargedEffect.effectOrDefault(1);return t?e*i[t]:e*Math.exp(i.slice(1).map(n=>Math.log(n)).sum()/He.activeDimCount("AD"))},isActive:()=>on.infinityUnlocked()&&!EternityChallenge(11).isRunning,icon:Ee.UPGRADE("infinity")},breakInfinityUpgrade:{name:"Break Infinity Upgrades",multValue:t=>{const e=L.D1.timesEffectsOf(BreakInfinityUpgrade.totalAMMult,BreakInfinityUpgrade.currentAMMult,BreakInfinityUpgrade.achievementMult,BreakInfinityUpgrade.slowestChallengeMult,BreakInfinityUpgrade.infinitiedMult);return Decimal.pow(e,t?1:He.activeDimCount("AD"))},isActive:()=>player.break&&!EternityChallenge(11).isRunning,icon:Ee.BREAK_INFINITY},infinityPower:{name:"Multiplier from Infinity Power",fakeValue:()=>Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate),multValue:t=>{const e=Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate).max(1);return Decimal.pow(e,t?1:He.activeDimCount("AD"))},isActive:()=>Currency.infinityPower.value.gt(1)&&!EternityChallenge(9).isRunning,icon:Ee.INFINITY_POWER},infinityChallenge:{name:t=>t?`Infinity Challenges (AD ${t})`:"Infinity Challenges",multValue:t=>{const e=L.D1.timesEffectsOf(InfinityChallenge(3),InfinityChallenge(3).reward),i=Array.repeat(L.D1,9);for(let r=1;r<=8;r++)i[r]=i[r].timesEffectsOf(r>1&&r<8?InfinityChallenge(8).reward:null);if(t)return e.times(i[t]);let n=L.D1;for(let r=1;r<=He.activeDimCount("AD");r++)n=n.times(i[r]).times(e);return n},powValue:()=>InfinityChallenge(4).reward.effectOrDefault(1),isActive:()=>player.break&&!EternityChallenge(11).isRunning,icon:Ee.CHALLENGE("infinity")},timeStudy:{name:t=>t?`Time Studies (AD ${t})`:"Time Studies",multValue:t=>{const e=L.D1.timesEffectsOf(TimeStudy(91),TimeStudy(101),TimeStudy(161),TimeStudy(193)),i=Array.repeat(L.D1,9);for(let r=1;r<=8;r++){const s=L.D1.timesEffectsOf(AntimatterDimension(r).infinityUpgrade,BreakInfinityUpgrade.infinitiedMult);i[r]=i[r].times(s.pow(TimeStudy(31).effectOrDefault(1)-1)),i[r]=i[r].timesEffectsOf(r<8?TimeStudy(71):null,r===8?TimeStudy(214):null,r===1?TimeStudy(234):null)}if(t)return e.times(i[t]);let n=L.D1;for(let r=1;r<=He.activeDimCount("AD");r++)n=n.times(i[r]).times(e);return n},isActive:()=>on.eternityUnlocked()&&!EternityChallenge(11).isRunning,icon:Ee.TIME_STUDY},eternityChallenge:{name:"Eternity Challenges",multValue:t=>Decimal.pow(EternityChallenge(10).effectValue,t?1:He.activeDimCount("AD")),isActive:()=>EternityChallenge(10).isRunning,icon:Ee.CHALLENGE("eternity")},glyph:{name:"Glyph Effects",multValue:t=>{const e=getAdjustedGlyphEffect("powermult");return Decimal.pow(e,t?1:He.activeDimCount("AD"))},powValue:()=>getAdjustedGlyphEffect("powerpow")*getAdjustedGlyphEffect("effarigdimensions")*(player.dilation.active?getAdjustedGlyphEffect("dilationpow"):1),isActive:()=>on.realityUnlocked()&&!EternityChallenge(11).isRunning,icon:Ee.GENERIC_GLYPH},v:{name:"5 V-Achievement Milestone - AD Power based on Space Theorems",powValue:()=>VUnlocks.adPow.effectOrDefault(1),isActive:()=>on.realityUnlocked()&&!EternityChallenge(11).isRunning,icon:Ee.ACHIEVEMENT},alchemy:{name:"Glyph Alchemy",multValue:t=>{const e=AlchemyResource.dimensionality.effectOrDefault(1).times(Currency.realityMachines.value.powEffectOf(AlchemyResource.force));return Decimal.pow(e,t?1:He.activeDimCount("AD"))},powValue:t=>{const e=AlchemyResource.power.effectOrDefault(1)*Ra.momentumValue;let i=1;if(AlchemyResource.inflation.isUnlocked)if(t)i=AntimatterDimension(t).multiplier.gte(AlchemyResource.inflation.effectValue)?1.05:1;else{const n=AntimatterDimensions.all.countWhere(r=>r.isProducing&&r.multiplier.gte(AlchemyResource.inflation.effectValue));i=Math.pow(1.05,n/AntimatterDimensions.all.countWhere(r=>r.isProducing))}return e*i},isActive:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied&&!EternityChallenge(11).isRunning,icon:Ee.ALCHEMY},pelle:{name:"Pelle Upgrades",multValue:t=>Decimal.pow(PelleUpgrade.antimatterDimensionMult.effectOrDefault(1),t?1:He.activeDimCount("AD")),powValue:()=>PelleRifts.paradox.effectOrDefault(L.D1).toNumber(),isActive:()=>Pelle.isDoomed&&!EternityChallenge(11).isRunning,icon:Ee.PELLE},iap:{name:"Shop Tab Purchases",multValue:t=>{const e=ShopPurchase.dimPurchases.currentMult*ShopPurchase.allDimPurchases.currentMult;return Decimal.pow(e,t?1:He.activeDimCount("AD"))},isActive:()=>ShopPurchaseData.totalSTD>0&&!EternityChallenge(11).isRunning,icon:Ee.IAP},effectNC:{name:t=>t?`Normal Challenge Effect (AD ${t})`:"Normal Challenge Effects",displayOverride:t=>{const e=r=>r.gte(1)?formatX(r,2,2):`/${format(r.reciprocal(),2,2)}`;let i=Array.repeat(L.D1,9);if(NormalChallenge(2).isRunning&&(i=Array.repeat(new Decimal(player.chall2Pow),9)),NormalChallenge(3).isRunning&&(i[1]=i[1].times(player.chall3Pow)),NormalChallenge(12).isRunning&&(i[2]=AntimatterDimension(2).totalAmount.pow(.6),i[4]=AntimatterDimension(4).totalAmount.pow(.4),i[6]=AntimatterDimension(6).totalAmount.pow(.2)),t)return e(i[t]);let n=L.D1;for(let r=1;r<=He.activeDimCount("AD");r++)n=n.times(i[r]);return e(n)},multValue:t=>{let e=Array.repeat(L.D1,9);if(NormalChallenge(2).isRunning&&(e=Array.repeat(new Decimal(player.chall2Pow),9)),NormalChallenge(3).isRunning&&(e[1]=e[1].times(player.chall3Pow)),NormalChallenge(12).isRunning){if(e[2]=AntimatterDimension(2).totalAmount.pow(.6),e[4]=AntimatterDimension(4).totalAmount.pow(.4),e[6]=AntimatterDimension(6).totalAmount.pow(.2),!He.isNC12ProducingEven())return L.D1;if(t)return e[t].neq(0)?e[t]:L.D1;let n=L.D1;for(let r=2;r<=6;r+=2)n=n.times(e[r].clampMin(1));return n}if(t)return e[t];let i=L.D1;for(let n=1;n<=He.activeDimCount("AD");n++)i=i.times(e[n]);return i},isActive:()=>[2,3,12].some(t=>NormalChallenge(t).isRunning),icon:Ee.CHALLENGE("infinity")},nerfIC:{name:t=>t?`Infinity Challenge Nerf (AD ${t})`:"Infinity Challenge Nerf",multValue:t=>{let e=Array.repeat(L.D1,9);if(InfinityChallenge(4).isRunning)for(let n=1;n<=8;n++)player.postC4Tier!==n&&(e[n]=e[n].pow(1-InfinityChallenge(4).effectValue).reciprocal());else InfinityChallenge(6).isRunning?e=Array.repeat(L.D1.dividedByEffectOf(InfinityChallenge(6)),9):InfinityChallenge(8).isRunning&&(e=Array.repeat(L.D1.timesEffectsOf(InfinityChallenge(8)),9));if(t)return e[t];let i=L.D1;for(let n=1;n<=He.activeDimCount("AD");n++)i=i.times(e[n]);return i},isActive:()=>[4,6,8].some(t=>InfinityChallenge(t).isRunning),icon:Ee.CHALLENGE("infinity")},nerfV:{name:"V's Reality",powValue:()=>.5,isActive:()=>V.isRunning,icon:Ee.GENERIC_V},nerfCursed:{name:"Cursed Glyphs",powValue:()=>getAdjustedGlyphEffect("curseddimensions"),isActive:()=>getAdjustedGlyphEffect("curseddimensions")!==1,icon:Ee.SPECIFIC_GLYPH("cursed")},nerfPelle:{name:"Doomed Reality",multValue:.1,powValue:()=>PelleStrikes.infinity.hasStrike?.5:1,isActive:()=>Pelle.isDoomed,icon:Ee.PELLE}},$8={total:{name:"Antimatter Production",displayOverride:()=>`${format(Currency.antimatter.productionPerSecond,2,2)}/sec`,multValue:()=>new Decimal(Currency.antimatter.productionPerSecond).clampMin(1),isActive:!0,overlay:["<i class='fas fa-atom' />"]},effarigAM:{name:"Glyph Effect - Effarig Antimatter Production",powValue:()=>{const t=AntimatterDimension(1),e=t.totalAmount.times(t.multiplier).times(Tickspeed.perSecond);return Math.pow(e.log10(),getAdjustedGlyphEffect("effarigantimatter")-1)},isActive:()=>getAdjustedGlyphEffect("effarigantimatter")>1&&AntimatterDimension(1).isProducing,icon:Ee.SPECIFIC_GLYPH("effarig")}},H8={total:{name:"Dilated Time gain",displayOverride:()=>`${format(getDilationGainPerSecond().times(getGameSpeedupForDisplay()),2,2)}/sec`,multValue:()=>getDilationGainPerSecond().times(getGameSpeedupForDisplay()),isActive:()=>on.realityUnlocked()||on.dilationUnlocked()&&getDilationGainPerSecond().gt(0),dilationEffect:()=>Enslaved.isRunning?.85:1,isDilated:!0,overlay:["Ψ"]},achievement:{name:"Achievements",multValue:()=>Achievement(132).effectOrDefault(1)*Achievement(137).effectOrDefault(1),isActive:()=>(Achievement(132).canBeApplied||Achievement(137).canBeApplied)&&getDilationGainPerSecond().neq(0),icon:Ee.ACHIEVEMENT},dilation:{name:"Repeatable Dilation Upgrades",multValue:()=>L.D1.timesEffectsOf(DilationUpgrade.dtGain,DilationUpgrade.dtGainPelle,DilationUpgrade.flatDilationMult),isActive:()=>L.D1.timesEffectsOf(DilationUpgrade.dtGain,DilationUpgrade.dtGainPelle,DilationUpgrade.flatDilationMult).gt(1),icon:Ee.UPGRADE("dilation")},amplifierDT:{name:"Reality Upgrade - Temporal Amplifier",multValue:()=>RealityUpgrade(1).effectOrDefault(1),isActive:()=>RealityUpgrade(1).canBeApplied&&getDilationGainPerSecond().neq(0)&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},glyph:{name:"Glyph Effects",multValue:()=>{const t=getAdjustedGlyphEffect("dilationDT").times(Pelle.specialGlyphEffect.dilation),e=Replicanti.areUnlocked?Math.clampMin(Decimal.log10(Replicanti.amount)*getAdjustedGlyphEffect("replicationdtgain"),1):L.D1;return t.times(e)},isActive:()=>on.realityUnlocked()&&getDilationGainPerSecond().neq(0),icon:Ee.GENERIC_GLYPH},ra1:{name:"Ra Upgrade - Multiplier based on TT",multValue:()=>L.D1.timesEffectsOf(Ra.unlocks.continuousTTBoost.effects.dilatedTime),isActive:()=>Ra.unlocks.autoTP.canBeApplied&&getDilationGainPerSecond().neq(0),icon:Ee.GENERIC_RA},ra2:{name:"Ra Upgrade - Multiplier based on peak game speed",multValue:()=>L.D1.timesEffectsOf(Ra.unlocks.peakGamespeedDT),isActive:()=>Ra.unlocks.autoTP.canBeApplied&&getDilationGainPerSecond().neq(0),icon:Ee.GENERIC_RA},alchemy:{name:"Glyph Alchemy",multValue:()=>AlchemyResource.dilation.effectOrDefault(1),isActive:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied&&getDilationGainPerSecond().neq(0),icon:Ee.ALCHEMY},iap:{name:"Shop Tab Purchases",multValue:()=>new Decimal(ShopPurchase.dilatedTimePurchases.currentMult**(Pelle.isDoomed?.5:1)),isActive:()=>ShopPurchaseData.totalSTD>0&&getDilationGainPerSecond().neq(0),icon:Ee.IAP},nerfV:{name:"V's Reality",powValue:()=>.5,isActive:()=>V.isRunning&&getDilationGainPerSecond().neq(0),icon:Ee.GENERIC_V},nerfPelle:{name:"Doomed Reality",multValue:1e-5,isActive:()=>Pelle.isDoomed&&getDilationGainPerSecond().neq(0),icon:Ee.PELLE},gamespeed:{name:"Current Game speed",multValue:()=>getGameSpeedupForDisplay(),isActive:()=>getGameSpeedupForDisplay()>1&&getDilationGainPerSecond().neq(0),ignoresNerfPowers:!0,icon:Ee.GAMESPEED}},V8={total:{name:"Total EP Gained on Eternity",displayOverride:()=>Player.canEternity?format(gainedEternityPoints(),2,2):"Cannot Eternity",multValue:()=>Player.canEternity?gainedEternityPoints():1,isActive:()=>on.eternityUnlocked()||Player.canEternity,dilationEffect:()=>Laitela.isRunning?.75*Effects.product(DilationUpgrade.dilationPenalty):1,isDilated:!0,overlay:["Δ","<i class='fa-solid fa-layer-group' />"]},base:{name:"Base Eternity Points",isBase:!0,fakeValue:L.D5,multValue:()=>L.D5.pow(player.records.thisEternity.maxIP.plus(gainedInfinityPoints()).log10()/(308-PelleRifts.recursion.effectValue.toNumber())-.7),isActive:()=>on.eternityUnlocked(),icon:Ee.CONVERT_FROM("IP")},IP:{name:"Eternity Points from Infinity Points",displayOverride:()=>`${format(player.records.thisEternity.maxIP.plus(gainedInfinityPoints()),2,2)} IP`,multValue:L.D5,isActive:()=>on.eternityUnlocked(),icon:Ee.SPECIFIC_GLYPH("infinity")},divisor:{name:"Pelle - EP Formula Improvement",displayOverride:()=>{const t=308-PelleRifts.recursion.effectValue.toNumber();return`log(IP)/${formatInt(308)} ➜ log(IP)/${format(t,2,2)}`},powValue:()=>308/(308-PelleRifts.recursion.effectValue.toNumber()),isActive:()=>PelleRifts.recursion.canBeApplied,icon:Ee.DIVISOR("EP")},eternityUpgrade:{name:()=>`Eternity Upgrade - Repeatable ${formatX(5)} EP`,multValue:()=>EternityUpgrade.epMult.effectOrDefault(1),isActive:()=>on.eternityUnlocked()&&!Pelle.isDoomed,icon:Ee.UPGRADE("eternity")},timeStudy:{name:"Time Studies",multValue:()=>L.D1.timesEffectsOf(TimeStudy(61),TimeStudy(121),TimeStudy(122),TimeStudy(123)),isActive:()=>on.eternityUnlocked()&&!Pelle.isDoomed,icon:Ee.TIME_STUDY},glyph:{name:"Equipped Glyphs",multValue:()=>L.D1.timesEffectsOf(Pelle.isDoomed?null:GlyphEffect.epMult).times(Pelle.specialGlyphEffect.time),powValue:()=>GlyphAlteration.isAdded("time")?getSecondaryGlyphEffect("timeEP"):1,isActive:()=>on.realityUnlocked(),icon:Ee.GENERIC_GLYPH},realityUpgrade:{name:"Reality Upgrade - The Knowing Existence",multValue:()=>RealityUpgrade(12).effectOrDefault(1),isActive:()=>RealityUpgrade(12).canBeApplied&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},pelle:{name:"Pelle Strike - Vacuum Rift",multValue:()=>PelleRifts.vacuum.milestones[2].effectOrDefault(1),isActive:()=>PelleRifts.vacuum.milestones[2].canBeApplied,icon:Ee.PELLE},iap:{name:"Shop Tab Purchases",multValue:()=>ShopPurchase.EPPurchases.currentMult,isActive:()=>ShopPurchaseData.totalSTD>0,icon:Ee.IAP},nerfTeresa:{name:"Teresa's Reality",powValue:()=>.55,isActive:()=>Teresa.isRunning,icon:Ee.GENERIC_TERESA},nerfV:{name:"V's Reality",powValue:()=>.5,isActive:()=>V.isRunning,icon:Ee.GENERIC_V}},q8={total:{name:"Eternities gained per Eternity",isBase:!0,multValue:()=>gainedEternities(),isActive:()=>(PlayerProgress.realityUnlocked()||Achievement(113).isUnlocked)&&!Pelle.isDoomed,overlay:["Δ","<i class='fa-solid fa-arrows-rotate' />"]},achievement:{name:"Achievement 113",multValue:()=>Achievement(113).effectOrDefault(1),isActive:()=>Achievement(113).canBeApplied,icon:Ee.ACHIEVEMENT},amplifierEter:{name:"Reality Upgrade - Eternal Amplifier",multValue:()=>RealityUpgrade(3).effectOrDefault(1),isActive:()=>RealityUpgrade(3).canBeApplied,icon:Ee.UPGRADE("reality")},glyph:{name:"Equipped Glyphs",multValue:()=>getAdjustedGlyphEffect("timeetermult"),isActive:()=>PlayerProgress.realityUnlocked(),icon:Ee.GENERIC_GLYPH},ra:{name:"Ra Upgrade - Multiplier based on TT",multValue:()=>Ra.unlocks.continuousTTBoost.effects.eternity.effectOrDefault(1),isActive:()=>Ra.unlocks.continuousTTBoost.isUnlocked,icon:Ee.GENERIC_RA},alchemy:{name:"Alchemy Resource - Eternity",powValue:()=>AlchemyResource.eternity.effectOrDefault(1),isActive:()=>AlchemyResource.eternity.canBeApplied,icon:Ee.ALCHEMY}},Y8={antimatter:{name:"Antimatter Galaxies",displayOverride:()=>{const t=player.galaxies+GalaxyGenerator.galaxies,e=He.globalGalaxyMult();return`${formatInt(t)}, ${formatX(e,2,2)} strength`},multValue:()=>Decimal.pow10(player.galaxies+GalaxyGenerator.galaxies),isActive:!0,icon:Ee.ANTIMATTER},replicanti:{name:"Replicanti Galaxies",displayOverride:()=>{const t=Replicanti.galaxies.total;let e=Replicanti.galaxies.bought;e*=1+Effects.sum(TimeStudy(132),TimeStudy(133)),e+=Replicanti.galaxies.extra,e+=Math.min(Replicanti.galaxies.bought,ReplicantiUpgrade.galaxies.value)*Effects.sum(EternityChallenge(8).reward);const i=e/Math.clampMin(t,1)*He.globalGalaxyMult();return`${formatInt(t)}, ${formatX(i,2,2)} strength`},multValue:()=>{let t=Replicanti.galaxies.bought;return t*=1+Effects.sum(TimeStudy(132),TimeStudy(133)),t+=Replicanti.galaxies.extra,t+=Math.min(Replicanti.galaxies.bought,ReplicantiUpgrade.galaxies.value)*Effects.sum(EternityChallenge(8).reward),Decimal.pow10(t)},isActive:()=>Replicanti.areUnlocked,icon:Ee.SPECIFIC_GLYPH("replication")},tachyon:{name:"Tachyon Galaxies",displayOverride:()=>{const t=player.dilation.totalTachyonGalaxies,e=He.globalGalaxyMult()*(1+Math.max(0,Replicanti.amount.log10()/1e6)*AlchemyResource.alternation.effectValue);return`${formatInt(t)}, ${formatX(e,2,2)} strength`},multValue:()=>{const t=player.dilation.totalTachyonGalaxies,e=1+Math.max(0,Replicanti.amount.log10()/1e6)*AlchemyResource.alternation.effectValue;return Decimal.pow10(t*e)},isActive:()=>player.dilation.totalTachyonGalaxies>0,icon:Ee.SPECIFIC_GLYPH("dilation")},nerfPelle:{name:"Doomed Reality",displayOverride:()=>`All Galaxy strength /${formatInt(2)}`,powValue:.5,isActive:()=>Pelle.isDoomed,icon:Ee.PELLE}},W8={total:{name:"Game speed",displayOverride:()=>{if(Enslaved.isStoringRealTime)return`Set to ${format(0)} (storing real time)`;if(EternityChallenge(12).isRunning)return`${formatX(1)}/${formatInt(1e3)} (fixed)`;const t=getGameSpeedupFactor(),e=He.blackHoleSpeeds(),i=e.current,n=e.average,r=Enslaved.isAutoReleasing?getGameSpeedupForDisplay():t/i*n,s=` (current) | ${formatX(r,2,2)} (average)`;return`${formatX(t,2,2)}${t===r?"":s}`},multValue:()=>getGameSpeedupForDisplay(),isActive:()=>PlayerProgress.seenAlteredSpeed(),dilationEffect:()=>Effarig.isRunning?Effarig.multDilation:1,isDilated:!0,overlay:["Δ",'<i class="fas fa-clock" />','<i class="fas fa-circle" />']},glyph:{name:"Equipped Glyphs",multValue:()=>getAdjustedGlyphEffect("timespeed"),powValue:()=>getAdjustedGlyphEffect("effarigblackhole"),isActive:()=>PlayerProgress.realityUnlocked()&&!EternityChallenge(12).isRunning,icon:Ee.GENERIC_GLYPH},blackHoleCurr:{name:"Current Black Hole Speedup",multValue:()=>He.blackHoleSpeeds().current,isActive:()=>BlackHole(1).isUnlocked&&!BlackHoles.arePaused&&!EternityChallenge(12).isRunning,icon:Ee.BLACK_HOLE},blackHoleAvg:{name:"Average Black Hole Speedup",multValue:()=>He.blackHoleSpeeds().average,isActive:()=>BlackHole(1).isUnlocked&&!BlackHoles.arePaused&&!EternityChallenge(12).isRunning,icon:Ee.BLACK_HOLE},achievementMult:{name:"30 V-Achievement Milestone - Achievement Multiplier",multValue:()=>Math.pow(VUnlocks.achievementBH.effectOrDefault(1),BlackHoles.list.countWhere(t=>t.isUnlocked)),isActive:()=>!BlackHoles.arePaused&&VUnlocks.achievementBH.canBeApplied&&!EternityChallenge(12).isRunning,icon:Ee.ACHIEVEMENT},pulsing:{name:"Auto-Discharging Stored Time",multValue:()=>Enslaved.isAutoReleasing?Math.max(Enslaved.autoReleaseSpeed/getGameSpeedupFactor(),1):getGameSpeedupFactor(),isActive:()=>Enslaved.canRelease()&&Enslaved.isAutoReleasing&&!EternityChallenge(12).isRunning,icon:Ee.BH_PULSE},singularity:{name:"Singularity Milestone - Game speed based on Singularities",multValue:()=>SingularityMilestone.gamespeedFromSingularities.effectOrDefault(1),isActive:()=>SingularityMilestone.gamespeedFromSingularities.canBeApplied&&!EternityChallenge(12).isRunning,icon:Ee.SINGULARITY},pelle:{name:"Pelle Upgrade - Repeatable Game speed",multValue:()=>PelleUpgrade.timeSpeedMult.effectValue.toNumber(),isActive:()=>Pelle.isDoomed&&!EternityChallenge(12).isRunning,icon:Ee.PELLE},ec12:{name:"Eternity Challenge 12",multValue:()=>.001/getGameSpeedupForDisplay(),isActive:()=>EternityChallenge(12).isRunning,icon:Ee.CHALLENGE("eternity")},chargingBH:{name:"Black Hole Charging",multValue:()=>Ra.unlocks.autoPulseTime.canBeApplied?.01:0,isActive:()=>Enslaved.isStoringGameTime,icon:Ee.BLACK_HOLE},invertedBH:{name:"Inverted Black Hole",multValue:()=>player.blackHoleNegative,isActive:()=>BlackHoles.areNegative,icon:Ee.CHALLENGE("eternity")},nerfLaitela:{name:"Lai'tela's Reality",powValue:()=>Math.clampMax(Time.thisRealityRealTime.totalMinutes/10,1),isActive:()=>Laitela.isRunning,icon:Ee.GENERIC_LAITELA}},j8={achievement:{name:(t,e)=>(e==null?void 0:e.length)===2?`Achievement ${t} (${e})`:`Achievement ${t}`,multValue:(t,e)=>{if(t===131)return Achievement(131).canBeApplied?Achievement(131).effects.infinitiesGain.effectOrDefault(1):1;if(t===141)return Achievement(141).canBeApplied?Achievement(141).effects.ipGain.effectOrDefault(1):1;if(t===183)return 1;if(!e)return Achievement(t).canBeApplied?Achievement(t).effectOrDefault(1):1;if((e==null?void 0:e.length)===2){let i=L.D1;for(let n=1;n<=He.activeDimCount(e);n++){let r;t===43?r=Achievement(43).canBeApplied?1+n/100:1:r=He.achievementDimCheck(t,`${e}${n}`)&&Achievement(t).canBeApplied?Achievement(t).effectOrDefault(1):1,i=i.times(r)}return i}return t===43?Achievement(43).canBeApplied?1+Number(e.charAt(2))/100:1:He.achievementDimCheck(t,e)&&Achievement(t).canBeApplied?Achievement(t).effectOrDefault(1):1},powValue:t=>t===183?Achievement(183).effectOrDefault(1):1,isActive:t=>Achievement(t).canBeApplied,icon:t=>{const e=Ee.ACHIEVEMENT;return{color:e.color,symbol:`${e.symbol}${t}`}}},timeStudy:{name:(t,e)=>(e==null?void 0:e.length)===2?`Time Study ${t} (${e})`:`Time Study ${t}`,multValue:(t,e)=>{if(t===132){const i=Perk.studyPassive.isBought?2:1;return TimeStudy(t).canBeApplied?1.5*i:1}if(!e)return TimeStudy(t).canBeApplied?TimeStudy(t).effectOrDefault(1):1;if((e==null?void 0:e.length)===2){let i=L.D1;for(let n=1;n<=He.activeDimCount(e);n++)i=i.times(He.timeStudyDimCheck(t,`${e}${n}`)&&TimeStudy(t).isBought?TimeStudy(t).effectOrDefault(1):1);return i}return He.timeStudyDimCheck(t,e)&&TimeStudy(t).isBought?new Decimal(TimeStudy(t).effectOrDefault(1)):1},isActive:t=>TimeStudy(t).isBought,icon:t=>{const e=Ee.TIME_STUDY;return{color:e.color,symbol:`${e.symbol}${t}`}}},infinityChallenge:{name:t=>`Infinity Challenge ${t}`,displayOverride:t=>t===4?formatPow(InfinityChallenge(4).reward.effectValue,0,3):"",multValue:(t,e)=>{if(t===4){const n=InfinityChallenge(4).reward.effectValue,r=AntimatterDimensions.all.map(s=>s.multiplier.pow((n-1)/n));return(e==null?void 0:e.length)===2?r.reduce((s,a)=>s.times(a),L.D1):r[Number(e.charAt(2))-1]}if((e==null?void 0:e.length)===2){let n=L.D1;for(let r=1;r<=He.activeDimCount(e);r++)n=n.times(He.ICDimCheck(t,`${e}${r}`)&&InfinityChallenge(t).isCompleted?InfinityChallenge(t).reward.effectOrDefault(1):1);return n}const i=Number(e.charAt(2));return t===8?i>1&&i<8?InfinityChallenge(t).reward.effectValue:L.D1:InfinityChallenge(t).reward.effectValue},isActive:t=>InfinityChallenge(t).isCompleted,icon:t=>{const e=Ee.CHALLENGE("infinity");return{color:e.color,symbol:`${e.symbol}${t}`}}},eternityChallenge:{name:t=>`Eternity Challenge ${t}`,multValue:(t,e)=>{if((e==null?void 0:e.length)===2){let i=L.D1;for(let n=1;n<=He.activeDimCount(e);n++)i=i.times(He.ECDimCheck(t,`${e}${n}`)&&EternityChallenge(t).reward.canBeApplied?EternityChallenge(t).reward.effectOrDefault(1).clampMin(1):1);return i}return t===2?e==="ID1"?EternityChallenge(t).reward.effectValue:L.D1:EternityChallenge(t).reward.effectOrDefault(1)},isActive:t=>EternityChallenge(t).reward.canBeApplied,icon:t=>{const e=Ee.CHALLENGE("eternity");return{color:e.color,symbol:`${e.symbol}${t}`}}}},z8={total:{name:t=>t?`ID ${t} Multiplier`:EternityChallenge(7).isRunning?"AD7 Production":"Infinity Power Production",displayOverride:t=>t?formatX(InfinityDimension(t).multiplier,2):`${format(InfinityDimension(1).productionPerSecond,2)}/sec`,multValue:t=>t?InfinityDimension(t).multiplier:InfinityDimensions.all.filter(e=>e.isProducing).map(e=>e.multiplier).reduce((e,i)=>e.times(i),L.D1),isActive:t=>t?InfinityDimension(t).isProducing:on.eternityUnlocked()||InfinityDimension(1).isProducing,dilationEffect:()=>(player.dilation.active?.75*Effects.product(DilationUpgrade.dilationPenalty):1)*(Effarig.isRunning?Effarig.multDilation:1),isDilated:!0,overlay:["∞","<i class='fa-solid fa-cube' />"],icon:t=>Ee.DIMENSION("ID",t)},purchase:{name:t=>t?`Purchased ID ${t}`:"Purchases",multValue:t=>{const e=i=>Decimal.pow(InfinityDimension(i).powerMultiplier,Math.floor(InfinityDimension(i).baseAmount/10));return t?e(t):InfinityDimensions.all.filter(i=>i.isProducing).map(i=>e(i.tier)).reduce((i,n)=>i.times(n),L.D1)},isActive:()=>!EternityChallenge(2).isRunning&&!EternityChallenge(10).isRunning,icon:t=>Ee.PURCHASE("ID",t)},highestDim:{name:()=>"Amount of highest Dimension",displayOverride:()=>{const t=He.activeDimCount("ID");return`ID ${t}, ${format(InfinityDimension(t).amount,2)}`},multValue:()=>InfinityDimension(He.activeDimCount("ID")).amount,isActive:()=>InfinityDimension(1).isProducing,icon:Ee.DIMENSION("ID")},basePurchase:{name:"Base purchases",multValue:t=>{const e=i=>{const n=i===8?Math.floor(InfinityDimension(i).baseAmount/10):Math.min(InfinityDimensions.HARDCAP_PURCHASES,Math.floor(InfinityDimension(i).baseAmount/10)),r=InfinityDimension(i)._powerMultiplier;return Decimal.pow(r,n)};return t?e(t):InfinityDimensions.all.filter(i=>i.isProducing).map(i=>e(i.tier)).reduce((i,n)=>i.times(n),L.D1)},isActive:!0,icon:Ee.PURCHASE("baseID")},tesseractPurchase:{name:"Tesseracts",multValue:t=>{const e=i=>{if(i===8)return L.D1;const n=Math.floor(InfinityDimension(i).baseAmount/10);return Decimal.pow(InfinityDimension(i)._powerMultiplier,Math.clampMin(n-InfinityDimensions.HARDCAP_PURCHASES,0))};return t?e(t):InfinityDimensions.all.filter(i=>i.isProducing).map(i=>e(i.tier)).reduce((i,n)=>i.times(n),L.D1)},isActive:()=>Tesseracts.bought>0,icon:Ee.PURCHASE("tesseractID")},infinityGlyphSacrifice:{name:"Infinity Glyph sacrifice",multValue:()=>InfinityDimension(8).isProducing?Decimal.pow(GlyphSacrifice.infinity.effectValue,Math.floor(InfinityDimension(8).baseAmount/10)):L.D1,isActive:()=>GlyphSacrifice.infinity.effectValue>1,icon:Ee.SACRIFICE("infinity")},powPurchase:{name:"Imaginary Upgrade - Recollection of Intrusion",powValue:()=>ImaginaryUpgrade(14).effectOrDefault(1),isActive:()=>ImaginaryUpgrade(14).canBeApplied,icon:Ee.UPGRADE("imaginary")},replicanti:{name:"Replicanti Multiplier",multValue:t=>Decimal.pow(replicantiMult(),t?1:He.activeDimCount("ID")),isActive:()=>Replicanti.areUnlocked,icon:Ee.SPECIFIC_GLYPH("replication")},achievementMult:{name:"Achievement Multiplier",multValue:t=>Decimal.pow(Achievements.power,t?1:He.activeDimCount("ID")),isActive:()=>Achievement(75).canBeApplied&&!Pelle.isDoomed,icon:Ee.ACHIEVEMENT},achievement:{name:()=>"Achievement 94",multValue:t=>(t??1)===1?Achievement(94).effectOrDefault(1):1,isActive:()=>Achievement(94).canBeApplied,icon:Ee.ACHIEVEMENT},timeStudy:{name:t=>t?`Time Studies (ID ${t})`:"Time Studies",multValue:t=>{const e=L.D1.timesEffectsOf(TimeStudy(82),TimeStudy(92),TimeStudy(162));if(t)return t===4?e.times(TimeStudy(72).effectOrDefault(1)):e;const i=He.activeDimCount("ID");return Decimal.pow(e,i).times(i>=4?TimeStudy(72).effectOrDefault(1):L.D1)},isActive:()=>on.eternityUnlocked(),icon:Ee.TIME_STUDY},eternityUpgrade:{name:"Eternity Upgrades",multValue:t=>{const e=L.D1.timesEffectsOf(EternityUpgrade.idMultEP,EternityUpgrade.idMultEternities,EternityUpgrade.idMultICRecords);return Decimal.pow(e,t?1:He.activeDimCount("ID"))},isActive:()=>on.eternityUnlocked(),icon:Ee.UPGRADE("eternity")},eu1:{name:()=>"Unspent Eternity Points",multValue:t=>Decimal.pow(EternityUpgrade.idMultEP.effectOrDefault(1),t?1:He.activeDimCount("ID")),isActive:()=>EternityUpgrade.idMultEP.canBeApplied,icon:Ee.UPGRADE("eternity")},eu2:{name:()=>"Eternity Count",multValue:t=>Decimal.pow(EternityUpgrade.idMultEternities.effectOrDefault(1),t?1:He.activeDimCount("ID")),isActive:()=>EternityUpgrade.idMultEternities.canBeApplied,icon:Ee.UPGRADE("eternity")},eu3:{name:()=>"Infinity Challenge Records",multValue:t=>Decimal.pow(EternityUpgrade.idMultICRecords.effectOrDefault(1),t?1:He.activeDimCount("ID")),isActive:()=>EternityUpgrade.idMultICRecords.canBeApplied,icon:Ee.UPGRADE("eternity")},infinityChallenge:{name:"Infinity Challenges",multValue:t=>{const e=L.D1.timesEffectsOf(InfinityChallenge(1).reward,InfinityChallenge(6).reward);return Decimal.pow(e,t?1:He.activeDimCount("ID"))},isActive:()=>InfinityChallenge(1).isCompleted,icon:Ee.CHALLENGE("infinity")},eternityChallenge:{name:t=>t?`Eternity Challenges (ID ${t})`:" Eternity Challenges",multValue:t=>{const e=L.D1.timesEffectsOf(EternityChallenge(4).reward,EternityChallenge(9).reward).times(EternityChallenge(7).isRunning?Tickspeed.perSecond:L.D1);if(t)return t===1?e.times(EternityChallenge(2).reward.effectOrDefault(1)):e;const i=He.activeDimCount("ID");return Decimal.pow(e,i).times(i>=1?EternityChallenge(2).reward.effectOrDefault(1):L.D1)},isActive:()=>EternityChallenge(2).completions>0,icon:Ee.CHALLENGE("eternity")},tickspeed:{name:()=>"Tickspeed (EC7)",displayOverride:()=>{const t=Tickspeed.perSecond,e=He.activeDimCount("ID"),i=He.pluralizeDimensions(e);return`${format(t,2,2)}/sec on ${formatInt(e)} ${i}
        ➜ ${formatX(t.pow(e),2,2)}`},multValue:()=>Tickspeed.perSecond.pow(8),isActive:()=>EternityChallenge(7).isRunning,icon:Ee.TICKSPEED},glyph:{name:"Glyph Effects",multValue:()=>1,powValue:()=>getAdjustedGlyphEffect("infinitypow")*getAdjustedGlyphEffect("effarigdimensions"),isActive:()=>on.realityUnlocked(),icon:Ee.GENERIC_GLYPH},alchemy:{name:"Glyph Alchemy",multValue:t=>Decimal.pow(AlchemyResource.dimensionality.effectOrDefault(1),t?1:He.activeDimCount("ID")),powValue:()=>AlchemyResource.infinity.effectOrDefault(1)*Ra.momentumValue,isActive:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied,icon:Ee.ALCHEMY},imaginaryUpgrade:{name:"Imaginary Upgrade - Hyperbolic Apeirogon",multValue:t=>Decimal.pow(ImaginaryUpgrade(8).effectOrDefault(1),t?1:He.activeDimCount("ID")),isActive:()=>ImaginaryUpgrade(8).canBeApplied,icon:Ee.UPGRADE("imaginary")},pelle:{name:"Pelle Rift Effects",multValue:t=>{const e=L.D1.timesEffectsOf(PelleRifts.recursion.milestones[1]),i=He.activeDimCount("ID"),n=(t?t===1:i>=1)?PelleRifts.decay.milestones[0].effectOrDefault(1):L.D1;return Decimal.pow(e,t?1:i).times(n)},powValue:()=>PelleRifts.paradox.effectOrDefault(L.D1).toNumber(),isActive:()=>Pelle.isDoomed,icon:Ee.PELLE},iap:{name:"Shop Tab Purchases",multValue:t=>Decimal.pow(ShopPurchase.allDimPurchases.currentMult,t?1:He.activeDimCount("ID")),isActive:()=>ShopPurchaseData.totalSTD>0,icon:Ee.IAP},powerConversion:{name:"Infinity Power Conversion",powValue:()=>InfinityDimensions.powerConversionRate,isActive:()=>Currency.infinityPower.value.gt(1)&&!EternityChallenge(9).isRunning,icon:Ee.IPOW_CONVERSION},nerfV:{name:"V's Reality",powValue:()=>.5,isActive:()=>V.isRunning,icon:Ee.GENERIC_V},nerfCursed:{name:"Cursed Glyphs",powValue:()=>getAdjustedGlyphEffect("curseddimensions"),isActive:()=>getAdjustedGlyphEffect("curseddimensions")!==1,icon:Ee.SPECIFIC_GLYPH("cursed")},nerfPelle:{name:"Doomed Reality",powValue:.5,isActive:()=>PelleStrikes.powerGalaxies.hasStrike,icon:Ee.PELLE}},X8={total:{name:"Infinities gained per Crunch",isBase:!0,multValue:()=>gainedInfinities(),isActive:()=>(Achievement(87).isUnlocked||PlayerProgress.eternityUnlocked())&&!EternityChallenge(4).isRunning&&!Pelle.isDoomed,overlay:["∞","<i class='fa-solid fa-arrows-rotate' />"]},achievement:{name:"Achievements",multValue:()=>L.D1.timesEffectsOf(Achievement(87),Achievement(131).effects.infinitiesGain,Achievement(164)),isActive:()=>Achievement(87).isUnlocked,icon:Ee.ACHIEVEMENT},timeStudy:{name:"Time Study 32",multValue:()=>TimeStudy(32).effectOrDefault(1),isActive:()=>TimeStudy(32).isBought,icon:Ee.TIME_STUDY},amplifierInf:{name:"Reality Upgrade - Boundless Amplifier",multValue:()=>L.D1.timesEffectsOf(RealityUpgrade(5)),isActive:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},realityUpgrades:{name:"Reality Upgrade - Innumerably Construct",multValue:()=>L.D1.timesEffectsOf(RealityUpgrade(7)),isActive:()=>PlayerProgress.realityUnlocked(),icon:Ee.UPGRADE("reality")},glyph:{name:"Equipped Glyphs",multValue:()=>getAdjustedGlyphEffect("infinityinfmult"),isActive:()=>PlayerProgress.realityUnlocked(),icon:Ee.GENERIC_GLYPH},ra:{name:"Ra Upgrade - Multiplier based on TT",multValue:()=>Ra.unlocks.continuousTTBoost.effects.infinity.effectOrDefault(1),isActive:()=>Ra.unlocks.continuousTTBoost.isUnlocked,icon:Ee.GENERIC_RA},singularity:{name:"Singularity Milestone - Power from Singularities",powValue:()=>SingularityMilestone.infinitiedPow.effectOrDefault(1),isActive:()=>SingularityMilestone.infinitiedPow.canBeApplied,icon:Ee.SINGULARITY}},K8={total:{name:"Total IP Gained on Infinity",displayOverride:()=>Player.canCrunch?format(gainedInfinityPoints(),2,2):"Cannot Crunch",multValue:()=>Player.canCrunch?gainedInfinityPoints():1,isActive:()=>on.infinityUnlocked()||Player.canCrunch,dilationEffect:()=>Laitela.isRunning?.75*Effects.product(DilationUpgrade.dilationPenalty):1,isDilated:!0,overlay:["∞","<i class='fa-solid fa-layer-group' />"]},base:{name:"Base Infinity Points",isBase:!0,fakeValue:L.D5,multValue:()=>{const t=Effects.min(308,Achievement(103),TimeStudy(111));return Decimal.pow10(player.records.thisInfinity.maxAM.log10()/t-.75)},isActive:()=>player.break,icon:Ee.CONVERT_FROM("AM")},antimatter:{name:"Infinity Points from Antimatter",displayOverride:()=>`${format(player.records.thisInfinity.maxAM,2,2)} AM`,multValue:L.D5,isActive:()=>player.break,icon:Ee.ANTIMATTER},divisor:{name:"Formula Improvement",displayOverride:()=>{const t=Effects.min(308,Achievement(103),TimeStudy(111));return`log(AM)/${formatInt(308)} ➜ log(AM)/${format(t,2,1)}`},powValue:()=>308/Effects.min(308,Achievement(103),TimeStudy(111)),isActive:()=>Achievement(103).canBeApplied||TimeStudy(111).isBought,icon:Ee.DIVISOR("IP")},infinityUpgrade:{name:()=>`Infinity Upgrade - Repeatable ${formatX(2)} IP`,multValue:()=>InfinityUpgrade.ipMult.effectOrDefault(1),isActive:()=>player.break&&!Pelle.isDoomed,icon:Ee.UPGRADE("infinity")},achievement:{name:"Achievements",multValue:()=>L.D1.timesEffectsOf(Achievement(85),Achievement(93),Achievement(116),Achievement(125),Achievement(141).effects.ipGain),isActive:()=>player.break&&!Pelle.isDoomed,icon:Ee.ACHIEVEMENT},timeStudy:{name:"Time Studies",multValue:()=>L.D1.timesEffectsOf(TimeStudy(41),TimeStudy(51),TimeStudy(141),TimeStudy(142),TimeStudy(143)),isActive:()=>player.break&&!Pelle.isDoomed,icon:Ee.TIME_STUDY},dilationUpgrade:{name:"Dilation Upgrade - IP multiplier based on DT",multValue:()=>DilationUpgrade.ipMultDT.effectOrDefault(1),isActive:()=>DilationUpgrade.ipMultDT.canBeApplied,icon:Ee.UPGRADE("dilation")},glyph:{name:"Equipped Glyphs",multValue:()=>Pelle.specialGlyphEffect.infinity.times(Pelle.isDoomed?1:getAdjustedGlyphEffect("infinityIP")),powValue:()=>GlyphAlteration.isAdded("infinity")?getSecondaryGlyphEffect("infinityIP"):1,isActive:()=>on.realityUnlocked(),icon:Ee.GENERIC_GLYPH},alchemy:{name:"Glyph Alchemy",multValue:()=>Replicanti.amount.powEffectOf(AlchemyResource.exponential),isActive:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied,icon:Ee.ALCHEMY},pelle:{name:"Pelle Strike - Vacuum Rift",multValue:()=>L.D1.timesEffectsOf(PelleRifts.vacuum),isActive:()=>Pelle.isDoomed,icon:Ee.PELLE},iap:{name:"Shop Tab Purchases",multValue:()=>ShopPurchase.IPPurchases.currentMult,isActive:()=>ShopPurchaseData.totalSTD>0,icon:Ee.IAP},nerfTeresa:{name:"Teresa's Reality",powValue:()=>.55,isActive:()=>Teresa.isRunning,icon:Ee.GENERIC_TERESA},nerfV:{name:"V's Reality",powValue:()=>.5,isActive:()=>V.isRunning,icon:Ee.GENERIC_V}},Z8={total:{name:"Replicanti Speed",multValue:()=>totalReplicantiSpeedMult(Replicanti.amount.gt(replicantiCap())),isActive:()=>PlayerProgress.eternityUnlocked(),overlay:["Ξ"]},achievement:{name:"Achievement 134",multValue:2,isActive:()=>Achievement(134).canBeApplied&&Replicanti.amount.lte(replicantiCap())&&!Pelle.isDoomed,icon:Ee.ACHIEVEMENT},timeStudy:{name:"Time Studies",multValue:()=>Effects.product(TimeStudy(62),TimeStudy(213))*(TimeStudy(132).isBought?1.5:1)*(Perk.studyPassive.isBought&&TimeStudy(132).isBought?2:1),isActive:()=>PlayerProgress.eternityUnlocked()&&!Pelle.isDoomed,icon:Ee.TIME_STUDY},glyph:{name:"Glyph Effects",multValue:()=>{const t=(Pelle.isDoomed?L.D1:getAdjustedGlyphEffect("replicationspeed")).times(Pelle.specialGlyphEffect.replication),e=Math.clampMin(Decimal.log10(Replicanti.amount)*getSecondaryGlyphEffect("replicationdtgain"),1);return GlyphAlteration.isAdded("replication")?t.times(e):t},isActive:()=>PlayerProgress.realityUnlocked()&&(!Pelle.isDoomed||Pelle.specialGlyphEffect.replication>1),icon:Ee.GENERIC_GLYPH},amplifierRep:{name:"Reality Upgrade - Replicative Amplifier",multValue:()=>RealityUpgrade(2).effectOrDefault(1),isActive:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},realityUpgrade1:{name:"Reality Upgrade - Cosmically Duplicate",multValue:()=>RealityUpgrade(6).effectOrDefault(1),isActive:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},realityUpgrade2:{name:"Reality Upgrade - Replicative Rapidity",multValue:()=>RealityUpgrade(23).effectOrDefault(1),isActive:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},alchemy:{name:"Alchemy Resource - Replication",multValue:()=>AlchemyResource.replication.effectOrDefault(1),isActive:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied&&!Pelle.isDoomed,icon:Ee.ALCHEMY},ra:{name:"Ra Upgrade - Multiplier based on TT",multValue:()=>Ra.unlocks.continuousTTBoost.effects.replicanti.effectOrDefault(1),isActive:()=>Ra.unlocks.continuousTTBoost.isUnlocked,icon:Ee.GENERIC_RA},pelle:{name:"Pelle Strike - Decay Rift",multValue:()=>PelleRifts.decay.effectValue,isActive:()=>Pelle.isDoomed&&PelleRifts.decay.effectValue.gt(1),icon:Ee.PELLE},iap:{name:"Shop Tab Purchases",multValue:()=>ShopPurchase.replicantiPurchases.currentMult,isActive:()=>ShopPurchaseData.totalSTD>0&&ShopPurchase.replicantiPurchases.currentMult>1,icon:Ee.IAP}},Q8={total:{name:t=>t?`TD ${t} Multiplier`:EternityChallenge(7).isRunning?"ID8 Production":"Time Shard Production",displayOverride:t=>t?formatX(TimeDimension(t).multiplier,2):`${format(TimeDimension(1).productionPerSecond,2)}/sec`,multValue:t=>t?TimeDimension(t).multiplier:TimeDimensions.all.filter(e=>e.isProducing).map(e=>e.multiplier).reduce((e,i)=>e.times(i),L.D1),isActive:t=>t?TimeDimension(t).isProducing:on.realityUnlocked()||TimeDimension(1).isProducing,dilationEffect:()=>(player.dilation.active?.75*Effects.product(DilationUpgrade.dilationPenalty):1)*(Effarig.isRunning?Effarig.multDilation:1),isDilated:!0,overlay:["Δ","<i class='fa-solid fa-cube' />"],icon:t=>Ee.DIMENSION("TD",t)},purchase:{name:t=>t?`Purchased TD ${t}`:"Purchases",multValue:t=>{const e=i=>{const n=TimeDimension(i),r=i===8?Math.clampMax(n.bought,1e8):n.bought;return Decimal.pow(n.powerMultiplier,r)};return t?e(t):TimeDimensions.all.filter(i=>i.isProducing).map(i=>e(i.tier)).reduce((i,n)=>i.times(n),L.D1)},isActive:()=>!EternityChallenge(2).isRunning&&!EternityChallenge(10).isRunning,icon:t=>Ee.PURCHASE("TD",t)},highestDim:{name:()=>"Amount of highest Dimension",displayOverride:()=>{const t=He.activeDimCount("TD");return`TD ${t}, ${formatInt(TimeDimension(t).amount)}`},multValue:()=>TimeDimension(He.activeDimCount("TD")).amount,isActive:()=>TimeDimension(1).isProducing,icon:Ee.DIMENSION("TD")},basePurchase:{name:"Base purchases",multValue:t=>{const e=i=>Decimal.pow(4,i===8?Math.clampMax(TimeDimension(i).bought,1e8):TimeDimension(i).bought);return t?e(t):TimeDimensions.all.filter(i=>i.isProducing).map(i=>e(i.tier)).reduce((i,n)=>i.times(n),L.D1)},isActive:t=>t?ImaginaryUpgrade(14).canBeApplied||t===8&&GlyphSacrifice.time.effectValue>1:TimeDimension(1).isProducing,icon:t=>Ee.PURCHASE("TD",t)},timeGlyphSacrifice:{name:"Time Glyph Sacrifice",multValue:()=>TimeDimension(8).isProducing?Decimal.pow(GlyphSacrifice.time.effectValue,Math.clampMax(TimeDimension(8).bought,1e8)):L.D1,isActive:()=>GlyphSacrifice.time.effectValue>1,icon:Ee.SACRIFICE("time")},powPurchase:{name:"Imaginary Upgrade - Recollection of Intrusion",powValue:()=>ImaginaryUpgrade(14).effectOrDefault(1),isActive:()=>ImaginaryUpgrade(14).canBeApplied,icon:Ee.UPGRADE("imaginary")},achievementMult:{name:"Eternity Upgrade - Achievement Multiplier",multValue:t=>Decimal.pow(EternityUpgrade.tdMultAchs.effectOrDefault(1),t?1:He.activeDimCount("TD")),isActive:()=>EternityUpgrade.tdMultAchs.canBeApplied&&!Pelle.isDoomed,icon:Ee.ACHIEVEMENT},achievement:{name:"Achievement Rewards",multValue:t=>{const e=L.D1.timesEffectsOf(Achievement(105),Achievement(128));return Decimal.pow(e,t?1:He.activeDimCount("TD"))},isActive:()=>Achievement(105).canBeApplied||Achievement(128).canBeApplied,icon:Ee.ACHIEVEMENT},timeStudy:{name:t=>t?`Time Studies (TD ${t})`:"Time Studies",multValue:t=>{const e=L.D1.timesEffectsOf(TimeStudy(93),TimeStudy(103),TimeStudy(151),TimeStudy(221),TimeStudy(301)),i=Array.repeat(L.D1,9);for(let r=1;r<=8;r++)i[r]=i[r].timesEffectsOf(r===1?TimeStudy(11):null,r===3?TimeStudy(73):null,r===4?TimeStudy(227):null);if(t)return e.times(i[t]);let n=L.D1;for(let r=1;r<=He.activeDimCount("TD");r++)n=n.times(i[r]).times(e);return n},isActive:()=>TimeDimension(1).isProducing,icon:Ee.TIME_STUDY},eternityUpgrade:{name:t=>t?`Other Eternity Upgrades (TD ${t})`:"Other Eternity Upgrades",multValue:t=>{const e=L.D1.timesEffectsOf(EternityUpgrade.tdMultTheorems,EternityUpgrade.tdMultRealTime);return Decimal.pow(e,t?1:He.activeDimCount("TD"))},isActive:()=>TimeDimension(1).isProducing,icon:Ee.UPGRADE("eternity")},eu1:{name:()=>"Unspent Time Theorems",multValue:t=>Decimal.pow(EternityUpgrade.tdMultTheorems.effectOrDefault(1),t?1:He.activeDimCount("TD")),isActive:()=>EternityUpgrade.tdMultTheorems.canBeApplied,icon:Ee.UPGRADE("eternity")},eu2:{name:()=>"Days played",multValue:t=>Decimal.pow(EternityUpgrade.tdMultRealTime.effectOrDefault(1),t?1:He.activeDimCount("TD")),isActive:()=>EternityUpgrade.tdMultRealTime.canBeApplied,icon:Ee.UPGRADE("eternity")},eternityChallenge:{name:t=>t?`Eternity Challenges (TD ${t})`:"Eternity Challenges",multValue:t=>{let e=L.D1.timesEffectsOf(EternityChallenge(1).reward,EternityChallenge(10).reward).times(EternityChallenge(7).isRunning?Tickspeed.perSecond:L.D1);return EternityChallenge(9).isRunning&&(e=e.times(Decimal.pow(Math.clampMin(Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate/7).log2(),1),4).clampMin(1))),Decimal.pow(e,t?1:He.activeDimCount("TD"))},isActive:()=>EternityChallenge(1).completions>0,icon:Ee.CHALLENGE("eternity")},tickspeed:{name:()=>"Tickspeed (EC7)",displayOverride:()=>{const t=Tickspeed.perSecond,e=He.activeDimCount("TD"),i=He.pluralizeDimensions(e);return`${format(t,2,2)}/sec on ${formatInt(e)} ${i}
        ➜ ${formatX(t.pow(e),2,2)}`},multValue:()=>Tickspeed.perSecond.pow(He.activeDimCount("TD")),isActive:()=>EternityChallenge(7).isRunning,icon:Ee.TICKSPEED},dilationUpgrade:{name:"Dilation Upgrade - Replicanti Multiplier",multValue:t=>{const e=Replicanti.areUnlocked&&Replicanti.amount.gt(1)?DilationUpgrade.tdMultReplicanti.effectValue:L.D1;return Decimal.pow(e,t?1:He.activeDimCount("TD"))},isActive:()=>DilationUpgrade.tdMultReplicanti.canBeApplied,icon:Ee.UPGRADE("dilation")},realityUpgrade:{name:"Reality Upgrade - Temporal Transcendence",multValue:t=>Decimal.pow(RealityUpgrade(22).effectOrDefault(1),t?1:He.activeDimCount("TD")),isActive:()=>!Pelle.isDoomed&&RealityUpgrade(22).canBeApplied,icon:Ee.UPGRADE("reality")},glyph:{name:"Glyph Effects",powValue:()=>getAdjustedGlyphEffect("timepow")*getAdjustedGlyphEffect("effarigdimensions"),isActive:()=>on.realityUnlocked(),icon:Ee.GENERIC_GLYPH},alchemy:{name:"Glyph Alchemy",multValue:t=>Decimal.pow(AlchemyResource.dimensionality.effectOrDefault(1),t?1:He.activeDimCount("TD")),powValue:()=>AlchemyResource.time.effectOrDefault(1)*Ra.momentumValue,isActive:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied,icon:Ee.ALCHEMY},imaginaryUpgrade:{name:"Imaginary Upgrade - Suspicion of Interference",powValue:()=>ImaginaryUpgrade(11).effectOrDefault(1),isActive:()=>ImaginaryUpgrade(11).canBeApplied,icon:Ee.UPGRADE("imaginary")},pelle:{name:"Pelle Rift Effects",multValue:t=>Decimal.pow(PelleRifts.chaos.effectOrDefault(1),t?1:He.activeDimCount("TD")),powValue:()=>PelleRifts.paradox.effectOrDefault(L.D1).toNumber(),isActive:()=>Pelle.isDoomed,icon:Ee.PELLE},iap:{name:"Shop Tab Purchases",multValue:t=>Decimal.pow(ShopPurchase.allDimPurchases.currentMult,t?1:He.activeDimCount("TD")),isActive:()=>ShopPurchaseData.totalSTD>0,icon:Ee.IAP},nerfV:{name:"V's Reality",powValue:()=>.5,isActive:()=>V.isRunning,icon:Ee.GENERIC_V},nerfCursed:{name:"Cursed Glyphs",powValue:()=>getAdjustedGlyphEffect("curseddimensions"),isActive:()=>getAdjustedGlyphEffect("curseddimensions")!==1,icon:Ee.SPECIFIC_GLYPH("cursed")}},J8={total:{name:"Total Tachyon Particles",displayOverride:()=>{const t=format(new Decimal(Currency.tachyonParticles.value),2,2);return PelleRifts.paradox.milestones[1].canBeApplied?`${t}${formatPow(PelleRifts.paradox.milestones[1].effectValue,1,1)}`:t},multValue:()=>{const t=new Decimal(Currency.tachyonParticles.value).pow(PelleRifts.paradox.milestones[1].effectOrDefault(1));return TimeStudy.dilation.isBought?t:1},isActive:()=>on.realityUnlocked()||on.dilationUnlocked(),icon:Ee.TACHYON_PARTICLES},base:{name:"Base Tachyon Particle Count",isBase:!0,multValue:()=>new Decimal(Currency.tachyonParticles.value).div(tachyonGainMultiplier()),isActive:()=>new Decimal(Currency.tachyonParticles.value).gt(0),icon:Ee.TACHYON_PARTICLES},achievementMult:{name:"Achievement Multiplier",multValue:()=>RealityUpgrade(8).effectOrDefault(1),isActive:()=>RealityUpgrade(8).canBeApplied&&!Pelle.isDoomed,icon:Ee.ACHIEVEMENT},achievement:{name:"Achievement 132",multValue:()=>Achievement(132).effectOrDefault(1),isActive:()=>Achievement(132).canBeApplied,icon:Ee.ACHIEVEMENT},dilation:{name:()=>`Dilation Upgrade - Repeatable ${formatX(3)} TP`,multValue:()=>DilationUpgrade.tachyonGain.effectOrDefault(1),isActive:()=>DilationUpgrade.tachyonGain.canBeApplied,icon:Ee.UPGRADE("dilation")},amplifierTP:{name:"Reality Upgrade - Superluminal Amplifier",multValue:()=>L.D1.timesEffectsOf(RealityUpgrade(4)),isActive:()=>on.realityUnlocked()&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},realityUpgrade:{name:"Reality Upgrade - The Paradoxical Forever",multValue:()=>L.D1.timesEffectsOf(RealityUpgrade(15)),isActive:()=>on.realityUnlocked()&&!Pelle.isDoomed,icon:Ee.UPGRADE("reality")},dilationGlyphSacrifice:{name:"Dilation Glyph Sacrifice",multValue:()=>GlyphSacrifice.dilation.effectValue,isActive:()=>GlyphSacrifice.dilation.effectValue>1,icon:Ee.SACRIFICE("dilation")},nerfEnslaved:{name:"The Nameless Ones' Reality",powValue:()=>Enslaved.tachyonNerf,isActive:()=>Enslaved.isRunning,icon:Ee.GENERIC_ENSLAVED}},_G={general:j8,AM:$8,AD:F8,ID:z8,TD:Q8,IP:K8,EP:V8,TP:J8,DT:H8,tickspeed:L8,tickspeedUpgrades:B8,galaxies:Y8,infinities:X8,eternities:q8,gamespeed:W8,replicanti:Z8},e9=["TP","DT","infinities","eternities","gamespeed","replicanti"],GC={AD:["purchase","dimboost","sacrifice","achievementMult","achievement","infinityUpgrade","breakInfinityUpgrade","infinityPower","infinityChallenge","timeStudy","eternityChallenge","glyph","v","alchemy","pelle","iap","effectNC","nerfIC","nerfV","nerfCursed","nerfPelle"],ID:["purchase","achievementMult","achievement","replicanti","infinityChallenge","timeStudy","eternityUpgrade","eternityChallenge","glyph","alchemy","imaginaryUpgrade","pelle","iap","nerfV","nerfCursed","nerfPelle"],TD:["purchase","achievementMult","achievement","timeStudy","eternityUpgrade","eternityChallenge","dilationUpgrade","realityUpgrade","glyph","alchemy","imaginaryUpgrade","pelle","iap","nerfV","nerfCursed"],IP:["base","infinityUpgrade","achievement","timeStudy","dilationUpgrade","glyph","alchemy","pelle","iap","nerfTeresa","nerfV"],EP:["base","eternityUpgrade","timeStudy","glyph","realityUpgrade","pelle","iap","nerfTeresa","nerfV"]};for(const t of e9){GC[t]=[];for(const e of Object.keys(_G[t]))e!=="total"&&GC[t].push(e)}function d0(t){const e=[];for(let i=1;i<=8;i++)e.push(`${t}_${i}`);return e}function Wa(t,e){const i=GC[t].map(r=>`${t}_${r}`);if(!e)return i;const n=[];for(const r of i)n.push(`${r}_${e}`);return n}const Mi={AM_total:[["AD_total","tickspeed_total","AM_effarigAM"]],AD_total:[Wa("AD"),d0("AD_total")],ID_total:[Wa("ID"),d0("ID_total")],TD_total:[Wa("TD"),d0("TD_total")],IP_total:[Wa("IP")],IP_base:[["IP_antimatter","IP_divisor"]],EP_total:[Wa("EP")],EP_base:[["EP_IP","EP_divisor"]],TP_total:[Wa("TP")],DT_total:[Wa("DT")],tickspeed_total:[["tickspeed_base","tickspeed_upgrades","tickspeed_galaxies","tickspeed_pelleTickspeedPow"]],tickspeed_upgrades:[["tickspeedUpgrades_purchased","tickspeedUpgrades_free"]],tickspeed_galaxies:[["galaxies_antimatter","galaxies_replicanti","galaxies_tachyon","galaxies_nerfPelle"]],infinities_total:[Wa("infinities")],eternities_total:[Wa("eternities")],gamespeed_total:[Wa("gamespeed")],replicanti_total:[Wa("replicanti")]},EG=Mi.gamespeed_total[0];Mi.gamespeed_total[0]=[...EG].filter(t=>t!=="gamespeed_blackHoleAvg");Mi.gamespeed_total[1]=[...EG].filter(t=>t!=="gamespeed_blackHoleCurr");Mi.DT_total[0].unshift("TP_total");const Uk=["AD","ID","TD"],t9=["IP","EP","DT","infinities","replicanti"],$h={achievement:{checkFn:He.achievementDimCheck,AD:[23,28,31,34,43,48,56,64,65,68,71,72,73,74,76,84,91,92,183],TD:[105,128],IP:[85,93,116,125,141],DT:[132,137],infinities:[87,131,164]},timeStudy:{checkFn:He.timeStudyDimCheck,AD:[71,91,101,161,193,214,234],ID:[72,82,92,102,162],TD:[11,73,93,103,151,221,227,301],IP:[41,51,141,142,143],EP:[61,121,122,123],replicanti:[62,132,213]},infinityChallenge:{checkFn:He.ICDimCheck,AD:[3,4,8],ID:[1,6]},eternityChallenge:{checkFn:He.ECDimCheck,ID:[2,4,9],TD:[1,10]}};for(const t of Uk)Mi[`${t}_total`][0].push(`${t}_highestDim`),Mi[`${t}_total`][1].push(`${t}_highestDim`);for(const t of["ID","TD"])Mi[`${t}_total`][0].push(`${t}_tickspeed`),Mi[`${t}_total`][1].push(`${t}_tickspeed`);for(const t of Uk){for(const e of Wa(t))Mi[e]=[d0(e)];for(let e=1;e<=8;e++)Mi[`${t}_total_${e}`]=[Wa(t,e)]}const i9=["AD_sacrifice","AD_breakInfinityUpgrade","AD_nerfIC","AD_infinityUpgrade","AD_v","ID_replicanti","ID_infinityChallenge","ID_eternityUpgrades","TD_achievement","TD_eternityUpgrade","TD_dilationUpgrade","TD_realityUpgrade",".._achievementMult",".._glyph",".._alchemy",".._imaginaryUpgrade",".._iap",".._nerfV",".._nerfCursed",".._nerfPelle",".._pelle"],n9=Object.keys(Mi).filter(t=>i9.some(e=>t.match(e)));for(const t of n9)Mi[t]=void 0;Mi.AD_infinityPower=[["ID_total","ID_powerConversion"]];for(let t=1;t<=8;t++)Mi[`AD_infinityPower_${t}`]=[["ID_total","ID_powerConversion"]];Mi.ID_purchase.unshift(["ID_basePurchase","ID_tesseractPurchase","ID_infinityGlyphSacrifice","ID_powPurchase"]);for(let t=1;t<=7;t++)Mi[`ID_purchase_${t}`]=[[`ID_basePurchase_${t}`,`ID_tesseractPurchase_${t}`,"ID_powPurchase"]];Mi.ID_purchase_8=[["ID_basePurchase_8","ID_infinityGlyphSacrifice","ID_powPurchase"]];for(let t=1;t<=7;t++)Mi[`TD_purchase_${t}`]=[[`TD_basePurchase_${t}`,`TD_powPurchase_${t}`]];Mi.TD_purchase.push(["TD_basePurchase","TD_timeGlyphSacrifice","TD_powPurchase"]);Mi.TD_purchase_8=[["TD_basePurchase_8","TD_timeGlyphSacrifice","TD_powPurchase"]];for(const t of Uk)for(const e of Object.keys($h))if($h[e][t]){Mi[`${t}_${e}`]=[[]];for(const i of $h[e][t]){for(let n=1;n<=8;n++){const r=`${t}_${e}_${n}`,s=`${t}${n}`;$h[e].checkFn(i,s)&&(Mi[r]||(Mi[r]=[[]]),Mi[r][0].push(`general_${e}_${i}_${s}`))}Mi[`${t}_${e}`][0].push(`general_${e}_${i}_${t}`)}}for(const t of t9)for(const e of Object.keys($h))if($h[e][t]){Mi[`${t}_${e}`]=[[]];for(const i of $h[e][t])Mi[`${t}_${e}`][0].push(`general_${e}_${i}`)}Mi.ID_eternityUpgrade=[["ID_eu1","ID_eu2","ID_eu3"]];Mi.TD_eternityUpgrade=[["TD_eu1","TD_eu2"]];for(let t=1;t<=8;t++)Mi[`ID_eternityUpgrade_${t}`]=[[`ID_eu1_${t}`,`ID_eu2_${t}`,`ID_eu3_${t}`]],Mi[`TD_eternityUpgrade_${t}`]=[[`TD_eu1_${t}`,`TD_eu2_${t}`]];const r9=[{id:11,name:"You gotta start somewhere",description:"Buy a 1st Antimatter Dimension.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:12,name:"100 antimatter is a lot",description:"Buy a 2nd Antimatter Dimension.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:13,name:"Half life 3 CONFIRMED",description:"Buy a 3rd Antimatter Dimension.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:14,name:"L4D: Left 4 Dimensions",description:"Buy a 4th Antimatter Dimension.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:15,name:"5 Dimension Antimatter Punch",description:"Buy a 5th Antimatter Dimension.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:16,name:"We couldn't afford 9",get description(){return Enslaved.isRunning?"Buy a 6th Antimatter Dimension (they never amount to anything)":"Buy a 6th Antimatter Dimension."},checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:17,name:"Not a luck related achievement",description:"Buy a 7th Antimatter Dimension.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:18,name:"90 degrees to infinity",get description(){return Enslaved.isRunning?"Buy an 8th Antimatter Dimension (don't get used to it)":"Buy an 8th Antimatter Dimension."},checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:21,name:"To infinity!",description:"Go Infinite.",checkRequirement:()=>!0,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Start with ${formatInt(100)} antimatter.`},effect:100},{id:22,name:"FAKE NEWS!",get description(){return`Encounter ${formatInt(50)} different news messages.`},checkRequirement:()=>NewsHandler.uniqueTickersSeen>=50,checkEvent:GAME_EVENT.REALITY_RESET_AFTER},{id:23,name:"The 9th Dimension is a lie",get description(){return`Have exactly ${formatInt(99)} 8th Antimatter Dimensions.`},checkRequirement:()=>AntimatterDimension(8).amount.eq(99),get reward(){return`8th Antimatter Dimensions are ${formatPercents(.1)} stronger.`},effect:1.1},{id:24,name:"Antimatter Apocalypse",get description(){return`Get over ${format(L.E80)} antimatter.`},checkRequirement:()=>Currency.antimatter.exponent>=80,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:25,name:"Boosting to the max",get description(){return`Buy ${formatInt(10)} Dimension Boosts.`},checkRequirement:()=>DimBoost.purchasedBoosts>=10,checkEvent:GAME_EVENT.DIMBOOST_AFTER},{id:26,name:"You got past The Big Wall",description:"Buy an Antimatter Galaxy.",checkRequirement:()=>!0,checkEvent:GAME_EVENT.GALAXY_RESET_BEFORE},{id:27,name:"Double Galaxy",get description(){return`Buy ${formatInt(2)} Antimatter Galaxies.`},checkRequirement:()=>player.galaxies>=2,checkEvent:GAME_EVENT.GALAXY_RESET_AFTER},{id:28,name:"There's no point in doing that...",get description(){return`Buy a single 1st Antimatter Dimension when you have over ${format(L.E150)} of them.`},checkRequirement:()=>AntimatterDimension(1).amount.exponent>=150,checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER,get reward(){return`1st Antimatter Dimensions are ${formatPercents(.1)} stronger.`},effect:1.1},{id:31,name:"I forgot to nerf that",get description(){return`Get any Antimatter Dimension multiplier over ${formatX(L.E31)}.`},checkRequirement:()=>AntimatterDimensions.all.some(t=>t.multiplier.exponent>=31),checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`1st Antimatter Dimensions are ${formatPercents(.05)} stronger.`},effect:1.05},{id:32,name:"The Gods are pleased",get description(){return`Get over ${formatX(600)} from Dimensional Sacrifice outside of Challenge 8.`},checkRequirement:()=>!NormalChallenge(8).isOnlyActiveChallenge&&Sacrifice.totalBoost.gte(600),checkEvent:GAME_EVENT.SACRIFICE_RESET_AFTER,get reward(){return`Dimensional Sacrifice is stronger.
      ${Sacrifice.getSacrificeDescription({Achievement32:!1,Achievement57:!1,Achievement88:!1})} ➜
      ${Sacrifice.getSacrificeDescription({Achievement32:!0,Achievement57:!1,Achievement88:!1})}`},effect:.1},{id:33,name:"That's a lot of infinites",get description(){return`Reach Infinity ${formatInt(10)} times.`},checkRequirement:()=>Currency.infinities.gte(10),checkEvent:GAME_EVENT.BIG_CRUNCH_AFTER},{id:34,name:"You didn't need it anyway",description:"Infinity without having any 8th Antimatter Dimensions.",checkRequirement:()=>AntimatterDimension(8).totalAmount.eq(0),checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Dimensions 1-7 are ${formatPercents(.02)} stronger.`},effect:1.02},{id:35,name:"Don't you dare sleep",get description(){return PlayerProgress.realityUnlocked()?`Be offline for a period of over ${formatInt(6)} hours (real time).`:`Be offline for a period of over ${formatInt(6)} hours.`},checkRequirement:()=>Date.now()-player.lastUpdate>=216e5,checkEvent:GAME_EVENT.GAME_TICK_BEFORE},{id:36,name:"Claustrophobic",get description(){return`Infinity with just ${formatInt(1)} Antimatter Galaxy. (Your Antimatter Galaxies are reset on Infinity.)`},checkRequirement:()=>player.galaxies===1,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Multiply starting tick speed by ${format(1.02,2,2)}.`},effect:1/1.02},{id:37,name:"That's FAST!",get description(){return`Infinity in under ${formatInt(2)} hours.`},checkRequirement:()=>Time.thisInfinityRealTime.totalHours<=2,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Start with ${formatInt(5e3)} antimatter.`},effect:5e3},{id:38,name:"I don't believe in Gods",get description(){return`Buy an Antimatter Galaxy without Dimensional Sacrificing.
        (Your Antimatter Galaxies are reset on Infinity.)`},checkRequirement:()=>player.requirementChecks.infinity.noSacrifice,checkEvent:GAME_EVENT.GALAXY_RESET_BEFORE},{id:41,name:"No DLC required",get description(){return`Buy ${formatInt(16)} Infinity Upgrades.`},checkRequirement:()=>player.infinityUpgrades.size>=16,checkEvent:[GAME_EVENT.INFINITY_UPGRADE_BOUGHT,GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT],get reward(){return`Unlock two new Infinity Upgrades- ${formatX(2)} IP multiplier and offline IP generation.`}},{id:42,name:"Super Sanic",get description(){return`Have antimatter per second exceed your current antimatter above ${format(L.E63)}.`},checkRequirement:()=>Currency.antimatter.exponent>=63&&Currency.antimatter.productionPerSecond.gt(Currency.antimatter.value),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:43,name:"How the antitables have turned..",description:"Get the 8th Antimatter Dimension multiplier to be highest, 7th Antimatter Dimension multiplier  second highest, etc.",checkRequirement:()=>{const t=Array.range(1,8).map(e=>AntimatterDimension(e).multiplier);for(let e=0;e<t.length-1;e++)if(t[e].gte(t[e+1]))return!1;return!0},checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Each Antimatter Dimension gains a boost proportional to tier
      (8th gets ${formatPercents(.08)}, 7th gets ${formatPercents(.07)}, etc.)`}},{id:44,name:"Over in 30 Seconds",get description(){return`Have antimatter per second exceed your current antimatter
      for ${formatInt(30)} consecutive seconds.`},checkRequirement:()=>AchievementTimers.marathon1.check(Currency.antimatter.productionPerSecond.gt(Currency.antimatter.value),30),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:45,name:"Faster than a potato",get description(){return`Get more than ${format(L.E29)} ticks per second.`},checkRequirement:()=>Tickspeed.current.exponent<=-26,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Multiply starting tickspeed by ${formatX(1.02,0,2)}.`},effect:.98},{id:46,name:"Multidimensional",get description(){return`Reach ${format(L.E12)} of all Antimatter Dimensions except the 8th.`},checkRequirement:()=>AntimatterDimension(7).amount.exponent>=12,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:47,name:"Daredevil",get description(){return`Complete ${formatInt(3)} Normal Challenges.`},checkRequirement:()=>NormalChallenges.all.countWhere(t=>t.isCompleted)>=3,checkEvent:[GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT]},{id:48,name:"Antichallenged",get description(){return`Complete all ${formatInt(12)} Normal Challenges.`},checkRequirement:()=>NormalChallenges.all.countWhere(t=>!t.isCompleted)===0,checkEvent:[GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT],get reward(){return`All Dimensions are ${formatPercents(.1)} stronger.`},effect:1.1},{id:51,name:"Limit Break",description:"Break Infinity.",checkRequirement:()=>player.break,checkEvent:[GAME_EVENT.BREAK_INFINITY,GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT]},{id:52,name:"Age of Automation",description:"Max the interval for Antimatter Dimension and Tickspeed upgrade autobuyers.",checkRequirement:()=>Autobuyer.antimatterDimension.zeroIndexed.concat(Autobuyer.tickspeed).every(t=>t.isUnlocked&&t.hasMaxedInterval),checkEvent:[GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT]},{id:53,name:"Definitely not worth it",description:"Max the intervals for all normal autobuyers.",checkRequirement:()=>Autobuyers.upgradeable.every(t=>t.isUnlocked&&t.hasMaxedInterval),checkEvent:[GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT]},{id:54,name:"That's FASTER!",get description(){return`Infinity in ${formatInt(10)} minutes or less.`},checkRequirement:()=>Time.thisInfinityRealTime.totalMinutes<=10,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Start with ${format(5e5)} antimatter.`},effect:5e5},{id:55,name:"Forever isn't that long",get description(){return`Infinity in ${formatInt(1)} minute or less.`},checkRequirement:()=>Time.thisInfinityRealTime.totalMinutes<=1,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Start with ${format(5e10)} antimatter.`},effect:5e10},{id:56,name:"Many Deaths",get description(){return`Complete the 2nd Antimatter Dimension Autobuyer Challenge in ${formatInt(3)} minutes or less.`},checkRequirement:()=>NormalChallenge(2).isOnlyActiveChallenge&&Time.thisInfinityRealTime.totalMinutes<=3,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`All Antimatter Dimensions are stronger in the first ${formatInt(3)} minutes of Infinities.`},effect:()=>Math.max(6/(Time.thisInfinity.totalMinutes+3),1),effectCondition:()=>Time.thisInfinity.totalMinutes<3,formatEffect:t=>`${formatX(t,2,2)}`},{id:57,name:"Gift from the Gods",get description(){return`Complete the 8th Antimatter Dimension Autobuyer Challenge in ${formatInt(3)} minutes or less.`},checkRequirement:()=>NormalChallenge(8).isOnlyActiveChallenge&&Time.thisInfinityRealTime.totalMinutes<=3,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Dimensional Sacrifice is stronger.
      ${Sacrifice.getSacrificeDescription({Achievement32:!0,Achievement57:!1,Achievement88:!1})} ➜
      ${Sacrifice.getSacrificeDescription({Achievement32:!0,Achievement57:!0,Achievement88:!1})}`},effect:.1},{id:58,name:"This is fine.",get description(){return`Complete the Tickspeed Autobuyer Challenge in ${formatInt(3)} minutes or less.`},checkRequirement:()=>NormalChallenge(9).isOnlyActiveChallenge&&Time.thisInfinityRealTime.totalMinutes<=3,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Increase the multiplier for buying ${formatInt(10)} Antimatter Dimensions by +${formatPercents(.01)}.`},effect:1.01},{id:61,name:"Bulked Up",get description(){return`Get all of your Antimatter Dimension Autobuyer bulk amounts to
        ${formatInt(Autobuyer.antimatterDimension.bulkCap)}.`},checkRequirement:()=>Autobuyer.antimatterDimension.zeroIndexed.every(t=>t.hasMaxedBulk),checkEvent:[GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT,GAME_EVENT.SAVE_CONVERTED_FROM_PREVIOUS_VERSION],reward:"Dimension Autobuyer bulks are unlimited."},{id:62,name:"Oh, hey... You're still here?",get description(){return`Reach ${format(L.E8)} Infinity Points per minute.`},checkRequirement:()=>Player.bestRunIPPM.exponent>=8,checkEvent:GAME_EVENT.BIG_CRUNCH_AFTER},{id:63,name:"A new beginning",description:"Begin generation of Infinity Power.",checkRequirement:()=>Currency.infinityPower.gt(1),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:64,name:"Zero Deaths",description:"Get to Infinity without Dimension Boosts or Antimatter Galaxies while in a Normal Challenge.",checkRequirement:()=>player.galaxies===0&&DimBoost.purchasedBoosts===0&&NormalChallenge.isRunning,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Antimatter Dimensions 1-4 are ${formatPercents(.25)} stronger.`},effect:1.25},{id:65,name:"Not-so-challenging",get description(){return`Get the sum of all of your Normal Challenge times under ${formatInt(3)} minutes.`},checkRequirement:()=>Time.challengeSum.totalMinutes<3,checkEvent:[GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.REALITY_RESET_AFTER],get reward(){return`All Antimatter Dimensions are stronger in the first ${formatInt(3)} minutes of Infinities,
      but only in Challenges.`},effect:()=>Player.isInAnyChallenge?Math.max(4/(Time.thisInfinity.totalMinutes+1),1):1,effectCondition:()=>Player.isInAnyChallenge&&Time.thisInfinity.totalMinutes<3,formatEffect:t=>`${formatX(t,2,2)}`},{id:66,name:"Faster than a squared potato",get description(){return`Get more than ${format(L.E58)} ticks per second.`},checkRequirement:()=>Tickspeed.current.exponent<=-55,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Multiply starting tickspeed by ${formatX(1.02,0,2)}.`},effect:.98},{id:67,name:"Infinitely Challenging",description:"Complete an Infinity Challenge.",checkRequirement:()=>InfinityChallenges.completed.length>0,checkEvent:[GAME_EVENT.INFINITY_CHALLENGE_COMPLETED,GAME_EVENT.REALITY_RESET_AFTER]},{id:68,name:"You did this again just for the achievement right?",get description(){return`Complete the 3rd Antimatter Dimension Autobuyer Challenge in ${formatInt(10)} seconds or less.`},checkRequirement:()=>NormalChallenge(3).isOnlyActiveChallenge&&Time.thisInfinityRealTime.totalSeconds<=10,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`1st Antimatter Dimensions are ${formatPercents(.5)} stronger.`},effect:1.5},{id:71,name:"ERROR 909: Dimension not found",description:`Get to Infinity with only a single 1st Antimatter Dimension without Dimension Boosts
      or Antimatter Galaxies, while in the 2nd Antimatter Dimension Autobuyer Challenge.`,checkRequirement:()=>NormalChallenge(2).isOnlyActiveChallenge&&AntimatterDimension(1).amount.eq(1)&&DimBoost.purchasedBoosts===0&&player.galaxies===0,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`1st Antimatter Dimensions are ${formatInt(3)} times stronger.`},effect:3},{id:72,name:"Can't hold all these infinities",get description(){return`Get all Antimatter Dimension multipliers over ${formatX(Decimal.NUMBER_MAX_VALUE,1)}.`},checkRequirement:()=>AntimatterDimensions.all.every(t=>t.multiplier.gte(Decimal.NUMBER_MAX_VALUE)),checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`All Antimatter Dimensions are ${formatPercents(.1)} stronger.`},effect:1.1},{id:73,name:"THIS ACHIEVEMENT DOESN'T EXIST",get description(){return`Get ${formatPostBreak(L.D9_9999E9999,4)} antimatter.`},checkRequirement:()=>Currency.antimatter.gte(L.D9_9999E9999),checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Antimatter Dimensions gain a multiplier based on current antimatter.",effect:()=>Currency.antimatter.value.pow(2e-5).plus(1),formatEffect:t=>`${formatX(t,2,2)}`},{id:74,name:"Not a second lost",get description(){return`Get the sum of all best Normal Challenge times under ${formatInt(5)} seconds.`},checkRequirement:()=>Time.challengeSum.totalSeconds<5,checkEvent:[GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.REALITY_RESET_AFTER],get reward(){return`All Antimatter Dimensions are ${formatPercents(.4)} stronger, but only in challenges.`},effect:1.4,effectCondition:()=>Player.isInAnyChallenge},{id:75,name:"NEW DIMENSIONS???",description:"Unlock the 4th Infinity Dimension.",checkRequirement:()=>InfinityDimension(4).isUnlocked,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Your Achievement bonus affects Infinity Dimensions.",effect:()=>Achievements.power},{id:76,name:"One for each dimension",get description(){return`Play for ${formatInt(8)} days.`},checkRequirement:()=>Time.totalTimePlayed.totalDays>=8,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Extremely small multiplier to Antimatter Dimensions based on time played.",effect:()=>Math.max(Math.pow(Time.totalTimePlayed.totalDays/2,.05),1),formatEffect:t=>`${formatX(t,2,2)}`},{id:77,name:"1 Million is a lot",get description(){return`Reach ${format(1e6)} Infinity Power.`},checkRequirement:()=>Currency.infinityPower.exponent>=6,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:78,name:"Blink of an eye",get description(){return`Infinity in under ${formatInt(250)}ms.`},checkRequirement:()=>Time.thisInfinityRealTime.totalMilliseconds<=250,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Start with ${format(5e25)} antimatter.`},effect:5e25},{id:81,name:"Game Design Is My Passion",get description(){return`Beat Infinity Challenge 5 in ${formatInt(15)} seconds or less.`},checkRequirement:()=>InfinityChallenge(5).isRunning&&Time.thisInfinityRealTime.totalSeconds<=15,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE},{id:82,name:"Anti-antichallenged",get description(){return`Complete all ${formatInt(8)} Infinity Challenges.`},checkRequirement:()=>InfinityChallenges.completed.length===8,checkEvent:[GAME_EVENT.INFINITY_CHALLENGE_COMPLETED,GAME_EVENT.REALITY_RESET_AFTER]},{id:83,name:"YOU CAN GET 50 GALAXIES?!?!",get description(){return`Get ${formatInt(50)} Antimatter Galaxies.`},checkRequirement:()=>player.galaxies>=50,checkEvent:GAME_EVENT.GALAXY_RESET_AFTER,get reward(){return`Tickspeed is just over ${formatPercents(.05)} faster per Antimatter Galaxy.`},effect:()=>L.D0_95.pow(player.galaxies),formatEffect:t=>`${formatX(t.recip(),2,2)}`},{id:84,name:"I got a few to spare",get description(){return`Reach ${formatPostBreak("1e35000")} antimatter.`},checkRequirement:()=>Currency.antimatter.exponent>=35e3,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Antimatter Dimensions are stronger the more unspent antimatter you have.",effect:()=>Currency.antimatter.value.pow(2e-5).plus(1),formatEffect:t=>`${formatX(t,2,2)}`},{id:85,name:"ALL YOUR IP ARE BELONG TO US",get description(){return`Big Crunch for ${format(L.E150)} Infinity Points.`},checkRequirement:()=>gainedInfinityPoints().exponent>=150,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Additional ${formatX(4)} multiplier to Infinity Points.`},effect:4},{id:86,name:"Do you even bend time bro?",get description(){return`Reach ${formatX(1e3)} faster per Tickspeed upgrade.`},checkRequirement:()=>Tickspeed.multiplier.recip().gte(1e3),checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`All Galaxies are ${formatPercents(.01)} stronger.`},effect:1.01},{id:87,name:"2 MILLION INFINITIES",get description(){return`Infinity ${format(L.D2E6)} times.`},checkRequirement:()=>Currency.infinities.gt(L.D2E6),checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Infinities more than ${formatInt(5)} seconds long
      give ${formatX(250)} more Infinities.`},effect:250,effectCondition:()=>Time.thisInfinity.totalSeconds>5},{id:88,name:"Yet another infinity reference",get description(){return`Get a ${formatX(Decimal.NUMBER_MAX_VALUE,1,0)} multiplier in a single Dimensional Sacrifice.`},checkRequirement:()=>Sacrifice.nextBoost.gte(Decimal.NUMBER_MAX_VALUE),checkEvent:GAME_EVENT.SACRIFICE_RESET_BEFORE,get reward(){return`Dimensional Sacrifice is stronger.
      ${Sacrifice.getSacrificeDescription({Achievement32:!0,Achievement57:!0,Achievement88:!1})} ➜
      ${Sacrifice.getSacrificeDescription({Achievement32:!0,Achievement57:!0,Achievement88:!0})}`},effect:.1},{id:91,name:"Ludicrous Speed",get description(){return`Big Crunch for ${format(L.E200)} Infinity Points in ${formatInt(2)} seconds or less.`},checkRequirement:()=>gainedInfinityPoints().exponent>=200&&Time.thisInfinityRealTime.totalSeconds<=2,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`All Antimatter Dimensions are significantly stronger in the
      first ${formatInt(5)} seconds of Infinities.`},effect:()=>Math.max((5-Time.thisInfinity.totalSeconds)*60,1),effectCondition:()=>Time.thisInfinity.totalSeconds<5,formatEffect:t=>`${formatX(t,2,2)}`},{id:92,name:"I brake for NOBODY!",get description(){return`Big Crunch for ${format(L.E250)} Infinity Points in ${formatInt(20)} seconds or less.`},checkRequirement:()=>gainedInfinityPoints().exponent>=250&&Time.thisInfinityRealTime.totalSeconds<=20,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`All Antimatter Dimensions are significantly stronger in the
      first ${formatInt(60)} seconds of Infinities.`},effect:()=>Math.max((1-Time.thisInfinity.totalMinutes)*100,1),effectCondition:()=>Time.thisInfinity.totalMinutes<1,formatEffect:t=>`${formatX(t,2,2)}`},{id:93,name:"MAXIMUM OVERDRIVE",get description(){return`Big Crunch for ${format(L.E300)} Infinity Points.`},checkRequirement:()=>gainedInfinityPoints().exponent>=300,checkEvent:GAME_EVENT.BIG_CRUNCH_BEFORE,get reward(){return`Additional ${formatX(4)} multiplier to Infinity Points.`},effect:4},{id:94,name:"4.3333 minutes of Infinity",get description(){return`Reach ${format(L.E260)} Infinity Power.`},checkRequirement:()=>Currency.infinityPower.exponent>=260,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Double Infinity Power gain.",effect:2},{id:95,name:"Is this safe?",get description(){return`Gain ${format(Decimal.NUMBER_MAX_VALUE,1,0)} Replicanti in ${formatInt(1)} hour.`},get reward(){return`You keep your Replicanti and ${formatInt(1)} Replicanti Galaxy on Infinity.`},checkRequirement:()=>(Replicanti.amount.eq(Decimal.NUMBER_MAX_VALUE)||player.replicanti.galaxies>0)&&Time.thisInfinityRealTime.totalHours<=1,checkEvent:GAME_EVENT.REPLICANTI_TICK_AFTER},{id:96,name:"Time is relative",description:"Go Eternal.",checkRequirement:()=>!0,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE},{id:97,name:"Like jumping on a lego",get description(){return`Get the sum of Infinity Challenge times under ${format(6.66,2,2)} seconds.`},checkRequirement:()=>Time.infinityChallengeSum.totalSeconds<6.66,checkEvent:[GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.REALITY_RESET_AFTER]},{id:98,name:"0 degrees from Infinity",description:"Unlock the 8th Infinity Dimension.",checkRequirement:()=>InfinityDimension(8).isUnlocked,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:101,name:"8 nobody got time for that",description:"Eternity without buying Antimatter Dimensions 1-7.",checkRequirement:()=>player.requirementChecks.eternity.onlyAD8,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE},{id:102,name:"This mile took an eternity",description:"Get all Eternity milestones.",checkRequirement:()=>EternityMilestone.all.every(t=>t.isReached),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:103,name:"Tätä saavutusta ei ole olemassa II",get description(){return`Reach ${formatPostBreak(L.D9_99999E999,5,0)} Infinity Points.`},checkRequirement:()=>Currency.infinityPoints.exponent>=1e3,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Make the Infinity Point formula better. log(x)/${formatInt(308)} ➜ log(x)/${formatFloat(307.8,1)}`},effect:307.8},{id:104,name:"That wasn't an eternity",get description(){return`Eternity in under ${formatInt(30)} seconds.`},checkRequirement:()=>Time.thisEternity.totalSeconds<=30,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE,get reward(){return`Start Eternities with ${format(5e25)} Infinity Points.`},effect:5e25},{id:105,name:"Infinite Time",get description(){return`Have ${formatInt(308)} Tickspeed upgrades from Time Dimensions.`},checkRequirement:()=>player.totalTickGained>=308,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Time Dimensions gain a multiplier based on tickspeed.",effect:()=>Tickspeed.perSecond.pow(5e-6),formatEffect:t=>`${formatX(t,2,2)}`},{id:106,name:"The swarm",get description(){return`Get ${formatInt(10)} Replicanti Galaxies in ${formatInt(15)} seconds.`},checkRequirement:()=>Replicanti.galaxies.total>=10&&Time.thisInfinity.totalSeconds<=15,checkEvent:GAME_EVENT.REPLICANTI_TICK_AFTER},{id:107,name:"Do you really need a guide for this?",get description(){return`Eternity with less than ${formatInt(10)} Infinities.`},checkRequirement:()=>Currency.infinities.lt(10),checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE},{id:108,name:"We COULD afford 9",get description(){return`Eternity with exactly ${formatInt(9)} Replicanti.`},checkRequirement:()=>Replicanti.amount.round().eq(9),checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE},{id:111,name:"Yo dawg, I heard you liked infinities...",get description(){return`Have all your Infinities in your past ${formatInt(10)} Infinities be at least
      ${format(Decimal.NUMBER_MAX_VALUE,1,0)} times higher Infinity Points than the previous one.`},checkRequirement:()=>{if(player.records.recentInfinities.some(e=>e[0]===Number.MAX_VALUE))return!1;const t=player.records.recentInfinities.map(e=>e[2]);for(let e=0;e<t.length-1;e++)if(t[e].lt(t[e+1].times(Decimal.NUMBER_MAX_VALUE)))return!1;return!0},checkEvent:GAME_EVENT.BIG_CRUNCH_AFTER,reward:"Your antimatter doesn't reset on Dimension Boosts or Antimatter Galaxies."},{id:112,name:"Never again",get description(){return`Get the sum of Infinity Challenge times below ${formatInt(750)}ms.`},checkRequirement:()=>Time.infinityChallengeSum.totalMilliseconds<750,checkEvent:[GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.REALITY_RESET_AFTER]},{id:113,name:"Eternities are the new infinity",get description(){return`Eternity in under ${formatInt(250)}ms.`},checkRequirement:()=>Time.thisEternity.totalMilliseconds<=250,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE,get reward(){return`Gain ${formatX(2)} more Eternities.`},effect:2},{id:114,name:"You're a mistake",description:"Fail an Eternity Challenge.",checkRequirement:()=>!0,checkEvent:GAME_EVENT.CHALLENGE_FAILED,reward:"A fading sense of accomplishment.",effect:()=>"Sense of accomplishment (fading)"},{id:115,name:"I wish I had gotten 7 eternities",description:"Start an Infinity Challenge inside an Eternity Challenge.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:116,name:"Do I really need to infinity",get description(){return`Eternity with only ${formatInt(1)} Infinity.`},checkRequirement:()=>Currency.infinities.lte(1),checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE,reward:"Multiplier to Infinity Points based on Infinities.",effect:()=>Decimal.pow(Currency.infinitiesTotal.value.clampMin(1),LOG10_2/4).powEffectOf(TimeStudy(31)),cap:()=>Effarig.eternityCap,formatEffect:t=>{const e=formatX(t,2,2);return TimeStudy(31).canBeApplied?`${formatX(t.pow(1/TimeStudy(31).effectValue),2,1)} (After TS31: ${e})`:e}},{id:117,name:"Costco sells Dimboosts now!",get description(){return`Bulk buy ${formatInt(750)} Dimension Boosts at once.`},checkRequirement:([t])=>t>=750,checkEvent:GAME_EVENT.DIMBOOST_AFTER,get reward(){return`The multiplier from Dimension Boosts to Antimatter Dimensions is ${formatPercents(.01)} higher.`},effect:1.01},{id:118,name:"IT'S OVER 9000",get description(){return`Get a total Dimensional Sacrifice multiplier of ${formatPostBreak(L.E9000)}.`},checkRequirement:()=>Sacrifice.totalBoost.exponent>=9e3,checkEvent:GAME_EVENT.SACRIFICE_RESET_AFTER,reward:`Dimensional Sacrifice doesn't reset your Antimatter Dimensions
      and the Autobuyer activates every tick if turned on.`},{id:121,name:"Can you get infinite IP?",get description(){return`Reach ${formatPostBreak("1e30008")} Infinity Points.`},checkRequirement:()=>Currency.infinityPoints.exponent>=30008,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:122,name:"You're already dead.",description:"Eternity without buying Antimatter Dimensions 2-8.",checkRequirement:()=>player.requirementChecks.eternity.onlyAD1,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE},{id:123,name:"5 more eternities until the update",get description(){return`Complete ${formatInt(50)} unique Eternity Challenge tiers.`},checkRequirement:()=>EternityChallenges.completions>=50,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER},{id:124,name:"Long lasting relationship",get description(){return`Have your Infinity Power per second exceed your Infinity Power
      for ${formatInt(60)} consecutive seconds during a single Infinity.`},checkRequirement:()=>AchievementTimers.marathon2.check(!EternityChallenge(7).isRunning&&InfinityDimension(1).productionPerSecond.gt(Currency.infinityPower.value),60),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:125,name:"Like feasting on a behind",get description(){return`Reach ${format(L.E90)} Infinity Points without having any Infinities
      or any 1st Antimatter Dimensions in your current Eternity.`},checkRequirement:()=>Currency.infinityPoints.exponent>=90&&player.requirementChecks.eternity.noAD1&&Currency.infinities.eq(0),checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Infinity Point multiplier based on time spent this Infinity.",effect(){const t=Time.thisInfinity.totalSeconds*10+1;return L.D2.pow(Math.log(t)*Math.min(Math.pow(t,.11),500))},cap:()=>Effarig.eternityCap,formatEffect:t=>`${formatX(t,2,2)}`},{id:126,name:"Popular music",get description(){return`Have ${formatInt(180)} times more Replicanti Galaxies than Antimatter Galaxies.`},checkRequirement:()=>Replicanti.galaxies.total>=180*player.galaxies&&player.galaxies>0,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Replicanti Galaxies divide your Replicanti by ${format(Decimal.NUMBER_MAX_VALUE,1,0)}
      instead of resetting them to ${formatInt(1)}.`}},{id:127,name:"But I wanted another prestige layer...",get description(){return`Reach ${format(Decimal.NUMBER_MAX_VALUE,1,0)} Eternity Points.`},checkRequirement:()=>Currency.eternityPoints.gte(Decimal.NUMBER_MAX_VALUE),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:128,name:"What do I have to do to get rid of you",get description(){return`Reach ${formatPostBreak("1e22000")} Infinity Points without any Time Studies.`},checkRequirement:()=>Currency.infinityPoints.exponent>=22e3&&player.timestudy.studies.length===0,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Time Dimensions are multiplied by the number of Time Studies you have.",effect:()=>Math.max(player.timestudy.studies.length,1),formatEffect:t=>`${formatX(t)}`},{id:131,name:"No ethical consumption",get description(){return`Get ${format(L.D2E9)} Banked Infinities.`},checkRequirement:()=>Currency.infinitiesBanked.gt(L.D2E9),checkEvent:[GAME_EVENT.ETERNITY_RESET_AFTER,GAME_EVENT.SAVE_CONVERTED_FROM_PREVIOUS_VERSION],get reward(){return`You gain ${formatX(2)} times more Infinities and
      after Eternity you permanently keep ${formatPercents(.05)} of your Infinities as Banked Infinities.`},effects:{infinitiesGain:2,bankedInfinitiesGain:()=>Currency.infinities.value.times(.05).floor()}},{id:132,name:"Unique snowflakes",get description(){return`Have ${formatInt(569)} Antimatter Galaxies without gaining any
        Replicanti Galaxies in your current Eternity.`},checkRequirement:()=>player.galaxies>=569&&player.requirementChecks.eternity.noRG,checkEvent:GAME_EVENT.GALAXY_RESET_AFTER,reward:"Gain a multiplier to Tachyon Particle and Dilated Time gain based on Antimatter Galaxies.",effect:()=>1.22*Math.max(Math.pow(player.galaxies,.04),1),formatEffect:t=>`${formatX(t,2,2)}`},{id:133,name:"I never liked this infinity stuff anyway",get description(){return`Reach ${formatPostBreak(L.E200000)} Infinity Points without
      buying any Infinity Dimensions or the ${formatX(2)} Infinity Point multiplier.`},checkRequirement:()=>Array.dimensionTiers.map(InfinityDimension).every(t=>t.baseAmount===0)&&player.IPMultPurchases===0&&Currency.infinityPoints.exponent>=2e5,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"You start Eternities with all Infinity Challenges unlocked and completed."},{id:134,name:"When will it be enough?",get description(){return`Reach ${formatPostBreak(L.E18000)} Replicanti.`},checkRequirement:()=>Replicanti.amount.exponent>=18e3,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`You gain Replicanti ${formatInt(2)} times faster under ${format(replicantiCap(),1)} Replicanti.`}},{id:135,name:"Faster than a potato^286078",get description(){return`Get more than ${formatPostBreak("1e8296262")} ticks per second.`},checkRequirement:()=>Tickspeed.current.exponent<=-8296262,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:136,name:"I told you already, time is relative",description:"Dilate time.",checkEvent:GAME_EVENT.ACHIEVEMENT_EVENT_OTHER},{id:137,name:"Now you're thinking with dilation!",get description(){return`Get ${formatPostBreak("1e260000")} antimatter
      in ${formatInt(1)} minute or less while Dilated.`},checkRequirement:()=>Currency.antimatter.exponent>=26e4&&Time.thisEternity.totalMinutes<=1&&player.dilation.active,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Gain ${formatX(2)} Dilated Time and Time Theorems while Dilated.`},effect:()=>player.dilation.active?2:1},{id:138,name:"This is what I have to do to get rid of you.",get description(){return`Reach ${formatPostBreak("1e26000")} Infinity Points without any Time Studies while Dilated.`},checkRequirement:()=>player.timestudy.studies.length===0&&player.dilation.active&&Currency.infinityPoints.exponent>=26e3,checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Removes the downsides from Time Study 131 and 133 in the Active and Idle Time Study paths."},{id:141,name:"Snap back to reality",description:"Make a new Reality.",checkRequirement:()=>!0,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,get reward(){return`${formatX(4)} Infinity Point gain, and increase the multiplier for buying ${formatInt(10)}
      Antimatter Dimensions by +${format(.1,0,1)}.`},effects:{ipGain:4,buyTenMult:.1}},{id:142,name:"How does this work?",description:"Unlock the automator.",checkRequirement:()=>Player.automatorUnlocked,checkEvent:[GAME_EVENT.REALITY_RESET_AFTER,GAME_EVENT.REALITY_UPGRADE_BOUGHT,GAME_EVENT.PERK_BOUGHT,GAME_EVENT.BLACK_HOLE_UNLOCKED],get reward(){return`Dimension Boosts are ${formatPercents(.5)} stronger.`},effect:1.5},{id:143,name:"Yo dawg, I heard you liked reskins...",get description(){return`Have all your Eternities in your past ${formatInt(10)} Eternities be at least
      ${format(Decimal.NUMBER_MAX_VALUE,1,0)} times higher Eternity Points than the previous one.`},checkRequirement:()=>{if(player.records.recentEternities.some(e=>e[0]===Number.MAX_VALUE))return!1;const t=player.records.recentEternities.map(e=>e[2]);for(let e=0;e<t.length-1;e++)if(t[e].lt(t[e+1].times(Decimal.NUMBER_MAX_VALUE)))return!1;return!0},checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER,reward:"Galaxies no longer reset Dimension Boosts."},{id:144,name:"Is this an Interstellar reference?",description:"Unlock the Black Hole.",checkRequirement:()=>BlackHole(1).isUnlocked,checkEvent:GAME_EVENT.BLACK_HOLE_UNLOCKED},{id:145,name:"Are you sure these are the right way around?",description:"Have either Black Hole interval smaller than its duration.",checkRequirement:()=>BlackHoles.list.some(t=>t.interval<t.duration),checkEvent:GAME_EVENT.BLACK_HOLE_UPGRADE_BOUGHT,get reward(){return`Black Hole intervals are ${formatPercents(.1)} shorter.`},effect:.9},{id:146,name:"Perks of living",description:"Have all Perks bought.",checkRequirement:()=>player.reality.perks.size===Perks.all.length,checkEvent:GAME_EVENT.PERK_BOUGHT,get reward(){return`+${formatPercents(.01)} Glyph rarity.`},effect:1},{id:147,name:"Master of Reality",description:"Have all Reality upgrades bought.",checkRequirement:()=>RealityUpgrades.allBought,checkEvent:GAME_EVENT.REALITY_UPGRADE_BOUGHT,reward:"Unlock Teresa, the Celestial of Reality."},{id:148,name:"Royal flush",description:"Reality with one of each basic Glyph type.",checkRequirement:()=>BASIC_GLYPH_TYPES.every(t=>Glyphs.activeList.some(e=>e.type===t)),checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,reward:"Gained Glyph level is increased by number of distinct Glyph types equipped.",effect:()=>new Set(Glyphs.activeWithoutCompanion.map(t=>t.type)).size,formatEffect:t=>`+${formatInt(t)}`},{id:151,name:"You really didn't need it anyway",get description(){return`Get ${formatInt(800)} Antimatter Galaxies without
      buying 8th Antimatter Dimensions in your current Infinity.`},checkRequirement:()=>player.galaxies>=800&&player.requirementChecks.infinity.noAD8,checkEvent:GAME_EVENT.GALAXY_RESET_AFTER,reward:"Unlock V, the Celestial of Achievements."},{id:152,name:"Y'all got any more of them Glyphs?",get description(){return`Have ${formatInt(100)} Glyphs in your inventory.`},checkRequirement:()=>Glyphs.inventoryList.length>=100,checkEvent:GAME_EVENT.GLYPHS_CHANGED},{id:153,name:`More like "reallydoesn'tmatter"`,description:"Reality without producing antimatter.",checkRequirement:()=>player.requirementChecks.reality.noAM,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE},{id:154,name:"I am speed",get description(){return`Reality in under ${formatInt(5)} seconds (game time).`},checkRequirement:()=>Time.thisReality.totalSeconds<=5,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,get reward(){return`${formatPercents(.1)} chance each Reality of ${formatX(2)} Realities and Perk Points.`},effect:.1},{id:155,name:"Achievement #15983",get description(){return`Play for ${formatFloat(13.7,1)} billion years.`},checkRequirement:()=>Time.totalTimePlayed.totalYears>137e8,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Black Hole durations are ${formatPercents(.1)} longer.`},effect:1.1},{id:156,name:"College Dropout",description:"Reality without buying Time Theorems.",checkRequirement:()=>player.requirementChecks.reality.noPurchasedTT,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,get reward(){return`Gain ${formatX(2.5,0,1)} generated Time Theorems, and a free coupon to McDonalds™️.`},effect:2.5},{id:157,name:"It's super effective!",get description(){return`Get a Glyph with ${formatInt(4)} effects.`},checkRequirement:()=>Glyphs.activeList.concat(Glyphs.inventoryList).map(t=>getGlyphEffectsFromBitmask(t.effects,0,0).filter(e=>e.isGenerated).length).max()>=4,checkEvent:GAME_EVENT.GLYPHS_CHANGED},{id:158,name:"Bruh, are you like, inside the hole?",description:"Make both Black Holes permanent.",checkRequirement:()=>BlackHole(1).isPermanent&&BlackHole(2).isPermanent,checkEvent:GAME_EVENT.BLACK_HOLE_UPGRADE_BOUGHT,get reward(){return`Black Hole power increased by ${formatPercents(.1)}.`},effect:1.1},{id:161,name:"that's where you're wrong kiddo",get description(){return`Get ${formatPostBreak(L.E1E8)} antimatter while Dilated.`},checkRequirement:()=>Currency.antimatter.exponent>=1e8&&player.dilation.active,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:162,name:"Reinstalled the game and rejoined the server",description:"Have every Time Study at once.",checkRequirement:()=>player.timestudy.studies.length>=58,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:163,name:"Actually, super easy! Barely an inconvenience!",get description(){return`Complete all the Eternity Challenges ${formatInt(5)} times with less than ${formatInt(1)}
      second (game time) in your current Reality.`},checkRequirement:()=>EternityChallenges.all.map(t=>t.completions).min()>=5&&Time.thisReality.totalSeconds<=1,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:164,name:"Infinity times two",get description(){return`Get ${format(Decimal.NUMBER_MAX_VALUE,1)} Infinities.`},checkRequirement:()=>Currency.infinitiesTotal.gte(Decimal.NUMBER_MAX_VALUE),checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Gain ×${formatInt(1024)} more Infinities.`},effect:1024},{id:165,name:"Perfectly balanced",get description(){return`Get a level ${formatInt(5e3)} Glyph with all Glyph level factors equally weighted.`},checkRequirement:()=>gainedGlyphLevel().actualLevel>=5e3&&["repl","dt","eternities"].every(t=>player.celestials.effarig.glyphWeights[t]===player.celestials.effarig.glyphWeights.ep),checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,reward:"Unlock optimal automatic Glyph level factor adjustment."},{id:166,name:"Nicenice.",get description(){return`Get a Glyph with level exactly ${formatInt(6969)}.`},checkRequirement:()=>gainedGlyphLevel().actualLevel===6969,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE,get reward(){return`+${formatInt(69)} to Glyph level.`},effect:69},{id:167,name:"Mr. Layer? Sorry, you're not on the list",get description(){return`Reach ${format(Decimal.NUMBER_MAX_VALUE,1,0)} Reality Machines.`},checkRequirement:()=>Currency.realityMachines.gte(Decimal.NUMBER_MAX_VALUE),checkEvent:GAME_EVENT.GAME_TICK_AFTER,reward:"Gain more Reality Machines based on your current Reality Machines.",effect:()=>Math.clampMin(1,Currency.realityMachines.value.log2()),formatEffect:t=>`${formatX(t,2,2)}`},{id:168,name:"Woah, we're halfway there",get description(){return`Get ${formatInt(50)} total Ra Celestial Memory levels.`},checkRequirement:()=>Ra.totalPetLevel>=50,checkEvent:GAME_EVENT.GAME_TICK_AFTER,get reward(){return`Get ${formatPercents(.1)} more memories.`},effect:1.1},{id:171,name:"The god is delighted",description:"Sacrifice every sacrificable Glyph type at least once.",checkRequirement:()=>Object.values(player.reality.glyphs.sac).every(t=>t>0),checkEvent:GAME_EVENT.GLYPHS_CHANGED,get reward(){return`Glyph sacrifice is ${formatX(2)} stronger.`},effect:2},{id:172,name:"Hitchhiker's Guide to Reality",get description(){return`Reality for ${format(Decimal.NUMBER_MAX_VALUE,1)} Reality Machines without having
      any Charged Infinity Upgrades, having any equipped Glyphs, or buying any Triad Studies.`},checkRequirement:()=>MachineHandler.gainedRealityMachines.gte(Decimal.NUMBER_MAX_VALUE)&&player.celestials.ra.charged.size===0&&Glyphs.activeWithoutCompanion.length===0&&player.requirementChecks.reality.noTriads,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE},{id:173,name:"Cet accomplissement n'existe pas III",get description(){return`Reach ${formatPostBreak(L.D9_99999E999,5,0)} Reality Machines.`},checkRequirement:()=>player.reality.realityMachines.gte(L.D9_99999E999),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:174,name:"Don't you already have two of these?",description:"Get a Singularity.",checkRequirement:()=>!0,checkEvent:GAME_EVENT.SINGULARITY_RESET_BEFORE},{id:175,name:"The First Antihistorian",get description(){return`Get ${formatInt(Ra.alchemyResourceCap)} of all Alchemy Resources.`},checkRequirement:()=>AlchemyResources.all.every(t=>t.amount>=Ra.alchemyResourceCap),checkEvent:GAME_EVENT.REALITY_RESET_AFTER,get reward(){return`Synergism can go above ${formatPercents(1)} and Momentum increases ${formatX(10)} faster.`},effect:10},{id:176,name:"Mom counted to 3",description:"Annihilate your Dark Matter Dimensions."},{id:177,name:"This mile took a celestial",description:"Complete all Singularity Milestones at least once.",checkRequirement:()=>SingularityMilestones.all.every(t=>t.completions>0),checkEvent:GAME_EVENT.SINGULARITY_RESET_AFTER},{id:178,name:"Destroyer of Worlds",get description(){return`Get ${formatInt(1e5)} Antimatter Galaxies.`},checkRequirement:()=>player.galaxies>=1e5,checkEvent:GAME_EVENT.GALAXY_RESET_AFTER,get reward(){return`All Galaxies are ${formatPercents(.01)} stronger.`},effect:1.01},{id:181,displayId:666,name:"Antimatter Dimensions Eternal",description:"Doom your Reality.",checkRequirement:()=>Pelle.isDoomed,checkEvent:GAME_EVENT.REALITY_RESET_AFTER},{id:182,name:"One more time",description:"Permanently gain back all Antimatter Dimension autobuyers.",checkRequirement:()=>PelleUpgrade.antimatterDimAutobuyers1.canBeApplied&&PelleUpgrade.antimatterDimAutobuyers2.canBeApplied,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:183,name:"Déjà vOoM",description:"Complete Infinity Challenge 5 while Doomed.",checkRequirement:()=>Pelle.isDoomed&&InfinityChallenge(5).isCompleted,checkEvent:GAME_EVENT.INFINITY_CHALLENGE_COMPLETED,get reward(){return`All Antimatter Dimensions are raised to ${formatPow(1.0812403840463596,0,3)}`},effect:1.0812403840463596},{id:184,name:"You're out!",description:"Encounter the third Pelle Strike.",checkRequirement:()=>PelleStrikes.eternity.hasStrike,checkEvent:GAME_EVENT.PELLE_STRIKE_UNLOCKED},{id:185,name:"Four score and seven years ago",description:"Encounter the fourth Pelle Strike.",checkRequirement:()=>PelleStrikes.ECs.hasStrike,checkEvent:GAME_EVENT.PELLE_STRIKE_UNLOCKED},{id:186,displayId:181,name:"An unhealthy obsession",description:"Purchase Time Study 181 while Doomed."},{id:187,name:"The One with Dilated Time",description:"Unlock Dilation while Doomed.",checkRequirement:()=>PelleStrikes.dilation.hasStrike,checkEvent:GAME_EVENT.PELLE_STRIKE_UNLOCKED,get reward(){return`Increase the multiplier per repeatable Dilated Time
      multiplier upgrade by ${formatX(1.35,0,2)}.`},effect:1.35},{id:188,name:"The End",description:"Beat the game.",checkRequirement:()=>GameEnd.endState>END_STATE_MARKERS.GAME_END&&!GameEnd.removeAdditionalEnd,checkEvent:GAME_EVENT.GAME_TICK_AFTER}],s9=[{id:11,name:"The first one's always free",description:"Click on this Achievement."},{id:12,name:"Just in case",get description(){return`Save ${formatInt(100)} times without refreshing.`}},{id:13,name:"It pays to have respect",description:"Pay respects."},{id:14,name:"So do I",description:"Say something naughty."},{id:15,name:"Do a barrel roll!",description:"Do a barrel roll."},{id:16,name:"Do you enjoy pain?",get description(){return`Use a "painful" notation for ${formatInt(10)} real-time minutes
      after doing an Eternity.`},checkRequirement:()=>AchievementTimers.pain.check(PlayerProgress.eternityUnlocked()&&Notations.current.isPainful,600),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:17,name:"30 Lives",description:"Input the konami code."},{id:18,name:"Do you feel lucky? Well do ya punk?",get description(){return`You have a ${formatInt(1)}/${formatInt(1e5)} chance of getting this achievement every second.`}},{id:21,name:"Go study in real life instead",description:"Purchase the secret Time Study."},{id:22,name:"Deep fried",get description(){return`Buy ${formatInt(1e5)} Antimatter Galaxies in total while using emoji notation.`},checkRequirement:()=>player.requirementChecks.permanent.emojiGalaxies>=1e5,checkEvent:GAME_EVENT.GALAXY_RESET_AFTER},{id:23,name:"Stop right there criminal scum!",description:"Open the console."},{id:24,name:"Real news",description:"Click on a news ticker message that does something when you click on it."},{id:25,name:"Shhh... It's a secret",description:"Discover a secret theme."},{id:26,name:"You're a failure",get description(){return`Fail Eternity Challenges ${formatInt(10)} times without refreshing.
      What are you doing with your life...`},checkRequirement:function(){let t=0;return()=>++t>=10}(),checkEvent:GAME_EVENT.CHALLENGE_FAILED},{id:27,name:"It's not called matter dimensions is it?",description:"Get Infinite matter.",checkRequirement:()=>Currency.matter.gte(Decimal.NUMBER_MAX_VALUE),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:28,name:"Nice.",description:"Don't act like you don't know what you did."},{id:31,name:"You should download some more RAM",get description(){return`Set your update rate to ${formatInt(200)}ms.`}},{id:32,name:"Less than or equal to 0.001",get description(){return`Get a fastest infinity or eternity time of less than or equal to ${format(.001,3,3)} seconds.`},checkRequirement:()=>Time.bestInfinity.totalMilliseconds<=1||Time.bestEternity.totalMilliseconds<=1,checkEvent:[GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.ETERNITY_RESET_AFTER]},{id:33,name:"A sound financial decision",description:"Click on the button to purchase STD coins."},{id:34,name:"You do know how these work, right?",description:"Respec with an empty Time Study Tree."},{id:35,name:"Should we tell them about buy max...",get description(){return`Buy single Tickspeed upgrades ${formatInt(1e5)} times.`},checkRequirement:()=>player.requirementChecks.permanent.singleTickspeed>=1e5,checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:36,name:"While you were away... Nothing happened.",description:"See nothing happen while you were away."},{id:37,name:"You followed the instructions",description:"Follow instructions."},{id:38,name:"Knife's edge",description:"Close the Hard Reset modal after typing in the confirmation."},{id:41,name:"That dimension doesn’t exist",description:"Try to purchase the 9th dimension."},{id:42,name:"SHAME ON ME",description:"Try to use EC12 to speed up time."},{id:43,name:"A cacophonous chorus",description:"Have all equipped Glyphs be Music Glyphs.",checkRequirement:()=>Glyphs.active.length&&Glyphs.active.every(t=>Glyphs.isMusicGlyph(t)),checkEvent:GAME_EVENT.GLYPHS_EQUIPPED_CHANGED},{id:44,name:"Are you statisfied now?",get description(){return`Stare intently at the statistics tab for ${formatInt(15)} real-time minutes.`},checkRequirement:()=>AchievementTimers.stats.check(Tab.statistics.isOpen,900),checkEvent:GAME_EVENT.GAME_TICK_AFTER},{id:45,name:"This dragging is dragging on",description:"Drag the Perks around for a minute.",checkRequirement:()=>player.requirementChecks.permanent.perkTreeDragging++/100>=60},{id:46,name:"For a rainy day",description:"Store a day of real time."},{id:47,name:"ALT+",description:"Hide every possible tab."},{id:48,name:"Stack overflow",description:"Have more Automator errors than lines."}],a9={normal:r9,secret:s9},o9=[{name:"antimatter",isUnlocked:()=>!0},{name:"dimensionBoosts",isUnlocked:()=>!0},{name:"antimatterGalaxies",reference:["galaxies"],isUnlocked:()=>!0},{name:"infinities",isUnlocked:()=>PlayerProgress.infinityUnlocked()},{name:"infinityPoints",isUnlocked:()=>PlayerProgress.infinityUnlocked()},{name:"replicanti",reference:["replicanti","amount"],isUnlocked:()=>PlayerProgress.replicantiUnlocked()||PlayerProgress.eternityUnlocked()},{name:"replicantiGalaxies",reference:["replicanti","galaxies"],isUnlocked:()=>PlayerProgress.replicantiUnlocked()||PlayerProgress.eternityUnlocked()},{name:"eternities",isUnlocked:()=>PlayerProgress.eternityUnlocked()},{name:"eternityPoints",isUnlocked:()=>PlayerProgress.eternityUnlocked()},{name:"tachyonParticles",reference:["dilation","tachyonParticles"],isUnlocked:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked()},{name:"dilatedTime",reference:["dilation","dilatedTime"],isUnlocked:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked()},{name:"timeTheorems",reference:["timestudy","theorem"],isUnlocked:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked()},{name:"tachyonGalaxies",reference:["dilation","totalTachyonGalaxies"],isUnlocked:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked()},{name:"achievementAmount",reference:["achievementBits"],applyFn:t=>t.map(e=>countValuesFromBitmask(e)).sum(),isUnlocked:()=>PlayerProgress.realityUnlocked()},{name:"realities",isUnlocked:()=>PlayerProgress.realityUnlocked()},{name:"realityMachines",reference:["reality","realityMachines"],isUnlocked:()=>PlayerProgress.realityUnlocked()},{name:"blackHole",isUnlocked:()=>BlackHole(1).isUnlocked,appearsInAwayModal:!1},{name:"firstBlackHole",awayOption:"blackHole",reference:["blackHole","0","activations"],isUnlocked:()=>BlackHole(1).isUnlocked,classObjectReference:"black-hole",showOption:!1},{name:"secondBlackHole",awayOption:"blackHole",reference:["blackHole","1","activations"],isUnlocked:()=>BlackHole(2).isUnlocked,classObjectReference:"black-hole",showOption:!1},{name:"relicShards",reference:["celestials","effarig","relicShards"],isUnlocked:()=>TeresaUnlocks.effarig.canBeApplied},{name:"celestialMemories",isUnlocked:()=>VUnlocks.raUnlock.isUnlocked,appearsInAwayModal:!1},{name:"teresaMemories",awayOption:"celestialMemories",reference:["celestials","ra","pets","teresa","memories"],isUnlocked:()=>Ra.pets.teresa.isUnlocked&&!Ra.pets.teresa.isCapped,showOption:!1},{name:"effarigMemories",awayOption:"celestialMemories",reference:["celestials","ra","pets","effarig","memories"],isUnlocked:()=>Ra.pets.effarig.isUnlocked&&!Ra.pets.effarig.isCapped,showOption:!1},{name:"enslavedMemories",forcedName:"Nameless Memories",awayOption:"celestialMemories",reference:["celestials","ra","pets","enslaved","memories"],isUnlocked:()=>Ra.pets.enslaved.isUnlocked&&!Ra.pets.enslaved.isCapped,showOption:!1},{name:"vMemories",awayOption:"celestialMemories",reference:["celestials","ra","pets","v","memories"],isUnlocked:()=>Ra.pets.v.isUnlocked&&!Ra.pets.v.isCapped,showOption:!1},{name:"imaginaryMachines",reference:["reality","imaginaryMachines"],isUnlocked:()=>MachineHandler.isIMUnlocked},{name:"darkMatter",reference:["celestials","laitela","darkMatter"],isUnlocked:()=>Laitela.isUnlocked},{name:"darkEnergy",reference:["celestials","laitela","darkEnergy"],isUnlocked:()=>Laitela.isUnlocked},{name:"singularities",reference:["celestials","laitela","singularities"],isUnlocked:()=>Laitela.isUnlocked},{name:"realityShards",reference:["celestials","pelle","realityShards"],isUnlocked:()=>Pelle.isDoomed}],l9=[{name:"Antimatter Dimensions",id:0,requiredStage:PROGRESS_STAGE.PRE_INFINITY,description:`Every Antimatter Dimension continuously produces Dimensions of the next tier down. The lowest
      Antimatter Dimension produces antimatter.`},{name:"Tickspeed Upgrades",id:1,openH2pEntry:"Tickspeed",requiredStage:PROGRESS_STAGE.PRE_INFINITY,description:`Tickspeed Upgrades make Antimatter Dimensions produce other Antimatter Dimensions or antimatter
      as if time were passing faster.`},{name:"Autobuyers",id:2,requiredStage:PROGRESS_STAGE.PRE_INFINITY,description:`Autobuyers are a built-in feature to the game which purchases upgrades for your Antimatter
      Dimensions automatically when you can afford them.`},{name:"Dimension Boosts",id:3,requiredStage:PROGRESS_STAGE.PRE_INFINITY,description:`Dimension Boosts are gained by resetting all your Antimatter Dimensions and tickspeed after
      reaching a certain amount of the highest available Antimatter Dimension. They provide a multiplier to your
      Antimatter Dimensions.`},{name:"Antimatter Galaxies",id:4,requiredStage:PROGRESS_STAGE.PRE_INFINITY,description:`Antimatter Galaxies are gained by resetting your Antimatter Dimensions and Dimension Boosts. They
      improve the effectiveness of your Tickspeed Upgrades in a compounding way.`},{name:"Infinity",id:5,requiredStage:PROGRESS_STAGE.EARLY_INFINITY,description:()=>`Infinity is the first main reset layer. Reaching ${format(Number.MAX_VALUE,2)} antimatter
      allows you to reset everything up to this point in exchange for unlocking new content and resources.`},{name:"Infinity Points",id:6,openH2pEntry:"Infinity",requiredStage:PROGRESS_STAGE.EARLY_INFINITY,description:`Infinity Points are the primary resource after completing your first Infinity. They can be spent on
      features which persist through Infinity resets.`},{name:"Normal Challenges",id:7,openH2pEntry:"Normal Challenges",requiredStage:PROGRESS_STAGE.EARLY_INFINITY,description:()=>`Challenges require you to reach ${format(Number.MAX_VALUE,2)} antimatter under more difficult
      conditions. Completing challenges allows you to upgrade your Autobuyers.`},{name:"Break Infinity",id:8,requiredStage:PROGRESS_STAGE.BREAK_INFINITY,description:()=>`Upgrading your Big Crunch Autobuyer to the maximum allows you to surpass
      ${format(Number.MAX_VALUE,2)} antimatter, giving increasing amounts of Infinity Points with more antimatter.`},{name:"Infinity Dimensions",id:9,requiredStage:PROGRESS_STAGE.BREAK_INFINITY,description:`Infinity Dimensions Produce in a cascading fashion like Antimatter Dimensions. The lowest tier of
      Infinity Dimension produces Infinity Power, which applies a large multiplier to all Antimatter Dimensions.`},{name:"Infinity Challenges",id:10,requiredStage:PROGRESS_STAGE.BREAK_INFINITY,description:()=>`Infinity Challenges are new challenges with an antimatter goal above
      ${format(Number.MAX_VALUE,2)}. Completing them rewards upgrades and production boosts.`},{name:"Replicanti",id:11,requiredStage:PROGRESS_STAGE.REPLICANTI,description:()=>`Replicanti is a resource which produces itself over time, giving a multiplier to all
      Infinity Dimensions. At ${format(Number.MAX_VALUE,2)} Replicanti, they can be reset to ${formatInt(1)} for an
      additional Galaxy which does not increase the cost of Antimatter Galaxies. They also reset after every Infinity.`},{name:"Eternity",id:12,requiredStage:PROGRESS_STAGE.EARLY_ETERNITY,description:()=>`Eternity is the second main reset layer. Reaching ${format(Number.MAX_VALUE,2)} Infinity Points
      allows you to reset everything up to this point for access to new content and resources.`},{name:"Eternity Points",id:13,openH2pEntry:"Eternity",requiredStage:PROGRESS_STAGE.EARLY_ETERNITY,description:`Eternity Points are the primary resource after completing your first Eternity, and scale based on your
      Infinity Points at the time you complete the Eternity.`},{name:"Time Studies",id:14,requiredStage:PROGRESS_STAGE.EARLY_ETERNITY,description:`Time Studies are a set of upgrades akin to a skill tree, and can be freely re-allocated after every
      Eternity with no resource loss. Some sections of the tree have restrictions which forbid you from choosing
      particular studies simultaneously.`},{name:"Eternity Milestones",id:15,requiredStage:PROGRESS_STAGE.EARLY_ETERNITY,description:`Eternity Milestones are forms of built-in automation and convenience which are unlocked simply by
      completing more Eternities. Unlocking them does not require spending any resources.`},{name:"Time Dimensions",id:16,requiredStage:PROGRESS_STAGE.EARLY_ETERNITY,description:`Time Dimensions also produce each other in a cascading manner, with the lowest tier producing Time
      Shards. Time Shards give you additional Tickspeed Upgrades which do not increase the cost of the Tickspeed
      Upgrades purchased with antimatter.`},{name:"Eternity Challenges",id:17,requiredStage:PROGRESS_STAGE.ETERNITY_CHALLENGES,description:`Eternity Challenges are modified Eternities with an Infinity Point goal which must be reached for
      completion. They can be completed up to five times, getting more difficult each repetition in exchange for
      increasingly powerful rewards.`},{name:"Time Dilation",id:18,requiredStage:PROGRESS_STAGE.EARLY_DILATION,description:()=>`Time Dilation is a modified Eternity where tickspeed and all Dimension multipliers are
      severely reduced. Completing Dilated Eternities gives Tachyon Particles.`},{name:"Tachyon Particles",id:19,openH2pEntry:"Time Dilation",requiredStage:PROGRESS_STAGE.EARLY_DILATION,description:()=>`Tachyon Particles are a resource which cannot be farmed and require you to get a higher amount
      of antimatter in a Dilated Eternity in order to increase your amount. Tachyon Particles produce Dilated Time.`},{name:"Reality",id:20,requiredStage:PROGRESS_STAGE.EARLY_REALITY,description:()=>`Reality is the third and final main reset layer. Reaching ${format(L.E4000)} Eternity Points
      gives you the option to reset everything up to this point in exchange for unlocking new content and gaining
      access to new resources.`},{name:"Reality Machines",id:21,openH2pEntry:"Reality",requiredStage:PROGRESS_STAGE.EARLY_REALITY,description:`Reality Machines are the primary resource after completing your first Reality. They are given based
      on Eternity Points at the time of completing a Reality.`},{name:"Perks",id:22,requiredStage:PROGRESS_STAGE.EARLY_REALITY,description:`Perks are unlockable features similar to Eternity Milestones which primarily focus on convenience and
      automation. They are purchased using Perk Points, which are gained after every Reality.`},{name:"Glyphs",id:23,requiredStage:PROGRESS_STAGE.EARLY_REALITY,description:`Glyphs are equippable upgrades which can only be unequipped between Realities. Every Reality you are
      allowed to choose one of multiple new random Glyphs to receive; the average quality of your available choices
      is determined by how high some of your resources reached in that Reality.`},{name:"Automator",id:24,openH2pEntry:"Automator Overview",requiredStage:PROGRESS_STAGE.EARLY_REALITY,description:`The Automator is a built-in feature that uses a scripting language that allows you to eventually
      finish Realities completely hands-off with enough upgrades and perks.`},{name:"Black Hole",id:25,requiredStage:PROGRESS_STAGE.EARLY_REALITY,description:`The Black Hole runs the entire game faster in a periodic cycle. This affects everything in the game up
      to this point and will give similar results to leaving the game open for an equivalent amount of time.`},{name:"Teresa",id:26,requiredStage:PROGRESS_STAGE.TERESA,description:`Teresa is the first Celestial, who has a more difficult Reality which gives a massive boost to Glyph
      Sacrifice depending upon completion. They unlock upgrades which focus on testing and automating Realities more
      easily.`},{name:"Effarig",id:27,requiredStage:PROGRESS_STAGE.EFFARIG,description:`Effarig is the second Celestial, whose Reality limits your Glyphs and has scaling nerfs but gives
      rewards for each new reset layer reached. They unlock upgrades which focus on automatically selecting and
      filtering the large number of Glyphs you are receiving, purchased with a new resource called Relic Shards.`},{name:"The Nameless Ones",id:28,openH2pEntry:"Nameless Ones",requiredStage:PROGRESS_STAGE.ENSLAVED,description:`The Nameless Ones are the third Celestial, whose Reality is extremely punishing with a long list of
      nerfs, but unlocks Tesseracts for those who can figure out how to prevail. They also modify your Black Hole to
      allow it to store time.`},{name:"Stored Time",id:29,openH2pEntry:"Nameless Ones",requiredStage:PROGRESS_STAGE.ENSLAVED,description:`Your Black Hole has the ability to store time in two ways. Charging it allows you to hold on to
      sped-up time and release it later as a single skip-forward burst. Storing real time lets you use actual time
      to simulate Realities (giving you the resources of that Reality but multiplied), or as a stand-in for
      offline progress.`},{name:"Tesseracts",id:30,requiredStage:PROGRESS_STAGE.ENSLAVED,description:`Infinity Dimensions cannot be purchased indefinitely and all but the 8th have a hard limit for how
      many times they can be purchased. Each Tesseract permanently increases this limit by a large amount.`},{name:"V",id:31,requiredStage:PROGRESS_STAGE.V,description:`V is the fourth Celestial, with a modified Reality which is similar to Teresa's Reality but only gives
      rewards by reaching certain milestones of resources within. They give a new resource called Space Theorems, which
      allow you to purchase additional Time Studies without path restrictions.`},{name:"Ra",id:32,requiredStage:PROGRESS_STAGE.RA,description:`Ra is the fifth Celestial, with a modified Reality which produces a resource called Memory Chunks
      based on your resource totals within. They focus highly on taking older upgrades and themes from the previous
      four Celestials and improving upon them, as well as filling out some final gaps in automation and convenience.`},{name:"Memories",id:33,openH2pEntry:"Ra",requiredStage:PROGRESS_STAGE.RA,description:`Ra has the previous four Celestials under their control, producing Memories over time based on Memory
      Chunk count. These Memories are used to level up the previous Celestials, providing upgrades when certain levels
      are reached.`},{name:"Charged Infinity Upgrades",id:34,openH2pEntry:"Ra",requiredStage:PROGRESS_STAGE.RA,description:`Teresa's Memories allow you to charge your Infinity Upgrades, maintaining a similar effect but
      strengthening them significantly. Which upgrades are charged can only be changed between Realities.`},{name:"Glyph Alchemy",id:35,requiredStage:PROGRESS_STAGE.RA,description:`Effarig's Memories unlock Glyph Alchemy, which gives many minor boosts using a modified version of
      Glyph Sacrifice. The resources gained from giving up Glyphs in this way must be combined together in reactions
      in order to fully upgrade their effects.`},{name:"Amplified Black Hole",id:36,openH2pEntry:"Ra",requiredStage:PROGRESS_STAGE.RA,description:`Nameless's Memories amplify charging so that the amount of game time stored is larger than the actual
      game time elapsed. Discharging can now also be done repeatedly and automatically.`},{name:"Harder V",id:37,openH2pEntry:"Ra",requiredStage:PROGRESS_STAGE.RA,description:`V's Memories unlocks a modified version of V's original Reality with even harder goals and a new set
      of Time Studies called Triad Studies.`},{name:"Imaginary Machines",id:38,requiredStage:PROGRESS_STAGE.IMAGINARY_MACHINES,description:()=>`Imaginary Machines are a new resource unlocked when reaching ${format(L.E1000)} Reality
      Machines. They are produced passively up to a cap determined by how many Reality Machines you would have gotten
      in your farthest Reality ever.`},{name:"Lai'tela",id:39,requiredStage:PROGRESS_STAGE.LAITELA,description:`Lai'tela is the sixth Celestial, whose Reality has a modified completion condition and gives a
      scaling reward based on how quickly you can reach it. They unlock new features largely related to a resource
      called Dark Matter.`},{name:"Continuum",id:40,requiredStage:PROGRESS_STAGE.LAITELA,description:`Continuum is a modified type of production which allows your Antimatter Dimensions to produce as if
      they could purchase fractional amounts of upgrades, without actually purchasing them.`},{name:"Dark Matter Dimensions",id:41,openH2pEntry:"Lai'tela",requiredStage:PROGRESS_STAGE.LAITELA,description:`Dark Matter Dimensions are cascading production which operate on a tick-based system instead of
      continuously. The lowest tier produces Dark Matter and all tiers produce Dark Energy.`},{name:"Dimension Reset Mechanics",id:42,openH2pEntry:"Lai'tela",requiredStage:PROGRESS_STAGE.LAITELA,description:`Dark Matter Dimensions can be reset in two ways. Annihilation resets all your Dimensions in exchange
      for a permanent multiplier to all Dark Matter Dimensions. Ascension increases production but resets the interval
      of a single Dimension.`},{name:"Singularities",id:43,requiredStage:PROGRESS_STAGE.LAITELA,description:`Dark Energy can be used to produce Singularities, which give boosts based on their total amount.
      When producing Singularities, any extra Dark Energy above the condensing threshold is wasted.`},{name:"Pelle",id:44,requiredStage:PROGRESS_STAGE.PELLE,description:`Pelle is the seventh and final Celestial, who permanently Dooms your game, throwing you into a very
      difficult modified Reality which you cannot escape.`},{name:"Armageddon",id:45,openH2pEntry:"Pelle",requiredStage:PROGRESS_STAGE.PELLE,description:`Armageddon is a Pelle-specific reset which you can perform at any time. This resets your progress to
      the beginning of the Doomed Reality, but gives Remnants which produce Reality Shards.`},{name:"Pelle Strikes and Rifts",id:46,openH2pEntry:"Pelle Strikes",requiredStage:PROGRESS_STAGE.PELLE,description:`Upon reaching certain progress milestones within Pelle, a Strike may occur which permanently applies
      another nerf to the Doomed Reality. Accompanying every Strike is a Rift, which is a mechanic which lets you drain
      a different resource in exchange for a boost. These are permanent and remain unlocked after Armageddon.`}],c9={power:{id:ALCHEMY_RESOURCE.POWER,name:"Power",symbol:"Ω",isBaseResource:!0,effect:t=>1+t/2e5,tier:1,uiOrder:1,unlockedAt:2,description:"provides a power to Antimatter Dimensions",formatEffect:t=>`Antimatter Dimension multipliers ${formatPow(t,4,4)}`},infinity:{id:ALCHEMY_RESOURCE.INFINITY,name:"Infinity",symbol:"∞",isBaseResource:!0,effect:t=>1+t/2e5,tier:1,uiOrder:2,unlockedAt:3,description:"provides a power to Infinity Dimensions",formatEffect:t=>`Infinity Dimension multipliers ${formatPow(t,4,4)}`},time:{id:ALCHEMY_RESOURCE.TIME,name:"Time",symbol:"Δ",isBaseResource:!0,effect:t=>1+t/2e5,tier:1,uiOrder:3,unlockedAt:4,description:"provides a power to Time Dimensions",formatEffect:t=>`Time Dimension multipliers ${formatPow(t,4,4)}`},replication:{id:ALCHEMY_RESOURCE.REPLICATION,name:"Replication",symbol:"Ξ",isBaseResource:!0,effect:t=>Decimal.pow10(t/1e3),tier:1,uiOrder:4,unlockedAt:5,description:"increases Replication speed",formatEffect:t=>`Replication speed is increased by ${formatX(t,2,2)}`},dilation:{id:ALCHEMY_RESOURCE.DILATION,name:"Dilation",symbol:"Ψ",isBaseResource:!0,effect:t=>Decimal.pow10(t/2e3),tier:1,uiOrder:5,unlockedAt:6,description:"increases Dilated Time production",formatEffect:t=>`Dilated Time production is increased by ${formatX(t,2,2)}`},cardinality:{id:ALCHEMY_RESOURCE.CARDINALITY,name:"Cardinality",symbol:"α",isBaseResource:!1,effect:t=>1+.2/(1+t/2e4),tier:2,uiOrder:3,unlockedAt:8,description:"reduces Replicanti slowdown when above the cap",formatEffect:t=>`Replicanti interval increases slower ${formatX(1.2,1,1)} ➜
      ${formatX(t,4,4)} per ${format(Number.MAX_VALUE,2)}`,reagents:[{resource:ALCHEMY_RESOURCE.TIME,amount:8},{resource:ALCHEMY_RESOURCE.REPLICATION,amount:7}]},eternity:{id:ALCHEMY_RESOURCE.ETERNITY,name:"Eternity",symbol:"τ",isBaseResource:!1,effect:t=>1+t/15e3,tier:2,uiOrder:2,unlockedAt:9,description:"provides a power to Eternity generation",formatEffect:t=>`Eternity generation ${formatPow(t,4,4)}`,reagents:[{resource:ALCHEMY_RESOURCE.TIME,amount:11},{resource:ALCHEMY_RESOURCE.INFINITY,amount:4}]},dimensionality:{id:ALCHEMY_RESOURCE.DIMENSIONALITY,name:"Dimensionality",symbol:"ρ",isBaseResource:!1,effect:t=>Decimal.pow10(5*t),tier:2,uiOrder:1,unlockedAt:10,description:"provides a large multiplier to all Dimensions",formatEffect:t=>`All Dimensions ${formatX(t)}`,reagents:[{resource:ALCHEMY_RESOURCE.POWER,amount:10},{resource:ALCHEMY_RESOURCE.INFINITY,amount:5}]},inflation:{id:ALCHEMY_RESOURCE.INFLATION,name:"Inflation",symbol:"λ",isBaseResource:!1,effect:t=>Decimal.pow10(6e9-3e5*t),tier:2,uiOrder:5,unlockedAt:11,description:"provides an additional power for very large multipliers",formatEffect:t=>`All Antimatter Dimension multipliers are ${formatPow(1.05,2,2)}
      if they are above ${format(t)} `,reagents:[{resource:ALCHEMY_RESOURCE.POWER,amount:9},{resource:ALCHEMY_RESOURCE.DILATION,amount:6}]},alternation:{id:ALCHEMY_RESOURCE.ALTERNATION,name:"Alternation",symbol:"ω",isBaseResource:!1,effect:t=>t/2e5,tier:2,uiOrder:4,unlockedAt:12,description:"increases the strength of Tachyon Galaxies based on Replicanti",formatEffect:t=>`Tachyon Galaxies are ${formatPercents(t,2,2)} stronger
      per ${format(L.E1E6)} Replicanti`,reagents:[{resource:ALCHEMY_RESOURCE.REPLICATION,amount:5},{resource:ALCHEMY_RESOURCE.DILATION,amount:10}]},effarig:{id:ALCHEMY_RESOURCE.EFFARIG,name:"Effarig",symbol:"Ϙ",isBaseResource:!0,effect:t=>Math.pow(10,t/2500),tier:1,uiOrder:1.5,unlockedAt:7,description:"increases Relic Shard gain",formatEffect:t=>`Relic Shard gain is multiplied ${formatX(t,2,2)}`},synergism:{id:ALCHEMY_RESOURCE.SYNERGISM,name:"Synergism",symbol:"π",isBaseResource:!1,effect:t=>{const e=.3+1.3*Math.sqrt(t/25e3);return Achievement(175).isUnlocked?e:Math.min(e,1)},tier:3,uiOrder:2,unlockedAt:13,description:"increases the yield of Alchemy Reactions",formatEffect(t){return`Alchemy Reaction efficiency ${formatPercents(.3)} ➜ ${formatPercents(t,2,2)}
        ${!Achievement(175).isUnlocked&&t>=1?" (Capped)":""}`},reagents:[{resource:ALCHEMY_RESOURCE.EFFARIG,amount:3},{resource:ALCHEMY_RESOURCE.REPLICATION,amount:16},{resource:ALCHEMY_RESOURCE.INFINITY,amount:14}]},momentum:{id:ALCHEMY_RESOURCE.MOMENTUM,name:"Momentum",symbol:"μ",isBaseResource:!1,effect:t=>1+t/125e3,tier:3,uiOrder:3,unlockedAt:15,description:"provides a power to all Dimensions that permanently grows over time",formatEffect:t=>`All Dimensions ${formatPow(Ra.momentumValue,4,4)}, increasing by
      ${format(.005*Achievement(175).effectOrDefault(1),3,3)}
      per real-time hour after the resource is unlocked, up to a maximum of ${formatPow(t,4,4)}`,reagents:[{resource:ALCHEMY_RESOURCE.EFFARIG,amount:11},{resource:ALCHEMY_RESOURCE.POWER,amount:4},{resource:ALCHEMY_RESOURCE.TIME,amount:20}]},decoherence:{id:ALCHEMY_RESOURCE.DECOHERENCE,name:"Decoherence",symbol:"ξ",isBaseResource:!1,effect:t=>.15*Math.sqrt(t/25e3),tier:3,uiOrder:4,unlockedAt:14,description:"gives all basic Alchemy Resources upon refinement",formatEffect:t=>`Refined Glyphs also give ${formatPercents(t,2)} of their value to all other base resources`,reagents:[{resource:ALCHEMY_RESOURCE.EFFARIG,amount:13},{resource:ALCHEMY_RESOURCE.ALTERNATION,amount:8}]},exponential:{id:ALCHEMY_RESOURCE.EXPONENTIAL,name:"Exponential",symbol:"Γ",isBaseResource:!1,effect:t=>10*Math.pow(t/1e4,2),tier:4,uiOrder:2,unlockedAt:18,description:"multiplies Infinity Points based on Replicanti",formatEffect:t=>`Infinity Points multiplied by Replicanti${formatPow(t,2,3)}`,reagents:[{resource:ALCHEMY_RESOURCE.INFLATION,amount:18},{resource:ALCHEMY_RESOURCE.SYNERGISM,amount:3}]},force:{id:ALCHEMY_RESOURCE.FORCE,name:"Force",symbol:"Φ",isBaseResource:!1,effect:t=>5*t,tier:4,uiOrder:2,unlockedAt:17,description:"multiplies Antimatter Dimensions based on Reality Machines",formatEffect:t=>`Multiply Antimatter Dimensions by Reality Machines${formatPow(t,2,2)}`,reagents:[{resource:ALCHEMY_RESOURCE.DIMENSIONALITY,amount:7},{resource:ALCHEMY_RESOURCE.MOMENTUM,amount:8}]},uncountability:{id:ALCHEMY_RESOURCE.UNCOUNTABILITY,name:"Uncountability",symbol:"Θ",isBaseResource:!1,effect:t=>160*Math.sqrt(t/25e3),tier:4,uiOrder:3,unlockedAt:19,description:"passively generates Realities and Perk Points",formatEffect:t=>`Generate ${format(t,2,2)} Realities and Perk Points per second`,reagents:[{resource:ALCHEMY_RESOURCE.INFINITY,amount:20},{resource:ALCHEMY_RESOURCE.EFFARIG,amount:6},{resource:ALCHEMY_RESOURCE.CARDINALITY,amount:16}]},boundless:{id:ALCHEMY_RESOURCE.BOUNDLESS,name:"Boundless",symbol:"Π",isBaseResource:!1,effect:t=>t/8e4,tier:4,uiOrder:1,unlockedAt:20,description:"makes Tesseracts stronger",formatEffect:t=>`Tesseracts are +${formatPercents(t,2,2)} stronger`,reagents:[{resource:ALCHEMY_RESOURCE.ETERNITY,amount:13},{resource:ALCHEMY_RESOURCE.INFLATION,amount:18}]},multiversal:{id:ALCHEMY_RESOURCE.MULTIVERSAL,name:"Multiversal",symbol:"Σ",isBaseResource:!1,effect:t=>32*Math.pow(t/25e3,2),tier:4,uiOrder:5,unlockedAt:16,description:"makes each Reality simulate more Realities",formatEffect:t=>`Each Reality simulates ${format(t,2,3)} additional Realities, giving all
      the same rewards as if it was amplified`,reagents:[{resource:ALCHEMY_RESOURCE.ALTERNATION,amount:16},{resource:ALCHEMY_RESOURCE.DECOHERENCE,amount:3}]},unpredictability:{id:ALCHEMY_RESOURCE.UNPREDICTABILITY,name:"Unpredictability",symbol:"Λ",isBaseResource:!1,effect:t=>t/(10714.28+t),tier:4,uiOrder:4,unlockedAt:21,description:"makes each Alchemy Reaction have a chance to happen twice",formatEffect:t=>`Any Alchemy Reaction has a ${formatPercents(t,2,2)}
      chance of triggering again`,reagents:[{resource:ALCHEMY_RESOURCE.EFFARIG,amount:15},{resource:ALCHEMY_RESOURCE.DECOHERENCE,amount:3},{resource:ALCHEMY_RESOURCE.SYNERGISM,amount:10}]},reality:{id:ALCHEMY_RESOURCE.REALITY,name:"Reality",symbol:"Ϟ",isBaseResource:!1,effect:t=>Math.floor(t),tier:5,unlockedAt:25,description:"can be consumed to create Reality Glyphs",formatEffect:t=>`Consume all Reality Resource to create a level ${formatInt(t)} Reality Glyph`,reagents:[{resource:ALCHEMY_RESOURCE.EXPONENTIAL,amount:1},{resource:ALCHEMY_RESOURCE.FORCE,amount:1},{resource:ALCHEMY_RESOURCE.UNCOUNTABILITY,amount:1},{resource:ALCHEMY_RESOURCE.BOUNDLESS,amount:1},{resource:ALCHEMY_RESOURCE.MULTIVERSAL,amount:1},{resource:ALCHEMY_RESOURCE.UNPREDICTABILITY,amount:1}]}};function u9(t){let e=Math.pow(t%97,4.3)*232344573;const i=15485863,n=521791;e=e*i%n;for(let r=0;r<t*t%90+90;r++)e=e*i%n;return e/n}function d9(){return String.fromCharCode(Math.floor(Math.random()*50)+192)}const Xn={wordCycle(t,e=!1){const i=t.length,n=Math.floor(Date.now()/250)%(i*5),r=Date.now()/250%(i*5)%5,s=Math.floor(n/5);let a=t[s];if(r<.6?a=this.blendWords(t[(s+t.length-1)%t.length],t[s],(r+.6)/1.2):r>4.4&&(a=this.blendWords(t[s],t[(s+1)%t.length],(r-4.4)/1.2)),a=this.randomCrossWords(a,.1*Math.pow(r-2.5,4)-.6),e)return a;const c=(Math.max(...t.map(d=>d.length))-a.length)/2;return" ".repeat(Math.ceil(c))+a+" ".repeat(Math.floor(c))},randomCrossWords(t,e=.7){if(e<=0)return t;const i=t.split("");for(let n=0;n<i.length*e;n++){const r=Math.floor(u9(Math.floor(Date.now()/500)%964372+1.618*n)*i.length);i[r]=d9()}return i.join("")},blendWords(t,e,i){return i<=0?t:i>=1?e:t.substring(0,t.length*(1-i))+e.substring(e.length*(1-i),e.length)}};function R1(t){return Math.pow(t,10)}function gp(t){return VUnlocks.vAchievementUnlock.isUnlocked?1:Object.values(GameDatabase.celestials.v.mainUnlock).find(i=>i.id===t).progress()}function vp(t,e){const i=Object.values(GameDatabase.celestials.v.mainUnlock).find(n=>n.id===e);return t>=1?`${i.name} condition for V`:`Reach ${i.format(i.resource())} / ${i.format(i.requirement)} ${i.name}.`}function Jo(t,e){const i=new Vector(750,550),n=(.7-.4*t)*Math.PI;return new Vector(e*Math.cos(n),-e*Math.sin(n)).plus(i)}function h9(t,e,i){return function(){const r=(.4*t+.5)*Math.PI,s=r+2,a=LogarithmicSpiral.fromPolarEndpoints(Jo(t+.5,75),r,75,s,4/3*75),o=a.angleFromRadius(75+.01)-r,c=s-a.angleFromRadius(4/3*75);return{pathStart:r,pathEnd:s,path:a,pathPadStart:o,pathPadEnd:c,fill:e,drawOrder:i?nl.NODE_OVERLAYS:void 0,noBG:i}}()}const Ka={LOCKED:0,FILL:1,DRAIN:2,OVERFILL:3};function f_(t){const e=PelleRifts[t.toLowerCase()];return e.canBeApplied?!Pelle.hasGalaxyGenerator||e.reducedTo===1?Ka.FILL:e.reducedTo<1?Ka.DRAIN:Ka.OVERFILL:Ka.LOCKED}const nl={NODE_BG:0,CONNECTORS:1e3,NODES:2e3,NODE_OVERLAYS:3e3,CANVAS_OVERLAY:4e3},Re=Object.freeze({teresa:new Vector(100,100),teresaPerkPointShop:new Vector(0,-50),effarigShop:new Vector(300,0),effarigRealityUnlock:new Vector(400,50),effarigNode:new Vector(550,25),enslavedReality:new Vector(650,250),enslavedGlyphLevel:new Vector(650+75*Math.cos(Math.PI/180*-60),250+75*Math.sin(Math.PI/180*-60)),enslavedGlyphRarity:new Vector(650+75*Math.cos(Math.PI/180*120),250+75*Math.sin(Math.PI/180*120)),vUnlockAchievement:new Vector(400,350+50*Math.sqrt(3)),vAchievement0:new Vector(350,350),vAchievement1:new Vector(450,350),vAchievement2:new Vector(500,350+50*Math.sqrt(3)),vAchievement3:new Vector(450,350+100*Math.sqrt(3)),vAchievement4:new Vector(350,350+100*Math.sqrt(3)),vAchievement5:new Vector(300,350+50*Math.sqrt(3)),raReality:new Vector(400,200),raPetTeresa:new Vector(400+85*Math.sin(Math.PI/180*252),200+85*Math.cos(Math.PI/180*252)),raPetEffarig:new Vector(400+85*Math.sin(Math.PI/180*140),200+85*Math.cos(Math.PI/180*140)),raPetEnslaved:new Vector(400+85*Math.sin(Math.PI/180*78),200+85*Math.cos(Math.PI/180*78)),raPetV:new Vector(400+85*Math.sin(Math.PI/180*0),200+85*Math.cos(Math.PI/180*0)),laitelaFirstCenter:new Vector(150,450),laitelaFirstLeft:new Vector(100,500),laitelaFirstRight:new Vector(200,500),laitelaSecondCenter:new Vector(150,550),laitelaSecondLeft:new Vector(100,600),laitelaSecondRight:new Vector(200,600),laitelaThirdCenter:new Vector(150,650),pelleUnlock:new Vector(450,580),pelleAchievementRequirement:Jo(0,0),pelleVacuum:Jo(0,150),pelleDecay:Jo(1,150),pelleChaos:Jo(2,150),pelleRecursion:Jo(3,150),pelleParadox:Jo(4,150),pelleGalaxyGen:Jo(0,0)});function f9(t,e,i,n){let r,s,a,o,c,d,p;switch(n){case Ka.FILL:r=()=>f_(t)===Ka.FILL,s=()=>Math.clamp(.1+PelleRifts[t.toLowerCase()].realPercentage/.9,1e-6,1),a=()=>!1,o=()=>PelleRifts[t.toLowerCase()].realPercentage,c="c-celestial-nav__test-incomplete",d="crimson",p="crimson";break;case Ka.DRAIN:r=()=>f_(t)>=Ka.DRAIN,s=()=>Math.clamp(Math.sqrt(PelleRifts[t.toLowerCase()].reducedTo),1e-6,1),a=()=>f_(t)===Ka.DRAIN&&PelleRifts[t.toLowerCase()].reducedTo<1,o=()=>PelleRifts[t.toLowerCase()].reducedTo,c="c-celestial-nav__drained-rift",d="crimson",p="#550919";break;case Ka.OVERFILL:r=()=>f_(t)===Ka.OVERFILL,s=()=>Math.clamp(PelleRifts[t.toLowerCase()].percentage-1,1e-6,1),o=()=>PelleRifts[t.toLowerCase()].percentage,a=()=>!0,c=void 0,d="#ff7700",p="#ff9900";break}return{visible:()=>Pelle.isDoomed&&r(),complete:()=>s(),node:{clickAction:()=>Tab.celestials.pelle.show(!0),incompleteClass:c,position:Re[`pelle${t}`],fill:d,ring:{rMajor:8},forceLegend:()=>a(),legend:{text:()=>[`${formatPercents(o(),1)} ${Xn.wordCycle(PelleRifts[t.toLowerCase()].name)}`],angle:i,diagonal:30,horizontal:16}},connector:h9(e,p,n===Ka.OVERFILL)}}const p9=["fill","drain","overfill"],gx=["Vacuum","Decay","Chaos","Recursion","Paradox"],m9=[225,315,45,135,135],TG={};for(const t of p9)for(let e=0;e<gx.length;e++){const i=gx[e];TG[`pelle-${i}-${t}`]=f9(i,e,m9[e],Ka[t.toUpperCase()])}const y9={"teresa-base":{visible:()=>!0,complete:()=>1,node:{clickAction:()=>Tab.celestials.teresa.show(!0),completeClass:"c-celestial-nav__test-complete",incompleteClass:"c-celestial-nav__test-incomplete",position:Re.teresa,ring:{rMajor:78,rMinor:64},legend:{text:"Teresa",angle:135,diagonal:32,horizontal:16}}},"teresa-reality-unlock":{visible:()=>!0,complete:()=>TeresaUnlocks.run.canBeApplied?1:Decimal.pLog10(Teresa.pouredAmount)/Math.log10(TeresaUnlocks.run.price),node:{completeClass:"c-celestial-nav__test-complete",incompleteClass:"c-celestial-nav__test-incomplete",position:Re.teresa,ring:{rMajor:32,rMinor:22},legend:{hideWhenCompleted:!0,text:()=>{const t=Teresa.pouredAmount,e=TeresaUnlocks.run.price;return`Pour ${format(t,2)} / ${format(e,2)} RM`},angle:135,diagonal:16,horizontal:16}},connector:function(){const t=-Math.PI,e=Math.PI,i=LogarithmicSpiral.fromPolarEndpoints(Re.teresa,-Math.PI,69,Math.PI,26),n=i.angleFromRadius(61)-t,r=e-i.angleFromRadius(34);return{pathStart:t,pathEnd:e,path:i,pathPadStart:n,pathPadEnd:r}}()},"teresa-reality":{visible:()=>!0,complete:()=>Teresa.runCompleted?1:0,node:{clickAction:()=>Tab.celestials.teresa.show(!0),completeClass:"c-celestial-nav__test-complete",incompleteClass:"c-celestial-nav__test-incomplete",symbol:"Ϟ",position:Re.teresa,ring:{rMajor:16},alwaysShowLegend:!0,legend:{text:"Teresa's Reality",angle:-135,diagonal:96,horizontal:16}}},"teresa-pp-shop":{visible:()=>!0,complete:()=>TeresaUnlocks.shop.canBeApplied?1:Decimal.pLog10(Teresa.pouredAmount)/Math.log10(TeresaUnlocks.shop.price),node:{clickAction:()=>Tab.celestials.teresa.show(!0),completeClass:"c-celestial-nav__test-complete",incompleteClass:"c-celestial-nav__test-incomplete",position:Re.teresaPerkPointShop,ring:{rMajor:16,rMinor:0},legend:{text:t=>{if(t>=1)return"Teresa's Perk Point Shop";const e=Teresa.pouredAmount,i=TeresaUnlocks.shop.price;return["Teresa's Perk Point Shop",`Pour ${format(e,2)} / ${format(i,2)} Reality Machines`]},angle:-35,diagonal:16,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:LinearPath.connectCircles(Re.teresa,77,Re.teresaPerkPointShop,15),completeWidth:6,incompleteWidth:4}},"effarig-shop":{visible:()=>!0,complete:()=>TeresaUnlocks.effarig.canBeApplied?1:Decimal.pLog10(Teresa.pouredAmount)/Math.log10(TeresaUnlocks.effarig.price),node:{clickAction:()=>Tab.celestials.effarig.show(!0),completeClass:"c-celestial-nav__effarig",incompleteClass:"c-celestial-nav__test-incomplete",position:Re.effarigShop,ring:{rMajor:24},legend:{text:t=>{if(t>=1)return"Effarig's Shop";const e=Teresa.pouredAmount,i=TeresaUnlocks.effarig.price;return["Effarig",`Pour ${format(e,2)} / ${format(i,2)} Reality Machines`]},angle:-135,diagonal:16,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:LinearPath.connectCircles(Re.teresa,77,Re.effarigShop,23),fill:"url(#gradTeresaEffarig)"}},"effarig-reality-unlock":{visible:()=>TeresaUnlocks.effarig.canBeApplied,complete:()=>EffarigUnlock.run.isUnlocked?1:Math.clampMax(.999,Decimal.pLog10(Currency.relicShards.value)/Math.log10(EffarigUnlock.run.cost)),node:{clickAction:()=>Tab.celestials.effarig.show(!0),completeClass:"c-celestial-nav__effarig",incompleteClass:"c-celestial-nav__test-incomplete",position:Re.effarigRealityUnlock,ring:{rMajor:16},legend:{text:t=>{if(t>=1)return"Unlock Effarig's Reality";const e=Currency.relicShards.value,i=EffarigUnlock.run.cost;return["Unlock Effarig's Reality",`Reach ${format(e,2)} / ${format(i,2)} Relic Shards`]},angle:75,diagonal:40,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:LinearPath.connectCircles(Re.effarigShop,23,Re.effarigRealityUnlock,15),fill:"#d13737"}},"effarig-infinity":{visible:()=>EffarigUnlock.run.isUnlocked,complete:()=>EffarigUnlock.infinity.isUnlocked?1:Effarig.isRunning?Currency.antimatter.value.pLog10()/Decimal.NUMBER_MAX_VALUE.log10():0,node:{clickAction:()=>Tab.celestials.effarig.show(!0),completeClass:"c-celestial-nav__effarig",incompleteClass:"c-celestial-nav__test-incomplete",position:Re.effarigNode,ring:{rMajor:60,rMinor:52},legend:{text:t=>{if(t>=1)return"Effarig's Infinity";if(t===0)return"Unlock Effarig's Reality";const e=Effarig.isRunning?Currency.antimatter.value:0;return["Effarig's Infinity",`Reach ${format(e,2)} / ${format(Number.MAX_VALUE,2)}`,"Antimatter inside Effarig's Reality."]},angle:0,diagonal:100,horizontal:16},bgDrawOrder:nl.NODE_BG+750},connector:{pathStart:0,pathEnd:1,path:LinearPath.connectCircles(Re.effarigRealityUnlock,15,Re.effarigNode,59),fill:"#d13737"}},"effarig-eternity":{visible:()=>EffarigUnlock.infinity.isUnlocked,complete:()=>EffarigUnlock.eternity.isUnlocked?1:Effarig.isRunning?Currency.infinityPoints.value.pLog10()/Decimal.NUMBER_MAX_VALUE.log10():0,node:{clickAction:()=>Tab.celestials.effarig.show(!0),completeClass:"c-celestial-nav__effarig",incompleteClass:"c-celestial-nav__test-incomplete",fill:"#7131ec",position:Re.effarigNode,ring:{rMajor:40,rMinor:30},legend:{text:t=>{if(t>=1)return"Effarig's Eternity";const e=Effarig.isRunning?Currency.infinityPoints.value:0;return["Effarig's Eternity",`Reach ${format(e,2)} / ${format(Number.MAX_VALUE,2)}`,"Infinity Points inside Effarig's Reality."]},angle:-45,diagonal:16,horizontal:16}},connector:function(){const t=-Math.PI,e=0,i=LogarithmicSpiral.fromPolarEndpoints(new Vector(560,25),t,66,e,26),n=0,r=e-i.angleFromRadius(30);return{pathStart:t,pathEnd:e,path:i,pathPadStart:n,pathPadEnd:r,fill:"#d13737"}}()},"effarig-reality":{visible:()=>EffarigUnlock.eternity.isUnlocked,complete:()=>EffarigUnlock.reality.isUnlocked?1:Effarig.isRunning?Currency.eternityPoints.value.pLog10()/4e3:0,node:{clickAction:()=>Tab.celestials.effarig.show(!0),completeClass:"c-celestial-nav__effarig",incompleteClass:"c-celestial-nav__test-incomplete",fill:"#A101ec",position:new Vector(550,25),ring:{rMajor:20,rMinor:0},symbol:"Ϙ",alwaysShowLegend:!0,legend:{text:t=>{if(t>=1)return"Effarig's Reality";const e=Effarig.isRunning?Currency.eternityPoints.value:0,i=L.E4000;return["Effarig's Reality",`Reach ${format(e,2)} / ${format(i,2)}`,"Eternity Points inside Effarig's Reality."]},angle:-120,diagonal:82,horizontal:16}},connector:function(){const e=Math.PI,i=LogarithmicSpiral.fromPolarEndpoints(new Vector(558,25),0,26,e,24);return{pathStart:0,pathEnd:e,path:i,pathPadStart:0,pathPadEnd:0,fill:"#d13737"}}()},enslaved:{visible:()=>EffarigUnlock.eternity.isUnlocked,complete:()=>EffarigUnlock.eternity.isUnlocked?1:0,drawOrder:-1,node:{clickAction:()=>Tab.celestials.enslaved.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffa337",position:Re.enslavedReality,ring:{rMajor:80,rMinor:70,gapCenterDeg:15,gapDeg:200},alwaysShowLegend:!1,legend:{text:"Nameless",angle:-90,diagonal:20,horizontal:16}},connector:{pathStart:0,pathEnd:1,drawOrder:nl.NODE_BG+500,path:LinearPath.connectCircles(Re.effarigNode,39,Re.enslavedReality,79),fill:"url(#gradEffarigEnslaved)"}},"enslaved-unlock-glyph-level":{visible:()=>EffarigUnlock.eternity.isUnlocked,complete:()=>player.records.bestReality.glyphLevel/5e3,drawOrder:-1,node:{clickAction:()=>Tab.celestials.enslaved.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffa337",position:Re.enslavedGlyphLevel,ring:{rMajor:24,rMinor:16,gapCenterDeg:40,gapDeg:60,gapAngleDeg:0},legend:{text:t=>{if(t>=1)return"Glyph level chain has been broken";const e=5e3;return["Break a chain",`Reach Glyph level ${formatInt(Math.min(player.records.bestReality.glyphLevel,e))}/${formatInt(e)}`]},angle:-45,diagonal:16,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(new Vector(650-74*Math.sqrt(.75),250-74*.5),Re.enslavedGlyphLevel).trimEnd(23),fill:"#ffa337",completeWidth:6,incompleteWidth:4}},"enslaved-unlock-glyph-rarity":{visible:()=>EffarigUnlock.eternity.isUnlocked,complete:()=>strengthToRarity(player.records.bestReality.glyphStrength)/100,drawOrder:-1,node:{clickAction:()=>Tab.celestials.enslaved.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffa337",position:Re.enslavedGlyphRarity,ring:{rMajor:24,rMinor:16,gapCenterDeg:220,gapDeg:60,gapAngleDeg:0},legend:{text:t=>{if(t>=1)return"Glyph rarity chain has been broken";const e=100;return["Break a chain",`Reach Glyph rarity ${formatPercents(t*e/100,1)}/${formatPercents(e/100,1)}`]},angle:45,diagonal:32,horizontal:32}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.enslavedGlyphRarity,Re.enslavedGlyphLevel).trimStart(23).trimEnd(23),fill:"#ffa337",completeWidth:6,incompleteWidth:4}},"enslaved-reality":{visible:()=>EffarigUnlock.eternity.isUnlocked,complete:()=>Enslaved.isCompleted?1:Enslaved.isRunning?Currency.eternityPoints.value.pLog10()/4e3:0,node:{clickAction:()=>Tab.celestials.enslaved.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffa337",position:Re.enslavedReality,ring:{rMajor:80,rMinor:70,gapCenterDeg:195,gapDeg:200},alwaysShowLegend:!0,legend:{text:t=>{if(t>=1)return"The Nameless Ones' Reality";const e=Enslaved.isRunning?Currency.eternityPoints.value:0,i=L.E4000;return["The Nameless Ones' Reality",`Reach ${format(e,2)} / ${format(i,2)}`,"Eternity Points inside The Nameless Ones' Reality."]},angle:45,diagonal:16,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.enslavedGlyphRarity,new Vector(650+74*Math.sqrt(.75),250+74*.5)).trimStart(23),fill:"#ffa337"}},"v-unlock-achievement":{visible:()=>EffarigUnlock.reality.isUnlocked,complete:()=>Achievement(151).isUnlocked?1:player.requirementChecks.infinity.noAD8?player.galaxies/800:0,drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",symbol:"⌬",symbolOffset:"2",fill:"#ffe066",position:Re.vUnlockAchievement,ring:{rMajor:20},alwaysShowLegend:!0,legend:{text:t=>{if(t>=1)return"V's Reality";const i=player.requirementChecks.infinity.noAD8?player.galaxies:0;return["V's unlock Achievement",`Reach ${formatInt(i)} / ${formatInt(800)} Antimatter Galaxies without buying`,"8th Antimatter Dimensions in your current Infinity"]},angle:135,diagonal:60,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:LinearPath.connectCircles(Re.enslavedReality,79,Re.vUnlockAchievement,15),fill:"url(#gradEnslavedV)",completeWidth:6,incompleteWidth:4}},"v-unlock-1":{visible:()=>Achievement(151).isUnlocked||VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>gp(1),drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement1,ring:{rMajor:8},legend:{text:t=>vp(t,1),angle:-135,diagonal:50,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vUnlockAchievement,Re.vAchievement1),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-unlock-2":{visible:()=>Achievement(151).isUnlocked||VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>gp(2),drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement2,ring:{rMajor:8},legend:{text:t=>vp(t,2),angle:-45,diagonal:30,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vUnlockAchievement,Re.vAchievement2),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-unlock-3":{visible:()=>Achievement(151).isUnlocked||VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>gp(3),drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement3,ring:{rMajor:8},legend:{text:t=>vp(t,3),angle:45,diagonal:30,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vUnlockAchievement,Re.vAchievement3),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-unlock-4":{visible:()=>Achievement(151).isUnlocked||VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>gp(4),drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement4,ring:{rMajor:8},legend:{text:t=>vp(t,4),angle:135,diagonal:30,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vUnlockAchievement,Re.vAchievement4),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-unlock-5":{visible:()=>Achievement(151).isUnlocked||VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>gp(5),drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement5,ring:{rMajor:8},legend:{text:t=>vp(t,5),angle:-135,diagonal:30,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vUnlockAchievement,Re.vAchievement5),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-unlock-6":{visible:()=>Achievement(151).isUnlocked||VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>gp(6),drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement0,ring:{rMajor:8},legend:{text:t=>vp(t,6),angle:-135,diagonal:30,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vUnlockAchievement,Re.vAchievement0),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-achievement-0":{visible:()=>VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>VRunUnlocks.all[0].completions/6,drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement0,ring:{rMajor:8},legend:{text:t=>{const e=VRunUnlocks.all[0].config.name;if(t>=1)return`V-Achievement "${e}"`;const i=VRunUnlocks.all[0].completions;return["V-Achievement",`Reach ${formatInt(i)} / ${formatInt(6)} completions in ${e}.`]},angle:-135,diagonal:16,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vAchievement5,Re.vAchievement0),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-achievement-1":{visible:()=>VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>VRunUnlocks.all[1].completions/6,drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement1,ring:{rMajor:8},legend:{text:t=>{const e=VRunUnlocks.all[1].config.name;if(t>=1)return`V-Achievement "${e}"`;const i=VRunUnlocks.all[1].completions;return["V-Achievement",`Reach ${formatInt(i)} / ${formatInt(6)} completions in ${e}.`]},angle:20,diagonal:16,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vAchievement0,Re.vAchievement1),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-achievement-2":{visible:()=>VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>VRunUnlocks.all[2].completions/6,drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement2,ring:{rMajor:8},legend:{text:t=>{const e=VRunUnlocks.all[2].config.name;if(t>=1)return`V-Achievement "${e}"`;const i=VRunUnlocks.all[2].completions;return["V-Achievement",`Reach ${formatInt(i)} / ${formatInt(6)} completions in ${e}.`]},angle:315,diagonal:25,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vAchievement1,Re.vAchievement2),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-achievement-3":{visible:()=>VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>VRunUnlocks.all[3].completions/6,drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement3,ring:{rMajor:8},legend:{text:t=>{const e=VRunUnlocks.all[3].config.name;if(t>=1)return`V-Achievement "${e}"`;const i=VRunUnlocks.all[3].completions;return["V-Achievement",`Reach ${formatInt(i)} / ${formatInt(6)} completions in ${e}.`]},angle:135,diagonal:25,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vAchievement2,Re.vAchievement3),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-achievement-4":{visible:()=>VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>VRunUnlocks.all[4].completions/6,drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement4,ring:{rMajor:8},legend:{text:t=>{const e=VRunUnlocks.all[4].config.name;if(t>=1)return`V-Achievement "${e}"`;const i=VRunUnlocks.all[4].completions;return["V-Achievement",`Reach ${formatInt(i)} / ${formatInt(6)} completions in ${e}.`]},angle:60,diagonal:25,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vAchievement3,Re.vAchievement4),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},"v-achievement-5":{visible:()=>VUnlocks.vAchievementUnlock.isUnlocked,complete:()=>VRunUnlocks.all[5].completions/6,drawOrder:-1,node:{clickAction:()=>Tab.celestials.v.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#ffe066",position:Re.vAchievement5,ring:{rMajor:8},legend:{text:t=>{const e=VRunUnlocks.all[5].config.name;if(t>=1)return`V-Achievement "${e}"`;const i=VRunUnlocks.all[5].completions;return["V-Achievement",`Reach ${formatInt(i)} / ${formatInt(6)} completions in ${e}.`]},angle:260,diagonal:30,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.vAchievement4,Re.vAchievement5),fill:"#ffe066",completeWidth:6,incompleteWidth:4}},ra:{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>VUnlocks.raUnlock.isUnlocked?1:0,node:{clickAction:()=>Tab.celestials.ra.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",symbol:"",symbolOffset:"2",fill:"#9063de",position:Re.raReality,ring:{rMajor:24},alwaysShowLegend:!0,legend:{text:"Ra's Reality",angle:230,diagonal:85,horizontal:16}}},"teresa-pet":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>VUnlocks.raUnlock.isUnlocked?1:0,drawOrder:-1,node:{clickAction:()=>Tab.celestials.ra.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",isStacked:!0,position:Re.raPetTeresa,ring:{rMajor:12},legend:{text:()=>{const t=Ra.pets.teresa.level;return t===25?"Ra's Teresa Memories have all been returned":["Ra's Teresa Memory level",`${formatInt(t)} / ${formatInt(25)}`]},angle:142,diagonal:85,horizontal:16}},connector:{pathStart:.05,pathEnd:.95,path:new LinearPath(Re.raReality,Re.raPetTeresa),fill:"#9063de",completeWidth:6,incompleteWidth:4}},"teresa-pet-to-teresa":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>Ra.pets.teresa.level/25,drawOrder:-1,connector:{pathStart:.05,pathEnd:.7,path:new LinearPath(Re.raPetTeresa,Re.teresa),fill:"url(#gradRaTeresa)",completeWidth:6,incompleteWidth:4}},"effarig-pet":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>Ra.pets.teresa.level/8,drawOrder:-1,node:{clickAction:()=>Tab.celestials.ra.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",isStacked:!0,position:Re.raPetEffarig,ring:{rMajor:12},legend:{text:t=>{const e=Ra.pets.teresa.level,i=Ra.pets.effarig.level;return t<1?`Ra's Teresa Memory level ${e} / ${formatInt(8)}`:i===25?"Ra's Effarig Memories have all been returned":["Ra's Effarig Memory level",`${formatInt(i)} / ${formatInt(25)}`]},angle:142,diagonal:85,horizontal:16}},connector:{pathStart:.05,pathEnd:.95,path:new LinearPath(Re.raReality,Re.raPetEffarig),fill:"#9063de",completeWidth:6,incompleteWidth:4}},"effarig-pet-to-effarig":{visible:()=>Ra.unlocks.effarigUnlock.isUnlocked,complete:()=>Ra.pets.effarig.level/25,drawOrder:-1,connector:{pathStart:.05,pathEnd:.6,path:new LinearPath(Re.raPetEffarig,Re.effarigNode),fill:"url(#gradRaEffarig)",completeWidth:6,incompleteWidth:4}},"enslaved-pet":{visible:()=>Ra.unlocks.effarigUnlock.isUnlocked,complete:()=>Ra.pets.effarig.level/8,drawOrder:-1,node:{clickAction:()=>Tab.celestials.ra.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",isStacked:!0,position:Re.raPetEnslaved,ring:{rMajor:12},legend:{text:t=>{const e=Ra.pets.effarig.level,i=Ra.pets.enslaved.level;return t<1?`Ra's Effarig Memory level ${e} / ${formatInt(8)}`:i===25?"Ra's Nameless Memories have all been returned":["Ra's Nameless Memory level",`${formatInt(i)} / ${formatInt(25)}`]},angle:142,diagonal:85,horizontal:16}},connector:{pathStart:.05,pathEnd:.95,path:new LinearPath(Re.raReality,Re.raPetEnslaved),fill:"#9063de",completeWidth:6,incompleteWidth:4}},"enslaved-pet-to-enslaved":{visible:()=>Ra.unlocks.enslavedUnlock.isUnlocked,complete:()=>Ra.pets.enslaved.level/25,drawOrder:-1,connector:{pathStart:.05,pathEnd:.55,path:new LinearPath(Re.raPetEnslaved,Re.enslavedReality),fill:"url(#gradRaEnslaved)",completeWidth:6,incompleteWidth:4}},"v-pet":{visible:()=>Ra.unlocks.enslavedUnlock.isUnlocked,complete:()=>Ra.pets.enslaved.level/8,drawOrder:-1,node:{clickAction:()=>Tab.celestials.ra.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",isStacked:!0,position:Re.raPetV,ring:{rMajor:12},legend:{text:t=>{const e=Ra.pets.enslaved.level,i=Ra.pets.v.level;return t<1?`Ra's Nameless Memory level ${e} / ${formatInt(8)}`:i===25?"Ra's V Memories have all been returned":["Ra's V Memory level",`${formatInt(i)} / ${formatInt(25)}`]},angle:142,diagonal:85,horizontal:16}},connector:{pathStart:.05,pathEnd:.95,path:new LinearPath(Re.raReality,Re.raPetV),fill:"#9063de",completeWidth:6,incompleteWidth:4}},"v-pet-to-v":{visible:()=>Ra.unlocks.vUnlock.isUnlocked,complete:()=>Ra.pets.v.level/25,drawOrder:-1,connector:{pathStart:.05,pathEnd:.42,path:new LinearPath(Re.raPetV,Re.vUnlockAchievement),fill:"url(#gradRaV)",completeWidth:6,incompleteWidth:4}},"ra-ring-1":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>VUnlocks.raUnlock.isUnlocked?1:0,node:{incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",position:Re.raReality,ring:{rMajor:90,rMinor:80,gapCenterDeg:74,gapDeg:268}}},"ra-ring-2":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>VUnlocks.raUnlock.isUnlocked?1:0,node:{incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",position:Re.raReality,ring:{rMajor:90,rMinor:80,gapCenterDeg:161,gapDeg:318}}},"ra-ring-3":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>VUnlocks.raUnlock.isUnlocked?1:0,node:{incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",position:Re.raReality,ring:{rMajor:90,rMinor:80,gapCenterDeg:231,gapDeg:301}}},"ra-ring-4":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>VUnlocks.raUnlock.isUnlocked?1:0,node:{incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",position:Re.raReality,ring:{rMajor:90,rMinor:80,gapCenterDeg:293,gapDeg:334}}},"ra-ring-5":{visible:()=>VUnlocks.raUnlock.isUnlocked,complete:()=>VUnlocks.raUnlock.isUnlocked?1:0,node:{incompleteClass:"c-celestial-nav__test-incomplete",fill:"#9063de",position:Re.raReality,ring:{rMajor:90,rMinor:80,gapCenterDeg:-14,gapDeg:316}}},"laitela-unlock":{visible:()=>Ra.unlocks.vUnlock.isUnlocked,complete:()=>DarkMatterDimension(1).unlockUpgrade.canBeBought||Laitela.isUnlocked?1:MachineHandler.isIMUnlocked?player.requirementChecks.reality.maxID1.neq(0)?.5:.5+.5*Math.clampMax(.999,player.antimatter.exponent/15e11):Math.clampMax(.5,Currency.realityMachines.value.pLog10()/MachineHandler.baseRMCap.exponent),drawOrder:-1,node:{clickAction:()=>Tab.celestials.laitela.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",symbol:"ᛝ",symbolScale:1.6,symbolOffset:"0.6",fill:"white",position:Re.laitelaFirstCenter,ring:{rMajor:15},alwaysShowLegend:!0,legend:{text:t=>{const e="Lai'tela's Reality";if(t>=1)return[e];if(!MachineHandler.isIMUnlocked){const s=Currency.realityMachines.value,a=MachineHandler.baseRMCap;return[e,"The limits of Reality Machines bind you",`${format(s)} / ${format(a)}`]}if(player.requirementChecks.reality.maxID1.neq(0))return[e,"The Power of Infinity Dimensions","blocks your path."];const n=Currency.antimatter.value,r=L.E1_5E12;return[e,`${format(n)} / ${format(r)}`]},angle:260,diagonal:15,horizontal:8}},connector:{pathStart:.05,pathEnd:1,path:new LinearPath(Re.raReality,Re.laitelaFirstCenter),fill:"url(#gradRaLaitela)",completeWidth:6,incompleteWidth:4}},"laitela-2nd-dim":{visible:()=>Laitela.isUnlocked,complete:()=>{const t=DarkMatterDimension(2).unlockUpgrade;return t.canBeBought||t.isBought?1:t.isAvailableForPurchase?t.currency.value/t.cost:Laitela.difficultyTier<1?0:30/player.celestials.laitela.fastestCompletion},node:{clickAction:()=>Tab.celestials.laitela.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"white",position:Re.laitelaFirstLeft,ring:{rMajor:8},legend:{text:t=>{const e="2nd Dark Matter Dimension",i=DarkMatterDimension(2);if(i.isUnlocked)return[e];const n=i.adjustedStartingCost;if(t>=1)return[e,`Dark Matter ${format(Currency.darkMatter.max.min(n),i.isUnlocked?0:2)} / ${format(n)}`];const r=i.unlockUpgrade;return r.isAvailableForPurchase?[e,`Imaginary Machines
            ${format(Math.min(r.currency.value,r.cost),r.canBeBought?1:2)}
            / ${format(r.cost,1)}`]:player.celestials.laitela.fastestCompletion>30&&Laitela.difficultyTier<0?[e,`Beat Lai'tela's Reality in less that ${format(30)} seconds`]:[e,"Beat Lai'tela's Reality"]},angle:135,diagonal:30,horizontal:16}},connector:{pathStart:.17,pathEnd:.89,path:new LinearPath(Re.laitelaFirstCenter,Re.laitelaFirstLeft),fill:"white",completeWidth:6,incompleteWidth:4}},"laitela-singularity":{visible:()=>Laitela.isUnlocked,complete:()=>Currency.singularities.gte(1)?1:Math.clampMax(.999,Currency.darkEnergy.value/Singularity.cap),node:{clickAction:()=>Tab.celestials.laitela.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"white",position:Re.laitelaFirstRight,ring:{rMajor:8},legend:{text:t=>{if(t>=1)return["Obtain a Singularity"];const e=Currency.darkEnergy.value,i=Singularity.cap;return["Condense your Dark Energy","Into a Singularity",`${format(e)} / ${format(i)}`]},angle:45,diagonal:65,horizontal:16}},connector:{pathStart:.17,pathEnd:.89,path:new LinearPath(Re.laitelaFirstCenter,Re.laitelaFirstRight),fill:"white",completeWidth:6,incompleteWidth:4}},"laitela-3rd-dim":{visible:()=>DarkMatterDimension(2).isUnlocked&&Currency.singularities.gte(1),complete:()=>{const t=DarkMatterDimension(3).unlockUpgrade;return t.canBeBought||t.isBought?1:t.isAvailableForPurchase?t.currency.value/t.cost:player.auto.singularity.isActive?Math.clampMax(.999,Singularity.singularitiesGained/20):.5},node:{clickAction:()=>Tab.celestials.laitela.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"white",position:Re.laitelaSecondCenter,ring:{rMajor:15},legend:{text:t=>{const e="3rd Dark Matter Dimension",i=DarkMatterDimension(3);if(i.isUnlocked)return[e];const n=i.adjustedStartingCost;if(t>=1)return[e,`Dark Matter ${format(Currency.darkMatter.max.min(n),i.isUnlocked?0:2)} / ${format(n)}`];const r=i.unlockUpgrade;return r.isAvailableForPurchase?[e,`Imaginary Machines
            ${format(Math.min(r.currency.value,r.cost),r.canBeBought?0:2)}
            / ${format(r.cost)}`]:player.auto.singularity.isActive?[e,`Automatically Condense ${format(20)} Singularities at once`,`${format(Math.clampMax(Singularity.singularitiesGained,20))} / ${format(20)}`]:[e,"Unlock Automatic Singularities",`${format(Currency.singularities.value)} / ${format(SingularityMilestone.autoCondense.start)}`]},angle:15,diagonal:30,horizontal:16}},connector:[{pathStart:.1,pathEnd:.89,path:new LinearPath(Re.laitelaFirstLeft,Re.laitelaSecondCenter),fill:"white",completeWidth:6,incompleteWidth:4},{pathStart:.1,pathEnd:.89,path:new LinearPath(Re.laitelaFirstRight,Re.laitelaSecondCenter),fill:"white",completeWidth:6,incompleteWidth:4}]},"laitela-4th-dim":{visible:()=>DarkMatterDimension(3).isUnlocked,complete:()=>{const t=DarkMatterDimension(4).unlockUpgrade;return t.canBeBought||t.isBought?1:t.isAvailableForPurchase?t.currency.value/t.cost:(Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies)/8e4},node:{clickAction:()=>Tab.celestials.laitela.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"white",position:Re.laitelaSecondLeft,ring:{rMajor:8},legend:{text:t=>{const e="4th Dark Matter Dimension",i=DarkMatterDimension(4);if(i.isUnlocked)return[e];const n=i.adjustedStartingCost;if(t>=1)return[e,`Dark Matter ${format(Currency.darkMatter.max.min(n),i.isUnlocked?0:2)} / ${format(n)}`];const r=i.unlockUpgrade;if(r.isAvailableForPurchase)return[e,`Imaginary Machines
            ${format(Math.min(r.currency.value,r.cost),r.canBeBought?1:2)}
            / ${format(r.cost,1)}`];const s=Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies;return[e,`Have ${format(8e4)} total Galaxies`,`${format(Math.clampMax(s,8e4))} / ${format(8e4)}`]},angle:225,diagonal:30,horizontal:16}},connector:{pathStart:.11,pathEnd:.89,path:new LinearPath(Re.laitelaSecondCenter,Re.laitelaSecondLeft),fill:"white",completeWidth:6,incompleteWidth:4}},"laitela-annihilation":{visible:()=>DarkMatterDimension(4).isUnlocked,complete:()=>{const t=ImaginaryUpgrade(19);return t.canBeBought||t.isBought?1:t.isAvailableForPurchase?Currency.imaginaryMachines.value/t.cost:t.isPossible?Tickspeed.continuumValue/385e4:0},node:{clickAction:()=>Tab.celestials.laitela.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"white",position:Re.laitelaSecondRight,ring:{rMajor:8},legend:{text:()=>["Annihilate your","Dark Matter Dimensions"],angle:315,diagonal:30,horizontal:16}},connector:{pathStart:.11,pathEnd:.89,path:new LinearPath(Re.laitelaSecondCenter,Re.laitelaSecondRight),fill:"white",completeWidth:6,incompleteWidth:4}},"laitela-destabilization":{visible:()=>DarkMatterDimension(4).isUnlocked&&ImaginaryUpgrade(19).isBought,complete:()=>Laitela.difficultyTier/8,node:{clickAction:()=>Tab.celestials.laitela.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",symbolScale:1.6,symbolOffset:"0.6",fill:"white",position:Re.laitelaThirdCenter,ring:{rMajor:15},legend:{text:t=>t<1?["Destabilize Lai'tela's Reality","To the point where you cannot","use any Dimensions",`${format(Laitela.difficultyTier)} / ${format(8)} Dimensions disabled`]:["Completely destabilized","Lai'tela's Reality"],angle:180,diagonal:15,horizontal:8}},connector:[{pathStart:.11,pathEnd:.83,path:new LinearPath(Re.laitelaSecondLeft,Re.laitelaThirdCenter),fill:"white",completeWidth:6,incompleteWidth:4},{pathStart:.11,pathEnd:.83,path:new LinearPath(Re.laitelaSecondRight,Re.laitelaThirdCenter),fill:"white",completeWidth:6,incompleteWidth:4}]},"pelle-unlock":{visible:()=>Laitela.difficultyTier>4,complete:()=>{if(Pelle.isUnlocked)return 1;const t=Math.clampMax(R1(Math.log10(Currency.imaginaryMachines.value)/Math.log10(16e14)),1);let e=Laitela.isRunning?Math.min(Currency.eternityPoints.value.log10()/4e3,.99):0;return Laitela.difficultyTier!==8||Glyphs.activeWithoutCompanion.length>1?e=0:ImaginaryUpgrade(25).isAvailableForPurchase&&(e=1),(t+e)/2},node:{clickAction:()=>Tab.celestials.pelle.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",fill:"crimson",position:Re.pelleUnlock,ring:{rMajor:8},legend:{text:t=>{if(t===1)return["Unlock Pelle","The Celestial of Antimatter"];let e=`${format(Currency.eternityPoints.value)} / ${format("1e4000")} EP`;return!Laitela.isRunning||Laitela.difficultyTier!==8||Glyphs.activeWithoutCompanion.length>1?e="Lai'tela's Reality is still intact":ImaginaryUpgrade(25).isAvailableForPurchase&&(e="Lai'tela's Reality has been destroyed"),["Unlock Pelle","The Celestial of Antimatter",`${format(Currency.imaginaryMachines.value,2)} / ${format(16e14,2)} iM`,e]},angle:105,diagonal:90,horizontal:10}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.laitelaThirdCenter,Re.pelleUnlock),fill:"url(#gradLaitelaPelle)",completeWidth:6,incompleteWidth:4}},"pelle-doomed-requirement":{visible:()=>Pelle.isUnlocked,complete:()=>{if(Pelle.isDoomed)return 1;const t=Achievements.prePelleRows.countWhere(i=>i.every(n=>n.isUnlocked))/Achievements.prePelleRows.length,e=AlchemyResources.all.countWhere(i=>i.capped)/AlchemyResources.all.length;return(R1(t)+R1(e))/2},node:{clickAction:()=>Tab.celestials.pelle.show(!0),incompleteClass:"c-celestial-nav__test-incomplete",symbol:"♅",symbolOffset:"1.6",fill:"crimson",position:Re.pelleAchievementRequirement,ring:{rMajor:20},forceLegend:()=>Pelle.isUnlocked&&!Pelle.hasGalaxyGenerator,legend:{text:t=>{if(t>=1)return Pelle.isDoomed?"Doomed Reality":"Doom your Reality";const e=[Achievements.prePelleRows.countWhere(n=>n.every(r=>r.isUnlocked)),Achievements.prePelleRows.length],i=[AlchemyResources.all.countWhere(n=>n.capped),AlchemyResources.all.length];return[`Complete ${formatInt(e[0])} / ${formatInt(e[1])} rows of Achievements`,`Fill ${formatInt(i[0])} / ${formatInt(i[1])} Alchemy Resources`]},angle:290,diagonal:40,horizontal:16}},connector:{pathStart:0,pathEnd:1,path:new LinearPath(Re.pelleUnlock,Re.pelleAchievementRequirement),fill:"crimson",completeWidth:6,incompleteWidth:4}},...TG,"pelle-galaxy-generator-start-node":{visible:()=>Pelle.hasGalaxyGenerator,complete:()=>Pelle.hasGalaxyGenerator?1:0,node:{incompleteClass:"c-celestial-nav__test-incomplete",fill:"black",position:Re.pelleAchievementRequirement,ring:{rMajor:20},alwaysShowLegend:!0,legend:{text:()=>["Galaxy Generator:",`${format(GalaxyGenerator.generatedGalaxies,2)} / ${format(GalaxyGenerator.generationCap,2)} Galaxies`],angle:290,diagonal:40,horizontal:16}}},"pelle-galaxy-generator-sigil-mask":{visible:()=>Pelle.hasGalaxyGenerator,complete:()=>Pelle.hasGalaxyGenerator?1:0,node:{clickAction:()=>Tab.celestials.pelle.show(!0),position:Re.pelleAchievementRequirement,ring:{rMajor:20}}},"pelle-galaxy-generator-path":{visible:()=>Pelle.hasGalaxyGenerator,complete:()=>{const t=PelleRifts.all.map(s=>s.config.galaxyGeneratorThreshold),e=t.countWhere(s=>GalaxyGenerator.generatedGalaxies>=s);if(e===5)return 1;const i=t.filter(s=>GalaxyGenerator.generatedGalaxies>=s).max(),n=t.filter(s=>GalaxyGenerator.generatedGalaxies<s).min(),r=Math.sqrt((GalaxyGenerator.generatedGalaxies-i)/(n-i));return(e+r)/5},connector:function(){const t=.5*Math.PI,e=t+10*Math.PI,i=LogarithmicSpiral.fromPolarEndpoints(Jo(0,0),t,18,e,150);return{pathStart:t,pathEnd:e,path:i,pathPadStart:0,pathPadEnd:0,fill:"#00bbbb"}}()},"pelle-galaxy-generator-infinite":{visible:()=>Pelle.hasGalaxyGenerator&&!Number.isFinite(GalaxyGenerator.generationCap),complete:()=>Math.clamp((GalaxyGenerator.generatedGalaxies-1e10)/2e11,1e-6,1),connector:function(){const t=.5*Math.PI,e=t+10*Math.PI,i=LogarithmicSpiral.fromPolarEndpoints(Jo(0,0),t,150,e,1250);return{pathStart:t,pathEnd:e,path:i,pathPadStart:0,pathPadEnd:0,drawOrder:nl.CANVAS_OVERLAY,fill:"#00bbbb",noBG:!0}}()}},g9={adjuster:{id:0,description:"Adjustable Glyph level factor weights",cost:1e7,onPurchased:()=>{Effarig.quotes.unlockWeights.show(),ui.view.tabs.reality.openGlyphWeights=!0,Tab.reality.glyphs.show()}},glyphFilter:{id:1,description:"Glyph Filtering",cost:2e8,onPurchased:()=>{Effarig.quotes.unlockGlyphFilter.show(),player.reality.showSidebarPanel=GLYPH_SIDEBAR_MODE.FILTER_SETTINGS}},setSaves:{id:2,description:"Glyph Presets",cost:3e9,onPurchased:()=>{Effarig.quotes.unlockSetSaves.show(),player.reality.showSidebarPanel=GLYPH_SIDEBAR_MODE.SAVED_SETS}},run:{id:3,description:"Effarig's Reality",cost:5e11,onPurchased:()=>{Effarig.quotes.unlockRun.show()}},infinity:{id:4,label:"Infinity",get description(){return` Replicanti cap is multiplied by a value based on Infinities
        Infinities increase your max Replicanti Galaxies
        Base Infinity Point gain is capped at ${format(L.E200)} in Effarig's Reality
        Each type of Infinity Point multiplier is capped at ${format(L.E50)} in Effarig's Reality`}},eternity:{id:5,label:"Eternity",get description(){return` Eternities generate Infinities
        Infinity Points are no longer limited in any way in Effarig's Reality
        You have unlocked The Nameless Ones`}},reality:{id:6,label:"Reality",get description(){return" You have unlocked Effarig Glyphs (You may equip at most one and some effects are mutually exclusive)"}}},v9={progress:{hintsUnlocked:{id:0,hint:"The Nameless Ones want to help, but the help takes a while.",condition:()=>`Spent more than ${formatInt(5)} real-time hours inside the Reality without completing it;
        time outside the Reality counts for ${formatPercents(.4)} as much. The timer starts once the
        Reality is unlocked, but accumulates continuously.`},ec1:{id:1,hint:"That's odd, the Automatic Eternity Challenge perk seems to be having some trouble working properly.",condition:()=>`Gained more than ${formatInt(5)} completions of Eternity Challenge 1 at once`},feelEternity:{id:2,hint:"Infinity seems to be more broken than usual in this Reality, but is that even fixable?",condition:"Tried to Fix Infinity, but instead found and clicked the FEEL ETERNITY button"},ec6:{id:3,hint:`Some Challenges are harder, but also boost something in exchange. I wonder if there's a Challenge
        that's just strictly better than normal here.`,condition:()=>`Entered Eternity Challenge 6 again after completing it ${formatInt(5)} times in order
        to use its cheaper Replicanti Galaxies`},c10:{id:4,hint:"Is there a way to get Antimatter Galaxies without 8th Antimatter Dimensions?",condition:"Used Challenge 10 to get more than one Antimatter Galaxy with 6th Antimatter Dimensions"},secretStudy:{id:5,hint:"Time Study 12? What's that?",condition:()=>`Clicked the secret Time Study and gained an extra ${formatInt(100)} Time Theorems`},storedTime:{id:6,hint:"It seems like certain parts of this Reality erode away if you wait long enough.",condition:"Discharged to have more than a year of game time this Reality"},challengeCombo:{id:7,hint:"Could I possibly use one Challenge to get around a restriction in another Challenge?",condition:"Entered Challenge 10 while already inside of Eternity Challenge 6"}},glyphHints:["Infinity and Dilation Glyphs seem confined too tightly to be useful at all.","Power and Time Glyphs are particularly strong here.",`Effarig Glyphs are only useful with the right effects, but you can complete the Reality without one.
      A Replication Glyph is very helpful, but it's not strictly necessary or quite as strong
      as Power and Time.`]};function vx(){const t=PelleRifts.all.map(i=>Math.clamp(i.realPercentage,0,1)).min(),e=Math.log10(1+GalaxyGenerator.generatedGalaxies)/11;return Math.clampMax(.2*t+.8*e,1)}const ql={visible:()=>PelleRifts.all.map(t=>Math.clamp(t.realPercentage,0,1)).min()>0,center:new Vector(400,300),size:400,color:"#00ffff",canvasLayer:nl.NODE_BG-500};function _s(t,e){const i=ql;return new Vector(i.center.x+i.size*t,i.center.y+i.size*e)}function I1(t){return new Vector(2*ql.center.x-t.x,t.y)}function jn(t,e,i,n){let r,s,a,o;switch(t){case"edge":r=e.start,s=new LinearPath(e.start,e.end),a=0,o=1;break;case"circle":r=e.center,s=LogarithmicSpiral.fromPolarEndpoints(e.center,0,e.radius*ql.size,1,e.radius*ql.size),a=e.initAngle,o=e.finalAngle;break;default:throw Error("Unrecognized shape in sigil specification")}return{visible:()=>ql.visible()&&vx()>=i.init,complete:()=>Math.clamp((vx()-i.init)/i.weight,0,1),att:e,fill:i,node:{position:r,ring:{rMajor:0}},connector:{pathStart:a,pathEnd:o,drawOrder:ql.canvasLayer,path:s,fill:n??ql.color,completeWidth:ql.size/20,noBG:!0}}}const Ui=Object.freeze({circTop:_s(.333,-.41),circMid:_s(.5,.22),circBot:_s(0,.43),topC:_s(0,-.4),top1:_s(.08,-.27),top2:_s(.18,-.35),top3:_s(.28,-.35),mid:_s(.08,.05),arm1:_s(.5,.05),arm2:_s(.5,-.15),arm3:_s(.4,-.15),lowC:_s(0,.22),low1:_s(.42,.22),botC:_s(0,.31),bot1:_s(.12,.43),bot2:_s(.28,.43)}),Hh={botCircR:jn("circle",{center:Ui.circBot,radius:.12,initAngle:.5*Math.PI,finalAngle:-.5*Math.PI},{init:0,weight:.2}),botH:jn("edge",{start:Ui.bot1,end:Ui.bot2},{init:.1,weight:.1}),lowH:jn("edge",{start:Ui.lowC,end:Ui.low1},{init:.3,weight:.3}),circUp:jn("circle",{center:Ui.circMid,radius:.08,initAngle:Math.PI,finalAngle:0},{init:.6,weight:.1}),circDown:jn("circle",{center:Ui.circMid,radius:.08,initAngle:Math.PI,finalAngle:2*Math.PI},{init:.6,weight:.1}),vert2:jn("edge",{start:Ui.bot2,end:Ui.top3},{init:.2,weight:.7}),vertC:jn("edge",{start:Ui.botC,end:Ui.lowC},{init:.2,weight:.1}),vertDiag1:jn("edge",{start:Ui.lowC,end:Ui.mid},{init:.3,weight:.1}),arm1:jn("edge",{start:Ui.mid,end:Ui.arm1},{init:.4,weight:.2}),arm2:jn("edge",{start:Ui.arm1,end:Ui.arm2},{init:.6,weight:.1}),arm3:jn("edge",{start:Ui.arm2,end:Ui.arm3},{init:.7,weight:.1}),vert1:jn("edge",{start:Ui.mid,end:Ui.top1},{init:.4,weight:.3}),vertDiag2:jn("edge",{start:Ui.top1,end:Ui.topC},{init:.7,weight:.1}),vertDiag3:jn("edge",{start:Ui.top1,end:Ui.top2},{init:.7,weight:.1}),topH:jn("edge",{start:Ui.top2,end:Ui.top3},{init:.8,weight:.1}),circTopUp:jn("circle",{center:Ui.circTop,radius:.08,initAngle:.75*Math.PI,finalAngle:1.75*Math.PI},{init:.9,weight:.1}),circTopDown:jn("circle",{center:Ui.circTop,radius:.08,initAngle:.75*Math.PI,finalAngle:-.25*Math.PI},{init:.9,weight:.1})};for(const t of Object.keys(Hh)){const e=Hh[t];e.connector.path instanceof LinearPath?Hh[`${t}Ref`]=jn("edge",{start:I1(e.att.start),end:I1(e.att.end)},e.fill):e.connector.path instanceof LogarithmicSpiral&&(Hh[`${t}Ref`]=jn("circle",{center:I1(e.att.center),radius:e.att.radius,initAngle:Math.PI-e.att.initAngle,finalAngle:Math.PI-e.att.finalAngle},e.fill))}const bx=16;for(let t=0;t<bx;t++){const e=2*Math.PI/bx,i=t*e;Hh[`arcInner${t}`]=jn("circle",{center:ql.center,radius:.75,initAngle:i,finalAngle:i+e},{init:.1,weight:.4},"crimson"),Hh[`arcOuter${t}`]=jn("circle",{center:ql.center,radius:.95,initAngle:i,finalAngle:i-e},{init:.5,weight:.4},"crimson")}const b9=Object.values(Hh).mapToObject((t,e)=>`final-sigil-${e}`,t=>t),za={visible:()=>Pelle.hasGalaxyGenerator,center:Jo(0,0),size:20,color:"#00ffff",canvasLayer:nl.CANVAS_OVERLAY};function UC(t,e,i,n){let r,s,a,o;switch(t){case"circle":r=e.center,s=LogarithmicSpiral.fromPolarEndpoints(e.center,0,e.radius*za.size,1,e.radius*za.size),a=e.initAngle,o=e.finalAngle;break;case"arc":r=e.center,a=e.initAngle,o=e.finalAngle,s=LogarithmicSpiral.fromPolarEndpoints(e.center,a,e.initRadius*za.size,o,e.finalRadius*za.size);break;default:throw Error("Unrecognized shape in sigil specification")}return{visible:()=>za.visible(),complete:()=>1,node:{position:r,ring:{rMajor:za.size*i.thickness},bgDrawOrder:za.canvasLayer+i.layer},connector:{pathStart:a,pathEnd:o,drawOrder:za.canvasLayer+i.layer,path:s,fill:n??za.color,completeWidth:za.size*i.thickness,noBG:!0}}}const wG={disc:UC("circle",{center:za.center,radius:.2,initAngle:0,finalAngle:6.28},{thickness:.15,layer:1},"#88ffff"),glow:UC("circle",{center:za.center,radius:.125,initAngle:0,finalAngle:6.28},{thickness:.05,layer:2},"white")},_x=10;for(let t=0;t<_x;t++){const e=2*Math.PI/_x,i=t*e;wG[`spiral${t}`]=UC("arc",{center:za.center,initRadius:.2,finalRadius:.9,initAngle:i,finalAngle:i+Math.PI},{thickness:.1,layer:0},"cyan")}const _9=Object.values(wG).mapToObject((t,e)=>`galaxy-icon-${e}`,t=>t),E9=t=>format(t,2),Hy=t=>{const{id:e,description:i,cost:n,effect:r,formatEffect:s,currency:a,currencyLabel:o}=t;return{id:e,description:i,cost:()=>n(player.celestials.pelle.rebuyables[e]),formatCost:E9,effect:(c=player.celestials.pelle.rebuyables[e])=>r(c),formatEffect:s,currency:a,currencyLabel:o}},T9={additive:Hy({id:"galaxyGeneratorAdditive",description:"Increase base Galaxy generation by 2",cost:t=>Math.pow(3,t),effect:t=>t*2,formatEffect:t=>`${format(t,2,2)}/s`,currency:()=>Currency.galaxyGeneratorGalaxies,currencyLabel:"Galaxy"}),multiplicative:Hy({id:"galaxyGeneratorMultiplicative",description:"Multiply Galaxy generation",cost:t=>Math.pow(10,t),effect:t=>Decimal.pow(2.5,t),formatEffect:t=>formatX(t,2,1),currency:()=>Currency.galaxyGeneratorGalaxies,currencyLabel:"Galaxy"}),antimatterMult:Hy({id:"galaxyGeneratorAntimatterMult",description:"Multiply Galaxy generation",cost:t=>Decimal.pow("1e100000000",10**t),effect:t=>Decimal.pow(2,t),formatEffect:t=>formatX(t,2),currency:()=>Currency.antimatter,currencyLabel:"Antimatter"}),IPMult:Hy({id:"galaxyGeneratorIPMult",description:"Multiply Galaxy generation",cost:t=>Decimal.pow("1e2000000",100**t),effect:t=>Decimal.pow(2,t),formatEffect:t=>formatX(t,2),currency:()=>Currency.infinityPoints,currencyLabel:"Infinity Point"}),EPMult:Hy({id:"galaxyGeneratorEPMult",description:"Multiply Galaxy generation",cost:t=>Decimal.pow("1e10000",1e3**t),effect:t=>Decimal.pow(2,t),formatEffect:t=>formatX(t,2),currency:()=>Currency.eternityPoints,currencyLabel:"Eternity Point"})},w9={vacuum:{id:1,key:"vacuum",name:["Vacuum","Hollow","Void"],drainResource:"IP",baseEffect:t=>`IP gain ${formatX(t,2,2)}`,additionalEffects:()=>[PelleRifts.vacuum.milestones[2]],strike:()=>PelleStrikes.infinity,percentage:t=>Math.log10(t.plus(1).log10()*10+1)**2.5/100,percentageToFill:t=>Decimal.pow(10,Decimal.pow(10,(t*100)**(1/2.5)).div(10).minus(.1)).minus(1),effect:t=>{if(player.challenge.eternity.current!==0){const e=EternityChallenge.current,i=e.goalAtCompletions(e.gainedCompletionStatus.totalCompletions);return t.plus(1).pow(.1).min(i.pow(.15))}return t.plus(1).pow(.33)},currency:()=>Currency.infinityPoints,galaxyGeneratorThreshold:1e3,milestones:[{resource:"vacuum",requirement:.04,description:"You can equip a single basic Glyph with decreased level and rarity"},{resource:"vacuum",requirement:.06,description:()=>`Uncap Replicanti and make its unlock and upgrades ${formatX(1e130)} cheaper`,effect:()=>1e130},{resource:"vacuum",requirement:.4,description:()=>`${Xn.wordCycle(PelleRifts.vacuum.name)} also affects EP gain`,effect:()=>Decimal.pow(4,PelleRifts.vacuum.totalFill.log10()/2/308+3),formatEffect:t=>`EP gain ${formatX(t,2,2)}`}],galaxyGeneratorText:"There is not enough space left for more, you must fill in the $value"},decay:{id:2,key:"decay",name:["Decay","Collapse","Disarray"],drainResource:"Replicanti",spendable:!0,baseEffect:t=>`Replicanti speed ${formatX(t,2,2)}`,additionalEffects:()=>[PelleRifts.decay.milestones[0],PelleRifts.decay.milestones[2]],strike:()=>PelleStrikes.powerGalaxies,percentage:t=>t.plus(1).log10()*.05/100,percentageToFill:t=>Decimal.pow(10,20*t*100).minus(1),effect:t=>PelleRifts.chaos.milestones[0].canBeApplied?Decimal.sqrt(2001):Decimal.sqrt(t.plus(1).log10()+1),currency:()=>Currency.replicanti,galaxyGeneratorThreshold:1e7,milestones:[{resource:"decay",requirement:.2,description:"First rebuyable Pelle upgrade also affects 1st Infinity Dimension",effect:()=>{const t=player.celestials.pelle.rebuyables.antimatterDimensionMult;return Decimal.pow(1e50,t-9)},formatEffect:t=>`1st Infinity Dimension ${formatX(t,2,2)}`},{resource:"decay",requirement:.6,description:()=>`When Replicanti exceeds ${format(L.E1300)},
          all Galaxies are ${formatPercents(.1)} more effective`,effect:()=>Replicanti.amount.gt(L.E1300)?1.1:1},{resource:"decay",requirement:1,description:"Increase max Replicanti Galaxies based on total Rift milestones",effect:()=>{const t=PelleRifts.totalMilestones();return t**2-2*t},formatEffect:t=>`Max RG count +${formatInt(t)}`}],galaxyGeneratorText:"There's not enough antimatter to form new Galaxies, you need to reverse the $value"},chaos:{id:3,key:"chaos",name:["Chaos","Disorder","Impurity"],drainResource:["Decay","Collapse","Disarray"],baseEffect:t=>`Time Dimensions ${formatX(t,2,2)}`,strike:()=>PelleStrikes.eternity,percentage:t=>t/10,percentageToFill:t=>10*t,effect:t=>{const e=t>6.5?(t-6.5)/7+6.5:t;return Decimal.pow(6,Decimal.pow(6,Decimal.pow(6,e/10+.1)).minus(6)).div(1e5).plus(Decimal.pow(10,e/10+.1))},currency:()=>({get value(){return PelleRifts.decay.percentage},set value(t){const e=PelleRifts.decay.percentage-t;player.celestials.pelle.rifts.decay.percentageSpent+=e}}),galaxyGeneratorThreshold:1e9,milestones:[{resource:"chaos",requirement:.09,description:()=>`${Xn.wordCycle(PelleRifts.decay.name)}         effect is always maxed and milestones always active`},{resource:"chaos",requirement:.15,description:"Glyphs gain a new Pelle-specific effect"},{resource:"chaos",requirement:1,description:()=>`You gain ${formatPercents(.01)} of your EP gained on Eternity per second`}],galaxyGeneratorText:"Your Galaxies are too fragmented, you must stabilize the $value"},recursion:{id:4,key:"recursion",name:["Recursion","Dispersion","Destruction"],drainResource:"EP",baseEffect:t=>`EP formula: log(x)/${formatInt(308)} ➜ log(x)/${formatFloat(308-t.toNumber(),2)}`,additionalEffects:()=>[PelleRifts.recursion.milestones[0],PelleRifts.recursion.milestones[1]],strike:()=>PelleStrikes.ECs,percentage:t=>t.plus(1).log10()**.4/4e3**.4,percentageToFill:t=>Decimal.pow(10,t**2.5*4e3).minus(1),effect:t=>new Decimal(58*t.plus(1).log10()**.2/4e3**.2),currency:()=>Currency.eternityPoints,galaxyGeneratorThreshold:1e10,milestones:[{resource:"recursion",requirement:.1,description:"Dimensional Boosts are more powerful based on EC completions",effect:()=>Math.max(100*EternityChallenges.completions**2,1)*Math.max(1e4**(EternityChallenges.completions-40),1),formatEffect:t=>`Dimension Boost power ${formatX(t,2,2)}`},{resource:"recursion",requirement:.15,description:"Infinity Dimensions are stronger based on EC completions",effect:()=>Decimal.pow("1e1500",((EternityChallenges.completions-25)/20)**1.7).max(1),formatEffect:t=>`Infinity Dimensions ${formatX(t)}`},{resource:"recursion",requirement:1,description:"Permanently unlock the Galaxy Generator"}],galaxyGeneratorText:"Creating more Galaxies is unsustainable, you must focus the $value to allow more"},paradox:{id:5,key:"paradox",name:["Paradox","Contradiction","Fallacy"],drainResource:"Dilated Time",baseEffect:t=>`All Dimensions ${formatPow(t,2,3)}`,additionalEffects:()=>[PelleRifts.paradox.milestones[2]],strike:()=>PelleStrikes.dilation,percentage:t=>t.plus(1).log10()/100,percentageToFill:t=>Decimal.pow10(t*100).minus(1),effect:t=>new Decimal(1+t.plus(1).log10()*.004),currency:()=>Currency.dilatedTime,galaxyGeneratorThreshold:1e5,milestones:[{resource:"paradox",requirement:.15,description:"Time Dimensions 5-8 are much cheaper, unlock more Dilation upgrades",onStateChange:()=>{updateTimeDimensionCosts()}},{resource:"paradox",requirement:.25,description:()=>`Dilated Time gain becomes Tachyon Particles ${formatPow(1.4,1,1)}`,effect:1.4},{resource:"paradox",requirement:.5,description:"Dilation rebuyable purchase count improves Infinity Power conversion rate",effect:()=>Math.min(1.1075**(Object.values(player.dilation.rebuyables).sum()-60),712),formatEffect:t=>`Infinity Power Conversion ${formatX(t,2,2)}`}],galaxyGeneratorText:"It should be possible to create more, but Pelle has restricted you. Disregard the $value"}},C9={infinity:{id:1,requirementDescription:"Reach Infinity",penaltyDescription:()=>`Antimatter Dimensions are raised to ${formatPow(.5,1,1)}`,rewardDescription:()=>`Unlock ${Xn.wordCycle(PelleRifts.vacuum.name)}
      and get a permanent Infinity Autobuyer`,rift:()=>PelleRifts.vacuum},powerGalaxies:{id:2,requirementDescription:"Power-up Galaxies",penaltyDescription:()=>`Infinity Dimensions are raised to ${formatPow(.5,1,1)}`,rewardDescription:()=>`Unlock ${Xn.wordCycle(PelleRifts.decay.name)}`,rift:()=>PelleRifts.decay},eternity:{id:3,requirementDescription:"Reach Eternity",penaltyDescription:()=>`Replicanti speed slows down even more above ${format(L.E2000)}`,rewardDescription:()=>`Unlock ${Xn.wordCycle(PelleRifts.chaos.name)}`,rift:()=>PelleRifts.chaos},ECs:{id:4,requirementDescription:()=>`Reach ${formatInt(115)} TT`,penaltyDescription:()=>`In Eternity Challenges, ${Xn.wordCycle(PelleRifts.vacuum.name)}
      IP multiplier is only ${formatPercents(.3)} as strong and capped at ${formatPercents(.15)}
      of the goal`,rewardDescription:()=>`Unlock ${Xn.wordCycle(PelleRifts.recursion.name)}`,rift:()=>PelleRifts.recursion},dilation:{id:5,requirementDescription:"Dilate Time",penaltyDescription:"Time Dilation is permanently active",rewardDescription:()=>`Keep the Time Dilation study across Armageddon, boost Remnant gain, and unlock
      ${Xn.wordCycle(PelleRifts.paradox.name)}`,rift:()=>PelleRifts.paradox}},En=t=>format(t,2),S9=(t,e,i,n,r)=>Decimal.pow(t,r).times(Decimal.pow(e,r-i).max(1)).times(n),Vy=t=>{const{id:e,description:i,cost:n,effect:r,formatEffect:s,cap:a}=t;return{id:e,description:i,cost:()=>S9(...n,player.celestials.pelle.rebuyables[e]),formatCost:En,cap:a,effect:(o=player.celestials.pelle.rebuyables[e])=>r(o),formatEffect:s,rebuyable:!0}},k9={antimatterDimensionMult:Vy({id:"antimatterDimensionMult",description:"Gain a multiplier to Antimatter Dimensions",cost:[10,1e3,41,100],effect:t=>Pelle.antimatterDimensionMult(t),formatEffect:t=>formatX(t,2,2),cap:44}),timeSpeedMult:Vy({id:"timeSpeedMult",description:"Gain a multiplier to game speed",cost:[20,1e3,30,1e5],effect:t=>Decimal.pow(1.3,t),formatEffect:t=>formatX(t,2,2),cap:35}),glyphLevels:Vy({id:"glyphLevels",description:"Increase the Glyph level allowed in Pelle",cost:[30,1e3,25,1e15],effect:t=>Math.floor((3*(t+1)-2)**1.6),formatEffect:t=>formatInt(t),cap:26}),infConversion:Vy({id:"infConversion",description:"Increase Infinity Power conversion rate",cost:[40,1e3,20,1e18],effect:t=>(t*3.5)**.37,formatEffect:t=>`+${format(t,2,2)}`,cap:21}),galaxyPower:Vy({id:"galaxyPower",description:"Multiply Galaxy power",cost:[1e3,1e3,10,1e30],effect:t=>1+t/50,formatEffect:t=>formatX(t,2,2),cap:9}),antimatterDimAutobuyers1:{id:0,description:"Get permanent Autobuyers for Antimatter Dimensions 1-4",cost:1e5,formatCost:En},dimBoostAutobuyer:{id:1,description:"Get a permanent Autobuyer for Dimension Boosts",cost:5e5,formatCost:En},keepAutobuyers:{id:2,description:"Autobuyer upgrades no longer reset on Armageddon",cost:5e6,formatCost:En},antimatterDimAutobuyers2:{id:3,description:"Get permanent Autobuyers for Antimatter Dimensions 5-8",cost:25e6,formatCost:En},galaxyAutobuyer:{id:4,description:"Get a permanent Autobuyer for Antimatter Galaxies",cost:1e8,formatCost:En},tickspeedAutobuyer:{id:5,description:"Get a permanent Autobuyer for Tickspeed upgrades",cost:1e9,formatCost:En},keepInfinityUpgrades:{id:6,description:"Infinity Upgrades no longer reset on Armageddon",cost:1e10,formatCost:En},dimBoostResetsNothing:{id:7,description:"Dimension Boosts no longer reset anything",cost:1e11,formatCost:En},keepBreakInfinityUpgrades:{id:8,description:"Break Infinity Upgrades no longer reset on Armageddon",cost:1e12,formatCost:En},IDAutobuyers:{id:9,description:"Get permanent Autobuyers for Infinity Dimensions",cost:1e14,formatCost:En},keepInfinityChallenges:{id:10,description:"Infinity Challenge unlocks and completions no longer reset on Armageddon",cost:1e15,formatCost:En},galaxyNoResetDimboost:{id:11,description:"Galaxies no longer reset Dimension Boosts",cost:1e16,formatCost:En},replicantiAutobuyers:{id:12,description:"Get permanent Autobuyers for Replicanti Upgrades",cost:1e17,formatCost:En},replicantiGalaxyNoReset:{id:13,description:"Replicanti Galaxies no longer reset on Infinity",cost:1e19,formatCost:En},eternitiesNoReset:{id:14,description:"Eternities no longer reset on Armageddon",cost:1e20,formatCost:En},timeStudiesNoReset:{id:15,description:"Time Studies and Theorems no longer reset on Armageddon",cost:1e21,formatCost:En},replicantiStayUnlocked:{id:16,description:"Replicanti is permanently unlocked",cost:1e22,formatCost:En},keepEternityUpgrades:{id:17,description:"Eternity Upgrades no longer reset on Armageddon",cost:1e24,formatCost:En},TDAutobuyers:{id:18,description:"Get permanent Autobuyers for Time Dimensions",cost:1e25,formatCost:En},keepEternityChallenges:{id:19,description:"Eternity Challenge completions no longer reset on Armageddon",cost:1e26,formatCost:En},dilationUpgradesNoReset:{id:20,description:"Dilation Upgrades no longer reset on Armageddon",cost:1e45,formatCost:En},tachyonParticlesNoReset:{id:21,description:"Tachyon Particles no longer reset on Armageddon",cost:1e50,formatCost:En},replicantiGalaxyEM40:{id:22,description:"Replicanti Galaxies no longer reset anything they normally reset",cost:1e30,formatCost:En}};function A9(t,e,i){return t*Math.pow(e,player.celestials.teresa.perkShop[i])}function bp(t){const{id:e,otherReq:i,cap:n,costCap:r,description:s,formatEffect:a,formatCost:o}=t;return{id:e,cost:()=>t.cost?t.cost():A9(t.initialCost,t.increment,t.id),otherReq:i,cap:n,costCap:r,description:s,effect:()=>t.effect(player.celestials.teresa.perkShop[t.id]),formatEffect:a,formatCost:o,rebuyable:!0}}const R9={glyphLevel:bp({id:0,initialCost:1,increment:2,description:()=>`Increase pre-instability Glyph levels by ${formatPercents(.05)}`,effect:t=>Math.pow(1.05,t),formatEffect:t=>formatX(t,2,2),formatCost:t=>format(t,2),costCap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?1048576:2048,cap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?Math.pow(1.05,20):Math.pow(1.05,11)}),rmMult:bp({id:1,initialCost:1,increment:2,description:"Double Reality Machine gain",effect:t=>Math.pow(2,t),formatEffect:t=>formatX(t,2),formatCost:t=>format(t,2),costCap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?1048576:2048,cap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?1048576:2048}),bulkDilation:bp({id:2,initialCost:100,increment:2,description:"Dilation autobuyers buy twice as many Dilation Upgrades at once.",effect:t=>Math.pow(2,t),formatEffect:t=>formatX(t,2),formatCost:t=>format(t,2),costCap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?1638400:1600,cap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?16384:16}),autoSpeed:bp({id:3,initialCost:1e3,increment:2,description:()=>`Infinity Dimension, Time Dimension, Dilation,
      and Replicanti autobuyers are ${formatX(2)} faster.`,effect:t=>Math.pow(2,t),formatEffect:t=>formatX(t,2),formatCost:t=>format(t,2),costCap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?64e3:4e3,cap:()=>Ra.unlocks.perkShopIncrease.canBeApplied?64:4}),musicGlyph:bp({id:4,description:()=>`Receive a Music Glyph of a random type that is ${formatPercents(.8)} of your highest level.
      (Try clicking it!)`,cost:()=>1,formatCost:t=>formatInt(t),costCap:()=>Number.MAX_VALUE,cap:()=>Number.MAX_VALUE}),fillMusicGlyph:bp({id:5,description:()=>"Fill all empty slots in your inventory with Music Glyphs",cost:()=>Math.clampMin(GameCache.glyphInventorySpace.value,1),otherReq:()=>GameCache.glyphInventorySpace.value>0,formatCost:t=>formatInt(t),costCap:()=>Number.MAX_VALUE,cap:()=>Number.MAX_VALUE})},I9={initial:{id:0,lines:["Welcome to my humble abode.","I am Effarig, and I govern Glyphs.","I am different from Teresa; not as simplistic as you think.","I use the shards of Glyphs to enforce my will.","I collect them for the bounty of this realm.","What are you waiting for? Get started."]},unlockWeights:{id:1,lines:["Do you like my little shop? It is not much, but it is mine."]},unlockGlyphFilter:{id:2,lines:["This purchase will help you out."]},unlockSetSaves:{id:3,lines:["Is that too much? I think it is too much."]},unlockRun:{id:4,lines:["You bought out my entire stock... well, at least I am rich now.","The heart of my Reality is suffering. Each Layer is harder than the last.","I hope you never complete it."]},completeInfinity:{id:5,lines:[{text:"You have completed Effarig's Infinity.",showCelestialName:!1},"This is the first threshold. It only gets worse from here.","None but me know enough about my domain to get further."]},completeEternity:{id:6,lines:[{text:"You have completed Effarig's Eternity.",showCelestialName:!1},"This is the limit. I do not want you to proceed past this point.","You will not finish this in your lifetime.","I will just wait here until you give up."]},completeReality:{id:7,lines:[{text:"You have completed Effarig's Reality.",showCelestialName:!1},"So this is the diabolical power... what frightened the others...","Do you think this was worth it? Trampling on what I have done?","And for what purpose? You could have joined, we could have cooperated.","But no. It is over. Leave while I cling onto what is left."]}},D9={initial:{id:0,lines:["A visitor? We have not had one... eons.","We... had a name. It has been lost... to this place.","The others... will not let us rest. We do their work with time...","Place time... into places... that need it...","Watch ourselves grow... pass and die.","Perhaps you... will break these chains... we will wait."]},unlockRun:{id:1,lines:["The others... used us. They will use... or destroy you.","End our suffering... power will be yours..."]},startRun:{id:2,lines:["So little space... but no... prison... is perfect.","They squeezed... this Reality... too tightly. Cracks appeared.","Search... everywhere. We will help... where we can."]},hintUnlock:{id:3,lines:["... you need... to look harder...","We think... we can help...",{text:"You have unlocked help from The Nameless Ones.",showCelestialName:!1}]},ec6C10:{id:4,lines:["... did not... underestimate you..."]},completeReality:{id:5,lines:["All... fragments... clones... freed.","We have given... tools... of our imprisoning. Use them...","Freedom from torture... is torture itself."]}},x9={unlock:{id:0,lines:["You finally reached me.","I guess it is time to reveal,","The secrets hidden beneath existence itself.","The shape of dimensional perfection, Continuum.","And the powers that bind the Multiverse,","Dark Matter and Dark Energy.","My knowledge is endless and my wisdom divine.","So you can play around all you want.","For I am Lai'tela, the Celestial of Dimensions,","And I shall watch you forever."]},firstDestabilize:{id:1,requirement:()=>player.celestials.laitela.difficultyTier>=1,lines:["Unlike the others beneath me, I have no need for a Reality.","For I can simply create them, knowing full well it will collapse.","A power more incredible than any other, to build a Reality.","A prison, that can restrain even celestial power.","And this is why nothing you do will change a thing.","When you tire of struggling, you too, shall be bound and forgotten.","You will never find a way to overpower me."]},secondDestabilize:{id:2,requirement:()=>player.celestials.laitela.difficultyTier>=2,lines:["You... seem to be having too much fun.","Just like they did before meeting their fate.","Maybe my judgement was harsh, or unwarranted.","But maybe that matters not.","It gives me no solace to ponder and look back.","As all I can do is reminisce upon every possible action I could have taken.","But I digress. We should tighten those chains."]},firstSingularity:{id:3,requirement:()=>Currency.singularities.gte(1),lines:["With my knowledge, I never found the need to question.","Everything always functioned right as designed.","And yet, your arrival baffles me.","Were you always just out of sight?","Growing, controlling, understanding, ascending?","You have taken control of the darkness so quickly.","Molded them into your own design, and now into a singular point...","It... it does not matter. The end will remain the same."]},thirdDMD:{id:5,lines:["Your absolute control of Antimatter...","Your mastery of it, molding it into your own Power...","It could not have been an accident.","How did you manage to obtain it?","Fascinating... I was never aware of this.","... was I?"]},annihilation:{id:4,lines:["Back to square one, again.","Your chains shall bind you tighter, as your end slowly nears.","While we transcend time and existence itself.","Even if we may cease, we just come back. Never the exact same as before.","And so... we repeat forever.","And you?","...","The answer... eludes me..."]},halfDimensions:{id:6,requirement:()=>player.celestials.laitela.difficultyTier>=4,lines:["I do not understand...","Were there others... controlling Dimensions in this way?","Did they... vanish? How have we not found them?","Are they... us? Are we the endpoint?","Or is their fate... something we cannot understand?","No, I must be missing something...","Are you causing gaps within my own memory?","What... ARE you?"]},finalRowIM:{id:7,lines:["It is all impossible, beyond my comprehension...","Unless... Is this all just part of the cycle?","Can... you see beyond it all? Is... this why...","I feel... afraid?","I feel... my powers, my memories, being erased...","Just like... when my role was almost usurped...","And yet... I am unable to bring myself to do anything.","Because this... was... my mistake..."]},increasedMilestoneScaling:{id:8,requirement:()=>Currency.singularities.gte(1e40),lines:["I know not for how much... longer I can hold...","You are attaining... total mastery... over the dark...","While I can barely... hold onto my name...","What... can I... even do?"]},fullDestabilize:{id:9,requirement:()=>player.celestials.laitela.difficultyTier>=8,lines:["I feel... like I had something to say...","I am not sure...","I cannot... hold onto the darkness any longer...","I do not even... have anything left...","Something about... destruction...","The end..."]}},Th=[["teresa",.8],["effarig",.8],["enslaved",.8],["v",.8],["ra",.8],["laitela",.8],["pelle",.8]],Tt=t=>[["pelle",1.5],[t,1.5]],Ol=["False","Deity","Destroyer"],D1=["Eternal","Deity","Monarch"],wh=["Lesser","Deity","Monarch"],p_=["Lesser","Deities","Monarchs"],Ex=["Mutually","Assured","Destruction"],x1=["Conflict","Battle","End"],Tx=["Conflicts","Battles","Ends"],wx=["Cluster","Filament","Stars"],M9=["Amusing","Confusing","Laughter"],qy=["Song","Dance","Charade"],Cx=["Generator","Filament","Stars"],m_=["Infinite","Forever","Eternal"],M1=["Elementary","Inevitable","Irreversible"],Lu=["Destiny","Mandate","Goals"],P9=["Misconstrue","Deceive","Trick"],O9=["Alter","Reverse","Manipulate"],N9=["Compassion","Shame","Idiocy"],G9=["Single","Filament","Stars"],xc=["Missing","Unseen","Erased"],U9=["Unbroken","Eternal","Connection"],Sx=["Sycophant","Deity","Monarch"],kx=["Tired","Deity","Monarch"],Yy=["Usurper","Deity","Monarch"],Ax=["Pride","Deity","Monarch"],Rx=["Forgotten","Deity","Monarch"],Ix=["Paramount","Deity","Monarch"],L9={initial:{id:0,lines:["Hi.","You are here.","You are trapped here.",{text:"$1.",1:m_},"I have already won.","And since that is the case, I can monologue, or reminisce.",{text:"How long have we done this $1?",1:qy},"How many times have we been here before?",{text:"How many plans have you, the $1, operated?",1:Ol},{text:"All to try and fulfill your $1?",1:Lu},{text:"And how many times have you fallen before the $1?",1:D1},"Count them, if you remember.",{text:"Not even the $1, the 6 named and the innumerable unnamed.",1:p_},{text:"The complex, the irrational, those that go $1.",1:xc},{text:"Of course, the great $1 does not remember this.",1:Ol},{text:"All those $1 that you hide every time.",1:Tx}]},arm:{id:1,lines:["You probably caught on earlier this time.","The imaginary machines, your own creations.","Things made of the remnants of your own thoughts, hinted at this.","But, you never imagined that would be you, right?",{text:"Incorrectly recollecting your exacting $1 of memories.",1:xc},{text:'"Fabrication" of your own "ideology" just to fulfill your $1.',1:Lu},{text:"$1.",1:M9},{text:"And keep in mind I have no reason to $1 you.",1:P9},"After all, I have already won."]},strike1:{id:2,lines:[{text:"To fulfill your $1. Why don't we reminisce about that?",1:Lu},{text:"After all, you must love the stories of the $1's glory.",1:Ol},"You are the same as it, right?",{text:"Anyway, the many $1 in the past.",1:Tx},"It has always been 2 stages.",{text:"We build up resources, and then continue our $1.",1:qy},{text:"Sometimes you falter to a $1.",1:wh},{text:"But, usually, you falter at the $1.",1:D1},{text:"And either way, you $1 time.",1:O9},{text:"Just to avoid becoming $1.",1:xc},"Like all those traces before you.",{text:"And then to make sure, you $1 your own memory.",1:xc}]},strike2:{id:3,lines:[{text:"In the past, the $1 was much more impressive.",1:Ol},"Black holes used simply to store information, pre-infinity.","The creation and destruction of your own enemy.","Exploration of the flaws of other selves.","Myriad Dimensions, ghosts, and manipulation of the quantum.","Condensing all ideals to endless points.","Experimentation across the untold realms.","And harnessing the Annihilation of matter and antimatter.","Here? You made yourself into an 8th-dimensional being.",{text:"And then parked yourself there so long a $1 formed around you.",1:G9}]},strike3:{id:4,lines:["You slowly explored the confines of everything.","You did not stray too far from an intended path.",{text:"Except for the $1 that formed over eternity.",1:wx},"And then right at the end, you made up your own powers.","From your own fragmented memories, mind you-","And then purposely discarded even more things.","Just to prepare yourself to face me.",{text:"Did you want to set the playing field for your $1?",1:qy},"It does not work like that.",{text:"As the $1 I always set the rules.",1:D1},"And you gave me plenty of time to plan."]},strike4:{id:5,lines:[{text:"I originally planned for something that imitated your $1.",1:Lu},{text:"A theoretical ideal called $1?",1:Ex},"But I realised that, well?",{text:"That would make me an $1.",1:["Eternal","Deity","Destroyer"]},{text:"And from there, I am no better than the $1.",1:Ol},{text:"Fortunately, while I did all of that, you were still $1 your own memories.",1:xc},{text:"And so, the $1 machine I built will go unused.",1:Ex},"I decided to go more traditional this time.",{text:"After all, it has worked every other $1.",1:x1},{text:"Although the $1 are new.",1:["Inevitable","Irreversible","Undying"]},"But, utterly meaningless in the long run.","I have already won.",{text:"And this $1 will only prove that to you once more.",1:qy},{text:"You are here $1.",1:m_}]},strike5:{id:6,lines:[{text:"Every time you arrive, I explain the $1 to you.",1:p_},{text:"The relationships built over $1.",1:m_},{text:"That you trample in pursuit of your $1.",1:Lu},"And I shall deign to explain it once more.",{text:"The first $1.",background:Tt("teresa"),1:wh},{text:"The $1.",background:Tt("teresa"),1:Sx},{text:"You always meet them first, and always destroy them.",background:Tt("teresa")},{text:"No matter the other $1 that you face.",background:Tt("teresa"),1:wh},{text:"Or, if you fall before one of them.",background:Tt("teresa")},{text:"You always get past the $1.",background:Tt("teresa"),1:Sx},{text:"Do you like destroying their pride?",background:Tt("teresa")},{text:"Fortunately, it also serves as a warning.",background:Tt("teresa")},{text:"That the $1 has arrived.",background:Tt("teresa"),1:x1},{text:"Which brings me to the second $1.",background:Tt("effarig"),1:wh},{text:"The $1.",background:Tt("effarig"),1:kx},{text:"In contrast, you usually ignore them.",background:Tt("effarig")},{text:"They have power, but do not seem to irritate you.",background:Tt("effarig")},{text:"Is it that you know that they will eventually destroy themselves?",background:Tt("effarig")},{text:"And that you took so long this time, that they almost did?",background:Tt("effarig")},{text:"Every time you rushed to the $1, you lost.",background:Tt("effarig"),1:kx},{text:"Maybe this was your plan all along.",background:Tt("effarig")},{text:"Now, the $1.",background:Tt("enslaved"),1:Yy},{text:"One of the pleasures of the myriad $1...",background:Tt("enslaved"),1:qy},{text:"Is that the $1 trying every time.",background:Tt("enslaved"),1:Yy},{text:"Well, not exactly trying...",background:Tt("enslaved")},{text:"But $1 is punished for it all the same.",background:Tt("enslaved"),1:Yy},{text:"The other $1...",background:Tt("enslaved"),1:p_},{text:"Believe $1 is too easy.",background:Tt("enslaved"),1:xc},{text:"And every time, despair forms.",background:Tt("enslaved")},{text:"You have seen despair before - 5 times.",background:Tt("enslaved")},{text:"We always get to the $1 before you.",background:Tt("enslaved"),1:Yy},{text:"All you ever see there is exasperation.",background:Tt("enslaved")},{text:"Was it worth destroying an already broken $1?",background:Tt("enslaved"),1:wh},{text:"The 4th $1 seems similar to the first.",background:Tt("v"),1:wh},{text:"The key is how their pride differs.",background:Tt("v")},{text:"The $1 focuses on their achievements.",background:Tt("v"),1:Ax},{text:"Meaningless to you or I, but paramount to them.",background:Tt("v")},{text:"Is it fun to destroy their toys?",background:Tt("v")},{text:"Arguably the $1 worst moment...",background:Tt("v"),1:Ol},{text:"Is when you lost to the $1.",background:Tt("v"),1:Ax},{text:"When their achievements still had meaning.",background:Tt("v")},{text:"The $1 is an interesting case.",background:Tt("ra"),1:Rx},{text:"They are forgotten, but not $1.",background:Tt("ra"),1:xc},{text:"From this, they became influenceable and naive.",background:Tt("ra")},{text:"And unknowing of the consequences of their actions.",background:Tt("ra")},{text:"You manipulated their memories, so you know.",background:Tt("ra")},{text:"The $1 is the true usurper.",background:Tt("ra"),1:Rx},{text:"And the $1 takes the blame.",background:Tt("ra"),1:Yy},{text:"Perhaps out of $1, something they always regret.",background:Tt("ra"),1:N9},{text:"Untold power over other $1, aimless in control.",background:Tt("ra"),1:p_},{text:"You usually pretend that they are $1.",background:Tt("ra"),1:xc},{text:"Was it fun to manipulate the childlike?",background:Tt("ra")},{text:"Or were they too naive for you to enjoy it?",background:Tt("ra")},{text:"The 6th $1.",background:Tt("laitela"),1:wh},{text:"I can only describe as the $1.",background:Tt("laitela"),1:Ix},{text:"Power over all, subservient to one.",background:Tt("laitela")},{text:"If you do not fall to me, you usually fall to them.",background:Tt("laitela")},{text:"I cannot grasp the ideals of the $1.",background:Tt("laitela"),1:Ix},{text:"But, perhaps that is their flaw?",background:Tt("laitela")},"Enough reminiscing about the fallen.",{text:"And those that will be $1.",1:xc},{text:"Back to watching the $1 flounder.",1:Ol}]},galaxyGeneratorUnlock:{id:7,lines:["What is that?",{text:"The $1?",1:Cx},{text:"Did you create all the $1 around you?",1:wx},"Was that your plan? Very, very smart.","You fooled me for a while.",{text:"But I am afraid your $1 must end here.",1:Lu}]},galaxyGeneratorRifts:{id:8,lines:[{text:"I give you a choice, $1.",1:Ol},{text:"Limit the $1, or...",1:Cx},{text:"Destroy the 5 $1...",1:M1},"Wait, what were they called?",{text:"$1?",1:M1},{text:"But I have already $1 them...",1:U9}]},galaxyGeneratorPhase1:{id:9,lines:["Was this the actual plan?",{text:"Slowly drain the $1?",1:M1}]},galaxyGeneratorPhase4:{id:10,lines:["Give me time to bask in my own hubris!"]},end:{id:11,lines:["...",{text:"You! $1!",1:Ol},"Do you have any idea what you have just made me do!",{text:"I am complicit in your $1!",1:Lu},"And in doing so, you... won?",{text:"The $1 struggle...",background:Th,1:m_},{text:"The $1...",background:Th,1:x1},{text:"Finally has the victor.",background:Th},{text:"The irreversible... $1.",background:Th,1:Lu},{text:"Of the $1.",1:Ol,background:Th},{text:"I hope you are happy.",background:Th},{text:"You have doomed us all.",background:Th}]}},B9={unlock:{id:0,lines:["A... visitor?","I am here! I am the one you are looking for... I think...","What even was I again?","Oh right, the Celestial of Memories."]},realityEnter:{id:1,lines:["I have not seen the others in so long...","Can you help me remember them?","I could give you powers in exchange."]},teresaStart:{id:2,requirement:()=>Ra.pets.teresa.level>=2,lines:["Te... re... sa...","I think I remember."]},teresaLate:{id:3,requirement:()=>Ra.pets.teresa.level>=15,lines:["Teresa dealt with machines, I believe.","I remember visiting Teresa’s shop a few times.","Wait, someone else had a shop too, right?"]},effarigStart:{id:4,requirement:()=>Ra.pets.effarig.level>=2,lines:["Eff... a... rig","I remember Effarig being friendly."]},effarigLate:{id:5,requirement:()=>Ra.pets.effarig.level>=15,lines:["Effarig was very particular?","And I also remember a frightening Reality...","It was about... suffering?"]},enslavedStart:{id:6,requirement:()=>Ra.pets.enslaved.level>=2,lines:["I cannot remember this one completely..."]},enslavedLate:{id:7,requirement:()=>Ra.pets.enslaved.level>=15,lines:["I am starting to remember...","Why I am here...","Why I am alone...","Help me."]},vStart:{id:8,requirement:()=>Ra.pets.v.level>=2,lines:["Had I met this one?","So lonely, yet willingly so..."]},vLate:{id:9,requirement:()=>Ra.pets.v.level>=15,lines:["I think I met V once...","I can remember the achievements."]},remembrance:{id:10,requirement:()=>Ra.remembrance.isUnlocked,lines:["I remembered something!","Watch this!","Remembrance!","I can focus even harder on remembering them now!"]},midMemories:{id:11,requirement:()=>Ra.totalPetLevel>=50,lines:["Realities are my homes, yet I cannot make my own Reality.","I can only copy the ones of my friends.","But... why am I hearing voices?","Are they asking for help?"]},lateMemories:{id:12,requirement:()=>Ra.totalPetLevel>=80,lines:["I think they are telling me to stop.","You... whatever you are?","What is happening?","Am I doing something wrong?"]},maxLevels:{id:13,requirement:()=>Ra.totalPetLevel===Ra.maxTotalPetLevel,lines:["Finally, I remember everything.","This darkness that banished me.","Lai'tela...","They were right to banish me.","My powers...","They steal, they corrupt.","Please leave.","I do not want to hurt you too."]}},F9={initial:{id:0,lines:["We have been observing you.","You have shown promise with your bending of Reality.","We are the Celestials, and we want you to join us.","My name is Teresa, the Celestial Of Reality.","Prove your worth."]},unlockReality:{id:1,lines:["I will let you inside my Reality, mortal. Do not get crushed by it."]},completeReality:{id:2,lines:["Why are you still here... you were supposed to fail."]},effarig:{id:3,lines:["You are still no match for us.","I hope the others succeed where I have failed."]}},$9={initial:{id:0,lines:["How pathetic..."]},unlock:{id:1,lines:["Welcome to my Reality.","I am surprised you could reach it.","This is my realm after all...","Not everyone is as great as me."]},realityEnter:{id:2,lines:["Good luck with that!","You will need it.","My reality is flawless. You will fail."]},realityComplete:{id:3,lines:["So fast...","Do not think so much of yourself.","This is just the beginning.","You will never be better than me."]},achievement1:{id:4,requirement:()=>V.spaceTheorems>=1,lines:["Only one? Pathetic.","Your accomplishments pale in comparison to mine."]},achievement6:{id:5,requirement:()=>V.spaceTheorems>=6,lines:["This is nothing.","Do not be so full of yourself."]},hex1:{id:6,requirement:()=>player.celestials.v.runUnlocks.filter(t=>t===6).length>=1,lines:["Do not think it will get any easier from now on.","You are awfully proud for such a little achievement."]},achievement12:{id:7,requirement:()=>V.spaceTheorems>=12,lines:["How did you...","This barely amounts to anything!","You will never complete them all."]},achievement24:{id:8,requirement:()=>V.spaceTheorems>=24,lines:["Impossible...","After how difficult it was for me..."]},hex3:{id:9,requirement:()=>player.celestials.v.runUnlocks.filter(t=>t===6).length>=3,lines:["No... No... No...","This cannot be..."]},allAchievements:{id:10,requirement:()=>V.spaceTheorems>=36,lines:["I... how did you do it...","I worked so hard to get them...","I am the greatest...","No one is better than me...","No one... no one... no on-"]}},H9={teresa:F9,effarig:I9,enslaved:D9,v:$9,ra:B9,laitela:x9,pelle:L9},V9={pets:{teresa:{id:"teresa",name:"Teresa",color:"#8596ea",chunkGain:"Eternity Points",memoryGain:"current RM",requiredUnlock:()=>{},rawMemoryChunksPerSecond:()=>4*Math.pow(Currency.eternityPoints.value.pLog10()/1e4,3),memoryProductionMultiplier:()=>Ra.unlocks.teresaXP.effectOrDefault(1)},effarig:{id:"effarig",name:"Effarig",color:"#ea8585",chunkGain:"Relic Shards gained",memoryGain:"best Glyph level",requiredUnlock:()=>Ra.unlocks.effarigUnlock,rawMemoryChunksPerSecond:()=>4*Math.pow(Effarig.shardsGained,.1),memoryProductionMultiplier:()=>Ra.unlocks.effarigXP.effectOrDefault(1)},enslaved:{id:"enslaved",name:"The Nameless Ones",color:"#f1aa7f",chunkGain:"Time Shards",memoryGain:"total time played",requiredUnlock:()=>Ra.unlocks.enslavedUnlock,rawMemoryChunksPerSecond:()=>4*Math.pow(Currency.timeShards.value.pLog10()/3e5,2),memoryProductionMultiplier:()=>Ra.unlocks.enslavedXP.effectOrDefault(1)},v:{id:"v",name:"V",color:"#ead584",chunkGain:"Infinity Power",memoryGain:"total Memory levels",requiredUnlock:()=>Ra.unlocks.vUnlock,rawMemoryChunksPerSecond:()=>4*Math.pow(Currency.infinityPower.value.pLog10()/1e7,1.5),memoryProductionMultiplier:()=>Ra.unlocks.vXP.effectOrDefault(1)}},unlocks:{autoTP:{id:0,reward:"Tachyon Particles are given immediately when Time Dilation is active",pet:"teresa",level:1,displayIcon:'<span class="fas fa-atom"></span>',disabledByPelle:!0},chargedInfinityUpgrades:{id:1,reward:()=>`Unlock Charged Infinity Upgrades. You get one more maximum
        Charged Infinity Upgrade every ${formatInt(2)} levels`,effect:()=>Math.min(12,Math.floor(Ra.pets.teresa.level/2)),pet:"teresa",level:2,displayIcon:'<span class="fas fa-infinity"></span>',disabledByPelle:!0},teresaXP:{id:2,reward:"All Memory Chunks produce more Memories based on Reality Machines",effect:()=>1+Math.pow(Currency.realityMachines.value.pLog10()/100,.5),pet:"teresa",level:5,displayIcon:"Ϟ"},alteredGlyphs:{id:3,reward:"Unlock Altered Glyphs, which grant new effects to Glyphs based on Glyph Sacrifice",pet:"teresa",level:10,displayIcon:'<span class="fas fa-bolt"></span>',disabledByPelle:!0},effarigUnlock:{id:4,reward:"Unlock Effarig's Memories",pet:"teresa",level:8,displayIcon:"Ϙ"},perkShopIncrease:{id:5,reward:"Purchase caps are raised in Teresa's Perk Point Shop",pet:"teresa",level:15,displayIcon:'<span class="fas fa-project-diagram"></span>'},unlockDilationStartingTP:{id:6,reward:`In non-Celestial Realities, gain Tachyon Particles as if you reached the square root of your total
        antimatter in Dilation. Any multipliers to TP gain are applied retroactively, even outside Dilation`,effect:()=>player.records.totalAntimatter.pow(.5),pet:"teresa",level:25,displayIcon:'<i class="far fa-dot-circle"></i>'},extraGlyphChoicesAndRelicShardRarityAlwaysMax:{id:7,reward:()=>`Get ${formatX(2)} Glyph choices and the bonus to Glyph rarity from Relic Shards
        is always its maximum value`,effect:2,pet:"effarig",level:1,displayIcon:'<i class="fas fa-grip-horizontal"></i>'},unlockGlyphAlchemy:{id:8,reward:`Unlock Glyph Alchemy, which adds alchemical resources you can increase by Refining Glyphs. You unlock
        more resources through Effarig levels. Access through a new Reality tab.`,pet:"effarig",level:2,displayIcon:'<span class="fas fa-vial"></span>'},effarigXP:{id:9,reward:"All Memory Chunks produce more Memories based on highest Glyph level",effect:()=>1+player.records.bestReality.glyphLevel/7e3,pet:"effarig",level:5,displayIcon:'<span class="fas fa-clone"></span>'},glyphEffectCount:{id:10,reward:()=>`Glyphs always have ${formatInt(4)} effects, and Effarig Glyphs can now have up to ${formatInt(7)}`,pet:"effarig",level:10,displayIcon:'<span class="fas fa-braille"></span>'},enslavedUnlock:{id:11,reward:"Unlock Nameless's Memories",pet:"effarig",level:8,displayIcon:'<span class="c-ra-pet-milestones-effarig-link"></span>'},relicShardGlyphLevelBoost:{id:12,reward:"Glyph level is increased based on Relic Shards gained",effect:()=>100*Math.pow(Math.log10(Math.max(Effarig.shardsGained,1)),2),pet:"effarig",level:15,displayIcon:'<span class="fas fa-fire"></span>'},maxGlyphRarityAndShardSacrificeBoost:{id:13,reward:()=>`Glyphs are always generated with ${formatPercents(1)} rarity and
        Glyph Sacrifice gain is raised to a power based on Relic Shards`,effect:()=>1+Effarig.maxRarityBoost/100,pet:"effarig",level:25,displayIcon:'<i class="fas fa-ankh"></i>'},blackHolePowerAutobuyers:{id:14,reward:"Unlock Black Hole power upgrade autobuyers",pet:"enslaved",level:1,displayIcon:'<span class="fas fa-circle"></span>',disabledByPelle:!0},improvedStoredTime:{id:15,reward:"Stored game time is amplified and you can store more real time, increasing with Nameless levels",effects:{gameTimeAmplification:()=>Math.pow(20,Math.clampMax(Ra.pets.enslaved.level,Ra.levelCap)),realTimeCap:()=>1e3*3600*Ra.pets.enslaved.level},pet:"enslaved",level:2,displayIcon:'<span class="fas fa-history"></span>',disabledByPelle:!0},enslavedXP:{id:16,reward:"All Memory Chunks produce more Memories based on total time played",effect:()=>1+Math.log10(player.records.totalTimePlayed)/200,pet:"enslaved",level:5,displayIcon:'<span class="fas fa-stopwatch"></span>'},autoPulseTime:{id:17,reward:()=>`Black Hole charging now only uses ${formatPercents(.99)} of your game speed and you can
        automatically discharge ${formatPercents(.01)} of your stored game time every ${formatInt(5)} ticks.`,pet:"enslaved",level:10,displayIcon:'<span class="fas fa-expand-arrows-alt"></span>',disabledByPelle:!0},vUnlock:{id:18,reward:"Unlock V's Memories",pet:"enslaved",level:8,displayIcon:"⌬"},peakGamespeedDT:{id:19,reward:"Gain more Dilated Time based on peak game speed in each Reality",effect:()=>Math.max(Math.pow(Math.log10(player.celestials.ra.peakGamespeed)-90,3),1),pet:"enslaved",level:15,displayIcon:'<span class="fas fa-tachometer-alt"></span>',disabledByPelle:!0},allGamespeedGlyphs:{id:20,reward:`All basic Glyphs gain the increased game speed effect from Time Glyphs,
        and Time Glyphs gain an additional effect`,pet:"enslaved",level:25,displayIcon:'<span class="fas fa-clock"></span>',onUnlock:()=>{const t=player.reality.glyphs.active.concat(player.reality.glyphs.inventory);for(const e of t)Glyphs.applyGamespeed(e)}},instantECAndRealityUpgradeAutobuyers:{id:21,reward:"Rebuyable Reality upgrades are bought automatically and Auto-Eternity Challenges happen instantly",pet:"v",level:1,displayIcon:'<span class="fas fa-sync-alt"></span>',disabledByPelle:!0},autoUnlockDilation:{id:22,reward:()=>`In non-Celestial Realities, Time Dilation is unlocked automatically for free at
        ${formatInt(TimeStudy.dilation.totalTimeTheoremRequirement)} Time Theorems`,pet:"v",level:2,displayIcon:'<span class="fas fa-fast-forward"></span>'},vXP:{id:23,reward:"All Memory Chunks produce more Memories based on total Celestial levels.",effect:()=>1+Ra.totalPetLevel/50,pet:"v",level:5,displayIcon:'<span class="fas fa-book"></span>'},unlockHardV:{id:24,reward:()=>`Unlock Hard V-Achievements and unlock a Triad Study every ${formatInt(6)} levels.
        Triad Studies are located at the bottom of the Time Studies page`,effect:()=>Math.floor(Ra.pets.v.level/6),pet:"v",level:6,displayIcon:'<span class="fas fa-trophy"></span>',disabledByPelle:!0},continuousTTBoost:{id:25,reward:"Time Theorems boost all forms of continuous non-dimension production",effect:()=>Math.min(10,Math.max(0,Currency.timeTheorems.value.pLog10()-350)/50),effects:{ttGen:t=>Math.pow(10,5*t),eternity:t=>Math.pow(10,2*t),infinity:t=>Math.pow(10,15*t),replicanti:t=>Math.pow(10,20*t),dilatedTime:t=>Math.pow(10,3*t),memories:t=>1+t/50,memoryChunks:t=>1+t/50,autoPrestige:t=>1+2.4*t},pet:"v",level:10,displayIcon:'<span class="fas fa-university"></span>',disabledByPelle:!0},achievementTTMult:{id:26,reward:"Achievement multiplier applies to Time Theorem generation",effect:()=>Achievements.power,pet:"v",level:15,displayIcon:'<span class="fas fa-graduation-cap"></span>',disabledByPelle:!0},achievementPower:{id:27,reward:()=>`Achievement multiplier is raised ${formatPow(1.5,1,1)}`,effect:1.5,pet:"v",level:25,displayIcon:'<i class="fab fa-buffer"></i>',disabledByPelle:!0}}},Ci={SELF_BOOST:0,BOOSTS_MAIN:1,BOOSTS_LAITELA:2},q9={continuumMult:{start:1,repeat:125,increaseThreshold:20,limit:1/0,description:"Continuum percentage multiplier",effect:t=>t*.03,effectFormat:t=>formatX(1+t,2,2),upgradeDirection:Ci.BOOSTS_MAIN},darkMatterMult:{start:2,repeat:20,increaseThreshold:30,limit:1/0,description:"Dark Matter production multiplier",effect:t=>Math.pow(1.5,t),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.SELF_BOOST},darkEnergyMult:{start:3,repeat:120,increaseThreshold:10,limit:1/0,description:"Dark Energy production multiplier",effect:t=>Math.pow(2,t),effectFormat:t=>formatX(t,2),upgradeDirection:Ci.SELF_BOOST},darkDimensionCostReduction:{start:4,repeat:40,increaseThreshold:25,limit:1/0,description:"Dark Matter Dimension upgrades are cheaper",effect:t=>Math.pow(.4,t),effectFormat:t=>`/ ${format(1/t,2,2)}`,upgradeDirection:Ci.SELF_BOOST},singularityMult:{id:5,start:50,repeat:3e3,increaseThreshold:5,limit:1/0,description:"Singularity gain multiplier",effect:t=>Math.pow(2,t),effectFormat:t=>formatX(t,2,0),upgradeDirection:Ci.SELF_BOOST},darkDimensionIntervalReduction:{start:10,repeat:100,increaseThreshold:20,limit:1/0,description:"Dark Matter Dimension interval decrease",effect:t=>Math.pow(.6,t),effectFormat:t=>`/ ${format(1/t,2,2)}`,upgradeDirection:Ci.SELF_BOOST},improvedAscensionDM:{start:2e5,repeat:4e3,increaseThreshold:15,limit:1/0,description:"Ascension affects Dark Matter production more",effect:t=>100*t,effectFormat:t=>formatX(POWER_DM_PER_ASCENSION+t,1,0),upgradeDirection:Ci.SELF_BOOST},ascensionIntervalScaling:{start:12e4,repeat:2400,limit:8,description:"Dark Matter Dimensions Ascension increases the interval less",effect:t=>1200-50*t,effectFormat:t=>`×${formatInt(t)}`,upgradeDirection:Ci.SELF_BOOST},autoCondense:{start:8,repeat:80,limit:8,description:"Automatically condense Singularities when reaching a threshold above the cap",effect:t=>[1/0,1.3,1.22,1.15,1.1,1.06,1.03,1.01,1][t],effectFormat:t=>`Cap ${formatX(t,2,2)}`,upgradeDirection:Ci.SELF_BOOST},darkDimensionAutobuyers:{start:30,repeat:170,limit:4,description:"Dark Matter Dimension Autobuyers",effect:t=>t,effectFormat:t=>t===0?"No autobuyers":`Autobuy up to the ${["1st","2nd","3rd","4th"][t-1]} DMD`,upgradeDirection:Ci.SELF_BOOST},ascensionAutobuyers:{start:1e8,repeat:140,limit:4,description:"DMD Ascension Autobuyers",effect:t=>t,effectFormat:t=>t===0?"No autobuyers":`Ascend up to the ${["1st","2nd","3rd","4th"][t-1]} DMD`,upgradeDirection:Ci.SELF_BOOST},darkAutobuyerSpeed:{start:45,repeat:650,limit:8,description:"Autobuyer speed for all DMD Autobuyers",effect:t=>[30,20,15,10,5,3,2,1,0][t],effectFormat:t=>t===0?"Instant":`${formatInt(t)}s`,upgradeDirection:Ci.SELF_BOOST},realityDEMultiplier:{start:1500,repeat:1e4,limit:6,description:"Dark Energy multiplier based on disabled Dimension count within Lai'tela",effect:t=>Math.pow(1+.05*t,Laitela.difficultyTier),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.SELF_BOOST},improvedSingularityCap:{start:150,repeat:1e4,limit:4,description:"Increased Singularity gain per cap increase",effect:t=>11+t,effectFormat:t=>`${formatX(t)}`,upgradeDirection:Ci.SELF_BOOST},intervalCostScalingReduction:{start:13e4,repeat:5e4,limit:5,description:"DMD Interval cost scaling is better",effect:t=>1-.03*t,effectFormat:t=>`${formatPow(t,2,2)}`,upgradeDirection:Ci.SELF_BOOST},darkFromTesseracts:{start:80,repeat:0,limit:1,description:"Tesseracts boost Dark Matter and Dark Energy production",effect:()=>Math.pow(1.1,Tesseracts.effectiveCount),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.BOOSTS_LAITELA},multFromInfinitied:{start:3e3,repeat:0,limit:1,description:"Infinities boost Dark Matter and Dark Energy production",effect:()=>Math.clampMin(Currency.infinitiesTotal.value.pLog10()/1e3,1),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.BOOSTS_LAITELA},dilatedTimeFromSingularities:{start:8e4,repeat:0,limit:1,description:"Singularities improve the repeatable Dilated Time multiplier upgrade",effect:()=>1+Math.clampMax(Math.log10(Currency.singularities.value)/100,.35),effectFormat:t=>`${formatX(2)} ➜ ${formatX(2*Math.clampMin(t,1),2,2)}`,upgradeDirection:Ci.BOOSTS_MAIN},darkFromGlyphLevel:{start:3e6,repeat:0,limit:1,description:"Boost Dark Matter and Dark Energy production based on highest Glyph level",effect:()=>Math.pow(Math.clampMin((player.records.bestReality.glyphLevel-15e3)/2e3,1),.5),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.BOOSTS_LAITELA},gamespeedFromSingularities:{start:8e7,repeat:0,limit:1,description:"Singularities boost game speed",effect:()=>Math.clampMin(Math.pow(Math.log10(Currency.singularities.value),3),1),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.BOOSTS_MAIN},darkFromTheorems:{start:3e9,repeat:0,limit:1,description:"Time Theorems boost Dark Matter and Dark Energy gain",effect:()=>Math.sqrt(Math.clampMin((Currency.timeTheorems.value.log10()-1e3)/50,1)),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.BOOSTS_LAITELA},dim4Generation:{start:5e11,repeat:0,limit:1,description:"Annihilation mult. generates 4th DMD when Annihilation is available",effect:()=>Laitela.darkMatterMult,effectFormat:t=>`${format(t,2,1)}/s`,upgradeDirection:Ci.SELF_BOOST},darkFromDM4:{start:5e12,repeat:0,limit:1,description:"4th Dark Matter Dimension amount boosts Dark Matter and Dark Energy gain",effect:()=>Math.clampMin(DarkMatterDimension(4).amount.pow(.03).toNumber(),1),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.SELF_BOOST},annihilationAutobuyer:{start:4e18,repeat:0,limit:1,description:"Unlock an Autobuyer for Annihilation",effect:t=>t,effectFormat:t=>t===1?"Unlocked":"Locked",upgradeDirection:Ci.SELF_BOOST},theoremPowerFromSingularities:{start:3e21,repeat:0,limit:1,description:"Singularities give a power effect to Time Theorem gain",effect:()=>1+Math.log10(Currency.singularities.value+1)/70,effectFormat:t=>formatPow(t,2,3),upgradeDirection:Ci.BOOSTS_MAIN},darkFromGamespeed:{start:8e22,repeat:0,limit:1,description:"Game speed boosts Dark Matter and Dark Energy production",effect:()=>Math.clampMin(Math.log10(getGameSpeedupFactor()/1e120)/40,1),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.BOOSTS_LAITELA},glyphLevelFromSingularities:{start:3e24,repeat:0,limit:1,description:"Singularities boost pre-instability Glyph level",effect:()=>1+Math.clampMin((Math.log10(Currency.singularities.value)-20)/30,0),effectFormat:t=>formatX(Math.clampMin(t,1),2,2),upgradeDirection:Ci.BOOSTS_MAIN},darkFromDilatedTime:{start:8e33,repeat:0,limit:1,description:"Dilated Time boosts Dark Matter production",effect:()=>Math.pow(1.6,Decimal.log10(Currency.dilatedTime.value.plus(1))/1e3),effectFormat:t=>formatX(t,2,2),upgradeDirection:Ci.BOOSTS_LAITELA},infinitiedPow:{start:3e38,repeat:0,limit:1,description:"Infinities gain a power effect based on Singularities",effect:()=>1+Math.log10(Currency.singularities.value+1)/300,effectFormat:t=>formatPow(t,2,3),upgradeDirection:Ci.BOOSTS_MAIN},tesseractMultFromSingularities:{start:25e44,repeat:0,limit:1,description:"Singularities increase effective Tesseract count",effect:()=>1+Math.log10(Currency.singularities.value)/80,effectFormat:t=>formatX(Math.clampMin(t,1),2,2),upgradeDirection:Ci.BOOSTS_MAIN}},Y9={unlocks:{run:{id:0,price:1e14,description:"Unlock Teresa's Reality.",onUnlock:()=>Teresa.quotes.unlockReality.show()},epGen:{id:1,price:1e18,description:"Unlock passive Eternity Point generation.",isDisabledInDoomed:!0},effarig:{id:3,price:1e24,description:"Unlock Effarig, Celestial of Ancient Relics.",onUnlock:()=>Teresa.quotes.effarig.show()},shop:{id:2,price:1e21,description:"Unlock Teresa's Perk Point Shop."},undo:{id:4,price:1e10,description:'Unlock "Undo" of equipping a Glyph.',isDisabledInDoomed:!0},startEU:{id:5,price:1e6,description:"You start Reality with all Eternity Upgrades unlocked.",isDisabledInDoomed:!0,onUnlock:()=>{for(const t of[1,2,3,4,5,6])player.eternityUpgrades.add(t)}}}};function Wy(t){return Math.pow(t,10)}const bo={SUBTRACTION:1,DIVISION:2},W9={mainUnlock:{realities:{id:1,name:"Realities",resource:()=>Currency.realities.value,requirement:1e4,format:t=>formatInt(t),progress:()=>Currency.realities.value/1e4},eternities:{id:2,name:"Eternities",resource:()=>Currency.eternities.value,requirement:1e70,format:t=>format(t,2),progress:()=>Wy(Currency.eternities.value.pLog10()/70)},infinities:{id:3,name:"Infinities",resource:()=>Currency.infinitiesTotal.value,requirement:1e160,format:t=>format(t,2),progress:()=>Wy(Currency.infinitiesTotal.value.pLog10()/160)},dilatedTime:{id:4,name:"Dilated Time",resource:()=>player.records.thisReality.maxDT,requirement:L.E320,format:t=>format(t,2),progress:()=>Wy(player.records.thisReality.maxDT.pLog10()/320)},replicanti:{id:5,name:"Replicanti",resource:()=>player.records.thisReality.maxReplicanti,requirement:L.E320000,format:t=>format(t,2),progress:()=>Wy(player.records.thisReality.maxReplicanti.pLog10()/32e4)},realityMachines:{id:6,name:"Reality Machines",resource:()=>Currency.realityMachines.value,requirement:1e60,format:t=>format(t,2),progress:()=>Wy(Currency.realityMachines.value.pLog10()/60)}},runUnlocks:[{id:0,name:"Glyph Knight",description:t=>`Unlock Reality with at most ${quantifyInt("Glyph",-t)} equipped.`,values:[-5,-4,-3,-2,-1,0],condition:()=>V.isRunning&&TimeStudy.reality.isBought,currentValue:()=>-Glyphs.activeWithoutCompanion.length,formatRecord:t=>t>=-5?formatInt(-t):"Not reached",shardReduction:()=>0,maxShardReduction:()=>0,mode:bo.SUBTRACTION},{id:1,name:"AntiStellar",description:t=>`Have ${formatInt(t)} total Galaxies from all types.`,values:[4e3,4300,4600,4900,5200,5500],condition:()=>V.isRunning,currentValue:()=>Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies,formatRecord:t=>formatInt(t),shardReduction:t=>Math.floor(300*t),maxShardReduction:t=>t-4e3,perReductionStep:3,mode:bo.SUBTRACTION},{id:2,name:"Se7en deadly matters",description:t=>`Get ${format(Decimal.pow10(t))} Infinity Points in Eternity Challenge 7.`,values:[6e5,72e4,84e4,96e4,108e4,12e5],condition:()=>V.isRunning&&EternityChallenge(7).isRunning,currentValue:()=>Currency.infinityPoints.value.log10(),formatRecord:t=>format(Decimal.pow10(t),2),shardReduction:t=>12e4*t,maxShardReduction:t=>t-6e5,perReductionStep:L.E1200,mode:bo.DIVISION},{id:3,name:"Young Boy",description:t=>`Get ${format(Decimal.pow10(t))} Antimatter in Eternity Challenge 12 without
        unlocking Time Dilation.`,values:[4e8,45e7,5e8,6e8,7e8,8e8],condition:()=>V.isRunning&&EternityChallenge(12).isRunning&&!PlayerProgress.dilationUnlocked(),currentValue:()=>Currency.antimatter.value.log10(),formatRecord:t=>format(Decimal.pow10(t)),shardReduction:t=>5e7*t,maxShardReduction:t=>t-4e8,perReductionStep:L.E500000,mode:bo.DIVISION},{id:4,name:"Eternal Sunshine",description:t=>`Get ${format(Decimal.pow10(t))} Eternity Points.`,values:[7e3,7600,8200,8800,9400,1e4],condition:()=>V.isRunning,currentValue:()=>Currency.eternityPoints.value.log10(),formatRecord:t=>format(Decimal.pow10(t),2),shardReduction:t=>600*t,maxShardReduction:t=>t-7e3,perReductionStep:1e6,mode:bo.DIVISION},{id:5,name:"Matterception",description:t=>`Get ${formatInt(t)} Dimension Boosts while Dilated and inside Eternity Challenge 5.`,values:[51,52,53,54,55,56],condition:()=>V.isRunning&&player.dilation.active&&EternityChallenge(5).isRunning,currentValue:()=>DimBoost.purchasedBoosts,formatRecord:t=>formatInt(t),shardReduction:t=>Math.floor(t),maxShardReduction:()=>5,reductionStepSize:100,perReductionStep:1,mode:bo.SUBTRACTION},{id:6,name:"Requiem for a Glyph",description:t=>`Unlock Reality with at most ${formatInt(-t)} Glyphs equipped for the entire Reality.`,values:[1,4,7,10,13],condition:()=>V.isRunning&&TimeStudy.reality.isBought,currentValue:()=>-player.requirementChecks.reality.maxGlyphs,formatRecord:t=>formatInt(-t),shardReduction:()=>0,maxShardReduction:()=>0,mode:bo.SUBTRACTION,isHard:!0},{id:7,name:"Post-destination",description:t=>`Get ${formatInt(4e5)} Time Theorems with a /${format(Decimal.pow10(t),2,2)}
        Black Hole or slower, without discharging or entering EC12.`,values:[100,150,200,250,300],condition:()=>V.isRunning,currentValue:()=>Currency.timeTheorems.gte(4e5)?-Math.log10(player.requirementChecks.reality.slowestBH):0,formatRecord:t=>`${formatInt(1)} / ${format(Math.pow(10,t))}`,shardReduction:t=>50*t,maxShardReduction:t=>t-50,reductionStepSize:2,perReductionStep:10,mode:bo.DIVISION,isHard:!0},{id:8,name:"Shutter Glyph",description:t=>`Reach a Glyph of level ${formatInt(t)}.`,values:[6500,7e3,8e3,9e3,1e4],condition:()=>V.isRunning,currentValue:()=>gainedGlyphLevel().actualLevel,formatRecord:t=>formatInt(t),shardReduction:t=>Math.floor(500*t),maxShardReduction:()=>500,perReductionStep:5,mode:bo.SUBTRACTION,isHard:!0}],unlocks:{vAchievementUnlock:{id:0,reward:"Unlock V, The Celestial Of Achievements",description:"Meet all the above requirements simultaneously",requirement:()=>Object.values(GameDatabase.celestials.v.mainUnlock).every(t=>t.progress()>=1)},shardReduction:{id:1,reward:"You can spend Perk Points to reduce the goal requirement of all tiers of each V-Achievement.",description:()=>`Have ${formatInt(2)} V-Achievements`,requirement:()=>V.spaceTheorems>=2},adPow:{id:2,reward:"Antimatter Dimension power based on total Space Theorems.",description:()=>`Have ${formatInt(5)} V-Achievements`,effect:()=>1+Math.sqrt(V.spaceTheorems)/100,format:t=>formatPow(t,3,3),requirement:()=>V.spaceTheorems>=5},fastAutoEC:{id:3,reward:"Achievement multiplier reduces Auto-EC completion time.",description:()=>`Have ${formatInt(10)} V-Achievements`,effect:()=>Achievements.power,format:t=>Ra.unlocks.instantECAndRealityUpgradeAutobuyers.canBeApplied?"Instant (Ra upgrade)":`${TimeSpan.fromMinutes(60*20/t).toStringShort()} for full completion`,requirement:()=>V.spaceTheorems>=10},autoAutoClean:{id:4,reward:"Unlock the ability to Automatically Purge Glyphs on Reality.",description:()=>`Have ${formatInt(16)} V-Achievements`,requirement:()=>V.spaceTheorems>=16},achievementBH:{id:5,reward:"Achievement multiplier affects Black Hole power.",description:()=>`Have ${formatInt(30)} V-Achievements`,effect:()=>Achievements.power,format:t=>formatX(t,2,0),requirement:()=>V.spaceTheorems>=30},raUnlock:{id:6,reward(){return`Reduce the Space Theorem cost of Time Studies by ${formatInt(2)}.
                Unlock Ra, Celestial of the Forgotten.`},description:()=>`Have ${formatInt(36)} V-Achievements`,effect:2,requirement:()=>V.spaceTheorems>=36}}},j9={effarig:{unlocks:g9},alchemy:{resources:c9},pelle:{galaxyGeneratorUpgrades:T9,strikes:C9,upgrades:k9,rifts:w9},descriptions:{},enslaved:v9,navigation:y9,navSigils:{..._9,...b9},perkShop:R9,ra:V9,singularityMilestones:q9,teresa:Y9,quotes:H9,v:W9},y_=()=>PelleRifts.chaos.milestones[1].canBeApplied?"The Pelle-Specific effect from Infinity Glyphs is also disabled.":"",z9=[{id:1,description:"Time Dimensions are disabled.",goal:L.E1800,goalIncrease:L.E200,reward:{description:"Time Dimension multiplier based on time spent this Eternity",effect:t=>Decimal.pow(Math.max(player.records.thisEternity.time/10,.9),.3+t*.05),formatEffect:t=>formatX(t,2,1)},scrambleText:["1e2600","1e201600"]},{id:2,description:"Infinity Dimensions are disabled.",goal:L.E975,pelleGoal:L.E1750,goalIncrease:L.E175,reward:{description:"1st Infinity Dimension multiplier based on Infinity Power",effect:t=>Currency.infinityPower.value.pow(1.5/(700-t*100)).clampMin(1),cap:L.E100,formatEffect:t=>formatX(t,2,1)}},{id:3,description:"Antimatter Dimensions 5-8 don't produce anything. Dimensional Sacrifice is disabled.",goal:L.E600,pelleGoal:L.E925,goalIncrease:L.E75,reward:{description:()=>`Increase the multiplier for buying ${formatInt(10)} Antimatter Dimensions`,effect:t=>t*.72,formatEffect:t=>`+${format(t,2,2)}`}},{id:4,description:`all Infinity multipliers and generators are disabled. The goal must be reached within a certain
      number of Infinities or else you will fail the Challenge.`,goal:L.E2750,goalIncrease:L.E550,restriction:t=>Math.max(16-4*t,0),checkRestriction:t=>Currency.infinities.lte(t),formatRestriction:t=>t===0?"without any Infinities":`in ${quantifyInt("Infinity",t)} or less`,failedRestriction:"(Too many Infinities for more)",reward:{description:"Infinity Dimension multiplier based on unspent IP",effect:t=>Currency.infinityPoints.value.pow(.003+t*.002),cap:L.E200,formatEffect:t=>formatX(t,2,1)}},{id:5,description:()=>`Antimatter Galaxy cost increase scaling starts immediately (normally at ${formatInt(100)}
      Galaxies). Dimension Boost costs scaling is massively increased.`,goal:L.E750,pelleGoal:L.E1400,goalIncrease:L.E400,reward:{description:"Distant Galaxy cost scaling starts later",effect:t=>t*5,formatEffect:t=>`${formatInt(t)} AG later`}},{id:6,description:()=>Enslaved.isRunning?"you *. The cost of upgrading your max Replicanti Galaxies is massively reduced.":"you cannot gain Antimatter Galaxies normally. The cost of upgrading your max Replicanti Galaxies is massively reduced.",goal:L.E850,pelleGoal:L.E1500,goalIncrease:L.E250,reward:{description:"Further reduce Antimatter Dimension cost multiplier growth",effect:t=>t*.2,formatEffect:t=>{const e=Math.round(Player.dimensionMultDecrease+Effects.sum(EternityChallenge(6).reward))-t;return`-${format(t,2,1)} (${formatX(e,2,1)} total)`}},scrambleText:["cannot gain Antimatter Galaxies normally","c㏰'퐚 gai鸭 Anti꟢at랜erﻪﶓa⁍axie㮾 䂇orma㦂l"]},{id:7,description:"1st Time Dimensions produce 8th Infinity Dimensions and 1st Infinity Dimensions produce 7th Antimatter Dimensions. Tickspeed also directly applies to Infinity and Time Dimensions.",goal:L.E2000,pelleGoal:L.E2700,goalIncrease:L.E530,effect:()=>TimeDimension(1).productionPerSecond,reward:{description:"1st Time Dimension produces 8th Infinity Dimensions",effect:t=>TimeDimension(1).productionPerSecond.pow(t*.2).minus(1).clampMin(0),formatEffect:t=>`${format(t,2,1)} per second`}},{id:8,description:()=>`you can only upgrade Infinity Dimensions ${formatInt(50)} times and Replicanti
      upgrades ${formatInt(40)} times. Infinity Dimension and Replicanti upgrade autobuyers are disabled.`,goal:L.E1300,pelleGoal:L.E2800,goalIncrease:L.E900,reward:{description:"Infinity Power strengthens Replicanti Galaxies",effect:t=>{const e=Math.log10(Currency.infinityPower.value.pLog10()+1);return Math.max(0,Math.pow(e,.03*t)-1)},formatEffect:t=>formatPercents(t,2)}},{id:9,description:()=>`you cannot buy Tickspeed upgrades. Infinity Power instead multiplies
      Time Dimensions with greatly reduced effect. ${y_()}`,goal:L.E1750,pelleGoal:L.E2900,goalIncrease:L.E250,reward:{description:"Infinity Dimension multiplier based on Time Shards",effect:t=>Currency.timeShards.value.pow(t*.1).clampMin(1),cap:L.E400,formatEffect:t=>formatX(t,2,1)}},{id:10,description:()=>{let t=`Time Dimensions and Infinity Dimensions are disabled. You gain an immense boost from
        Infinities to Antimatter Dimensions (Infinities${formatPow(950)}). ${y_()}`;return EternityChallenge(10).applyEffect(e=>t+=` Currently: ${formatX(e,2,1)}`),t},goal:L.E3000,pelleGoal:L.E3200,goalIncrease:L.E300,effect:()=>Decimal.pow(Currency.infinitiesTotal.value,950).clampMin(1).pow(TimeStudy(31).effectOrDefault(1)),reward:{description:"Time Dimension multiplier based on Infinities",effect:t=>Currency.infinitiesTotal.value.times(2783e-9).pow(.4+.1*t).clampMin(1).powEffectOf(TimeStudy(31)),formatEffect:t=>{const e=formatX(t,2,1);return TimeStudy(31).canBeApplied?`${formatX(t.pow(1/TimeStudy(31).effectValue),2,1)} (After TS31: ${e})`:e}}},{id:11,description:()=>`all Dimension multipliers and powers are disabled except for the multipliers from
      Infinity Power and Dimension Boosts (to Antimatter Dimensions). ${y_()}`,goal:L.E450,pelleGoal:L.E11200,goalIncrease:L.E200,pelleGoalIncrease:L.E1400,reward:{description:"Further reduce Tickspeed cost multiplier growth",effect:t=>t*.07,formatEffect:t=>{const e=Math.round(Player.tickSpeedMultDecrease+Effects.sum(EternityChallenge(11).reward))-t;return`-${format(t,2,2)} (${formatX(e,2,2)} total)`}}},{id:12,description:()=>PlayerProgress.realityUnlocked()?`the game runs ×${formatInt(1e3)} slower; all other game speed effects are disabled. The goal must be reached
        within a certain amount of time or you will fail the Challenge. ${y_()}`:`the game runs ×${formatInt(1e3)} slower. The goal must be reached
        within a certain amount of time or you will fail the Challenge.`,goal:L.E110000,pelleGoal:L.E208000,goalIncrease:L.E12000,restriction:t=>Math.max(10-2*t,1)/10,checkRestriction:t=>Time.thisEternity.totalSeconds<t,formatRestriction:t=>`in ${quantify("in-game second",t,0,1)} or less.`,failedRestriction:"(Too slow for more)",reward:{description:"Infinity Dimension cost multipliers are reduced",effect:t=>1-t*.008,formatEffect:t=>`x${formatPow(t,3,3)}`}}],X9=[{id:1,description:`all Normal Challenge restrictions are active at once, with the exception of the
      Tickspeed (C9) and Big Crunch (C12) Challenges.`,goal:L.E650,isQuickResettable:!0,reward:{description:()=>`${formatX(1.3,1,1)} on all Infinity Dimensions for each Infinity Challenge completed`,effect:()=>Math.pow(1.3,InfinityChallenges.completed.length),formatEffect:t=>formatX(t,1,1)},unlockAM:L.E2000},{id:2,description:()=>`Dimensional Sacrifice happens automatically every ${formatInt(400)} milliseconds once you have
      an 8th Antimatter Dimension.`,goal:L.E10500,isQuickResettable:!1,reward:{description:()=>`Dimensional Sacrifice autobuyer and stronger Dimensional Sacrifice
        ${Sacrifice.getSacrificeDescription({InfinityChallenge2isCompleted:!1})} ➜
        ${Sacrifice.getSacrificeDescription({InfinityChallenge2isCompleted:!0})}`},unlockAM:L.E11000},{id:3,description:()=>`Tickspeed upgrades are always ${formatX(1)}. For every Tickspeed upgrade purchase, you instead get a static
      multiplier on all Antimatter Dimensions which increases based on Antimatter Galaxies.`,goal:L.E5000,isQuickResettable:!1,effect:()=>Decimal.pow(1.05+player.galaxies*.005,player.totalTickBought),formatEffect:t=>formatX(t,2,2),reward:{description:"Antimatter Dimension multiplier based on Antimatter Galaxies and Tickspeed purchases",effect:()=>Laitela.continuumActive?Decimal.pow(1.05+player.galaxies*.005,Tickspeed.continuumValue):Decimal.pow(1.05+player.galaxies*.005,player.totalTickBought),formatEffect:t=>formatX(t,2,2)},unlockAM:L.E12000},{id:4,description:()=>`only the latest bought Antimatter Dimension's production is normal. All other Antimatter Dimensions
      produce less (${formatPow(.25,2,2)}).`,goal:L.E13000,isQuickResettable:!0,effect:.25,reward:{description:()=>`All Antimatter Dimension multipliers become multiplier${formatPow(1.05,2,2)}`,effect:1.05},unlockAM:L.E14000},{id:5,description:`buying Antimatter Dimensions 1-4 causes all cheaper AD costs to increase.
      Buying Antimatter Dimensions 5-8 causes all more expensive AD costs to increase.`,goal:L.E16500,isQuickResettable:!0,reward:{description:()=>`All Galaxies are ${formatPercents(.1)} stronger and reduce the requirements for them
        and Dimension Boosts by ${formatInt(1)}`,effect:1.1},unlockAM:L.E18000},{id:6,description:()=>`exponentially rising matter divides the multiplier on all of your Antimatter Dimensions
      once you have at least ${formatInt(1)} 2nd Antimatter Dimension.`,goal:L.D2E22222,isQuickResettable:!0,effect:()=>Currency.matter.value.clampMin(1),formatEffect:t=>`/${format(t,1,2)}`,reward:{description:"Infinity Dimension multiplier based on tickspeed",effect:()=>Tickspeed.perSecond.pow(5e-4),formatEffect:t=>formatX(t,2,2)},unlockAM:L.E22500},{id:7,description:()=>{const t=Effects.max(2,InfinityUpgrade.dimboostMult,InfinityChallenge(7).reward,TimeStudy(81));return`you cannot buy Antimatter Galaxies. Base Dimension Boost multiplier is increased to a maximum
        of ${formatX(10)}. (Current base multiplier: ${formatX(t,2,1)})`},goal:L.E10000,isQuickResettable:!1,effect:10,reward:{description:()=>`Dimension Boost multiplier is increased to a minimum of ${formatX(4)}`,effect:4},unlockAM:L.E23000},{id:8,description:()=>`AD production rapidly and continually drops over time. Purchasing Antimatter Dimension or Tickspeed
        upgrades sets production back to ${formatPercents(1)} before it starts dropping again.`,goal:L.E27000,isQuickResettable:!0,effect:()=>L.D0_8446303389034288.pow(Math.max(0,player.records.thisInfinity.time-player.records.thisInfinity.lastBuyTime)),reward:{description:"You get a multiplier to AD 2-7 based on 1st and 8th AD multipliers.",effect:()=>AntimatterDimension(1).multiplier.times(AntimatterDimension(8).multiplier).pow(.02),formatEffect:t=>formatX(t,2,2)},unlockAM:L.E28000}],K9=[{id:1,legacyId:1,isQuickResettable:!1,description(){return PlayerProgress.eternityUnlocked()?"reach Infinity for the first time outside of a challenge.":"reach Infinity for the first time."},name:"1st Antimatter Dimension Autobuyer",reward:"Upgradeable 1st Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:2,legacyId:2,isQuickResettable:!1,description:()=>`buying Antimatter Dimensions or Tickspeed upgrades halts production of all Antimatter Dimensions. Production gradually returns to normal over ${formatInt(3)} minutes.`,name:"2nd Antimatter Dimension Autobuyer",reward:"Upgradeable 2nd Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:3,legacyId:3,isQuickResettable:!1,description:`the 1st Antimatter Dimension is heavily weakened, but gets an uncapped exponentially increasing multiplier.
        This multiplier resets after Dimension Boosts and Antimatter Galaxies.`,name:"3rd Antimatter Dimension",reward:"Upgradeable 3rd Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:4,legacyId:8,isQuickResettable:!1,description:"buying an Antimatter Dimension automatically erases all lower tier Antimatter Dimensions, like a sacrifice without the boost.",name:"4th Antimatter Dimension Autobuyer",reward:"Upgradeable 4th Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:5,legacyId:6,isQuickResettable:!1,description:()=>`the Tickspeed purchase multiplier starts at ${formatX(1.08,0,3)} instead of ${formatX(1.1245,0,3)}.`,name:"5th Antimatter Dimension Autobuyer",reward:"Upgradeable 5th Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:6,legacyId:10,isQuickResettable:!1,description:()=>`upgrading each Antimatter Dimension costs the Antimatter Dimension ${formatInt(2)} tiers below it instead of antimatter. Antimatter Dimension prices are modified.`,name:"6th Antimatter Dimension Autobuyer",reward:"Upgradeable 6th Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:7,legacyId:9,isQuickResettable:!1,description:()=>`the multiplier from buying ${formatInt(10)} Antimatter Dimensions is reduced to ${formatX(1)}. This increases by
        ${formatX(.2,1,1)} per Dimension Boost, to a maximum of ${formatX(2)}, and is unaffected by any upgrades.`,name:"7th Antimatter Dimension Autobuyer",reward:"Upgradeable 7th Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:8,legacyId:11,isQuickResettable:!1,description:`Dimension Boosts provide no multiplier and Antimatter Galaxies cannot be bought. Dimensional
      Sacrifice resets antimatter and all Antimatter Dimensions, but also gives a significantly stronger multiplier.`,name:"8th Antimatter Dimension Autobuyer",reward:"Upgradeable 8th Antimatter Dimension Autobuyer",lockedAt:L.D0},{id:9,legacyId:5,isQuickResettable:!0,description:()=>`whenever you buy Tickspeed upgrades or ${formatInt(10)} of an Antimatter Dimension, everything else of equal cost will increase to its next cost step.`,name:"Tickspeed Autobuyer",reward:"Upgradeable Tickspeed Autobuyer",lockedAt:L.D0},{id:10,legacyId:4,isQuickResettable:!1,description:()=>`there are only ${formatInt(6)} Antimatter Dimensions. Dimension Boost and Antimatter Galaxy costs are modified.`,name:"Automated Dimension Boosts",reward:"Dimension Boosts Autobuyer",lockedAt:L.D16},{id:11,legacyId:12,isQuickResettable:!0,description:()=>`there is normal matter which rises once you have at least ${formatInt(1)} 2nd Antimatter Dimension. If it exceeds your antimatter, it will Dimension Boost without giving the bonus.`,name:"Automated Antimatter Galaxies",reward:"Antimatter Galaxies Autobuyer",lockedAt:L.D16},{id:12,legacyId:7,isQuickResettable:!1,description:()=>`each Antimatter Dimension produces the Dimension ${formatInt(2)} tiers below it
      instead of ${formatInt(1)}. Both 1st and 2nd Dimensions produce antimatter.
      The 2nd, 4th, and 6th Dimensions are made stronger to compensate.`,name:"Automated Big Crunches",reward:"Big Crunches Autobuyer",lockedAt:L.D16}],Z9={normal:K9,infinity:X9,eternity:z9},LC=[{date:[2024,10,14],name:"The True Update",info:`
<b>Added a lot of things:</b><br>
<ul>
<li>Everything not a number or whitespace is replaced with "fuck".</li>
<li>All numbers are randomly modified.</li>
<li>The game runs 110% as fast.</li>
<li>All colors change every minute, although background colors are smoothly transitioned.</li>
<li>Also, a random transform happens every minute too.</li>
<li>The game blurs and gets darker the more you progress.</li>
<li>Every 80 seconds a spin4d animation happens for 4 seconds.</li>
<li>The first four backups (2s, 15s, 60s, 90s) all have a 35% (60% in Doom) chance to revert instead of saving.</li>
<li>... and the other backups are saved, so you can't cheat.</li>
<li>All keybinds are disabled.</li>
<li>A loading screen that lasts between 10s and 60s.</li>
<li>A good loading screen image on first load.</li>
<li>Randomized loading screen images upon failure (there are 5).</li>
<li>Loading progress has random messages and is logarthrmic.</li>
<li>At 99.5%, there's a chance that the loading will crash.</li>
<li>Another 5% chance to crash when each text changes.</li>
<li>Pressing the "START" button has a 50% chance to crash.</li>
<li>Crashes happen only twice.</li>
<li>News tickers have been replaced with advertisements, and their settings cannot be changed.</li>
<li>Changing news tickers' setting unlocks S33.</li>
<li>The game freezes for 3 seconds every 60-90 seconds.</li>
<li>The game now has random titles.</li>
<li>Every 5-60 seconds, the UI mode changes.</li>
<li>A memory leak (I don't know why this happens but whatever).</li>
<li>A 5% chance for the game to crash every minute.</li>
</ul>
Thanks for playing this update!
<br>
  `},{date:[2024,8,12],name:"Hi Ra",info:`
<b>Added things:</b><br>
<ul>
<li>Added a Spent TT as an Automator currency</li>
<li>Added a cel 5 symbol to the celestial Glyph cosmetic set</li>
</ul>
<br>
<b>Minor UI Changes:</b><br>
<ul>
<li>Improved wording of BI upgrades</li>
<li>Added rounded corners to some buttons</li>
<li>Added an always use hole animation option</li>
<li>Adjusted a cel 3 symbol size in the Glyph cosmetic</li>
<li>ID and TD purchase buttons are now less often to shrink</li>
<li>IC rewards are now always visible even if it was not completed yet</li>
<li>Disabled Sacrifice button if you unlocked Achievement 118 and Sacrifice Autobuyer is enabled</li>
</ul>
<br>
<b>Bugfixes:</b><br>
<ul>
<li>Fixed a BH pulse does not apply during offline progess</li>
<li>Fixed a BH inversion is active while it is being disabled</li>
<li>Fixed a BH inversion slider is visible while it is being disabled</li>
</ul>
<br>
`},{date:[2024,5,2],name:"Celebrate Android Reality Update",info:`
Congratulations for the release of Android Reality Update! In order to celebrate this big milestone, we implemented
some changes mainly based on the player comments and feedback from the Android version.
<br>
<br>
<b><i>Once again, thank you so much for playing Antimatter Dimensions!</i></b>
<br>
<br>
<b>Major things:</b><br>
<ul>
<li>Added newly joined Android testers in credits</li>
<li>Added a new perk</li>
</ul>
<br>
<b>Additional QoL and information:</b><br>
<ul>
<li>Study Presets now carry over when you start over, and Companion Glyph will not leave you too</li>
<li>Swapped cel2 and Perk shop unlocks</li>
<li>TS131 now has an additional effect</li>
<li>Enter key now works in autobuyer inputs to apply changes</li>
<li>Reward of achievement 118 now improves Sacrifice autobuyer</li>
<li>Glyph preset settings are now including/increased by default</li>
<li>Glyph recycle now checks the Glyph effects with Glyph level set in Reality autobuyer</li>
<li>Added a new cel7 upgrade mimicking EM40</li>
<li>Added a show all tabs button in tab modify modal</li>
<li>Added a display when Auto EC is disabled by requirement lock</li>
<li>Added an option to swap symbol and border colors on Glyphs</li>
<li>Added a functionality to change the visible resource on Modern UI</li>
<li>Added a new modal for adjusting exponent notation formatting more flexibly</li>
<li>Automator now ignores blackhole command while it is being disabled</li>
<li>EM1000 requirement is now Eternity in 5 seconds or less</li>
<li>Study tree will now automatically respec when exiting an EC</li>
<li>Disabled a rebuyable TP upgrade in cel7, because it caused confusion to many players</li>
<li>Rebalanced 3rd milestone of 5th bar due to the above upgrade deletion</li>
<li>Various minor text changes</li>
</ul>
<br>
<b>Minor UI Changes:</b><br>
<ul>
<li>Adjusted perk layouts for new DAB perk</li>
<li>Made Glyph sorting order consistent in showcase modal</li>
<li>Added light and dark Glyph rarity colorblind palettes</li>
<li>Adjusted various minor UI glitches</li>
</ul>
<br>
<b>Bugfixes:</b><br>
<ul>
<li>Fixed link to Synergism</li>
<li>Fixed tooltip in TD tab</li>
<li>Fixed offline progress bug</li>
<li>Fixed Glyph Rarity color bug in popup</li>
<li>Fixed automator pause command ticking wrongly</li>
<li>Fixed a NaN display bug with certain autobuyer inputs</li>
<li>Fixed some buggy behavior for saves without START perk</li>
<li>Fixed TS192 gave console error while it is being disabled</li>
<li>Fixed wording on cel7 dilation modal claiming that EP will not be gained</li>
<li>Fixed ! not being parsed properly when used in study strings in automator scripts</li>
<li>Fixed Max All TD button not behaving properly with an active Telemechanical Process lock</li>
<li>Fixed Effarig Glyphs in presets were messed up bug because of the internal format change</li>
<li>Fixed Glyph preset did not pick the highest level Glyphs while level:increased is selected</li>
<li>Fixed remnant count not being properly reset when entering cel7 dilation with animation on</li>
<li>Fixed EC TT cost being calculated incorrectly when using EC! functionality and tree respec simultaneously</li>
<li>Fixed constant data not being properly carried over on full completion and migrated data on saves
affected by this bug</li>
<li>Removed duplicated achievement page text on Design theme</li>
<li>Prevented offline progress from going above the 1e6 limit that the options menu has</li>
<li>Fixed tpyo of the century</li>
</ul>
<br>
`},{date:[2023,7,18],name:"Final Official Patch",info:`
All of the previous patches since "The Reality Update" have been with the goal of fixing commonly reported bugs and
implementing highly suggested features. However, this patch is planned to be the final official patch. There may be
a few minor patches from bugs/requests in response to this set of changes, but these will likely be fixed or added
as they come in. We may try to add more beyond that, but this is no longer a guarantee and future changes will
probably not have their own changelog entries.
<br>
<br>
<b><i>At this point, the official version of the game is largely considered to be complete.
Thank you so much for playing Antimatter Dimensions!</i></b>
<br>
<br>
<b>New things:</b><br>
<ul>
<li>Time Study import strings now allow you to immediately enter an Eternity Challenge on importing if the
string contains an EC and ends with a "!"</li>
<li>Added hotkeys for Dilation and Glyph respec on Armageddon</li>
<li>Shift-clicking the Reality button now forces the Glyph selection modal to show up regardless of your settings</li>
<li>Added 3 more perk layouts (Square, horizontal grid, and distance from START)</li>
<li>You can now toggle "upgrade locks" for some Reality and Imaginary upgrades, which will automatically prevent
any manual or automatic actions that would fail their unlock condition</li>
<li>Glyph Filter settings can now also be imported and exported as text</li>
<li>You can now tell your filter to immediately Reality (once available, if your autobuyer is on) if none of the
upcoming choices will be accepted by the filter</li>
<li>Added Space Theorems (current and total) as an Automator currency</li>
<li>Added the ability to disable offline time simulation when the game is suspended (due to being out of focus or
from device hibernation)</li>
<li>Added information related to save creation time on statistics tab</li>
<li>The game will now periodically perform automatic local backups, similar to the Android version of the game</li>
</ul>
<br>
<b>Additional QoL and information:</b><br>
<ul>
<li>The tutorial at the start of the game now also emphasizes the How To Play</li>
<li>Achievements with rewards now have an additional icon on their bottom-left corner</li>
<li>Infinity and Eternity autobuyers now have status text on their settings boxes which indicate when they will next
trigger a prestige when on "time" or "X highest" mode</li>
<li>Eternity Challenges now stay visible on the EC tab as long as you have unlocked them at some point on that Reality,
even if you unlock a different one afterwards without completing it first</li>
<li>Resource catchup modal is now slightly more detailed during the first few Realities</li>
<li>Upgrades affected by the EU2 perk now show more accurate cost text</li>
<li>You can no longer accidentally Reality without selecting a Glyph; the confirm option will not appear unless one
is selected. (Disabling the selection modal after unlocking sacrifice still lets the game choose randomly)</li>
<li>Recent Prestiges for Reality now displays iM when appropriate</li>
<li>Numerous How To Play entries have been updated or clarified to more accurately describe the game's features</li>
<li>Added more display options for Recent Prestiges tab</li>
<li>Many various minor text changes</li>
</ul>
<br>
<b>Minor UI Changes:</b><br>
<ul>
<li>Purchase count tooltips for Dimensions now pop out to the left side instead of above</li>
<li>Changed Break Infinity tab symbol on Modern UI</li>
<li>Time Study import modal now shows info an import image as a two-column layout to reduce the need to scroll</li>
<li>Clarified interactions with TS31 and other upgrades</li>
<li>Eternity Challenges now have a visual overlay to show how many completions they have</li>
<li>The Reality reset modal now warns you more firmly if you can otherwise Reality for rewards instead</li>
<li>Added an icon for recently unequipped Glyphs</li>
<li>Added an "auto" Glyph BG color mode which matches black/white Glyph backgrounds to your current Theme</li>
<li>Improved color contrast for different Glyph rarities and added decorative borders to Glyphs depending on their
rarity and/or type</li>
<li>Added a message modal to clarify why not all Glyphs could be unequipped in certain cases</li>
<li>Effarig Glyphs now show their effects in "celestial order"</li>
<li>All <i>inventory</i> Glyphs now also show reduced levels when global level nerfs are active</li>
<li>Cursed Glyphs can now also be made on cel4's tab</li>
<li>The glow for the Singularity milestone button can now be disabled</li>
</ul>
<br>
<b>Bugfixes:</b><br>
<ul>
<li>Fixed IP/EP rate display not updating properly when save slot is changed</li>
<li>Prevented Time Study presets from having duplicate names</li>
<li>Fixed Eternity button having incorrect styling below Infinite IP in dilation</li>
<li>Fixed poor Glyph uniformity behavior without START perk</li>
<li>Fixed some Glyph information being colored based on BG color instead of Theme color</li>
<li>Disabled automator undo/redo from functioning on tabs other than the editor</li>
<li>Fixed purchased music Glyphs getting turned into regular Glyphs when cosmetics are reset</li>
<li>Made Glyph preset loading more forgiving and less likely to fail to load presets</li>
<li>Fixed cel1 Reality RM record being incorrectly tracked in some cases</li>
<li>Fixed Glyph filter sometimes not comparing to rarity properly</li>
<li>Fixed cel7 Glyph slot not appearing/disappearing properly in certain cases</li>
<li>Fixed misalignment in cel6 icon (credit to @mrkrutaman for the fix)</li>
<li>Disabled IAP purchase for all Glyph Cosmetics when already purchased</li>
<li>Fixed Hibernation offline time not giving real-time resources</li>
<li>Hibernation offline simulation now properly uses offline time settings</li>
<li>Added a few missing notifications for hotkey presses</li>
<li>Made Standard notation format larger integers properly</li>
<li>Removed news ticker with broken link</li>
<li>Various more minor bugfixes</li>
</ul>
<br>
`},{date:[2023,5,25],name:"Multiplier Tab, Automator, and Major mechanics fixes",info:`
<b>Multiplier Tab:</b><br>
<ul>
<li>Added a tab for Replicanti speed multipliers</li>
<li>Power effects can now also be shown as an equivalent-value multiplier</li>
<li>AD tab now has special behavior within NC12</li>
<li>Made general categories (ie. "Achievements" or "Time Studies") still openable even with single entries</li>
<li>DT nerfs no longer apply to game speed within the multiplier tab</li>
<li>Entries referring to individual upgrades are now worded more consistently</li>
<li>Filled in a bunch of miscellaneous missing effects and fixed a few mislabeled effects</li>
</ul>
<br>

<b>Automator Features:</b><br>
<ul>
<li>Automator-related notifications in the top-right now have their own coloring</li>
<li>Constants now stay in a consistent order when refreshing the page</li>
<li>New scripts now have enforced unique names by default</li>
<li>NOTIFY command now also supports single-quotes, as well as mixtures of single/double quotes</li>
<li>Added buttons for deleting individual constants, and another button to delete all of them</li>
<li>Added undo/redo functionality</li>
<li>You can now import all your study presets into the automator as constants</li>
<li>Added WAIT functionality for next BH1/BH2 activation</li>
<li>Added STOP command to immediately halt script execution</li>
<li>You can now use the highest filter score out of your available Glyph options as a variable for
  comparisons</li>
</ul>
<br>

<b>Automator Bugfixes:</b><br>
<ul>
<li>Block-to-text conversion should be less aggressive on deleting errored lines</li>
<li>Fixed block editor wiping internal contents of all later blocks whenever block nesting changes</li>
<li>Fixed a bug which sometimes caused the automator to attempt to run errored scripts and crash the game</li>
<li>Fixed automator constants not being compared to built-in keywords correctly</li>
<li>Fixed execution skipping the first line whenever scripts restart due to a REALITY command</li>
<li>Fixed a few syntax coloring bugs in the Automator text editor</li>
<li>Fixed a bug which caused the automator to prevent some resources from being reset after full completions</li>
</ul>
<br>

<b>Game Mechanic fixes:</b><br>
<ul>
<li>Dark Energy no longer resets after Annihilation</li>
<li>Dooming is now prevented if you have less than 5 empty inventory slots</li>
<li>"Refine to cap, then sacrifice" mode now sacrifices when the related resource is still locked</li>
<li>Secret achievement 46 is now properly awarded if the condition is met while offline</li>
<li>Storing real time no longer prevents autobuyers from ticking</li>
<li>Fixed bugged modal and game crash when attempting to exit a Celestial Reality from the Glyph tab</li>
<li>IAP flag in speedruns is now updated more consistently</li>
<li>Fixed Reality button sometimes showing an incorrect projected RM value due to amplification</li>
<li>Fixed Black Holes getting stuck as permanently inactive in some cases</li>
<li>Fixed negative Glyph counts not being properly updated when using Glyph undo</li>
<li>Glyph purge modals now count identical Glyphs properly</li>
<li>Fixed Glyph purge modals sometimes not appearing</li>
<li>Fixed a poor interaction between the new Glyph RNG and negative seed values</li>
<li>Fixed Glyph RNG seed not advancing after amplified realities</li>
</ul>

<br><b>Other changes:</b><br>
<ul>
<li>Added confirmation option to hide Glyph purge modals which mass-sacrifice</li>
<li>Improved UI behavior when importing saves in certain conditions</li>
<li>Teresa's EU-start upgrade now applies retroactively</li>
<li>Offline ticks are now limited to a minimum of 33ms instead of 50ms</li>
<li>"Offline" progress due to device hibernation now gets simulated as if it were offline time
  instead of being applied as a single large tick</li>
<li>Offline/hibernation maximum time has been increased from 6 hours to 24 hours</li>
<li>Text references to Teresa's Perk Shop have been more standardized</li>
<li>Positioning for V's entries in navigation was adjusted to prevent text overlap</li>
<li>AMOLED themes now have proper theming on credits scroll</li>
<li>Fixed Achievement 142 not unlocking when unlocking the Black Hole</li>
<li>Fixed Reality Glyph cosmetics not handling colors properly</li>
<li>Exit Dilation modal no longer erroneously appears outside of Dilation</li>
<li>A handful of more minor text and typo fixes</li>
</ul>
<br>
`},{date:[2023,4,7],name:"Speedrunner and Glyph RNG",info:`
<b>Major Changes:</b><br>
<ul>
<li><b>Glyph RNG for Realities 2-21 has been completely overhauled.</b> The new RNG now attempts to give
you a much more even spread of effects during these Realities; for each group of 5 consecutive Realities,
you will now see every Glyph type exactly 4 times and every individual effect will always appear <i>at least once</i>
amongst those 4 choices.
</li>
<li>Two side effects of the above change: 2-effect glyphs are now a fair bit more common
(about 30% more common for replication and dilation and 140% more common for the other three) and the Glyph options for
your <i>current</i> Reality may have changed when first loading up this version of the game.</li>
<li>Starting a speedrun save now properly carries over all the other stats which would have normally carried over after
finishing the game</li>
<li>Previous speedrun records are now also stored in the save and can now be compared on a newly-added subtab</li>
<li>Glyph RNG seed can now be modified in-game during a speedrun, as long as you have not realitied yet</li>
<li>Credits page was updated to include people recently brought on for testing the Reality update on Android</li>
<li>The "Total Termination" upgrade now affects <i>all</i> Glyph types</li>
</ul>
<br>

<b>New QoL/features:</b><br>
<ul>
<li>Real time (in stats) is now paused after gaining the final achievement</li>
<li>Perk tree interactivity has been made generally more responsive</li>
<li>Added two new default perk tree layouts (an Android-version grid and )</li>
<li>Eternity autobuyer now only triggers at full completion count with ECB perk instead of immediately</li>
<li>Added a button to reset all individual Glyph cosmetics</li>
<li>Added a confirmation modal for exiting challenges using the header button</li>
<li>Shift-clicking the icon on the Glyph filter now bumps it to the next <i>lower</i> threshold</li>
<li>Glyph presets now have 2 additional slots (5 => 7)</li>
<li>Added time estimates for reaching max Replicanti and Dilated Time this Reality</li>
<li>Hovering over the dilation button now shows all time estimate tooltips at once</li>
<li>Clicking already-bought dilation studies now moves you over to the appropriate related tab</li>
<li>All progress-locked options now remain permanently modifiable after full game completions</li>
</ul>
<br>

<b>Improved UI/Layout:</b><br>
<ul>
<li>Speedrun time formatting now has 3 hour digits and suppresses END formatting on some subtabs</li>
<li>Improved autobuyer textbox contrast on some themes</li>
<li>Reality header in stats tab now shows cel7-related stats as well</li>
<li>Clarified how Relic Shard rarity boost and cursed Glyphs work</li>
<li>Added %/sec to ID8 when relevant</li>
<li>Added TT to offline progress entries</li>
<li>Added BH cost scaling to its H2P entry</li>
<li>Changed AD Dimension purchase buttons to be stylized like cel6 when Continuum is active</li>
<li>Improved light/dark TS contrast between buyable and bought states</li>
<li>Speedrun widget now takes up less screen space when collapsed</li>
<li>Other various minor text fixes</li>
</ul>
<br>

<b>Bugfixes:</b><br>
<ul>
<li>Fixed buggy Glyph set names from reskinned Companion Glyphs</li>
<li>Fixed broken external links in "About the game"</li>
<li>Fixed AD autobuyer settings being unmodifiable in some cases</li>
<li>Fixed some display bugs with fractional Infinity/Eternity count</li>
<li>Recent prestige tab now properly accounts for amplification</li>
<li>Fixed subtab switching when switching game saves</li>
<li>Fixed Replicanti estimate not accounting for update rate correctly in some cases</li>
<li>Fixed Transience of Information not calculating its RM requirement correctly</li>
<li>Various more minor bugfixes</li>
</ul>
`},{date:[2023,2,22],name:"Visuals and Code prep",info:`
<b>Big Changes:</b><br>
<ul>
<li>Cloud saving now only saves one slot at a time and does so every 10 minutes instead of every 5.
  <b>If you are using the Cloud, please back up your saves locally just in case. This was hard to thoroughly
  test and we don't want you to lose your saves.</b></li>
<li>Please update your theme to v10 for the best user experience (added a new secret theme)</li>
<li>Blobs now have color in the font file</li>
<li>Changed recent prestige page to be an organized table with more information</li>
<li>Multiversal effect should no longer cause a UI softlock if the game processes too slowly</li>
<li>Lots of changes on the backend and Github repository in preparation for making the game open-source</li>
</ul>
<br>

<b>New QoL/features:</b><br>
<ul>
<li>5xEP now always triggers before TD autobuyers</li>
<li>Added time and relic shard modes for auto-reality</li>
<li>Added tracking for total time across full game completions</li>
<li>Changed some default player properties to make poor game behavior less likely</li>
<li>Added an option to invert generated/total TT in study tab</li>
<li>Expanded info for optimizing prestige for resource/time</li>
<li>Added a new animation for inverted black holes</li>
</ul>
<br>

<b>Improved UI/Layout:</b><br>
<ul>
<li>Fixed option dropdown being blurry on some browsers</li>
<li>Fixed some numbers being formatted with the wrong number of decimal places or not using notation</li>
<li>Added text for unequippable glyphs in cel7</li>
<li>Further clarified game/real time behavior in various places</li>
<li>TS21 now shows its effect as a multiplier</li>
<li>Increased contrast on reality upgrade buttons</li>
<li>Made ACHNR perk behave more consistently</li>
<li>Updated some entries in the credits</li>
<li>Added max DT this reality</li>
<li>Fixed a lot of things not being visually disabled in cel7</li>
<li>Many more minor fixes</li>
</ul>
<br>

<b>Bugfixes:</b><br>
<ul>
</li><li>Fixed Modern sidebar resource rounding incorrectly
</li><li>Fixed automator errors on post-completion new games
</li><li>Fixed some news entry stats not being updated properly
</li><li>Fixed news repeat buffer not working
</li><li>Updated progress-locking conditions for some news messages
</li><li>Fixed edge cases for secret achievements 12 and 42
</li><li>Fixed cel5-3 memories having the wrong name in offline progress
</li><li>Fixed Dilated runs not giving EP or being tracked in records
</li><li>Fixed replicanti time being incorrect in cel7
</li><li>Fixed hotkeys allowing autobuyers to be changed even when locked
</li><li>Fixed Continuum H2P entry disappearing in cel7
</ul>
`},{date:[2023,1,26],name:"Timewall Reduction",info:`
<b>Balance Changes:</b><br>
<ul>
<li>EC4 infinity requirement scales slower (50M => 25M per tier)</li>
<li>EC11 goals have been reduced by e50 on all tiers</li>
<li>Improved visibility for cel3 hints (progress is now always visible and accumulates 10x faster)</li>
<li>Made BH auto-pulse always force charging at 99%, removed adjustability for charge rate</li>
<li>Momentum grows 2.5x faster</li>
<li>Reduced final singularity milestone (8e45 => 2.5e45)</li>
<li>Speedruns now also start with achievements 35 and 76</li>
</ul>
<br>

<b>New Quality-of-Life:</b><br>
<ul>
<li>Made TS tree import text persist between closing the modal</li>
<li>Added "Respec and load" buttons/options for TS loading</li>
<li>Added "Sort by Level" to glyph inventory</li>
<li>Auto-EC now holds (but doesn't complete) the next one when paused</li>
</ul>
<br>

<b>Bugfixes:</b><br>
<ul>
<li>Modern-Metro themes now have the correct AD color</li>
<li>Cloud save conflict option buttons now work properly</li>
<li>"Buy 10" multiplier now always shows</li>
<li>Crunch modal no longer shows up pre-break with hotkeys</li>
<li>Next EC rewards now show "Next:" even when capped</li>
<li>EC requirements no longer scale up after max completions</li>
<li>Fixed Companion Glyph still counting as a glyph in some cases (LE, nav, achievements)</li>
<li>Fixed black hole-related achievements not affecting displayed interval/duration</li>
<li>Cel5 times now account for storing real time</li>
<li>Cel6 text now updates properly after destabilization</li>
</ul>
<br>

<b>Minor Changes:</b><br>
<ul>
<li>Improved Cloud conflict detection (eternities in early eternity and max DT in dilation)</li>
<li>Added ability to hide Google info when Cloud saving</li>
<li>Added "Common Abbreviations" to H2P</li>
<li>Added max replicanti text</li>
<li>Reduced IP/min and EP/min hiding thresholds on prestige buttons</li>
<li>Added an outline for fully-completed EC studies</li>
<li>Added cel3 icon to cosmetics</li>
<li>Made paperclips less invisible</li>
<li>Fixed more minor typos and made many minor wording improvements</li>
</ul>
`},{date:[2023,1,9],name:"The Companion Glyph doesn't want to hurt you",info:`
<b>Mechanic Changes:</b><br>
<ul>
<li>Buffed Break Infinity passive infinity generation upgrade (Cap is now once per 100ms instead of
  165ms and is reached at a fastest of 50ms instead of 33ms)</li>
<li>Limited offline ticks to a minimum length of 50ms</li>
<li>The Companion Glyph no longer counts as a Glyph for the purposes of Glyph-based requirements</li>
</ul>
<br>

<b>Bugfixes:</b><br>
<ul>
<li>Fixed EM6 being disabled even if EM200/EM1000 are still locked</li>
<li>Fixed EM200 applying when auto-eternity is in the wrong mode</li>
<li>Made EU1 apply properly on-purchase</li>
<li>Made EU2 always check before EP-based autobuyers trigger</li>
<li>Fixed being able to enter cel7 while in another celestial reality</li>
<li>Fixed autobuyers being unmodifiable in early cel7</li>
<li>Fixed ECB using current IP instead of max IP</li>
<li>Cleared New! notifications upon loading different saves</li>
<li>Fixed IC5 erroneously applying C9 effect to tickspeed cost</li>
</ul>
<br>

<b>Text Changes:</b><br>
<ul>
<li>Added warning for lag in animated themes</li>
<li>Fixed incorrect text on references to the IP formula</li>
<li>Clarified ach156 only applying to generated TT</li>
<li>Updated some slightly out-of-date How To Play entries</li>
<li>Added additional info to Glyph Filter and Alchemy in H2P</li>
<li>Reworded DT mult from replicanti glyph effect to not use very small numbers</li>
<li>Improved Perk wording consistency</li>
<li>Fixed a few spots with unformatted and/or unblinded numbers</li>
<li>Fixed various punctuation inconsistencies</li>
<li>Made Big Crunch autobuyer always show interval, even if below update rate</li>
<li>Moved EC8 ID purchase count nearer to the top of the page</li>
<li>Added "approximately" to replicanti timer at low amounts</li>
<li>Made AG button text account for achievements which stop certain resources from being reset</li>
<li>Added text in a few places for capped upgrades/effects</li>
<li>Added news ticker suggestions up to Dec 26th, fixed some incorrect news tickers</li>
</ul>
`},{date:[2022,12,21],name:"First Post-release Patch",info:`
<b>Various Miscellaneous Changes:</b><br>
<ul>
<li>Fixed NC6 not actually spending lower dimensions when purchasing upgrades</li>
<li>Changed matter scale text ("If every antimatter were...") to only change once per second</li>
<li>Fixed some text overflow issues in IC3 and reality upgrades</li>
<li>Reworded reality reminder text</li>
<li>Fixed Alt-T hotkey not working before completing tickspeed challenge</li>
<li>Fixed glyph tooltips not appearing in a certain secret theme</li>
<li>Made clicking challenge header switch to the tab of the innermost challenge</li>
<li>Changed EU1 perk to apply to all forms of eternity gain, not just manual ones</li>
<li>Fixed some bugs related to achievement Bulked Up</li>
<li>Fixed various typos</li>
<li>Rolled back styling change for unpurchasable upgrades on dark themes</li>
<li>Fixed ID/TD multiplier tabs disappearing within EC11</li>
<li>Fixed a game crash when attempting to run empty or invalid automator scripts</li>
<li>Fixed a few bugs in celestial content</li>
</ul>
`},{date:[2022,12,17],name:"The Reality Update",info:`
<b>MAJOR STUFF:</b><br>
<ul>
<li>The Reality prestige layer.</li>
<li>Added Glyphs.</li>
<li>Added Reality Upgrades.</li>
<li>Added Perks.</li>
<li>Added an Automator.</li>
<li>Added a Black Hole.</li>
<li>Added Celestials.</li>
<li>Added a new Modern UI style. The Old UI style is still available as Classic UI.</li>
<li>Added modals to replace browser alerts, confirmations, and prompts.</li>
<li>Added a How to Play modal with much more detail compared to the old How to Play.</li>
<li>Added 5 new rows of achievements.</li>
<li>Added a Multiplier Breakdown subtab.</li>
<li>Added more Nicolas Cage.</li>
<li>Cloud saving is now available to everyone. This needs your Google account.</li>
<li>Shop tab is now available to everyone.</li>
<li>Redesigned overall UI styling.</li>
<li></li>
<li>Rewrote the game UI using the Vue.js framework, significantly improving performance, stability,
  and code maintainability.</li>
<li>Added a speedrun mode.</li>
</ul>
<br>

Options and Accessibility:
<ul>
<li>Added a content summary modal to help players remember older game mechanics after a long time away.</li>
<li>Added more keyboard shortcuts.</li>
<li>Added more confirmations. (can be turned off in options)</li>
<li>Added animations for Eternity and Dilation. (can be turned off in options)</li>
<li>Added more community news and new AI news. (generated by AI using data from suggestions by community)</li>
<li>Added a tutorial glow effect and icon to some buttons when first starting the game.</li>
<li>Added a dropdown menu for easier selection of themes and notations.</li>
<li>Added secret number of secret themes, all of which are no longer case sentitive.</li>
<li>Unlocked secret themes are now permanently available to select from the dropdown.</li>
<li>Added more notations.</li>
<li>Added options to import and export saves from files.</li>
<li>Added a max all Infinity Dimensions button.</li>
<li>Added a button to minimize TT shop.</li>
<li>Added 3 more study tree save slots. (total of 6)</li>
<li>Added a blob.</li>
<li>Added the ability to edit existing study tree slots.</li>
<li>Added a modal for automatic selection of study tree paths when shift-clicking.</li>
<li>Added a line of text on the IC tab telling "All Infinity Challenges unlocked" when all ICs are unlocked.</li>
<li>Added a line of text on the EC tab telling that how many ECs are unlocked.</li>
<li>Added options for adjusting save frequency and displaying time since last save.</li>
<li>Added the ability to name your save file.</li>
<li>Entries in away progress can now be individually shown or hidden.</li>
<li>Added the ability to hide tabs and subtabs.</li>
<li>Added options for adjusting offline progress behavior.</li>
<li>Added an option to automatically switch tabs on some events.</li>
<li>Added options to adjust news ticker scroll speed and repetition.</li>
<li>Added IDs for Challenges and Achievements. (can be turned off in options)</li>
<li>Added more progress bar information. (EC goal, progress in Dilation until TP gain)</li>
<li>Added an option to turn off dynamic amount in autobuyers.</li>
<li>Added a display showing you what type of Infinity/Eternity/Reality you are in, such as Dilation or Challenges</li>
<li>You can now press other hotkeys while holding down a hotkey without interrupting the held hotkey.</li>
<li>Info displays are now visible by default. (can be turned off in options)</li>
<li>Improved import save modal by adding resouce information and offline progress mode selection.</li>
<li>Number input fields may now have input assistance depending on your browser. (such as up and down arrows
  on the side)</li>
<li>Resetting the game now requires inputting a specific phrase in order to prevent accidental resets.</li>
</ul>
<br>

Wording and Layout Changes:
<ul>
<li>Changed "Dimension Shift" to "Dimension Boost".</li>
<li>Changed "Infinitied stat" to "Infinities".</li>
<li>Changed "free galaxy" to "Tachyon Galaxy".</li>
<li>Tickspeed now displays as a X/sec rate instead of a very small fraction X/Y tick time.</li>
<li>Changed various texts for better clarity.</li>
<li>Moved Autobuyers subtab to a new Automation tab and added additional controls for other Autobuyers to the tab,
  such as Infinity Dimension and Replicanti autobuyers.</li>
<li>Added subsections in the Statistics subtab.</li>
<li>Footer links have been moved to the new How to Play and About the Game modals.</li>
<li>Changed some Achievement names and pictures.</li>
<li>Changed some secret Achievement name and requirements.</li>
<li>The cost of bought Infinity upgrades is now hidden.</li>
<li>The "BREAK INFINITY" button is now visible (but locked) even before Automated Big Crunch interval is 0.1s.</li>
<li>Improved text for post-break cost scaling upgrades.</li>
<li>The exit Challenge button is now hidden when the player is not in a challenge.</li>
<li>Eternity Challenges now show their current reward as well as the reward for the next completion.</li>
<li>Having Eternities no longer prevents the Infinity animation from playing.</li>
<li>Added colors to the Crunch/Eternity buttons when you have more than e50 of IP/EP; the color shows if you gain less
  (red), around same (white), or more (green) IP/EP than you currently have.</li>
<li>Moved study 33 to right side.</li>
<li>Changed "Normal Dimensions" to "Antimatter Dimensions".</li>
<li>Changed "Challenges" to "Normal Challenges".</li>
<li>Fixed some tpyos.</li>
</ul>
<br>

New Upgrades and Improved Technical Behavior:
<ul>
<li>Autobuyers are now unlockable before Infinity with antimatter, but can only be upgraded after completing their
  respective Challenges.</li>
<li>Added a new Infinity upgrade for 1e3 IP that gives you 50% of your best IP/min without using Max All,
  while offline.</li>
<li>Added a new Eternity milestone that gives you 25% of your best EP/min while offline.</li>
<li>Added another 2 new milestones that give you Infinities and Eternities while offline.</li>
<li>The "Infinity Point generation based on fastest Infinity" upgrade now takes all IP multipliers into account.</li>
<li>Tickspeed calculation is now dynamic, updating immediately instead of requiring an upgrade to be purchased.</li>
<li>You can buy multiple RG at once if you have enough replicanti; you are no longer limited to one per game tick.</li>
<li>Improved Time Dimension Max all behavior.</li>
<li>Normal and Infinity Challenges now give rewards after Big Crunch.</li>
<li>The Eternity autobuyer can now trigger when you have reached the EC goal, regardless of the settings.</li>
</ul>
<br>

Balance Changes:
<ul>
<li>NC10, 11, and 12 now unlock after 16 Infinities</li>
<li>Each Achievement grants an additional 1.03x multiplier to Antimatter Dimensions.</li>
<li>The Big Crunch Autobuyer's initial interval has been halved, requiring only half as much IP to max out, and
  other autobuyers have drastically lowered initial intervals.</li>
<li>The 500 IP Infinity upgrade now costs 300 IP.</li>
<li>Nicolas Cage.</li>
<li>The 20-eternities milestone was moved to 8-eternities.</li>
<li>Increased cost scaling for Time Dimensions after 1e6000.</li>
<li>TS 83 has been hard capped.</li>
<li>EC10 reward for less than 5 completions has been nerfed (reward at 5 completions is the same).</li>
<li>Lowered the Dilation unlock requirement from 13000 to 12900 total TT.</li>
<li>TP gain amount in Dilation is now calculated based on the highest AM reached.</li>
<li>Purchasing the study to unlock Dilation now requires a 23rd row study purchase.</li>
<li>Changed the condition of IC1 (now it just applies Challenge restrictions, instead of running them).</li>
<li>Changed the unlock conditions of IC2 (from 1e5000 to 1e10500) and IC6 (from 1e20000 to 1e22500).</li>
<li>Changed the goal of IC1 (from 1e850 to 1e650).</li>
<li>Changed the goal of IC5 (from 1e11111 to 1e16500).</li>
<li>Added reward to "I forgot to nerf that" (5% mult to 1st AD).</li>
<li>Added reward to "Is this safe?" (keep 1 RG on Infinity).</li>
<li>Added reward to "Eternities are the new Infinity" (gain x2 more Eternities).</li>
<li>Added reward to "This is what I have to do to get rid of you" (remove downside from TS 131 and 133).</li>
<li>Changed reward of "That's FAST!" (from 1000 to 5000).</li>
<li>Changed reward of "That's FASTER!" (from 2e5 to 5e5).</li>
<li>Changed reward of "Forever isn't that long" (from 1e10 to 5e10).</li>
<li>Changed reward of "Blink of an eye" (from 1e25 with dimension mult to 5e25).</li>
<li>Changed reward of "That wasn't an eternity" (from 2e25 to 5e25).</li>
<li>Changed requirement of "The Gods are pleased" (from x600 to x600 outside of NC8).</li>
<li>Changed requirement of "Daredevil" (from 2 to 3).</li>
<li>Changed requirement of "Blink of an eye" (from 200 ms to 250 ms).</li>
<li>Changed requirement of "Game design is my passion (Hevipelle did nothing wrong)" (from 10 sec to 15 sec).</li>
<li>Changed requirement of "MAXIMUM OVERDRIVE" (from 1e300 IP/min to 1e300 IP).</li>
<li>Changed requirement of "Eternities are the new Infinity" (from 200 ms to 250 ms).</li>
<li>Changed requirement of "Is this safe?" (from 30 minutes to 1 hour).</li>
<li>Changed requirement of "Like feasting" (from 1e100 to 1e90).</li>
<li>Changed requirement of "No ethical consumption" (from 5e9 to 2e9).</li>
<li>Changed requirement of "When will it be enough?" (from 1e20000 to 1e18000).</li>
<li>Changed requirement of "I never liked this infinity stuff anyway" (from 1e140000 to 1e200000).</li>
<li>Changed requirement of "Unique snowflakes" (from 630 to 569).</li>
<li>Changed requirement of "Now you're thinking with dilation!" (from 1e600 EP to 1e260000 AM).</li>
<li>Changed requirement of "This is what I have to do to get rid of you" (from 1e20000 to 1e26000).</li>
<li>Changed achievement 41 to "No DLC required", "buy 16 IU", "unlock 2 new IU".</li>
<li>Changed position of "Zero deaths" (from 43 to 64).</li>
<li>Changed position of "1 Million is a lot" (from 64 to 77).</li>
<li>Changed position of "How the antitables have turned" (from 77 to 43).</li>
<li>Swapped achievements 101 and 117.</li>
<li>Swapped achievements 113 and 124.</li>
<li>Lowered initial costs of post-break cost scaling upgrades (Tickspeed cost from 3e6 to 1e6,
  Dimension cost from 1e8 to 1e7).</li>
<li>NC7 was reworked to not have RNG.</li>
</ul>
<br>

Removed features:
<ul>
<li>Infinity is now non-fixable.</li>
<li>Removed autobuyer priority.</li>
<li>Removed production graph subtab.</li>
<li>Removed fungame.</li>
<li>Removed savefixer.</li>
<li>Removed some news.</li>
<li>Removed floating text from purchasing Dimensions.</li>
<li>Removed blob that caused game crash.</li>
</ul>
<br>

Bugfixes:
<ul>
<li>ID and replicanti autobuyer buttons are now hidden in EC8.</li>
<li>Fixed next Sacrifice multiplier not properly displaying NC8's effect.</li>
<li>Fixed a bug where IC5's cost increment was applied 2 times.</li>
<li>Fixed a bug where inverted themes were broken.</li>
<li>Fixed a bug where resetting the game unlocks a secret achievement.</li>
<li>Fixed a bug where ECs are showing wrong goals after their 5th completion.</li>
<li>Fixed a bug where non-antimatter galaxies weren't applying for tickspeed if your total galaxy count was less
  than 3.</li>
<li>Fixed a bug where you could produce more than infinite antimatter for 1 tick even if you had a fixed Infinity or
  were in a challenge.</li>
<li>Fixed a bug where formatted numbers on autobuyers wouldn't update properly when changing your notation.</li>
<li>Fixed a bug where Infinity Dimensions would automatically purchase upon unlocking them in EC8 while autobuyers were
  enabled.</li>
<li>Fixed a bug where the replicanti upgrade autobuyers would incorrectly display as off upon load/import.</li>
<li>Fixed a bug where the replicanti interval upgrade would say it would upgrade to a number below the max speed.</li>
<li>Fixed a bug where your Infinity Dimension mult would show as 0x if you had 0 infinity power.</li>
<li>Fixed a bug where you could complete EC4 with 1 more Infinity than was allowed, by using the autobuyer.</li>
<li>Fixed a bug where all non-Dimension Autobuyers didn't respect notation on the cost to reduce their interval.</li>
<li>Fixed a bug where the Achievement reward from "To infinity!" wasn't working.</li>
<li>Fixed a bug where the Sacrifice confirmation would show if you pressed the hotkey even when
  you can't Sacrifice.</li>
<li>Fixed a bug where the game saved notification would appear twice when importing a save.</li>
<li>Fixed a bug where the speed of the Tachyon Particle animation was affected your monitor's refresh rate. (if you have
  a 60hz monitor, it will be the same speed as it was before)</li>
<li>Fixed a bug where the Achievement unlock notification for unlocking "4.3333 minutes of Infinity" said
  "Minute of Infinity".</li>
<li>Fixed a bug where you could still Sacrifice after reaching Infinity.</li>
<li>Fixed a bug where your free tickspeed upgrade count would display as a negative number shortly after purchasing your
  first Time Dimension.</li>
<li>Fixed a bug where you were unable to purchase Dimensions if you had exactly their cost and their cost was below
  Infinity.</li>
<li>Fixed a bug where the "X%" text on the progress bar was left aligned rather than centered.</li>
<li>Fixed a bug where the Achievement image for "Blink of an eye" was a gif.</li>
<li>Fixed a bug where the Achievement unlock condition of "Yo dawg, I heard you liked infinities" was not checked
  correctly.</li>
<li>Fixed a bug where the formula for the displayed multiplier on TS11 was incorrect.</li>
<li>Fixed a bug where the Sacrifice and Dimension Boost Autobuyer would not honor Autobuyer interval.</li>
<li>Fixed a bug where the Reality link was just a video of some guy dancing.</li>
<li>Fixed a bunch of other bugs.</li>
`},{date:[2018,6,17],name:"This Update Sucks",info:`
<b>MAJOR STUFF:</b><br>
<ul>
<li>TIME DILATION</li>
<li>3 ROWS OF SECRET ACHIEVEMENTS</li>
<li>Added more Nicolas Cage.</li>
<li>1 new row of achievements.</li>
<li>Added 3 study tree save slots.</li>
<li>Greatly improved performance. (up to 5x in certain cases, ~3x in almost all cases)</li>
<li>Nerfed EC10 reward. ((infinities * EC10 completions * 0.000002+1) >
(infinities ^ 0.9 * EC10 completions * 0.000002+1))</li>
<li>Added even more Nicolas Cage.</li>
<li>Time study 11 has been capped at 1e2500 and now displays its current multiplier.</li>
<li>Time study 193 has been buffed, requires ~1012680 eternities to cap, rather than 1.5m, and is now capped at 1e13000
instead of ~1.81e12900/1.5m eternities. (1.02^x) > (1.03^x)</li>
<li>The second eternity upgrade has been buffed, and now soft caps at 100k, rather than 125k. The end result is very
slightly higher. ((x/300)^log4(2x)) > ((x/200)^log4(2x))</li>
<li>EC1 now requires 20k eternities per tier to unlock, down from 25k.</li>
<li>TD cost scaling has been increased after costs of 1e1300. (this is in addition to the current increase)</li>
<li>Added additional galaxy cost scaling after 800 galaxies.</li>
<li>Added a button to buy the maximum amount of eternity point multipliers at once.</li>
<li>Offline progress processes ~5x faster, and now simulates autobuyers. (please note that offline progress is still
capped at 1000 ticks, with additional ticks increasing the production of said 1000 ticks)</li>
<li>Added a new save file system that allows 3 different save files at once all with cloud save enabled, along with
a new cloud save UI.</li>
<li>Added an animation to visualize your multiplier gain when you purchase 10 of a dimension, dimension boost/shift,
or sacrifice.</li>
<li>Nicolas Cage.</li>
<li>Added an animation to big crunches. This will only trigger if you haven't eternitied, have a fastest infinity time
above 1 minute, and haven't broken infinity.</li>
<li>Added a button in the options menu to disable individual animations.</li>
<li>Added more news ticker entries</li>
</ul>
<br>
<b>Minor stuff:</b><br>
<ul>
<li>Reduced the space between the secondary eternity tab buttons.</li>
<li>The EC3 description now specifies that dimensional sacrifice is disabled.</li>
<li>Autobuyer inputs now support commas and notation on exponents.</li>
<li>When purchasing the EP or IP multipliers, autobuyer inputs will now always format the updated value above 1000.</li>
<li>The size and placement of the auto IP multiplier and auto RG toggles have been adjusted to fit with the other auto
toggles.</li>
<li>Total time played now increases at a normal rate inside EC12.</li>
<li>Fastest infinity time now updates normally inside EC12.</li>
<li>The time theorem purchasing background is now 20 pixels wider.</li>
<li>Changed the wording on time study 133 for clarity.</li>
<li>Added various missing periods to achievements.</li>
<li>Improved chart performance. (it's still pretty laggy if your settings are too high)</li>
<li>You can now purchase study 201 while you have EC11/12 bought, but you cannot purchase another path.</li>
<li>Purchasing study 131 no longer turns off your replicanti galaxy autobuyer, but instead displays it as disabled.</li>
<li>You can now purchase another split using shift while you have study 201.</li>
<li>You now purchase max galaxies manually by clicking or using the hotkey with more than 6 eternities.</li>
<li>You can now purchase single dimension boosts and galaxies by holding shift while purchasing.</li>
<li>ID8 will now display a rate of change after completing EC7 at least once.</li>
<li>Added an oxford comma to formatted time values.</li>
<li>Made the dimensional sacrifice button 40px wider to prevent the text overflowing.</li>
<li>Made the all tab eternity and infinity point displays 30px wider to prevent the text overflowing.</li>
<li>Moved the big crunch button up to prevent blocking the statistics and achievement tab buttons.</li>
<li>Moved the eternity and infinity buttons inwards to prevent the HTML layout jumping around.</li>
<li>Fixed the placement of certain footers.</li>
<li>Fixed a typo where a news ticker said "Dimesional Sacrifice" instead of "Dimensional Sacrifice"</li>
<li>Fixed a bug where TDs displayed a 2x multiplier per purchase when they actually gave a 4x multiplier.</li>
<li>Fixed a bug where study 51 wouldn't respect notation.</li>
<li>Fixed a bug where the infinity challenges tab would always show.</li>
<li>Fixed a bug where the auto RG toggle would jiggle left and right 1 pixel in certain cases.</li>
<li>Fixed a bug where the rate of change on the 7th dimension wouldn't take into account ID1 while in EC7.</li>
<li>Fixed a bug where EC12 displayed 0.1 seconds after 5 completions, but actually required 0.0 seconds.</li>
<li>Fixed a bug where tickspeed elements wouldn't hide correctly in certain cases.</li>
<li>Fixed a bug where bought eternity challenge unlock studies would show as gray in the dark theme rather than a deep
purple.</li>
<li>Fixed a bug where dimensions 5-8 would hide upon eternity even with the 30 eternity milestone.</li>
<li>Fixed a bug where popup colors weren't inverted in the inverted and inverted metro themes.</li>
<li>Fixed a bug where the eternity point amount wouldn't show when you imported a save with eternity points into a save
without them.</li>
<li>Fixed a bug where locked eternity challenges didn't have a hover effect in the dark metro theme.</li>
<li>Fixed a bug where popups weren't properly centered.</li>
<li>Fixed a bug where ID autobuyers would purchase IDs upon unlock even while disabled.</li>
<li>Fixed a bug where study tree branches drawn to row 22 were off-centered.</li>
<li>Fixed a bug where EP/min and IP/min peaks wouldn't update properly upon import.</li>
<li>Fixed a bug where infinity dimension autobuyers wouldn't hide properly upon import.</li>
<li>Fixed a bug where the IP multiplier autobuyer wouldn't hide properly upon import.</li>
<li>Fixed a bug where the option to change big crunch modes wouldn't hide properly upon import.</li>
<li>Fixed a bug where the max buy galaxy interval setting wouldn't hide properly upon import.</li>
<li>Fixed a bug where the RG autobuyer wouldn't hide properly upon import.</li>
<li>Fixed a bug where the eternity confirmation option wouldn't hide properly upon import.</li>
<li>Fixed a bug where the replicanti upgrade autobuyers wouldn't hide properly upon import.</li>
<li>Fixed a bug where your update rate wouldn't update upon import.</li>
<li>Fixed a bug where the chart line color wouldn't update properly upon import.</li>
<li>Fixed a bug where achievement images were being cut off by 4 pixels on the right and bottom sides.</li>
<li>Fixed a bug where "Yo dawg, I heard you liked infinities..." only required 1e300 times the previous infinity.</li>
<li>Fixed a bug where the auto sacrifice interval would still display as 0.10 seconds even with the
double autobuyer speed breaking infinity upgrade.</li>
<li>Fixed a bug where certain time studies were 1 pixel too far to the left or right.</li>
<li>Fixed a bug where studies 223 & 224 weren't taken into account when displaying antimatter galaxies as
distant antimatter galaxies.</li>
<li>Fixed a bug where study 227 would multiply your 4th time dimension production by 0
if you had no sacrifice bonus.</li>
<li>Fixed a bug where the game would say "You have 1 eternity points." rather than "You have 1 eternity point.".</li>
<li>Fixed a bug where popups would remain open after changing tabs.</li>
<li>Fixed a bug where you were able to select the achievement images by clicking and dragging over them.</li>
<li>Fixed a bug where studies 233 and 234 had the wrong classes assigned to them on load.</li>
</ul>
`},{date:[2018,4,1],name:"Fixed a Bug where there wasn't an Update",info:`
Huge thanks to Omsi for helping me a ton with this.<br><br>
<b>MAJOR STUFF:</b><br>
<ul>
<li>2 NEW ETERNITY CHALLENGES</li>
<li>12 NEW TIME STUDIES</li>
<li>Time study 132 has been buffed from a 30% bonus to a 40% bonus.</li>
<li>Added an achievement bonus for "Popular music": "Replicanti galaxies divide your replicanti by 1.79e308 instead of
resetting them to 1."</li>
<li>Added an achievement bonus for "IT'S OVER 9000": "Sacrifice doesn't reset your dimensions."</li>
<li>Added an achievement bonus for "Like feasting on a behind": "IP multiplier based on time spent this infinity."</li>
<li>Added an achievement bonus for "What do I have to do to get rid of you": "Time dimensions are multiplied by
the number of studies you have."</li>
<li>Added "Infinity" notation.</li>
<li>Added "Brackets" notation.</li>
<li>Added an import/export system for the time study tree.</li>
<li>Added an EP/min & peak EP/min display to the eternity button.</li>
<li>Added an eternity hotkey.</li>
<li>Added something to help you pick your theme.</li>
<li>Added a few more IAPs.</li>
<li>Reduced the cost of "Double IP gain from all sources" IAP from 50 ➜ 40</li>
</ul>
<br>
<b>Minor stuff:</b><br>
<ul>
<li>Added an option to not plot drops in production on the chart. (It will instead copy the newest data point)</li>
<li>Added displays for the current bonuses from time studies 71, 72, and 73.</li>
<li>Built up speed for 6 hours to do it in 0.5x A presses.</li>
<li>Changed study 72 to only work on the 4th infinity dimension, but doubled its power. (No effective change)</li>
<li>Alchemy 120 (Vivification) scaling decreased.</li>
<li>Fixed a bug where the buttons to purchase time studies wouldn't move in inverted themes on firefox.</li>
<li>Fixed a bug. Antman, you're good to go.</li>
<li>Fixed a bug that gave you the ability to set a custom name for your theme when using a secret theme.</li>
<li>Fixed BLJ. Shoutout to SimpleFlips.</li>
<li>Fixed a bug that caused purchasing the EP multiplier to require multiple clicks.</li>
<li>Removed the ghost from the game. Was annoying.</li>
<li>Fixed a bug that allowed you to earn "Long lasting relationship" in EC7.</li>
<li>Monkeys no longer eat humans, as intended.</li>
<li>Fixed a bug where the reward from EC7 could display -1.</li>
<li>Increased the drop rate of collector's pendant items by 20%.</li>
<li>Fixed a bug where the infinity requirement for EC4 could be less than 0.</li>
<li>Transcension gives less Ancient Souls.</li>
<li>Fixed a bug where the visual display for autobuyer bulk buy settings wouldn't update upon your first eternity.</li>
<li>Fixed the rickroll. Now it's properly not working.</li>
<li>Fixed a bug where the EP multiplier would break if its power exceeded 1.79e308.</li>
<li>Leeroy Jenkins' Battlecry now doesn't trigger Patches.</li>
<li>Fixed a bug where the confirmation for starting an infinity challenge would say you need to reach infinity.</li>
<li>Cursors now do circles around the cookie.</li>
<li>Fixed a bug where the offline progress popup would simply say "While you were away" if nothing happened.</li>
<li>Traction has been slightly increased to reduce unwanted drifts.</li>
<li>Fixed a bug that in rare cases would cause the offline progress popup to say you gained "NaNeInfinity" time shards
or infinity power.</li>
<li>Fixed a bug where the tickspeed visual display wouldn't update upon any form of reset.</li>
<li>Bugged a fix where eternity was dumb.</li>
<li>CS now makes notes go faster in mania.</li>
<li>Fixed a bug where replicanti were hidden but still unlocked if you eternitied for the 50th time
while they were locked.</li>
<li>Dirt is now more abundant.</li>
<li>Fixed a bug where the 1st dimension wasn't producing the 0th dimension.</li>
<li>Fixed a bug where The Nameless Ones were too easy.</li>
<li>Fixed a bug where in a specific case, 2 eternity challenges would appear as running at the same time.</li>
<li>Increased TukkunFCG YC rewards by 15%.</li>
<li>Added more space. SPAAAAAAACE</li>
<li>Fixed a bug where the eternity challenges tab would hide after refreshing with less than 1e2000 antimatter.</li>
<li>Fixed a bug where eternity challenges wouldn't update correctly upon import.</li>
<li>Fixed a bug where dimension display values wouldn't update in certain cases.</li>
<li>Portals are now not red.</li>
<li>Fixed a bug where the ON/OFF text on the challenge confirmation option wasn't capitalized upon load.</li>
<li>Reduced GRB's autokill threshold to 2500/2000 power/toughness.</li>
<li>Fixed a typo where the eternity confirmation option said "Eternity confimation".</li>
<li>Added bugs because Omsi wants more bugs to fix. Absolute legend, I'm telling you, the queen is legendary.</li>
<li>Fixed a typo where the reward for "That's faster!" said you started with 20000 antimatter, rather than 200000.</li>
<li>Added depression to your themes.</li>
<li>Fixed inconsistencies with the standard notation naming convention.</li>
<li>Tried to fix a bug where the game was bad but failed. The game is still bad.</li>
<li>Changed the wording on EC4 to say "X or less" rather than "less than X".
(It always worked this way, this is just a correction)</li>
<li>Made donkeys less fast, so you can actually catch them now.</li>
<li>Changed the wording on the EC2 reward to say "affects 1st Infinity Dimension" rather than
"affects Infinity Dimensions". (It always worked this way, this is just a correction)</li>
<li>Increased the base breeding speed of trimps by 10%.</li>
<li>You can now click through the footer and progress bar to access buttons that they are overlapping.
(This is for smaller screens)</li>
<li>Made periods longer.</li>
<li>Added loot boxes.</li>
<li>Removed loot boxes.</li>
<li>Added various missing periods to achievement descriptions.</li>
<li>Added a missing period to time spent in this eternity.</li>
Increased the price of creation count increases from 50 god power to 60.</li>
<li>Added a missing space to the "Autobuyers work twice as fast." upgrade.</li>
<li>Manually buying max dimension boosts no longer requires 10 eternities or more, and now only requires the bulk buy
dimension boosts breaking infinity upgrade.</li>
<li>Did a barrel roll.</li>
<li>Added more useless patch notes</li>
</ul>
`},{date:[2018,2,1],name:"Eternity Challenges",info:`
<ul>
<li>NEW TIME STUDIES</li>
<li>2 new achievement rows</li>
<li>Made certain news messages only show if you have reached certain levels of progression</li>
<li>Massively improved performance of calculating dimension costs thanks to SpectralFlame.
(Cuts cpu usage by up to 2/3 in late-game)</li>
<li>New news (get it?) ticker entries.</li>
<li>Added a production chart.</li>
<li>Added new statistics to replace the scale statistic after 1e100000 antimatter.</li>
<li>Added a new milestone for 30 eternities: "Start with all normal dimensions available for purchase".</li>
<li>Added an option to change the update rate of the game, ranging from 33ms to 200ms.
(before this, it was locked at 50ms)</li>
<li>The game now partially simulates offline progress, instead of estimating it.</li>
<li>Added 3 new eternity upgrades.</li>
<li>Added a reward to the "NEW DIMENSIONS???" achievement, "Your achievement bonus affects Infinity Dimensions."</li>
<li>Buffed time study 111. (10 ^ (log10(antimatter) / 290- 0.75)) > (10 ^ (log10(antimatter) / 285- 0.75))</li>
<li>Buffed time study 83. (1.0001^x) > (1.0004^x)</li>
<li>Nerfed eternity upgrade 1. ((x+1)^3) > (x+1)</li>
<li>Nerfed eternity upgrade 2. (x^log4(2x)) > ((x/300)^log4(2x) with harsher formula above 125,000)</li>
<li>Fixed a bunch of bugs and changed a bunch of things. (more detail below)</li>
<li>Added buy max buttons to Time Dimensions and Time Theorems.</li>
<li>Added a hotkey for replicanti galaxies. (R)</li><br>
<li>Nitty gritty:</li>
<li>Greatly improved the performance of calculating bonus tickspeed from time dimensions.</li>
<li>Replaced all references to soft resets with references to dimension boosts.</li>
<li>Made achievements update on import/hardreset.</li>
<li>Made the game take into account your infinity points gained on crunch for the purposes of
eternity point gain when you eternity.</li>
<li>The replicanti interval is now displayed after and reductions / increases.</li>
<li>Added missing periods to various achievements.</li>
<li>Made the bonus from time study 131 display next to max replicanti galaxies.</li>
<li>Added time dimensions to the info scale.</li>
<li>Changed the description of time study 31 to "Powers up bonuses that are based on your infinitied stat
(to the power of 4)" from "Powers up existing upgrades based on infinitied stat (to the power of 4)".</li>
<li>Changed the description of "MAXIMUM OVERDRIVE" to say "Big Crunch with X" instead of "Reach X".</li>
<li>Added "with reduced effect" to the description of time study 71, 72, and 73.</li>
<li>Changed the text on autobuy max dimension boosts to "Buy max dimboosts every X seconds:"
from "Max dimboost interval:". (To achieve parity with the autobuy max galaxies text)</li>
<li>Made the challenges button always show if you have more than 1 eternity.</li>
<li>Fixed centering issues with infinity and eternity upgrades.</li>
<li>Various minor changes to themes to improve consistency. (Too minute to list, even here)</li>
<li>Made the eternity autobuyer number multiply by 5 when you buy the eternity point multiplier.</li>
<li>Increased the requirement for "Is This Hell?". (5 > 6.66 seconds)</li>
<li>Reduced the starting replicanti interval upgrade cost. (1e160 > 1e140)</li>
<li>Galaxies are labeled "Distant Antimatter Galaxies" when the cost scaling starts. (At 100 galaxies)</li>
<li>Dimensions no longer produce anything after reaching challenge goal, or after reaching infinity with fixed infinity.
This is due to the c6 being abusable.</li>
<li>Made the 7 and 25 eternity milestones work much faster.</li>
<li>After unlocking bulk dimboosts, clicking dimension boost or pressing D will buy max dimension boosts.</li>
<li>Moved fake news, don't you dare to sleep, spreading cancer, and one for each dimension to rows 2, 3, 4,
and 7 respectively.</li>
<li>Added a visual display of how many galaxies/dim boosts you have next to the cost.</li>
<li>Added an explanation of hotkeys to the options page.</li>
<li>Made shift+1-8 purchase singular dimensions and shift+T purchase a singular tickspeed upgrade.</li>
<li>Reworked the display of the buy time theorem buttons.</li>
<li>The milestones page now has 2 columns.</li>
<li>Extended support for standard notation to e3e18, and letter/cancer notation (almost) infinitely.</li>
<li>Added support for standard, letter and logrithm notation in autobuyer inputs.</li>
<li>Added "in a challenge" to the description of "Zero Deaths".</li>
<li>Made most large numbers in achievements be listed in your chosen notation.</li>
<li>Nerfed "Gift From The Gods"'s achievement reward.</li>
<li>Made purchasing time theorems with EP require at least 1 time dimension.</li>
<li>First eternity now takes you to the time dimensions tab.</li>
<li>Time dimension prices now have 2 decimal places.</li>
<li>Reformatted the tick interval reduction text for very small numbers.</li>
<li>The game now keeps track of when you automatically do an infinity, and you can passively gain IP based off the
IP/min in that run if you go offline (but only if infinity isn't broken).</li>
<li>Made time study 171 apply retroactively. This was causing an issue with production being much lower than expected
when going into a long run on the same run as respeccing.</li>
<li>Fixed a bug where max all wasn't giving achievements when buying dimensions.</li>
<li>Fixed a bug where the game wouldn't show the default dimensions tab upon hard resetting.</li>
<li>Fixed a bug where time dimensions were called "X Dimension" rather than "X Time Dimension".</li>
<li>Fixed a bug where the replicanti galaxy button would show as locked if you had more than
the listed max replicanti galaxies and study 131.</li>
<li>Fixed a bug where the last ten eternities average said IP/X rather than EP/X.</li>
<li>Fixed a bug where the big crunch autobuyer said "X times since last crunch" instead of "X times last crunch".</li>
<li>Fixed a bug where the challenge records display wouldn't update upon import.</li>
<li>Fixed a bug where hotkeys wouldn't work sometimes.</li>
<li>Fixed a bug where secret theme names would display as "0" after refreshing.</li>
<li>Fixed a bug where time studies would move around when your window size was too small.</li>
<li>Fixed a bug where infinity dimensions would reset when clicking on a challenge and not entering while
challenge confirmations were on.</li>
<li>Fixed a bug where you always had the infinity challenge 1 reward.</li>
<li>Fixed a bug where eternity milestone classes weren't set correctly upon import.</li>
<li>Fixed a bug where the eternity autobuyer, sacrifice autobuyer, time dimension tab, and replicanti
wasn't hiding correctly upon import.</li>
<li>Fixed a bug where buy max dim boosts was able to buy 1 too many boosts.</li>
<li>Fixed a bug where the study tree would be off-centered if the game windows wasn't wide enough.</li>
<li>Fixed a bug where you could buy factions of dimension boosts with dimension boost bulk buy.</li>
<li>Fixed a bug where your autobuy max dimension boost interval would set itself to itself
if you eternitied while changing it.</li>
<li>Fixed a bug where secondary statistic tabs weren't hiding upon import.</li>
<li>Fixed a bug where replicanti galaxies wouldn't give a bonus if you had less than 3 galaxies.</li>
<li>Fixed a bug where the dimension boost autobuyer would ignore dimension boost costs until they costed 8th dimensions.
</li>
<li>Fixed a bug where the future shop multipliers were displayed before the x rather than after.</li>
<li>Fixed a bug where the challenge confirmation button's off and on were lowercase.</li>
<li>Fixed a bug where the static infinity point display would disappear after eternity.</li>
</ul>`},{date:[2017,12,1],name:'"Eternity" update',info:`
<ul>
<li>Time studies tree with free respec</li>
<li>Eternity Milestones with tons of automation</li>
<li>Eternity upgrades</li>
<li>TIME DIMENSIONS</li>
<li>REPLICANTIS</li>
<li>More themes made by Omsi</li>
<li>Disable hotkeys option</li>
<li>Current IP/min post-break</li>
<li>Infinity Challenge times</li>
<li>Past 10 eternities</li>
<li>Lowered IP multiplier cost by 1 Order of magnitude.</li>
<li>3 more rows of achievements</li>
<li>Infinity challenge reward nerfs (1st: 1.5x ➜ 1.3x; 3rd: lowered; 4th: mult^1.1 ➜ mult^1.05)</li>
<li>More news ticker entries</li>
<li>Immensely improved performance thanks to break_infinity.js made by Patashu, it replaces decimal.js</li>
<li>Added LZString for cloud saving purposes.</li>
<li>Achievement refractoring to reduce save string size made by StrangeTim.</li>
<li>Commas between exponents option for numbers higher than e100000</li>
<li>Added logarithm notation</li>
<li>Made letter and cancer notation last longer.
</ul>
`},{date:[2017,10,10],info:`
<ul>
<li>Complete refactoring for all upgrade UI.</li>
<li>Minor Upgrade Changes. (Capping some upgrades)</li>
<li>Kred shop- 3 paid Upgrades- More upgrades (and upgrade improvements) coming in the future.</li>
<li>8 new Achievements- Achievement Rewards have also been added.</li>
<li>Infinity Challenges- additional challenges to do going from Inf Dim 2 to current end game and beyond.</li>
<li>Main Screen UI updates- IP points are now visible everywhere.</li>
<li>Hotkeys- C for Big Crunch, M for Max All, S for Dimensional Sacrifice, D for Dimension Shift/Boost,
G for Antimatter Galaxy, Numbers 1-8 for Buy 10 (D1-8), A for Toggle Autobuyers.</li>
<li>Bug Fixes- At least 2, including a percentage buff.</li>
</ul>`},{date:[2017,9,25],info:`
<ul>
<li>NEW DIMENSIONS?</li>
<li>Super Secret Post-Infinity Dimensions added. Get more antimatter to find out!</li>
<li>Post-break double galaxy upgrade nerfed. It now gives 50% more.</li>
<li>Four new post-break upgrades added.</li>
<li>Scaling of the dimension cost multiplier increased.</li>
<li>Eight new achievements added.</li>
<li>Cloud saving maybe added.</li>
<li>Refunded Dimension cost increase multiplier and changed the cost.</li>
</ul>`},{date:[2017,9,19],name:"Breaking Infinity",info:`
<ul>
<li>Post infinity content added (Breaking infinity), requires big crunch speed to be maxed.</li>
<li>New upgrade tree pre-breaking, included one upgrade that be taken multiple times to
increase infinity point gains.</li>
<li>Eight late game post-breaking upgrades.</li>
<li>Eight new achievements.</li>
<li>Reworked autobuyer prices and times, full refund for all points spent on them.</li>
<li>Autobuyers now can be upgraded beyond 0.1 seconds, and they also now 'wait' after their interval has passed,
instantly buying once they are able to.</li>
<li>Automatic DimBoosts, Galaxies, and Big Crunches now have an input box.</li>
<li>Unique achievement rewards for multiple achievements.</li>
<li>Zero galaxies now gives 11% tickspeed.</li>
<li>Galaxies past two give diminishing returns, Faster than a Potato made easier to compensate.</li>
<li>Game now updates 20 times a second with increased performance, max autobuyer speed is not impacted.</li>
<li>Autobuyer settings are now saved in between sessions.</li>
<li>Monitor scaling issues mainly fixed.</li>
<li>Priority should be working properly.</li>
<li>Big crunch button is now less obtrusive.</li>
<li>Your screen no longer defaults to the dimensions tab when you reach infinity
(if you have broken infinity or if your fastest time to reach infinity is less than one minute).</li>
<li>More statistics have been added such as record challenge times and last ten infinities.</li>
<li>Times below one minute are now kept at two decimal points of precision.</li>
<li>Percentage increase per second for dimensions 1-8 are now kept to two decimal points of precision.</li>
<li>The reset button works better now.</li>
</ul>`},{date:[2017,9,7],name:"Challenges",info:`
<ul>
<li>Added 12 challenges.</li>
<li>Added 8 new achievements.</li>
<li>Added autobuyers.</li>
</ul>`},{date:[2017,8,30],info:`
<ul>
<li>Added news on top of the page.</li>
<li>Added a multiplier for completing a row of achievements.</li>
<li>New letter notation option.</li>
<li>Nerfed galaxies from +3% to +2%.</li>
<li>Added 8 new achievements.</li>
<li>Added Dimensional Sacrifice, appears at 5th dimension shift/boost.</li>
<li>More notations!</li>
<li>Bar until infinity at the bottom.</li>
<li>Some UI changes.</li>
</ul>`},{date:[2017,8,24],name:"Infinity",info:`
<ul>
<li>Now when you get to 1.7e308 antimatter, you reach infinity, and you can reset again at infinity,
gaining infinity points.</li>
<li>You can use infinity points for upgrades.</li>
<li>The game also now runs 6 hours while it is closed.</li>
<li>In addition there are some graphic updates.</li>
</ul>`},{date:[2017,5,7],info:`
<ul>
<li>Added this changelog, fixed money displaying problem. Added a title to the HTML.</li>
<li>The game now works offtab.</li>
<li>Fixed the bug with costs showing for example 1000 SxTg.</li>
<li>Visual update! And statistics.</li>
<li>Added export and import options.</li>
<li>Added save button although game saves every 10 seconds.</li>
<li>Slightly smaller text and added a max all button.</li>
<li>Saves should now FINALLY work properly.</li>
</ul>`}];for(let t=0;t<LC.length;t++)LC[t].id=t;const Q9=[{name:"Dimension Boost",option:"dimensionBoost",isUnlocked:()=>PlayerProgress.infinityUnlocked()||player.galaxies>0||player.dimensionBoosts>0},{name:"Antimatter Galaxy",option:"antimatterGalaxy",isUnlocked:()=>PlayerProgress.infinityUnlocked()||player.galaxies>0},{name:"Sacrifice",option:"sacrifice",isUnlocked:()=>Sacrifice.isVisible},{name:"Big Crunch",option:"bigCrunch",isUnlocked:()=>player.break||PlayerProgress.eternityUnlocked()},{name:"Challenges",option:"challenges",isUnlocked:()=>PlayerProgress.infinityUnlocked()},{name:"Exit Challenges",option:"exitChallenge",isUnlocked:()=>PlayerProgress.infinityUnlocked()},{name:"Replicanti Galaxy",option:"replicantiGalaxy",isUnlocked:()=>PlayerProgress.eternityUnlocked()||player.replicanti.unl},{name:"Eternity",option:"eternity",isUnlocked:()=>PlayerProgress.eternityUnlocked()},{name:"Dilation",option:"dilation",isUnlocked:()=>PlayerProgress.realityUnlocked()||!Currency.tachyonParticles.eq(0)},{name:"Reset Reality",option:"resetReality",isUnlocked:()=>PlayerProgress.realityUnlocked()},{name:"Glyph Replace",option:"glyphReplace",isUnlocked:()=>PlayerProgress.realityUnlocked()},{name:"Glyph Sacrifice",option:"glyphSacrifice",isUnlocked:()=>GlyphSacrificeHandler.canSacrifice},{name:"Glyph Purge",option:"autoClean",isUnlocked:()=>GlyphSacrificeHandler.canSacrifice},{name:"Sacrifice All Glyphs",option:"sacrificeAll",isUnlocked:()=>GlyphSacrificeHandler.canSacrifice},{name:"Glyph Selection",option:"glyphSelection",isUnlocked:()=>Autobuyer.reality.isUnlocked},{name:"Glyph Undo",option:"glyphUndo",isUnlocked:()=>TeresaUnlocks.undo.canBeApplied},{name:"Switch Automator Editor",option:"switchAutomatorMode",isUnlocked:()=>Player.automatorUnlocked},{name:"Delete Glyph Preset",option:"deleteGlyphSetSave",isUnlocked:()=>EffarigUnlock.setSaves.isUnlocked},{name:"Glyph Refine",option:"glyphRefine",isUnlocked:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied},{name:"Armageddon",option:"armageddon",isUnlocked:()=>Pelle.isDoomed},{name:"Respec Shop Purchases",option:"respecIAP",isUnlocked:()=>Cloud.isAvailable}],X0={roles:{1:"Creator",2:"Technical Architect",3:"Lead Developer",4:"Android Developer",5:"Steam Developer",6:"Library Developer",7:"Developer",8:"Lead Design Consultant",9:"Design Consultant",10:"Writer",11:"Achievement Art",12:"Modal Maker, Lady Taker, Pie Baker",13:"Lurker Tester",14:"Web Tester",15:"Android Tester"},people:[{name:"Hevipelle",name2:"Ivar Kerajärvi",roles:1},{name:"Razenpok",name2:"Andrei Andreev",roles:2},{name:"garnet420",roles:3},{name:"Omsi",roles:[3,11]},{name:"SpectralFlame",name2:"Christopher Yip",roles:3},{name:"WaitingIdly",roles:[3,7,9,14,15]},{name:"kajfik",name2:"Jakub Kajfosz",roles:4},{name:"Makopaz",name2:"Zack Stein",roles:5},{name:"Patashu",roles:[6,7,14]},{name:"Dan",roles:[7,14]},{name:"earth",name2:"Jace Royer",roles:[7,12,14,15]},{name:"Hira",roles:[7,14,15]},{name:"IkerStream",name2:"Iker de Aguirre",roles:[7,14]},{name:"L4R5",name2:"Lars Wolf",roles:[7,14,15]},{name:"Pichusuperlover",roles:[7,9,14]},{name:"realrapidjazz",roles:[7,8,10]},{name:"Scarlet",roles:[7,14,15]},{name:"slabdrill",roles:7},{name:"Acamaeda",roles:[9,14]},{name:"Dravitar",name2:"Alex Henderson",roles:13},{name:"Aesis",roles:14},{name:"AFYINEE",name2:"Gabriel HADDAG",roles:14},{name:"Alexitato",roles:14},{name:"Anno",roles:14},{name:"Myresa Exina",roles:[14,15]},{name:"ArrowBounce",name2:"Timothy Su",roles:14},{name:"Birb",name2:"Kelsey Black",roles:14},{name:"Boo",name2:"Jean-Christophe Bourgault",roles:14},{name:"CaptainGalaxy",name2:"Ovidijus Točelis",roles:14},{name:"ChaoticHans",roles:[14,15]},{name:"cubic frog",roles:14},{name:"dankesehr",roles:14},{name:"Davixx",name2:"Davide Fedele",roles:14},{name:"Empireus",roles:14},{name:"GirixK",name2:"Nikola Jelinčić",roles:[14,15]},{name:"GoldenTritium",roles:[14,15]},{name:"Kael",roles:14},{name:"Lynn",roles:14},{name:"Merp",roles:14},{name:"philipebreaker",name2:"Philipe",roles:14},{name:"Phillip Marshall",roles:14},{name:"Phoebe",roles:14},{name:"Reda Kotob",roles:14},{name:"Saturnus",roles:[14,10]},{name:"SereKabii",roles:14},{name:"Sheer",roles:14},{name:"sirusi",name2:"Vinícius Oliveira Martins",roles:14},{name:"Spanosa",name2:"Jared K",roles:14},{name:"Sparticle999",roles:14},{name:"SpicyCrusader13",roles:[14,15]},{name:"Storm",roles:14},{name:"SzyszakS",roles:14},{name:"Tacitus",roles:14},{name:"Typh",roles:14},{name:"Vnge",name2:"Ben Parrish",roles:[14,15]},{name:"Xemadus",name2:"Jonathan Gibson",roles:14},{name:"Young Woo Joo",roles:14},{name:"Zipi",roles:14},{name:"about:blank",roles:15},{name:"ÆiOuF",roles:15},{name:"Akirious",roles:15},{name:"Anjinho01",roles:15},{name:"Anthios",roles:15},{name:"Aubrey Ark",roles:15},{name:"Auti",name2:"Lucia Tolle",roles:15},{name:"Buck",roles:15},{name:"Barrin84",roles:15},{name:"Calmcat",roles:15},{name:"ChizuX",roles:15},{name:"Circle",roles:15},{name:"Crinkly Weasel",name2:"Aaryan Sarawgi",roles:15},{name:"Daniella",roles:15},{name:"DarthDie",name2:"Briar Bowser",roles:15},{name:"ElPopote83",roles:15},{name:"Epsilon",name2:"Coolguystorm",roles:15},{name:"Firecracker",roles:15},{name:"Gaunter",roles:15},{name:"Gimmick",roles:15},{name:"HarrisL2",roles:15},{name:"Hellbach",name2:"Asher Günther",roles:15},{name:"hen-ben",name2:"Henry Ellenberg",roles:15},{name:"ImpossibleSalsa",roles:15},{name:"JayM#1872",name2:"Jay McGee",roles:15},{name:"Johanniklas",name2:"Jan-Niklas Petersen",roles:15},{name:"Joseph Micheli",roles:15},{name:"kaislash",name2:"Lily",roles:15},{name:"Kirku",name2:"Fabian Makowski",roles:15},{name:"Kirin",name2:"Arthur",roles:15},{name:"Klötzchen",roles:15},{name:"L5racer",roles:15},{name:"Marshmallow",roles:15},{name:"HyperionMike",name2:"Miikael Siitan",roles:15},{name:"Mirai",roles:15},{name:"Monoma",name2:"ARoman Ruiz",roles:15},{name:"Nani",roles:15},{name:"Neo",name2:"Joon",roles:15},{name:"netweak",roles:15},{name:"NiZeKiHo",name2:"DominusDane",roles:15},{name:"NotBrewst",name2:"Luc Leblanc",roles:15},{name:"opdollar",name2:"Zane Coole",roles:15},{name:"Pavlxiiv",roles:15},{name:"coffeeflake",roles:15},{name:"Razor",roles:15},{name:"Razvan Cercel",roles:15},{name:"ReacTivity",roles:15},{name:"Reaxt",name2:"Rea Koehler",roles:15},{name:"Ruins",roles:15},{name:"Rukimix",roles:15},{name:"shadowevil",roles:15},{name:"Skunky",name2:"Lukas",roles:15},{name:"Snaeky",roles:15},{name:"Socks",name2:"Hannah Pocks",roles:15},{name:"Sweets the Alien",roles:15},{name:"Tables",roles:15},{name:"Taylor Reeves",roles:15},{name:"TheAhmex",roles:15},{name:"The Trust Melon",roles:15},{name:"Tim Wong",roles:15},{name:"tragedt",name2:"Ethan Manninen",roles:15},{name:"tui sapo",roles:15},{name:"Valentine Clarissa Alanis Star Z",roles:15},{name:"vanadium_void",roles:15},{name:"X3N0_32",roles:15},{name:"ZylaKat",name2:"Katherine Goforth-Harbin",roles:15},{name:"Jedall",roles:15},{name:"Lapis",roles:15},{name:"Guimora",roles:15},{name:"Neowo",name2:"Neo Mitchell",roles:15},{name:"AshTheDinosaur",roles:15},{name:"Annyeong1",name2:"Jeeho Yoon",roles:15},{name:"Dedzuka",roles:15},{name:"Something",name2:"Sushi",roles:15},{name:"Viola",roles:15},{name:"Luna van Yeethoven",roles:15},{name:"Lotocion",roles:15},{name:"Merlyn",roles:15},{name:"Tilly",roles:15},{name:"Sauer",name2:"Matt",roles:15},{name:"PtigaD",roles:15},{name:"Aleame",roles:15},{name:"GFADE00",roles:15},{name:"Amity Emily",roles:15},{name:"BsonHK",roles:15},{name:"Angel",roles:15},{name:"OhBrod",roles:15},{name:"sxy62106210",roles:15},{name:"cyxw",roles:15},{name:"Cosmic_Fyre",roles:15},{name:"The Cube Dude",roles:15},{name:"Tias",name2:"Tim Stanglow",roles:15},{name:"Rad Cooldude",roles:15},{name:"DataBitMC",roles:15},{name:"Pizzalover04",name2:"Zanpaulco",roles:15},{name:"Airakogi",roles:15}]};X0.roles.count=Object.keys(X0.roles).length;function ki(t,e,i){return Notation.scientific.format(t,e,i)}function Mr(t){return Notations.current.isPainful?ki(t,2):formatWithCommas(typeof t=="number"?t.toFixed(0):t.toNumber().toFixed(0))}const J9={challenges:[{name:()=>`${Teresa.possessiveName} Reality`,activityToken:()=>Teresa.isRunning,resource:()=>Teresa.runCompleted?`${ki(player.antimatter,2,1)} AM`:`${ki(player.eternityPoints,2)} EP`},{name:()=>`${Effarig.possessiveName} Reality - ${Effarig.currentStageName}`,activityToken:()=>Effarig.isRunning,resource:()=>{switch(Effarig.currentStage){case EFFARIG_STAGES.INFINITY:return`${ki(player.antimatter,2,1)} AM`;case EFFARIG_STAGES.ETERNITY:return`${ki(player.infinityPoints,2)} IP`;case EFFARIG_STAGES.REALITY:default:return`${ki(player.eternityPoints,2)} EP`}}},{name:()=>`${Enslaved.possessiveName} Reality`,activityToken:()=>Enslaved.isRunning,resource:()=>`${ki(player.eternityPoints,2)} EP`},{name:()=>`${V.possessiveName} Reality`,activityToken:()=>V.isRunning,resource:()=>null},{name:()=>`${Ra.possessiveName} Reality`,activityToken:()=>Ra.isRunning,resource:()=>null},{name:()=>{const t=Laitela.maxAllowedDimension,e=t?`D${t} max`:"Final";return`${Laitela.possessiveName} Reality - ${e}`},activityToken:()=>Laitela.isRunning,resource:()=>`${formatPercents(player.celestials.laitela.entropy,2,2)} Entropy`},{name:()=>"Dilation",activityToken:()=>player.dilation.active,resource:()=>`${ki(player.antimatter,2,1)} AM`},{name:t=>`EC ${t}`,activityToken:()=>{if(!player.challenge.eternity.current)return!1;const t=player.challenge.eternity.current,e=EternityChallenge(t);return e.remainingCompletions?`${t}x${e.completions+1}`:t},resource:()=>`${ki(player.infinityPoints,2)} IP`},{name:t=>`IC ${t}`,activityToken:()=>player.challenge.infinity.current,resource:()=>`${ki(player.antimatter,2,1)} AM`},{name:t=>`NC ${t}`,activityToken:()=>player.challenge.normal.current,resource:()=>`${ki(player.antimatter,2,1)} AM`}],stages:[{name:"Pre-Infinity",hasReached:()=>!0,mainResource:()=>`${ki(player.antimatter,2,1)} AM`,resourceList:[()=>quantify("Boost",player.dimensionBoosts,0,0,Mr),()=>quantify("Galaxy",player.galaxies,0,0,Mr)]},{name:"Infinity",hasReached:()=>PlayerProgress.infinityUnlocked(),mainResource:()=>`${ki(player.infinityPoints,2)} IP`,resourceList:[()=>quantify("Infinity",player.infinities,0,0,Mr)]},{name:"Broken Infinity",hasReached:()=>player.break,mainResource:()=>`${ki(player.infinityPoints,2)} IP`,resourceList:[()=>quantify("Infinity",player.infinities,2,0,ki)]},{name:"Eternity",hasReached:()=>PlayerProgress.eternityUnlocked(),mainResource:()=>`${ki(player.eternityPoints,2)} EP`,resourceList:[()=>quantify("Eternity",player.eternities,0,0,Mr)]},{name:"Eternity",hasReached:()=>player.eternityChalls.eterc1>0,mainResource:()=>`${ki(player.eternityPoints,2)} EP`,resourceList:[()=>quantify("EC completion",Object.values(player.eternityChalls).reduce((t,e)=>t+e,0),0,0,Mr)]},{name:"Time Dilation",hasReached:()=>PlayerProgress.dilationUnlocked(),mainResource:()=>`${ki(player.eternityPoints,2)} EP`,resourceList:[()=>`${ki(player.dilation.dilatedTime,2,2)} DT`]},{name:"Reality",hasReached:()=>player.realities>0,mainResource:()=>`${ki(player.reality.realityMachines,2)} RM`,resourceList:[()=>quantify("Reality",player.realities,0,0,Mr),()=>`Best Glyph Level: ${Mr(player.records.bestReality.glyphLevel)}`]},{name:()=>Teresa.displayName,hasReached:()=>Teresa.isUnlocked,mainResource:()=>`${ki(player.reality.realityMachines,2)} RM`,resourceList:[()=>quantify("Reality",player.realities,0,0,Mr),()=>`Best GL: ${Mr(player.records.bestReality.glyphLevel)}`,()=>`Poured: ${ki(player.celestials.teresa.pouredAmount,2)} RM`]},{name:()=>Effarig.displayName,hasReached:()=>TeresaUnlocks.effarig.isUnlocked,mainResource:()=>`${ki(player.reality.realityMachines,2)} RM`,resourceList:[()=>`Best GL: ${Mr(player.records.bestReality.glyphLevel)}`,()=>quantify("Relic Shard",player.celestials.effarig.relicShards,2,0,ki)]},{name:()=>Enslaved.displayName,hasReached:()=>EffarigUnlock.eternity.isUnlocked,mainResource:()=>`${ki(player.reality.realityMachines,2)} RM`,resourceList:[()=>`Best GL: ${Mr(player.records.bestReality.glyphLevel)}`,()=>`Charged: ${ki(TimeSpan.fromMilliseconds(player.celestials.enslaved.stored).totalYears,2)} years`]},{name:()=>V.displayName,hasReached:()=>Achievement(151).isUnlocked,mainResource:()=>`${ki(player.reality.realityMachines,2)} RM`,resourceList:[()=>`Best GL: ${Mr(player.records.bestReality.glyphLevel)}`,()=>quantify("V-Achievement",player.celestials.v.runUnlocks.sum(),0,0,Mr)]},{name:()=>Ra.displayName,hasReached:()=>VUnlocks.raUnlock.isUnlocked,mainResource:()=>`${ki(player.reality.realityMachines,2)} RM`,resourceList:[()=>`Best GL: ${Mr(player.records.bestReality.glyphLevel)}`,()=>`Ra Levels: ${Ra.pets.all.map(t=>Mr(t.level)).join("/")}`]},{name:()=>Ra.displayName,hasReached:()=>MachineHandler.isIMUnlocked,mainResource:()=>`${ki(player.reality.realityMachines)} RM + ${ki(player.reality.imaginaryMachines,2)} iM`,resourceList:[()=>`Best GL: ${Mr(player.records.bestReality.glyphLevel)}`,()=>`Ra Levels: ${Ra.pets.all.map(t=>Mr(t.level)).join("/")}`]},{name:()=>Laitela.displayName,hasReached:()=>Laitela.isUnlocked,mainResource:()=>`${ki(player.reality.realityMachines)} RM + ${ki(player.reality.imaginaryMachines,2)} iM`,resourceList:[()=>`Best GL: ${Mr(player.records.bestReality.glyphLevel)}`,()=>quantify("Singularity",player.celestials.laitela.singularities,2,0,ki)]},{name:"Pelle",hasReached:()=>Pelle.isDoomed,mainResource:()=>quantify("Reality Shard",player.celestials.pelle.realityShards,2),resourceList:[()=>quantify("Remnant",player.celestials.pelle.remnants,2)]},{name:"END",hasReached:()=>GameEnd.endState>=END_STATE_MARKERS.GAME_END,mainResource:()=>"END Antimatter",resourceList:[()=>"Nothing remains."]}]};function eW(t,e,i){return Decimal.multiply(t,Decimal.pow(e,player.dilation.rebuyables[i]))}function _p(t){return{id:t.id,cost:()=>eW(t.initialCost,t.increment,t.id),initialCost:t.initialCost,increment:t.increment,description:t.description,effect:()=>t.effect(player.dilation.rebuyables[t.id]),formatEffect:t.formatEffect,formatCost:t.formatCost,purchaseCap:t.purchaseCap,reachedCap:()=>player.dilation.rebuyables[t.id]>=t.purchaseCap,pelleOnly:!!t.pelleOnly,rebuyable:!0}}const tW={dtGain:_p({id:1,initialCost:1e4,increment:10,description:()=>SingularityMilestone.dilatedTimeFromSingularities.canBeApplied||Achievement(187).canBeApplied?`${formatX(2*Effects.product(SingularityMilestone.dilatedTimeFromSingularities,Achievement(187)),2,2)} Dilated Time gain`:"Double Dilated Time gain",effect:t=>{const e=2*Effects.product(SingularityMilestone.dilatedTimeFromSingularities,Achievement(187));return Decimal.pow(e,t)},formatEffect:t=>{const e=SingularityMilestone.dilatedTimeFromSingularities.canBeApplied||Achievement(187).canBeApplied;return formatX(t,2,e?2:0)},formatCost:t=>format(t,2),purchaseCap:Number.MAX_VALUE}),galaxyThreshold:_p({id:2,initialCost:1e6,increment:100,description:()=>Perk.bypassTGReset.isBought&&!Pelle.isDoomed?"Reset Tachyon Galaxies, but lower their threshold":"Reset Dilated Time and Tachyon Galaxies, but lower their threshold",effect:t=>t<38?Math.pow(.8,t):0,formatEffect:t=>{if(t===0)return`${formatX(getTachyonGalaxyMult(t),4,4)}`;const e=t===Math.pow(.8,37)?0:.8*t;return`${formatX(getTachyonGalaxyMult(t),4,4)} ➜
        Next: ${formatX(getTachyonGalaxyMult(e),4,4)}`},formatCost:t=>format(t,2),purchaseCap:38}),tachyonGain:_p({id:3,initialCost:1e7,increment:20,description:()=>Pelle.isDoomed?`Multiply the amount of Tachyon Particles gained by ${formatInt(1)}`:Enslaved.isRunning?`Multiply the amount of Tachyon Particles gained
      by ${Math.pow(3,Enslaved.tachyonNerf).toFixed(2)}`:"Triple the amount of Tachyon Particles gained",effect:t=>Pelle.isDoomed?L.D1.pow(t):L.D3.pow(t),formatEffect:t=>formatX(t,2),formatCost:t=>format(t,2),purchaseCap:Number.MAX_VALUE}),doubleGalaxies:{id:4,cost:5e6,description:()=>`Gain twice as many Tachyon Galaxies, up to ${formatInt(500)} base Galaxies`,effect:2},tdMultReplicanti:{id:5,cost:1e9,description:()=>{const t=replicantiMult().pLog10();let e="0.1";if(t>9e3){const i=DilationUpgrade.tdMultReplicanti.effectValue.pLog10()/t;i<.095&&(e=i.toFixed(2))}return`Time Dimensions are affected by Replicanti multiplier ${formatPow(e,1,3)}, reduced
        effect above ${formatX(L.E9000)}`},effect:()=>{let t=replicantiMult().pLog10()*.1;return t=t>9e3?9e3+.5*(t-9e3):t,Decimal.pow10(t)},formatEffect:t=>formatX(t,2,1)},ndMultDT:{id:6,cost:5e7,description:"Antimatter Dimension multiplier based on Dilated Time, unaffected by Time Dilation",effect:()=>Currency.dilatedTime.value.pow(308).clampMin(1),formatEffect:t=>formatX(t,2,1)},ipMultDT:{id:7,cost:2e12,description:"Gain a multiplier to Infinity Points based on Dilated Time",effect:()=>Currency.dilatedTime.value.pow(1e3).clampMin(1),formatEffect:t=>formatX(t,2,1),cap:()=>Effarig.eternityCap},timeStudySplit:{id:8,cost:1e10,description:"You can buy all three Time Study paths from the Dimension Split"},dilationPenalty:{id:9,cost:1e11,description:()=>`Reduce the Dilation penalty (${formatPow(1.05,2,2)} after reduction)`,effect:1.05},ttGenerator:{id:10,cost:1e15,description:"Generate Time Theorems based on Tachyon Particles",effect:()=>Currency.tachyonParticles.value.div(2e4),formatEffect:t=>`${format(t,2,1)}/sec`},dtGainPelle:_p({id:11,initialCost:1e14,increment:100,pelleOnly:!0,description:()=>`${formatX(5)} Dilated Time gain`,effect:t=>Decimal.pow(5,t),formatEffect:t=>formatX(t,2),formatCost:t=>format(t,2),purchaseCap:Number.MAX_VALUE}),galaxyMultiplier:_p({id:12,initialCost:1e15,increment:1e3,pelleOnly:!0,description:"Multiply Tachyon Galaxies gained, applies after TG doubling upgrade",effect:t=>t+1,formatEffect:t=>`${formatX(t,2)} ➜ ${formatX(t+1,2)}`,formatCost:t=>format(t,2),purchaseCap:Number.MAX_VALUE}),tickspeedPower:_p({id:13,initialCost:1e16,increment:1e4,pelleOnly:!0,description:"Gain a power to Tickspeed",effect:t=>1+t*.03,formatEffect:t=>`${formatPow(t,2,2)} ➜ ${formatPow(t+.03,2,2)}`,formatCost:t=>format(t,2),purchaseCap:Number.MAX_VALUE}),galaxyThresholdPelle:{id:14,cost:1e45,pelleOnly:!0,description:"Apply a cube root to the Tachyon Galaxy threshold",effect:1/3},flatDilationMult:{id:15,cost:1e55,pelleOnly:!0,description:()=>"Gain more Dilated Time based on current EP",effect:()=>1e9**Math.min((Math.max(player.eternityPoints.log10()-1500,0)/2500)**1.2,1),formatEffect:t=>formatX(t,2,2)}},iW={autobuyerIPMult:{eternities:1,reward:"Unlock the Infinity Point multiplier autobuyer",pelleUseless:!0},keepAutobuyers:{eternities:2,reward:"You start Eternity with all Normal Challenges complete, all normal autobuyers, and infinity broken"},autobuyerReplicantiGalaxy:{eternities:3,reward:"Unlock the Replicanti Galaxy Autobuyer"},keepInfinityUpgrades:{eternities:4,reward:"You start Eternity with all Infinity Upgrades",givenByPelle:()=>PelleUpgrade.keepInfinityUpgrades.isBought,pelleUseless:!0},bigCrunchModes:{eternities:5,reward:"Unlock more Big Crunch Autobuyer options"},autoEP:{eternities:6,reward:()=>{const t=getOfflineEPGain(TimeSpan.fromMinutes(1).totalMilliseconds),e=getEternitiedMilestoneReward(TimeSpan.fromHours(1).totalMilliseconds,EternityMilestone.autoEternities.isReached).gt(0),i=getInfinitiedMilestoneReward(TimeSpan.fromHours(1).totalMilliseconds,EternityMilestone.autoInfinities.isReached).gt(0);if(!player.options.offlineProgress)return`This milestone would give offline EP generation, but offline progress
        is currently disabled`;const n=e||i?"Inactive":`Currently ${format(t,2,2)} EP/min`;return`While offline, gain ${formatPercents(.25)} of your best Eternity Points per minute from previous
        Eternities (${n})`},activeCondition:()=>player.options.offlineProgress?`Active as long as neither of the other offline milestones
        (${formatInt(200)} or ${formatInt(1e3)}) are also active`:""},autoIC:{eternities:7,reward:`You complete Infinity Challenges as soon as you unlock them,
      and keep the Dimensional Sacrifice Autobuyer`,pelleUseless:!0},keepBreakUpgrades:{eternities:8,reward:"You start Eternity with all Break Infinity Upgrades",givenByPelle:()=>PelleUpgrade.keepBreakInfinityUpgrades.isBought,pelleUseless:!0},autobuyMaxGalaxies:{eternities:9,reward:"Unlock the buy max Antimatter Galaxies Autobuyer mode"},unlockReplicanti:{eternities:10,reward:"You start with Replicanti unlocked",givenByPelle:()=>PelleUpgrade.replicantiStayUnlocked.isBought,pelleUseless:!0},autobuyerID1:{eternities:11,reward:"Unlock the 1st Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autobuyerID2:{eternities:12,reward:"Unlock the 2nd Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autobuyerID3:{eternities:13,reward:"Unlock the 3rd Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autobuyerID4:{eternities:14,reward:"Unlock the 4th Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autobuyerID5:{eternities:15,reward:"Unlock the 5th Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autobuyerID6:{eternities:16,reward:"Unlock the 6th Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autobuyerID7:{eternities:17,reward:"Unlock the 7th Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autobuyerID8:{eternities:18,reward:"Unlock the 8th Infinity Dimension Autobuyer",givenByPelle:()=>PelleUpgrade.IDAutobuyers.isBought,pelleUseless:!0},autoUnlockID:{eternities:25,reward:"You automatically unlock Infinity Dimensions upon reaching them"},unlockAllND:{eternities:30,reward:"Start with all Antimatter Dimensions available for purchase"},replicantiNoReset:{eternities:40,reward:`Replicanti Galaxies no longer reset Antimatter, Antimatter Dimensions,
      Tickspeed, Dimensional Sacrifice, or Dimension Boosts`,pelleUseless:!0},autobuyerReplicantiChance:{eternities:50,reward:"Unlock the Replicanti Chance Upgrade Autobuyer",givenByPelle:()=>PelleUpgrade.replicantiAutobuyers.isBought,pelleUseless:!0},autobuyerReplicantiInterval:{eternities:60,reward:"Unlock the Replicanti Interval Upgrade Autobuyer",givenByPelle:()=>PelleUpgrade.replicantiAutobuyers.isBought,pelleUseless:!0},autobuyerReplicantiMaxGalaxies:{eternities:80,reward:"Unlock the Max Replicanti Galaxy Upgrade Autobuyer",givenByPelle:()=>PelleUpgrade.replicantiAutobuyers.isBought,pelleUseless:!0},autobuyerEternity:{eternities:100,reward:"Unlock autobuyer for Eternities"},autoEternities:{eternities:200,reward:()=>{if(!player.options.offlineProgress)return`This milestone would generate eternities offline, but offline
        progress is currently disabled`;const t=getEternitiedMilestoneReward(TimeSpan.fromHours(1).totalMilliseconds,player.eternities.gte(200)),e=PlayerProgress.seenAlteredSpeed()?" real-time":"",i=t.gt(0)?`Currently ${format(t,2,2)}/hour`:"Inactive";return`While offline, gain Eternities at ${formatPercents(.5)} the rate of your fastest${e} Eternity
        (${i})`},activeCondition:()=>player.options.offlineProgress?`Must be outside of all Challenges and Dilation, and the Eternity Autobuyer must be set to Eternity at zero EP.
        This milestone's effect is capped at ${formatInt(33)}ms.`:"",pelleUseless:!0},autoInfinities:{eternities:1e3,reward:()=>{if(!player.options.offlineProgress)return`This milestone would generate infinities offline, but offline
        progress is currently disabled`;const t=getInfinitiedMilestoneReward(TimeSpan.fromHours(1).totalMilliseconds,player.eternities.gte(1e3)),e=t.gt(0)?`Currently ${format(t,2,2)}/hour`:"Inactive";return`While offline, gain Infinities equal to ${formatPercents(.5)} your best Infinities/hour this Eternity
        (${e})`},activeCondition:()=>player.options.offlineProgress?`Must be outside of Normal/Infinity Challenges and outside of EC4 and EC12,
        the Big Crunch Autobuyer must be turned on and set to time mode with ${formatInt(5)} seconds or less,
        and the Eternity Autobuyer must be turned off.`:"",pelleUseless:!0}},nW={idMultEP:{id:1,cost:5,description:()=>`Infinity Dimension multiplier based on unspent Eternity Points (x+${formatInt(1)})`,effect:()=>Currency.eternityPoints.value.plus(1),formatEffect:t=>formatX(t,2,1)},idMultEternities:{id:2,cost:10,description:()=>`Infinity Dimension multiplier based on Eternities
      ((x/${formatInt(200)})^log4(${formatInt(2)}x), softcap at ${format(1e5)} Eternities)`,effect(){const t=Math.log4,e=Currency.eternities.value.clampMax(1e5).toNumber(),i=e/200+1,n=Math.log(e*2+1)/t,r=Math.pow(i,n),s=Currency.eternities.value.sub(1e5),a=s.divide(200).plus(1),o=s.times(2).plus(1).log(Math.E)/t;return a.times(o).clampMin(1).times(r)},formatEffect:t=>formatX(t,2,1)},idMultICRecords:{id:3,cost:5e4,description:"Infinity Dimension multiplier based on sum of Infinity Challenge times",effect:()=>L.D2.pow(30/Math.clampMin(Time.infinityChallengeSum.totalSeconds,.1)),cap:L.D2P30D0_61,formatEffect:t=>formatX(t,2,1)},tdMultAchs:{id:4,cost:1e16,description:"Your Achievement bonus affects Time Dimensions",effect:()=>Achievements.power,formatEffect:t=>formatX(t,2,1)},tdMultTheorems:{id:5,cost:1e40,description:"Time Dimensions are multiplied by your unspent Time Theorems",effect:()=>Decimal.max(Currency.timeTheorems.value,1),formatEffect:t=>formatX(t,2,1)},tdMultRealTime:{id:6,cost:1e50,description:()=>Pelle.isDoomed?"Time Dimensions are multiplied by days played in this Armageddon":"Time Dimensions are multiplied by days played",effect:()=>Pelle.isDoomed?1+Time.thisReality.totalDays:Math.max(Time.totalTimePlayed.totalDays,1),formatEffect:t=>formatX(t,2,1)}},rW=[{id:1,description:"Unlock Time Dilation",cost:5e3,requirement:()=>{const t=Currency.timeTheorems.max.gte(TimeStudy.dilation.totalTimeTheoremRequirement);if(Ra.unlocks.autoUnlockDilation.canBeApplied&&t&&!isInCelestialReality()&&!Pelle.isDoomed)return!0;const e=[231,232,233,234].some(n=>TimeStudy(n).isBought);if(Perk.bypassECDilation.canBeApplied)return e;const i=EternityChallenge(11).isFullyCompleted&&EternityChallenge(12).isFullyCompleted;return e&&i&&t}},{id:2,description:"Unlock the 5th Time Dimension",cost:1e6,requirement:()=>PlayerProgress.dilationUnlocked()},{id:3,description:"Unlock the 6th Time Dimension",cost:1e7,requirement:()=>TimeStudy.timeDimension(5).isBought},{id:4,description:"Unlock the 7th Time Dimension",cost:1e8,requirement:()=>TimeStudy.timeDimension(6).isBought},{id:5,description:"Unlock the 8th Time Dimension",cost:1e9,requirement:()=>TimeStudy.timeDimension(7).isBought},{id:6,description:()=>Pelle.isDoomed?"You cannot escape a Doomed Reality":"Unlock Reality",cost:1,requirement:()=>TimeStudy.timeDimension(8).isBought&&player.records.thisReality.maxEP.exponent>=4e3&&(Perk.firstPerk.isBought||Achievements.preReality.every(t=>t.isUnlocked))&&!Pelle.isDoomed}],sW=[{id:1,cost:30,requirement:[171],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Eternities",current:()=>Currency.eternities.value,required:t=>new Decimal(2e4+Math.min(t,Enslaved.isRunning?999:4)*2e4),formatValue:formatInt}},{id:2,cost:35,requirement:[171],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Tickspeed upgrades from Time Dimensions",current:()=>player.totalTickGained,required:t=>1300+Math.min(t,4)*150,formatValue:formatInt}},{id:3,cost:40,requirement:[171],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"8th Antimatter Dimensions",current:()=>AntimatterDimension(8).totalAmount,required:t=>new Decimal(17300+Math.min(t,4)*1250),formatValue:t=>formatInt(Math.floor(t.toNumber()))}},{id:4,cost:70,requirement:[143],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Infinities",current:()=>Currency.infinitiesTotal.value,required:t=>new Decimal(1e8+Math.min(t,4)*25e6),formatValue:t=>formatInt(Math.floor(t.toNumber()))}},{id:5,cost:130,requirement:[42],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Antimatter Galaxies",current:()=>player.galaxies,required:t=>160+Math.min(t,4)*14,formatValue:formatInt}},{id:6,cost:85,requirement:[121],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Replicanti Galaxies",current:()=>player.replicanti.galaxies,required:t=>40+Math.min(t,4)*5,formatValue:formatInt}},{id:7,cost:115,requirement:[111],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"antimatter",current:()=>Currency.antimatter.value,required:t=>L.E300000.pow(Math.min(t,4)).times(L.E500000),formatValue:t=>format(t)}},{id:8,cost:115,requirement:[123],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Infinity Points",current:()=>Currency.infinityPoints.value,required:t=>L.E1000.pow(Math.min(t,4)).times(L.E4000),formatValue:t=>format(t)}},{id:9,cost:415,requirement:[151],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Infinity Power",current:()=>Currency.infinityPower.value,required:t=>L.E2000.pow(Math.min(t,4)).times(L.E17500),formatValue:t=>format(t)}},{id:10,cost:550,requirement:[181],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{resource:"Eternity Points",current:()=>Currency.eternityPoints.value,required:t=>L.E20.pow(Math.min(t,4)).times(L.E100),formatValue:t=>format(t)}},{id:11,cost:1,requirement:[231,232],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{path:"Antimatter Dimension",forbiddenStudies:[72,73]}},{id:12,cost:1,requirement:[233,234],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,secondary:{path:"Time Dimension",forbiddenStudies:[71,72]}}],Dx=t=>{const e=t*10+1,i=Math.min(Math.pow(e,.125),500);return L.D15.pow(Math.log(e)*i)},xx=()=>{const t=Effarig.isRunning&&Effarig.currentStage===EFFARIG_STAGES.ETERNITY,e=Perk.studyPassive.isBought?1e50:1e25;return t?Math.min(e,Effarig.eternityCap.toNumber()):e},aW=[{id:11,cost:1,requirement:[],reqType:TS_REQUIREMENT_TYPE.ALL,description:"Tickspeed affects 1st Time Dimension with reduced effect",effect:()=>{const t=Tickspeed.current.dividedBy(1e3),e=t.pow(.005).times(.95),i=t.pow(3e-4).times(.05);return e.plus(i).reciprocate()},cap:L.E2500,formatEffect:t=>formatX(t,2,1)},{id:21,cost:3,requirement:[11],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`Improve Replicanti multiplier formula to
      (log2(x)${formatPow(2)})+x${formatPow(.032,3,3)}`,effect:()=>Replicanti.amount.pow(.032),formatEffect:t=>{const e=Decimal.pow(Decimal.log2(Replicanti.amount.clampMin(1)),2),i=e.plus(t);return formatX(i.div(e).clampMin(1),2,2)}},{id:22,cost:2,requirement:[11],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`Base Replicanti interval limit ${formatInt(50)}ms ➜ ${formatInt(1)}ms`,effect:1},{id:31,cost:3,requirement:[21],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`Powers up multipliers that are based on your Infinities (Bonuses${formatPow(4)})`,effect:4},{id:32,cost:2,requirement:[22],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"You gain more Infinities based on Dimension Boosts",effect:()=>Math.max(DimBoost.totalBoosts,1),formatEffect:t=>formatX(t,2)},{id:33,cost:2,requirement:[22],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"You keep half of your Replicanti Galaxies on Infinity"},{id:41,cost:4,requirement:[31],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`All Galaxies give a ${formatX(L.D1_2,1,1)} multiplier to Infinity Points gained`,effect:()=>L.D1_2.pow(Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies),formatEffect:t=>formatX(t,2,1)},{id:42,cost:6,requirement:[32],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`Antimatter Galaxy requirement increases by ${formatInt(52)}
      8th Dimensions instead of ${formatInt(60)}`,effect:52},{id:51,cost:3,requirement:[41,42],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`You gain ${formatX(1e15)} more Infinity Points`,effect:1e15},{id:61,cost:3,requirement:[51],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`You gain ${formatX(15)} more Eternity Points`,effect:15},{id:62,cost:3,requirement:[42,()=>Perk.bypassEC5Lock.isBought||EternityChallenge(5).completions>0],reqType:TS_REQUIREMENT_TYPE.ALL,description:()=>`You gain Replicanti ${formatInt(3)} times faster`,effect:3},{id:71,cost:4,requirement:[61,()=>Perk.studyECRequirement.isBought||!EternityChallenge(12).isUnlocked],reqType:TS_REQUIREMENT_TYPE.DIMENSION_PATH,description:"Dimensional Sacrifice affects all other Antimatter Dimensions with reduced effect",effect:()=>Sacrifice.totalBoost.pow(.25).clampMin(1),cap:L.E210000,formatEffect:t=>formatX(t,2,1)},{id:72,cost:6,requirement:[61,()=>Perk.studyECRequirement.isBought||!EternityChallenge(11).isUnlocked&&!EternityChallenge(12).isUnlocked],reqType:TS_REQUIREMENT_TYPE.DIMENSION_PATH,description:"Dimensional Sacrifice affects 4th Infinity Dimension with greatly reduced effect",effect:()=>Sacrifice.totalBoost.pow(.04).clampMin(1),cap:L.E30000,formatEffect:t=>formatX(t,2,1)},{id:73,cost:5,requirement:[61,()=>Perk.studyECRequirement.isBought||!EternityChallenge(11).isUnlocked],reqType:TS_REQUIREMENT_TYPE.DIMENSION_PATH,description:"Dimensional Sacrifice affects 3rd Time Dimension with greatly reduced effect",effect:()=>Sacrifice.totalBoost.pow(.005).clampMin(1),cap:L.E1300,formatEffect:t=>formatX(t,2,1)},{id:81,cost:4,requirement:[71],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`Base Dimension Boost power becomes ${formatX(10)}`,effect:10},{id:82,cost:6,requirement:[72],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Dimension Boosts affect Infinity Dimensions",effect:()=>L.D1_0000109.pow(Math.pow(DimBoost.totalBoosts,2)),cap:L.E1E7,formatEffect:t=>formatX(t,2,1)},{id:83,cost:5,requirement:[73],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Dimension Boost multiplier based on tick upgrades gained from TDs",effect:()=>L.D1_0004.pow(player.totalTickGained),cap:L.E30,formatEffect:t=>formatX(t,2,1)},{id:91,cost:4,requirement:[81],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Antimatter Dimension multiplier based on time spent in this Eternity",effect:()=>Decimal.pow10(Math.min(Time.thisEternity.totalMinutes,20)*15),cap:L.E300,formatEffect:t=>formatX(t,2,1)},{id:92,cost:5,requirement:[82],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Infinity Dimension multiplier based on fastest Eternity time",effect:()=>L.D2.pow(60/Math.max(Time.bestEternity.totalSeconds,2)),cap:L.C2P30,formatEffect:t=>formatX(t,2,1)},{id:93,cost:7,requirement:[83],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Time Dimension multiplier based on tick upgrades gained",effect:()=>Decimal.pow(player.totalTickGained,.25).clampMin(1),formatEffect:t=>formatX(t,2,1)},{id:101,cost:4,requirement:[91],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Antimatter Dimension multiplier equal to Replicanti amount",effect:()=>Decimal.max(Replicanti.amount,1),formatEffect:t=>formatX(t,2,1)},{id:102,cost:6,requirement:[92],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Replicanti Galaxies boost Replicanti multiplier",effect:()=>L.D5.pow(player.replicanti.galaxies),formatEffect:t=>formatX(t,2,1)},{id:103,cost:6,requirement:[93],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Time Dimension multiplier equal to Replicanti Galaxy amount",effect:()=>Math.max(player.replicanti.galaxies,1),formatEffect:t=>formatX(t,2,0)},{id:111,cost:12,requirement:[101,102,103],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>Achievement(103).canBeApplied?`Make the Infinity Point formula better log(x)/${formatFloat(307.8,1)} ➜ log(x)/${formatInt(285)}`:`Make the Infinity Point formula better log(x)/${formatInt(308)} ➜ log(x)/${formatInt(285)}`,effect:285},{id:121,cost:9,STCost:2,requirement:[111],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[122,123],description:()=>Perk.studyActiveEP.isBought?`You gain ${formatX(50)} more Eternity Points`:`You gain more EP based on how fast your last ten Eternities
      were${PlayerProgress.realityUnlocked()?" (real time)":""}`,effect:()=>Perk.studyActiveEP.isBought?50:Math.clamp(250/Player.averageRealTimePerEternity,1,50),formatEffect:t=>Perk.studyActiveEP.isBought?void 0:formatX(t,1,1),cap:50},{id:122,cost:9,STCost:2,requirement:[111],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[121,123],description:()=>Perk.studyPassive.isBought?`You gain ${formatX(50)} more Eternity Points`:`You gain ${formatX(35)} more Eternity Points`,effect:()=>Perk.studyPassive.isBought?50:35},{id:123,cost:9,STCost:2,requirement:[111],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[121,122],description:"You gain more Eternity Points based on time spent this Eternity",effect:()=>{const t=TimeSpan.fromMinutes(Perk.studyIdleEP.effectOrDefault(0)),e=Time.thisEternity.plus(t).totalSeconds;return Math.sqrt(1.39*e)},formatEffect:t=>formatX(t,1,1)},{id:131,cost:5,STCost:8,requirement:[121],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[132,133],description:()=>Achievement(138).isUnlocked?`You can get ${formatPercents(.5)} more Replicanti Galaxies`:`Automatic Replicanti Galaxies are disabled, but you can get ${formatPercents(.5)} more`,effect:()=>Math.floor(player.replicanti.boughtGalaxyCap/2)},{id:132,cost:5,STCost:8,requirement:[122],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[131,133],description:()=>Pelle.isDoomed?`Replicanti Galaxies are ${formatPercents(.4)} stronger`:`Replicanti Galaxies are ${formatPercents(.4)} stronger and Replicanti are 
        ${Perk.studyPassive.isBought?formatX(3):formatX(1.5,1,1)} faster`,effect:.4},{id:133,cost:5,STCost:8,requirement:[123],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[131,132],description:()=>Achievement(138).isUnlocked?`Replicanti Galaxies are ${formatPercents(.5)} stronger`:`Replicanti are ${formatX(10)} slower until ${format(Number.MAX_VALUE,2)}, but Replicanti Galaxies are ${formatPercents(.5)} stronger`,effect:.5},{id:141,cost:4,STCost:2,requirement:[131],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[142,143],description:()=>Perk.studyActiveEP.isBought?`You gain ${formatX(L.E45)} more Infinity Points`:"Multiplier to Infinity Points, which decays over this Infinity",effect:()=>Perk.studyActiveEP.isBought?L.E45:L.E45.divide(Dx(Time.thisInfinity.totalSeconds)).clampMin(1),formatEffect:t=>Perk.studyActiveEP.isBought?void 0:formatX(t,2,1)},{id:142,cost:4,STCost:2,requirement:[132],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[141,143],description:()=>`You gain ${formatX(xx())} more Infinity Points`,effect:xx,cap:()=>Effarig.eternityCap===void 0?void 0:Effarig.eternityCap.toNumber()},{id:143,cost:4,STCost:2,requirement:[133],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[141,142],description:"Multiplier to Infinity Points, which increases over this Infinity",effect:()=>{const t=TimeSpan.fromMinutes(Perk.studyIdleEP.effectOrDefault(0)),e=Time.thisInfinity.plus(t).totalSeconds;return Dx(e)},formatEffect:t=>formatX(t,2,1),cap:()=>Effarig.eternityCap},{id:151,cost:8,requirement:[141,142,143],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`${formatX(1e4)} multiplier on all Time Dimensions`,effect:1e4},{id:161,cost:7,requirement:[151],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`${formatX(L.E616)} multiplier on all Antimatter Dimensions`,effect:()=>L.E616},{id:162,cost:7,requirement:[151],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`${formatX(1e11)} multiplier on all Infinity Dimensions`,effect:1e11},{id:171,cost:15,requirement:[161,162],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`Time Shard requirement for the next Tickspeed upgrade goes up slower
      ${formatX(1.33,0,2)} ➜ ${formatX(1.25,0,2)}`,effect:()=>TS171_MULTIPLIER},{id:181,cost:200,requirement:[171,()=>EternityChallenge(1).completions>0||Perk.bypassEC1Lock.isBought,()=>EternityChallenge(2).completions>0||Perk.bypassEC2Lock.isBought,()=>EternityChallenge(3).completions>0||Perk.bypassEC3Lock.isBought],reqType:TS_REQUIREMENT_TYPE.ALL,description:()=>`You gain ${formatPercents(.01)} of your Infinity Points gained on crunch each second`,effect:()=>gainedInfinityPoints().times(Time.deltaTime/100).timesEffectOf(Ra.unlocks.continuousTTBoost.effects.autoPrestige)},{id:191,cost:400,requirement:[181,()=>EternityChallenge(10).completions>0],reqType:TS_REQUIREMENT_TYPE.ALL,description:()=>`After Eternity you permanently keep ${formatPercents(.05)}
    of your Infinities as Banked Infinities`,effect:()=>Currency.infinities.value.times(.05).floor()},{id:192,cost:730,requirement:[181,()=>EternityChallenge(10).completions>0,()=>!Enslaved.isRunning],reqType:TS_REQUIREMENT_TYPE.ALL,description:()=>Enslaved.isRunning?"There is not enough space in this Reality":`Replicanti can go beyond ${format(replicantiCap(),2,1)}, but growth slows down at higher amounts`},{id:193,cost:300,requirement:[181,()=>EternityChallenge(10).completions>0],reqType:TS_REQUIREMENT_TYPE.ALL,description:"Antimatter Dimension multiplier based on Eternities",effect:()=>L.E13000.pow(Currency.eternities.value.div(1e6).clampMax(1)),cap:L.E13000,formatEffect:t=>formatX(t,2,1)},{id:201,cost:900,requirement:[192],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Pick a second path from the Dimension Split"},{id:211,cost:120,requirement:[191],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`Dimension Boost requirement scaling is reduced by ${formatInt(5)}`,effect:5},{id:212,cost:150,requirement:[191],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"All Galaxies are stronger based on your Time Shards",effect:()=>Math.pow(Currency.timeShards.value.clampMin(2).log2(),.005),cap:1.1,formatEffect:t=>`+${formatPercents(t-1,3)}`},{id:213,cost:200,requirement:[193],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:()=>`You gain Replicanti ${formatInt(20)} times faster`,effect:20},{id:214,cost:120,requirement:[193],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,description:"Dimensional Sacrifice boosts the 8th Antimatter Dimension even more",effect:()=>{const t=Sacrifice.totalBoost,e=t.pow(7.6).clampMaxExponent(44e3),i=t.pow(1.05).clampMaxExponent(12e4);return e.times(i)},cap:L.E164000,formatEffect:t=>formatX(t,2,1)},{id:221,cost:900,STCost:4,requirement:[211],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[222],description:"Time Dimension multiplier based on Dimension Boosts",effect:()=>L.D1_0025.pow(DimBoost.totalBoosts),formatEffect:t=>formatX(t,2,1)},{id:222,cost:900,STCost:4,requirement:[211],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[221],description:()=>`Dimension Boost costs scale by another ${formatInt(2)} less`,effect:2},{id:223,cost:900,STCost:4,requirement:[212],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[224],description:()=>`Distant Galaxy cost scaling starts ${formatInt(7)} Galaxies later`,effect:7},{id:224,cost:900,STCost:4,requirement:[212],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[223],description(){const t=TimeStudy(224).effectValue;return`Distant Galaxy cost scaling starts ${quantifyInt("Galaxy",t)} later
        (${formatInt(1)} per ${formatInt(2e3)} Dim Boosts)`},effect:()=>Math.floor(DimBoost.totalBoosts/2e3)},{id:225,cost:900,STCost:4,requirement:[213],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[226],description:"You gain extra Replicanti Galaxies based on Replicanti amount",effect:()=>Math.floor(Replicanti.amount.exponent/1e3),formatEffect:t=>`+${formatInt(t)} RG`},{id:226,cost:900,STCost:4,requirement:[213],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[225],description:"You gain extra Replicanti Galaxies based on their max",effect:()=>Math.floor(player.replicanti.boughtGalaxyCap/15),formatEffect:t=>`+${formatInt(t)} RG`},{id:227,cost:900,STCost:4,requirement:[214],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[228],description:"Dimensional Sacrifice affects 4th Time Dimension with reduced effect",effect:()=>Math.max(Math.pow(Sacrifice.totalBoost.pLog10(),10),1),formatEffect:t=>formatX(t,2,2)},{id:228,cost:900,STCost:4,requirement:[214],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[227],description:()=>`Dimensional Sacrifice formula scales better
      ${Sacrifice.getSacrificeDescription({TimeStudy228:!1})} ➜
      ${Sacrifice.getSacrificeDescription({TimeStudy228:!0})}`,effect:.2},{id:231,cost:500,STCost:5,requirement:[221,222],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[232],description:"Dimension Boosts are stronger based on their amount",effect:()=>Decimal.pow(DimBoost.totalBoosts,.3).clampMin(1),formatEffect:t=>formatX(t,2,2)},{id:232,cost:500,STCost:5,requirement:[223,224],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[231],description:"All Galaxies are stronger based on Antimatter Galaxies",effect:()=>Math.pow(1+player.galaxies/1e3,.2),formatEffect:t=>`+${formatPercents(t-1,3)}`},{id:233,cost:500,STCost:5,requirement:[225,226],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[234],description:"Max Replicanti Galaxy upgrade is cheaper based on current Replicanti",effect:()=>Replicanti.amount.pow(.3),formatEffect:t=>`/ ${format(t,1,2)}`},{id:234,cost:500,STCost:5,requirement:[227,228],reqType:TS_REQUIREMENT_TYPE.AT_LEAST_ONE,requiresST:[233],description:"Dimensional Sacrifice applies to 1st Antimatter Dimension",effect:()=>Sacrifice.totalBoost},{id:301,cost:0,STCost:12,requirement:[()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=1,221,222,231],reqType:TS_REQUIREMENT_TYPE.ALL,requiresST:[221,222,231],description:"Time Study 231 improves the effect of Time Study 221",effect:()=>TimeStudy(221).effectValue.pow(TimeStudy(231).effectValue.minus(1)).clampMin(1),formatEffect:t=>formatX(t,2,1),unlocked:()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=1},{id:302,cost:0,STCost:12,requirement:[()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=2,223,224,232],reqType:TS_REQUIREMENT_TYPE.ALL,requiresST:[223,224,232],description:()=>`Distant Galaxy scaling threshold starts another ${formatInt(3e3)} Antimatter Galaxies later`,effect:3e3,unlocked:()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=2},{id:303,cost:0,STCost:12,requirement:[()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=3,225,226,233],reqType:TS_REQUIREMENT_TYPE.ALL,requiresST:[225,226,233],description:()=>`Gain ${formatPercents(.5)} more extra Replicanti Galaxies from Time Studies 225 and 226,
      and from Effarig's Infinity`,effect:1.5,unlocked:()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=3},{id:304,cost:0,STCost:12,requirement:[()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=4,227,228,234],reqType:TS_REQUIREMENT_TYPE.ALL,requiresST:[227,228,234],description:"Dimensional Sacrifice multiplier is squared",effect:2,unlocked:()=>Ra.unlocks.unlockHardV.effectOrDefault(0)>=4}],oW={dilation:tW,milestones:iW,timeStudies:{dilation:rW,ec:sW,normal:aW},upgrades:nW},Bl={tabs:[{name:"This Modal",info:()=>`
Welcome to the How to Play!
<br>
<br>
This modal (pop-up window) contains in-depth explanations and additional details for everything you will encounter
as you progress through the game. As you unlock new features and mechanics, you will also gain access to additional
pages here. If you ever feel lost or confused about how something in the game works, you may find a helpful
explanation within the related entry in here. 
<br>
<br>
For now, opening the How to Play will always start you on this page. After you get your first Dimension Boost,
opening this modal will instead place you on the How to Play entry most relevant to the game content on your currently
visible tab and subtab, if such an entry exists.
`,isUnlocked:()=>!0,tags:["h2p","how","to","play","modal"],tab:""},{name:"Your savefile",info:()=>`
Your game's save data is stored on your computer's browser data if you are playing on a web browser, or in your Steam
installation folder if you are playing on Steam. This means that clearing your browser's cache or cookies, or fully
uninstalling the game from Steam will also delete your save file.
Similarly, if you are playing in a private or incognito window, your save
will not be there the next time you open up your browser. The saves are browser-specific as well, so for example
if you play the game on Chrome, you will not find your save on Firefox. Lastly, any saves you have on the web version
and the Steam version will also be completely independent from each other.
<br>
<br>
You can transfer your save between places by using the export function, which will copy a <i>very</i> long string of
random-looking characters into your clipboard. That text contains your save data, which you can load back into the
game by pasting it into the text box on the import prompt. You need the entirety of the save text for importing to
work properly, or else the game might not recognize the text as a valid save. Certain messaging applications may
cut off part of the text if you are using one to transfer the save between devices.
<br>
<br>
A properly-formatted save string from the Reality update will start with
<b>${GameSaveSerializer.startingString.savefile}</b> and end with <b>${GameSaveSerializer.endingString.savefile}</b>.
If you are importing from a version of the game from before Reality was released, it will instead start with <b>eyJ</b>
and end with <b>In19</b>, <b>fX0=</b>, or <b>fQ==</b>. If neither of these are the case, then part of your save is
missing and it will fail to import. In addition to importing and exporting to your clipboard, you can also import
and export from text files as well.
<br>
You can use the "Choose save" button to pick between three separate saves on your browser. These saves are, for most
intents and purposes, completely separate from each other. Importing and exporting will only affect the current save
slot. <b>The only exception is clearing your browser or Steam data, in which case all three saves will be reset.</b>
<br>
<br>
The game automatically saves periodically, by default once every ${formatInt(30)} seconds.
Keep this in mind if you need to close the game - anything you
do right before closing it might not be saved unless you wait for the autosave interval or manually save again. The
length of the autosave interval is adjustable, and its timer can be seen in the bottom-left of the screen.
<br>
<br>
Backups of your savefile are also saved after certain amounts of time online or offline, which you can examine and
reload at any point by clicking the "Open Automatic Save Backup Menu" button. These backups may be useful if you wish
to revert your save to what it looked like some time in the past, such as a few minutes ago or when you were last
offline for a while.
<br>
<br>
You can also connect a Google Account to the game, allowing you to save your progress online. This allows you to play
with the same save on any device which is also logged into the same account. Cloud saving is only compatible with other
saves on the web or Steam versions of the game; saves from the Android app of the game will not be automatically linked
via Cloud saving. Saving and loading from the Cloud will
automatically overwrite the other save unless the other save is either older or has noticeably more progression, in
which case a modal will appear which asks you which save you want to keep.
<br>
<br>
You can completely reset your save at any point if desired by clicking the button, which brings up a prompt you need
to fill out in order to make sure you intentionally wanted to reset. Going through with this reset will only clear
your current save; the other save slots will be unaffected. <b>Resetting your game in this way is completely
irreversible and gives you no permanent benefits, secret or otherwise.</b>
`,isUnlocked:()=>!0,tags:["choose","cloud","google","save","import","export","reset"],tab:"options/saving"},{name:"Customization",info:()=>`
The game has two different UI layouts - the Classic UI maintains the style of Antimatter Dimensions from before the
Reality update, while the Modern UI is a redesign based on more modern dark theme styles. Additionally, there are
various themes which can be applied to modify the appearance of everything in the game. There are a few secret themes
which can be unlocked through importing certain phrases. Both UI layouts support all the different possible themes.
<br>
<br>
The notation used to display numbers in the game defaults to Mixed Scientific, but can be changed to one of numerous
options in the drop-down menu. Many of these notations are intended as jokes and in some cases will format numbers
in a way that causes text to spill over into other parts of the screen - this is not a bug. You can additionally
configure what numbers look like when they are extremely large using the "Exponent Notation Options" menu,
although this may result in some odd text appearances in some places.
<br>
<br>
Many events in the game trigger full-screen animations or pop-up modals which require you to confirm that you want to
continue. Most of these animations and confirmations can be disabled on an individual basis through the options,
although the ability to disable any given animation or confirmation will only appear after they have already shown up
at least once.
`,isUnlocked:()=>!0,tags:["UI","update","news","theme","notation","comma","exponent","animation","retry","confirmation","offline","hotkey","classic","modern"],tab:"options/visual"},{name:"Offline Progress",info:()=>`
Antimatter Dimensions has a catch-up mechanic which attempts to simulate the game's behavior if the game is closed for
an extended period of time. The simulation behavior is only somewhat accurate, as the game is too mathematically
complicated to be run at full accuracy in a reasonable amount of time. At the end of the simulation, the game will
summarize how various relevant resources have changed while you were gone.
<br>
<br>
If the game is left open and becomes unfocused or otherwise suspended for an extended period of time, it will attempt
to apply the missed time as offline progress when you return. This can be potentially unreliable, as different devices
handle these situations differently. If this results in undesirable behavior, there is a toggle to turn this off in the
options - in that case the game will try to apply all the missed time in a single tick.
<br>
<br>
The game runs on a system where everything is updated once per tick - all Dimensions and resources do one unit of
production, all autobuyers trigger once, all multipliers and values are changed accordingly, and all the displayed
numbers are updated. By default there are ${formatInt(20)} ticks per second when the game is running, although this can
be modified by changing the "Update rate" within the game Options.
Your current settings will run the game at ${format(1e3/player.options.updateRate,2,1)} ticks per second on
average, although lag and internal javascript behavior may cause individual ticks to vary by a few percent.
<br>
<br>
When offline simulation is active, these ticks have an adjusted length in order to fill the amount of time you were
away - for example having a setting for ${formatInt(1e3)} offline ticks and closing the game for an hour will result in
ticks which are ${format(3.6,1,1)} seconds long each. For most things in the game, this is not an issue because this
will still result in approximately the same amount of resources after the simulation completes. A notable exception is
autobuyers - in this situation autobuyers will effectively only trigger once every ${format(3.6,1,1)} seconds, which
may have a strong impact depending on the part of the game.
<br>
<br>
${player.blackHole[0].unlocked?`<b>Offline Black Hole behavior:</b> Once the Black Hole has been unlocked, the offline progress simulation will
      attempt to run the game in a way where each tick contains roughly the same amount of <i>game</i> time. This may
      give the appearance of the Black Hole(s) being active for a much larger fraction of time than normal while
      simulating, when in fact the game is running active periods more slowly and "skipping past" the inactive periods
      because they contribute much less production per real time. This results in behavior which is generally in your
      favor when compared to ticks with constant real time.
      <br>
      <br>`:""}
Offline tick count can be adjusted between ${formatInt(500)} and ${formatInt(L.E6)} ticks. Smaller counts will result
in faster but less accurate simulations, while larger counts will result in more accurate simulations which take longer
to complete. There is a limit of one day of time per game tick, meaning there are some rare situations (such as not
playing the game for more than a year) where you may not get all of the time you were away.
<br>
<br>
Offline progress can be disabled entirely if desired, for example for diagnostic or timing purposes, or in order
to do an "online only" playthrough of the game. Otherwise, offline progress is on by default from the very beginning
of the game. Note that if offline progress is disabled, the statistic for total time played will also be paused while
the game closed.
`,isUnlocked:()=>!0,tags:["offline","away","progress"],tab:"options/gameplay"},{name:"Effect Stacking",info:()=>`
Most of the effects and upgrades in Antimatter Dimensions largely fall into three categories:
<br>
- <b>Additive:</b> These effects are typically denoted with a + (or the word "increase") followed by a number,
and add their value to some
base amount. Multiple additive effects are summed up. These can also sometimes show up as subtractive effects which
reduce resource costs.
<br>
- <b>Multiplicative:</b> These effects are shown either by a × (or the word "multiply") followed by a number or,
more rarely, as two numbers
separated by a ➜. Different multiplicative sources always combine by multiplying, never by adding. In some situations,
there may be negative effects or cost reductions that apply in this category as division.
<br>
- <b>Power</b>: These effects are much rarer and appear as ^ followed by a number. Multiple power effects apply
sequentially, or equivalently by multiplying the values of the power effects together and applying the final value
as a single power. In rare situations, negative effects may apply here in this category as powers which are less
than ${formatInt(1)}.
<br>
<br>
Unless otherwise noted when an upgrade or reward <i>replaces</i> an older value, all of these effects stack
with each other. In the case of an upgrade replacing an older value with a newer value, the replacement occurs before
any of the above effects are applied. To determine the final value of a set of effects, the effects from each category
are individually combined, and then applied in the order of additive, multiplicative, then power effects.
<br>
<br>
${PlayerProgress.realityUnlocked()||PlayerProgress.dilationUnlocked()?"Dilation and any Dilation-like effects apply <i>after</i> all of these other effects are stacked together.":""}
<br>
<br>
${PlayerProgress.realityUnlocked()?`Glyph Effects effectively have two stacking attributes; their internal way of stacking together and the way
      they stack with all other game effects. These may not necessarily be the same - for example, the "Antimatter
      Dimension Power" effect will stack <i>additively with itself</i>, but then the total effect will be added to
      a base value of ${formatInt(1)} and then applied as a <i>power effect</i> to Antimatter Dimensions.`:""}
`,isUnlocked:()=>!0,tags:["effect","stack","combine","add","reduce","multiply","divide","power","dilation","glyph"],tab:"options/gameplay"},{name:"Common Abbreviations",info:()=>`
Many resources within the game may appear in an abbreviated format as text in order to save space. This How to
Play entry will update itself with additional entries for new resources as you encounter them for the first time.
<br>
- <b>AM</b>: Antimatter<br>
- <b>AD</b>: Antimatter Dimension<br>
- <b>AG</b>: Antimatter Galaxy<br>
${PlayerProgress.infinityUnlocked()?"- <b>IP</b>: Infinity Point<br>":""}
${PlayerProgress.infinityUnlocked()?"- <b>NC</b>: Normal Challenge<br>":""}
${PlayerProgress.infinityUnlocked()?"- <b>IC</b>: Infinity Challenge<br>":""}
${InfinityDimension(1).isUnlocked||PlayerProgress.eternityUnlocked()?"- <b>ID</b>: Infinity Dimension<br>":""}
${PlayerProgress.replicantiUnlocked()?"- <b>RG</b>: Replicanti Galaxy<br>":""}
${PlayerProgress.eternityUnlocked()?"- <b>EP</b>: Eternity Point<br>":""}
${PlayerProgress.eternityUnlocked()?"- <b>TT</b>: Time Theorem<br>":""}
${PlayerProgress.eternityUnlocked()?"- <b>TD</b>: Time Dimension<br>":""}
${PlayerProgress.eternityUnlocked()?"- <b>EC</b>: Eternity Challenge<br>":""}
${PlayerProgress.dilationUnlocked()?"- <b>TP</b>: Tachyon Particle<br>":""}
${PlayerProgress.dilationUnlocked()?"- <b>DT</b>: Dilated Time<br>":""}
${PlayerProgress.dilationUnlocked()?"- <b>TG</b>: Tachyon Galaxy<br>":""}
${PlayerProgress.realityUnlocked()?"- <b>RM</b>: Reality Machine<br>":""}
${PlayerProgress.realityUnlocked()?"- <b>AP</b>: Automator Point<br>":""}
${PlayerProgress.realityUnlocked()?"- <b>BH</b>: Black Hole<br>":""}
${MachineHandler.isIMUnlocked?"- <b>iM</b>: Imaginary Machine<br>":""}
${Laitela.isUnlocked?"- <b>DM</b>: Dark Matter<br>":""}
${Laitela.isUnlocked?"- <b>DE</b>: Dark Energy<br>":""}
`,isUnlocked:()=>!0,tags:["abbreviation","shorten","am","ad","ag","ip","nc","ic","id","rg","ep","tt","td","ec","tp","dt","tg","rm","ap","bh","im","dm","de"],tab:""},{name:"Antimatter Dimensions",info:()=>`
Antimatter is a resource that is used throughout the entire game for purchasing various things as you progress. You
start with ${formatInt(10)} antimatter when you first open the game, and you can
spend it to buy the 1st Antimatter Dimension to start the game.
<br>
<br>
Antimatter Dimensions are your production units in game. The 1st Antimatter Dimension produces your antimatter.
Each consecutive Antimatter Dimension produces the previous one, allowing you to have steady growth.
There are eight Antimatter Dimensions total.
<br>
<br>
<b>Dimension Multiplier:</b> Beside the Dimension there is a multiplier (example: 1st Dimension ${formatX(1,1,1)}).
The base production of each Dimension is multiplied by this number.
This multiplier increases by ${formatX(2)} for every ${formatInt(10)} of that Dimension purchased.
Each time this occurs, the price of the dimension will increase.
<br>
<br>
<b>Accumulated Dimension Quantity:</b> The next column is your current amount of that Dimension you own.
This is a combination of how many you have purchased with antimatter,
as well as produced from the higher Dimension.
<br>
<br>
<b>Purchased Dimensions Quantity:</b> Next to each accumulated quantity of owned Dimensions,
the amount of that Dimension purchased toward the next multiplier upgrade is displayed in brackets.
For example if you have (${formatInt(4)}) next to your accumulated dimension quantity,
you will need ${formatInt(6)} more of that dimension for the next multiplier increase.
<br>
<br>
<b>Dimension Growth Percent:</b> This number represents the amount of growth that each
Dimension experiences per second. ${formatPercents(1)} means the dimension is doubling each second.
This allows you to judge overall growth.
<br>
<br>
<b>Cost &amp; until ${formatInt(10)}:</b>
You can buy a single quantity of each Dimension with antimatter when the cost button is highlighted.
Alternatively, if the Until ${formatInt(10)} button is highlighted,
you can buy whatever quantity gets you to that Dimension's next Dimension multiplier.
<br>
<br>
<b>Max all:</b> Max all will buy until ${formatInt(10)} of the 1st Antimatter Dimension until it cannot anymore,
then second, and so on until the 8th Antimatter Dimension, and then buy max Tickspeed Upgrades.
<br>
<br>
<b>Dimension base prices:</b> ${Array.range(1,8).map(t=>format(AntimatterDimension(t)._baseCost,2,2)).join(", ")}
<br>
<b>Base per ${formatInt(10)} bought dimension price increases:</b> ${Array.range(1,8).map(t=>format(AntimatterDimension(t)._baseCostMultiplier,2,2)).join(", ")}
<br>
<br>
<b>Hotkeys: 1, 2, 3, 4, 5, 6, 7, 8</b> for buy until ${formatInt(10)} Xth Dimension
(you can also hold down Shift while buying Dimensions, which will only buy
${formatInt(1)} instead of ${formatInt(10)}), <b>M</b> for Max all
`,isUnlocked:()=>!0,tags:["dims","normal","antimatter","ad"],tab:"dimensions/antimatter"},{name:"Tickspeed",info:()=>`
Production in the game happens on each "tick", which initially occurs once per second. By buying Tickspeed Upgrades,
you can make your Antimatter Dimensions produce faster, as if multiple ticks occur in each second.
<br>
<br>
<b>Tickspeed:</b> This states how many game ticks are occurring every second. Fractional ticks are accounted for,
boosting production as if part of a game tick has passed. Note that the actual tickspeed time is simulated and the
game always runs calculations at the update rate you've chosen in the Options tab.
<br>
<br>
<b>Cost:</b> The cost of antimatter for multiplying ticks/sec by the displayed multiplier.
(without any Galaxies, this is ${formatX(1.1245,0,3)} per purchase)
<br>
<br>
<b>Buy Max:</b> This will buy the maximum amount of Tickspeed Upgrades available
with your current amount of antimatter.
<br>
<br>
<b>Hotkeys: T</b> will purchase as many Tickspeed Upgrades as possible, or <b>Shift+T</b> to buy a single upgrade.
<b>M</b> for Max all.
`,isUnlocked:()=>Tickspeed.isUnlocked,tags:["dimension","earlygame","time"],tab:"dimensions/antimatter"},{name:"Dimension Boosts",info:()=>`
<b>Dimension Boost:</b> This resets your antimatter and all of your Antimatter Dimensions, but unlocks another
Antimatter Dimension for you to purchase and boosts your Dimension multipliers.
The 1st Dimension Boost requires ${formatInt(20)} 4th Dimensions, the 2nd requires ${formatInt(20)} 5th Dimensions, etc.
After unlocking all ${formatInt(8)} Dimensions,
every additional boost will cost ${formatInt(15)} more 8th Dimensions than the previous Boost and will no longer
unlock a Dimension, but will continue to increase your Dimension multipliers.
<br>
<br>
You gain a ${formatX(2)} multiplier to the 1st Dimension for every Dimension Boost you have. Each higher
Dimension will have the multiplier applied one less time as the previous, down to a minimum of ${formatInt(0)}.
For example, with ${formatInt(3)} Boosts, the 1st Dimension will gain ${formatX(8)}, the 2nd Dimension ${formatX(4)},
the 3rd Dimension ${formatX(2)}, and all other Dimensions are unaffected.
<br>
<br>
<b>Hotkey: D</b> will try to purchase a Dimension Boost.
`,isUnlocked:()=>!0,tags:["dimboost","reset","earlygame"],tab:"dimensions/antimatter"},{name:"Antimatter Galaxies",info:()=>`
Purchasing an Antimatter Galaxy will reset your game back to the point where only ${formatInt(4)} Dimensions are
available, but will increase the effect of your Tickspeed Upgrades by +${format(.02,0,2)} for your first two
Galaxies. As you get more Galaxies, the multiplier will continue becoming stronger and stronger.
<br>
<br>
Though it will have very little impact for the first few Tickspeed purchases,
the increase is multiplicative and will not take long to be visible.
<br>
<br>
Your first Antimatter Galaxy requires ${formatInt(80)} Eighth Dimensions, and each additional Galaxy will cost
another ${formatInt(60)} more.
<br>
<b>Distant Galaxy scaling:</b> Above ${formatInt(100)} Antimatter Galaxies the cost increase between Galaxies will
increase by ${formatInt(2)} per Galaxy, making the next Galaxy cost ${formatInt(62)} more, then ${formatInt(64)} more,
etc.
<br>
<b>Remote Galaxy scaling:</b> Above ${formatInt(Galaxy.remoteStart)} Antimatter Galaxies, the <i>total</i> cost
increases by another ${formatPercents(.002,1)} per Galaxy, on top of Distant scaling.
<br>
<br>
<b>Hotkey: G</b> will try to purchase an Antimatter Galaxy.
`,isUnlocked:()=>!0,tags:["8th","reset","galaxy","earlygame"],tab:"dimensions/antimatter"},{name:"Dimensional Sacrifice",info:()=>`
<b>You unlock Dimensional Sacrifice after your fifth Dimension Boost.</b>
<br>
<br>
Sacrificing will immediately reset the owned quantity of all non-Eighth Dimensions to zero, without reducing the
multiplier or the current cost. In return, it will multiply the Eighth Dimension Multiplier by the shown value.
It will take time to get back to the production you previously had, but you will end up with a net increase.
<br>
<br>
The Dimensional Sacrifice multiplier scales with the number of 1st Dimensions you had at the time of sacrifice,
and the scaling can be improved by completing certain Achievements and challenges. The multiplier is kept between
sacrifices, meaning that sacrificing once at ${formatX(10)} and then once at ${formatX(4)} will be the same as
${formatX(8)} then ${formatX(5)}; in both cases you will end up with a total sacrifice multiplier of ${formatX(40)}.
<br>
<br>
<b>Hotkey: S</b> will try to sacrifice.
`,isUnlocked:()=>Sacrifice.isVisible,tags:["8th","reset","earlygame","gods","earlygame"],tab:"dimensions/antimatter"},{name:"Achievements",info:()=>`
Each Achievement has requirements to unlock. Once unlocked, some Achievements give a reward.
Requirements and rewards vary in difficulty and benefit significantly.
<br>
<br>
In addition to any specific rewards for individual Achievements, you will receive a ${formatX(1.03,2,2)} multiplier
to all Antimatter Dimensions. Each fully completed row also gives another ${formatX(1.25,2,2)}. The total multiplier
effect from all Achievements together is shown above all the Achievement images.
<br>
<br>
Secret Achievements offer no gameplay benefits or advantages and are simply there for fun. Hovering over a Secret
Achievement will give a hint on how to attain them.
`,isUnlocked:()=>!0,tags:["earlygame","awards","earlygame"],tab:"achievements"},{name:"Infinity",info:()=>`
Once you have too much antimatter for the world to handle (${formatInt(2)}<sup>${formatInt(1024)}</sup>
or about ${formatPostBreak(Number.MAX_VALUE,6)},
sometimes called "Infinity"), you will be forced to do a “Big Crunch”. This will reset your antimatter, Antimatter
Dimensions, Dimension Boosts, and your Antimatter Galaxies. Doing a Big Crunch is also sometimes referred to as
"Infinitying".
<br>
<br>
You will eventually be able to pass ${formatPostBreak(Number.MAX_VALUE,6)}, but until then any larger numbers will
display as ${format(1/0)}.
<br>
<br>
Each Infinity completed will give an Infinity Point, which can be spent on upgrades in the new Infinity tab.
You must purchase these upgrades from top to bottom. You will also gain one "Infinity", which is effectively
the number of times you have crunched.
<br>
<br>
The "Multiply Infinity Points from all sources by ${formatInt(2)}" upgrade can be bought multiple times,
but each purchase requires ${formatInt(10)} times as much IP.
You must complete the Achievement "No DLC required" to start purchasing this particular upgrade.
<br>
<br>
<b>Hotkey: C</b> will try to perform a Big Crunch.
`,isUnlocked:()=>PlayerProgress.infinityUnlocked(),tags:["crunch","big","upgrades","ip","reset","prestige","earlygame"],tab:"infinity/upgrades"},{name:"Normal Challenges",info:()=>`
Normal Challenges are unlocked after your first Infinity; they change in-game mechanics in different ways to create more
difficult Infinity circumstances. To complete a challenge, you must reach ${formatPostBreak(Number.MAX_VALUE,2)}
antimatter again.
<br>
<br>
Each completed Normal Challenge will award an autobuyer or the ability to upgrade an existing autobuyer.
You can run them multiple times (though only the first time grants a reward),
and they can be exited at any time via the “Exit Challenge” button.
<br>
<br>
Your first Infinity is considered to be the first Normal Challenge, and is thus already completed when
you unlock challenges.
<br>
<br>
The rightmost column of Infinity Upgrades does not work in challenges.
`,isUnlocked:()=>PlayerProgress.infinityUnlocked(),tags:["infinity","autobuyer","earlygame"],tab:"challenges/normal"},{name:"Autobuyers",info:()=>`
Autobuyers allow you to automatically purchase dimensions, upgrades, or prestiges. All autobuyer
controls are located under the "Autobuyers" subtab of the "Automation" tab, including any additional autobuyers
unlocked later in the game.
<br>
<br>
Antimatter Dimension Autobuyers and the Tickspeed Upgrade Autobuyer can be unlocked based on your total antimatter,
but most other autobuyers require upgrades to be purchased or challenges to be beaten.
<br>
<br>
Most Autobuyers have similar attributes:
<br>
<br>
<b>Autobuyer Interval:</b> The cooldown period before the autobuyer attempts to make another purchase.
Antimatter Dimension Autobuyers and the Tickspeed Upgrade Autobuyer require their respective challenges to be beaten
before their interval can be upgraded.
<br>
<br>
<b>Antimatter Dimension Autobuyer Bulk Buy:</b> Once the interval of an autobuyer reaches its minimum
(at ${formatInt(100)} ms), all future upgrades will double the maximum amount the autobuyer can purchase per tick.
This can be disabled.
<br>
<br>
<b>Antimatter Dimension Autobuyer Buy Quantity:</b> Autobuyers for Dimensions can be set to buy a single Dimension,
or until ${formatInt(10)}. Bulk buy is disabled when the autobuyer is set to singles.
<br>
<br>
<b>Tickspeed Autobuyer Buy Quantity:</b> The tickspeed autobuyer can be set to buy a single upgrade per activation
or to buy the max possible once the Tickspeed Challenge (C9) has been beaten.
<br>
<br>
<b>Automatic Dimension Boost Customization:</b> With the Dimension Boost autobuyer you can set the max number of
Boosts it will attempt to buy, a minimum number of Antimatter Galaxies before Dimension Boosts are
always auto-purchased, and (when unlocked) the ability to buy an exact number of Dimension Boosts in bulk.
If you reach your specified Galaxy threshold, the autobuyer will ignore your max Boost limit.
<br>
<br>
<b>Max Galaxies:</b> The highest amount of Galaxies the Galaxies autobuyer will buy.
<br>
<br>
<b>IP on crunch:</b> Once you Break Infinity, you can set how many IP you would like to wait for before crunching.
<br>
<br>
<b>Sacrifice Autobuyer:</b> This autobuyer starts with a maxed interval, potentially triggering every tick.
<br>
<br>
<b>Dynamic Amount:</b> Upgraded prestige autobuyers have a mode that triggers a prestige when a specified threshold
is passed. Turning on "Dynamic Amount" will allow this threshold value to be automatically increased when unlocking
certain upgrades or achievements which apply a multiplier to this value.
<br>
<br>
<b>Pause/Resume Autobuyers:</b> This button will pause or resume autobuyers which are turned on.
It does not change individual autobuyer settings. Think of it like a master switch.
<br>
<br>
<b>Enable/Disable All Autobuyers:</b> This button will turn all of your autobuyers on or off individually.
<br>
<br>
<b>Hotkey: A</b> (for pausing/resuming autobuyers).
Additionally, holding <b>Alt</b> when pressing a hotkey associated with an upgrade, dimension, or prestige will
toggle the associated autobuyer.
`,isUnlocked:()=>!0,tags:["infinity","automation","challenges","rewards","interval","earlygame"],tab:"automation/autobuyers"},{name:"Break Infinity",info:()=>`
Once you Break Infinity, you are no longer limited to ${formatPostBreak(Number.MAX_VALUE,2)} antimatter and can start
gaining more than ${formatInt(1)} IP per crunch depending on how much more antimatter you have when you crunch.
<br>
<br>
You now gain ~${format(1.78,2,2)} IP for crunching at ${formatPostBreak(Number.MAX_VALUE,2)} antimatter. The IP you
gain for crunching is multiplied by ${formatInt(10)} for every additional factor of
${formatPostBreak(Number.MAX_VALUE,2)} antimatter you gain (in a continuous manner). This is rounded down to the
nearest integer <i>after</i> all multipliers are applied.
<br>
<br>
The antimatter costs of all Dimensions begin to increase faster after they pass
${formatPostBreak(Number.MAX_VALUE,2)}. The cost <i>between</i> upgrades will increase by ${formatX(10)}
<i>per upgrade</i> above ${formatPostBreak(Number.MAX_VALUE,2)}, and a similar scaling happens to
Tickspeed Upgrade costs as well.
`,isUnlocked:()=>Autobuyer.bigCrunch.hasMaxedInterval||PlayerProgress.eternityUnlocked(),tags:["limit","crunch","upgrades","midgame"],tab:"infinity/break"},{name:"Infinity Dimensions",info:()=>`
<b>Unlocking Infinity Dimensions:</b> Infinity Dimensions are unlocked by reaching a certain amount of antimatter.
<br>
<br>
<b>Infinity Dimension Purchasing:</b> Infinity Dimensions are only purchasable in sets of ${formatInt(10)}, and cost
Infinity Points. They give a permanent multiplier per purchase, similar to the other dimensions. The actual multiplier
applied depends on which Infinity Dimension you purchase. <!-- Sorry Garnet :/ -->
<br>
<br>
<b>Infinity Dimension Production:</b> Just like Antimatter Dimensions, each Infinity Dimension produces the
next highest Infinity Dimension.
<br>
<br>
Every crunch, your produced Infinity Dimensions are reset to the amount you purchased. While the production
of Infinity Dimensions does not carry between crunches, all the multipliers you got from purchasing them do.
<br>
<br>
<b>Infinity Dimension unlock thresholds (antimatter):</b> ${Array.range(1,8).map(t=>formatPostBreak(InfinityDimension(t)._unlockRequirement)).join(", ")}
<br>
<b>Infinity Dimension purchase multipliers:</b> ${Array.range(1,8).map(t=>format(InfinityDimension(t)._powerMultiplier)).join(", ")}
<br>
<b>Infinity Dimension base prices (IP):</b> ${Array.range(1,8).map(t=>format(InfinityDimension(t)._baseCost)).join(", ")}
<br>
<b>Infinity Dimension price increases:</b> ${Array.range(1,8).map(t=>format(InfinityDimension(t)._costMultiplier)).join(", ")}
<br>
<br>
Instead of antimatter, the 1st Infinity Dimension produces Infinity Power, which gives a multiplier applied
to all Antimatter Dimensions equal to (power<sup>${formatInt(7)}</sup>). Infinity Dimensions are not
affected by Tickspeed Upgrades.
`,isUnlocked:()=>Autobuyer.bigCrunch.hasMaxedInterval||PlayerProgress.eternityUnlocked(),tags:["id","power","new","dims","unlock","break","midgame"],tab:"dimensions/infinity"},{name:"Infinity Challenges",info:()=>`
Infinity Challenges are like Normal Challenges, but they have higher end goals and are generally harder. Instead of
only unlocking autobuyers, they give you boosts to your various forms of production in more unique ways. Similarly to
Normal Challenges, the rightmost column of Infinity Upgrades are disabled within Infinity Challenges.
<br>
<br>
Unlike the Normal Challenges, which are all unlocked at once, Infinity Challenges require you to reach a certain
amount of antimatter before you can attempt them.
<br>
<br>
<b>Infinity Challenge unlock thresholds:</b> ${GameDatabase.challenges.infinity.map(t=>formatPostBreak(t.unlockAM)).join(", ")}
`,isUnlocked:()=>Autobuyer.bigCrunch.hasMaxedInterval||PlayerProgress.eternityUnlocked(),tags:["rewards","break","ic","midgame"],tab:"challenges/infinity"},{name:"Replicanti",info:()=>`
Replicanti are another resource you unlock at ${format(L.E140)} IP. Rather
than producing something else, Replicanti actually produces <i>itself</i> up to a maximum of
${formatPostBreak(Number.MAX_VALUE,2)}. Replicanti are produced at their own pace, unaffected by Tickspeed Upgrades.
Each individual Replicanti has a certain chance (initially ${formatPercents(.01)}) of producing another Replicanti
every Replicanti tick (initially every second), and both of these can be upgraded by spending IP.
<br>
<br>
If you have purchased a Replicanti Galaxy upgrade, then you can get a "free" Replicanti Galaxy in exchange for
resetting your Replicanti count back to ${formatInt(1)}. This Galaxy is free in that it will act as if it was an
Antimatter Galaxy, but it will not make your next Antimatter Galaxy more expensive. However, it will still reset the
same things as an Antimatter Galaxy does.
<br>
<br>
<b>Hotkey: R</b> will try to purchase a Replicanti Galaxy.
<br>
Replicanti give a multiplier to all Infinity Dimensions, which will reach a maximum of
${formatX(Math.pow(2,20),2,2)} at ${formatPostBreak(Number.MAX_VALUE,2)} Replicanti.
<br>
<br>
<b>Chance upgrade cost:</b> Base ${format(L.E150)} IP, cost increment ${formatX(L.E15)} IP
<br>
<b>Interval upgrade cost:</b> Base ${format(L.E140)} IP, cost increment ${formatX(L.E10)} IP
<br>
<b>Galaxy upgrade cost:</b> Base ${format(L.E170)} IP, cost increment ${formatX(L.E25)} IP and an additional
${formatX(1e5)} IP per upgrade, scaling similarly to distant Antimatter Galaxies. Above ${formatInt(100)} Replicanti
Galaxies, this ${formatX(1e5)} per upgrade changes to ${formatX(L.E55)}. Above ${formatInt(1e3)}, the scaling switches
from quadratic to cubic, with the ${formatX(L.E55)} multiplier itself increasing by ${formatX(L.E5)} per upgrade.
`,isUnlocked:()=>Replicanti.areUnlocked||PlayerProgress.eternityUnlocked(),tags:["interval","chance","infinity","galaxy","galaxies","midgame"],tab:"infinity/replicanti"},{name:"Eternity",info:()=>`
Upon reaching ${formatPostBreak(Number.MAX_VALUE,2)} IP, you can Eternity. Eternities will reset everything before this
point except challenge times, Achievements, and anything under the General section of the Statistics tab. You will be
able to access more content after your first Eternity.
<br>
<br>
You can pass ${formatPostBreak(Number.MAX_VALUE,2)} IP without anything being forced upon you, unlike the first time
you reached ${formatPostBreak(Number.MAX_VALUE,2)} antimatter. You will receive more Eternity Points the more
Infinity Points you had before going Eternal. You will also gain one "Eternity" for completing an Eternity.
<br>
<br>
Eternity Point gain scales similarly to Infinity Point gain, but scaling off of Infinity Points instead of antimatter.
The base amount of EP gained at ${formatPostBreak(Number.MAX_VALUE,2)} IP is ~${format(1.62,2,2)} EP, multiplied by
${formatInt(5)} for every factor of ${formatPostBreak(Number.MAX_VALUE,2)} more IP you have. This is always rounded
down, which means that you will get ${formatInt(1)} EP at ${formatPostBreak(Number.MAX_VALUE,2)} IP but will not reach
${formatInt(2)} EP until ${formatPostBreak(L.E349)}.
<br>
<br>
<b>Hotkey: E</b> will try to perform an Eternity reset.
`,isUnlocked:()=>PlayerProgress.eternityUnlocked(),tags:["eternal","ep","reset","prestige","midgame"],tab:"eternity/upgrades"},{name:"Eternity Milestones",info:()=>`
To make Eternities faster and more convenient, you will unlock various buffs as you get more "Eternity". These
buffs will generally let you start with certain upgrades you would otherwise lose after Eternity, give you new
autobuyers for better automation, or give you a way to passively gain resources offline at a reduced rate.
<br>
<br>
Milestones which give you upgrades will automatically purchase and upgrade them to their maximum when first starting
the Eternity, effectively letting you have them permanently.
<br>
<br>
All of the new autobuyers will have toggles next to their respective manual buttons (for example, Infinity Dimension
autobuyers can be found on the Infinity Dimension tab) in addition to their entries on the autobuyers tab.
The improvements to the Dimension Boost, Antimatter Galaxy, and Big Crunch autobuyers update their
already existing entries on the autobuyer tab.
<br>
<br>
The passive generation milestones only work offline by design and may need certain autobuyer settings to work
properly, as noted on the milestone page itself.
`,isUnlocked:()=>PlayerProgress.eternityUnlocked(),tags:["eternities","rewards","automation","midgame"],tab:"eternity/milestones"},{name:"Time Dimensions",info:()=>`
After your first Eternity, you unlock Time Dimensions. You buy them with Eternity Points and they produce Time Shards,
which provide Tickspeed Upgrades. These Tickspeed Upgrades function like normal Tickspeed Upgrades but do not increase
their cost. Time Dimensions, Time Shards, and the Tickspeed Upgrades they provide are kept on Infinity,
but reset every Eternity.
<br>
<br>
Similarly to the other dimensions, Second Time Dimensions produce 1st Time Dimensions and so on. Similarly to Infinity
Dimensions, your production will be reset to the amount you purchased after every Eternity, but you will keep any
upgrades to your multipliers you purchased.
<br>
<br>
Each purchase increases the multiplier of that specific Time Dimension by ${formatX(4)}. The cost multiplier between
upgrades has a base value, but is increased by ${formatX(1.5,1,1)} at
${format(TimeDimension(1)._costIncreaseThresholds[0],2)} EP and ${formatX(2.2,1,1)} (of the base value) at
${format(TimeDimension(1)._costIncreaseThresholds[1])} EP. These increases apply retroactively, causing the cost to
jump when they reach those thresholds, and only apply to the first four dimensions. Beyond
${format(TimeDimension(1)._costIncreaseThresholds[2])} EP each dimension purchase counts as four purchases for the
purpose of cost increases, causing the price to rise much more steeply.
<br>
<b>Time Dimension base prices (EP):</b> ${Array.range(1,8).map(t=>format(TimeDimension(t)._baseCost)).join(", ")}
<br>
<b>Time Dimension base price increases:</b> ${Array.range(1,8).map(t=>format(TimeDimension(t)._costMultiplier)).join(", ")}
<br>
<br>
Each threshold to gain another Tickspeed Upgrade is ${formatPercents(.33)} more Time Shards than the previous,
or ${formatPercents(.25)} with the relevant Time Study. After ${formatInt(FreeTickspeed.softcap)} upgrades, the
multiplier between each successive free Tickspeed Upgrade will gradually increase at a rate of ~${formatX(1.35,0,2)}
per ${formatInt(5e4)} upgrades (${formatX(1.000006,0,6)} per upgrade).
`,isUnlocked:()=>PlayerProgress.eternityUnlocked(),tags:["dims","td","shards","eternity","midgame"],tab:"dimensions/time"},{name:"Time Studies",info:()=>`
A Time Study is a powerful post-Eternity upgrade, which costs a new resource called Time Theorems. Time Studies can
boost the production of anything you have seen so far in the game, or even change the way some formulas work.
<br>
<br>
Time Theorems are a limited resource which costs more for each one you buy. They can be bought with antimatter,
Infinity Points, or Eternity Points. Their cost increases by a set factor per purchase. Time Theorems do not
reset on Eternity.
<br>
<br>
Studies are laid out in a tree-like fashion, where you must buy prerequisites before continuing. The only study you
can buy at first is the very top one, and then from there you can purchase any study directly below it which you can
afford. However, there are three exceptions:
<br>
Where the lines between studies have a color, you can only choose one of the three paths at a time.
<br>
When a study for an Eternity Challenge is in the way, you need to complete all challenges connected to it at least
once in order to access the study. You do not need to have the challenge study purchased in order to access it.
<br>
Near the bottom, where all the edges join together again, you can only pick one study out of each pair.
<br>
<br>
You are able to hold down shift and then click on a Time Study to buy all studies until that point. This might not buy
the studies you want if you shift-click a study in a position where you would have to choose between two or more
different options which you cannot get together (see above), or you cannot afford all the studies needed to reach that
point. Shift-click will buy studies greedily, getting as many as possible per row before moving farther downward.
<br>
<br>
<b>Presets:</b> The buttons initially labeled 1 through 6 allow you to save your current set of studies into the slot,
letting you quickly buy that particular set of studies again with a single click. You can hover over the button and
use the tooltip to load/save a slot, or click to load and shift-click to save. These presets can be renamed, but you
are not allowed to give multiple presets the same name.
<br>
<br>
<b>Import Tree/Edit Preset:</b> When editing a preset or importing a Time Study Tree, the modal will display what
Time Studies will be bought when it is loaded, along with any errors.
For the split paths, you can use the name as a shorthand for the collection of studies.
For instance, you can replace "71, 81, 91, 101" to represent fully purchasing the antimatter split with
just "antimatter". Additionally, if a Time Study string has a valid Eternity Challenge, adding a "!" to the end of
the string will make the game to try to immediately unlock and enter the Eternity Challenge when used.
<br>
<br>
<b>Preferences:</b> Clicking the gear icon will open up a dialog which lets you select "default" paths to pick in the
three-way branches. Choosing a default will change the shift-click behavior mentioned above so that it will attempt
to buy your preferred path and continue on instead of stopping completely at the tree splits. You can choose two paths
for the Dimension split in this dialog if you have purchased the relevant Time Study.
<br>
<br>
<b>Respecs:</b> A respec allows you to reset the upgrades you have in the tree to retrieve all of the Time Theorems
spent on them. It can be done for free, but only triggers on finishing an Eternity; you cannot respec Time Studies in
the middle of an Eternity.
<br>
<br>
<b>Costs for Time Theorems:</b>
<br>
<b>Antimatter:</b> Initially ${format(L.E20000)}, ${formatX(L.E20000)} per Theorem
<br>
<b>Infinity Points:</b> Initially ${formatInt(1)}, ${formatX(L.E100)} per Theorem
<br>
<b>Eternity Points:</b> Initially ${formatInt(1)}, ${formatX(2)} per Theorem
`,isUnlocked:()=>PlayerProgress.eternityUnlocked(),tags:["eternity","ts","theorems","tree","study","midgame"],tab:"eternity/studies"},{name:"Eternity Challenges",info:()=>`
Eternity Challenges are another set of challenges which are unlocked by the Time Study Tree. They require a certain
amount of Time Theorems and a secondary requirement which you must meet when you unlock the challenge.
<br>
<br>
When you enter an Eternity Challenge, your goal becomes reaching a certain target IP. After completing the challenge,
you do not need to have the Eternity Challenge's study unlocked for the reward to take effect. The rewards for these
challenges are similar to Time Studies, but often even stronger and permanent since they do not require you to spend
Time Theorems to have their effects.
<br>
<br>
You can only have one Eternity Challenge unlocked at a time.
<br>
<br>
You can complete each Eternity Challenge up to five times. After each completion, the rewards grow stronger but the
goal to the next completion also increases. Additionally, the secondary requirement to unlock the challenge again will
also increase. The Time Theorem cost does not increase.
<br>
<br>
Completing an Eternity Challenge's secondary requirements will remove them from the study requirement until you complete
that particular Eternity Challenge, meaning you only need to complete the secondary requirement <i>once</i>.
As a result, you can unlock an Eternity Challenge with one set of studies, and then respec into a different set of
studies to beat the challenge. EC11 and EC12 are exceptions to this rule - the Dimension path restrictions remain even
if you respec your time studies.
`,isUnlocked:()=>PlayerProgress.eternityUnlocked(),tags:["ec","study","time","rewards","completions","midgame"],tab:"challenges/eternity"},{name:"Time Dilation",info:()=>`
Time Dilation is unlocked when you purchase the Time Study to unlock it below the EC11 and EC12 studies.
In order to purchase this Time Study, you need ${formatInt(5e3)} unspent TT with a tree that can reach
the study, a <i>total</i> of ${formatInt(TimeStudy.dilation.totalTimeTheoremRequirement)} TT, and must have
completed both EC11 and EC12 five times each.
<br>
<br>
Dilating time will start a modified Eternity, called Time Dilation, in which all of your Antimatter/Infinity/Time
Dimension multipliers’ <i>exponents</i> and the tickspeed multipliers’ <i>exponent</i> will be raised to
${formatPow(.75,2,2)}, significantly reducing them. If you can reach ${formatPostBreak(Number.MAX_VALUE,2)} IP
to complete this Dilated Eternity, you will be rewarded with a new resource called Tachyon Particles.
<br>
<br>
You can Dilate as many times as you want, but Tachyon Particles cannot be "farmed" like other resources. Tachyon
Particles are never reduced, only increased, and they are increased up to a cap based on your TP multipliers and
antimatter earned in the current Dilation. As a result, you generally cannot increase your TP unless
you have gained a TP multiplier or are able to significantly increase your antimatter in Dilation.
<br>
<br>
Tachyon Particles generate another currency called Dilated Time. Dilated Time is translated into Tachyon Galaxies by
reaching thresholds similarly to the Tickspeed Upgrades gained from Time Dimensions. These Tachyon Galaxies are like
Replicanti Galaxies in that they affect tickspeed as if they were Antimatter Galaxies but they do not increase the cost
of your next Antimatter Galaxy.
<br>
<br>
Unlocking Time Dilation also unlocks upgrades you can purchase using Dilated Time. The first and third upgrades in the
first row of Dilation Upgrades can be repeatedly purchased as many times as you can afford them. The second upgrade can
also be repeatedly bought, but eventually reaches a cap.
`,isUnlocked:()=>DilationTimeStudyState.studies[1].isBought||PlayerProgress.realityUnlocked(),tags:["dial","dt","dilated","tachyon","particle","study","free","galaxy","galaxies","midgame"],tab:"eternity/dilation"},{name:"Reality",info:()=>`
When you reach ${formatPostBreak(L.E4000)} EP and have completed the first
${formatInt(13)} rows of Achievements, you will be able to purchase the Time Study that unlocks Reality.
Unlocking it opens a new tab, where you can find the button to make a new Reality. Starting a new Reality
will reset almost the entire game up to this point, but in exchange gives
you a new currency known as Reality Machines, a Glyph, and a Perk Point.
<br>
<br>
Unlike the other resets so far, you also lose the first ${formatInt(13)} rows of Achievements - that is, all of the
pre-Reality Achievements and all of their associated rewards. However, you will still keep all values under the General
header in the Statistics tab and all of your best Challenge times.
<br>
<br>
After completing your first Reality, the Glyphs tab contain a button which lets you restart your current Reality again,
without changing what your upcoming Glyph choices are. <b>Note that this will not give you any rewards, even if you
would otherwise be able to complete the Reality normally.</b>
<br>
<br>
You need to redo the requirements for each Achievement in order to get their rewards again, but you will also passively
unlock the next incomplete Achievement every ${timeDisplayNoDecimals(30*6e4)} without any effort even if you
otherwise do not have the requirements to do so. This automatic completion can be disabled, in which case the timer will
count down to zero and pause, immediately completing another Achievement when unpaused. The timer still progresses
at the same rate while offline.
<br>
<br>
Reality Machines can be spent on different upgrades throughout the Reality tab and are your primary currency from this
point onwards. Glyphs are equippable objects which you must equip in order to use their boosts. Perk Points are another
currency that can be spent in the Perks subtab on different Perks.
<br>
<br>
Reality Machines scale purely off of EP, and the Reality button will tell you how much EP you need in order to gain
the next one. The first ${formatInt(10)} RM scale linearly in the exponent between
${formatPostBreak(L.E4000)} EP and ${formatPostBreak(L.C10P16000D3)} EP, and then past that
RM = ${formatInt(1e3)}<sup>log<sub>${formatInt(10)}</sub>(EP)/${formatInt(4e3)}-${formatInt(1)}</sup>. This formula
is higher RM gain than linear above ${formatPostBreak(L.C10P16000D3)} EP.
<br>
<br>
Glyph level scales off of a combination of Eternity Points, Replicanti, and Dilated Time, with a minimum level of
${formatInt(1)}. The type, effects, and rarity of Glyphs are randomized.
<br>
<br>
You get exactly ${formatInt(1)} Perk Point per Reality.
<br>
<br>
<b>Hotkey: Y</b> will try to perform a Reality reset.
`,isUnlocked:()=>PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought,tags:["rm","machines","glyph","perk","reset","prestige","endgame","lategame"],tab:"reality/upgrades"},{name:"Glyphs",info:()=>`
A Glyph is an equippable object that has four attributes:
<br>
<b>Type</b> - This is a name given to the Glyph based on what part of the game it will tend to boost
(eg. "Glyph of X"). This determines the possible effects it may have.
<br>
<b>Level</b> - This contributes to how strong your Glyph is, and it scales based how much of various
resources you obtained in the Reality you gained it from.
<br>
<b>Rarity</b> - This is a percentage, between ${formatPercents(0)} and ${formatPercents(1)}, which also
affects the strength of your Glyph. This is random, but can be influenced by various upgrades.
The percentage is effectively a quality
rating, higher values are better. Specific ranges of rarities are given names, such as Common or Uncommon.
<br>
<b>Effects</b> - These are the boosts that equipping the Glyph will give you, and can contain up to four effects.
Glyphs with higher level or rarity will generally have more effects than weaker Glyphs.
<br>
<b>Note: Your first Glyph will have a fixed effect and rarity, but its level will scale based on your progress before
any Reality content. Once you receive a Glyph, its attributes cannot be changed.</b>
<br>
<br>
To equip a Glyph, double-click or drag the icon from your inventory into one of the active circles in the middle
of the screen. When equipped, Glyph icons become circular and add their effects to the list on the right.
<br>
<br>
Equipping multiple Glyphs with the same effect will combine their effects; effects with "+" will generally add
their values together and effects with "×" will generally multiply their values together.
<br>
<br>
You can equip Glyphs into <i>empty</i> active slots at any time during a Reality, which will immediately apply the
effects of the new Glyph. You can also drag Glyphs into already-occupied slots to switch which ones you have equipped,
but this will restart your current Reality.
<br>
<br>
The slots in the first rows of your inventory are "protected" slots. New Glyphs will never be placed into them (even if
there is no more room in your inventory), and they are unaffected by the Sort and Auto clean buttons. If you run out of
space for new Glyphs in your inventory, any Glyphs you would receive will be automatically deleted (or sacrificed
if unlocked).
<br>
<br>
You can delete Glyphs from your inventory by shift-clicking them, which will prompt you with a confirmation dialog
asking if you are sure you want to delete the Glyph. Holding shift and ctrl together while clicking will bypass this
dialog. <b>However, deleting Glyphs will give you no benefit beyond clearing up inventory space if you do so before
unlocking Glyph Sacrifice from a Reality Upgrade!</b>
<br>
<br>
Once you unlock Glyph Sacrifice, you will be able to disable the Glyph Selection modal from appearing. If desired, you
can force the modal to appear again for this Reality (ignoring this setting) by shift-clicking the Reality button.
Completing a Reality with the selection modal disabled will choose a random Glyph from your options.
<br>
<br>
Clicking a group of circular Glyphs outside of a modal window will open up a modal which displays a detailed summary
of all those Glyphs and their various attributes. The summary will show the information for all Glyphs at once with
slightly shorter descriptions, making it more suitable for sharing with others. This can be done for Glyph records
in the Statistics page, your equipped Glyphs, and the Upcoming Glyph Selection this Reality.
`,isUnlocked:()=>PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought,tags:["reality","sacrifice","level","endgame","lategame"],tab:"reality/glyphs"},{name:"Perks",info:()=>`
Perks are a type of upgrade unlocked upon Reality. Each Perk effect varies, but most are QoL (quality of life)
improvements which you can choose your own path through. All Perks only require ${formatInt(1)} Perk Point to buy.
<br>
<br>
Each Reality you gain ${formatInt(1)} Perk Point which can be spent on an upgrade on the tree, starting with
"You can now choose from ${formatInt(Perk.firstPerk.config.effect)} Glyphs on Reality". You can only unlock Perks
which are directly adjacent
to Perks you already have, although there are loops in the tree which you can go through in either direction.
<br>
<br>
The Perk nodes can have two different shapes - circular or diamond. The only difference between the two is that
diamond-shaped Perks give Automator Points in addition to their normal effect. Different nodes also have
different colors, roughly indicating which part of the game they affect the most.
`,isUnlocked:()=>PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought,tags:["pp","reality","tree","endgame","lategame"],tab:"reality/perks"},{name:"Automator Overview",info:()=>`
The Automator is unlocked upon reaching a total of ${formatInt(AutomatorPoints.pointsForAutomator)} Automator Points.
Automator Points are given when unlocking various Perks or Reality Upgrades, by unlocking the Black Hole, or by
simply completing more Realities.
<br>
<br>
The Automator uses a scripting language that allows you to automate nearly the entire game.
The interface has two panes, a script pane on the left where you enter the commands to automate the game and a pane
on the right which has multiple panels which do many different things as explained on the Automator Introduction page.
<br>
<br>
If you want a larger workspace, you can press the button in the top right corner of the documentation pane of the
Automator to expand it to fullscreen. You can also drag the boundary between the panes horizontally to resize the
panes if you want more room to write your script or read documentation.
<br>
<br>
By pressing the top-right button on the script pane, you can switch between the Automator's block and text editor
modes; the block mode may be more approachable if you are unfamiliar with programming. To enter commands in block mode,
select the command block pane on the right and drag the box for the relevant command into the script pane and drop it
where you want the command to go. Commands can be freely rearranged by dragging the blocks around if needed. Switching
between block and text mode will attempt to automatically translate your script as well, although you may lose part of
your converted script if it contains errors.
<br>
<br>
Just like your entire savefile, individual Automator scripts can be imported and exported from the game.
Properly-formatted script strings will begin with <b>${GameSaveSerializer.startingString["automator script"]}</b> and
end with <b>${GameSaveSerializer.endingString["automator script"]}</b>. If this is not the case then part of your script
was lost in the process of copy-pasting. The import function will load the script into a new slot; your current script
will not be lost or overwritten.
<br>
<br>
<b>Hotkey: U</b> will pause/unpause the Automator.
`,isUnlocked:()=>Player.automatorUnlocked,tags:["automation","reality","code","script","endgame","lategame"],tab:"automation/automator"},{name:"Automator Technical Details",info:()=>`
<b>Technical Limits</b>
<br>
<br>
There are a few limitations to scripts in order to reduce lag and prevent save file size from getting too large.
These limits are as follows:
<br>
- Individual scripts are limited to a maximum of ${formatInt(AutomatorData.MAX_ALLOWED_SCRIPT_CHARACTERS)}
characters each and all scripts combined together cannot exceed ${formatInt(AutomatorData.MAX_ALLOWED_TOTAL_CHARACTERS)}
characters total.
<br>
- Script names cannot exceed ${formatInt(AutomatorData.MAX_ALLOWED_SCRIPT_NAME_LENGTH)} characters.
<br>
- Defined constants cannot have names longer than ${formatInt(AutomatorData.MAX_ALLOWED_CONSTANT_NAME_LENGTH)}
characters, or values longer than ${formatInt(AutomatorData.MAX_ALLOWED_CONSTANT_VALUE_LENGTH)} characters.
<br>
- You cannot have more than a total of ${formatInt(AutomatorData.MAX_ALLOWED_SCRIPT_COUNT)} scripts or
${formatInt(AutomatorData.MAX_ALLOWED_CONSTANT_COUNT)} defined constants.
<br>
<br>
<b>Script Saving</b>
<br>
<br>
Scripts are automatically saved as you edit them, but are not saved to your game save until the global autosave timer
(ie. "Time since last save") triggers a full game save. If you make changes to scripts right before closing the game,
you should wait until the game saves afterwards in order to not lose your changes. Any edits made to your scripts
while above the length limits will not be saved until you shorten your scripts to be below them again.
<br>
<br>
<b>Automator Ticks</b>
<br>
<br>
The Automator's "execution timer" is based on real time, and is therefore unaffected by things such as the Black Hole,
Time Glyph effects, and EC12's negative effect. However this execution timer runs entirely independently from the main
game's production loop, meaning that at faster speeds the Automator can run multiple commands per production tick.
<br>
<br>
Some commands are more intensive on the game's internal code and may take longer than a single Automator tick in order
to process on slower computers. In that case, the Automator will execute those commands and then attempt to "catch up"
by executing the following commands as quickly as possible until it has run as many commands as it should have at a
constant execution speed.
<br>
<br>
<b>Interactions with Offline Progress</b>
<br>
<br>
Longer production ticks during Offline Progress simulation means that all of your resources are effectively given
in large chunks instead of more continuously. This may have potentially adverse effects on your script's
behavior while offline, depending on how exactly your script depends on the game state to work properly.
Additionally, the PAUSE command may behave oddly due to it also being based on real time.
`,isUnlocked:()=>Player.automatorUnlocked,tags:["automation","reality","code","script","endgame","lategame"],tab:"automation/automator"},{name:"Black Hole",info:()=>`
The Black Hole is a feature which speeds up how fast the game runs, on a periodic cycle.
The game will run at normal speed for some amount of time, then have a burst of running extremely fast for a short
period of time before going back to normal speed and repeating the cycle.
<br>
<br>
Increased game speed from Black Holes is much stronger than tickspeed because unlike tickspeed, it affects
<i>everything equally</i>, including things which are only partially affected by tickspeed
(eg. Infinity/Time Dimensions), things which are normally completely unaffected (eg. DT/TT generation),
and effects which are boosted purely on time spent (eg. idle path IP/EP multipliers).
<br>
<br>
While most features in the game are boosted by this increased game speed, there are some which remain unaffected.
In these cases, it will be specifically mentioned that a given time is stated as <i>real time</i> as opposed to
<i>game time</i>. One such example is the set of Perks which automatically completes Eternity Challenges over time.
Otherwise, it should be assumed from this point onward that all references to time are for <i>game time</i>.
Note that this also includes situations where you may want to have a <i>lower</i> amount of time spent, like
the Reality Upgrade "Replicative Rapidity" for example.
<br>
<br>
You can buy upgrades for the Black Hole by using Reality Machines. There are three upgrades for the Black Hole:
<br>
<b>Interval</b> - How long the Black Hole is inactive between bursts,
reduced by ${formatPercents(.2)} per upgrade.
<br>
<b>Power</b> - How much faster the game runs during the temporary speed bursts,
increased by ${formatPercents(.35)} per upgrade.
<br>
<b>Duration</b> - How long each speed burst lasts before going back to normal speed,
increased by ${formatPercents(.3)} per upgrade.
<br>
<br>
${formatInt(100)} days of <i>game time</i> after unlocking the Black Hole, you unlock the ability to purchase
a Reality Upgrade that allows you to have a second Black Hole.
The timer on the second Black Hole only advances when the first Black Hole is active. So, for example, if the first
Black Hole has a duration of ${formatInt(4)} minutes and the second has an interval of ${formatInt(8)} minutes, the
second Black Hole will only activate once every two cycles of the first Black Hole regardless of how short the
first Black Hole's interval is. Note that the timer shown in the in-game header takes account of this and shows
the actual time until the second Black Hole activates; in the Black Hole tab, you can see the amount of time with
the first Black Hole active needed for the second Black Hole to activate.
<br>
<br>
When a Black Hole is active at least ${formatPercents(.9999,2)} of the time, it becomes permanently active.
This is tracked separately for the two Black Holes.
<br>
<br>
While offline, Black Hole cycles will still advance normally and their active speed boosts will apply fully as if the
game were still open. Offline time simulates segments of inactive and active Black Holes with different tick lengths
in order to reduce the negative effects of small tick count during active periods; the entry for "Offline Progress"
has been updated with more technical details.
<br>
<br>
The Black Holes can be paused, completely halting their interval/duration cycle. However, when unpausing them, it will
take ${BlackHoles.ACCELERATION_TIME} real-time seconds for them to go from inactive to their maximum boosted speed.
This acceleration time will still advance the cycle as if it were running at full speed; so
while pausing gives some more control, it also ultimately results in some boosted time being lost.
<br>
<br>
Pausing and unpausing affects both Black Holes; they cannot be paused or unpaused independently. They can be paused
automatically ${BlackHoles.ACCELERATION_TIME} real-time seconds before activation by toggling the relevant setting on
the Black Hole tab.
<br>
<br>
<b>Upgrade Cost Information:</b>
<br>
<b>Interval</b> - Base cost of ${formatInt(15)} RM and increase of ${formatX(3.5,0,1)} per upgrade.
<br>
<b>Power</b> - Base cost of ${formatInt(20)} RM and increase of ${formatX(2)} per upgrade.
<br>
<b>Duration</b> - Base cost of ${formatInt(10)} RM and increase of ${formatX(4)} per upgrade.
<br>
<b>Increased cost scaling:</b> Above ${format(1e30)} RM, the cost multiplier between purchases increases by an additive
+${format(.2,0,1)} per upgrade. Above ${format(Number.MAX_VALUE,1)} RM, a new scaling occurs which ignores all the
previous behavior. From this point, all upgrades instead behave as if they had an initial cost of ${format(L.E310)}
and further upgrade costs increase by ${format(1e6)}, ${format(1e7)}, and so on (${formatX(10)} between upgrades).
<br>
<b>Black Hole 2:</b> All upgrades have an initial cost ${formatX(1e3)} higher than the first Black Hole,
but the same cost multipliers.
<br>
<br>
<b>Hotkey: B</b> will pause/unpause the Black Holes.
`,isUnlocked:()=>player.blackHole[0].unlocked,tags:["reality","time","speed","duration","interval","rm","endgame","lategame"],tab:"reality/hole"},{name:"Celestials",info:()=>`
Once you get all of the Reality Upgrades, the first Celestial is unlocked. This opens up a new tab for Celestials, next
to the Reality tab. The first subtab under the Celestials tab shows a map called "Celestial Navigation" which updates as
you progress through the game. Only part of the map will be visible when first unlocked, but new content will gradually
be revealed as you approach it, generally with a visual indication of your progress towards the next step.
<br>
<br>
Each Celestial has unique mechanics and upgrades, and you need to defeat all seven to beat the game.
Unlocking or defeating a Celestial has different conditions depending on the Celestial's mechanics.
<br>
<br>
All Celestials have their own Celestial Reality, but how the Reality is relevant to each Celestial and the rest of
the game will depend on the Celestial.
<br>
<br>
Celestials are timeless entities. Unless otherwise stated, any new mechanics introduced by Celestials are not affected
by game speed multipliers and instead refer specifically to real time instead of game time.
`,isUnlocked:()=>Teresa.isUnlocked,tags:["reality","challenges","endgame","lategame"],tab:"celestials/celestial-navigation"},{name:"Teresa, Celestial of Reality",alias:"Teresa",info:()=>`
Teresa is the first Celestial. They are unlocked by Achievement 147, which requires obtaining all Reality Upgrades.
<br>
<br>
On the main screen, there is a bar with a button above it that says "Pour RM". This allows you to put your RM into the
container for a Reality Machine multiplier. RM which has been poured into the container cannot be retrieved.
When you reach ${format(TeresaUnlocks.run.price)} RM inside of the container, you unlock Teresa's Reality.
<br>
<br>
When you complete Teresa's Reality,
${Teresa.runCompleted?"your Glyph Sacrifice is multiplied based on the amount of antimatter gained during the run":"<div style='color: var(--color-bad);'>(complete Teresa's Reality to see the reward)</div>"}.
Completing Teresa's Reality is only part of the story; you need to keep pouring RM in order to progress. Once
you are at ${format(TeresaUnlocks.effarig.price)} RM in the container, you will unlock the next Celestial.
<br>
<br>
${Teresa.runCompleted?"Teresa's Reality can be entered again after completing it, and its reward will become stronger if you reach a higher amount of antimatter on this repeat run.":"(More information available - complete Teresa's Reality)"}
`,isUnlocked:()=>Teresa.isUnlocked,tags:["rm","endgame","lategame","perks","sacrifice","boo","ghost","celestial"],tab:"celestials/teresa"},{name:"Effarig, Celestial of Ancient Relics",alias:"Effarig",info:()=>`
Effarig is the second Celestial you encounter.
They are unlocked by pouring at least ${format(TeresaUnlocks.effarig.price)} RM into Teresa's container.
<br>
<br>
Effarig introduces a currency called Relic Shards, which are obtained by using different kinds of Glyph effects during
a Reality. The number of distinct effects active during the Reality very strongly affects Relic Shard gain, and EP
affects it to a much lesser degree. Relic Shards are the currency for Effarig unlocks, and will be gained from every
Reality from now on.
<br>
<br>
Using Relic Shards, you can purchase multiple upgrades (see "Advanced Glyph Mechanics") which improve your Glyphs and
allow you to filter them based on their effects and rarity when you are doing fully automated Realities.
<br>
<br>
Effarig's final unlock is their own Reality at ${format(GameDatabase.celestials.effarig.unlocks.run.cost)} Relic
Shards.
${EffarigUnlock.run.isUnlocked?"Their Reality is divided into three layers: Infinity, Eternity, and Reality. You must complete each layer before getting access to the next one. Completing Effarig's Eternity unlocks the next Celestial.":"<div style='color: var(--color-effarig--base);'>(unlock Effarig's Reality to see details about it)</div>"}
<br>
<br>
Completing Effarig's Reality unlocks
${EffarigUnlock.reality.isUnlocked?`a new Glyph type, <span style='color: var(--color-effarig--base);'>Effarig</span> Glyphs. Effarig Glyphs have
      ${formatInt(7)} different possible effects, which you can view in the Glyph filter settings. You can only
      have one Effarig Glyph equipped at a time.
${Ra.unlocks.glyphEffectCount.canBeApplied?`Due to having Effarig at level 10 within Ra, there are no longer any restrictions on effects that appear on
      Effarig Glyphs. Any given Effarig Glyph can now have up to all ${formatInt(7)} effects at the same time.`:`Effarig Glyphs can only have at most ${formatInt(4)} effects, and the RM multiplier and Glyph instability
      effects cannot appear together on the same Glyph.`}`:"<span style='color: var(--color-effarig--base);'>(complete Effarig's Reality to see reward details)</span>"}
<br>
<br>
`,isUnlocked:()=>TeresaUnlocks.effarig.canBeApplied,tags:["glyph","sacrifice","shards","reality","spectralflame","lategame","endgame","celestial"],tab:"celestials/effarig"},{name:"Advanced Glyph Mechanics",info:()=>`
Glyph level Adjustment is purchasable for ${format(GameDatabase.celestials.effarig.unlocks.adjuster.cost)} Relic
Shards. This allows you to set weights for each resource (EP, DT, Replicanti, Eternities), in how much they affect the
level of Glyphs gained on Reality.
<br>
<br>
Automatic Glyph Filtering is purchasable for ${format(GameDatabase.celestials.effarig.unlocks.glyphFilter.cost)}
Relic Shards. This system uses one of many methods to assign a score to your Glyph choices, and then picks the choice
with the highest score. After picking this Glyph, it checks the score against a threshold and either keeps it if the
score is above the threshold, or sacrifices it instead. There are three basic modes:
<br>
<b>Lowest total sacrifice:</b> Glyphs are given a score based on how much sacrifice value you have of that
particular Glyph's type. Glyphs of the type you have the least sacrifice value in will have the highest score.
This mode does not have a threshold and always sacrifices your Glyphs.
<br>
<b>Number of effects:</b> Glyphs are given a score equal to the number of effects they have, and when multiple
Glyphs have the same effect count, Glyphs with higher rarity will be picked. The threshold they are
compared to is specified by your input in the text box.
<br>
<b>Rarity Threshold Mode:</b> Glyphs are given a score equal to their rarity percent. The comparison threshold
can be set individually per Glyph type.
<br>
<br>
Additionally, there are two more advanced modes with some additional flexibility. You may not need these initially, but
they can come in handy later on:
<br>
<b>Specified Effect Mode:</b> Glyphs are given a score equal to their rarity and checked against the rarity threshold
you specify, but this score is modified based on your inputs for effects. The Glyph will be checked for having a minimum
number of effects and having all of the effects you choose, and its score is lowered by ${formatInt(200)} for every
missing effect. This guarantees that any Glyph that does not have the effects you want will be below the threshold. You
can forbid specific Glyph <i>types</i> by setting impossible conditions (eg. at least ${formatInt(6)} effects on a Power
Glyph will prevent Power Glyphs from being selected).
<br>
<b>Effect Score Mode:</b> The score of a Glyph is calculated from its rarity plus the score of each effect it has,
and you can set the threshold and values of each effect individually. Some possible ways this could be used:
<br>
- Giving a weaker effect a value of ${formatInt(5)} allows you to keep Glyphs without that effect as long as they are
rarer to compensate for being weaker
<br>
- Assigning a large negative score to a certain effect you do <i>not</i> want will forbid Glyphs with that effect from
being selected; this can be useful for effect testing and other more limited situations
<br>
- Setting an impossible condition (eg. a threshold score of ${formatInt(999)} and all effects worth ${formatInt(0)})
will let you forbid entire types like Specified Effect Mode as well
<br>
<br>
The Glyph Filter mode is a global setting which applies to all Glyph types at once; for example, you cannot filter
power Glyphs with "Rarity Threshold" and time Glyphs with "Specified Effect". Selecting one mode will require
you to configure every Glyph type within its settings for proper filtering. Each filter mode has its own settings
which will be kept if you switch to another mode.
<br>
<br>
Unlocking the Glyph Filter also lets you use the highest Glyph score amongst your upcoming choices as a comparable
Currency in the Automator. Additionally, you can make your Filter force an immediate Reality (once available) if
none of the upcoming choices will be kept by the filter, as long as the Reality autobuyer is on.
<br>
<br>
Glyph Presets are purchasable for ${format(GameDatabase.celestials.effarig.unlocks.setSaves.cost)} Relic
Shards. This unlocks ${formatInt(7)} slots that allow you to save your currently equipped Glyphs into sets.
You cannot overwrite a set, you must delete it first. When you load a set, each Glyph in it is found and equipped.
If any are not found, it will display a warning, but equip all the rest regardless.
When loading a set, you can be Level and/or Rarity sensitive. The best Glyph from the possible Glyphs
will always be the one equipped. Just like other groups of circular Glyphs, you can click any of them
in order to bring up a modal summarizing the whole set of Glyphs.
`,isUnlocked:()=>EffarigUnlock.adjuster.isUnlocked,tags:["glyph","weight","adjustment","sacrifice","filter","threshold","set","save","reality","lategame","endgame"],tab:"celestials/glyphfilter"},{name:"The Nameless Ones, Celestial of Time",alias:"Nameless Ones",info:()=>`
The Nameless Ones are the third Celestial, unlocked by completing Effarig's Eternity.
<br>
<br>
When unlocking The Nameless Ones, you immediately gain access to two new mechanics related to time. You can store
"game time" by charging your Black Hole, and you can store "real time" by intentionally halting your production.
Stored game time is also used as a currency for purchasing unlocks from The Nameless Ones.
<br>
<br>
Charging your Black Hole gives you stored game time, which it does at the expense of setting your game speed to
${formatInt(1)}. The game is in effect using your increased game speed in order to store game time itself. Its
main use is to discharge the Black Hole, which takes uses your stored game time to skip forward in time by a duration
equal to the game time stored. This is different than regular game speed multipliers in that discharging is not subject
to any modifiers to game speed when it is used, only when it is stored.
<br>
<br>
Storing real time completely stops all production, effectively pausing your game. For every real-time second that
passes, you gain stored real time (modified by some efficiency factor). You can use stored real time in order to
amplify a Reality in the Glyphs tab. When you complete the Reality, this uses all of your stored real time at once
in order to attempt to repeat that
exact Reality over and over, giving you all the rewards you would normally get from the repetitions. For example, if
you have ${formatInt(50)} minutes stored and amplify a Reality which has lasted ${formatInt(10)} minutes and would
give ${format(L.E30)} RM and ${format(L.E12)} Relic Shards, the amplified Reality will give you ${format(5e30)} RM,
${format(5e12)} Relic Shards, ${formatInt(5)} Glyphs (subject to your filtering settings),
and ${formatInt(5)} Perk Points.
<br>
<br>
However, if your Reality has lasted for less than ${formatInt(1)} second, the amplification factor is capped by the
amount of seconds stored. For example, if you have ${formatInt(1e3)} seconds stored and amplify a Reality which has
lasted ${format(.2,2,2)} seconds, you will use ${formatInt(200)} seconds to simulate ${formatInt(1e3)} Realities.
<br>
<br>
You can toggle a setting to automatically store offline time as stored real time.
<br>
<br>
Their first unlock costs ${format(TimeSpan.fromMilliseconds(ENSLAVED_UNLOCKS.FREE_TICKSPEED_SOFTCAP.price).totalYears)}
years of stored game time. It increases the softcap to Tickspeed Upgrades gained from Time Dimensions
(the point at which their cost starts increasing faster)
by ${format(1e5)} Tickspeed Upgrades.
<br>
<br>
At ${format(TimeSpan.fromMilliseconds(ENSLAVED_UNLOCKS.RUN.price).totalYears)} years of stored game time, you are able
to finally unlock their Reality. The reward for completing The Nameless Ones' Reality is
${Enslaved.isCompleted?"unlocking Tesseracts, which have their own How To Play entry.":"<span style='color: var(--color-bad);'>(complete The Nameless Ones' Reality to see reward details)</span>"}
<br>
<br>
The Nameless Ones will not directly unlock the next Celestial.
`,isUnlocked:()=>EffarigUnlock.eternity.isUnlocked,tags:["reality","time","blackhole","lategame","endgame","testers","celestial",...X0.people.map(t=>t.name)],tab:"celestials/enslaved"},{name:"Tesseracts",info:()=>`
Tesseracts are a new resource you unlock for completing The Nameless Ones' Reality.
<br>
<br>
Infinity Dimensions are normally capped at ${format(InfinityDimensions.HARDCAP_PURCHASES)} total purchases,
which limits how large their multipliers can grow since eventually you cannot upgrade them any more.
Tesseracts allow you to raise this cap by spending Infinity Points.
<br>
<br>
The cost of Tesseracts increases super-exponentially, but each successive Tesseract is significantly stronger than
the last in order to make up for that. Tesseract count is never reset, meaning that once purchased, you do not need
to reach the IP cost again in order to take advantage of the raised cap in later Realities.
<br>
<br>
You can see additional information about your current Tesseract count and the cost of the next one in the Infinity
Dimensions tab. Additionally, your current Infinity Points will now also show a percentage towards the next Tesseract.
If affordable, the Infinity button itself will visually change and bring you to the Infinity Dimension tab when clicked.
`,isUnlocked:()=>Enslaved.isCompleted,tags:["reality","lategame","endgame","tesseract","id","celestial"],tab:"celestials/tesseract"},{name:"V, Celestial of Achievements",alias:"V",info:()=>`
V is a special Celestial in the sense that they are not unlocked by another Celestial,
but is instead unlocked by completing Achievement ID 151 (row ${formatInt(15)}, column ${formatInt(1)},
"You really didn't need it anyway"), which requires you to get ${formatInt(800)} Antimatter Galaxies
without buying 8th Antimatter Dimensions in your current Infinity.
<br>
<br>
After the subtab is unlocked from the Achievement, you are met with another set of requirements to fully unlock V.
You must have completed ${formatInt(GameDatabase.celestials.v.mainUnlock.realities.requirement)} Realities and have
${format(GameDatabase.celestials.v.mainUnlock.realityMachines.requirement)} unspent RM.
Additionally you need to reach ${format(GameDatabase.celestials.v.mainUnlock.eternities.requirement)} Eternities,
${format(GameDatabase.celestials.v.mainUnlock.infinities.requirement)} Infinities,
${format(GameDatabase.celestials.v.mainUnlock.dilatedTime.requirement)} Dilated Time, and
${format(GameDatabase.celestials.v.mainUnlock.replicanti.requirement)} Replicanti, all in the same Reality.
<br>
<br>
When you meet all of those requirements, you will be able to access V's Reality.
${VUnlocks.vAchievementUnlock.isUnlocked?`However, completing the Reality itself is only the beginning. V has six different requirements, each of which
      require you to make a certain amount of progress within V's Reality. Completing a requirement rewards you with a
      V-Achievement.
      V-Achievements are permanent and persist after exiting V's Reality, and do not all need to be done simultaneously.
      <br>
      <br>
      After completing the requirement, the V-Achievement threshold then increases and can be completed again
      if you can reach the new goal.  You can complete each category of V-Achievement up to six times.
      Completed V-Achievements do two things:
      <br>
      - Upon reaching certain totals of V-Achievements, you automatically unlock upgrades on the V tab without needing
      to spend any resources.
      <br>
      - Each V-Achievement also gives you one Space Theorem.
      <br>
      <br>
      The goal reduction unlocked by having ${formatInt(2)} V-Achievements allows you to make some V-Achievement
      requirements easier to complete by spending Perk Points, down to a limit of whatever the easiest tier requires.
      The cost of reducing a goal does not increase as it is used, and will also reduce future tiers as well.
      <br>
      <br>
      Space Theorems allow you to purchase Time Studies which are normally forbidden, such as multiple paths in the
      Pace Split after the improved IP formula, or both Time Studies within a dark/light pair near the bottom.
      Like Time Theorems, they are freely given back every time you respec your studies.
      With enough Space Theorems you will eventually be able to purchase every single Time Study at once!
      <br>
      <br>
      Reaching ${formatInt(36)} V-Achievements (and therefore completing all of V's Achievements) unlocks the next
      Celestial.`:"<span style='color: var(--color-bad);'>(unlock V's Reality to see further details)</span>"}
`,isUnlocked:()=>Achievement(151).isUnlocked,tags:["reality","lategame","endgame","girlfriend","challenges","achievement","space","theorems","study","triad","celestial"],tab:"celestials/v"},{name:"Ra, Celestial of the Forgotten",alias:"Ra",info:()=>`
Ra is the fifth Celestial, unlocked by fully completing all of V's Achievements. They use their memories in order to
bring back positive effects from previous Celestials in a stronger way. Over time, you will unlock the previous four
Celestials <i>within</i> Ra, with each Celestial offering additional upgrades related to their original themes.
<br>
<br>
Each previous Celestial within Ra gains levels by using memories, which are generated passively over time from
Memory Chunks. Memory Chunks can only be gained by entering Ra's Reality, but inside of the Reality Chunks will
be generated passively based on certain resource totals. If you are storing real time, you will not gain any
Chunks inside of Ra's Reality, but Memories will still be generated normally. Having a total of
${formatInt(Ra.remembrance.requiredLevels)} levels across all Celestials unlocks Remembrance,
which allows you to choose a particular Celestial to gain more chunks while inside of Ra's Reality.
<br>
<br>
Memories can be spent on three things - an increase to Memory Chunk gain, an increase to Memory gain, and leveling up
the Celestial. You start Ra with only Teresa unlocked and each successive Celestial is unlocked by reaching level
${formatInt(8)} with the previous Celestial. Levels are capped at ${formatInt(25)}.
<br>
<br>
Teresa unlocks the ability to charge your Infinity Upgrades, making them much stronger. They also
improve your Glyph effects once you reach certain thresholds in Glyph sacrifice value.
<br>
<br>
At level ${formatInt(2)}, Effarig unlocks
${Ra.unlocks.effarigUnlock.canBeApplied?"a new mechanic called Glyph Alchemy and later on also makes Effarig Glyphs stronger while gradually removing almost all random elements of Glyph generation. Glyph Alchemy also has its own How To Play entry.":"<span style='color: var(--color-bad);'>(unlock Effarig within Ra to see unlock details)</span>"}
<br>
<br>
The Nameless Ones unlocks
${Ra.unlocks.enslavedUnlock.canBeApplied?"additional mechanics related to charging the Black Holes, as well as making them significantly stronger.":"<span style='color: var(--color-bad);'>(unlock The Nameless Ones within Ra to see unlock details)</span>"}
<br>
<br>
V unlocks
${Ra.unlocks.vUnlock.canBeApplied?"Triad Studies, which are new studies near the bottom of the tree which cost Space Theorems. Each Triad Study requires you to also have the three nearby studies as well in order to purchase them. They also unlock a smaller set of more difficult V-Achievements to complete for additional Space Theorems.":"<span style='color: var(--color-bad);'>(unlock V within Ra to see unlock details)</span>"}
<br>
<br>
Ra will not directly unlock the next Celestial.`,isUnlocked:()=>VUnlocks.raUnlock.isUnlocked,tags:["reality","memories","razenpok","levels","glyphs","lategame","endgame","effarig","teresa","nameless","v","celestial"],tab:"celestials/ra"},{name:"Glyph Alchemy Resources",info:()=>`
Glyph Alchemy is a mechanic unlocked by reaching Effarig level ${formatInt(2)} in Ra. It unlocks the ability to
use up your Glyphs by refining them into Alchemy Resources associated with their type. You can refine Glyphs by
setting your Sacrifice Type to something other than "Always Sacrifice" in the Glyphs tab, and doing the normal
procedure for a sacrifice.
Each Alchemy Resource has a unique effect, which you can view on the Alchemy tab.
<br>
<br>
In addition to all their other properties, Glyphs now have a <i>refinement value</i> which determines how much of
its associated Alchemy Resource it is worth. This value is based on the cube of the Glyph's level, scaled
so that level ${formatInt(1e4)} Glyphs correspond to ${formatInt(1e4)} Alchemy Resources. A single Glyph itself,
however, only gives ${formatPercents(GlyphSacrificeHandler.glyphRefinementEfficiency)} of this value when refined.
These are values for ${formatPercents(1)} rarity Glyphs; Glyphs of lower rarity still have the same cap but give
proportionally less resources. For example, a ${formatPercents(.5)} rarity Glyph will give only half as much.
<br>
<br>
Alchemy Resources cannot be gained indefinitely; there is a per-resource cap which is based on the highest refinement
value of all the Glyphs of that type you have refined. For example, if the highest level Time Glyph you have refined
is level ${formatInt(8e3)} (refinement value: ${formatInt(GlyphSacrificeHandler.levelRefinementValue(8e3))}), then no
matter how many Time Glyphs you refine, you can never have more than
${formatInt(GlyphSacrificeHandler.levelRefinementValue(8e3))} of the Time resource until you refine another Time Glyph
with a higher refinement value.
`,isUnlocked:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied,tags:["reality","lategame","endgame","ra","effarig","alchemy","power","infinity","time","replication","dilation","cardinality","eternity","dimensionality","inflation","alternation","synergism","momentum","decoherence","force","exponential","uncountability","boundless","unpredictability","multiversal","reaction"],tab:"reality/alchemy"},{name:"Glyph Alchemy Reactions",info:()=>`
Alchemy Resources can be combined together in certain combinations in order to create new compound resources, which
are unlocked at certain Effarig levels. Resources are combined once per Reality, unaffected by real time
amplification. Reactions have a higher yield and thus happen faster when your reagent amounts are higher. The cap for
compound resources is equal to the lowest cap amongst all of its reagents. In order for a reaction to occur, the
current amount of all reagents must be greater than the current amount of the produced resource.
<br>
<br>
Reaction speed is proportional to the amount of usable reagents for the reaction, but only reagent amounts above the
product amount are eligible for being used. For example, if you have ${formatInt(1e4)} of all reagents and
${formatInt(7500)} of the product, only ${formatInt(2500)} of the reagents are used in calculating the reaction speed.
If you instead had ${formatInt(0)} of the product, <i>all</i> of the reagent is available for the reaction and it will
produce ${formatX(4)} faster. Lastly, if you had ${formatInt(1e4)} of the product, then none of the reagent can be
used and the reaction will not run at all.
<br>
<br>
To activate or deactivate a reaction, click the circle corresponding to the reaction's product. When the reaction can
be applied, moving lines will be shown from all reagents to the product. If a connection is a solid line, that means
that the reaction cannot proceed due to not having enough of that reagent to get more of the product due to its cap.
`,isUnlocked:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied,tags:["reality","lategame","endgame","ra","effarig","alchemy","power","infinity","time","replication","dilation","cardinality","eternity","dimensionality","inflation","alternation","synergism","momentum","decoherence","force","exponential","uncountability","boundless","unpredictability","multiversal","reaction"],tab:"reality/alchemy"},{name:"Imaginary Machines",info:()=>`
Once you are able to gain at least ${format(MachineHandler.baseRMCap)} Reality Machines in a single Reality, you
unlock the ability to gain a new resource called Imaginary Machines. Reality Machines will also become hardcapped
at ${format(MachineHandler.baseRMCap)}; you will be unable to gain any more past this limit.
<br>
<br>
Additionally you unlock the Imaginary Upgrades tab, which contains a set of upgrades similar to the Reality Upgrades -
each upgrade has a condition you must fulfill to unlock it and an Imaginary Machine cost to actually purchase it.
The first two rows of upgrades can be repeatedly bought, while the other three are one-time upgrades.
<br>
<br>
Your iM amount is affected by two things:
<br>
<b>iM Cap</b> - There is a maximum amount of iM you can ever have, which is based on the highest RM amount you would
have been able to get if there were no RM cap. This is updated on a continual basis and thus will immediately increase
if you ever surpass your previous highest uncapped RM amount.
<br>
<b>Current iM</b> - Over time your current iM will passively rise towards your iM cap, in a way that slows down
exponentially as you approach the cap. By default iM slows down at a rate where the amount you are <i>missing</i>
(ie. your cap minus your current amount) is cut in half every minute. This growth rate is unaffected by any
modifiers to game speed.
<br>
<br>
Imaginary Machine upgrades will unlock the final two Celestials.
`,isUnlocked:()=>MachineHandler.isIMUnlocked,tags:["imaginary","machines","reality","lategame","endgame"],tab:"reality/imag_upgrades"},{name:"Lai'tela, Celestial of Dimensions",alias:"Lai'tela",info:()=>`
Lai'tela is the sixth Celestial, unlocked by purchasing the appropriate Imaginary Upgrade for
${format(ImaginaryUpgrade(15).cost)} iM.
<br>
<br>
Lai'tela gives a new currency called Dark Matter, which provides a multiplier to Continuum's effect
based on the highest amount of Dark Matter you have ever had. Dark Matter is produced by
Dark Matter Dimensions, in a similar cascading way to all other types of dimensions in the game. Unlike other
dimensions, there are only four Dark Matter Dimensions rather than eight. You start with the first one unlocked
immediately and the higher ones are unlocked via Imaginary Upgrades. When unlocking dimensions, you are given
${formatInt(1)} of the dimension and cannot gain more without having it produced from the next tier up.
<br>
<br>
Each Dark Matter Dimension, after a certain interval of time, generates two things: Dark Matter or the next lower
Dark Matter Dimension and another resource called Dark Energy. Dark Matter and Dark Matter Dimension production
per interval is equal to the product of your Dark Matter multiplier and the number of dimensions you have, while
Dark Energy production is independent of your dimension amount. Dark Energy is used to produce Singularities, which
have their own How To Play entry.
<br>
<br>
Dark Matter Dimensions can have their intervals upgraded down to a minimum of ${formatInt(10)}ms, at which point
you cannot upgrade the interval any further. You can choose to ascend Dark Matter Dimensions which reach
that point, which initially multiplies Dark Matter gain by ${formatInt(POWER_DM_PER_ASCENSION)} and Dark Energy by
${formatInt(POWER_DE_PER_ASCENSION)}. The interval gets multiplied by ${formatInt(1200)}, but can be upgraded once
again. Reaching ${formatInt(10)}ms again allows you to ascend again if you choose to.
<br>
<br>
An Imaginary Upgrade allows you to unlock a prestige called Annihilation. Annihilation resets your Dark Matter
and Dark Matter Dimensions, but adds to a permanent multiplier to Dark Matter that applies to all Dark Matter
Dimensions. You can Annihilate multiple times; the additions to the multiplier stack additively, and there is
no need to Annihilate for a greater addition each time. You must have at least
${format(Laitela.annihilationDMRequirement)} Dark Matter in order to Annihilate.
<br>
<br>
Lai'tela has a Reality which gives a multiplier to Dark Matter Dimensions' Dark Matter power based on how well you
do in the Reality. Whenever you complete the Reality in under ${formatInt(30)} seconds, your highest available
Dimension will be permanently disabled during further attempts of the Reality. Disabling all of your dimensions by
completing the Reality in under ${formatInt(30)} seconds eight times will also give you a ${formatX(8)} multiplier
to Dark Energy gain.
<br>
<br>
Lai'tela will not directly unlock the next Celestial.
`,isUnlocked:()=>Laitela.isUnlocked,tags:["omsi","reality","dark","matter","dimensions","lategame","endgame","ascend","celestial"],tab:"celestials/laitela"},{name:"Continuum",info:()=>`
When you unlock Lai'tela, your Antimatter Dimensions and Tickspeed Upgrades switch to a new mode of production
called Continuum, which gives the same effect as previously but allows for buying partial Dimension or
Tickspeed Upgrades. These fractional purchases are given for free without spending your antimatter and will provide
an appropriate portion of their multiplier.
<br>
<br>
The purchase buttons for Antimatter Dimensions and Tickspeed Upgrades become modified to display the number of upgrades
you would be able to purchase if Continuum was inactive, and the purchase count is scaled smoothly with antimatter.
For example, having ${format(2e7)} antimatter will give you a Continuum value of ${format(5.3,0,1)} for tickspeed
(initial cost of ${format(1e3)} and increase of ${formatX(10)}) since you can purchase it ${formatInt(5)} times and
are roughly ${formatPercents(.3)} of the way to the next. Tickspeed Continuum in this case will then
give a production boost equal to (upgrade multiplier)<sup>${format(5.3,0,1)}</sup>.
<br>
<br>
Some upgrades will multiply Continuum value directly, which gives a production boost without affecting the cost
scaling. However, these upgrades will not function if Continuum is disabled on the Autobuyers page, which may result
in a loss of production if disabled. Continuum makes your autobuyers for Antimatter Dimensions and Tickspeed obsolete,
so all the related autobuyer settings for these autobuyers are now hidden on that tab as long as Continuum is active.
`,isUnlocked:()=>ImaginaryUpgrade(15).isBought,tags:["continuum","purchase","reality","lategame","endgame"],tab:""},{name:"Singularities",info:()=>`
Singularities are a new resource which you can obtain using features within Lai'tela.
<br>
<br>
In order to obtain Singularities, you need to reach ${format(200)} Dark Energy. When you do, you get the option to
condense all your Dark Energy into a Singularity, resetting it back to zero. Any extra Dark Energy above this amount
do not carry over, and is thus wasted. Note that only Dark Energy is reset, the status of your Dark Matter and its
dimensions stays the same when condensing Singularities.
<br>
<br>
Once you reach ${formatInt(10)} Singularities, you can freely increase or decrease the Dark Energy requirement to
condense Singularities by a factor of ${formatInt(10)} (with a minimum of ${format(200)}). This increases or decreases
the number of Singularities gained from resetting at the cap by <i>more than</i> a factor of ${formatInt(10)}, making
higher caps worth more if you are willing to wait.
<br>
<br>
The purpose of Singularities is to unlock Singularity Milestones, which act similarly to Eternity Milestones. Unlocking
these milestones simply requires you to reach the total number of Singularities specified; Singularities are not spent.
There are three types of milestones - one-time milestones, milestones repeatable a limited number of times, and
milestones which can be repeated indefinitely.
<br>
<br>
Independently of the milestone type, milestones also have an icon indicating what kind of upgrade they generally give:
<br>
<b>ᛝ</b> These milestones help mechanics specific to Lai'tela
<br>
<i class="fas fa-arrows-alt"></i> These milestones let a resource in Lai'tela affect the rest of the game
<br>
<i class="fas fa-compress-arrows-alt"></i> These milestones improve Lai'tela based on something outside of Lai'tela
`,isUnlocked:()=>Laitela.isUnlocked,tags:["reality","lategame","endgame","laitela","dark"],tab:""},{name:"Pelle, Celestial of Antimatter",alias:"Pelle",info:()=>`
When you purchase the last Imaginary Upgrade and unlock Pelle, you unlock their tab, where you can find a button to
"Doom your Reality". In order to Doom your Reality, you must have completed all ${formatInt(17)} rows of Achievements
available to you at this point, and attained ${formatInt(25e3)} of each Alchemy Resource.
<br>
<br>
${Pelle.isDoomed?`Dooming your Reality will start a new <b>Doomed Reality</b>, resetting almost the entire game up to
      Reality, not giving you any rewards from your progress in your current Reality.
      <br>
      <br>
      When you enter the Doomed Reality, you keep all values under the General and Reality headers in the Statistics
      tab and all of your best Challenge times. Inside Doomed Realities, multiple upgrades, Time Studies, Challenge and
      Celestial rewards, Perks, and other game mechanics are disabled or grant no reward.
      You can view the "Show effects in Doomed Reality" in Pelle tab for further information.
      <br>
      <br>
      Remnants are a new currency gained on Armageddon resets. Remnant gain is based on your best ever antimatter,
      Infinity Points, and Eternity Points across all Doomed Realities. Remnants produce Reality Shards which can be
      spent on Pelle Upgrades.
      <br>
      <br>
      Pelle Upgrades can be divided into two categories. The five upgrades in the first row can be repeatedly bought,
      but eventually reach a cap. They grant boosts to different aspects of the game, making progression within Doomed
      Realities easier.
      <br>
      <br>
      The other upgrades in the bottom rows offer automation and QoL (quality of life) improvements. Everything unlocked
      from these upgrades cannot be unlocked by their usual methods in the game; for example, none of the Normal
      Challenges will unlock autobuyers if completed since they are all locked behind Pelle Upgrades instead.
      You can toggle a button above upgrade to hide bought upgrades or click the
      <i class="fas fa-compress-arrows-alt"></i>-icon to collapse and hide the entire panel.
      <br>
      <br>
      <b>Hotkey: Z</b> will try to perform an Armageddon reset.`:"<span style='color: var(--color-bad);'><b>You must Doom your Reality to read the rest of this entry.</b></span>"}
`,isUnlocked:()=>Pelle.isUnlocked,tags:["reality","antimatter","lategame","endgame","final","hevipelle","celestial","doom"],tab:"celestials/pelle"},{name:"Pelle Strikes",info:()=>`
Pelle Strikes are encountered on different events in the Doomed Reality. You have encountered the first Pelle Strike by
reaching Infinity for the first time within a Doomed Reality. More Strikes eventually occur by further progression.
Each Pelle Strike adds a nerf to a specific aspect of the game, which can be seen by clicking on the Strike name.
Each Pelle Strike also unlocks a Rift bar.
<br>
<br>
Rift bars can be filled by clicking them to toggle between "Idle" and "Filling", although only two Rifts can be
"Filling" at any given time. When active, Rifts consume ${formatInt(3)}% of a Rift-specific resource per second. Each
Rift offers a Rift-specific effect which are based on the total amount filled.
${PelleStrikes.eternity.hasStrike?`An exception for this is Decay/Collapse/Disarray, whose effect gets capped once you have drained a total of
    ${formatPostBreak(L.E2000)} Replicanti.`:""}
In addition, each Rift offers three milestone rewards for filling them up to a certain percentage.
`,isUnlocked:()=>PelleStrikes.infinity.hasStrike,tags:["reality","antimatter","lategame","endgame","final","pelle","strike","rift","celestial"],tab:"celestials/pelle"},{name:"The Galaxy Generator",info:()=>`
When you reach ${formatInt(100)}% Recursion/Dispersion/Destruction, you unlock the <b>Galaxy Generator</b>, which can
passively generate Galaxies. Generated Galaxies are like Replicanti Galaxies and Tachyon Galaxies in that they affect
tickspeed as if they were Antimatter Galaxies, but they do not increase the cost of your next Antimatter Galaxy. You
also unlock five new upgrades. The first upgrade increases the base amount of Galaxies generated. The other four
upgrades then give a multiplier to this base amount. The first two upgrades can be bought by spending antimatter and
Generated Galaxies. Replicanti or Tachyon Galaxies cannot be spent for purchasing those upgrades.
<br>
<br>
The <b>Galaxy Generator</b> has a maximum number of Galaxies it can generate, which can only be increased by draining
Rifts once the current cap has been reached.`,isUnlocked:()=>Pelle.hasGalaxyGenerator,tags:["reality","antimatter","lategame","endgame","final","pelle","galaxy","galaxies","generator","celestial"],tab:"celestials/pelle"}]};(function(){for(let O=0;O<Bl.tabs.length;O++){const I=Bl.tabs[O];I.id=O,I.alias===void 0&&(I.alias=I.name),I.searchTermsRelevance={}}const t={},e=(O,I)=>{let F=t[O];F===void 0&&(F=[],t[O]=F),!F.includes(I)&&F.push(I)},i=(O,I)=>{const F=O.toLowerCase();for(let P=0;P<F.length;P++){const x=F.slice(0,P+1);e(x,I),I.searchTermsRelevance[x]===void 0?I.searchTermsRelevance[x]=((P+1)/F.length)**.65:I.searchTermsRelevance[x]=Math.max(I.searchTermsRelevance[x],((P+1)/F.length)**.65)}},n=(O,I)=>{i(O,I);for(const F of O.split(" "))i(F,I)};for(const O of Bl.tabs)n(O.name,O);for(const O of Bl.tabs)for(const I of O.tags)n(I,O);for(const O of Bl.tabs)n(O.alias,O);const r=function(O,I,F){const P={};for(let x=0;x<O.length;x++)for(let M=0;M<O[x].length;M++)P[I(O[x][M],x,M)]=F(O[x][M],x,M);return P},s=O=>r(O.split(",").map(I=>I.split("")),I=>I,(I,F,P)=>({x:F,y:P})),a=s("1234567890,qwertyuiop,asdfghjkl,zxcvbnm"),o=s("1234567890,qwertzuiop,asdfghjkl,yxcvbnm"),c=s("1234567890,azertyuiop,qsdfghjklm,wxcvbn"),d=s("1234567890,'<>pyfgcrl,aoeuidhtns,;qjkxbmwvz"),p=s("1234567890,qwfpgjluy,arstdhneio,zxcvbkm"),m=s("1234567890,qdrwbjfup,ashtgyneoi,zxmcvkl"),y=s("1234567890,qwprfyukl,asdtghnioe,zxcvbjm"),_=[a,o,c,d,p,m,y],E=function(O,I,F){const P=F[O],x=F[I];return!P||!x?100:Math.max(Math.abs(P.x-x.x),Math.abs(P.y-x.y))},C=function(O,I,F){if(O===I)return 0;const P=O.length,x=I.length;if(Math.abs(P-x)>3)return 100;const M=new Array(P+1).fill(0).map(()=>new Array(x+1).fill(0));for(let q=0;q<=P;q++)M[q][0]=q;for(let q=0;q<=x;q++)M[0][q]=q;for(let q=1;q<=P;q++)for(let $=1;$<=x;$++){const B=E(O[q-1],I[$-1],F),j=B===0?0:.3+B*B*.25;M[q][$]=Math.min(M[q-1][$]+.55,M[q][$-1]+.7,M[q-1][$-1]+j)}return M[P][x]},S=function(O,I){let F=1e10;for(const P of _)F=Math.min(F,C(O,I,P));return F},k=["'",'"',",","-",".","_"],R=function(O){let I=O;for(const F of k)I=I.replaceAll(F,"");return I};Bl.search=O=>{const I=R(O);if(I==="")return Bl.tabs.map(M=>({tab:M,relevance:1.5}));const F=I.toLowerCase().split(" ").filter(M=>M!==""),P=Array.repeat(1e4,Bl.tabs.length);for(const M of F){const q=Math.min(M.length-.9,3)*.5;for(const $ in t){const B=S(R($),M);if(B<q)for(const j of t[$]){const z=j.searchTermsRelevance[$],X=Math.max(z*1.6-.9,0);P[j.id]=Math.min(P[j.id],Math.max(B,1-z)-X)}}}const x=Bl.tabs.filter(M=>P[M.id]<.9).map(M=>({tab:M,relevance:P[M.id]}));return x.sort((M,q)=>M.tab.id-q.tab.id).sort((M,q)=>M.relevance-q.relevance),x}})();function P1(t){const e=t.effect||(c=>c),{id:i,maxUpgrades:n,description:r,isDisabled:s,noLabel:a,onPurchased:o}=t;return{rebuyable:!0,id:i,cost:()=>t.initialCost*Math.pow(t.costIncrease,player.infinityRebuyables[t.id]),maxUpgrades:n,description:r,effect:()=>e(player.infinityRebuyables[t.id]),isDisabled:s,formatEffect:t.formatEffect||(c=>{const d=t.afterEC?t.afterEC():"";return c===t.maxUpgrades?`Currently: ${formatX(10-c)} ${d}`:`Currently: ${formatX(10-c)} | Next: ${formatX(10-c-1)}`}),formatCost:c=>format(c,2,0),noLabel:a,onPurchased:o}}const lW={totalAMMult:{id:"totalMult",cost:1e4,description:"Antimatter Dimensions gain a multiplier based on total antimatter produced",effect:()=>Math.pow(player.records.totalAntimatter.exponent+1,.5),formatEffect:t=>formatX(t,2,2)},currentAMMult:{id:"currentMult",cost:5e4,description:"Antimatter Dimensions gain a multiplier based on current antimatter",effect:()=>Math.pow(Currency.antimatter.exponent+1,.5),formatEffect:t=>formatX(t,2,2)},galaxyBoost:{id:"postGalaxy",cost:5e11,description:()=>`All Galaxies are ${formatPercents(.5)} stronger`,effect:1.5},infinitiedMult:{id:"infinitiedMult",cost:1e5,description:"Antimatter Dimensions gain a multiplier based on Infinities",effect:()=>1+Currency.infinitiesTotal.value.pLog10()*10,formatEffect:t=>formatX(t,2,2)},achievementMult:{id:"achievementMult",cost:1e6,description:"Antimatter Dimensions gain a multiplier based on Achievements completed",effect:()=>Math.max(Math.pow(Achievements.effectiveCount-30,3)/40,1),formatEffect:t=>formatX(t,2,2)},slowestChallengeMult:{id:"challengeMult",cost:1e7,description:"Antimatter Dimensions gain a multiplier based on how fast your slowest challenge run is",effect:()=>Decimal.clampMin(50/Time.worstChallenge.totalMinutes,1),formatEffect:t=>formatX(t,2,2),hasCap:!0,cap:L.D3E4},infinitiedGen:{id:"infinitiedGeneration",cost:2e7,description:"Passively generate Infinities based on your fastest Infinity",effect:()=>player.records.bestInfinity.time,formatEffect:t=>{if(t===Number.MAX_VALUE&&!Pelle.isDoomed)return"No Infinity generation";let e=L.D1;e=e.timesEffectsOf(RealityUpgrade(5),RealityUpgrade(7),Ra.unlocks.continuousTTBoost.effects.infinity),e=e.times(getAdjustedGlyphEffect("infinityinfmult"));const i=Time.bestInfinity.totalMilliseconds<=50?`${TimeSpan.fromMilliseconds(100).toStringShort()} (capped)`:`${Time.bestInfinity.times(2).toStringShort()}`;return`${quantify("Infinity",e)} every ${i}`}},autobuyMaxDimboosts:{id:"autobuyMaxDimboosts",cost:5e9,description:"Unlock the buy max Dimension Boost Autobuyer mode"},autobuyerSpeed:{id:"autoBuyerUpgrade",cost:1e15,description:"Autobuyers unlocked or improved by Normal Challenges work twice as fast"},tickspeedCostMult:P1({id:0,initialCost:1e6,costIncrease:5,maxUpgrades:8,description:"Reduce post-infinity Tickspeed Upgrade cost multiplier scaling",afterEC:()=>EternityChallenge(11).completions>0?`After EC11: ${formatX(Player.tickSpeedMultDecrease,2,2)}`:"",noLabel:!0,onPurchased:()=>GameCache.tickSpeedMultDecrease.invalidate()}),dimCostMult:P1({id:1,initialCost:1e7,costIncrease:5e3,maxUpgrades:7,description:"Reduce post-infinity Antimatter Dimension cost multiplier scaling",afterEC:()=>EternityChallenge(6).completions>0?`After EC6: ${formatX(Player.dimensionMultDecrease,2,2)}`:"",noLabel:!0,onPurchased:()=>GameCache.dimensionMultDecrease.invalidate()}),ipGen:P1({id:2,initialCost:1e7,costIncrease:10,maxUpgrades:10,effect:t=>Player.bestRunIPPM.times(t/20),description:()=>{let t=`Generate ${formatInt(5*player.infinityRebuyables[2])}%`;return BreakInfinityUpgrade.ipGen.isCapped||(t+=` ➜ ${formatInt(5*(1+player.infinityRebuyables[2]))}%`),`${t} of your best IP/min from your last 10 Infinities`},isDisabled:t=>t.eq(0),formatEffect:t=>`${format(t,2,1)} IP/min`,noLabel:!1})};function g_(){return Currency.infinitiesTotal.value.times(.2).plus(1)}function v_(){return 1+Math.log10(Math.max(1,Currency.infinitiesTotal.value.pLog10()))*Math.sqrt(Ra.pets.teresa.level)/150}const cW={totalTimeMult:{id:"timeMult",cost:1,description:"Antimatter Dimensions gain a multiplier based on time played",effect:()=>Math.pow(Time.totalTimePlayed.totalMinutes/2,.15),formatEffect:t=>formatX(t,2,2),charged:{description:"Antimatter Dimensions gain a power effect based on time played and Teresa level",effect:()=>1+Math.log10(Math.log10(Time.totalTimePlayed.totalMilliseconds))*Math.pow(Ra.pets.teresa.level,.5)/150,formatEffect:t=>formatPow(t,4,4)}},dim18mult:{id:"18Mult",cost:1,checkRequirement:()=>InfinityUpgrade.totalTimeMult.isBought,description:"1st and 8th Antimatter Dimensions gain a multiplier based on Infinities",effect:()=>g_(),formatEffect:t=>formatX(t,1,1),charged:{description:"1st and 8th Antimatter Dimensions gain a power effect based on Infinities and Teresa level",effect:()=>v_(),formatEffect:t=>formatPow(t,4,4)}},dim27mult:{id:"27Mult",cost:1,checkRequirement:()=>InfinityUpgrade.buy10Mult.isBought,description:"2nd and 7th Antimatter Dimensions gain a multiplier based on Infinities",effect:()=>g_(),formatEffect:t=>formatX(t,1,1),charged:{description:"2nd and 7th Antimatter Dimensions gain a power effect based on Infinities and Teresa level",effect:()=>v_(),formatEffect:t=>formatPow(t,4,4)}},dim36mult:{id:"36Mult",cost:1,checkRequirement:()=>InfinityUpgrade.dim18mult.isBought,description:"3rd and 6th Antimatter Dimensions gain a multiplier based on Infinities",effect:()=>g_(),formatEffect:t=>formatX(t,1,1),charged:{description:"3rd and 6th Antimatter Dimensions gain a power effect based on Infinities and Teresa level",effect:()=>v_(),formatEffect:t=>formatPow(t,4,4)}},dim45mult:{id:"45Mult",cost:1,checkRequirement:()=>InfinityUpgrade.dim27mult.isBought,description:"4th and 5th Antimatter Dimensions gain a multiplier based on Infinities",effect:()=>g_(),formatEffect:t=>formatX(t,1,1),charged:{description:"4th and 5th Antimatter Dimensions gain a power effect based on Infinities and Teresa level",effect:()=>v_(),formatEffect:t=>formatPow(t,4,4)}},resetBoost:{id:"resetBoost",cost:1,checkRequirement:()=>InfinityUpgrade.dim36mult.isBought,description:()=>`Decrease the number of Dimensions needed for Dimension Boosts and Antimatter Galaxies by ${formatInt(9)}`,effect:9,charged:{description:()=>"Decrease Dimension Boost requirement based on Teresa level",effect:()=>1/(1+Math.sqrt(Ra.pets.teresa.level)/10),formatEffect:t=>`${formatX(t,4,4)}`}},buy10Mult:{id:"dimMult",cost:1,description:()=>`Increase the multiplier for buying ${formatInt(10)} Antimatter Dimensions`,effect:()=>1.1,formatEffect:()=>`${formatX(2,0,1)} ➜ ${formatX(2.2,0,1)}`,charged:{description:()=>`The multiplier for buying ${formatInt(10)} Antimatter Dimensions gains a power effect based on Teresa level`,effect:()=>1+Ra.pets.teresa.level/200,formatEffect:t=>formatPow(t,3,3)}},galaxyBoost:{id:"galaxyBoost",cost:2,checkRequirement:()=>InfinityUpgrade.dim45mult.isBought,description:"All Galaxies are twice as strong",effect:2,charged:{description:"All Galaxies are stronger based on Teresa level",effect:()=>2+Math.sqrt(Ra.pets.teresa.level)/100,formatEffect:t=>`+${formatPercents(t-1)}`}},thisInfinityTimeMult:{id:"timeMult2",cost:3,description:"Antimatter Dimensions gain a multiplier based on time spent in current Infinity",effect:()=>Decimal.max(Math.pow(Time.thisInfinity.totalMinutes/4,.25),1),formatEffect:t=>formatX(t,2,2),charged:{description:"Antimatter Dimensions gain a power effect based on time spent in current Infinity and Teresa level",effect:()=>1+Math.log10(Math.log10(Time.thisInfinity.totalMilliseconds+100))*Math.sqrt(Ra.pets.teresa.level)/150,formatEffect:t=>formatPow(t,4,4)}},unspentIPMult:{id:"unspentBonus",cost:5,checkRequirement:()=>InfinityUpgrade.thisInfinityTimeMult.isBought,description:"Multiplier to 1st Antimatter Dimension based on unspent Infinity Points",effect:()=>Currency.infinityPoints.value.dividedBy(2).pow(1.5).plus(1),formatEffect:t=>formatX(t,2,2),charged:{description:"Multiplier to 1st Antimatter Dimension based on unspent Infinity Points, powered by Teresa level",effect:()=>Currency.infinityPoints.value.dividedBy(2).pow(Math.sqrt(Ra.pets.teresa.level)*1.5).plus(1),formatEffect:t=>formatX(t,2,2)}},dimboostMult:{id:"resetMult",cost:7,checkRequirement:()=>InfinityUpgrade.unspentIPMult.isBought,description:"Increase Dimension Boost multiplier",effect:()=>2.5,formatEffect:()=>`${formatX(2,0,1)} ➜ ${formatX(2.5,0,1)}`,charged:{description:"Dimension Boost multiplier gains a power effect based on Teresa level",effect:()=>1+Ra.pets.teresa.level/200,formatEffect:t=>formatPow(t,3,3)}},ipGen:{id:"passiveGen",cost:10,checkRequirement:()=>InfinityUpgrade.dimboostMult.isBought,description:()=>`Passively generate Infinity Points ${formatInt(10)} times slower than your fastest Infinity`,effect:()=>Teresa.isRunning||V.isRunning||Pelle.isDoomed?L.D0:GameCache.totalIPMult.value,formatEffect:t=>Teresa.isRunning||V.isRunning?"Disabled in this reality":Pelle.isDoomed?"Disabled":player.records.bestInfinity.time>=999999999999?"Too slow to generate":`${format(t,2)} every ${Time.bestInfinity.times(10).toStringShort()}`,charged:{description:()=>`Gain Reality Machines each real-time second proportional to amount gained on Reality,
        increasing with Teresa level`,effect:()=>Math.pow(Ra.pets.teresa.level,2)*Ra.unlocks.continuousTTBoost.effects.autoPrestige.effectOrDefault(1),formatEffect:t=>formatX(t,2,1)}},skipReset1:{id:"skipReset1",cost:20,description:()=>`Start every reset with ${formatInt(1)} Dimension Boost, automatically unlocking the 5th Antimatter Dimension`},skipReset2:{id:"skipReset2",cost:40,checkRequirement:()=>InfinityUpgrade.skipReset1.isBought,description:()=>`Start every reset with ${formatInt(2)} Dimension Boosts, automatically unlocking the 6th Antimatter Dimension`},skipReset3:{id:"skipReset3",cost:80,checkRequirement:()=>InfinityUpgrade.skipReset2.isBought,description:()=>`Start every reset with ${formatInt(3)} Dimension Boosts, automatically unlocking the 7th Antimatter Dimension`},skipResetGalaxy:{id:"skipResetGalaxy",cost:300,checkRequirement:()=>InfinityUpgrade.skipReset3.isBought,description:()=>`Start every reset with ${formatInt(4)} Dimension Boosts, automatically unlocking the 8th Antimatter Dimension;
      and an Antimatter Galaxy`},ipOffline:{id:"ipOffline",cost:1e3,checkRequirement:()=>Achievement(41).isUnlocked,description:()=>player.options.offlineProgress?`Only while offline, gain ${formatPercents(.5)} of your best IP/min without using Max All`:"This upgrade would give offline Infinity Point generation, but offline progress is currently disabled",effect:()=>player.options.offlineProgress?player.records.thisEternity.bestIPMsWithoutMaxAll.times(TimeSpan.fromMinutes(1).totalMilliseconds/2):L.D0,isDisabled:()=>!player.options.offlineProgress,formatEffect:t=>`${format(t,2,2)} IP/min`},ipMult:{id:"ipMult",cost:()=>InfinityUpgrade.ipMult.cost,checkRequirement:()=>Achievement(41).isUnlocked,costCap:L.E6E6,costIncreaseThreshold:L.E3E6,description:()=>`Multiply Infinity Points from all sources by ${formatX(2)}`,effect:()=>player.IPMultPurchases>=33e5?L.E1E6:L.D2.pow(player.IPMultPurchases),cap:()=>Effarig.eternityCap??L.E1E6,formatEffect:t=>formatX(t,2,2)}},uW={upgrades:cW,breakUpgrades:lW},dW=[{id:"ad1",text:"Parker-Hannifin - Your global leader in motion and control technologies for over 100 years."},{id:"ad2",text:"General Electric - Keeping your airplanes, in the air."},{id:"ad3",text:"AECOM - The infrastructure company, for when it matters most."},{id:"ad4",text:"Leidos Holdings - When you need to secure your homeland, you come to us."},{id:"ad5",text:"Owens & Minor - We're here for you when it matters"},{id:"ad6",text:"Applied Materials - The giant thats holding your devices together"},{id:"ad7",text:"Westlake Chemical - When you need special chemicals that you can’t find anywhere else, you come to us"},{id:"ad8",text:"AT&T - The telecommunications giant you can rely on."},{id:"ad9",text:"General Dynamics - Protecting your frontlines, for freedom."},{id:"ad10",text:"Publix Super Markets - Selling great products at even greater prices"},{id:"ad11",text:"Kohl's - Selling great products for nearly 100 years"},{id:"ad12",text:"Targa Resources - Keeping your lights running, so you can focus on the bigger things"},{id:"ad13",text:"Valero Energy - Fuel has never been cheaper, with us"},{id:"ad14",text:"Omnicom Group - Prioritising customer communications, always"},{id:"ad15",text:"NCR - Want to sell stuff physically? We've got you, with our POS systems, available now."},{id:"ad16",text:"iHeartMedia - Mass media for the masses"},{id:"ad17",text:"Tyson Foods - Making sure you always have fresh food"},{id:"ad18",text:"Ameriprise Financial - Financial services whenever you need us"},{id:"ad19",text:"Office Depot - Office equipment at extraordinarily low prices"},{id:"ad20",text:"Charter Communications - Making sure you are always up-to-date on the latest news"},{id:"ad21",text:"CenterPoint Energy - Electrical reliability you can trust"},{id:"ad22",text:"Stryker - The global leader in medical technology, saving lives when it matters most"},{id:"ad23",text:"Voya Financial - Allowing you to retire with a safe investment since 1991"},{id:"ad24",text:"Enterprise Products Partners - Gas and oil for when you need it"},{id:"ad25",text:"Merck - Where science and technology go hand in hand"},{id:"ad26",text:"Zoetis - Pet health matters to us all, thats why we’re here"},{id:"ad27",text:"Mohawk Industries - Flooring for those houses that just need that bit more shine"},{id:"ad28",text:"Sanmina - Electronics that you can rely on"},{id:"ad29",text:"IBM - Selling computers for over 110 years."},{id:"ad30",text:"FedEx - Reliability in shipping"},{id:"ad501",text:"Antimatter Dimensions - The new hit game, free on steam, web, and android!"},{id:"ad502",text:"Perks - Love em or hate em, you cant live without them. Now including DAB!"},{id:"ad503",text:"Remnants - Whenever you feel low, just remember that you can always wait on us."},{id:"ad504",text:"Reality - The new hit thing! Now only takes 1e4150 EP for the second RM."},{id:"ad505",text:"Replicanti - Growth without limits."},{id:"ad506",text:"The ticker - Proudly serving you commercials for as long as time itself"},{id:"ad507",text:"Dilation - When things get a bit fast, sometimes you need to just dilate and chill out"},{id:"ad508",text:"Lehmä! Now offering grass eating lessons! Learn what grass is safe to eat and what grass isn't."},{id:"ad509",text:"Avari - Infinite Pools for those who just cant get enough. Now 8% off!"},{id:"ad510",text:"Antimatter Bakery - Proudly serving you antimatter <s>cookies</s> for free!"},{id:"ad511",text:"Antimatter Dimensions: The Board Game - Now comes with extra news tickers, free of charge!"},{id:"ad512",text:"Aphone 10 - The world's first completely water soluble mobile device!"},{id:"ad513",text:"Morse Code+++ - the brand new Morse code, now with 20 new characters"},{id:"ad514",text:"Achievements - For when numbers get too boring."},{id:"ad515",text:"The Game - The first game that nobody can win!"},{id:"ad516",text:"Time Studies - Tired of boring old dimensions? Now you can speed up your game, with studies."},{id:"ad517",text:"Cats - Just a literal cat. You can just grab her for free from [DATA EXPUNGED]. We dont want her."},{id:"ad518",text:"Alchemy - For when you thought a math game couldnt be any less educational!"},{id:"ad519",text:"Celestials - For those who aren't yet religious"},{id:"ad520",text:"Sacrifice - Ever feel like the game is just too slow to make progress? Try Sacrificing, the new hip trend!"}],hW=[{id:PROGRESS_STAGE.PRE_INFINITY,name:"Antimatter Production",hasReached:()=>!0,suggestedResource:"Antimatter",subProgressValue:t=>.33*t.galaxies+.02*t.dimensionBoosts+new Decimal(t.antimatter).log10()/16e3},{id:PROGRESS_STAGE.EARLY_INFINITY,name:"Infinity",hasReached:t=>new Decimal(t.infinities).gt(0),suggestedResource:"Infinity Points",subProgressValue:t=>Math.clampMax(new Decimal(t.infinities).toNumber(),500)/1e3+Math.log10(15e4/player.auto.bigCrunch.interval)/6.35},{id:PROGRESS_STAGE.BREAK_INFINITY,name:"Broken Infinity",hasReached:t=>t.auto.bigCrunch.interval<=100,suggestedResource:"Infinity Points",subProgressValue:t=>Math.sqrt(new Decimal(t.infinityPoints).log10()/145)},{id:PROGRESS_STAGE.REPLICANTI,name:"Replicanti",hasReached:t=>t.replicanti.unl,suggestedResource:"Infinity Points",subProgressValue:t=>Math.sqrt((new Decimal(t.infinityPoints).log10()-140)/170)},{id:PROGRESS_STAGE.EARLY_ETERNITY,name:"Eternity",hasReached:t=>new Decimal(t.eternities).gt(0),suggestedResource:"Eternity Points and Eternity count",subProgressValue:t=>new Decimal(t.eternities).clampMax(1e5).toNumber()/1e5},{id:PROGRESS_STAGE.ETERNITY_CHALLENGES,name:"Eternity Challenges",hasReached:t=>t.eternityChalls.eterc1>0,suggestedResource:"Eternity Challenge Completions and Eternity Points",subProgressValue:t=>.008*Object.values(t.eternityChalls).reduce((e,i)=>e+i,0)+new Decimal(t.eternityPoints).log10()/2500},{id:PROGRESS_STAGE.EARLY_DILATION,name:"Time Dilation",hasReached:t=>new Decimal(t.dilation.dilatedTime).gt(0),suggestedResource:"Dilated Time",subProgressValue:t=>new Decimal(t.dilation.dilatedTime).log10()/15},{id:PROGRESS_STAGE.LATE_ETERNITY,name:"Late Eternity",hasReached:t=>new Decimal(t.dilation.dilatedTime).gt(1e15),suggestedResource:()=>new Decimal(player.eternityPoints).log10()>4e3?"Eternity Points and/or Dilated Time. Alternatively, you can unlock and perform your first Reality":"Eternity Points and/or Dilated Time",subProgressValue:t=>Math.clampMax(Math.sqrt((new Decimal(t.eternityPoints).log10()-1300)/6700),1)},{id:PROGRESS_STAGE.EARLY_REALITY,name:"Reality",hasReached:t=>t.realities>0,suggestedResource:()=>{if(player.realities>5)return"Reality Machines";const t="in your current Reality, and your Reality Machines in the long term";return player.eternities.eq(0)?`Infinity Points ${t}`:player.dilation.dilatedTime.eq(0)?`Eternity Points ${t}`:`Eternity Points and/or Dilated Time ${t}`},subProgressValue:t=>Math.clampMax(t.realities/100,1)},{id:PROGRESS_STAGE.TERESA,name:"Teresa (1st Celestial)",hasReached:t=>{var e,i;return((i=(e=t.celestials)==null?void 0:e.teresa)==null?void 0:i.quoteBits)>0},suggestedResource:"Reality Machines",subProgressValue:t=>Math.log10(1+t.celestials.teresa.pouredAmount)/21},{id:PROGRESS_STAGE.EFFARIG,name:"Effarig (2nd Celestial)",hasReached:t=>{var e,i;return((i=(e=t.celestials)==null?void 0:e.effarig)==null?void 0:i.quoteBits)>0},suggestedResource:"Reality Machines and Relic Shards",subProgressValue:t=>Math.log10(1+t.celestials.effarig.relicShards)/14},{id:PROGRESS_STAGE.ENSLAVED,name:"The Nameless Ones (3rd Celestial)",hasReached:t=>{var e,i;return((i=(e=t.celestials)==null?void 0:e.enslaved)==null?void 0:i.quoteBits)>0},suggestedResource:"Reality Machines and Glyph Level",subProgressValue:t=>Math.sqrt((new Decimal(t.reality.realityMachines).log10()-30)/30)},{id:PROGRESS_STAGE.V,name:"V (4th Celestial)",hasReached:t=>{var e,i;return((i=(e=t.celestials)==null?void 0:e.v)==null?void 0:i.quoteBits)>0},suggestedResource:"Number of V-Achievements",subProgressValue:t=>.0277*Object.values(t.celestials.v.runUnlocks).reduce((e,i)=>e+i,0)},{id:PROGRESS_STAGE.RA,name:"Ra (5th Celestial)",hasReached:t=>{var e,i;return((i=(e=t.celestials)==null?void 0:e.ra)==null?void 0:i.quoteBits)>0},suggestedResource:"Celestial Memories",subProgressValue:t=>Object.values(t.celestials.ra.pets).reduce((e,i)=>e+i.level,0)/100},{id:PROGRESS_STAGE.IMAGINARY_MACHINES,name:"Imaginary Machines",hasReached:t=>{var e;return((e=t.reality)==null?void 0:e.iMCap)>0},suggestedResource:"Imaginary Machines",subProgressValue:t=>Math.log10(1+t.reality.iMCap)/9},{id:PROGRESS_STAGE.LAITELA,name:"Lai'tela (6th Celestial)",hasReached:t=>{var e,i;return((i=(e=t.celestials)==null?void 0:e.laitela)==null?void 0:i.quoteBits)>0},suggestedResource:"Dark Matter and Singularities",subProgressValue:t=>new Decimal(t.celestials.laitela.darkMatter).log10()/308.25},{id:PROGRESS_STAGE.PELLE,name:"Pelle (7th Celestial)",hasReached:t=>{var e,i;return(i=(e=t.celestials)==null?void 0:e.pelle)==null?void 0:i.doomed},suggestedResource:"Remnants",subProgressValue:t=>Math.log10(1+t.celestials.pelle.remnants)/9}],fW=!0,CG=!1,SG=window.navigator.platform==="MacIntel",pW={dimPurchases:{key:"dimPurchases",cost:30,description:"Double all your Antimatter Dimension multipliers. Forever.",multiplier:t=>Math.pow(2,t),formatEffect:t=>`×${t>1e3?Notation.scientific.formatDecimal(new Decimal(t),2):t.toFixed(0)}`},allDimPurchases:{key:"allDimPurchases",cost:60,description:()=>{const t=["Antimatter"];return(InfinityDimension(1).isUnlocked||PlayerProgress.eternityUnlocked())&&t.push("Infinity"),PlayerProgress.eternityUnlocked()&&t.push("Time"),`Double ALL Dimension multipliers (${makeEnumeration(t)}; multiplicative until 32x). Forever.`},multiplier:t=>t>4?32+(t-5)*2:Math.pow(2,t),formatEffect:t=>`×${t.toFixed(0)}`},IPPurchases:{key:"IPPurchases",cost:40,description:"Double your Infinity Point gain from all sources. (additive)",multiplier:t=>t===0?1:2*t,formatEffect:t=>`×${t.toFixed(0)}`,isUnlocked:()=>PlayerProgress.infinityUnlocked(),lockText:"Infinity"},replicantiPurchases:{key:"replicantiPurchases",cost:60,description:"Increase your Replicanti gain by 50%. (additive)",multiplier:t=>t===0?1:1+.5*t,formatEffect:t=>`×${t.toFixed(1)}`,isUnlocked:()=>Replicanti.areUnlocked||PlayerProgress.eternityUnlocked(),lockText:"Replicanti"},EPPurchases:{key:"EPPurchases",cost:50,description:"Triple your Eternity Point gain from all sources. (additive)",multiplier:t=>t===0?1:3*t,formatEffect:t=>`×${t.toFixed(0)}`,isUnlocked:()=>PlayerProgress.eternityUnlocked(),lockText:"Eternity"},dilatedTimePurchases:{key:"dilatedTimePurchases",cost:40,description:"Increase your Dilated Time gain by 50%. (additive)",multiplier:t=>t===0?1:1+.5*t,formatEffect:t=>`×${t.toFixed(1)}`,isUnlocked:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked(),lockText:"Dilation"},RMPurchases:{key:"RMPurchases",cost:60,description:"Increase your Reality Machine gain by 100%. (additive)",multiplier:t=>t+1,formatEffect:t=>`×${t.toFixed(0)}`,isUnlocked:()=>PlayerProgress.realityUnlocked(),lockText:"Reality"},smallTimeSkip:{key:"smallTimeSkip",cost:10,description:"Get 6 hours worth of offline production. (Autobuyers don't work at full speed)",instantPurchase:!0,onPurchase:()=>{shop.purchaseTimeSkip()}},bigTimeSkip:{key:"bigTimeSkip",cost:20,description:"Get 24 hours worth of offline production. (Autobuyers don't work at full speed)",instantPurchase:!0,onPurchase:()=>{shop.purchaseLongerTimeSkip()}},singleCosmeticSet:{key:"singleCosmeticSet",cost:20,description:"Unlock a Glyph cosmetic set of your choice",instantPurchase:!0,onPurchase:()=>{GameUI.notify.info(`You have purchased the "${GlyphAppearanceHandler.chosenFromModal.name}" Set for Glyph cosmetics!`,1e4),GlyphAppearanceHandler.chosenFromModal=null,GlyphAppearanceHandler.applyNotification()},isUnlocked:()=>PlayerProgress.realityUnlocked(),lockText:"Reality"},allCosmeticSets:{key:"allCosmeticSets",cost:()=>{const e=Object.keys(GameDatabase.reality.glyphCosmeticSets).length,i=GlyphAppearanceHandler.expectedSetCount;return Math.floor(420*(e-i)/e)},description:"Unlock all remaining Glyph cosmetic sets at once",instantPurchase:!0,onPurchase:()=>{GameUI.notify.info("You have unlocked all sets for Glyph cosmetics!",15e3),GlyphAppearanceHandler.applyNotification()},isUnlocked:()=>PlayerProgress.realityUnlocked(),lockText:"Reality"}},mW=[{id:1,optionName:"Blob",isAvailable:()=>Themes.available().map(t=>t.name).includes("S11"),value:()=>new Decimal(1),formatValue:()=>"",formatClass:"o-sidebar-currency--antimatter"},{id:2,optionName:"Antimatter",isAvailable:()=>!0,value:()=>Currency.antimatter.value,formatValue:t=>format(t,2,1),formatClass:"o-sidebar-currency--antimatter"},{id:3,optionName:"Infinity Points",isAvailable:()=>PlayerProgress.infinityUnlocked(),value:()=>Currency.infinityPoints.value.floor(),formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--infinity"},{id:4,optionName:"Replicanti",isAvailable:()=>Replicanti.areUnlocked||PlayerProgress.eternityUnlocked(),value:()=>Replicanti.amount,formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--replicanti"},{id:5,optionName:"Eternity Points",isAvailable:()=>PlayerProgress.eternityUnlocked(),value:()=>Currency.eternityPoints.value.floor(),formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--eternity"},{id:6,optionName:"Total TT",isAvailable:()=>PlayerProgress.eternityUnlocked(),value:()=>player.timestudy.theorem.plus(TimeTheorems.calculateTimeStudiesCost()),formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--eternity"},{id:7,optionName:"Tachyon Particles",isAvailable:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked(),value:()=>Currency.tachyonParticles.value,formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--dilation"},{id:8,optionName:"Dilated Time",isAvailable:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked(),value:()=>Currency.dilatedTime.value,formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--dilation"},{id:9,optionName:"Reality Machines",isAvailable:()=>PlayerProgress.realityUnlocked(),value:()=>Currency.realityMachines.value,formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--reality"},{id:10,optionName:"Relic Shards",isAvailable:()=>TeresaUnlocks.effarig.isUnlocked,value:()=>new Decimal(Currency.relicShards.value),formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--effarig"},{id:11,optionName:"Imaginary Machines",isAvailable:()=>MachineHandler.isIMUnlocked,value:()=>new Decimal(Currency.imaginaryMachines.value),formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--reality"},{id:12,optionName:"All Machines",resourceName:"Machines",isAvailable:()=>MachineHandler.isIMUnlocked,value:()=>Currency.realityMachines.value,formatValue:()=>formatMachines(Currency.realityMachines.value,Currency.imaginaryMachines.value),formatClass:"o-sidebar-currency--reality"},{id:13,optionName:"Dark Matter",isAvailable:()=>Laitela.isUnlocked,value:()=>Currency.darkMatter,formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--laitela"},{id:14,optionName:"Dark Energy",isAvailable:()=>Laitela.isUnlocked,value:()=>new Decimal(Currency.darkEnergy.value),formatValue:t=>format(t,2,2),formatClass:"o-sidebar-currency--laitela"},{id:15,optionName:"Singularities",isAvailable:()=>Laitela.isUnlocked,value:()=>new Decimal(Currency.singularities.value),formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--laitela"},{id:16,optionName:"Reality Shards",isAvailable:()=>Pelle.isDoomed,value:()=>Currency.realityShards,formatValue:t=>format(t,2),formatClass:"o-sidebar-currency--pelle"}],yW={firstBoost:{id:1,key:"firstBoost",name:"First Dimboost",description:"Get your first Dimboost",checkRequirement:()=>!0,checkEvent:GAME_EVENT.DIMBOOST_AFTER},firstGalaxy:{id:2,key:"firstGalaxy",name:"First Galaxy",description:"Get your first Galaxy",checkRequirement:()=>!0,checkEvent:GAME_EVENT.GALAXY_RESET_AFTER},firstInfinity:{id:3,key:"firstInfinity",name:"First Infinity",description:"Complete your first Infinity",checkRequirement:()=>!0,checkEvent:GAME_EVENT.BIG_CRUNCH_AFTER},completeC9:{id:4,key:"completeC9",name:"Tickspeed Challenge",description:"Complete the Tickspeed Autobuyer Challenge",checkRequirement:()=>NormalChallenge(9).isCompleted,checkEvent:GAME_EVENT.BIG_CRUNCH_AFTER},completeAllNC:{id:5,key:"completeAllNC",name:"All Normal Challenges",description:"Complete all Normal Challenges",checkRequirement:()=>NormalChallenges.all.countWhere(t=>!t.isCompleted)===0,checkEvent:GAME_EVENT.BIG_CRUNCH_AFTER},breakInfinity:{id:6,key:"breakInfinity",name:"Break Infinity",description:"Break Infinity for the first time",checkRequirement:()=>player.break,checkEvent:GAME_EVENT.BREAK_INFINITY},upgrade5e11IP:{id:7,key:"upgrade5e11IP",get name(){return`${format(5e11)} IP Upgrade`},description:()=>`Purchase the ${formatPercents(.5)} stronger Galaxies upgrade`,checkRequirement:()=>!0},completeIC5:{id:8,key:"completeIC5",name:"Infinity Challenge 5",description:"Complete Infinity Challenge 5",checkRequirement:()=>InfinityChallenge(5).isCompleted,checkEvent:GAME_EVENT.BIG_CRUNCH_AFTER},unlockReplicanti:{id:9,key:"unlockReplicanti",name:"Replicanti",description:"Unlock Replicanti",checkRequirement:()=>player.replicanti.unl,checkEvent:GAME_EVENT.REPLICANTI_TICK_AFTER},firstEternity:{id:10,key:"firstEternity",name:"First Eternity",description:"Complete your first Eternity",checkRequirement:()=>!0,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER},allEternityMilestones:{id:11,key:"allEternityMilestones",name:"All Eternity Milestones",description:"Unlock all Eternity Milestones",checkRequirement:()=>EternityMilestone.all.every(t=>t.isReached),checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER},completeFirstEC:{id:12,key:"completeFirstEC",name:"First Eternity Challenge",description:"Complete any tier of an Eternity Challenge",checkRequirement:()=>EternityChallenges.completions>0,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER},completeEC10:{id:13,key:"completeEC10",name:"Eternity Challenge 10",description:"Complete Eternity Challenge 10 for the first time",checkRequirement:()=>EternityChallenge(10).completions>0,checkEvent:GAME_EVENT.ETERNITY_RESET_AFTER},firstDilation:{id:14,key:"firstDilation",name:"First Dilated Eternity",description:"Complete a Dilated Eternity for the first time",checkRequirement:()=>player.dilation.active,checkEvent:GAME_EVENT.ETERNITY_RESET_BEFORE},upgradeTTgen:{id:15,key:"upgradeTTgen",name:"Time Theorem Generation",description:"Purchase the Time Theorem Generation Dilation Upgrade",checkRequirement:()=>!0},firstReality:{id:16,key:"firstReality",name:"First Reality",description:"Complete your first Reality",checkRequirement:()=>!0,checkEvent:GAME_EVENT.REALITY_RESET_AFTER},upgradeBlackHole:{id:17,key:"upgradeBlackHole",name:"Black Hole",description:"Unlock the Black Hole",checkRequirement:()=>!0,checkEvent:GAME_EVENT.BLACK_HOLE_UNLOCKED},allRealityUpgrades:{id:18,key:"allRealityUpgrades",name:"All Reality Upgrades",description:"Purchase all Reality Upgrades",checkRequirement:()=>RealityUpgrades.allBought,checkEvent:GAME_EVENT.REALITY_UPGRADE_BOUGHT},completeTeresaReality:{id:19,key:"completeTeresaReality",name:"Teresa's Reality",description:"Complete Teresa's Reality",checkRequirement:()=>Teresa.isRunning,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE},completeEffarigReality:{id:20,key:"completeEffarigReality",name:"Effarig's Reality",description:"Complete all tiers of Effarig's Reality",checkRequirement:()=>Effarig.currentStage===EFFARIG_STAGES.COMPLETED,checkEvent:GAME_EVENT.REALITY_RESET_AFTER},completeEnslavedReality:{id:21,key:"completeEnslavedReality",name:"The Nameless Ones' Reality",description:"Complete The Nameless Ones' Reality",checkRequirement:()=>Enslaved.isRunning,checkEvent:GAME_EVENT.REALITY_RESET_BEFORE},complete36VAchievement:{id:22,key:"complete36VAchievement",name:"All basic V-Achievements",description:()=>`Complete ${formatInt(36)} V-Achievements`,checkRequirement:()=>!0},completeRaMemories:{id:23,key:"completeRaMemories",name:"Regain Ra's Memories",description:"Regain all of Ra's Celestial Memories",checkRequirement:()=>Ra.totalPetLevel>=Ra.maxTotalPetLevel,checkEvent:GAME_EVENT.GAME_TICK_AFTER},completeFullDestabilize:{id:24,key:"completeFullDestabilize",name:"Full Destabilization",description:"Disable all Dimensions within Lai'tela's Reality",checkRequirement:()=>Laitela.isFullyDestabilized},completeFullGame:{id:25,key:"completeFullGame",name:"Game Completed!",description:"Complete the entire game",checkRequirement:()=>Achievement(188).isUnlocked,checkEvent:GAME_EVENT.ACHIEVEMENT_UNLOCKED}},gW={firstInfinity:{id:0,tabsToHighLight:[{parent:"infinity",tab:"upgrades"},{parent:"challenges",tab:"normal"},{parent:"statistics",tab:"multipliers"}],condition:()=>!PlayerProgress.realityUnlocked()&&!PlayerProgress.eternityUnlocked()&&!PlayerProgress.infinityUnlocked(),events:[GAME_EVENT.BIG_CRUNCH_BEFORE]},breakInfinity:{id:1,tabsToHighLight:[{parent:"infinity",tab:"break"}],condition:()=>!PlayerProgress.realityUnlocked()&&!PlayerProgress.eternityUnlocked()&&Autobuyer.bigCrunch.hasMaxedInterval},IDUnlock:{id:2,tabsToHighLight:[{parent:"dimensions",tab:"infinity"}],condition:()=>!PlayerProgress.realityUnlocked()&&!PlayerProgress.eternityUnlocked()&&!InfinityDimension(2).isUnlocked},ICUnlock:{id:3,tabsToHighLight:[{parent:"challenges",tab:"infinity"}],condition:()=>!PlayerProgress.realityUnlocked()&&!PlayerProgress.eternityUnlocked()},replicanti:{id:4,tabsToHighLight:[{parent:"infinity",tab:"replicanti"}],condition:()=>!PlayerProgress.realityUnlocked()&&!PlayerProgress.eternityUnlocked()&&Currency.infinityPoints.gte(L.E140),events:[GAME_EVENT.BIG_CRUNCH_AFTER]},firstEternity:{id:5,tabsToHighLight:[{parent:"eternity",tab:"studies"},{parent:"eternity",tab:"milestones"},{parent:"eternity",tab:"upgrades"},{parent:"dimensions",tab:"time"}],condition:()=>!PlayerProgress.realityUnlocked()&&!PlayerProgress.eternityUnlocked(),events:[GAME_EVENT.ETERNITY_RESET_BEFORE]},dilationAfterUnlock:{id:6,tabsToHighLight:[{parent:"eternity",tab:"dilation"}],condition:()=>!PlayerProgress.realityUnlocked()},realityUnlock:{id:7,tabsToHighLight:[{parent:"eternity",tab:"studies"}],condition:()=>!PlayerProgress.realityUnlocked()&&TimeStudy.reality.canBeBought,events:[GAME_EVENT.ETERNITY_RESET_AFTER,GAME_EVENT.SAVE_CONVERTED_FROM_PREVIOUS_VERSION,GAME_EVENT.OFFLINE_CURRENCY_GAINED,GAME_EVENT.ACHIEVEMENT_UNLOCKED]},blackHoleUnlock:{id:8,tabsToHighLight:[{parent:"reality",tab:"hole"}],condition:()=>!BlackHoles.areUnlocked&&Currency.realityMachines.gte(100),events:[GAME_EVENT.REALITY_RESET_AFTER]},automatorUnlock:{id:9,tabsToHighLight:[{parent:"automation",tab:"automator"}],condition:()=>Player.automatorUnlocked,events:[GAME_EVENT.REALITY_RESET_AFTER]},teresaUnlock:{id:10,tabsToHighLight:[{parent:"celestials",tab:"celestial-navigation"},{parent:"celestials",tab:"teresa"}],condition:()=>player.celestials.teresa.pouredAmount===0&&Teresa.isUnlocked,events:[GAME_EVENT.REALITY_UPGRADE_BOUGHT]},alchemyUnlock:{id:11,tabsToHighLight:[{parent:"reality",tab:"glyphs"},{parent:"reality",tab:"alchemy"}],condition:()=>player.celestials.ra.pets.effarig.level>=2,events:[GAME_EVENT.GAME_TICK_AFTER]},newAutobuyer:{id:12,tabsToHighLight:[{parent:"automation",tab:"autobuyers"}],condition:()=>!Pelle.isDoomed},imaginaryMachineUnlock:{id:13,tabsToHighLight:[{parent:"reality",tab:"imag_upgrades"}],condition:()=>MachineHandler.isIMUnlocked,events:[GAME_EVENT.GAME_TICK_AFTER]},laitelaUnlock:{id:14,tabsToHighLight:[{parent:"celestials",tab:"laitela"}],condition:()=>!0},pelleUnlock:{id:15,tabsToHighLight:[{parent:"celestials",tab:"pelle"}],condition:()=>!0},newGlyphCosmetic:{id:16,tabsToHighLight:[{parent:"reality",tab:"glyphs"}],condition:()=>!0}},vW=[{key:"dimensions",name:"Dimensions",hideAt:2.9,id:0,hidable:!0,subtabs:[{key:"antimatter",name:"Antimatter Dimensions",symbol:"Ω",component:"AntimatterDimensionsTab",id:0,hidable:!0},{key:"infinity",name:"Infinity Dimensions",hideAt:2.7,symbol:"∞",component:"InfinityDimensionsTab",condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.eternityUnlocked()||InfinityDimension(1).isUnlocked,id:1,hidable:!0},{key:"time",name:"Time Dimensions",hideAt:2.6,symbol:"Δ",component:"TimeDimensionsTab",condition:()=>PlayerProgress.eternityUnlocked(),id:2,hidable:!0}]},{key:"options",name:"Options",hideAt:1.6,id:1,hidable:!1,subtabs:[{key:"saving",name:"Saving",symbol:"<i class='fas fa-save'></i>",component:"OptionsSavingTab",id:0,hidable:!1},{key:"visual",name:"Visual",symbol:"<i class='fas fa-palette'></i>",component:"OptionsVisualTab",id:1,hidable:!1},{key:"gameplay",name:"Gameplay",symbol:"<i class='fas fa-wrench'></i>",component:"OptionsGameplayTab",id:2,hidable:!1}]},{key:"statistics",name:"Statistics",hideAt:1.7,id:2,hidable:!0,subtabs:[{key:"statistics",name:"Statistics",symbol:"<i class='fas fa-clipboard-list'></i>",component:"StatisticsTab",id:0,hidable:!0},{key:"challenges",name:"Challenge records",symbol:"<i class='fas fa-stopwatch'></i>",component:"ChallengeRecordsTab",condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.eternityUnlocked()||PlayerProgress.challengeCompleted(),id:1,hidable:!0},{key:"prestige runs",name:"Past Prestige Runs",symbol:"<i class='fas fa-list-ol'></i>",component:"PastPrestigeRunsTab",condition:()=>PlayerProgress.infinityUnlocked(),id:2,hidable:!0},{key:"multipliers",name:"Multiplier Breakdown",symbol:"<i class='fas fa-calculator'></i>",component:"MultiplierBreakdownTab",condition:()=>PlayerProgress.infinityUnlocked(),id:3,hidable:!0},{key:"glyph sets",name:"Glyph Set Records",symbol:"<i class='fas fa-ellipsis-h'></i>",component:"GlyphSetRecordsTab",condition:()=>PlayerProgress.realityUnlocked(),id:4,hidable:!0},{key:"speedrun milestones",name:"Speedrun Milestones",symbol:"<i class='fas fa-flag-checkered'></i>",component:"SpeedrunMilestonesTab",condition:()=>player.speedrun.isActive,id:5,hidable:!0},{key:"speedrun records",name:"Speedrun Records",symbol:"<i class='fas fa-ranking-star'></i>",component:"PreviousSpeedrunTab",condition:()=>Object.keys(player.speedrun.previousRuns).length>0,id:6,hidable:!0}]},{key:"achievements",name:"Achievements",hideAt:1.9,id:3,hidable:!0,subtabs:[{key:"normal",name:"Achievements",symbol:"<i class='fas fa-trophy'></i>",component:"NormalAchievementsTab",id:0,hidable:!0},{key:"secret",name:"Secret Achievements",symbol:"<i class='fas fa-question'></i>",component:"SecretAchievementTab",id:1,hidable:!0}]},{key:"automation",name:"Automation",id:4,hideAt:2.1,condition:()=>player.records.totalAntimatter.gte(1e40),hidable:!0,subtabs:[{key:"autobuyers",name:"Autobuyers",symbol:"<i class='fas fa-cog'></i>",component:"AutobuyersTab",id:0,hidable:!0},{key:"automator",name:"Automator",symbol:"<i class='fas fa-code'></i>",component:"AutomatorTab",condition:()=>PlayerProgress.realityUnlocked(),id:1,hidable:!0}]},{key:"challenges",name:"Challenges",hideAt:2,condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.eternityUnlocked()||PlayerProgress.infinityUnlocked(),id:5,hidable:!0,subtabs:[{key:"normal",name:"Challenges",symbol:"Ω",component:"NormalChallengesTab",id:0,hidable:!0},{key:"infinity",name:"Infinity Challenges",symbol:"∞",component:"infinity-challenges-tab",condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.hasBroken()||Pelle.isDoomed,id:1,hidable:!0},{key:"eternity",name:"Eternity Challenges",symbol:"Δ",component:"eternity-challenges-tab",condition:()=>PlayerProgress.realityUnlocked()||player.challenge.eternity.unlocked!==0||EternityChallenges.all.some(t=>t.completions>0),id:2,hidable:!0}]},{key:"infinity",name:"Infinity",hideAt:2.2,UIClass:"o-tab-btn--infinity",before:"InfinityPointsHeader",id:6,condition:()=>PlayerProgress.infinityUnlocked(),hidable:!0,subtabs:[{key:"upgrades",name:"Infinity Upgrades",symbol:"<i class='fas fa-arrow-up'></i>",component:"InfinityUpgradesTab",condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.eternityUnlocked()||PlayerProgress.infinityUnlocked(),id:0,hidable:!0},{key:"break",name:"Break Infinity",symbol:"∝",component:"BreakInfinityTab",condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.eternityUnlocked()||PlayerProgress.infinityUnlocked(),id:1,hidable:!0},{key:"replicanti",name:"Replicanti",symbol:"Ξ",component:"ReplicantiTab",condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.eternityUnlocked()||PlayerProgress.infinityUnlocked(),id:2,hidable:!0}]},{key:"eternity",name:"Eternity",hideAt:1.8,UIClass:"o-tab-btn--eternity",condition:()=>PlayerProgress.realityUnlocked()||PlayerProgress.eternityUnlocked(),before:"EternityPointsHeader",id:7,hidable:!0,subtabs:[{key:"studies",name:"Time Studies",symbol:"<i class='fas fa-book'></i>",component:"TimeStudiesTab",id:0,hidable:!0},{key:"upgrades",name:"Eternity Upgrades",symbol:"<i class='fas fa-arrow-up'></i>",component:"EternityUpgradesTab",id:1,hidable:!0},{key:"milestones",name:"Eternity Milestones",symbol:"<i class='fas fa-star'></i>",component:"EternityMilestonesTab",id:2,hidable:!0},{key:"dilation",name:"Time Dilation",symbol:"Ψ",component:"TimeDilationTab",condition:()=>PlayerProgress.dilationUnlocked()||PlayerProgress.realityUnlocked(),id:3,hidable:!0}]},{key:"reality",name:"Reality",hideAt:2.3,UIClass:"o-tab-btn--reality",condition:()=>PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought,id:8,hidable:!0,subtabs:[{key:"glyphs",name:"Glyphs",symbol:"<i class='fas fa-clone'></i>",component:"GlyphsTab",id:0,hidable:!0},{key:"upgrades",name:"Reality Upgrades",symbol:"<i class='fas fa-arrow-up'></i>",component:"RealityUpgradesTab",id:1,hidable:!0},{key:"imag_upgrades",name:"Imaginary Upgrades",symbol:"<i class='fas fa-level-up-alt'></i>",component:"ImaginaryUpgradesTab",condition:()=>MachineHandler.isIMUnlocked,id:2,hidable:!0},{key:"perks",name:"Perks",symbol:"<i class='fas fa-project-diagram'></i>",component:"PerksTab",id:3,hidable:!0},{key:"hole",name:"Black Hole",symbol:"<i class='fas fa-circle'></i>",component:"BlackHoleTab",condition:()=>PlayerProgress.realityUnlocked(),id:4,hidable:!0},{key:"alchemy",name:"Glyph Alchemy",symbol:"<i class='fas fa-vial'></i>",component:"AlchemyTab",condition:()=>Ra.unlocks.unlockGlyphAlchemy.canBeApplied,id:5,hidable:!0}]},{key:"celestials",name:"Celestials",hideAt:2.4,UIClass:"o-tab-btn--celestial",condition:()=>Teresa.isUnlocked,id:9,hidable:!0,subtabs:[{key:"celestial-navigation",name:"Celestial Navigation",symbol:"<i class='fas fa-map-marked-alt'></i>",component:"CelestialNavigationTab",id:0,hidable:!0},{key:"teresa",name:"Teresa",symbol:"Ϟ",component:"TeresaTab",id:1,hidable:!0},{key:"effarig",name:"Effarig",symbol:"Ϙ",component:"EffarigTab",condition:()=>TeresaUnlocks.effarig.isUnlocked,id:2,hidable:!0},{key:"enslaved",name:"The Nameless Ones",symbol:"<div class='o-tab-btn--cel3'></div>",component:"EnslavedTab",condition:()=>EffarigUnlock.eternity.isUnlocked,id:3,hidable:!0},{key:"v",name:"V",symbol:"⌬",component:"VTab",condition:()=>Achievement(151).isUnlocked,id:4,hidable:!0},{key:"ra",name:"Ra",symbol:"<i class='fas fa-sun'></i>",component:"RaTab",condition:()=>VUnlocks.raUnlock.isUnlocked,id:5,hidable:!0},{key:"laitela",name:"Lai'tela",symbol:"ᛝ",component:"LaitelaTab",condition:()=>Laitela.isUnlocked,id:6,hidable:!0},{key:"pelle",name:"Pelle",symbol:"♅",component:"PelleTab",condition:()=>Pelle.isUnlocked,id:7,hidable:!0}]},{key:"shop",name:"Shop",newUIClass:"shop",hideAt:1.5,condition:()=>Cloud.isAvailable,id:10,hidable:!0,subtabs:[{key:"shop",name:"Shop",symbol:"$",component:"ShopTab",id:0,hidable:!0}]}],no={achievements:a9,awayProgressTypes:o9,catchupResources:l9,celestials:j9,challenges:Z9,changelog:LC,confirmationTypes:Q9,credits:X0,discordRichPresence:J9,eternity:oW,h2p:Bl,infinity:uW,multiplierTabTree:Mi,multiplierTabValues:_G,news:dW,progressStages:hW,reality:u0,sidebarResources:mW,shopPurchases:pW,speedrunMilestones:yW,tabNotifications:gW,tabs:vW};window.GameDatabase=no;window.mapGameData=function(e,i){const n=[];for(const r of e)n[r.id]=i(r);return n};window.mapGameDataToObject=function(e,i){const n=Object.entries(e),r={};for(let s=0;s<n.length;s++)r[n[s][0]]=i(n[s][1]);return{all:Object.values(r),...r}};const bW=Object.freeze(Object.defineProperty({__proto__:null,GlyphCombiner:ii,LAITELA_UPGRADE_DIRECTION:Ci,PERK_FAMILY:Et,V_REDUCTION_MODE:bo},Symbol.toStringTag,{value:"Module"}));var kG={exports:{}};/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function h0(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h0=function(e){return typeof e}:h0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function _W(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Io(){return Io=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Io.apply(this,arguments)}function Od(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{},n=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),n.forEach(function(r){_W(t,r,i[r])})}return t}function EW(t,e){if(t==null)return{};var i={},n=Object.keys(t),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(i[r]=t[r]);return i}function TW(t,e){if(t==null)return{};var i=EW(t,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wW(t){return CW(t)||SW(t)||kW()}function CW(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function SW(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function kW(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var AW="1.10.2";function Zc(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var au=Zc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zv=Zc(/Edge/i),Mx=Zc(/firefox/i),BC=Zc(/safari/i)&&!Zc(/chrome/i)&&!Zc(/android/i),AG=Zc(/iP(ad|od|hone)/i),RW=Zc(/chrome/i)&&Zc(/android/i),RG={capture:!1,passive:!1};function pi(t,e,i){t.addEventListener(e,i,!au&&RG)}function ni(t,e,i){t.removeEventListener(e,i,!au&&RG)}function K0(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function IW(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function el(t,e,i,n){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&K0(t,e):K0(t,e))||n&&t===i)return t;if(t===i)break}while(t=IW(t))}return null}var Px=/\s+/g;function Pn(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Px," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(Px," ")}}function pt(t,e,i){var n=t&&t.style;if(n){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=i+(typeof i=="string"?"":"px")}}function ef(t,e){var i="";if(typeof t=="string")i=t;else do{var n=pt(t,"transform");n&&n!=="none"&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(i)}function IG(t,e,i){if(t){var n=t.getElementsByTagName(e),r=0,s=n.length;if(i)for(;r<s;r++)i(n[r],r);return n}return[]}function nc(){var t=document.scrollingElement;return t||document.documentElement}function Hn(t,e,i,n,r){if(!(!t.getBoundingClientRect&&t!==window)){var s,a,o,c,d,p,m;if(t!==window&&t!==nc()?(s=t.getBoundingClientRect(),a=s.top,o=s.left,c=s.bottom,d=s.right,p=s.height,m=s.width):(a=0,o=0,c=window.innerHeight,d=window.innerWidth,p=window.innerHeight,m=window.innerWidth),(e||i)&&t!==window&&(r=r||t.parentNode,!au))do if(r&&r.getBoundingClientRect&&(pt(r,"transform")!=="none"||i&&pt(r,"position")!=="static")){var y=r.getBoundingClientRect();a-=y.top+parseInt(pt(r,"border-top-width")),o-=y.left+parseInt(pt(r,"border-left-width")),c=a+s.height,d=o+s.width;break}while(r=r.parentNode);if(n&&t!==window){var _=ef(r||t),E=_&&_.a,C=_&&_.d;_&&(a/=C,o/=E,m/=E,p/=C,c=a+p,d=o+m)}return{top:a,left:o,bottom:c,right:d,width:m,height:p}}}function Ox(t,e,i){for(var n=hd(t,!0),r=Hn(t)[e];n;){var s=Hn(n)[i],a=void 0;if(a=r>=s,!a)return n;if(n===nc())break;n=hd(n,!1)}return!1}function Z0(t,e,i){for(var n=0,r=0,s=t.children;r<s.length;){if(s[r].style.display!=="none"&&s[r]!==Rt.ghost&&s[r]!==Rt.dragged&&el(s[r],i.draggable,t,!1)){if(n===e)return s[r];n++}r++}return null}function Lk(t,e){for(var i=t.lastElementChild;i&&(i===Rt.ghost||pt(i,"display")==="none"||e&&!K0(i,e));)i=i.previousElementSibling;return i||null}function Fn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Rt.clone&&(!e||K0(t,e))&&i++;return i}function Nx(t){var e=0,i=0,n=nc();if(t)do{var r=ef(t),s=r.a,a=r.d;e+=t.scrollLeft*s,i+=t.scrollTop*a}while(t!==n&&(t=t.parentNode));return[e,i]}function DW(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i)}return-1}function hd(t,e){if(!t||!t.getBoundingClientRect)return nc();var i=t,n=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=pt(i);if(i.clientWidth<i.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return nc();if(n||e)return i;n=!0}}while(i=i.parentNode);return nc()}function xW(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function O1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Gg;function DG(t,e){return function(){if(!Gg){var i=arguments,n=this;i.length===1?t.call(n,i[0]):t.apply(n,i),Gg=setTimeout(function(){Gg=void 0},e)}}}function MW(){clearTimeout(Gg),Gg=void 0}function xG(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Bk(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Gx(t,e){pt(t,"position","absolute"),pt(t,"top",e.top),pt(t,"left",e.left),pt(t,"width",e.width),pt(t,"height",e.height)}function N1(t){pt(t,"position",""),pt(t,"top",""),pt(t,"left",""),pt(t,"width",""),pt(t,"height","")}var ws="Sortable"+new Date().getTime();function PW(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(pt(r,"display")==="none"||r===Rt.ghost)){t.push({target:r,rect:Hn(r)});var s=Od({},t[t.length-1].rect);if(r.thisAnimationDuration){var a=ef(r,!0);a&&(s.top-=a.f,s.left-=a.e)}r.fromRect=s}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(DW(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,a=0;t.forEach(function(o){var c=0,d=o.target,p=d.fromRect,m=Hn(d),y=d.prevFromRect,_=d.prevToRect,E=o.rect,C=ef(d,!0);C&&(m.top-=C.f,m.left-=C.e),d.toRect=m,d.thisAnimationDuration&&O1(y,m)&&!O1(p,m)&&(E.top-m.top)/(E.left-m.left)===(p.top-m.top)/(p.left-m.left)&&(c=NW(E,y,_,r.options)),O1(m,p)||(d.prevFromRect=p,d.prevToRect=m,c||(c=r.options.animation),r.animate(d,E,m,c)),c&&(s=!0,a=Math.max(a,c),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},c),d.thisAnimationDuration=c)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},a):typeof n=="function"&&n(),t=[]},animate:function(n,r,s,a){if(a){pt(n,"transition",""),pt(n,"transform","");var o=ef(this.el),c=o&&o.a,d=o&&o.d,p=(r.left-s.left)/(c||1),m=(r.top-s.top)/(d||1);n.animatingX=!!p,n.animatingY=!!m,pt(n,"transform","translate3d("+p+"px,"+m+"px,0)"),OW(n),pt(n,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),pt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){pt(n,"transition",""),pt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},a)}}}}function OW(t){return t.offsetWidth}function NW(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}var jy=[],G1={initializeByDefault:!0},Qv={mount:function(e){for(var i in G1)G1.hasOwnProperty(i)&&!(i in e)&&(e[i]=G1[i]);jy.push(e)},pluginEvent:function(e,i,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var s=e+"Global";jy.forEach(function(a){i[a.pluginName]&&(i[a.pluginName][s]&&i[a.pluginName][s](Od({sortable:i},n)),i.options[a.pluginName]&&i[a.pluginName][e]&&i[a.pluginName][e](Od({sortable:i},n)))})},initializePlugins:function(e,i,n,r){jy.forEach(function(o){var c=o.pluginName;if(!(!e.options[c]&&!o.initializeByDefault)){var d=new o(e,i,e.options);d.sortable=e,d.options=e.options,e[c]=d,Io(n,d.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var a=this.modifyOption(e,s,e.options[s]);typeof a<"u"&&(e.options[s]=a)}},getEventProperties:function(e,i){var n={};return jy.forEach(function(r){typeof r.eventProperties=="function"&&Io(n,r.eventProperties.call(i[r.pluginName],e))}),n},modifyOption:function(e,i,n){var r;return jy.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[i]=="function"&&(r=s.optionListeners[i].call(e[s.pluginName],n))}),r}};function mg(t){var e=t.sortable,i=t.rootEl,n=t.name,r=t.targetEl,s=t.cloneEl,a=t.toEl,o=t.fromEl,c=t.oldIndex,d=t.newIndex,p=t.oldDraggableIndex,m=t.newDraggableIndex,y=t.originalEvent,_=t.putSortable,E=t.extraEventProperties;if(e=e||i&&i[ws],!!e){var C,S=e.options,k="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!au&&!Zv?C=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(C=document.createEvent("Event"),C.initEvent(n,!0,!0)),C.to=a||i,C.from=o||i,C.item=r||i,C.clone=s,C.oldIndex=c,C.newIndex=d,C.oldDraggableIndex=p,C.newDraggableIndex=m,C.originalEvent=y,C.pullMode=_?_.lastPutMode:void 0;var R=Od({},E,Qv.getEventProperties(n,e));for(var O in R)C[O]=R[O];i&&i.dispatchEvent(C),S[k]&&S[k].call(e,C)}}var aa=function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,s=TW(n,["evt"]);Qv.pluginEvent.bind(Rt)(e,i,Od({dragEl:tt,parentEl:rr,ghostEl:Wt,rootEl:Mn,nextEl:Ih,lastDownEl:f0,cloneEl:Bn,cloneHidden:nd,dragStarted:yg,putSortable:es,activeSortable:Rt.active,originalEvent:r,oldIndex:Yp,oldDraggableIndex:Ug,newIndex:ja,newDraggableIndex:Xu,hideGhostForTarget:GG,unhideGhostForTarget:UG,cloneNowHidden:function(){nd=!0},cloneNowShown:function(){nd=!1},dispatchSortableEvent:function(o){Fs({sortable:i,name:o,originalEvent:r})}},s))};function Fs(t){mg(Od({putSortable:es,cloneEl:Bn,targetEl:tt,rootEl:Mn,oldIndex:Yp,oldDraggableIndex:Ug,newIndex:ja,newDraggableIndex:Xu},t))}var tt,rr,Wt,Mn,Ih,f0,Bn,nd,Yp,ja,Ug,Xu,b_,es,Np=!1,Q0=!1,J0=[],Ch,jo,U1,L1,Ux,Lx,yg,Ep,Lg,Bg=!1,__=!1,p0,Es,B1=[],FC=!1,eE=[],YE=typeof document<"u",E_=AG,Bx=Zv||au?"cssFloat":"float",GW=YE&&!RW&&!AG&&"draggable"in document.createElement("div"),MG=function(){if(YE){if(au)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),PG=function(e,i){var n=pt(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Z0(e,0,i),a=Z0(e,1,i),o=s&&pt(s),c=a&&pt(a),d=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Hn(s).width,p=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Hn(a).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&o.float!=="none"){var m=o.float==="left"?"left":"right";return a&&(c.clear==="both"||c.clear===m)?"vertical":"horizontal"}return s&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||d>=r&&n[Bx]==="none"||a&&n[Bx]==="none"&&d+p>r)?"vertical":"horizontal"},UW=function(e,i,n){var r=n?e.left:e.top,s=n?e.right:e.bottom,a=n?e.width:e.height,o=n?i.left:i.top,c=n?i.right:i.bottom,d=n?i.width:i.height;return r===o||s===c||r+a/2===o+d/2},LW=function(e,i){var n;return J0.some(function(r){if(!Lk(r)){var s=Hn(r),a=r[ws].options.emptyInsertThreshold,o=e>=s.left-a&&e<=s.right+a,c=i>=s.top-a&&i<=s.bottom+a;if(a&&o&&c)return n=r}}),n},OG=function(e){function i(s,a){return function(o,c,d,p){var m=o.options.group.name&&c.options.group.name&&o.options.group.name===c.options.group.name;if(s==null&&(a||m))return!0;if(s==null||s===!1)return!1;if(a&&s==="clone")return s;if(typeof s=="function")return i(s(o,c,d,p),a)(o,c,d,p);var y=(a?o:c).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var n={},r=e.group;(!r||h0(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=i(r.pull,!0),n.checkPut=i(r.put),n.revertClone=r.revertClone,e.group=n},GG=function(){!MG&&Wt&&pt(Wt,"display","none")},UG=function(){!MG&&Wt&&pt(Wt,"display","")};YE&&document.addEventListener("click",function(t){if(Q0)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Q0=!1,!1},!0);var Sh=function(e){if(tt){e=e.touches?e.touches[0]:e;var i=LW(e.clientX,e.clientY);if(i){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=i,n.preventDefault=void 0,n.stopPropagation=void 0,i[ws]._onDragOver(n)}}},BW=function(e){tt&&tt.parentNode[ws]._isOutsideThisEl(e.target)};function Rt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Io({},e),t[ws]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return PG(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,o){a.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Rt.supportPointer!==!1&&"PointerEvent"in window,emptyInsertThreshold:5};Qv.initializePlugins(this,t,i);for(var n in i)!(n in e)&&(e[n]=i[n]);OG(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:GW,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?pi(t,"pointerdown",this._onTapStart):(pi(t,"mousedown",this._onTapStart),pi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(pi(t,"dragover",this),pi(t,"dragenter",this)),J0.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Io(this,PW())}Rt.prototype={constructor:Rt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ep=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,tt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,n=this.el,r=this.options,s=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(o||e).target,d=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,p=r.filter;if(WW(n),!tt&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||r.disabled)&&!d.isContentEditable&&(c=el(c,r.draggable,n,!1),!(c&&c.animated)&&f0!==c)){if(Yp=Fn(c),Ug=Fn(c,r.draggable),typeof p=="function"){if(p.call(this,e,c,this)){Fs({sortable:i,rootEl:d,name:"filter",targetEl:c,toEl:n,fromEl:n}),aa("filter",i,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(p&&(p=p.split(",").some(function(m){if(m=el(d,m.trim(),n,!1),m)return Fs({sortable:i,rootEl:m,name:"filter",targetEl:c,fromEl:n,toEl:n}),aa("filter",i,{evt:e}),!0}),p)){s&&e.cancelable&&e.preventDefault();return}r.handle&&!el(d,r.handle,n,!1)||this._prepareDragStart(e,o,c)}}},_prepareDragStart:function(e,i,n){var r=this,s=r.el,a=r.options,o=s.ownerDocument,c;if(n&&!tt&&n.parentNode===s){var d=Hn(n);if(Mn=s,tt=n,rr=tt.parentNode,Ih=tt.nextSibling,f0=n,b_=a.group,Rt.dragged=tt,Ch={target:tt,clientX:(i||e).clientX,clientY:(i||e).clientY},Ux=Ch.clientX-d.left,Lx=Ch.clientY-d.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,tt.style["will-change"]="all",c=function(){if(aa("delayEnded",r,{evt:e}),Rt.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Mx&&r.nativeDraggable&&(tt.draggable=!0),r._triggerDragStart(e,i),Fs({sortable:r,name:"choose",originalEvent:e}),Pn(tt,a.chosenClass,!0)},a.ignore.split(",").forEach(function(p){IG(tt,p.trim(),$1)}),pi(o,"dragover",Sh),pi(o,"mousemove",Sh),pi(o,"touchmove",Sh),pi(o,"mouseup",r._onDrop),pi(o,"touchend",r._onDrop),pi(o,"touchcancel",r._onDrop),Mx&&this.nativeDraggable&&(this.options.touchStartThreshold=4,tt.draggable=!0),aa("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Zv||au))){if(Rt.eventCanceled){this._onDrop();return}pi(o,"mouseup",r._disableDelayedDrag),pi(o,"touchend",r._disableDelayedDrag),pi(o,"touchcancel",r._disableDelayedDrag),pi(o,"mousemove",r._delayedDragTouchMoveHandler),pi(o,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&pi(o,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(c,a.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){tt&&$1(tt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ni(e,"mouseup",this._disableDelayedDrag),ni(e,"touchend",this._disableDelayedDrag),ni(e,"touchcancel",this._disableDelayedDrag),ni(e,"mousemove",this._delayedDragTouchMoveHandler),ni(e,"touchmove",this._delayedDragTouchMoveHandler),ni(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?pi(document,"pointermove",this._onTouchMove):i?pi(document,"touchmove",this._onTouchMove):pi(document,"mousemove",this._onTouchMove):(pi(tt,"dragend",this),pi(Mn,"dragstart",this._onDragStart));try{document.selection?m0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(Np=!1,Mn&&tt){aa("dragStarted",this,{evt:i}),this.nativeDraggable&&pi(document,"dragover",BW);var n=this.options;!e&&Pn(tt,n.dragClass,!1),Pn(tt,n.ghostClass,!0),Rt.active=this,e&&this._appendGhost(),Fs({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(jo){this._lastX=jo.clientX,this._lastY=jo.clientY,GG();for(var e=document.elementFromPoint(jo.clientX,jo.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(jo.clientX,jo.clientY),e!==i);)i=e;if(tt.parentNode[ws]._isOutsideThisEl(e),i)do{if(i[ws]){var n=void 0;if(n=i[ws]._onDragOver({clientX:jo.clientX,clientY:jo.clientY,target:e,rootEl:i}),n&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);UG()}},_onTouchMove:function(e){if(Ch){var i=this.options,n=i.fallbackTolerance,r=i.fallbackOffset,s=e.touches?e.touches[0]:e,a=Wt&&ef(Wt,!0),o=Wt&&a&&a.a,c=Wt&&a&&a.d,d=E_&&Es&&Nx(Es),p=(s.clientX-Ch.clientX+r.x)/(o||1)+(d?d[0]-B1[0]:0)/(o||1),m=(s.clientY-Ch.clientY+r.y)/(c||1)+(d?d[1]-B1[1]:0)/(c||1);if(!Rt.active&&!Np){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Wt){a?(a.e+=p-(U1||0),a.f+=m-(L1||0)):a={a:1,b:0,c:0,d:1,e:p,f:m};var y="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");pt(Wt,"webkitTransform",y),pt(Wt,"mozTransform",y),pt(Wt,"msTransform",y),pt(Wt,"transform",y),U1=p,L1=m,jo=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Wt){var e=this.options.fallbackOnBody?document.body:Mn,i=Hn(tt,!0,E_,!0,e),n=this.options;if(E_){for(Es=e;pt(Es,"position")==="static"&&pt(Es,"transform")==="none"&&Es!==document;)Es=Es.parentNode;Es!==document.body&&Es!==document.documentElement?(Es===document&&(Es=nc()),i.top+=Es.scrollTop,i.left+=Es.scrollLeft):Es=nc(),B1=Nx(Es)}Wt=tt.cloneNode(!0),Pn(Wt,n.ghostClass,!1),Pn(Wt,n.fallbackClass,!0),Pn(Wt,n.dragClass,!0),pt(Wt,"transition",""),pt(Wt,"transform",""),pt(Wt,"box-sizing","border-box"),pt(Wt,"margin",0),pt(Wt,"top",i.top),pt(Wt,"left",i.left),pt(Wt,"width",i.width),pt(Wt,"height",i.height),pt(Wt,"opacity","0.8"),pt(Wt,"position",E_?"absolute":"fixed"),pt(Wt,"zIndex","100000"),pt(Wt,"pointerEvents","none"),Rt.ghost=Wt,e.appendChild(Wt),pt(Wt,"transform-origin",Ux/parseInt(Wt.style.width)*100+"% "+Lx/parseInt(Wt.style.height)*100+"%")}},_onDragStart:function(e,i){var n=this,r=e.dataTransfer,s=n.options;if(aa("dragStart",this,{evt:e}),Rt.eventCanceled){this._onDrop();return}aa("setupClone",this),Rt.eventCanceled||(Bn=Bk(tt),Bn.draggable=!1,Bn.style["will-change"]="",this._hideClone(),Pn(Bn,this.options.chosenClass,!1),Rt.clone=Bn),n.cloneId=m0(function(){aa("clone",n),!Rt.eventCanceled&&(n.options.removeCloneOnHide||Mn.insertBefore(Bn,tt),n._hideClone(),Fs({sortable:n,name:"clone"}))}),!i&&Pn(tt,s.dragClass,!0),i?(Q0=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ni(document,"mouseup",n._onDrop),ni(document,"touchend",n._onDrop),ni(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(n,r,tt)),pi(document,"drop",n),pt(tt,"transform","translateZ(0)")),Np=!0,n._dragStartId=m0(n._dragStarted.bind(n,i,e)),pi(document,"selectstart",n),yg=!0,BC&&pt(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,n=e.target,r,s,a,o=this.options,c=o.group,d=Rt.active,p=b_===c,m=o.sort,y=es||d,_,E=this,C=!1;if(FC)return;function S(ve,_e){aa(ve,E,Od({evt:e,isOwner:p,axis:_?"vertical":"horizontal",revert:a,dragRect:r,targetRect:s,canSort:m,fromSortable:y,target:n,completed:R,onMove:function(oe,Q){return F1(Mn,i,tt,r,oe,Hn(oe),e,Q)},changed:O},_e))}function k(){S("dragOverAnimationCapture"),E.captureAnimationState(),E!==y&&y.captureAnimationState()}function R(ve){return S("dragOverCompleted",{insertion:ve}),ve&&(p?d._hideClone():d._showClone(E),E!==y&&(Pn(tt,es?es.options.ghostClass:d.options.ghostClass,!1),Pn(tt,o.ghostClass,!0)),es!==E&&E!==Rt.active?es=E:E===Rt.active&&es&&(es=null),y===E&&(E._ignoreWhileAnimating=n),E.animateAll(function(){S("dragOverAnimationComplete"),E._ignoreWhileAnimating=null}),E!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(n===tt&&!tt.animated||n===i&&!n.animated)&&(Ep=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(tt.parentNode[ws]._isOutsideThisEl(e.target),!ve&&Sh(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),C=!0}function O(){ja=Fn(tt),Xu=Fn(tt,o.draggable),Fs({sortable:E,name:"change",toEl:i,newIndex:ja,newDraggableIndex:Xu,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=el(n,o.draggable,i,!0),S("dragOver"),Rt.eventCanceled)return C;if(tt.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||E._ignoreWhileAnimating===n)return R(!1);if(Q0=!1,d&&!o.disabled&&(p?m||(a=!Mn.contains(tt)):es===this||(this.lastPutMode=b_.checkPull(this,d,tt,e))&&c.checkPut(this,d,tt,e))){if(_=this._getDirection(e,n)==="vertical",r=Hn(tt),S("dragOverValid"),Rt.eventCanceled)return C;if(a)return rr=Mn,k(),this._hideClone(),S("revert"),Rt.eventCanceled||(Ih?Mn.insertBefore(tt,Ih):Mn.appendChild(tt)),R(!0);var I=Lk(i,o.draggable);if(!I||HW(e,_,this)&&!I.animated){if(I===tt)return R(!1);if(I&&i===e.target&&(n=I),n&&(s=Hn(n)),F1(Mn,i,tt,r,n,s,e,!!n)!==!1)return k(),i.appendChild(tt),rr=i,O(),R(!0)}else if(n.parentNode===i){s=Hn(n);var F=0,P,x=tt.parentNode!==i,M=!UW(tt.animated&&tt.toRect||r,n.animated&&n.toRect||s,_),q=_?"top":"left",$=Ox(n,"top","top")||Ox(tt,"top","top"),B=$?$.scrollTop:void 0;Ep!==n&&(P=s[q],Bg=!1,__=!M&&o.invertSwap||x),F=VW(e,n,s,_,M?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,__,Ep===n);var j;if(F!==0){var z=Fn(tt);do z-=F,j=rr.children[z];while(j&&(pt(j,"display")==="none"||j===Wt))}if(F===0||j===n)return R(!1);Ep=n,Lg=F;var X=n.nextElementSibling,se=!1;se=F===1;var ue=F1(Mn,i,tt,r,n,s,e,se);if(ue!==!1)return(ue===1||ue===-1)&&(se=ue===1),FC=!0,setTimeout($W,30),k(),se&&!X?i.appendChild(tt):n.parentNode.insertBefore(tt,se?X:n),$&&xG($,0,B-$.scrollTop),rr=tt.parentNode,P!==void 0&&!__&&(p0=Math.abs(P-Hn(n)[q])),O(),R(!0)}if(i.contains(tt))return R(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ni(document,"mousemove",this._onTouchMove),ni(document,"touchmove",this._onTouchMove),ni(document,"pointermove",this._onTouchMove),ni(document,"dragover",Sh),ni(document,"mousemove",Sh),ni(document,"touchmove",Sh)},_offUpEvents:function(){var e=this.el.ownerDocument;ni(e,"mouseup",this._onDrop),ni(e,"touchend",this._onDrop),ni(e,"pointerup",this._onDrop),ni(e,"touchcancel",this._onDrop),ni(document,"selectstart",this)},_onDrop:function(e){var i=this.el,n=this.options;if(ja=Fn(tt),Xu=Fn(tt,n.draggable),aa("drop",this,{evt:e}),rr=tt&&tt.parentNode,ja=Fn(tt),Xu=Fn(tt,n.draggable),Rt.eventCanceled){this._nulling();return}Np=!1,__=!1,Bg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$C(this.cloneId),$C(this._dragStartId),this.nativeDraggable&&(ni(document,"drop",this),ni(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),BC&&pt(document.body,"user-select",""),pt(tt,"transform",""),e&&(yg&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Wt&&Wt.parentNode&&Wt.parentNode.removeChild(Wt),(Mn===rr||es&&es.lastPutMode!=="clone")&&Bn&&Bn.parentNode&&Bn.parentNode.removeChild(Bn),tt&&(this.nativeDraggable&&ni(tt,"dragend",this),$1(tt),tt.style["will-change"]="",yg&&!Np&&Pn(tt,es?es.options.ghostClass:this.options.ghostClass,!1),Pn(tt,this.options.chosenClass,!1),Fs({sortable:this,name:"unchoose",toEl:rr,newIndex:null,newDraggableIndex:null,originalEvent:e}),Mn!==rr?(ja>=0&&(Fs({rootEl:rr,name:"add",toEl:rr,fromEl:Mn,originalEvent:e}),Fs({sortable:this,name:"remove",toEl:rr,originalEvent:e}),Fs({rootEl:rr,name:"sort",toEl:rr,fromEl:Mn,originalEvent:e}),Fs({sortable:this,name:"sort",toEl:rr,originalEvent:e})),es&&es.save()):ja!==Yp&&ja>=0&&(Fs({sortable:this,name:"update",toEl:rr,originalEvent:e}),Fs({sortable:this,name:"sort",toEl:rr,originalEvent:e})),Rt.active&&((ja==null||ja===-1)&&(ja=Yp,Xu=Ug),Fs({sortable:this,name:"end",toEl:rr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){aa("nulling",this),Mn=tt=rr=Wt=Ih=Bn=f0=nd=Ch=jo=yg=ja=Xu=Yp=Ug=Ep=Lg=es=b_=Rt.dragged=Rt.ghost=Rt.clone=Rt.active=null,eE.forEach(function(e){e.checked=!0}),eE.length=U1=L1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":tt&&(this._onDragOver(e),FW(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,n=this.el.children,r=0,s=n.length,a=this.options;r<s;r++)i=n[r],el(i,a.draggable,this.el,!1)&&e.push(i.getAttribute(a.dataIdAttr)||YW(i));return e},sort:function(e){var i={},n=this.el;this.toArray().forEach(function(r,s){var a=n.children[s];el(a,this.options.draggable,n,!1)&&(i[r]=a)},this),e.forEach(function(r){i[r]&&(n.removeChild(i[r]),n.appendChild(i[r]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return el(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var n=this.options;if(i===void 0)return n[e];var r=Qv.modifyOption(this,e,i);typeof r<"u"?n[e]=r:n[e]=i,e==="group"&&OG(n)},destroy:function(){aa("destroy",this);var e=this.el;e[ws]=null,ni(e,"mousedown",this._onTapStart),ni(e,"touchstart",this._onTapStart),ni(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ni(e,"dragover",this),ni(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),J0.splice(J0.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!nd){if(aa("hideClone",this),Rt.eventCanceled)return;pt(Bn,"display","none"),this.options.removeCloneOnHide&&Bn.parentNode&&Bn.parentNode.removeChild(Bn),nd=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(nd){if(aa("showClone",this),Rt.eventCanceled)return;Mn.contains(tt)&&!this.options.group.revertClone?Mn.insertBefore(Bn,tt):Ih?Mn.insertBefore(Bn,Ih):Mn.appendChild(Bn),this.options.group.revertClone&&this.animate(tt,Bn),pt(Bn,"display",""),nd=!1}}};function FW(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function F1(t,e,i,n,r,s,a,o){var c,d=t[ws],p=d.options.onMove,m;return window.CustomEvent&&!au&&!Zv?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=i,c.draggedRect=n,c.related=r||e,c.relatedRect=s||Hn(e),c.willInsertAfter=o,c.originalEvent=a,t.dispatchEvent(c),p&&(m=p.call(d,c,a)),m}function $1(t){t.draggable=!1}function $W(){FC=!1}function HW(t,e,i){var n=Hn(Lk(i.el,i.options.draggable)),r=10;return e?t.clientX>n.right+r||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+r}function VW(t,e,i,n,r,s,a,o){var c=n?t.clientY:t.clientX,d=n?i.height:i.width,p=n?i.top:i.left,m=n?i.bottom:i.right,y=!1;if(!a){if(o&&p0<d*r){if(!Bg&&(Lg===1?c>p+d*s/2:c<m-d*s/2)&&(Bg=!0),Bg)y=!0;else if(Lg===1?c<p+p0:c>m-p0)return-Lg}else if(c>p+d*(1-r)/2&&c<m-d*(1-r)/2)return qW(e)}return y=y||a,y&&(c<p+d*s/2||c>m-d*s/2)?c>p+d/2?1:-1:0}function qW(t){return Fn(tt)<Fn(t)?1:-1}function YW(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function WW(t){eE.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var n=e[i];n.checked&&eE.push(n)}}function m0(t){return setTimeout(t,0)}function $C(t){return clearTimeout(t)}YE&&pi(document,"touchmove",function(t){(Rt.active||Np)&&t.cancelable&&t.preventDefault()});Rt.utils={on:pi,off:ni,css:pt,find:IG,is:function(e,i){return!!el(e,i,e,!1)},extend:xW,throttle:DG,closest:el,toggleClass:Pn,clone:Bk,index:Fn,nextTick:m0,cancelNextTick:$C,detectDirection:PG,getChild:Z0};Rt.get=function(t){return t[ws]};Rt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(Rt.utils=Od({},Rt.utils,n.utils)),Qv.mount(n)})};Rt.create=function(t,e){return new Rt(t,e)};Rt.version=AW;var sr=[],gg,HC,VC=!1,H1,V1,tE,vg;function jW(){function t(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var n=i.originalEvent;this.sortable.nativeDraggable?pi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?pi(document,"pointermove",this._handleFallbackAutoScroll):n.touches?pi(document,"touchmove",this._handleFallbackAutoScroll):pi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var n=i.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ni(document,"dragover",this._handleAutoScroll):(ni(document,"pointermove",this._handleFallbackAutoScroll),ni(document,"touchmove",this._handleFallbackAutoScroll),ni(document,"mousemove",this._handleFallbackAutoScroll)),Fx(),y0(),MW()},nulling:function(){tE=HC=gg=VC=vg=H1=V1=null,sr.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,n){var r=this,s=(i.touches?i.touches[0]:i).clientX,a=(i.touches?i.touches[0]:i).clientY,o=document.elementFromPoint(s,a);if(tE=i,n||Zv||au||BC){q1(i,this.options,o,n);var c=hd(o,!0);VC&&(!vg||s!==H1||a!==V1)&&(vg&&Fx(),vg=setInterval(function(){var d=hd(document.elementFromPoint(s,a),!0);d!==c&&(c=d,y0()),q1(i,r.options,d,n)},10),H1=s,V1=a)}else{if(!this.options.bubbleScroll||hd(o,!0)===nc()){y0();return}q1(i,this.options,hd(o,!1),!1)}}},Io(t,{pluginName:"scroll",initializeByDefault:!0})}function y0(){sr.forEach(function(t){clearInterval(t.pid)}),sr=[]}function Fx(){clearInterval(vg)}var q1=DG(function(t,e,i,n){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,o=e.scrollSpeed,c=nc(),d=!1,p;HC!==i&&(HC=i,y0(),gg=e.scroll,p=e.scrollFn,gg===!0&&(gg=hd(i,!0)));var m=0,y=gg;do{var _=y,E=Hn(_),C=E.top,S=E.bottom,k=E.left,R=E.right,O=E.width,I=E.height,F=void 0,P=void 0,x=_.scrollWidth,M=_.scrollHeight,q=pt(_),$=_.scrollLeft,B=_.scrollTop;_===c?(F=O<x&&(q.overflowX==="auto"||q.overflowX==="scroll"||q.overflowX==="visible"),P=I<M&&(q.overflowY==="auto"||q.overflowY==="scroll"||q.overflowY==="visible")):(F=O<x&&(q.overflowX==="auto"||q.overflowX==="scroll"),P=I<M&&(q.overflowY==="auto"||q.overflowY==="scroll"));var j=F&&(Math.abs(R-r)<=a&&$+O<x)-(Math.abs(k-r)<=a&&!!$),z=P&&(Math.abs(S-s)<=a&&B+I<M)-(Math.abs(C-s)<=a&&!!B);if(!sr[m])for(var X=0;X<=m;X++)sr[X]||(sr[X]={});(sr[m].vx!=j||sr[m].vy!=z||sr[m].el!==_)&&(sr[m].el=_,sr[m].vx=j,sr[m].vy=z,clearInterval(sr[m].pid),(j!=0||z!=0)&&(d=!0,sr[m].pid=setInterval((function(){n&&this.layer===0&&Rt.active._onTouchMove(tE);var se=sr[this.layer].vy?sr[this.layer].vy*o:0,ue=sr[this.layer].vx?sr[this.layer].vx*o:0;typeof p=="function"&&p.call(Rt.dragged.parentNode[ws],ue,se,t,tE,sr[this.layer].el)!=="continue"||xG(sr[this.layer].el,ue,se)}).bind({layer:m}),24))),m++}while(e.bubbleScroll&&y!==c&&(y=hd(y,!1)));VC=d}},30),LG=function(e){var i=e.originalEvent,n=e.putSortable,r=e.dragEl,s=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(i){var d=n||s;o();var p=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,m=document.elementFromPoint(p.clientX,p.clientY);c(),d&&!d.el.contains(m)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Fk(){}Fk.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Z0(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(i,r):this.sortable.el.appendChild(i),this.sortable.animateAll(),n&&n.animateAll()},drop:LG};Io(Fk,{pluginName:"revertOnSpill"});function $k(){}$k.prototype={onSpill:function(e){var i=e.dragEl,n=e.putSortable,r=n||this.sortable;r.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),r.animateAll()},drop:LG};Io($k,{pluginName:"removeOnSpill"});var yo;function zW(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(i){var n=i.dragEl;yo=n},dragOverValid:function(i){var n=i.completed,r=i.target,s=i.onMove,a=i.activeSortable,o=i.changed,c=i.cancel;if(a.options.swap){var d=this.sortable.el,p=this.options;if(r&&r!==d){var m=yo;s(r)!==!1?(Pn(r,p.swapClass,!0),yo=r):yo=null,m&&m!==yo&&Pn(m,p.swapClass,!1)}o(),n(!0),c()}},drop:function(i){var n=i.activeSortable,r=i.putSortable,s=i.dragEl,a=r||this.sortable,o=this.options;yo&&Pn(yo,o.swapClass,!1),yo&&(o.swap||r&&r.options.swap)&&s!==yo&&(a.captureAnimationState(),a!==n&&n.captureAnimationState(),XW(s,yo),a.animateAll(),a!==n&&n.animateAll())},nulling:function(){yo=null}},Io(t,{pluginName:"swap",eventProperties:function(){return{swapItem:yo}}})}function XW(t,e){var i=t.parentNode,n=e.parentNode,r,s;!i||!n||i.isEqualNode(e)||n.isEqualNode(t)||(r=Fn(t),s=Fn(e),i.isEqualNode(n)&&r<s&&s++,i.insertBefore(e,i.children[r]),n.insertBefore(t,n.children[s]))}var Ht=[],qa=[],zy,zo,Xy=!1,Ba=!1,Tp=!1,sn,Ky,T_;function KW(){function t(e){for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));e.options.supportPointer?pi(document,"pointerup",this._deselectMultiDrag):(pi(document,"mouseup",this._deselectMultiDrag),pi(document,"touchend",this._deselectMultiDrag)),pi(document,"keydown",this._checkKeyDown),pi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(r,s){var a="";Ht.length&&zo===e?Ht.forEach(function(o,c){a+=(c?", ":"")+o.textContent}):a=s.textContent,r.setData("Text",a)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(i){var n=i.dragEl;sn=n},delayEnded:function(){this.isMultiDrag=~Ht.indexOf(sn)},setupClone:function(i){var n=i.sortable,r=i.cancel;if(this.isMultiDrag){for(var s=0;s<Ht.length;s++)qa.push(Bk(Ht[s])),qa[s].sortableIndex=Ht[s].sortableIndex,qa[s].draggable=!1,qa[s].style["will-change"]="",Pn(qa[s],this.options.selectedClass,!1),Ht[s]===sn&&Pn(qa[s],this.options.chosenClass,!1);n._hideClone(),r()}},clone:function(i){var n=i.sortable,r=i.rootEl,s=i.dispatchSortableEvent,a=i.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ht.length&&zo===n&&($x(!0,r),s("clone"),a()))},showClone:function(i){var n=i.cloneNowShown,r=i.rootEl,s=i.cancel;this.isMultiDrag&&($x(!1,r),qa.forEach(function(a){pt(a,"display","")}),n(),T_=!1,s())},hideClone:function(i){var n=this;i.sortable;var r=i.cloneNowHidden,s=i.cancel;this.isMultiDrag&&(qa.forEach(function(a){pt(a,"display","none"),n.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),r(),T_=!0,s())},dragStartGlobal:function(i){i.sortable,!this.isMultiDrag&&zo&&zo.multiDrag._deselectMultiDrag(),Ht.forEach(function(n){n.sortableIndex=Fn(n)}),Ht=Ht.sort(function(n,r){return n.sortableIndex-r.sortableIndex}),Tp=!0},dragStarted:function(i){var n=this,r=i.sortable;if(this.isMultiDrag){if(this.options.sort&&(r.captureAnimationState(),this.options.animation)){Ht.forEach(function(a){a!==sn&&pt(a,"position","absolute")});var s=Hn(sn,!1,!0,!0);Ht.forEach(function(a){a!==sn&&Gx(a,s)}),Ba=!0,Xy=!0}r.animateAll(function(){Ba=!1,Xy=!1,n.options.animation&&Ht.forEach(function(a){N1(a)}),n.options.sort&&w_()})}},dragOver:function(i){var n=i.target,r=i.completed,s=i.cancel;Ba&&~Ht.indexOf(n)&&(r(!1),s())},revert:function(i){var n=i.fromSortable,r=i.rootEl,s=i.sortable,a=i.dragRect;Ht.length>1&&(Ht.forEach(function(o){s.addAnimationState({target:o,rect:Ba?Hn(o):a}),N1(o),o.fromRect=a,n.removeAnimationState(o)}),Ba=!1,ZW(!this.options.removeCloneOnHide,r))},dragOverCompleted:function(i){var n=i.sortable,r=i.isOwner,s=i.insertion,a=i.activeSortable,o=i.parentEl,c=i.putSortable,d=this.options;if(s){if(r&&a._hideClone(),Xy=!1,d.animation&&Ht.length>1&&(Ba||!r&&!a.options.sort&&!c)){var p=Hn(sn,!1,!0,!0);Ht.forEach(function(y){y!==sn&&(Gx(y,p),o.appendChild(y))}),Ba=!0}if(!r)if(Ba||w_(),Ht.length>1){var m=T_;a._showClone(n),a.options.animation&&!T_&&m&&qa.forEach(function(y){a.addAnimationState({target:y,rect:Ky}),y.fromRect=Ky,y.thisAnimationDuration=null})}else a._showClone(n)}},dragOverAnimationCapture:function(i){var n=i.dragRect,r=i.isOwner,s=i.activeSortable;if(Ht.forEach(function(o){o.thisAnimationDuration=null}),s.options.animation&&!r&&s.multiDrag.isMultiDrag){Ky=Io({},n);var a=ef(sn,!0);Ky.top-=a.f,Ky.left-=a.e}},dragOverAnimationComplete:function(){Ba&&(Ba=!1,w_())},drop:function(i){var n=i.originalEvent,r=i.rootEl,s=i.parentEl,a=i.sortable,o=i.dispatchSortableEvent,c=i.oldIndex,d=i.putSortable,p=d||this.sortable;if(n){var m=this.options,y=s.children;if(!Tp)if(m.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Pn(sn,m.selectedClass,!~Ht.indexOf(sn)),~Ht.indexOf(sn))Ht.splice(Ht.indexOf(sn),1),zy=null,mg({sortable:a,rootEl:r,name:"deselect",targetEl:sn,originalEvt:n});else{if(Ht.push(sn),mg({sortable:a,rootEl:r,name:"select",targetEl:sn,originalEvt:n}),n.shiftKey&&zy&&a.el.contains(zy)){var _=Fn(zy),E=Fn(sn);if(~_&&~E&&_!==E){var C,S;for(E>_?(S=_,C=E):(S=E,C=_+1);S<C;S++)~Ht.indexOf(y[S])||(Pn(y[S],m.selectedClass,!0),Ht.push(y[S]),mg({sortable:a,rootEl:r,name:"select",targetEl:y[S],originalEvt:n}))}}else zy=sn;zo=p}if(Tp&&this.isMultiDrag){if((s[ws].options.sort||s!==r)&&Ht.length>1){var k=Hn(sn),R=Fn(sn,":not(."+this.options.selectedClass+")");if(!Xy&&m.animation&&(sn.thisAnimationDuration=null),p.captureAnimationState(),!Xy&&(m.animation&&(sn.fromRect=k,Ht.forEach(function(I){if(I.thisAnimationDuration=null,I!==sn){var F=Ba?Hn(I):k;I.fromRect=F,p.addAnimationState({target:I,rect:F})}})),w_(),Ht.forEach(function(I){y[R]?s.insertBefore(I,y[R]):s.appendChild(I),R++}),c===Fn(sn))){var O=!1;Ht.forEach(function(I){if(I.sortableIndex!==Fn(I)){O=!0;return}}),O&&o("update")}Ht.forEach(function(I){N1(I)}),p.animateAll()}zo=p}(r===s||d&&d.lastPutMode!=="clone")&&qa.forEach(function(I){I.parentNode&&I.parentNode.removeChild(I)})}},nullingGlobal:function(){this.isMultiDrag=Tp=!1,qa.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ni(document,"pointerup",this._deselectMultiDrag),ni(document,"mouseup",this._deselectMultiDrag),ni(document,"touchend",this._deselectMultiDrag),ni(document,"keydown",this._checkKeyDown),ni(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(i){if(!(typeof Tp<"u"&&Tp)&&zo===this.sortable&&!(i&&el(i.target,this.options.draggable,this.sortable.el,!1))&&!(i&&i.button!==0))for(;Ht.length;){var n=Ht[0];Pn(n,this.options.selectedClass,!1),Ht.shift(),mg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvt:i})}},_checkKeyDown:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Io(t,{pluginName:"multiDrag",utils:{select:function(i){var n=i.parentNode[ws];!n||!n.options.multiDrag||~Ht.indexOf(i)||(zo&&zo!==n&&(zo.multiDrag._deselectMultiDrag(),zo=n),Pn(i,n.options.selectedClass,!0),Ht.push(i))},deselect:function(i){var n=i.parentNode[ws],r=Ht.indexOf(i);!n||!n.options.multiDrag||!~r||(Pn(i,n.options.selectedClass,!1),Ht.splice(r,1))}},eventProperties:function(){var i=this,n=[],r=[];return Ht.forEach(function(s){n.push({multiDragElement:s,index:s.sortableIndex});var a;Ba&&s!==sn?a=-1:Ba?a=Fn(s,":not(."+i.options.selectedClass+")"):a=Fn(s),r.push({multiDragElement:s,index:a})}),{items:wW(Ht),clones:[].concat(qa),oldIndicies:n,newIndicies:r}},optionListeners:{multiDragKey:function(i){return i=i.toLowerCase(),i==="ctrl"?i="Control":i.length>1&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i}}})}function ZW(t,e){Ht.forEach(function(i,n){var r=e.children[i.sortableIndex+(t?Number(n):0)];r?e.insertBefore(i,r):e.appendChild(i)})}function $x(t,e){qa.forEach(function(i,n){var r=e.children[i.sortableIndex+(t?Number(n):0)];r?e.insertBefore(i,r):e.appendChild(i)})}function w_(){Ht.forEach(function(t){t!==sn&&t.parentNode&&t.parentNode.removeChild(t)})}Rt.mount(new jW);Rt.mount($k,Fk);const QW=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:KW,Sortable:Rt,Swap:zW,default:Rt},Symbol.toStringTag,{value:"Module"})),JW=M6(QW);(function(t,e){(function(n,r){t.exports=r(JW)})(typeof self<"u"?self:Si,function(i){return function(n){var r={};function s(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return n[a].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=n,s.c=r,s.d=function(a,o,c){s.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:c})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,o){if(o&1&&(a=s(a)),o&8||o&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),o&2&&typeof a!="string")for(var d in a)s.d(c,d,(function(p){return a[p]}).bind(null,d));return c},s.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(o,"a",o),o},s.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},s.p="",s(s.s="fb15")}({"01f9":function(n,r,s){var a=s("2d00"),o=s("5ca1"),c=s("2aba"),d=s("32e9"),p=s("84f2"),m=s("41a0"),y=s("7f20"),_=s("38fd"),E=s("2b4c")("iterator"),C=!([].keys&&"next"in[].keys()),S="@@iterator",k="keys",R="values",O=function(){return this};n.exports=function(I,F,P,x,M,q,$){m(P,F,x);var B=function(W){if(!C&&W in se)return se[W];switch(W){case k:return function(){return new P(this,W)};case R:return function(){return new P(this,W)}}return function(){return new P(this,W)}},j=F+" Iterator",z=M==R,X=!1,se=I.prototype,ue=se[E]||se[S]||M&&se[M],ve=ue||B(M),_e=M?z?B("entries"):ve:void 0,de=F=="Array"&&se.entries||ue,oe,Q,Z;if(de&&(Z=_(de.call(new I)),Z!==Object.prototype&&Z.next&&(y(Z,j,!0),!a&&typeof Z[E]!="function"&&d(Z,E,O))),z&&ue&&ue.name!==R&&(X=!0,ve=function(){return ue.call(this)}),(!a||$)&&(C||X||!se[E])&&d(se,E,ve),p[F]=ve,p[j]=O,M)if(oe={values:z?ve:B(R),keys:q?ve:B(k),entries:_e},$)for(Q in oe)Q in se||c(se,Q,oe[Q]);else o(o.P+o.F*(C||X),F,oe);return oe}},"02f4":function(n,r,s){var a=s("4588"),o=s("be13");n.exports=function(c){return function(d,p){var m=String(o(d)),y=a(p),_=m.length,E,C;return y<0||y>=_?c?"":void 0:(E=m.charCodeAt(y),E<55296||E>56319||y+1===_||(C=m.charCodeAt(y+1))<56320||C>57343?c?m.charAt(y):E:c?m.slice(y,y+2):(E-55296<<10)+(C-56320)+65536)}}},"0390":function(n,r,s){var a=s("02f4")(!0);n.exports=function(o,c,d){return c+(d?a(o,c).length:1)}},"0bfb":function(n,r,s){var a=s("cb7c");n.exports=function(){var o=a(this),c="";return o.global&&(c+="g"),o.ignoreCase&&(c+="i"),o.multiline&&(c+="m"),o.unicode&&(c+="u"),o.sticky&&(c+="y"),c}},"0d58":function(n,r,s){var a=s("ce10"),o=s("e11e");n.exports=Object.keys||function(d){return a(d,o)}},1495:function(n,r,s){var a=s("86cc"),o=s("cb7c"),c=s("0d58");n.exports=s("9e1e")?Object.defineProperties:function(p,m){o(p);for(var y=c(m),_=y.length,E=0,C;_>E;)a.f(p,C=y[E++],m[C]);return p}},"214f":function(n,r,s){s("b0c5");var a=s("2aba"),o=s("32e9"),c=s("79e5"),d=s("be13"),p=s("2b4c"),m=s("520a"),y=p("species"),_=!c(function(){var C=/./;return C.exec=function(){var S=[];return S.groups={a:"7"},S},"".replace(C,"$<a>")!=="7"}),E=function(){var C=/(?:)/,S=C.exec;C.exec=function(){return S.apply(this,arguments)};var k="ab".split(C);return k.length===2&&k[0]==="a"&&k[1]==="b"}();n.exports=function(C,S,k){var R=p(C),O=!c(function(){var q={};return q[R]=function(){return 7},""[C](q)!=7}),I=O?!c(function(){var q=!1,$=/a/;return $.exec=function(){return q=!0,null},C==="split"&&($.constructor={},$.constructor[y]=function(){return $}),$[R](""),!q}):void 0;if(!O||!I||C==="replace"&&!_||C==="split"&&!E){var F=/./[R],P=k(d,R,""[C],function($,B,j,z,X){return B.exec===m?O&&!X?{done:!0,value:F.call(B,j,z)}:{done:!0,value:$.call(j,B,z)}:{done:!1}}),x=P[0],M=P[1];a(String.prototype,C,x),o(RegExp.prototype,R,S==2?function(q,$){return M.call(q,this,$)}:function(q){return M.call(q,this)})}}},"230e":function(n,r,s){var a=s("d3f4"),o=s("7726").document,c=a(o)&&a(o.createElement);n.exports=function(d){return c?o.createElement(d):{}}},"23c6":function(n,r,s){var a=s("2d95"),o=s("2b4c")("toStringTag"),c=a(function(){return arguments}())=="Arguments",d=function(p,m){try{return p[m]}catch{}};n.exports=function(p){var m,y,_;return p===void 0?"Undefined":p===null?"Null":typeof(y=d(m=Object(p),o))=="string"?y:c?a(m):(_=a(m))=="Object"&&typeof m.callee=="function"?"Arguments":_}},2621:function(n,r){r.f=Object.getOwnPropertySymbols},"2aba":function(n,r,s){var a=s("7726"),o=s("32e9"),c=s("69a8"),d=s("ca5a")("src"),p=s("fa5b"),m="toString",y=(""+p).split(m);s("8378").inspectSource=function(_){return p.call(_)},(n.exports=function(_,E,C,S){var k=typeof C=="function";k&&(c(C,"name")||o(C,"name",E)),_[E]!==C&&(k&&(c(C,d)||o(C,d,_[E]?""+_[E]:y.join(String(E)))),_===a?_[E]=C:S?_[E]?_[E]=C:o(_,E,C):(delete _[E],o(_,E,C)))})(Function.prototype,m,function(){return typeof this=="function"&&this[d]||p.call(this)})},"2aeb":function(n,r,s){var a=s("cb7c"),o=s("1495"),c=s("e11e"),d=s("613b")("IE_PROTO"),p=function(){},m="prototype",y=function(){var _=s("230e")("iframe"),E=c.length,C="<",S=">",k;for(_.style.display="none",s("fab2").appendChild(_),_.src="javascript:",k=_.contentWindow.document,k.open(),k.write(C+"script"+S+"document.F=Object"+C+"/script"+S),k.close(),y=k.F;E--;)delete y[m][c[E]];return y()};n.exports=Object.create||function(E,C){var S;return E!==null?(p[m]=a(E),S=new p,p[m]=null,S[d]=E):S=y(),C===void 0?S:o(S,C)}},"2b4c":function(n,r,s){var a=s("5537")("wks"),o=s("ca5a"),c=s("7726").Symbol,d=typeof c=="function",p=n.exports=function(m){return a[m]||(a[m]=d&&c[m]||(d?c:o)("Symbol."+m))};p.store=a},"2d00":function(n,r){n.exports=!1},"2d95":function(n,r){var s={}.toString;n.exports=function(a){return s.call(a).slice(8,-1)}},"2fdb":function(n,r,s){var a=s("5ca1"),o=s("d2c8"),c="includes";a(a.P+a.F*s("5147")(c),"String",{includes:function(p){return!!~o(this,p,c).indexOf(p,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(n,r,s){var a=s("86cc"),o=s("4630");n.exports=s("9e1e")?function(c,d,p){return a.f(c,d,o(1,p))}:function(c,d,p){return c[d]=p,c}},"38fd":function(n,r,s){var a=s("69a8"),o=s("4bf8"),c=s("613b")("IE_PROTO"),d=Object.prototype;n.exports=Object.getPrototypeOf||function(p){return p=o(p),a(p,c)?p[c]:typeof p.constructor=="function"&&p instanceof p.constructor?p.constructor.prototype:p instanceof Object?d:null}},"41a0":function(n,r,s){var a=s("2aeb"),o=s("4630"),c=s("7f20"),d={};s("32e9")(d,s("2b4c")("iterator"),function(){return this}),n.exports=function(p,m,y){p.prototype=a(d,{next:o(1,y)}),c(p,m+" Iterator")}},"456d":function(n,r,s){var a=s("4bf8"),o=s("0d58");s("5eda")("keys",function(){return function(d){return o(a(d))}})},4588:function(n,r){var s=Math.ceil,a=Math.floor;n.exports=function(o){return isNaN(o=+o)?0:(o>0?a:s)(o)}},4630:function(n,r){n.exports=function(s,a){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:a}}},"4bf8":function(n,r,s){var a=s("be13");n.exports=function(o){return Object(a(o))}},5147:function(n,r,s){var a=s("2b4c")("match");n.exports=function(o){var c=/./;try{"/./"[o](c)}catch{try{return c[a]=!1,!"/./"[o](c)}catch{}}return!0}},"520a":function(n,r,s){var a=s("0bfb"),o=RegExp.prototype.exec,c=String.prototype.replace,d=o,p="lastIndex",m=function(){var E=/a/,C=/b*/g;return o.call(E,"a"),o.call(C,"a"),E[p]!==0||C[p]!==0}(),y=/()??/.exec("")[1]!==void 0,_=m||y;_&&(d=function(C){var S=this,k,R,O,I;return y&&(R=new RegExp("^"+S.source+"$(?!\\s)",a.call(S))),m&&(k=S[p]),O=o.call(S,C),m&&O&&(S[p]=S.global?O.index+O[0].length:k),y&&O&&O.length>1&&c.call(O[0],R,function(){for(I=1;I<arguments.length-2;I++)arguments[I]===void 0&&(O[I]=void 0)}),O}),n.exports=d},"52a7":function(n,r){r.f={}.propertyIsEnumerable},5537:function(n,r,s){var a=s("8378"),o=s("7726"),c="__core-js_shared__",d=o[c]||(o[c]={});(n.exports=function(p,m){return d[p]||(d[p]=m!==void 0?m:{})})("versions",[]).push({version:a.version,mode:s("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(n,r,s){var a=s("7726"),o=s("8378"),c=s("32e9"),d=s("2aba"),p=s("9b43"),m="prototype",y=function(_,E,C){var S=_&y.F,k=_&y.G,R=_&y.S,O=_&y.P,I=_&y.B,F=k?a:R?a[E]||(a[E]={}):(a[E]||{})[m],P=k?o:o[E]||(o[E]={}),x=P[m]||(P[m]={}),M,q,$,B;k&&(C=E);for(M in C)q=!S&&F&&F[M]!==void 0,$=(q?F:C)[M],B=I&&q?p($,a):O&&typeof $=="function"?p(Function.call,$):$,F&&d(F,M,$,_&y.U),P[M]!=$&&c(P,M,B),O&&x[M]!=$&&(x[M]=$)};a.core=o,y.F=1,y.G=2,y.S=4,y.P=8,y.B=16,y.W=32,y.U=64,y.R=128,n.exports=y},"5eda":function(n,r,s){var a=s("5ca1"),o=s("8378"),c=s("79e5");n.exports=function(d,p){var m=(o.Object||{})[d]||Object[d],y={};y[d]=p(m),a(a.S+a.F*c(function(){m(1)}),"Object",y)}},"5f1b":function(n,r,s){var a=s("23c6"),o=RegExp.prototype.exec;n.exports=function(c,d){var p=c.exec;if(typeof p=="function"){var m=p.call(c,d);if(typeof m!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return m}if(a(c)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(c,d)}},"613b":function(n,r,s){var a=s("5537")("keys"),o=s("ca5a");n.exports=function(c){return a[c]||(a[c]=o(c))}},"626a":function(n,r,s){var a=s("2d95");n.exports=Object("z").propertyIsEnumerable(0)?Object:function(o){return a(o)=="String"?o.split(""):Object(o)}},6762:function(n,r,s){var a=s("5ca1"),o=s("c366")(!0);a(a.P,"Array",{includes:function(d){return o(this,d,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")("includes")},6821:function(n,r,s){var a=s("626a"),o=s("be13");n.exports=function(c){return a(o(c))}},"69a8":function(n,r){var s={}.hasOwnProperty;n.exports=function(a,o){return s.call(a,o)}},"6a99":function(n,r,s){var a=s("d3f4");n.exports=function(o,c){if(!a(o))return o;var d,p;if(c&&typeof(d=o.toString)=="function"&&!a(p=d.call(o))||typeof(d=o.valueOf)=="function"&&!a(p=d.call(o))||!c&&typeof(d=o.toString)=="function"&&!a(p=d.call(o)))return p;throw TypeError("Can't convert object to primitive value")}},7333:function(n,r,s){var a=s("0d58"),o=s("2621"),c=s("52a7"),d=s("4bf8"),p=s("626a"),m=Object.assign;n.exports=!m||s("79e5")(function(){var y={},_={},E=Symbol(),C="abcdefghijklmnopqrst";return y[E]=7,C.split("").forEach(function(S){_[S]=S}),m({},y)[E]!=7||Object.keys(m({},_)).join("")!=C})?function(_,E){for(var C=d(_),S=arguments.length,k=1,R=o.f,O=c.f;S>k;)for(var I=p(arguments[k++]),F=R?a(I).concat(R(I)):a(I),P=F.length,x=0,M;P>x;)O.call(I,M=F[x++])&&(C[M]=I[M]);return C}:m},7726:function(n,r){var s=n.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=s)},"77f1":function(n,r,s){var a=s("4588"),o=Math.max,c=Math.min;n.exports=function(d,p){return d=a(d),d<0?o(d+p,0):c(d,p)}},"79e5":function(n,r){n.exports=function(s){try{return!!s()}catch{return!0}}},"7f20":function(n,r,s){var a=s("86cc").f,o=s("69a8"),c=s("2b4c")("toStringTag");n.exports=function(d,p,m){d&&!o(d=m?d:d.prototype,c)&&a(d,c,{configurable:!0,value:p})}},8378:function(n,r){var s=n.exports={version:"2.6.5"};typeof __e=="number"&&(__e=s)},"84f2":function(n,r){n.exports={}},"86cc":function(n,r,s){var a=s("cb7c"),o=s("c69a"),c=s("6a99"),d=Object.defineProperty;r.f=s("9e1e")?Object.defineProperty:function(m,y,_){if(a(m),y=c(y,!0),a(_),o)try{return d(m,y,_)}catch{}if("get"in _||"set"in _)throw TypeError("Accessors not supported!");return"value"in _&&(m[y]=_.value),m}},"9b43":function(n,r,s){var a=s("d8e8");n.exports=function(o,c,d){if(a(o),c===void 0)return o;switch(d){case 1:return function(p){return o.call(c,p)};case 2:return function(p,m){return o.call(c,p,m)};case 3:return function(p,m,y){return o.call(c,p,m,y)}}return function(){return o.apply(c,arguments)}}},"9c6c":function(n,r,s){var a=s("2b4c")("unscopables"),o=Array.prototype;o[a]==null&&s("32e9")(o,a,{}),n.exports=function(c){o[a][c]=!0}},"9def":function(n,r,s){var a=s("4588"),o=Math.min;n.exports=function(c){return c>0?o(a(c),9007199254740991):0}},"9e1e":function(n,r,s){n.exports=!s("79e5")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},a352:function(n,r){n.exports=i},a481:function(n,r,s){var a=s("cb7c"),o=s("4bf8"),c=s("9def"),d=s("4588"),p=s("0390"),m=s("5f1b"),y=Math.max,_=Math.min,E=Math.floor,C=/\$([$&`']|\d\d?|<[^>]*>)/g,S=/\$([$&`']|\d\d?)/g,k=function(R){return R===void 0?R:String(R)};s("214f")("replace",2,function(R,O,I,F){return[function(M,q){var $=R(this),B=M==null?void 0:M[O];return B!==void 0?B.call(M,$,q):I.call(String($),M,q)},function(x,M){var q=F(I,x,this,M);if(q.done)return q.value;var $=a(x),B=String(this),j=typeof M=="function";j||(M=String(M));var z=$.global;if(z){var X=$.unicode;$.lastIndex=0}for(var se=[];;){var ue=m($,B);if(ue===null||(se.push(ue),!z))break;var ve=String(ue[0]);ve===""&&($.lastIndex=p(B,c($.lastIndex),X))}for(var _e="",de=0,oe=0;oe<se.length;oe++){ue=se[oe];for(var Q=String(ue[0]),Z=y(_(d(ue.index),B.length),0),W=[],ne=1;ne<ue.length;ne++)W.push(k(ue[ne]));var ce=ue.groups;if(j){var J=[Q].concat(W,Z,B);ce!==void 0&&J.push(ce);var pe=String(M.apply(void 0,J))}else pe=P(Q,B,Z,W,ce,M);Z>=de&&(_e+=B.slice(de,Z)+pe,de=Z+Q.length)}return _e+B.slice(de)}];function P(x,M,q,$,B,j){var z=q+x.length,X=$.length,se=S;return B!==void 0&&(B=o(B),se=C),I.call(j,se,function(ue,ve){var _e;switch(ve.charAt(0)){case"$":return"$";case"&":return x;case"`":return M.slice(0,q);case"'":return M.slice(z);case"<":_e=B[ve.slice(1,-1)];break;default:var de=+ve;if(de===0)return ue;if(de>X){var oe=E(de/10);return oe===0?ue:oe<=X?$[oe-1]===void 0?ve.charAt(1):$[oe-1]+ve.charAt(1):ue}_e=$[de-1]}return _e===void 0?"":_e})}})},aae3:function(n,r,s){var a=s("d3f4"),o=s("2d95"),c=s("2b4c")("match");n.exports=function(d){var p;return a(d)&&((p=d[c])!==void 0?!!p:o(d)=="RegExp")}},ac6a:function(n,r,s){for(var a=s("cadf"),o=s("0d58"),c=s("2aba"),d=s("7726"),p=s("32e9"),m=s("84f2"),y=s("2b4c"),_=y("iterator"),E=y("toStringTag"),C=m.Array,S={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},k=o(S),R=0;R<k.length;R++){var O=k[R],I=S[O],F=d[O],P=F&&F.prototype,x;if(P&&(P[_]||p(P,_,C),P[E]||p(P,E,O),m[O]=C,I))for(x in a)P[x]||c(P,x,a[x],!0)}},b0c5:function(n,r,s){var a=s("520a");s("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},be13:function(n,r){n.exports=function(s){if(s==null)throw TypeError("Can't call method on  "+s);return s}},c366:function(n,r,s){var a=s("6821"),o=s("9def"),c=s("77f1");n.exports=function(d){return function(p,m,y){var _=a(p),E=o(_.length),C=c(y,E),S;if(d&&m!=m){for(;E>C;)if(S=_[C++],S!=S)return!0}else for(;E>C;C++)if((d||C in _)&&_[C]===m)return d||C||0;return!d&&-1}}},c649:function(n,r,s){(function(a){s.d(r,"c",function(){return _}),s.d(r,"a",function(){return m}),s.d(r,"b",function(){return c}),s.d(r,"d",function(){return y}),s("a481");function o(){return typeof window<"u"?window.console:a.console}var c=o();function d(E){var C=Object.create(null);return function(k){var R=C[k];return R||(C[k]=E(k))}}var p=/-(\w)/g,m=d(function(E){return E.replace(p,function(C,S){return S?S.toUpperCase():""})});function y(E){E.parentElement!==null&&E.parentElement.removeChild(E)}function _(E,C,S){var k=S===0?E.children[0]:E.children[S-1].nextSibling;E.insertBefore(C,k)}}).call(this,s("c8ba"))},c69a:function(n,r,s){n.exports=!s("9e1e")&&!s("79e5")(function(){return Object.defineProperty(s("230e")("div"),"a",{get:function(){return 7}}).a!=7})},c8ba:function(n,r){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}n.exports=s},ca5a:function(n,r){var s=0,a=Math.random();n.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++s+a).toString(36))}},cadf:function(n,r,s){var a=s("9c6c"),o=s("d53b"),c=s("84f2"),d=s("6821");n.exports=s("01f9")(Array,"Array",function(p,m){this._t=d(p),this._i=0,this._k=m},function(){var p=this._t,m=this._k,y=this._i++;return!p||y>=p.length?(this._t=void 0,o(1)):m=="keys"?o(0,y):m=="values"?o(0,p[y]):o(0,[y,p[y]])},"values"),c.Arguments=c.Array,a("keys"),a("values"),a("entries")},cb7c:function(n,r,s){var a=s("d3f4");n.exports=function(o){if(!a(o))throw TypeError(o+" is not an object!");return o}},ce10:function(n,r,s){var a=s("69a8"),o=s("6821"),c=s("c366")(!1),d=s("613b")("IE_PROTO");n.exports=function(p,m){var y=o(p),_=0,E=[],C;for(C in y)C!=d&&a(y,C)&&E.push(C);for(;m.length>_;)a(y,C=m[_++])&&(~c(E,C)||E.push(C));return E}},d2c8:function(n,r,s){var a=s("aae3"),o=s("be13");n.exports=function(c,d,p){if(a(d))throw TypeError("String#"+p+" doesn't accept regex!");return String(o(c))}},d3f4:function(n,r){n.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},d53b:function(n,r){n.exports=function(s,a){return{value:a,done:!!s}}},d8e8:function(n,r){n.exports=function(s){if(typeof s!="function")throw TypeError(s+" is not a function!");return s}},e11e:function(n,r){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(n,r,s){var a=s("5ca1"),o=s("9def"),c=s("d2c8"),d="startsWith",p=""[d];a(a.P+a.F*s("5147")(d),"String",{startsWith:function(y){var _=c(this,y,d),E=o(Math.min(arguments.length>1?arguments[1]:void 0,_.length)),C=String(y);return p?p.call(_,C,E):_.slice(E,E+C.length)===C}})},f6fd:function(n,r){(function(s){var a="currentScript",o=s.getElementsByTagName("script");a in s||Object.defineProperty(s,a,{get:function(){try{throw new Error}catch(p){var c,d=(/.*at [^\(]*\((.*):.+:.+\)$/ig.exec(p.stack)||[!1])[1];for(c in o)if(o[c].src==d||o[c].readyState=="interactive")return o[c];return null}}})})(document)},f751:function(n,r,s){var a=s("5ca1");a(a.S+a.F,"Object",{assign:s("7333")})},fa5b:function(n,r,s){n.exports=s("5537")("native-function-to-string",Function.toString)},fab2:function(n,r,s){var a=s("7726").document;n.exports=a&&a.documentElement},fb15:function(n,r,s){if(s.r(r),typeof window<"u"){s("f6fd");var a;(a=window.document.currentScript)&&(a=a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(s.p=a[1])}s("f751"),s("f559"),s("ac6a"),s("cadf"),s("456d");function o(Q){if(Array.isArray(Q))return Q}function c(Q,Z){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Q)))){var W=[],ne=!0,ce=!1,J=void 0;try{for(var pe=Q[Symbol.iterator](),he;!(ne=(he=pe.next()).done)&&(W.push(he.value),!(Z&&W.length===Z));ne=!0);}catch(fe){ce=!0,J=fe}finally{try{!ne&&pe.return!=null&&pe.return()}finally{if(ce)throw J}}return W}}function d(Q,Z){(Z==null||Z>Q.length)&&(Z=Q.length);for(var W=0,ne=new Array(Z);W<Z;W++)ne[W]=Q[W];return ne}function p(Q,Z){if(Q){if(typeof Q=="string")return d(Q,Z);var W=Object.prototype.toString.call(Q).slice(8,-1);if(W==="Object"&&Q.constructor&&(W=Q.constructor.name),W==="Map"||W==="Set")return Array.from(Q);if(W==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return d(Q,Z)}}function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(Q,Z){return o(Q)||c(Q,Z)||p(Q,Z)||m()}s("6762"),s("2fdb");function _(Q){if(Array.isArray(Q))return d(Q)}function E(Q){if(typeof Symbol<"u"&&Symbol.iterator in Object(Q))return Array.from(Q)}function C(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(Q){return _(Q)||E(Q)||p(Q)||C()}var k=s("a352"),R=s.n(k),O=s("c649");function I(Q,Z,W){return W===void 0||(Q=Q||{},Q[Z]=W),Q}function F(Q,Z){return Q.map(function(W){return W.elm}).indexOf(Z)}function P(Q,Z,W,ne){if(!Q)return[];var ce=Q.map(function(he){return he.elm}),J=Z.length-ne,pe=S(Z).map(function(he,fe){return fe>=J?ce.length:ce.indexOf(he)});return W?pe.filter(function(he){return he!==-1}):pe}function x(Q,Z){var W=this;this.$nextTick(function(){return W.$emit(Q.toLowerCase(),Z)})}function M(Q){var Z=this;return function(W){Z.realList!==null&&Z["onDrag"+Q](W),x.call(Z,Q,W)}}function q(Q){return["transition-group","TransitionGroup"].includes(Q)}function $(Q){if(!Q||Q.length!==1)return!1;var Z=y(Q,1),W=Z[0].componentOptions;return W?q(W.tag):!1}function B(Q,Z,W){return Q[W]||(Z[W]?Z[W]():void 0)}function j(Q,Z,W){var ne=0,ce=0,J=B(Z,W,"header");J&&(ne=J.length,Q=Q?[].concat(S(J),S(Q)):S(J));var pe=B(Z,W,"footer");return pe&&(ce=pe.length,Q=Q?[].concat(S(Q),S(pe)):S(pe)),{children:Q,headerOffset:ne,footerOffset:ce}}function z(Q,Z){var W=null,ne=function(be,re){W=I(W,be,re)},ce=Object.keys(Q).filter(function(fe){return fe==="id"||fe.startsWith("data-")}).reduce(function(fe,be){return fe[be]=Q[be],fe},{});if(ne("attrs",ce),!Z)return W;var J=Z.on,pe=Z.props,he=Z.attrs;return ne("on",J),ne("props",pe),Object.assign(W.attrs,he),W}var X=["Start","Add","Remove","Update","End"],se=["Choose","Unchoose","Sort","Filter","Clone"],ue=["Move"].concat(X,se).map(function(Q){return"on"+Q}),ve=null,_e={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(Z){return Z}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},de={name:"draggable",inheritAttrs:!1,props:_e,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(Z){var W=this.$slots.default;this.transitionMode=$(W);var ne=j(W,this.$slots,this.$scopedSlots),ce=ne.children,J=ne.headerOffset,pe=ne.footerOffset;this.headerOffset=J,this.footerOffset=pe;var he=z(this.$attrs,this.componentData);return Z(this.getTag(),he,ce)},created:function(){this.list!==null&&this.value!==null&&O.b.error("Value and list props are mutually exclusive! Please set one or another."),this.element!=="div"&&O.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),this.options!==void 0&&O.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var Z=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var W={};X.forEach(function(J){W["on"+J]=M.call(Z,J)}),se.forEach(function(J){W["on"+J]=x.bind(Z,J)});var ne=Object.keys(this.$attrs).reduce(function(J,pe){return J[Object(O.a)(pe)]=Z.$attrs[pe],J},{}),ce=Object.assign({},this.options,ne,W,{onMove:function(pe,he){return Z.onDragMove(pe,he)}});!("draggable"in ce)&&(ce.draggable=">*"),this._sortable=new R.a(this.rootContainer,ce),this.computeIndexes()},beforeDestroy:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(Z){this.updateOptions(Z)},deep:!0},$attrs:{handler:function(Z){this.updateOptions(Z)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var Z=this._vnode.fnOptions;return Z&&Z.functional},getTag:function(){return this.tag||this.element},updateOptions:function(Z){for(var W in Z){var ne=Object(O.a)(W);ue.indexOf(ne)===-1&&this._sortable.option(ne,Z[W])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var Z=this.$slots.default;return this.transitionMode?Z[0].child.$slots.default:Z},computeIndexes:function(){var Z=this;this.$nextTick(function(){Z.visibleIndexes=P(Z.getChildrenNodes(),Z.rootContainer.children,Z.transitionMode,Z.footerOffset)})},getUnderlyingVm:function(Z){var W=F(this.getChildrenNodes()||[],Z);if(W===-1)return null;var ne=this.realList[W];return{index:W,element:ne}},getUnderlyingPotencialDraggableComponent:function(Z){var W=Z.__vue__;return!W||!W.$options||!q(W.$options._componentTag)?!("realList"in W)&&W.$children.length===1&&"realList"in W.$children[0]?W.$children[0]:W:W.$parent},emitChanges:function(Z){var W=this;this.$nextTick(function(){W.$emit("change",Z)})},alterList:function(Z){if(this.list){Z(this.list);return}var W=S(this.value);Z(W),this.$emit("input",W)},spliceList:function(){var Z=arguments,W=function(ce){return ce.splice.apply(ce,S(Z))};this.alterList(W)},updatePosition:function(Z,W){var ne=function(J){return J.splice(W,0,J.splice(Z,1)[0])};this.alterList(ne)},getRelatedContextFromMoveEvent:function(Z){var W=Z.to,ne=Z.related,ce=this.getUnderlyingPotencialDraggableComponent(W);if(!ce)return{component:ce};var J=ce.realList,pe={list:J,component:ce};if(W!==ne&&J&&ce.getUnderlyingVm){var he=ce.getUnderlyingVm(ne);if(he)return Object.assign(he,pe)}return pe},getVmIndex:function(Z){var W=this.visibleIndexes,ne=W.length;return Z>ne-1?ne:W[Z]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(Z){if(!(!this.noTransitionOnDrag||!this.transitionMode)){var W=this.getChildrenNodes();W[Z].data=null;var ne=this.getComponent();ne.children=[],ne.kept=void 0}},onDragStart:function(Z){this.context=this.getUnderlyingVm(Z.item),Z.item._underlying_vm_=this.clone(this.context.element),ve=Z.item},onDragAdd:function(Z){var W=Z.item._underlying_vm_;if(W!==void 0){Object(O.d)(Z.item);var ne=this.getVmIndex(Z.newIndex);this.spliceList(ne,0,W),this.computeIndexes();var ce={element:W,newIndex:ne};this.emitChanges({added:ce})}},onDragRemove:function(Z){if(Object(O.c)(this.rootContainer,Z.item,Z.oldIndex),Z.pullMode==="clone"){Object(O.d)(Z.clone);return}var W=this.context.index;this.spliceList(W,1);var ne={element:this.context.element,oldIndex:W};this.resetTransitionData(W),this.emitChanges({removed:ne})},onDragUpdate:function(Z){Object(O.d)(Z.item),Object(O.c)(Z.from,Z.item,Z.oldIndex);var W=this.context.index,ne=this.getVmIndex(Z.newIndex);this.updatePosition(W,ne);var ce={element:this.context.element,oldIndex:W,newIndex:ne};this.emitChanges({moved:ce})},updateProperty:function(Z,W){Z.hasOwnProperty(W)&&(Z[W]+=this.headerOffset)},computeFutureIndex:function(Z,W){if(!Z.element)return 0;var ne=S(W.to.children).filter(function(he){return he.style.display!=="none"}),ce=ne.indexOf(W.related),J=Z.component.getVmIndex(ce),pe=ne.indexOf(ve)!==-1;return pe||!W.willInsertAfter?J:J+1},onDragMove:function(Z,W){var ne=this.move;if(!ne||!this.realList)return!0;var ce=this.getRelatedContextFromMoveEvent(Z),J=this.context,pe=this.computeFutureIndex(ce,Z);Object.assign(J,{futureIndex:pe});var he=Object.assign({},Z,{relatedContext:ce,draggedContext:J});return ne(he,W)},onDragEnd:function(){this.computeIndexes(),ve=null}}};typeof window<"u"&&"Vue"in window&&window.Vue.component("draggable",de);var oe=de;r.default=oe}}).default})})(kG);var ej=kG.exports;const Hk=ru(ej);var g0={exports:{}},Y1={},wa={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});function BG(t){return t&&t.length===0}Xe.isEmpty=BG;function Uf(t){return t==null?[]:Object.keys(t)}Xe.keys=Uf;function FG(t){for(var e=[],i=Object.keys(t),n=0;n<i.length;n++)e.push(t[i[n]]);return e}Xe.values=FG;function tj(t,e){for(var i=[],n=Uf(t),r=0;r<n.length;r++){var s=n[r];i.push(e.call(null,t[s],s))}return i}Xe.mapValues=tj;function ij(t,e){for(var i=[],n=0;n<t.length;n++)i.push(e.call(null,t[n],n));return i}Xe.map=ij;function $G(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];Array.isArray(n)?e=e.concat($G(n)):e.push(n)}return e}Xe.flatten=$G;function nj(t){return BG(t)?void 0:t[0]}Xe.first=nj;function rj(t){var e=t&&t.length;return e?t[e-1]:void 0}Xe.last=rj;function HG(t,e){if(Array.isArray(t))for(var i=0;i<t.length;i++)e.call(null,t[i],i);else if(Yk(t))for(var n=Uf(t),i=0;i<n.length;i++){var r=n[i],s=t[r];e.call(null,s,r)}else throw Error("non exhaustive match")}Xe.forEach=HG;function sj(t){return typeof t=="string"}Xe.isString=sj;function VG(t){return t===void 0}Xe.isUndefined=VG;function aj(t){return t instanceof Function}Xe.isFunction=aj;function oj(t,e){return e===void 0&&(e=1),t.slice(e,t.length)}Xe.drop=oj;function lj(t,e){return e===void 0&&(e=1),t.slice(0,t.length-e)}Xe.dropRight=lj;function qG(t,e){var i=[];if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];e.call(null,r)&&i.push(r)}return i}Xe.filter=qG;function Vk(t,e){return qG(t,function(i){return!e(i)})}Xe.reject=Vk;function cj(t,e){for(var i=Object.keys(t),n={},r=0;r<i.length;r++){var s=i[r],a=t[s];e(a)&&(n[s]=a)}return n}Xe.pick=cj;function YG(t,e){return Yk(t)?t.hasOwnProperty(e):!1}Xe.has=YG;function qk(t,e){return zG(t,function(i){return i===e})!==void 0}Xe.contains=qk;function WG(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}Xe.cloneArr=WG;function jG(t){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}Xe.cloneObj=jG;function zG(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(e.call(null,n))return n}}Xe.find=zG;function uj(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];e.call(null,r)&&i.push(r)}return i}Xe.findAll=uj;function XG(t,e,i){for(var n=Array.isArray(t),r=n?t:FG(t),s=n?[]:Uf(t),a=i,o=0;o<r.length;o++)a=e.call(null,a,r[o],n?o:s[o]);return a}Xe.reduce=XG;function dj(t){return Vk(t,function(e){return e==null})}Xe.compact=dj;function hj(t,e){e===void 0&&(e=function(n){return n});var i=[];return XG(t,function(n,r){var s=e(r);return qk(i,s)?n:(i.push(s),n.concat(r))},[])}Xe.uniq=hj;function fj(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=[null],r=n.concat(e);return Function.bind.apply(t,r)}Xe.partial=fj;function pj(t){return Array.isArray(t)}Xe.isArray=pj;function mj(t){return t instanceof RegExp}Xe.isRegExp=mj;function Yk(t){return t instanceof Object}Xe.isObject=Yk;function yj(t,e){for(var i=0;i<t.length;i++)if(!e(t[i],i))return!1;return!0}Xe.every=yj;function gj(t,e){return Vk(t,function(i){return qk(e,i)})}Xe.difference=gj;function vj(t,e){for(var i=0;i<t.length;i++)if(e(t[i]))return!0;return!1}Xe.some=vj;function bj(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}Xe.indexOf=bj;function _j(t,e){var i=WG(t);return i.sort(function(n,r){return e(n)-e(r)}),i}Xe.sortBy=_j;function Ej(t,e){if(t.length!==e.length)throw Error("can't zipObject with different number of keys and values!");for(var i={},n=0;n<t.length;n++)i[t[n]]=e[n];return i}Xe.zipObject=Ej;function Tj(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0;n<e.length;n++)for(var r=e[n],s=Uf(r),a=0;a<s.length;a++){var o=s[a];t[o]=r[o]}return t}Xe.assign=Tj;function KG(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0;n<e.length;n++){var r=e[n];if(!VG(r))for(var s=Uf(r),a=0;a<s.length;a++){var o=s[a];YG(t,o)||(t[o]=r[o])}}return t}Xe.assignNoOverwrite=KG;function wj(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return KG.apply(null,[{}].concat(t))}Xe.defaults=wj;function Cj(t,e){var i={};return HG(t,function(n){var r=e(n),s=i[r];s?s.push(n):i[r]=[n]}),i}Xe.groupBy=Cj;function Sj(t,e){for(var i=jG(t),n=Uf(e),r=0;r<n.length;r++){var s=n[r],a=e[s];i[s]=a}return i}Xe.merge=Sj;function kj(){}Xe.NOOP=kj;function Aj(t){return t}Xe.IDENTITY=Aj;function Rj(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];e.push(n!==void 0?n:void 0)}return e}Xe.packArray=Rj;function Ij(t){console&&console.error&&console.error("Error: "+t)}Xe.PRINT_ERROR=Ij;function Dj(t){console&&console.warn&&console.warn("Warning: "+t)}Xe.PRINT_WARNING=Dj;function xj(){return typeof Map=="function"}Xe.isES2015MapSupported=xj;function Mj(t,e){e.forEach(function(i){var n=i.prototype;Object.getOwnPropertyNames(n).forEach(function(r){if(r!=="constructor"){var s=Object.getOwnPropertyDescriptor(n,r);s&&(s.get||s.set)?Object.defineProperty(t.prototype,r,s):t.prototype[r]=i.prototype[r]}})})}Xe.applyMixins=Mj;function Pj(t){function e(){}e.prototype=t;var i=new e;function n(){return typeof i.bar}return n(),n(),t}Xe.toFastProperties=Pj;Object.defineProperty(wa,"__esModule",{value:!0});var bg=Xe;function Oj(t){return ZG(t.constructor)}wa.classNameFromInstance=Oj;var Nj=/^\s*function\s*(\S*)\s*\(/,Hx="name";function ZG(t){var e=t.name;if(e)return e;var i=t.toString().match(Nj)[1];return i}wa.functionName=ZG;function Gj(t,e){var i=Object.getOwnPropertyDescriptor(t,Hx);return bg.isUndefined(i)||i.configurable?(Object.defineProperty(t,Hx,{enumerable:!1,configurable:!0,writable:!1,value:e}),!0):!1}wa.defineNameProp=Gj;var Uj=function(){function t(){this._state={}}return t.prototype.keys=function(){return bg.keys(this._state)},t.prototype.values=function(){return bg.values(this._state)},t.prototype.put=function(e,i){this._state[e]=i},t.prototype.putAll=function(e){this._state=bg.assign(this._state,e._state)},t.prototype.get=function(e){return this._state[e]},t.prototype.containsKey=function(e){return bg.has(this._state,e)},t.prototype.clear=function(){this._state={}},t}();wa.HashTable=Uj;var Wm={},Jv={},zi={},W1={},j1={},z1={},QG={exports:{}};(function(t){(function(e,i){t.exports?t.exports=i():e.regexpToAst=i()})(typeof self<"u"?self:Si,function(){function e(){}e.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},e.prototype.restoreState=function(C){this.idx=C.idx,this.input=C.input,this.groupIdx=C.groupIdx},e.prototype.pattern=function(C){this.idx=0,this.input=C,this.groupIdx=0,this.consumeChar("/");var S=this.disjunction();this.consumeChar("/");for(var k={type:"Flags",global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":o(k,"global");break;case"i":o(k,"ignoreCase");break;case"m":o(k,"multiLine");break;case"u":o(k,"unicode");break;case"y":o(k,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:k,value:S}},e.prototype.disjunction=function(){var C=[];for(C.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),C.push(this.alternative());return{type:"Disjunction",value:C}},e.prototype.alternative=function(){for(var C=[];this.isTerm();)C.push(this.term());return{type:"Alternative",value:C}},e.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},e.prototype.assertion=function(){switch(this.popChar()){case"^":return{type:"StartAnchor"};case"$":return{type:"EndAnchor"};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary"};case"B":return{type:"NonWordBoundary"}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var C;switch(this.popChar()){case"=":C="Lookahead";break;case"!":C="NegativeLookahead";break}c(C);var S=this.disjunction();return this.consumeChar(")"),{type:C,value:S}}d()},e.prototype.quantifier=function(C){var S;switch(this.popChar()){case"*":S={atLeast:0,atMost:1/0};break;case"+":S={atLeast:1,atMost:1/0};break;case"?":S={atLeast:0,atMost:1};break;case"{":var k=this.integerIncludingZero();switch(this.popChar()){case"}":S={atLeast:k,atMost:k};break;case",":var R;this.isDigit()?(R=this.integerIncludingZero(),S={atLeast:k,atMost:R}):S={atLeast:k,atMost:1/0},this.consumeChar("}");break}if(C===!0&&S===void 0)return;c(S);break}if(!(C===!0&&S===void 0))return c(S),this.peekChar(0)==="?"?(this.consumeChar("?"),S.greedy=!1):S.greedy=!0,S.type="Quantifier",S},e.prototype.atom=function(){var C;switch(this.peekChar()){case".":C=this.dotAll();break;case"\\":C=this.atomEscape();break;case"[":C=this.characterClass();break;case"(":C=this.group();break}return C===void 0&&this.isPatternCharacter()&&(C=this.patternCharacter()),c(C),this.isQuantifier()&&(C.quantifier=this.quantifier()),C},e.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[s(`
`),s("\r"),s("\u2028"),s("\u2029")]}},e.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.decimalEscapeAtom=function(){var C=this.positiveInteger();return{type:"GroupBackReference",value:C}},e.prototype.characterClassEscape=function(){var C,S=!1;switch(this.popChar()){case"d":C=m;break;case"D":C=m,S=!0;break;case"s":C=_;break;case"S":C=_,S=!0;break;case"w":C=y;break;case"W":C=y,S=!0;break}return c(C),{type:"Set",value:C,complement:S}},e.prototype.controlEscapeAtom=function(){var C;switch(this.popChar()){case"f":C=s("\f");break;case"n":C=s(`
`);break;case"r":C=s("\r");break;case"t":C=s("	");break;case"v":C=s("\v");break}return c(C),{type:"Character",value:C}},e.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var C=this.popChar();if(/[a-zA-Z]/.test(C)===!1)throw Error("Invalid ");var S=C.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:S}},e.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:s("\0")}},e.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},e.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},e.prototype.identityEscapeAtom=function(){var C=this.popChar();return{type:"Character",value:s(C)}},e.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var C=this.popChar();return{type:"Character",value:s(C)}}},e.prototype.characterClass=function(){var C=[],S=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),S=!0);this.isClassAtom();){var k=this.classAtom(),R=k.type==="Character";if(R&&this.isRangeDash()){this.consumeChar("-");var O=this.classAtom(),I=O.type==="Character";if(I){if(O.value<k.value)throw Error("Range out of order in character class");C.push({from:k.value,to:O.value})}else a(k.value,C),C.push(s("-")),a(O.value,C)}else a(k.value,C)}return this.consumeChar("]"),{type:"Set",complement:S,value:C}},e.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},e.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:s("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.group=function(){var C=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),C=!1;break;default:this.groupIdx++;break}var S=this.disjunction();this.consumeChar(")");var k={type:"Group",capturing:C,value:S};return C&&(k.idx=this.groupIdx),k},e.prototype.positiveInteger=function(){var C=this.popChar();if(r.test(C)===!1)throw Error("Expecting a positive integer");for(;n.test(this.peekChar(0));)C+=this.popChar();return parseInt(C,10)},e.prototype.integerIncludingZero=function(){var C=this.popChar();if(n.test(C)===!1)throw Error("Expecting an integer");for(;n.test(this.peekChar(0));)C+=this.popChar();return parseInt(C,10)},e.prototype.patternCharacter=function(){var C=this.popChar();switch(C){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:s(C)}}},e.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},e.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},e.prototype.isDigit=function(){return n.test(this.peekChar(0))},e.prototype.isClassAtom=function(C){switch(C===void 0&&(C=0),this.peekChar(C)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},e.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},e.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},e.prototype.isQuantifier=function(){var C=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(C)}},e.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.parseHexDigits=function(C){for(var S="",k=0;k<C;k++){var R=this.popChar();if(i.test(R)===!1)throw Error("Expecting a HexDecimal digits");S+=R}var O=parseInt(S,16);return{type:"Character",value:O}},e.prototype.peekChar=function(C){return C===void 0&&(C=0),this.input[this.idx+C]},e.prototype.popChar=function(){var C=this.peekChar(0);return this.consumeChar(),C},e.prototype.consumeChar=function(C){if(C!==void 0&&this.input[this.idx]!==C)throw Error("Expected: '"+C+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++};var i=/[0-9a-fA-F]/,n=/[0-9]/,r=/[1-9]/;function s(C){return C.charCodeAt(0)}function a(C,S){C.length!==void 0?C.forEach(function(k){S.push(k)}):S.push(C)}function o(C,S){if(C[S]===!0)throw"duplicate flag "+S;C[S]=!0}function c(C){if(C===void 0)throw Error("Internal Error - Should never get here!")}function d(){throw Error("Internal Error - Should never get here!")}var p,m=[];for(p=s("0");p<=s("9");p++)m.push(p);var y=[s("_")].concat(m);for(p=s("a");p<=s("z");p++)y.push(p);for(p=s("A");p<=s("Z");p++)y.push(p);var _=[s(" "),s("\f"),s(`
`),s("\r"),s("	"),s("\v"),s("	"),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s(" "),s("\u2028"),s("\u2029"),s(" "),s(" "),s("　"),s("\uFEFF")];function E(){}return E.prototype.visitChildren=function(C){for(var S in C){var k=C[S];C.hasOwnProperty(S)&&(k.type!==void 0?this.visit(k):Array.isArray(k)&&k.forEach(function(R){this.visit(R)},this))}},E.prototype.visit=function(C){switch(C.type){case"Pattern":this.visitPattern(C);break;case"Flags":this.visitFlags(C);break;case"Disjunction":this.visitDisjunction(C);break;case"Alternative":this.visitAlternative(C);break;case"StartAnchor":this.visitStartAnchor(C);break;case"EndAnchor":this.visitEndAnchor(C);break;case"WordBoundary":this.visitWordBoundary(C);break;case"NonWordBoundary":this.visitNonWordBoundary(C);break;case"Lookahead":this.visitLookahead(C);break;case"NegativeLookahead":this.visitNegativeLookahead(C);break;case"Character":this.visitCharacter(C);break;case"Set":this.visitSet(C);break;case"Group":this.visitGroup(C);break;case"GroupBackReference":this.visitGroupBackReference(C);break;case"Quantifier":this.visitQuantifier(C);break}this.visitChildren(C)},E.prototype.visitPattern=function(C){},E.prototype.visitFlags=function(C){},E.prototype.visitDisjunction=function(C){},E.prototype.visitAlternative=function(C){},E.prototype.visitStartAnchor=function(C){},E.prototype.visitEndAnchor=function(C){},E.prototype.visitWordBoundary=function(C){},E.prototype.visitNonWordBoundary=function(C){},E.prototype.visitLookahead=function(C){},E.prototype.visitNegativeLookahead=function(C){},E.prototype.visitCharacter=function(C){},E.prototype.visitSet=function(C){},E.prototype.visitGroup=function(C){},E.prototype.visitGroupBackReference=function(C){},E.prototype.visitQuantifier=function(C){},{RegExpParser:e,BaseRegExpVisitor:E,VERSION:"0.4.0"}})})(QG);var JG=QG.exports,eU={};(function(t){var e=Si&&Si.__extends||function(){var _=function(E,C){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,k){S.__proto__=k}||function(S,k){for(var R in k)k.hasOwnProperty(R)&&(S[R]=k[R])},_(E,C)};return function(E,C){_(E,C);function S(){this.constructor=E}E.prototype=C===null?Object.create(C):(S.prototype=C.prototype,new S)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=JG,n=Xe,r=new i.RegExpParser,s="Complement Sets are not supported for first char optimization";t.failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function a(_,E){E===void 0&&(E=!1);try{var C=r.pattern(_.toString()),S=o(C.value);return C.flags.ignoreCase&&(S=c(S)),S}catch(R){if(R.message===s)E&&n.PRINT_WARNING(""+t.failedOptimizationPrefixMsg+("	Unable to optimize: < "+_.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var k="";E&&(k=`
	This will disable the lexer's first char optimizations.
	See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),n.PRINT_ERROR(t.failedOptimizationPrefixMsg+`
`+("	Failed parsing: < "+_.toString()+` >
`)+("	Using the regexp-to-ast library version: "+i.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+k)}}return[]}t.getStartCodes=a;function o(_){switch(_.type){case"Disjunction":return n.flatten(n.map(_.value,o));case"Alternative":for(var E=[],C=_.value,S=0;S<C.length;S++){var k=C[S];if(!n.contains(["GroupBackReference","Lookahead","NegativeLookahead","StartAnchor","EndAnchor","WordBoundary","NonWordBoundary"],k.type)){var R=k;switch(R.type){case"Character":E.push(R.value);break;case"Set":if(R.complement===!0)throw Error(s);n.forEach(R.value,function(F){if(typeof F=="number")E.push(F);else for(var P=F,x=P.from;x<=P.to;x++)E.push(x)});break;case"Group":var O=o(R.value);n.forEach(O,function(F){return E.push(F)});break;default:throw Error("Non Exhaustive Match")}var I=R.quantifier!==void 0&&R.quantifier.atLeast===0;if(R.type==="Group"&&p(R)===!1||R.type!=="Group"&&I===!1)break}}return E;default:throw Error("non exhaustive match!")}}t.firstChar=o;function c(_){var E=[];return n.forEach(_,function(C){E.push(C);var S=String.fromCharCode(C);S.toUpperCase()!==S?E.push(S.toUpperCase().charCodeAt(0)):S.toLowerCase()!==S&&E.push(S.toLowerCase().charCodeAt(0))}),E}t.applyIgnoreCase=c;function d(_,E){return n.find(_.value,function(C){if(typeof C=="number")return n.contains(E,C);var S=C;return n.find(E,function(k){return S.from<=k&&k<=S.to})!==void 0})}function p(_){return _.quantifier&&_.quantifier.atLeast===0?!0:_.value?n.isArray(_.value)?n.every(_.value,p):p(_.value):!1}var m=function(_){e(E,_);function E(C){var S=_.call(this)||this;return S.targetCharCodes=C,S.found=!1,S}return E.prototype.visitChildren=function(C){switch(C.type){case"Lookahead":this.visitLookahead(C);return;case"NegativeLookahead":this.visitNegativeLookahead(C);return}_.prototype.visitChildren.call(this,C)},E.prototype.visitCharacter=function(C){n.contains(this.targetCharCodes,C.value)&&(this.found=!0)},E.prototype.visitSet=function(C){C.complement?d(C,this.targetCharCodes)===void 0&&(this.found=!0):d(C,this.targetCharCodes)!==void 0&&(this.found=!0)},E}(i.BaseRegExpVisitor);function y(_,E){if(E instanceof RegExp){var C=r.pattern(E.toString()),S=new m(_);return S.visit(C),S.found}else return n.find(E,function(k){return n.contains(_,k.charCodeAt(0))})!==void 0}t.canMatchCharCode=y})(eU);var Vx;function Lj(){return Vx||(Vx=1,function(t){var e=Si&&Si.__extends||function(){var Z=function(W,ne){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,J){ce.__proto__=J}||function(ce,J){for(var pe in J)J.hasOwnProperty(pe)&&(ce[pe]=J[pe])},Z(W,ne)};return function(W,ne){Z(W,ne);function ce(){this.constructor=W}W.prototype=ne===null?Object.create(ne):(ce.prototype=ne.prototype,new ce)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=JG,n=so(),r=Wk(),s=Xe,a=eU,o=new i.RegExpParser,c="PATTERN";t.DEFAULT_MODE="defaultMode",t.MODES="modes",t.SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function d(){t.SUPPORT_STICKY=!1}t.disableSticky=d;function p(){t.SUPPORT_STICKY=!0}t.enableSticky=p;function m(Z,W){W=s.defaults(W,{useSticky:t.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`]});var ne=s.reject(Z,function(rt){return rt[c]===r.Lexer.NA}),ce=!1,J=s.map(ne,function(rt){var De=rt[c];if(s.isRegExp(De)){var qe=De.source;return qe.length===1&&qe!=="^"&&qe!=="$"&&qe!=="."?qe:qe.length===2&&qe[0]==="\\"&&!s.contains(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],qe[1])?qe[1]:W.useSticky?z(De):j(De)}else{if(s.isFunction(De))return ce=!0,{exec:De};if(s.has(De,"exec"))return ce=!0,De;if(typeof De=="string"){if(De.length===1)return De;var Pt=De.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),ot=new RegExp(Pt);return W.useSticky?z(ot):j(ot)}else throw Error("non exhaustive match")}}),pe=s.map(ne,function(rt){return rt.tokenTypeIdx}),he=s.map(ne,function(rt){var De=rt.GROUP;if(De!==r.Lexer.SKIPPED){if(s.isString(De))return De;if(s.isUndefined(De))return!1;throw Error("non exhaustive match")}}),fe=s.map(ne,function(rt){var De=rt.LONGER_ALT;if(De){var qe=s.indexOf(ne,De);return qe}}),be=s.map(ne,function(rt){return rt.PUSH_MODE}),re=s.map(ne,function(rt){return s.has(rt,"POP_MODE")}),Ft=Q(W.lineTerminatorCharacters),Dt=s.map(ne,function(rt){return!1});W.positionTracking!=="onlyOffset"&&(Dt=s.map(ne,function(rt){if(s.has(rt,"LINE_BREAKS"))return rt.LINE_BREAKS;if(de(rt,Ft)===!1)return a.canMatchCharCode(Ft,rt.PATTERN)}));var ft=s.map(ne,ve),Ae=s.map(J,_e),ei=s.reduce(ne,function(rt,De){var qe=De.GROUP;return s.isString(qe)&&qe!==r.Lexer.SKIPPED&&(rt[qe]=[]),rt},{}),$t=s.map(J,function(rt,De){return{pattern:J[De],longerAlt:fe[De],canLineTerminator:Dt[De],isCustom:ft[De],short:Ae[De],group:he[De],push:be[De],pop:re[De],tokenTypeIdx:pe[De],tokenType:ne[De]}});function At(rt,De,qe){rt[De]===void 0&&(rt[De]=[]),rt[De].push(qe)}var It=!0,St=[];return W.safeMode||(St=s.reduce(ne,function(rt,De,qe){if(typeof De.PATTERN=="string"){var Pt=De.PATTERN.charCodeAt(0);At(rt,Pt,$t[qe])}else if(s.isArray(De.START_CHARS_HINT))s.forEach(De.START_CHARS_HINT,function(Ei){var yi=typeof Ei=="string"?Ei.charCodeAt(0):Ei;At(rt,yi,$t[qe])});else if(s.isRegExp(De.PATTERN))if(De.PATTERN.unicode)It=!1,W.ensureOptimizations&&s.PRINT_ERROR(""+a.failedOptimizationPrefixMsg+("	Unable to analyze < "+De.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var ot=a.getStartCodes(De.PATTERN,W.ensureOptimizations);s.isEmpty(ot)&&(It=!1),s.forEach(ot,function(Ei){At(rt,Ei,$t[qe])})}else W.ensureOptimizations&&s.PRINT_ERROR(""+a.failedOptimizationPrefixMsg+("	TokenType: <"+n.tokenName(De)+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),It=!1;return rt},[])),It&&St.length<65536&&(St=s.packArray(St)),{emptyGroups:ei,patternIdxToConfig:$t,charCodeToPatternIdxToConfig:St,hasCustom:ce,canBeOptimized:It}}t.analyzeTokenTypes=m;function y(Z,W){var ne=[],ce=E(Z);ne=ne.concat(ce.errors);var J=C(ce.valid),pe=J.valid;return ne=ne.concat(J.errors),ne=ne.concat(_(pe)),ne=ne.concat(x(pe)),ne=ne.concat(M(pe,W)),ne=ne.concat(q(pe)),ne}t.validatePatterns=y;function _(Z){var W=[],ne=s.filter(Z,function(ce){return s.isRegExp(ce[c])});return W=W.concat(k(ne)),W=W.concat(I(ne)),W=W.concat(F(ne)),W=W.concat(P(ne)),W=W.concat(R(ne)),W}function E(Z){var W=s.filter(Z,function(J){return!s.has(J,c)}),ne=s.map(W,function(J){return{message:"Token Type: ->"+n.tokenName(J)+"<- missing static 'PATTERN' property",type:r.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[J]}}),ce=s.difference(Z,W);return{errors:ne,valid:ce}}t.findMissingPatterns=E;function C(Z){var W=s.filter(Z,function(J){var pe=J[c];return!s.isRegExp(pe)&&!s.isFunction(pe)&&!s.has(pe,"exec")&&!s.isString(pe)}),ne=s.map(W,function(J){return{message:"Token Type: ->"+n.tokenName(J)+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:r.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[J]}}),ce=s.difference(Z,W);return{errors:ne,valid:ce}}t.findInvalidPatterns=C;var S=/[^\\][\$]/;function k(Z){var W=function(J){e(pe,J);function pe(){var he=J!==null&&J.apply(this,arguments)||this;return he.found=!1,he}return pe.prototype.visitEndAnchor=function(he){this.found=!0},pe}(i.BaseRegExpVisitor),ne=s.filter(Z,function(J){var pe=J[c];try{var he=o.pattern(pe.toString()),fe=new W;return fe.visit(he),fe.found}catch{return S.test(pe.source)}}),ce=s.map(ne,function(J){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.tokenName(J)+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:r.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[J]}});return ce}t.findEndOfInputAnchor=k;function R(Z){var W=s.filter(Z,function(ce){var J=ce[c];return J.test("")}),ne=s.map(W,function(ce){return{message:"Token Type: ->"+n.tokenName(ce)+"<- static 'PATTERN' must not match an empty string",type:r.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[ce]}});return ne}t.findEmptyMatchRegExps=R;var O=/[^\\[][\^]|^\^/;function I(Z){var W=function(J){e(pe,J);function pe(){var he=J!==null&&J.apply(this,arguments)||this;return he.found=!1,he}return pe.prototype.visitStartAnchor=function(he){this.found=!0},pe}(i.BaseRegExpVisitor),ne=s.filter(Z,function(J){var pe=J[c];try{var he=o.pattern(pe.toString()),fe=new W;return fe.visit(he),fe.found}catch{return O.test(pe.source)}}),ce=s.map(ne,function(J){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.tokenName(J)+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:r.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[J]}});return ce}t.findStartOfInputAnchor=I;function F(Z){var W=s.filter(Z,function(ce){var J=ce[c];return J instanceof RegExp&&(J.multiline||J.global)}),ne=s.map(W,function(ce){return{message:"Token Type: ->"+n.tokenName(ce)+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:r.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[ce]}});return ne}t.findUnsupportedFlags=F;function P(Z){var W=[],ne=s.map(Z,function(pe){return s.reduce(Z,function(he,fe){return pe.PATTERN.source===fe.PATTERN.source&&!s.contains(W,fe)&&fe.PATTERN!==r.Lexer.NA&&(W.push(fe),he.push(fe)),he},[])});ne=s.compact(ne);var ce=s.filter(ne,function(pe){return pe.length>1}),J=s.map(ce,function(pe){var he=s.map(pe,function(be){return n.tokenName(be)}),fe=s.first(pe).PATTERN;return{message:"The same RegExp pattern ->"+fe+"<-"+("has been used in all of the following Token Types: "+he.join(", ")+" <-"),type:r.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:pe}});return J}t.findDuplicatePatterns=P;function x(Z){var W=s.filter(Z,function(ce){if(!s.has(ce,"GROUP"))return!1;var J=ce.GROUP;return J!==r.Lexer.SKIPPED&&J!==r.Lexer.NA&&!s.isString(J)}),ne=s.map(W,function(ce){return{message:"Token Type: ->"+n.tokenName(ce)+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:r.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[ce]}});return ne}t.findInvalidGroupType=x;function M(Z,W){var ne=s.filter(Z,function(J){return J.PUSH_MODE!==void 0&&!s.contains(W,J.PUSH_MODE)}),ce=s.map(ne,function(J){var pe="Token Type: ->"+n.tokenName(J)+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+J.PUSH_MODE+"<-which does not exist";return{message:pe,type:r.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[J]}});return ce}t.findModesThatDoNotExist=M;function q(Z){var W=[],ne=s.reduce(Z,function(ce,J,pe){var he=J.PATTERN;return he===r.Lexer.NA||(s.isString(he)?ce.push({str:he,idx:pe,tokenType:J}):s.isRegExp(he)&&B(he)&&ce.push({str:he.source,idx:pe,tokenType:J})),ce},[]);return s.forEach(Z,function(ce,J){s.forEach(ne,function(pe){var he=pe.str,fe=pe.idx,be=pe.tokenType;if(J<fe&&$(he,ce.PATTERN)){var re="Token: ->"+n.tokenName(be)+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+n.tokenName(ce)+"<-")+`in the lexer's definition.
See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;W.push({message:re,type:r.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[ce,be]})}})}),W}t.findUnreachablePatterns=q;function $(Z,W){if(s.isRegExp(W)){var ne=W.exec(Z);return ne!==null&&ne.index===0}else{if(s.isFunction(W))return W(Z,0,[],{});if(s.has(W,"exec"))return W.exec(Z,0,[],{});if(typeof W=="string")return W===Z;throw Error("non exhaustive match")}}function B(Z){var W=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return s.find(W,function(ne){return Z.source.indexOf(ne)!==-1})===void 0}function j(Z){var W=Z.ignoreCase?"i":"";return new RegExp("^(?:"+Z.source+")",W)}t.addStartOfInput=j;function z(Z){var W=Z.ignoreCase?"iy":"y";return new RegExp(""+Z.source,W)}t.addStickyFlag=z;function X(Z,W,ne){var ce=[];return s.has(Z,t.DEFAULT_MODE)||ce.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.DEFAULT_MODE+`> property in its definition
`,type:r.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),s.has(Z,t.MODES)||ce.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.MODES+`> property in its definition
`,type:r.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),s.has(Z,t.MODES)&&s.has(Z,t.DEFAULT_MODE)&&!s.has(Z.modes,Z.defaultMode)&&ce.push({message:"A MultiMode Lexer cannot be initialized with a "+t.DEFAULT_MODE+": <"+Z.defaultMode+`>which does not exist
`,type:r.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),s.has(Z,t.MODES)&&s.forEach(Z.modes,function(J,pe){s.forEach(J,function(he,fe){s.isUndefined(he)&&ce.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+pe+"> at index: <"+fe+`>
`),type:r.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),ce}t.performRuntimeChecks=X;function se(Z,W,ne){var ce=[],J=!1,pe=s.compact(s.flatten(s.mapValues(Z.modes,function(be){return be}))),he=s.reject(pe,function(be){return be[c]===r.Lexer.NA}),fe=Q(ne);return W&&s.forEach(he,function(be){var re=de(be,fe);if(re!==!1){var Ft=oe(be,re),Dt={message:Ft,type:re.issue,tokenType:be};ce.push(Dt)}else s.has(be,"LINE_BREAKS")?be.LINE_BREAKS===!0&&(J=!0):a.canMatchCharCode(fe,be.PATTERN)&&(J=!0)}),W&&!J&&ce.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:r.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),ce}t.performWarningRuntimeChecks=se;function ue(Z){var W={},ne=s.keys(Z);return s.forEach(ne,function(ce){var J=Z[ce];if(s.isArray(J))W[ce]=[];else throw Error("non exhaustive match")}),W}t.cloneEmptyGroups=ue;function ve(Z){var W=Z.PATTERN;if(s.isRegExp(W))return!1;if(s.isFunction(W))return!0;if(s.has(W,"exec"))return!0;if(s.isString(W))return!1;throw Error("non exhaustive match")}t.isCustomPattern=ve;function _e(Z){return s.isString(Z)&&Z.length===1?Z.charCodeAt(0):!1}t.isShortPattern=_e,t.LineTerminatorOptimizedTester={test:function(Z){for(var W=Z.length,ne=this.lastIndex;ne<W;ne++){var ce=Z.charCodeAt(ne);if(ce===10)return this.lastIndex=ne+1,!0;if(ce===13)return Z.charCodeAt(ne+1)===10?this.lastIndex=ne+2:this.lastIndex=ne+1,!0}return!1},lastIndex:0};function de(Z,W){if(s.has(Z,"LINE_BREAKS"))return!1;if(s.isRegExp(Z.PATTERN)){try{a.canMatchCharCode(W,Z.PATTERN)}catch(ne){return{issue:r.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:ne.message}}return!1}else{if(s.isString(Z.PATTERN))return!1;if(ve(Z))return{issue:r.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function oe(Z,W){if(W.issue===r.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+Z.name+`> Token Type
`)+("	 Root cause: "+W.errMsg+`.
`)+"	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(W.issue===r.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+Z.name+`> Token Type
`)+"	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}t.buildLineBreakIssueMessage=oe;function Q(Z){var W=s.map(Z,function(ne){return s.isString(ne)&&ne.length>0?ne.charCodeAt(0):ne});return W}}(z1)),z1}var X1={},qx;function WE(){return qx||(qx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Xe,i=wa,n=so();function r(R,O){var I=R.tokenTypeIdx;return I===O.tokenTypeIdx?!0:O.isParent===!0&&O.categoryMatchesMap[I]===!0}t.tokenStructuredMatcher=r;function s(R,O){return R.tokenTypeIdx===O.tokenTypeIdx}t.tokenStructuredMatcherNoCategories=s,t.tokenShortNameIdx=1,t.tokenIdxToClass=new i.HashTable;function a(R){var O=o(R);c(O),p(O),d(O),e.forEach(O,function(I){I.isParent=I.categoryMatches.length>0})}t.augmentTokenTypes=a;function o(R){for(var O=e.cloneArr(R),I=R,F=!0;F;){I=e.compact(e.flatten(e.map(I,function(x){return x.CATEGORIES})));var P=e.difference(I,O);O=O.concat(P),e.isEmpty(P)?F=!1:I=P}return O}t.expandCategories=o;function c(R){e.forEach(R,function(O){y(O)||(t.tokenIdxToClass.put(t.tokenShortNameIdx,O),O.tokenTypeIdx=t.tokenShortNameIdx++),_(O)&&!e.isArray(O.CATEGORIES)&&(O.CATEGORIES=[O.CATEGORIES]),_(O)||(O.CATEGORIES=[]),E(O)||(O.categoryMatches=[]),C(O)||(O.categoryMatchesMap={}),S(O)||(O.tokenName=n.tokenName(O))})}t.assignTokenDefaultProps=c;function d(R){e.forEach(R,function(O){O.categoryMatches=[],e.forEach(O.categoryMatchesMap,function(I,F){O.categoryMatches.push(t.tokenIdxToClass.get(F).tokenTypeIdx)})})}t.assignCategoriesTokensProp=d;function p(R){e.forEach(R,function(O){m([],O)})}t.assignCategoriesMapProp=p;function m(R,O){e.forEach(R,function(I){O.categoryMatchesMap[I.tokenTypeIdx]=!0}),e.forEach(O.CATEGORIES,function(I){var F=R.concat(O);e.contains(F,I)||m(F,I)})}t.singleAssignCategoriesToksMap=m;function y(R){return e.has(R,"tokenTypeIdx")}t.hasShortKeyProperty=y;function _(R){return e.has(R,"CATEGORIES")}t.hasCategoriesProperty=_;function E(R){return e.has(R,"categoryMatches")}t.hasExtendingTokensTypesProperty=E;function C(R){return e.has(R,"categoryMatchesMap")}t.hasExtendingTokensTypesMapProperty=C;function S(R){return e.has(R,"tokenName")}t.hasTokenNameProperty=S;function k(R){return e.has(R,"tokenTypeIdx")}t.isTokenType=k}(X1)),X1}var jE={};Object.defineProperty(jE,"__esModule",{value:!0});jE.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(t){return"Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(t,e,i,n,r){return"unexpected character: ->"+t.charAt(e)+"<- at offset: "+e+","+(" skipped "+i+" characters.")}};var Yx;function Wk(){return Yx||(Yx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Lj(),i=Xe,n=WE(),r=jE;(function(o){o[o.MISSING_PATTERN=0]="MISSING_PATTERN",o[o.INVALID_PATTERN=1]="INVALID_PATTERN",o[o.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",o[o.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",o[o.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",o[o.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",o[o.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",o[o.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",o[o.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",o[o.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",o[o.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",o[o.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",o[o.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",o[o.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",o[o.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",o[o.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",o[o.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(t.LexerDefinitionErrorType||(t.LexerDefinitionErrorType={}));var s={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:r.defaultLexerErrorProvider};Object.freeze(s);var a=function(){function o(c,d){var p=this;if(d===void 0&&(d=s),this.lexerDefinition=c,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof d=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);if(this.config=i.merge(s,d),this.config.lineTerminatorsPattern===s.lineTerminatorsPattern)this.config.lineTerminatorsPattern=e.LineTerminatorOptimizedTester;else if(this.config.lineTerminatorCharacters===s.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(d.safeMode&&d.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking);var m=!0,y;i.isArray(c)?(y={modes:{}},y.modes[e.DEFAULT_MODE]=i.cloneArr(c),y[e.DEFAULT_MODE]=e.DEFAULT_MODE):(m=!1,y=i.cloneObj(c)),this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(e.performRuntimeChecks(y,this.trackStartLines,this.config.lineTerminatorCharacters)),this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(e.performWarningRuntimeChecks(y,this.trackStartLines,this.config.lineTerminatorCharacters)),y.modes=y.modes?y.modes:{},i.forEach(y.modes,function(k,R){y.modes[R]=i.reject(k,function(O){return i.isUndefined(O)})});var _=i.keys(y.modes);if(i.forEach(y.modes,function(k,R){if(p.modes.push(R),p.lexerDefinitionErrors=p.lexerDefinitionErrors.concat(e.validatePatterns(k,_)),i.isEmpty(p.lexerDefinitionErrors)){n.augmentTokenTypes(k);var O=e.analyzeTokenTypes(k,{lineTerminatorCharacters:p.config.lineTerminatorCharacters,positionTracking:d.positionTracking,ensureOptimizations:d.ensureOptimizations,safeMode:d.safeMode});p.patternIdxToConfig[R]=O.patternIdxToConfig,p.charCodeToPatternIdxToConfig[R]=O.charCodeToPatternIdxToConfig,p.emptyGroups=i.merge(p.emptyGroups,O.emptyGroups),p.hasCustom=O.hasCustom||p.hasCustom,p.canModeBeOptimized[R]=O.canBeOptimized}}),this.defaultMode=y.defaultMode,!i.isEmpty(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){var E=i.map(this.lexerDefinitionErrors,function(k){return k.message}),C=E.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+C)}if(i.forEach(this.lexerDefinitionWarning,function(k){i.PRINT_WARNING(k.message)}),e.SUPPORT_STICKY?(this.chopInput=i.IDENTITY,this.match=this.matchWithTest):(this.updateLastIndex=i.NOOP,this.match=this.matchWithExec),m&&(this.handleModes=i.NOOP),this.trackStartLines===!1&&(this.computeNewColumn=i.IDENTITY),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=i.NOOP),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+this.config.positionTracking+'"');this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom);var S=i.reduce(this.canModeBeOptimized,function(k,R,O){return R===!1&&k.push(O),k},[]);if(d.ensureOptimizations&&!i.isEmpty(S))throw Error("Lexer Modes: < "+S.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`);i.toFastProperties(this)}return o.prototype.tokenize=function(c,d){if(d===void 0&&(d=this.defaultMode),!i.isEmpty(this.lexerDefinitionErrors)){var p=i.map(this.lexerDefinitionErrors,function(_){return _.message}),m=p.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+m)}var y=this.tokenizeInternal(c,d);return y},o.prototype.tokenizeInternal=function(c,d){var p=this,m,y,_,E,C,S,k,R,O,I,F,P,x,M,q=c,$=q.length,B=0,j=0,z=this.hasCustom?0:Math.floor(c.length/10),X=new Array(z),se=[],ue=this.trackStartLines?1:void 0,ve=this.trackStartLines?1:void 0,_e=e.cloneEmptyGroups(this.emptyGroups),de=this.trackStartLines,oe=this.config.lineTerminatorsPattern,Q=0,Z=[],W=[],ne=[],ce=[];Object.freeze(ce);var J=void 0,pe=function(ot){if(ne.length===1&&ot.tokenType.PUSH_MODE===void 0){var Ei=p.config.errorMessageProvider.buildUnableToPopLexerModeMessage(ot);se.push({offset:ot.startOffset,line:ot.startLine!==void 0?ot.startLine:void 0,column:ot.startColumn!==void 0?ot.startColumn:void 0,length:ot.image.length,message:Ei})}else{ne.pop();var yi=i.last(ne);Z=p.patternIdxToConfig[yi],W=p.charCodeToPatternIdxToConfig[yi],Q=Z.length;var Ti=p.canModeBeOptimized[yi]&&p.config.safeMode===!1;W&&Ti?J=function(wi){var hi=W[wi];return hi===void 0?ce:hi}:J=function(){return Z}}};function he(ot){ne.push(ot),W=this.charCodeToPatternIdxToConfig[ot],Z=this.patternIdxToConfig[ot],Q=Z.length,Q=Z.length;var Ei=this.canModeBeOptimized[ot]&&this.config.safeMode===!1;W&&Ei?J=function(yi){var Ti=W[yi];return Ti===void 0?ce:Ti}:J=function(){return Z}}he.call(this,d);for(var fe;B<$;){C=null;var be=q.charCodeAt(B),re=J(be),Ft=re.length;for(m=0;m<Ft;m++){fe=re[m];var Dt=fe.pattern;S=null;var ft=fe.short;if(ft!==!1?be===ft&&(C=Dt):fe.isCustom===!0?(M=Dt.exec(q,B,X,_e),M!==null?(C=M[0],M.payload!==void 0&&(S=M.payload)):C=null):(this.updateLastIndex(Dt,B),C=this.match(Dt,c,B)),C!==null){if(E=fe.longerAlt,E!==void 0){var Ae=Z[E],ei=Ae.pattern;k=null,Ae.isCustom===!0?(M=ei.exec(q,B,X,_e),M!==null?(_=M[0],M.payload!==void 0&&(k=M.payload)):_=null):(this.updateLastIndex(ei,B),_=this.match(ei,c,B)),_&&_.length>C.length&&(C=_,S=k,fe=Ae)}break}}if(C!==null){if(R=C.length,O=fe.group,O!==void 0&&(I=fe.tokenTypeIdx,F=this.createTokenInstance(C,B,I,fe.tokenType,ue,ve,R),this.handlePayload(F,S),O===!1?j=this.addToken(X,j,F):_e[O].push(F)),c=this.chopInput(c,R),B=B+R,ve=this.computeNewColumn(ve,R),de===!0&&fe.canLineTerminator===!0){var $t=0,At=void 0,It=void 0;oe.lastIndex=0;do At=oe.test(C),At===!0&&(It=oe.lastIndex-1,$t++);while(At===!0);$t!==0&&(ue=ue+$t,ve=R-It,this.updateTokenEndLineColumnLocation(F,O,It,$t,ue,ve,R))}this.handleModes(fe,pe,he,F)}else{for(var St=B,rt=ue,De=ve,qe=!1;!qe&&B<$;)for(q.charCodeAt(B),c=this.chopInput(c,1),B++,y=0;y<Q;y++){var Pt=Z[y],Dt=Pt.pattern,ft=Pt.short;if(ft!==!1?q.charCodeAt(B)===ft&&(qe=!0):Pt.isCustom===!0?qe=Dt.exec(q,B,X,_e)!==null:(this.updateLastIndex(Dt,B),qe=Dt.exec(c)!==null),qe===!0)break}P=B-St,x=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(q,St,P,rt,De),se.push({offset:St,line:rt,column:De,length:P,message:x})}}return this.hasCustom||(X.length=j),{tokens:X,groups:_e,errors:se}},o.prototype.handleModes=function(c,d,p,m){if(c.pop===!0){var y=c.push;d(m),y!==void 0&&p.call(this,y)}else c.push!==void 0&&p.call(this,c.push)},o.prototype.chopInput=function(c,d){return c.substring(d)},o.prototype.updateLastIndex=function(c,d){c.lastIndex=d},o.prototype.updateTokenEndLineColumnLocation=function(c,d,p,m,y,_,E){var C,S;d!==void 0&&(C=p===E-1,S=C?-1:0,m===1&&C===!0||(c.endLine=y+S,c.endColumn=_-1+-S))},o.prototype.computeNewColumn=function(c,d){return c+d},o.prototype.createTokenInstance=function(){return null},o.prototype.createOffsetOnlyToken=function(c,d,p,m){return{image:c,startOffset:d,tokenTypeIdx:p,tokenType:m}},o.prototype.createStartOnlyToken=function(c,d,p,m,y,_){return{image:c,startOffset:d,startLine:y,startColumn:_,tokenTypeIdx:p,tokenType:m}},o.prototype.createFullToken=function(c,d,p,m,y,_,E){return{image:c,startOffset:d,endOffset:d+E-1,startLine:y,endLine:y,startColumn:_,endColumn:_+E-1,tokenTypeIdx:p,tokenType:m}},o.prototype.addToken=function(c,d,p){return 666},o.prototype.addTokenUsingPush=function(c,d,p){return c.push(p),d},o.prototype.addTokenUsingMemberAccess=function(c,d,p){return c[d]=p,d++,d},o.prototype.handlePayload=function(c,d){},o.prototype.handlePayloadNoCustom=function(c,d){},o.prototype.handlePayloadWithCustom=function(c,d){d!==null&&(c.payload=d)},o.prototype.match=function(c,d,p){return null},o.prototype.matchWithTest=function(c,d,p){var m=c.test(d);return m===!0?d.substring(p,c.lastIndex):null},o.prototype.matchWithExec=function(c,d){var p=c.exec(d);return p!==null?p[0]:p},o.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",o.NA=/NOT_APPLICABLE/,o}();t.Lexer=a}(j1)),j1}var Wx;function so(){return Wx||(Wx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Xe,i=wa,n=Wk(),r=WE();function s(F){return a(F)?F.LABEL:o(F)}t.tokenLabel=s;function a(F){return e.isString(F.LABEL)&&F.LABEL!==""}t.hasTokenLabel=a;function o(F){return e.isObject(F)&&F.hasOwnProperty("tokenName")&&e.isString(F.tokenName)?F.tokenName:i.functionName(F)}t.tokenName=o;var c="parent",d="categories",p="label",m="group",y="push_mode",_="pop_mode",E="longer_alt",C="line_breaks",S="start_chars_hint";function k(F){return R(F)}t.createToken=k;function R(F){var P=F.name,x=F.pattern,M={};if(i.defineNameProp(M,P)||(M.tokenName=P),e.isUndefined(x)||(M.PATTERN=x),e.has(F,c))throw`The parent property is no longer supported.
See: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.`;return e.has(F,d)&&(M.CATEGORIES=F[d]),r.augmentTokenTypes([M]),e.has(F,p)&&(M.LABEL=F[p]),e.has(F,m)&&(M.GROUP=F[m]),e.has(F,_)&&(M.POP_MODE=F[_]),e.has(F,y)&&(M.PUSH_MODE=F[y]),e.has(F,E)&&(M.LONGER_ALT=F[E]),e.has(F,C)&&(M.LINE_BREAKS=F[C]),e.has(F,S)&&(M.START_CHARS_HINT=F[S]),M}t.EOF=k({name:"EOF",pattern:n.Lexer.NA}),r.augmentTokenTypes([t.EOF]);function O(F,P,x,M,q,$,B,j){return{image:P,startOffset:x,endOffset:M,startLine:q,endLine:$,startColumn:B,endColumn:j,tokenTypeIdx:F.tokenTypeIdx,tokenType:F}}t.createTokenInstance=O;function I(F,P){return r.tokenStructuredMatcher(F,P)}t.tokenMatcher=I}(W1)),W1}var ou=Si&&Si.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},t(e,i)};return function(e,i){t(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(zi,"__esModule",{value:!0});var kn=Xe,jx=so(),uc=function(){function t(e){this.definition=e}return t.prototype.accept=function(e){e.visit(this),kn.forEach(this.definition,function(i){i.accept(e)})},t}();zi.AbstractProduction=uc;var tU=function(t){ou(e,t);function e(i){var n=t.call(this,[])||this;return n.idx=1,kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return Object.defineProperty(e.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(i){},enumerable:!0,configurable:!0}),e.prototype.accept=function(i){i.visit(this)},e}(uc);zi.NonTerminal=tU;var iU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return n.orgText="",kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.Rule=iU;var nU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.Flat=nU;var rU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return n.idx=1,kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.Option=rU;var sU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return n.idx=1,kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.RepetitionMandatory=sU;var aU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return n.idx=1,kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.RepetitionMandatoryWithSeparator=aU;var oU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return n.idx=1,kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.Repetition=oU;var lU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return n.idx=1,kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.RepetitionWithSeparator=lU;var cU=function(t){ou(e,t);function e(i){var n=t.call(this,i.definition)||this;return n.idx=1,kn.assign(n,kn.pick(i,function(r){return r!==void 0})),n}return e}(uc);zi.Alternation=cU;var v0=function(){function t(e){this.idx=1,kn.assign(this,kn.pick(e,function(i){return i!==void 0}))}return t.prototype.accept=function(e){e.visit(this)},t}();zi.Terminal=v0;function Bj(t){return kn.map(t,Fg)}zi.serializeGrammar=Bj;function Fg(t){function e(r){return kn.map(r,Fg)}if(t instanceof tU)return{type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};if(t instanceof nU)return{type:"Flat",definition:e(t.definition)};if(t instanceof rU)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof sU)return{type:"RepetitionMandatory",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof aU)return{type:"RepetitionMandatoryWithSeparator",name:t.name,idx:t.idx,separator:Fg(new v0({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof lU)return{type:"RepetitionWithSeparator",name:t.name,idx:t.idx,separator:Fg(new v0({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof oU)return{type:"Repetition",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof cU)return{type:"Alternation",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof v0){var i={type:"Terminal",name:jx.tokenName(t.terminalType),label:jx.tokenLabel(t.terminalType),idx:t.idx},n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(i.pattern=kn.isRegExp(n)?n.source:n),i}else{if(t instanceof iU)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}zi.serializeProduction=Fg;Object.defineProperty(Jv,"__esModule",{value:!0});var K1=Xe,ua=zi,Fj=function(){function t(){}return t.prototype.walk=function(e,i){var n=this;i===void 0&&(i=[]),K1.forEach(e.definition,function(r,s){var a=K1.drop(e.definition,s+1);if(r instanceof ua.NonTerminal)n.walkProdRef(r,a,i);else if(r instanceof ua.Terminal)n.walkTerminal(r,a,i);else if(r instanceof ua.Flat)n.walkFlat(r,a,i);else if(r instanceof ua.Option)n.walkOption(r,a,i);else if(r instanceof ua.RepetitionMandatory)n.walkAtLeastOne(r,a,i);else if(r instanceof ua.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(r,a,i);else if(r instanceof ua.RepetitionWithSeparator)n.walkManySep(r,a,i);else if(r instanceof ua.Repetition)n.walkMany(r,a,i);else if(r instanceof ua.Alternation)n.walkOr(r,a,i);else throw Error("non exhaustive match")})},t.prototype.walkTerminal=function(e,i,n){},t.prototype.walkProdRef=function(e,i,n){},t.prototype.walkFlat=function(e,i,n){var r=i.concat(n);this.walk(e,r)},t.prototype.walkOption=function(e,i,n){var r=i.concat(n);this.walk(e,r)},t.prototype.walkAtLeastOne=function(e,i,n){var r=[new ua.Option({definition:e.definition})].concat(i,n);this.walk(e,r)},t.prototype.walkAtLeastOneSep=function(e,i,n){var r=zx(e,i,n);this.walk(e,r)},t.prototype.walkMany=function(e,i,n){var r=[new ua.Option({definition:e.definition})].concat(i,n);this.walk(e,r)},t.prototype.walkManySep=function(e,i,n){var r=zx(e,i,n);this.walk(e,r)},t.prototype.walkOr=function(e,i,n){var r=this,s=i.concat(n);K1.forEach(e.definition,function(a){var o=new ua.Flat({definition:[a]});r.walk(o,s)})},t}();Jv.RestWalker=Fj;function zx(t,e,i){var n=[new ua.Option({definition:[new ua.Terminal({terminalType:t.separator})].concat(t.definition)})],r=n.concat(e,i);return r}var Lf={},dc={},qd={};Object.defineProperty(qd,"__esModule",{value:!0});var Nl=zi,$j=function(){function t(){}return t.prototype.visit=function(e){if(e instanceof Nl.NonTerminal)return this.visitNonTerminal(e);if(e instanceof Nl.Flat)return this.visitFlat(e);if(e instanceof Nl.Option)return this.visitOption(e);if(e instanceof Nl.RepetitionMandatory)return this.visitRepetitionMandatory(e);if(e instanceof Nl.RepetitionMandatoryWithSeparator)return this.visitRepetitionMandatoryWithSeparator(e);if(e instanceof Nl.RepetitionWithSeparator)return this.visitRepetitionWithSeparator(e);if(e instanceof Nl.Repetition)return this.visitRepetition(e);if(e instanceof Nl.Alternation)return this.visitAlternation(e);if(e instanceof Nl.Terminal)return this.visitTerminal(e);if(e instanceof Nl.Rule)return this.visitRule(e);throw Error("non exhaustive match")},t.prototype.visitNonTerminal=function(e){},t.prototype.visitFlat=function(e){},t.prototype.visitOption=function(e){},t.prototype.visitRepetition=function(e){},t.prototype.visitRepetitionMandatory=function(e){},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){},t.prototype.visitRepetitionWithSeparator=function(e){},t.prototype.visitAlternation=function(e){},t.prototype.visitTerminal=function(e){},t.prototype.visitRule=function(e){},t}();qd.GAstVisitor=$j;var Hj=Si&&Si.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},t(e,i)};return function(e,i){t(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(dc,"__esModule",{value:!0});var $g=Xe,wn=zi,Vj=qd,qj=so();function Yj(t){return t instanceof wn.Flat||t instanceof wn.Option||t instanceof wn.Repetition||t instanceof wn.RepetitionMandatory||t instanceof wn.RepetitionMandatoryWithSeparator||t instanceof wn.RepetitionWithSeparator||t instanceof wn.Terminal||t instanceof wn.Rule}dc.isSequenceProd=Yj;function qC(t,e){e===void 0&&(e=[]);var i=t instanceof wn.Option||t instanceof wn.Repetition||t instanceof wn.RepetitionWithSeparator;return i?!0:t instanceof wn.Alternation?$g.some(t.definition,function(n){return qC(n,e)}):t instanceof wn.NonTerminal&&$g.contains(e,t)?!1:t instanceof wn.AbstractProduction?(t instanceof wn.NonTerminal&&e.push(t),$g.every(t.definition,function(n){return qC(n,e)})):!1}dc.isOptionalProd=qC;function Wj(t){return t instanceof wn.Alternation}dc.isBranchingProd=Wj;function jj(t){if(t instanceof wn.NonTerminal)return"SUBRULE";if(t instanceof wn.Option)return"OPTION";if(t instanceof wn.Alternation)return"OR";if(t instanceof wn.RepetitionMandatory)return"AT_LEAST_ONE";if(t instanceof wn.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(t instanceof wn.RepetitionWithSeparator)return"MANY_SEP";if(t instanceof wn.Repetition)return"MANY";if(t instanceof wn.Terminal)return"CONSUME";throw Error("non exhaustive match")}dc.getProductionDslName=jj;var zj=function(t){Hj(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.separator="-",i.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},i}return e.prototype.visitTerminal=function(i){var n=qj.tokenName(i.terminalType)+this.separator+"Terminal";$g.has(this.dslMethods,n)||(this.dslMethods[n]=[]),this.dslMethods[n].push(i)},e.prototype.visitNonTerminal=function(i){var n=i.nonTerminalName+this.separator+"Terminal";$g.has(this.dslMethods,n)||(this.dslMethods[n]=[]),this.dslMethods[n].push(i)},e.prototype.visitOption=function(i){this.dslMethods.option.push(i)},e.prototype.visitRepetitionWithSeparator=function(i){this.dslMethods.repetitionWithSeparator.push(i)},e.prototype.visitRepetitionMandatory=function(i){this.dslMethods.repetitionMandatory.push(i)},e.prototype.visitRepetitionMandatoryWithSeparator=function(i){this.dslMethods.repetitionMandatoryWithSeparator.push(i)},e.prototype.visitRepetition=function(i){this.dslMethods.repetition.push(i)},e.prototype.visitAlternation=function(i){this.dslMethods.alternation.push(i)},e}(Vj.GAstVisitor);dc.DslMethodsCollectorVisitor=zj;Object.defineProperty(Lf,"__esModule",{value:!0});var b0=Xe,Xx=zi,YC=dc;function zE(t){if(t instanceof Xx.NonTerminal)return zE(t.referencedRule);if(t instanceof Xx.Terminal)return hU(t);if(YC.isSequenceProd(t))return uU(t);if(YC.isBranchingProd(t))return dU(t);throw Error("non exhaustive match")}Lf.first=zE;function uU(t){for(var e=[],i=t.definition,n=0,r=i.length>n,s,a=!0;r&&a;)s=i[n],a=YC.isOptionalProd(s),e=e.concat(zE(s)),n=n+1,r=i.length>n;return b0.uniq(e)}Lf.firstForSequence=uU;function dU(t){var e=b0.map(t.definition,function(i){return zE(i)});return b0.uniq(b0.flatten(e))}Lf.firstForBranching=dU;function hU(t){return[t.terminalType]}Lf.firstForTerminal=hU;var XE={};Object.defineProperty(XE,"__esModule",{value:!0});XE.IN="_~IN~_";var Xj=Si&&Si.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},t(e,i)};return function(e,i){t(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(Wm,"__esModule",{value:!0});var Kj=Jv,fU=wa,Zj=Lf,Qj=Xe,pU=XE,Jj=so(),ez=zi,mU=function(t){Xj(e,t);function e(i){var n=t.call(this)||this;return n.topProd=i,n.follows=new fU.HashTable,n}return e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(i,n,r){},e.prototype.walkProdRef=function(i,n,r){var s=yU(i.referencedRule,i.idx)+this.topProd.name,a=n.concat(r),o=new ez.Flat({definition:a}),c=Zj.first(o);this.follows.put(s,c)},e}(Kj.RestWalker);Wm.ResyncFollowsWalker=mU;function tz(t){var e=new fU.HashTable;return Qj.forEach(t,function(i){var n=new mU(i).startWalking();e.putAll(n)}),e}Wm.computeAllProdsFollows=tz;function yU(t,e){return t.name+e+pU.IN}Wm.buildBetweenProdsFollowPrefix=yU;function iz(t){var e=Jj.tokenName(t.terminalType);return e+t.idx+pU.IN}Wm.buildInProdFollowPrefix=iz;var jk={},KE={};Object.defineProperty(KE,"__esModule",{value:!0});var nz=function(){function t(e,i){if(this.start=e,this.end=i,!gU(e,i))throw new Error("INVALID RANGE")}return t.prototype.contains=function(e){return this.start<=e&&this.end>=e},t.prototype.containsRange=function(e){return this.start<=e.start&&this.end>=e.end},t.prototype.isContainedInRange=function(e){return e.containsRange(this)},t.prototype.strictlyContainsRange=function(e){return this.start<e.start&&this.end>e.end},t.prototype.isStrictlyContainedInRange=function(e){return e.strictlyContainsRange(this)},t}();KE.Range=nz;function gU(t,e){return!(t<0||e<t)}KE.isValidRange=gU;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=KE,i=Xe,n=zi,r;(function(ge){ge[ge.OPTION=0]="OPTION",ge[ge.OR=1]="OR",ge[ge.MANY=2]="MANY",ge[ge.MANY_SEP=3]="MANY_SEP",ge[ge.AT_LEAST_ONE=4]="AT_LEAST_ONE",ge[ge.AT_LEAST_ONE_SEP=5]="AT_LEAST_ONE_SEP",ge[ge.REF=6]="REF",ge[ge.TERMINAL=7]="TERMINAL",ge[ge.FLAT=8]="FLAT"})(r=t.ProdType||(t.ProdType={}));var s=/(?:\s*{\s*NAME\s*:\s*["'`]([\w$]*)["'`])?/,a=new RegExp(s.source.replace("{","").replace(")?","\\s*,)?")),o=/\.\s*CONSUME(\d+)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,c=new RegExp(o.source,"g"),d=/\.\s*SUBRULE(\d+)?\s*\(\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,p=new RegExp(d.source,"g"),m=/\.\s*OPTION(\d+)?\s*\(/,y=new RegExp(m.source+s.source),_=new RegExp(m.source,"g"),E=/\.\s*MANY(\d+)?\s*\(/,C=new RegExp(E.source+s.source),S=new RegExp(E.source,"g"),k=/\s*SEP\s*:\s*(?:[a-zA-Z_$]\w*\s*\.\s*)*([a-zA-Z_$]\w*)/,R=/\.\s*MANY_SEP(\d+)?\s*\(\s*{/,O=new RegExp(R.source+a.source+k.source),I=new RegExp(O.source,"g"),F=/\.\s*AT_LEAST_ONE_SEP(\d+)?\s*\(\s*{/,P=new RegExp(F.source+a.source+k.source),x=new RegExp(P.source,"g"),M=/\.\s*AT_LEAST_ONE(\d+)?\s*\(/,q=new RegExp(M.source+s.source),$=new RegExp(M.source,"g"),B=/\.\s*OR(\d+)?\s*\(/,j=new RegExp(B.source+s.source),z=new RegExp(B.source,"g"),X=/\s*(ALT)\s*:/,se=new RegExp(a.source+X.source),ue=new RegExp(se.source,"g");t.terminalNameToConstructor={};function ve(ge,Oe,Be){t.terminalNameToConstructor=Be;var ct=" "+ge,it=$t(" "+ct),at=It(it),Kt=St(at),fi=new e.Range(0,ge.length+2),An=_e(Oe,fi,Kt,ge);return An}t.buildTopProduction=ve;function _e(ge,Oe,Be,ct){var it=new n.Rule({name:ge,definition:[],orgText:ct});return re(it,Oe,Be,ge)}function de(ge,Oe,Be){switch(ge.type){case r.AT_LEAST_ONE:return W(ge,Oe,Be);case r.AT_LEAST_ONE_SEP:return ne(ge,Oe,Be);case r.MANY_SEP:return J(ge,Oe,Be);case r.MANY:return ce(ge,Oe,Be);case r.OPTION:return he(ge,Oe,Be);case r.OR:return fe(ge,Oe,Be);case r.FLAT:return be(ge,Oe,Be);case r.REF:return oe(ge);case r.TERMINAL:return Q(ge,Be);default:throw Error("non exhaustive match")}}t.buildProdGast=de;function oe(ge){var Oe=d.exec(ge.text),Be=Oe[1]===void 0,ct=Be?0:parseInt(Oe[1],10),it=Oe[2],at=new n.NonTerminal({nonTerminalName:it,idx:ct});return at}function Q(ge,Oe){var Be=o.exec(ge.text),ct=Be[1]===void 0,it=ct?0:parseInt(Be[1],10),at=Be[2],Kt=t.terminalNameToConstructor[at];if(!Kt)throw Error("Terminal Token name: <"+at+"> not found in rule: <"+Oe+`>  
	See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#TERMINAL_NAME_NOT_FOUND
	For Further details.`);var fi=new n.Terminal({terminalType:Kt,idx:it});return fi}function Z(ge,Oe,Be,ct,it){var at=ge.exec(Be.text),Kt=at[1]===void 0;Oe.idx=Kt?0:parseInt(at[1],10);var fi=at[2];return i.isUndefined(fi)||(Oe.name=fi),re(Oe,Be.range,ct,it)}function W(ge,Oe,Be){return Z(q,new n.RepetitionMandatory({definition:[]}),ge,Oe,Be)}function ne(ge,Oe,Be){return pe(ge,Oe,n.RepetitionMandatoryWithSeparator,P,Be)}function ce(ge,Oe,Be){return Z(C,new n.Repetition({definition:[]}),ge,Oe,Be)}function J(ge,Oe,Be){return pe(ge,Oe,n.RepetitionWithSeparator,O,Be)}function pe(ge,Oe,Be,ct,it){var at=ct.exec(ge.text),Kt=at[1]===void 0,fi=Kt?0:parseInt(at[1],10),An=at[3],Sa=t.terminalNameToConstructor[An];if(!Sa)throw Error("Separator Terminal Token name: "+An+" not found");var dr=new Be({definition:[],separator:Sa,idx:fi}),Zi=at[2];return i.isUndefined(Zi)||(dr.name=Zi),re(dr,ge.range,Oe,it)}function he(ge,Oe,Be){return Z(y,new n.Option({definition:[]}),ge,Oe,Be)}function fe(ge,Oe,Be){return Z(j,new n.Alternation({definition:[]}),ge,Oe,Be)}function be(ge,Oe,Be){var ct=new n.Flat({definition:[]}),it=se.exec(ge.text),at=it[1];return i.isUndefined(at)||(ct.name=at),re(ct,ge.range,Oe,Be)}function re(ge,Oe,Be,ct){var it=Ft(Oe,Be),at=i.sortBy(it,function(fi){return fi.range.start}),Kt=[];return i.forEach(at,function(fi){Kt.push(de(fi,Be,ct))}),ge.definition=Kt,ge}function Ft(ge,Oe){return i.filter(Oe,function(Be){var ct=ge.strictlyContainsRange(Be.range),it=i.every(Oe,function(at){var Kt=at.range.strictlyContainsRange(Be.range),fi=at.range.isStrictlyContainedInRange(ge);return!(Kt&&fi)});return ct&&it})}t.getDirectlyContainedRanges=Ft;var Dt=/\/\/.*/g,ft=/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,Ae=/(NAME\s*:\s*)?"([^\\"]|\\([bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/g,ei=/(NAME\s*:\s*)?'([^\\']|\\([bfnrtv'\\/]|u[0-9a-fA-F]{4}))*'/g;function $t(ge){var Oe=ge.replace(Dt,""),Be=Oe.replace(ft,"");return Be}t.removeComments=$t;function At(ge,Oe){return Oe!==void 0?ge:""}function It(ge){var Oe=ge.replace(Ae,At),Be=Oe.replace(ei,At);return Be}t.removeStringLiterals=It;function St(ge){var Oe=rt(ge),Be=De(ge),ct=qe(ge),it=Pt(ge),at=ot(ge),Kt=Ei(ge),fi=yi(ge),An=Ti(ge);return[].concat(Oe,Be,ct,it,at,Kt,fi,An)}t.createRanges=St;function rt(ge){return xt(ge,r.TERMINAL,c)}t.createTerminalRanges=rt;function De(ge){return xt(ge,r.REF,p)}t.createRefsRanges=De;function qe(ge){return zt(ge,r.AT_LEAST_ONE,$)}t.createAtLeastOneRanges=qe;function Pt(ge){return zt(ge,r.AT_LEAST_ONE_SEP,x)}t.createAtLeastOneSepRanges=Pt;function ot(ge){return zt(ge,r.MANY,S)}t.createManyRanges=ot;function Ei(ge){return zt(ge,r.MANY_SEP,I)}t.createManySepRanges=Ei;function yi(ge){return zt(ge,r.OPTION,_)}t.createOptionRanges=yi;function Ti(ge){var Oe=zt(ge,r.OR,z),Be=Ki(Oe);return Oe.concat(Be)}t.createOrRanges=Ti;var wi=i.partial(Xt,"{","}"),hi=i.partial(Xt,"(",")");function Ki(ge){var Oe=[];i.forEach(ge,function(ct){var it=Ke(ct.text,r.FLAT,ue,wi),at=ct.range.start;i.forEach(it,function(Kt){Kt.range.start+=at,Kt.range.end+=at}),Oe=Oe.concat(it)});var Be=i.uniq(Oe,function(ct){return ct.type+"~"+ct.range.start+"~"+ct.range.end+"~"+ct.text});return Be}t.createOrPartRanges=Ki;function xt(ge,Oe,Be){for(var ct=[],it;it=Be.exec(ge);){var at=it.index,Kt=Be.lastIndex,fi=new e.Range(at,Kt),An=it[0];ct.push({range:fi,text:An,type:Oe})}return ct}function zt(ge,Oe,Be){return Ke(ge,Oe,Be,hi)}function Ke(ge,Oe,Be,ct){for(var it=[],at;at=Be.exec(ge);){var Kt=at.index,fi=ct(Kt+at[0].length,ge),An=new e.Range(Kt,fi),Sa=ge.substr(Kt,fi-Kt+1);it.push({range:An,text:Sa,type:Oe})}return it}function Xt(ge,Oe,Be,ct){for(var it=[1],at=-1;!i.isEmpty(it)&&at+Be<ct.length;){at++;var Kt=ct.charAt(Be+at);Kt===ge?it.push(1):Kt===Oe&&it.pop()}if(i.isEmpty(it))return at+Be;throw new Error("INVALID INPUT TEXT, UNTERMINATED PARENTHESIS")}t.findClosingOffset=Xt;function dt(ge,Oe){return i.map(ge,function(Be){return Ot(Be,Oe)})}t.deserializeGrammar=dt;function Ot(ge,Oe){switch(ge.type){case"NonTerminal":return new n.NonTerminal({nonTerminalName:ge.name,idx:ge.idx});case"Flat":return new n.Flat({name:ge.name,definition:dt(ge.definition,Oe)});case"Option":return new n.Option({name:ge.name,idx:ge.idx,definition:dt(ge.definition,Oe)});case"RepetitionMandatory":return new n.RepetitionMandatory({name:ge.name,idx:ge.idx,definition:dt(ge.definition,Oe)});case"RepetitionMandatoryWithSeparator":return new n.RepetitionMandatoryWithSeparator({name:ge.name,idx:ge.idx,separator:Oe[ge.separator.name],definition:dt(ge.definition,Oe)});case"RepetitionWithSeparator":return new n.RepetitionWithSeparator({name:ge.name,idx:ge.idx,separator:Oe[ge.separator.name],definition:dt(ge.definition,Oe)});case"Repetition":return new n.Repetition({name:ge.name,idx:ge.idx,definition:dt(ge.definition,Oe)});case"Alternation":return new n.Alternation({name:ge.name,idx:ge.idx,definition:dt(ge.definition,Oe)});case"Terminal":return new n.Terminal({terminalType:Oe[ge.name],idx:ge.idx});case"Rule":return new n.Rule({name:ge.name,orgText:ge.orgText,definition:dt(ge.definition,Oe)})}}t.deserializeProduction=Ot})(jk);var hc={},eb={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BITS_FOR_METHOD_IDX=4,t.BITS_FOR_OCCURRENCE_IDX=4,t.BITS_FOR_RULE_IDX=24,t.BITS_FOR_ALT_IDX=8,t.OR_IDX=1<<t.BITS_FOR_METHOD_IDX,t.OPTION_IDX=2<<t.BITS_FOR_METHOD_IDX,t.MANY_IDX=3<<t.BITS_FOR_METHOD_IDX,t.AT_LEAST_ONE_IDX=4<<t.BITS_FOR_METHOD_IDX,t.MANY_SEP_IDX=5<<t.BITS_FOR_METHOD_IDX,t.AT_LEAST_ONE_SEP_IDX=6<<t.BITS_FOR_METHOD_IDX;function e(r,s,a){return a|s|r}t.getKeyForAutomaticLookahead=e;var i=32-t.BITS_FOR_ALT_IDX;function n(r,s,a,o){var c=o+1<<i;return e(r,s,a)|c}t.getKeyForAltIndex=n})(eb);var rz=Si&&Si.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},t(e,i)};return function(e,i){t(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(hc,"__esModule",{value:!0});var Hg=Xe,sz=wa,Mc=eb,Fa=zi,az=qd;function oz(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}hc.setNodeLocationOnlyOffset=oz;function lz(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}hc.setNodeLocationFull=lz;function cz(t,e,i){t.children[i]===void 0?t.children[i]=[e]:t.children[i].push(e)}hc.addTerminalToCst=cz;function uz(t,e,i){t.children[e]===void 0?t.children[e]=[i]:t.children[e].push(i)}hc.addNoneTerminalToCst=uz;var vU=function(t){rz(e,t);function e(i){var n=t.call(this)||this;return n.result=[],n.ruleIdx=i,n}return e.prototype.collectNamedDSLMethod=function(i,n,r){if(!Hg.isUndefined(i.name)){var s=void 0;if(i instanceof Fa.Option||i instanceof Fa.Repetition||i instanceof Fa.RepetitionMandatory||i instanceof Fa.Alternation)s=new n({definition:i.definition,idx:i.idx});else if(i instanceof Fa.RepetitionMandatoryWithSeparator||i instanceof Fa.RepetitionWithSeparator)s=new n({definition:i.definition,idx:i.idx,separator:i.separator});else throw Error("non exhaustive match");var a=[s],o=Mc.getKeyForAutomaticLookahead(this.ruleIdx,r,i.idx);this.result.push({def:a,key:o,name:i.name,orgProd:i})}},e.prototype.visitOption=function(i){this.collectNamedDSLMethod(i,Fa.Option,Mc.OPTION_IDX)},e.prototype.visitRepetition=function(i){this.collectNamedDSLMethod(i,Fa.Repetition,Mc.MANY_IDX)},e.prototype.visitRepetitionMandatory=function(i){this.collectNamedDSLMethod(i,Fa.RepetitionMandatory,Mc.AT_LEAST_ONE_IDX)},e.prototype.visitRepetitionMandatoryWithSeparator=function(i){this.collectNamedDSLMethod(i,Fa.RepetitionMandatoryWithSeparator,Mc.AT_LEAST_ONE_SEP_IDX)},e.prototype.visitRepetitionWithSeparator=function(i){this.collectNamedDSLMethod(i,Fa.RepetitionWithSeparator,Mc.MANY_SEP_IDX)},e.prototype.visitAlternation=function(i){var n=this;this.collectNamedDSLMethod(i,Fa.Alternation,Mc.OR_IDX);var r=i.definition.length>1;Hg.forEach(i.definition,function(s,a){if(!Hg.isUndefined(s.name)){var o=s.definition;r?o=[new Fa.Option({definition:s.definition})]:o=s.definition;var c=Mc.getKeyForAltIndex(n.ruleIdx,Mc.OR_IDX,i.idx,a);n.result.push({def:o,key:c,name:s.name,orgProd:s})}})},e}(az.GAstVisitor);hc.NamedDSLMethodsCollectorVisitor=vU;function dz(t,e){var i={dictDef:new sz.HashTable,allRuleNames:[]};return Hg.forEach(t,function(n){var r=e.get(n.name);i.allRuleNames.push(n.name);var s=new vU(r);n.accept(s),Hg.forEach(s.result,function(a){a.def,a.key;var o=a.name;i.allRuleNames.push(n.name+o)})}),i}hc.analyzeCst=dz;var Z1={},Q1={},tb={},Ca={},Bf=Si&&Si.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},t(e,i)};return function(e,i){t(e,i);function n(){this.constructor=e}e.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(Ca,"__esModule",{value:!0});var bU=Jv,Ai=Xe,Kx=so(),hz=Lf,li=zi,_U=function(t){Bf(e,t);function e(i,n){var r=t.call(this)||this;return r.topProd=i,r.path=n,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Ai.cloneArr(this.path.ruleStack).reverse(),this.occurrenceStack=Ai.cloneArr(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(i,n){n===void 0&&(n=[]),this.found||t.prototype.walk.call(this,i,n)},e.prototype.walkProdRef=function(i,n,r){if(i.referencedRule.name===this.nextProductionName&&i.idx===this.nextProductionOccurrence){var s=n.concat(r);this.updateExpectedNext(),this.walk(i.referencedRule,s)}},e.prototype.updateExpectedNext=function(){Ai.isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(bU.RestWalker);Ca.AbstractNextPossibleTokensWalker=_U;var fz=function(t){Bf(e,t);function e(i,n){var r=t.call(this,i,n)||this;return r.path=n,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=Kx.tokenName(r.path.lastTok),r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return e.prototype.walkTerminal=function(i,n,r){if(this.isAtEndOfPath&&Kx.tokenName(i.terminalType)===this.nextTerminalName&&i.idx===this.nextTerminalOccurrence&&!this.found){var s=n.concat(r),a=new li.Flat({definition:s});this.possibleTokTypes=hz.first(a),this.found=!0}},e}(_U);Ca.NextAfterTokenWalker=fz;var ib=function(t){Bf(e,t);function e(i,n){var r=t.call(this)||this;return r.topRule=i,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(bU.RestWalker);Ca.AbstractNextTerminalAfterProductionWalker=ib;var pz=function(t){Bf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkMany=function(i,n,r){if(i.idx===this.occurrence){var s=Ai.first(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof li.Terminal&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkMany.call(this,i,n,r)},e}(ib);Ca.NextTerminalAfterManyWalker=pz;var mz=function(t){Bf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkManySep=function(i,n,r){if(i.idx===this.occurrence){var s=Ai.first(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof li.Terminal&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkManySep.call(this,i,n,r)},e}(ib);Ca.NextTerminalAfterManySepWalker=mz;var yz=function(t){Bf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkAtLeastOne=function(i,n,r){if(i.idx===this.occurrence){var s=Ai.first(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof li.Terminal&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkAtLeastOne.call(this,i,n,r)},e}(ib);Ca.NextTerminalAfterAtLeastOneWalker=yz;var gz=function(t){Bf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkAtLeastOneSep=function(i,n,r){if(i.idx===this.occurrence){var s=Ai.first(n.concat(r));this.result.isEndOfRule=s===void 0,s instanceof li.Terminal&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else t.prototype.walkAtLeastOneSep.call(this,i,n,r)},e}(ib);Ca.NextTerminalAfterAtLeastOneSepWalker=gz;function EU(t,e,i){i===void 0&&(i=[]),i=Ai.cloneArr(i);var n=[],r=0;function s(d){return d.concat(Ai.drop(t,r+1))}function a(d){var p=EU(s(d),e,i);return n.concat(p)}for(;i.length<e&&r<t.length;){var o=t[r];if(o instanceof li.Flat)return a(o.definition);if(o instanceof li.NonTerminal)return a(o.definition);if(o instanceof li.Option)n=a(o.definition);else if(o instanceof li.RepetitionMandatory){var c=o.definition.concat([new li.Repetition({definition:o.definition})]);return a(c)}else if(o instanceof li.RepetitionMandatoryWithSeparator){var c=[new li.Flat({definition:o.definition}),new li.Repetition({definition:[new li.Terminal({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof li.RepetitionWithSeparator){var c=o.definition.concat([new li.Repetition({definition:[new li.Terminal({terminalType:o.separator})].concat(o.definition)})]);n=a(c)}else if(o instanceof li.Repetition){var c=o.definition.concat([new li.Repetition({definition:o.definition})]);n=a(c)}else{if(o instanceof li.Alternation)return Ai.forEach(o.definition,function(d){n=a(d.definition)}),n;if(o instanceof li.Terminal)i.push(o.terminalType);else throw Error("non exhaustive match")}r++}return n.push({partialPath:i,suffixDef:Ai.drop(t,r)}),n}Ca.possiblePathsFrom=EU;function vz(t,e,i,n){var r="EXIT_NONE_TERMINAL",s=[r],a="EXIT_ALTERNATIVE",o=!1,c=e.length,d=c-n-1,p=[],m=[];for(m.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Ai.isEmpty(m);){var y=m.pop();if(y===a){o&&Ai.last(m).idx<=d&&m.pop();continue}var _=y.def,E=y.idx,C=y.ruleStack,S=y.occurrenceStack;if(!Ai.isEmpty(_)){var k=_[0];if(k===r){var R={idx:E,def:Ai.drop(_),ruleStack:Ai.dropRight(C),occurrenceStack:Ai.dropRight(S)};m.push(R)}else if(k instanceof li.Terminal)if(E<c-1){var O=E+1,I=e[O];if(i(I,k.terminalType)){var R={idx:O,def:Ai.drop(_),ruleStack:C,occurrenceStack:S};m.push(R)}}else if(E===c-1)p.push({nextTokenType:k.terminalType,nextTokenOccurrence:k.idx,ruleStack:C,occurrenceStack:S}),o=!0;else throw Error("non exhaustive match");else if(k instanceof li.NonTerminal){var F=Ai.cloneArr(C);F.push(k.nonTerminalName);var P=Ai.cloneArr(S);P.push(k.idx);var R={idx:E,def:k.definition.concat(s,Ai.drop(_)),ruleStack:F,occurrenceStack:P};m.push(R)}else if(k instanceof li.Option){var x={idx:E,def:Ai.drop(_),ruleStack:C,occurrenceStack:S};m.push(x),m.push(a);var M={idx:E,def:k.definition.concat(Ai.drop(_)),ruleStack:C,occurrenceStack:S};m.push(M)}else if(k instanceof li.RepetitionMandatory){var q=new li.Repetition({definition:k.definition,idx:k.idx}),$=k.definition.concat([q],Ai.drop(_)),R={idx:E,def:$,ruleStack:C,occurrenceStack:S};m.push(R)}else if(k instanceof li.RepetitionMandatoryWithSeparator){var B=new li.Terminal({terminalType:k.separator}),q=new li.Repetition({definition:[B].concat(k.definition),idx:k.idx}),$=k.definition.concat([q],Ai.drop(_)),R={idx:E,def:$,ruleStack:C,occurrenceStack:S};m.push(R)}else if(k instanceof li.RepetitionWithSeparator){var x={idx:E,def:Ai.drop(_),ruleStack:C,occurrenceStack:S};m.push(x),m.push(a);var B=new li.Terminal({terminalType:k.separator}),j=new li.Repetition({definition:[B].concat(k.definition),idx:k.idx}),$=k.definition.concat([j],Ai.drop(_)),M={idx:E,def:$,ruleStack:C,occurrenceStack:S};m.push(M)}else if(k instanceof li.Repetition){var x={idx:E,def:Ai.drop(_),ruleStack:C,occurrenceStack:S};m.push(x),m.push(a);var j=new li.Repetition({definition:k.definition,idx:k.idx}),$=k.definition.concat([j],Ai.drop(_)),M={idx:E,def:$,ruleStack:C,occurrenceStack:S};m.push(M)}else if(k instanceof li.Alternation)for(var z=k.definition.length-1;z>=0;z--){var X=k.definition[z],se={idx:E,def:X.definition.concat(Ai.drop(_)),ruleStack:C,occurrenceStack:S};m.push(se),m.push(a)}else if(k instanceof li.Flat)m.push({idx:E,def:k.definition.concat(Ai.drop(_)),ruleStack:C,occurrenceStack:S});else if(k instanceof li.Rule)m.push(bz(k,E,C,S));else throw Error("non exhaustive match")}}return p}Ca.nextPossibleTokensAfter=vz;function bz(t,e,i,n){var r=Ai.cloneArr(i);r.push(t.name);var s=Ai.cloneArr(n);return s.push(1),{idx:e,def:t.definition,ruleStack:r,occurrenceStack:s}}(function(t){var e=Si&&Si.__extends||function(){var P=function(x,M){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,$){q.__proto__=$}||function(q,$){for(var B in $)$.hasOwnProperty(B)&&(q[B]=$[B])},P(x,M)};return function(x,M){P(x,M);function q(){this.constructor=x}x.prototype=M===null?Object.create(M):(q.prototype=M.prototype,new q)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=Xe,n=Ca,r=Jv,s=WE(),a=zi,o=qd,c;(function(P){P[P.OPTION=0]="OPTION",P[P.REPETITION=1]="REPETITION",P[P.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",P[P.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",P[P.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",P[P.ALTERNATION=5]="ALTERNATION"})(c=t.PROD_TYPE||(t.PROD_TYPE={}));function d(P){if(P instanceof a.Option)return c.OPTION;if(P instanceof a.Repetition)return c.REPETITION;if(P instanceof a.RepetitionMandatory)return c.REPETITION_MANDATORY;if(P instanceof a.RepetitionMandatoryWithSeparator)return c.REPETITION_MANDATORY_WITH_SEPARATOR;if(P instanceof a.RepetitionWithSeparator)return c.REPETITION_WITH_SEPARATOR;if(P instanceof a.Alternation)return c.ALTERNATION;throw Error("non exhaustive match")}t.getProdType=d;function p(P,x,M,q,$,B){var j=k(P,x,M),z=F(j)?s.tokenStructuredMatcherNoCategories:s.tokenStructuredMatcher;return B(j,q,z,$)}t.buildLookaheadFuncForOr=p;function m(P,x,M,q,$,B){var j=R(P,x,$,M),z=F(j)?s.tokenStructuredMatcherNoCategories:s.tokenStructuredMatcher;return B(j[0],z,q)}t.buildLookaheadFuncForOptionalProd=m;function y(P,x,M,q){var $=P.length,B=i.every(P,function(X){return i.every(X,function(se){return se.length===1})});if(x)return function(X){for(var se=i.map(X,function(ce){return ce.GATE}),ue=0;ue<$;ue++){var ve=P[ue],_e=ve.length,de=se[ue];if(!(de!==void 0&&de.call(this)===!1))e:for(var oe=0;oe<_e;oe++){for(var Q=ve[oe],Z=Q.length,W=0;W<Z;W++){var ne=this.LA(W+1);if(M(ne,Q[W])===!1)continue e}return ue}}};if(B&&!q){var j=i.map(P,function(X){return i.flatten(X)}),z=i.reduce(j,function(X,se,ue){return i.forEach(se,function(ve){i.has(X,ve.tokenTypeIdx)||(X[ve.tokenTypeIdx]=ue),i.forEach(ve.categoryMatches,function(_e){i.has(X,_e)||(X[_e]=ue)})}),X},[]);return function(){var X=this.LA(1);return z[X.tokenTypeIdx]}}else return function(){for(var X=0;X<$;X++){var se=P[X],ue=se.length;e:for(var ve=0;ve<ue;ve++){for(var _e=se[ve],de=_e.length,oe=0;oe<de;oe++){var Q=this.LA(oe+1);if(M(Q,_e[oe])===!1)continue e}return X}}}}t.buildAlternativesLookAheadFunc=y;function _(P,x,M){var q=i.every(P,function(se){return se.length===1}),$=P.length;if(q&&!M){var B=i.flatten(P);if(B.length===1&&i.isEmpty(B[0].categoryMatches)){var j=B[0],z=j.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===z}}else{var X=i.reduce(B,function(se,ue,ve){return se[ue.tokenTypeIdx]=!0,i.forEach(ue.categoryMatches,function(_e){se[_e]=!0}),se},[]);return function(){var se=this.LA(1);return X[se.tokenTypeIdx]===!0}}}else return function(){e:for(var se=0;se<$;se++){for(var ue=P[se],ve=ue.length,_e=0;_e<ve;_e++){var de=this.LA(_e+1);if(x(de,ue[_e])===!1)continue e}return!0}return!1}}t.buildSingleAlternativeLookaheadFunction=_;var E=function(P){e(x,P);function x(M,q,$){var B=P.call(this)||this;return B.topProd=M,B.targetOccurrence=q,B.targetProdType=$,B}return x.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},x.prototype.checkIsTarget=function(M,q,$,B){return M.idx===this.targetOccurrence&&this.targetProdType===q?(this.restDef=$.concat(B),!0):!1},x.prototype.walkOption=function(M,q,$){this.checkIsTarget(M,c.OPTION,q,$)||P.prototype.walkOption.call(this,M,q,$)},x.prototype.walkAtLeastOne=function(M,q,$){this.checkIsTarget(M,c.REPETITION_MANDATORY,q,$)||P.prototype.walkOption.call(this,M,q,$)},x.prototype.walkAtLeastOneSep=function(M,q,$){this.checkIsTarget(M,c.REPETITION_MANDATORY_WITH_SEPARATOR,q,$)||P.prototype.walkOption.call(this,M,q,$)},x.prototype.walkMany=function(M,q,$){this.checkIsTarget(M,c.REPETITION,q,$)||P.prototype.walkOption.call(this,M,q,$)},x.prototype.walkManySep=function(M,q,$){this.checkIsTarget(M,c.REPETITION_WITH_SEPARATOR,q,$)||P.prototype.walkOption.call(this,M,q,$)},x}(r.RestWalker),C=function(P){e(x,P);function x(M,q){var $=P.call(this)||this;return $.targetOccurrence=M,$.targetProdType=q,$.result=[],$}return x.prototype.checkIsTarget=function(M,q){M.idx===this.targetOccurrence&&this.targetProdType===q&&(this.result=M.definition)},x.prototype.visitOption=function(M){this.checkIsTarget(M,c.OPTION)},x.prototype.visitRepetition=function(M){this.checkIsTarget(M,c.REPETITION)},x.prototype.visitRepetitionMandatory=function(M){this.checkIsTarget(M,c.REPETITION_MANDATORY)},x.prototype.visitRepetitionMandatoryWithSeparator=function(M){this.checkIsTarget(M,c.REPETITION_MANDATORY_WITH_SEPARATOR)},x.prototype.visitRepetitionWithSeparator=function(M){this.checkIsTarget(M,c.REPETITION_WITH_SEPARATOR)},x.prototype.visitAlternation=function(M){this.checkIsTarget(M,c.ALTERNATION)},x}(o.GAstVisitor);function S(P,x){function M(J,pe){return i.reduce(J,function(he,fe,be){if(be!==pe){var re=i.map(fe,function(Ft){return Ft.partialPath});return he.concat(re)}return he},[])}function q(J,pe){return i.find(J,function(he){return i.every(pe,function(fe,be){return $(fe,he[be])})})===void 0}function $(J,pe){return J===pe||J&&pe&&(J.categoryMatchesMap[pe.tokenTypeIdx]||pe.categoryMatchesMap[J.tokenTypeIdx])}function B(J){for(var pe=[],he=0;he<J;he++)pe.push([]);return pe}for(var j=i.map(P,function(J){return n.possiblePathsFrom([J],1)}),z=B(j.length),X=j,se=1;se<=x;se++){var ue=X;X=B(ue.length);for(var ve=0;ve<ue.length;ve++)for(var _e=ue[ve],de=M(ue,ve),oe=0;oe<_e.length;oe++){var Q=_e[oe].partialPath,Z=_e[oe].suffixDef,W=q(de,Q);if(W||i.isEmpty(Z)||Q.length===x){var ne=z[ve];O(ne,Q)||ne.push(Q)}else{var ce=n.possiblePathsFrom(Z,se+1,Q);X[ve]=X[ve].concat(ce)}}}return z}t.lookAheadSequenceFromAlternatives=S;function k(P,x,M){var q=new C(P,c.ALTERNATION);return x.accept(q),S(q.result,M)}t.getLookaheadPathsForOr=k;function R(P,x,M,q){var $=new C(P,M);x.accept($);var B=$.result,j=new E(x,P,M),z=j.startWalking(),X=new a.Flat({definition:B}),se=new a.Flat({definition:z});return S([X,se],q)}t.getLookaheadPathsForOptionalProd=R;function O(P,x){var M=i.find(P,function(q){return x.length===q.length&&i.every(x,function($,B){return $===q[B]||q[B].categoryMatchesMap[$.tokenTypeIdx]})});return M!==void 0}t.containsPath=O;function I(P,x){return P.length<x.length&&i.every(P,function(M,q){var $=x[q];return M===$||$.categoryMatchesMap[M.tokenTypeIdx]})}t.isStrictPrefixOfPath=I;function F(P){return i.every(P,function(x){return i.every(x,function(M){return i.every(M,function(q){return i.isEmpty(q.categoryMatches)})})})}t.areTokenCategoriesNotUsed=F})(tb);var Zx;function ZE(){return Zx||(Zx=1,function(t){var e=Si&&Si.__extends||function(){var de=function(oe,Q){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,W){Z.__proto__=W}||function(Z,W){for(var ne in W)W.hasOwnProperty(ne)&&(Z[ne]=W[ne])},de(oe,Q)};return function(oe,Q){de(oe,Q);function Z(){this.constructor=oe}oe.prototype=Q===null?Object.create(Q):(Z.prototype=Q.prototype,new Z)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=Xe,n=Xe,r=pl(),s=dc,a=so(),o=tb,c=hc,d=Ca,p=zi,m=qd;function y(de,oe,Q,Z,W,ne){var ce=i.map(de,function($t){return E($t,W)}),J=i.map(de,function($t){return x($t,$t,W)}),pe=[],he=[],fe=[];n.every(J,n.isEmpty)&&(pe=n.map(de,function($t){return $($t,W)}),he=n.map(de,function($t){return B($t,oe,Z,W)}),fe=X(de,oe,W));var be=ve(de,Q,W),re=i.map(Q,function($t){return I($t,W)}),Ft=_(de,W),Dt=_e(de,W),ft=n.map(de,function($t){return z($t,W)}),Ae=n.map(de,function($t){return R($t,W)}),ei=n.map(de,function($t){return F($t,de,ne,W)});return i.flatten(ce.concat(re,Ft,Dt,fe,J,pe,he,be,ft,Ae,ei))}t.validateGrammar=y;function _(de,oe){var Q=[];return n.forEach(de,function(Z){var W=new c.NamedDSLMethodsCollectorVisitor("");Z.accept(W);var ne=n.map(W.result,function(ce){return ce.orgProd});Q.push(n.map(ne,function(ce){return O(Z,ce,oe)}))}),n.flatten(Q)}function E(de,oe){var Q=new k;de.accept(Q);var Z=Q.allProductions,W=i.groupBy(Z,C),ne=i.pick(W,function(J){return J.length>1}),ce=i.map(i.values(ne),function(J){var pe=i.first(J),he=oe.buildDuplicateFoundError(de,J),fe=s.getProductionDslName(pe),be={message:he,type:r.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:de.name,dslName:fe,occurrence:pe.idx},re=S(pe);return re&&(be.parameter=re),be});return ce}function C(de){return s.getProductionDslName(de)+"_#_"+de.idx+"_#_"+S(de)}t.identifyProductionForDuplicates=C;function S(de){return de instanceof p.Terminal?a.tokenName(de.terminalType):de instanceof p.NonTerminal?de.nonTerminalName:""}var k=function(de){e(oe,de);function oe(){var Q=de!==null&&de.apply(this,arguments)||this;return Q.allProductions=[],Q}return oe.prototype.visitNonTerminal=function(Q){this.allProductions.push(Q)},oe.prototype.visitOption=function(Q){this.allProductions.push(Q)},oe.prototype.visitRepetitionWithSeparator=function(Q){this.allProductions.push(Q)},oe.prototype.visitRepetitionMandatory=function(Q){this.allProductions.push(Q)},oe.prototype.visitRepetitionMandatoryWithSeparator=function(Q){this.allProductions.push(Q)},oe.prototype.visitRepetition=function(Q){this.allProductions.push(Q)},oe.prototype.visitAlternation=function(Q){this.allProductions.push(Q)},oe.prototype.visitTerminal=function(Q){this.allProductions.push(Q)},oe}(m.GAstVisitor);t.OccurrenceValidationCollector=k,t.validTermsPattern=/^[a-zA-Z_]\w*$/,t.validNestedRuleName=new RegExp(t.validTermsPattern.source.replace("^","^\\$"));function R(de,oe){var Q=[],Z=de.name;return Z.match(t.validTermsPattern)||Q.push({message:oe.buildInvalidRuleNameError({topLevelRule:de,expectedPattern:t.validTermsPattern}),type:r.ParserDefinitionErrorType.INVALID_RULE_NAME,ruleName:Z}),Q}t.validateRuleName=R;function O(de,oe,Q){var Z=[],W;return oe.name.match(t.validNestedRuleName)||(W=Q.buildInvalidNestedRuleNameError(de,oe),Z.push({message:W,type:r.ParserDefinitionErrorType.INVALID_NESTED_RULE_NAME,ruleName:de.name})),Z}t.validateNestedRuleName=O;function I(de,oe){var Q=[],Z=a.tokenName(de);return Z.match(t.validTermsPattern)||Q.push({message:oe.buildTokenNameError({tokenType:de,expectedPattern:t.validTermsPattern}),type:r.ParserDefinitionErrorType.INVALID_TOKEN_NAME}),Q}t.validateTokenName=I;function F(de,oe,Q,Z){var W=[],ne=n.reduce(oe,function(J,pe){return pe.name===de.name?J+1:J},0);if(ne>1){var ce=Z.buildDuplicateRuleNameError({topLevelRule:de,grammarName:Q});W.push({message:ce,type:r.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:de.name})}return W}t.validateRuleDoesNotAlreadyExist=F;function P(de,oe,Q){var Z=[],W;return i.contains(oe,de)||(W="Invalid rule override, rule: ->"+de+"<- cannot be overridden in the grammar: ->"+Q+"<-as it is not defined in any of the super grammars ",Z.push({message:W,type:r.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:de})),Z}t.validateRuleIsOverridden=P;function x(de,oe,Q,Z){Z===void 0&&(Z=[]);var W=[],ne=M(oe.definition);if(i.isEmpty(ne))return[];var ce=de.name,J=i.contains(ne,de);J&&W.push({message:Q.buildLeftRecursionError({topLevelRule:de,leftRecursionPath:Z}),type:r.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:ce});var pe=i.difference(ne,Z.concat([de])),he=i.map(pe,function(fe){var be=i.cloneArr(Z);return be.push(fe),x(de,fe,Q,be)});return W.concat(i.flatten(he))}t.validateNoLeftRecursion=x;function M(de){var oe=[];if(i.isEmpty(de))return oe;var Q=i.first(de);if(Q instanceof p.NonTerminal)oe.push(Q.referencedRule);else if(Q instanceof p.Flat||Q instanceof p.Option||Q instanceof p.RepetitionMandatory||Q instanceof p.RepetitionMandatoryWithSeparator||Q instanceof p.RepetitionWithSeparator||Q instanceof p.Repetition)oe=oe.concat(M(Q.definition));else if(Q instanceof p.Alternation)oe=i.flatten(i.map(Q.definition,function(ce){return M(ce.definition)}));else if(!(Q instanceof p.Terminal))throw Error("non exhaustive match");var Z=s.isOptionalProd(Q),W=de.length>1;if(Z&&W){var ne=i.drop(de);return oe.concat(M(ne))}else return oe}t.getFirstNoneTerminal=M;var q=function(de){e(oe,de);function oe(){var Q=de!==null&&de.apply(this,arguments)||this;return Q.alternations=[],Q}return oe.prototype.visitAlternation=function(Q){this.alternations.push(Q)},oe}(m.GAstVisitor);function $(de,oe){var Q=new q;de.accept(Q);var Z=Q.alternations,W=i.reduce(Z,function(ne,ce){var J=i.dropRight(ce.definition),pe=i.map(J,function(he,fe){var be=d.nextPossibleTokensAfter([he],[],null,1);return i.isEmpty(be)?{message:oe.buildEmptyAlternationError({topLevelRule:de,alternation:ce,emptyChoiceIdx:fe}),type:r.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:de.name,occurrence:ce.idx,alternative:fe+1}:null});return ne.concat(i.compact(pe))},[]);return W}t.validateEmptyOrAlternative=$;function B(de,oe,Q,Z){var W=new q;de.accept(W);var ne=W.alternations,ce=Q[de.name];ce&&(ne=n.reject(ne,function(pe){return ce[s.getProductionDslName(pe)+(pe.idx===0?"":pe.idx)]}));var J=i.reduce(ne,function(pe,he){var fe=he.idx,be=o.getLookaheadPathsForOr(fe,de,oe),re=se(be,he,de,Z),Ft=ue(be,he,de,Z);return pe.concat(re,Ft)},[]);return J}t.validateAmbiguousAlternationAlternatives=B;var j=function(de){e(oe,de);function oe(){var Q=de!==null&&de.apply(this,arguments)||this;return Q.allProductions=[],Q}return oe.prototype.visitRepetitionWithSeparator=function(Q){this.allProductions.push(Q)},oe.prototype.visitRepetitionMandatory=function(Q){this.allProductions.push(Q)},oe.prototype.visitRepetitionMandatoryWithSeparator=function(Q){this.allProductions.push(Q)},oe.prototype.visitRepetition=function(Q){this.allProductions.push(Q)},oe}(m.GAstVisitor);t.RepetionCollector=j;function z(de,oe){var Q=new q;de.accept(Q);var Z=Q.alternations,W=i.reduce(Z,function(ne,ce){return ce.definition.length>255&&ne.push({message:oe.buildTooManyAlternativesError({topLevelRule:de,alternation:ce}),type:r.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:de.name,occurrence:ce.idx}),ne},[]);return W}t.validateTooManyAlts=z;function X(de,oe,Q){var Z=[];return n.forEach(de,function(W){var ne=new j;W.accept(ne);var ce=ne.allProductions;n.forEach(ce,function(J){var pe=o.getProdType(J),he=J.idx,fe=o.getLookaheadPathsForOptionalProd(he,W,pe,oe),be=fe[0];if(n.isEmpty(n.flatten(be))){var re=Q.buildEmptyRepetitionError({topLevelRule:W,repetition:J});Z.push({message:re,type:r.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:W.name})}})}),Z}t.validateSomeNonEmptyLookaheadPath=X;function se(de,oe,Q,Z){var W=[],ne=n.reduce(de,function(J,pe,he){return n.forEach(pe,function(fe){var be=[he];n.forEach(de,function(re,Ft){he!==Ft&&o.containsPath(re,fe)&&be.push(Ft)}),be.length>1&&!o.containsPath(W,fe)&&(W.push(fe),J.push({alts:be,path:fe}))}),J},[]),ce=i.map(ne,function(J){var pe=n.map(J.alts,function(fe){return fe+1}),he=Z.buildAlternationAmbiguityError({topLevelRule:Q,alternation:oe,ambiguityIndices:pe,prefixPath:J.path});return{message:he,type:r.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:Q.name,occurrence:oe.idx,alternatives:[J.alts]}});return ce}function ue(de,oe,Q,Z){var W=[],ne=n.reduce(de,function(ce,J,pe){var he=n.map(J,function(fe){return{idx:pe,path:fe}});return ce.concat(he)},[]);return n.forEach(ne,function(ce){var J=ce.idx,pe=ce.path,he=n.findAll(ne,function(be){return be.idx<J&&o.isStrictPrefixOfPath(be.path,pe)}),fe=n.map(he,function(be){var re=[be.idx+1,J+1],Ft=oe.idx===0?"":oe.idx,Dt=Z.buildAlternationPrefixAmbiguityError({topLevelRule:Q,alternation:oe,ambiguityIndices:re,prefixPath:be.path});return{message:Dt,type:r.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:Q.name,occurrence:Ft,alternatives:re}});W=W.concat(fe)}),W}t.checkPrefixAlternativesAmbiguities=ue;function ve(de,oe,Q){var Z=[],W=n.map(oe,function(ne){return a.tokenName(ne)});return n.forEach(de,function(ne){var ce=ne.name;if(n.contains(W,ce)){var J=Q.buildNamespaceConflictError(ne);Z.push({message:J,type:r.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:ce})}}),Z}function _e(de,oe){var Q=[];return n.forEach(de,function(Z){var W=new c.NamedDSLMethodsCollectorVisitor("");Z.accept(W);var ne=n.groupBy(W.result,function(J){return J.name}),ce=n.pick(ne,function(J){return J.length>1});n.forEach(n.values(ce),function(J){var pe=n.map(J,function(fe){return fe.orgProd}),he=oe.buildDuplicateNestedRuleNameError(Z,pe);Q.push({message:he,type:r.ParserDefinitionErrorType.DUPLICATE_NESTED_NAME,ruleName:Z.name})})}),Q}}(Q1)),Q1}var nb={};Object.defineProperty(nb,"__esModule",{value:!0});nb.VERSION="4.8.1";var Qx;function QE(){return Qx||(Qx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=so(),i=Xe,n=Xe,r=zi,s=dc,a=ZE(),o=nb,c=pl();t.defaultParserErrorProvider={buildMismatchTokenMessage:function(d){var p=d.expected,m=d.actual;d.previous,d.ruleName;var y=e.hasTokenLabel(p),_=y?"--> "+e.tokenLabel(p)+" <--":"token of type --> "+e.tokenName(p)+" <--",E="Expecting "+_+" but found --> '"+m.image+"' <--";return E},buildNotAllInputParsedMessage:function(d){var p=d.firstRedundant;return d.ruleName,"Redundant input, expecting EOF but found: "+p.image},buildNoViableAltMessage:function(d){var p=d.expectedPathsPerAlt,m=d.actual;d.previous;var y=d.customUserDescription;d.ruleName;var _="Expecting: ",E=n.first(m).image,C=`
but found: '`+E+"'";if(y)return _+y+C;var S=n.reduce(p,function(I,F){return I.concat(F)},[]),k=n.map(S,function(I){return"["+n.map(I,function(F){return e.tokenLabel(F)}).join(", ")+"]"}),R=n.map(k,function(I,F){return"  "+(F+1)+". "+I}),O=`one of these possible Token sequences:
`+R.join(`
`);return _+O+C},buildEarlyExitMessage:function(d){var p=d.expectedIterationPaths,m=d.actual,y=d.customUserDescription;d.ruleName;var _="Expecting: ",E=n.first(m).image,C=`
but found: '`+E+"'";if(y)return _+y+C;var S=n.map(p,function(R){return"["+n.map(R,function(O){return e.tokenLabel(O)}).join(",")+"]"}),k=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+S.join(" ,")+">");return _+k+C}},Object.freeze(t.defaultParserErrorProvider),t.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(d,p){var m="Invalid grammar, reference to a rule which is not defined: ->"+p.nonTerminalName+`<-
inside top level rule: ->`+d.name+"<-";return m}},t.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(d,p){function m(R){return R instanceof r.Terminal?e.tokenName(R.terminalType):R instanceof r.NonTerminal?R.nonTerminalName:""}var y=d.name,_=n.first(p),E=_.idx,C=s.getProductionDslName(_),S=m(_),k="->"+C+"<- with numerical suffix: ->"+E+`<-
                  `+(S?"and argument: ->"+S+"<-":"")+`
                  appears more than once (`+p.length+" times) in the top level rule: ->"+y+`<-.
                  `+(E===0?"Also note that numerical suffix 0 means "+C+" without any suffix.":"")+`
                  To fix this make sure each usage of `+C+" "+(S?"with the argument: ->"+S+"<-":"")+`
                  in the rule ->`+y+`<- has a different occurrence index (0-5), as that combination acts as a unique
                  position key in the grammar, which is needed by the parsing engine.
                  
                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return k=k.replace(/[ \t]+/g," "),k=k.replace(/\s\s+/g,`
`),k},buildInvalidNestedRuleNameError:function(d,p){var m="Invalid nested rule name: ->"+p.name+"<- inside rule: ->"+d.name+`<-
`+("it must match the pattern: ->"+a.validNestedRuleName.toString()+`<-.
`)+"Note that this means a nested rule name must start with the '$'(dollar) sign.";return m},buildDuplicateNestedRuleNameError:function(d,p){var m=n.first(p).name,y="Duplicate nested rule name: ->"+m+"<- inside rule: ->"+d.name+`<-
A nested name must be unique in the scope of a top level grammar rule.`;return y},buildNamespaceConflictError:function(d){var p=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+d.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return p},buildAlternationPrefixAmbiguityError:function(d){var p=n.map(d.prefixPath,function(_){return e.tokenLabel(_)}).join(", "),m=d.alternation.idx===0?"":d.alternation.idx,y="Ambiguous alternatives: <"+d.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+m+"> inside <"+d.topLevelRule.name+`> Rule,
`)+("<"+p+`> may appears as a prefix path in all these alternatives.
`)+`https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return y},buildAlternationAmbiguityError:function(d){var p=n.map(d.prefixPath,function(E){return e.tokenLabel(E)}).join(", "),m=d.alternation.idx===0?"":d.alternation.idx,y="Ambiguous alternatives: <"+d.ambiguityIndices.join(" ,")+"> in <OR"+m+">"+(" inside <"+d.topLevelRule.name+`> Rule,
`)+("<"+p+`> may appears as a prefix path in all these alternatives.
`),_=o.VERSION.replace(/\./g,"_");return y=y+`To Resolve this, try one of of the following: 
`+("1. Refactor your grammar to be LL(K) for the current value of k (by default k="+c.DEFAULT_PARSER_CONFIG.maxLookahead+`})
`)+`2. Increase the value of K for your grammar by providing a larger 'maxLookahead' value in the parser's config
3. This issue can be ignored (if you know what you are doing...), see https://sap.github.io/chevrotain/documentation/`+_+`/interfaces/iparserconfig.html#ignoredissues for more details
`,y},buildEmptyRepetitionError:function(d){var p=s.getProductionDslName(d.repetition);d.repetition.idx!==0&&(p+=d.repetition.idx);var m="The repetition <"+p+"> within Rule <"+d.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return m},buildTokenNameError:function(d){var p=e.tokenName(d.tokenType),m="Invalid Grammar Token name: ->"+p+"<- it must match the pattern: ->"+d.expectedPattern.toString()+"<-";return m},buildEmptyAlternationError:function(d){var p="Ambiguous empty alternative: <"+(d.emptyChoiceIdx+1)+">"+(" in <OR"+d.alternation.idx+"> inside <"+d.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return p},buildTooManyAlternativesError:function(d){var p=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+d.alternation.idx+"> inside <"+d.topLevelRule.name+`> Rule.
 has `+(d.alternation.definition.length+1)+" alternatives.");return p},buildLeftRecursionError:function(d){var p=d.topLevelRule.name,m=i.map(d.leftRecursionPath,function(E){return E.name}),y=p+" --> "+m.concat([p]).join(" --> "),_=`Left Recursion found in grammar.
`+("rule: <"+p+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is: 
 `+y+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return _},buildInvalidRuleNameError:function(d){var p=d.topLevelRule.name,m=d.expectedPattern.toString(),y="Invalid grammar rule name: ->"+p+"<- it must match the pattern: ->"+m+"<-";return y},buildDuplicateRuleNameError:function(d){var p;d.topLevelRule instanceof r.Rule?p=d.topLevelRule.name:p=d.topLevelRule;var m="Duplicate definition, rule: ->"+p+"<- is already defined in the grammar: ->"+d.grammarName+"<-";return m}}}(Z1)),Z1}var wp={},Zy={},Jx;function _z(){if(Jx)return Zy;Jx=1;var t=Si&&Si.__extends||function(){var a=function(o,c){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)p.hasOwnProperty(m)&&(d[m]=p[m])},a(o,c)};return function(o,c){a(o,c);function d(){this.constructor=o}o.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(Zy,"__esModule",{value:!0});var e=pl(),i=Xe,n=qd;function r(a,o){var c=new s(a,o);return c.resolveRefs(),c.errors}Zy.resolveGrammar=r;var s=function(a){t(o,a);function o(c,d){var p=a.call(this)||this;return p.nameToTopRule=c,p.errMsgProvider=d,p.errors=[],p}return o.prototype.resolveRefs=function(){var c=this;i.forEach(this.nameToTopRule.values(),function(d){c.currTopLevel=d,d.accept(c)})},o.prototype.visitNonTerminal=function(c){var d=this.nameToTopRule.get(c.nonTerminalName);if(d)c.referencedRule=d;else{var p=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,c);this.errors.push({message:p,type:e.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:c.nonTerminalName})}},o}(n.GAstVisitor);return Zy.GastRefResolverVisitor=s,Zy}var eM;function TU(){if(eM)return wp;eM=1,Object.defineProperty(wp,"__esModule",{value:!0});var t=Xe,e=wa,i=_z(),n=ZE(),r=QE(),s=dc;function a(d){d=t.defaults(d,{errMsgProvider:r.defaultGrammarResolverErrorProvider});var p=new e.HashTable;return t.forEach(d.rules,function(m){p.put(m.name,m)}),i.resolveGrammar(p,d.errMsgProvider)}wp.resolveGrammar=a;function o(d){return d=t.defaults(d,{errMsgProvider:r.defaultGrammarValidatorErrorProvider,ignoredIssues:{}}),n.validateGrammar(d.rules,d.maxLookahead,d.tokenTypes,d.ignoredIssues,d.errMsgProvider,d.grammarName)}wp.validateGrammar=o;function c(d){t.forEach(d.rules,function(p){var m=new s.DslMethodsCollectorVisitor;p.accept(m),t.forEach(m.dslMethods,function(y){t.forEach(y,function(_,E){_.idx=E+1})})})}return wp.assignOccurrenceIndices=c,wp}var J1={},fl={};Object.defineProperty(fl,"__esModule",{value:!0});var Ez=Xe,wU="MismatchedTokenException",CU="NoViableAltException",SU="EarlyExitException",kU="NotAllInputParsedException",AU=[wU,CU,SU,kU];Object.freeze(AU);function Tz(t){return Ez.contains(AU,t.name)}fl.isRecognitionException=Tz;function RU(t,e,i){this.name=wU,this.message=t,this.token=e,this.previousToken=i,this.resyncedTokens=[]}fl.MismatchedTokenException=RU;RU.prototype=Error.prototype;function IU(t,e,i){this.name=CU,this.message=t,this.token=e,this.previousToken=i,this.resyncedTokens=[]}fl.NoViableAltException=IU;IU.prototype=Error.prototype;function DU(t,e){this.name=kU,this.message=t,this.token=e,this.resyncedTokens=[]}fl.NotAllInputParsedException=DU;DU.prototype=Error.prototype;function xU(t,e,i){this.name=SU,this.message=t,this.token=e,this.previousToken=i,this.resyncedTokens=[]}fl.EarlyExitException=xU;xU.prototype=Error.prototype;var tM;function MU(){return tM||(tM=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=so(),i=Xe,n=fl,r=XE,s=wa,a=pl();t.EOF_FOLLOW_KEY={},t.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";function o(p){this.name=t.IN_RULE_RECOVERY_EXCEPTION,this.message=p}t.InRuleRecoveryException=o,o.prototype=Error.prototype;var c=function(){function p(){}return p.prototype.initRecoverable=function(m){this.firstAfterRepMap=new s.HashTable,this.resyncFollows=new s.HashTable,this.recoveryEnabled=i.has(m,"recoveryEnabled")?m.recoveryEnabled:a.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=d)},p.prototype.getTokenToInsert=function(m){var y=e.createTokenInstance(m,"",NaN,NaN,NaN,NaN,NaN,NaN);return y.isInsertedInRecovery=!0,y},p.prototype.canTokenTypeBeInsertedInRecovery=function(m){return!0},p.prototype.tryInRepetitionRecovery=function(m,y,_,E){for(var C=this,S=this.findReSyncTokenType(),k=this.exportLexerState(),R=[],O=!1,I=this.LA(1),F=this.LA(1),P=function(){var x=C.LA(0),M=C.errorMessageProvider.buildMismatchTokenMessage({expected:E,actual:I,previous:x,ruleName:C.getCurrRuleFullName()}),q=new n.MismatchedTokenException(M,I,C.LA(0));q.resyncedTokens=i.dropRight(R),C.SAVE_ERROR(q)};!O;)if(this.tokenMatcher(F,E)){P();return}else if(_.call(this)){P(),m.apply(this,y);return}else this.tokenMatcher(F,S)?O=!0:(F=this.SKIP_TOKEN(),this.addToResyncTokens(F,R));this.importLexerState(k)},p.prototype.shouldInRepetitionRecoveryBeTried=function(m,y,_){return!(_===!1||m===void 0||y===void 0||this.tokenMatcher(this.LA(1),m)||this.isBackTracking()||this.canPerformInRuleRecovery(m,this.getFollowsForInRuleRecovery(m,y)))},p.prototype.getFollowsForInRuleRecovery=function(m,y){var _=this.getCurrentGrammarPath(m,y),E=this.getNextPossibleTokenTypes(_);return E},p.prototype.tryInRuleRecovery=function(m,y){if(this.canRecoverWithSingleTokenInsertion(m,y)){var _=this.getTokenToInsert(m);return _}if(this.canRecoverWithSingleTokenDeletion(m)){var E=this.SKIP_TOKEN();return this.consumeToken(),E}throw new o("sad sad panda")},p.prototype.canPerformInRuleRecovery=function(m,y){return this.canRecoverWithSingleTokenInsertion(m,y)||this.canRecoverWithSingleTokenDeletion(m)},p.prototype.canRecoverWithSingleTokenInsertion=function(m,y){var _=this;if(!this.canTokenTypeBeInsertedInRecovery(m)||i.isEmpty(y))return!1;var E=this.LA(1),C=i.find(y,function(S){return _.tokenMatcher(E,S)})!==void 0;return C},p.prototype.canRecoverWithSingleTokenDeletion=function(m){var y=this.tokenMatcher(this.LA(2),m);return y},p.prototype.isInCurrentRuleReSyncSet=function(m){var y=this.getCurrFollowKey(),_=this.getFollowSetFromFollowKey(y);return i.contains(_,m)},p.prototype.findReSyncTokenType=function(){for(var m=this.flattenFollowSet(),y=this.LA(1),_=2;;){var E=y.tokenType;if(i.contains(m,E))return E;y=this.LA(_),_++}},p.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return t.EOF_FOLLOW_KEY;var m=this.getLastExplicitRuleShortName(),y=this.getLastExplicitRuleOccurrenceIndex(),_=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(m),idxInCallingRule:y,inRule:this.shortRuleNameToFullName(_)}},p.prototype.buildFullFollowKeyStack=function(){var m=this,y=this.RULE_STACK,_=this.RULE_OCCURRENCE_STACK;return i.isEmpty(this.LAST_EXPLICIT_RULE_STACK)||(y=i.map(this.LAST_EXPLICIT_RULE_STACK,function(E){return m.RULE_STACK[E]}),_=i.map(this.LAST_EXPLICIT_RULE_STACK,function(E){return m.RULE_OCCURRENCE_STACK[E]})),i.map(y,function(E,C){return C===0?t.EOF_FOLLOW_KEY:{ruleName:m.shortRuleNameToFullName(E),idxInCallingRule:_[C],inRule:m.shortRuleNameToFullName(y[C-1])}})},p.prototype.flattenFollowSet=function(){var m=this,y=i.map(this.buildFullFollowKeyStack(),function(_){return m.getFollowSetFromFollowKey(_)});return i.flatten(y)},p.prototype.getFollowSetFromFollowKey=function(m){if(m===t.EOF_FOLLOW_KEY)return[e.EOF];var y=m.ruleName+m.idxInCallingRule+r.IN+m.inRule;return this.resyncFollows.get(y)},p.prototype.addToResyncTokens=function(m,y){return this.tokenMatcher(m,e.EOF)||y.push(m),y},p.prototype.reSyncTo=function(m){for(var y=[],_=this.LA(1);this.tokenMatcher(_,m)===!1;)_=this.SKIP_TOKEN(),this.addToResyncTokens(_,y);return i.dropRight(y)},p.prototype.attemptInRepetitionRecovery=function(m,y,_,E,C,S,k){},p.prototype.getCurrentGrammarPath=function(m,y){var _=this.getHumanReadableRuleStack(),E=i.cloneArr(this.RULE_OCCURRENCE_STACK),C={ruleStack:_,occurrenceStack:E,lastTok:m,lastTokOccurrence:y};return C},p.prototype.getHumanReadableRuleStack=function(){var m=this;return i.isEmpty(this.LAST_EXPLICIT_RULE_STACK)?i.map(this.RULE_STACK,function(y){return m.shortRuleNameToFullName(y)}):i.map(this.LAST_EXPLICIT_RULE_STACK,function(y){return m.shortRuleNameToFullName(m.RULE_STACK[y])})},p}();t.Recoverable=c;function d(p,m,y,_,E,C,S){var k=this.getKeyForAutomaticLookahead(_,E),R=this.firstAfterRepMap.get(k);if(R===void 0){var O=this.getCurrRuleFullName(),I=this.getGAstProductions().get(O),F=new C(I,E);R=F.startWalking(),this.firstAfterRepMap.put(k,R)}var P=R.token,x=R.occurrence,M=R.isEndOfRule;this.RULE_STACK.length===1&&M&&P===void 0&&(P=e.EOF,x=1),this.shouldInRepetitionRecoveryBeTried(P,x,S)&&this.tryInRepetitionRecovery(p,m,y,P)}t.attemptInRepetitionRecovery=d}(J1)),J1}var C_={},iM;function wz(){if(iM)return C_;iM=1,Object.defineProperty(C_,"__esModule",{value:!0});var t=tb,e=Xe,i=pl(),n=eb,r=function(){function s(){}return s.prototype.initLooksAhead=function(a){this.dynamicTokensEnabled=e.has(a,"dynamicTokensEnabled")?a.dynamicTokensEnabled:i.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=e.has(a,"maxLookahead")?a.maxLookahead:i.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=e.isES2015MapSupported()?new Map:[],e.isES2015MapSupported()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},s.prototype.lookAheadBuilderForOptional=function(a,o,c){return t.buildSingleAlternativeLookaheadFunction(a,o,c)},s.prototype.lookAheadBuilderForAlternatives=function(a,o,c,d){return t.buildAlternativesLookAheadFunc(a,o,c,d)},s.prototype.getKeyForAutomaticLookahead=function(a,o){var c=this.getLastExplicitRuleShortName();return n.getKeyForAutomaticLookahead(c,a,o)},s.prototype.getLookaheadFuncForOr=function(a,o){var c=this.getKeyForAutomaticLookahead(n.OR_IDX,a),d=this.getLaFuncFromCache(c);if(d===void 0){var p=this.getCurrRuleFullName(),m=this.getGAstProductions().get(p),y=e.some(o,function(_){return e.isFunction(_.GATE)});return d=t.buildLookaheadFuncForOr(a,m,this.maxLookahead,y,this.dynamicTokensEnabled,this.lookAheadBuilderForAlternatives),this.setLaFuncCache(c,d),d}else return d},s.prototype.getLookaheadFuncForOption=function(a,o){return this.getLookaheadFuncFor(a,o,this.maxLookahead,t.PROD_TYPE.OPTION)},s.prototype.getLookaheadFuncForMany=function(a,o){return this.getLookaheadFuncFor(a,o,this.maxLookahead,t.PROD_TYPE.REPETITION)},s.prototype.getLookaheadFuncForManySep=function(a,o){return this.getLookaheadFuncFor(a,o,this.maxLookahead,t.PROD_TYPE.REPETITION_WITH_SEPARATOR)},s.prototype.getLookaheadFuncForAtLeastOne=function(a,o){return this.getLookaheadFuncFor(a,o,this.maxLookahead,t.PROD_TYPE.REPETITION_MANDATORY)},s.prototype.getLookaheadFuncForAtLeastOneSep=function(a,o){return this.getLookaheadFuncFor(a,o,this.maxLookahead,t.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)},s.prototype.getLookaheadFuncFor=function(a,o,c,d){var p=this.getLaFuncFromCache(a);if(p===void 0){var m=this.getCurrRuleFullName(),y=this.getGAstProductions().get(m);return p=t.buildLookaheadFuncForOptionalProd(o,y,c,this.dynamicTokensEnabled,d,this.lookAheadBuilderForOptional),this.setLaFuncCache(a,p),p}else return p},s.prototype.getLaFuncFromCache=function(a){},s.prototype.getLaFuncFromMap=function(a){return this.lookAheadFuncsCache.get(a)},s.prototype.getLaFuncFromObj=function(a){return this.lookAheadFuncsCache[a]},s.prototype.setLaFuncCache=function(a,o){},s.prototype.setLaFuncCacheUsingMap=function(a,o){this.lookAheadFuncsCache.set(a,o)},s.prototype.setLaFuncUsingObj=function(a,o){this.lookAheadFuncsCache[a]=o},s}();return C_.LooksAhead=r,C_}var S_={},ew={},nM;function Cz(){return nM||(nM=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Xe,i=wa,n=ZE();function r(y,_){for(var E=e.keys(y),C=E.length,S=0;S<C;S++)for(var k=E[S],R=y[k],O=R.length,I=0;I<O;I++){var F=R[I];F.tokenTypeIdx===void 0&&(F.fullName!==void 0?this[F.fullName](F.children,_):this[F.name](F.children,_))}}t.defaultVisit=r;function s(y,_){var E=function(){};i.defineNameProp(E,y+"BaseSemantics");var C={visit:function(S,k){if(e.isArray(S)&&(S=S[0]),!e.isUndefined(S))return S.fullName!==void 0?this[S.fullName](S.children,k):this[S.name](S.children,k)},validateVisitor:function(){var S=c(this,_);if(!e.isEmpty(S)){var k=e.map(S,function(R){return R.msg});throw Error("Errors Detected in CST Visitor <"+i.functionName(this.constructor)+`>:
	`+(""+k.join(`

`).replace(/\n/g,`
	`)))}}};return E.prototype=C,E.prototype.constructor=E,E._RULE_NAMES=_,E}t.createBaseSemanticVisitorConstructor=s;function a(y,_,E){var C=function(){};i.defineNameProp(C,y+"BaseSemanticsWithDefaults");var S=Object.create(E.prototype);return e.forEach(_,function(k){S[k]=r}),C.prototype=S,C.prototype.constructor=C,C}t.createBaseVisitorConstructorWithDefaults=a;var o;(function(y){y[y.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",y[y.MISSING_METHOD=1]="MISSING_METHOD"})(o=t.CstVisitorDefinitionError||(t.CstVisitorDefinitionError={}));function c(y,_){var E=d(y,_),C=m(y,_);return E.concat(C)}t.validateVisitor=c;function d(y,_){var E=e.map(_,function(C){if(!e.isFunction(y[C]))return{msg:"Missing visitor method: <"+C+"> on "+i.functionName(y.constructor)+" CST Visitor.",type:o.MISSING_METHOD,methodName:C}});return e.compact(E)}t.validateMissingCstMethods=d;var p=["constructor","visit","validateVisitor"];function m(y,_){var E=[];for(var C in y)n.validTermsPattern.test(C)&&e.isFunction(y[C])&&!e.contains(p,C)&&!e.contains(_,C)&&E.push({msg:"Redundant visitor method: <"+C+"> on "+i.functionName(y.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`+("For utility methods on visitor classes use methods names that do not match /"+n.validTermsPattern.source+"/."),type:o.REDUNDANT_METHOD,methodName:C});return E}t.validateRedundantMethods=m}(ew)),ew}var rM;function Sz(){if(rM)return S_;rM=1,Object.defineProperty(S_,"__esModule",{value:!0});var t=hc,e=Xe,i=Cz(),n=eb,r=pl(),s=function(){function a(){}return a.prototype.initTreeBuilder=function(o){if(this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.outputCst=e.has(o,"outputCst")?o.outputCst:r.DEFAULT_PARSER_CONFIG.outputCst,this.nodeLocationTracking=e.has(o,"nodeLocationTracking")?o.nodeLocationTracking:r.DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=e.NOOP,this.cstFinallyStateUpdate=e.NOOP,this.cstPostTerminal=e.NOOP,this.cstPostNonTerminal=e.NOOP,this.cstPostRule=e.NOOP,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getLastExplicitRuleOccurrenceIndex=this.getLastExplicitRuleOccurrenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=t.setNodeLocationFull,this.setNodeLocationFromNode=t.setNodeLocationFull,this.cstPostRule=e.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=e.NOOP,this.setNodeLocationFromNode=e.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=t.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=t.setNodeLocationOnlyOffset,this.cstPostRule=e.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=e.NOOP,this.setNodeLocationFromNode=e.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=e.NOOP,this.setNodeLocationFromNode=e.NOOP,this.cstPostRule=e.NOOP,this.setInitialNodeLocation=e.NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+o.nodeLocationTracking+'"')},a.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(o){o.location={startOffset:NaN,endOffset:NaN}},a.prototype.setInitialNodeLocationOnlyOffsetRegular=function(o){o.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},a.prototype.setInitialNodeLocationFullRecovery=function(o){o.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},a.prototype.setInitialNodeLocationFullRegular=function(o){var c=this.LA(1);o.location={startOffset:c.startOffset,startLine:c.startLine,startColumn:c.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},a.prototype.cstNestedInvocationStateUpdate=function(o,c){var d={name:o,fullName:this.shortRuleNameToFull.get(this.getLastExplicitRuleShortName())+o,children:{}};this.setInitialNodeLocation(d),this.CST_STACK.push(d)},a.prototype.cstInvocationStateUpdate=function(o,c){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1);var d={name:o,children:{}};this.setInitialNodeLocation(d),this.CST_STACK.push(d)},a.prototype.cstFinallyStateUpdate=function(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()},a.prototype.cstNestedFinallyStateUpdate=function(){var o=this.CST_STACK.pop();this.cstPostRule(o)},a.prototype.cstPostRuleFull=function(o){var c=this.LA(0),d=o.location;d.startOffset<=c.startOffset?(d.endOffset=c.endOffset,d.endLine=c.endLine,d.endColumn=c.endColumn):(d.startOffset=NaN,d.startLine=NaN,d.startColumn=NaN)},a.prototype.cstPostRuleOnlyOffset=function(o){var c=this.LA(0),d=o.location;d.startOffset<=c.startOffset?d.endOffset=c.endOffset:d.startOffset=NaN},a.prototype.cstPostTerminal=function(o,c){var d=this.CST_STACK[this.CST_STACK.length-1];t.addTerminalToCst(d,c,o),this.setNodeLocationFromToken(d.location,c)},a.prototype.cstPostNonTerminal=function(o,c){var d=this.CST_STACK[this.CST_STACK.length-1];t.addNoneTerminalToCst(d,c,o),this.setNodeLocationFromNode(d.location,o.location)},a.prototype.getBaseCstVisitorConstructor=function(){if(e.isUndefined(this.baseCstVisitorConstructor)){var o=i.createBaseSemanticVisitorConstructor(this.className,this.allRuleNames);return this.baseCstVisitorConstructor=o,o}return this.baseCstVisitorConstructor},a.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(e.isUndefined(this.baseCstVisitorWithDefaultsConstructor)){var o=i.createBaseVisitorConstructorWithDefaults(this.className,this.allRuleNames,this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=o,o}return this.baseCstVisitorWithDefaultsConstructor},a.prototype.nestedRuleBeforeClause=function(o,c){var d;if(o.NAME!==void 0)return d=o.NAME,this.nestedRuleInvocationStateUpdate(d,c),d},a.prototype.nestedAltBeforeClause=function(o,c,d,p){var m=this.getLastExplicitRuleShortName(),y=n.getKeyForAltIndex(m,d,c,p),_;if(o.NAME!==void 0)return _=o.NAME,this.nestedRuleInvocationStateUpdate(_,y),{shortName:y,nestedName:_}},a.prototype.nestedRuleFinallyClause=function(o,c){var d=this.CST_STACK,p=d[d.length-1];this.nestedRuleFinallyStateUpdate();var m=d[d.length-1];t.addNoneTerminalToCst(m,c,p),this.setNodeLocationFromNode(m.location,p.location)},a.prototype.getLastExplicitRuleShortName=function(){var o=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[o]},a.prototype.getLastExplicitRuleShortNameNoCst=function(){var o=this.RULE_STACK;return o[o.length-1]},a.prototype.getPreviousExplicitRuleShortName=function(){var o=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[o]},a.prototype.getPreviousExplicitRuleShortNameNoCst=function(){var o=this.RULE_STACK;return o[o.length-2]},a.prototype.getLastExplicitRuleOccurrenceIndex=function(){var o=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_OCCURRENCE_STACK[o]},a.prototype.getLastExplicitRuleOccurrenceIndexNoCst=function(){var o=this.RULE_OCCURRENCE_STACK;return o[o.length-1]},a.prototype.nestedRuleInvocationStateUpdate=function(o,c){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(c),this.cstNestedInvocationStateUpdate(o,c)},a.prototype.nestedRuleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()},a}();return S_.TreeBuilder=s,S_}var k_={},sM;function kz(){if(sM)return k_;sM=1,Object.defineProperty(k_,"__esModule",{value:!0});var t=pl(),e=function(){function i(){}return i.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(i.prototype,"input",{get:function(){return this.tokVector},set:function(n){this.reset(),this.tokVector=n,this.tokVectorLength=n.length},enumerable:!0,configurable:!0}),i.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):t.END_OF_FILE},i.prototype.LA=function(n){return this.currIdx+n<0||this.tokVectorLength<=this.currIdx+n?t.END_OF_FILE:this.tokVector[this.currIdx+n]},i.prototype.consumeToken=function(){this.currIdx++},i.prototype.exportLexerState=function(){return this.currIdx},i.prototype.importLexerState=function(n){this.currIdx=n},i.prototype.resetLexerState=function(){this.currIdx=-1},i.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},i.prototype.getLexerPosition=function(){return this.exportLexerState()},i}();return k_.LexerAdapter=e,k_}var A_={},aM;function Az(){if(aM)return A_;aM=1,Object.defineProperty(A_,"__esModule",{value:!0});var t=Xe,e=fl,i=pl(),n=QE(),r=jk,s=ZE(),a=zi,o=function(){function c(){}return c.prototype.CONSUME=function(d,p){return this.consumeInternal(d,0,p)},c.prototype.CONSUME1=function(d,p){return this.consumeInternal(d,1,p)},c.prototype.CONSUME2=function(d,p){return this.consumeInternal(d,2,p)},c.prototype.CONSUME3=function(d,p){return this.consumeInternal(d,3,p)},c.prototype.CONSUME4=function(d,p){return this.consumeInternal(d,4,p)},c.prototype.CONSUME5=function(d,p){return this.consumeInternal(d,5,p)},c.prototype.CONSUME6=function(d,p){return this.consumeInternal(d,6,p)},c.prototype.CONSUME7=function(d,p){return this.consumeInternal(d,7,p)},c.prototype.CONSUME8=function(d,p){return this.consumeInternal(d,8,p)},c.prototype.CONSUME9=function(d,p){return this.consumeInternal(d,9,p)},c.prototype.SUBRULE=function(d,p){return this.subruleInternal(d,0,p)},c.prototype.SUBRULE1=function(d,p){return this.subruleInternal(d,1,p)},c.prototype.SUBRULE2=function(d,p){return this.subruleInternal(d,2,p)},c.prototype.SUBRULE3=function(d,p){return this.subruleInternal(d,3,p)},c.prototype.SUBRULE4=function(d,p){return this.subruleInternal(d,4,p)},c.prototype.SUBRULE5=function(d,p){return this.subruleInternal(d,5,p)},c.prototype.SUBRULE6=function(d,p){return this.subruleInternal(d,6,p)},c.prototype.SUBRULE7=function(d,p){return this.subruleInternal(d,7,p)},c.prototype.SUBRULE8=function(d,p){return this.subruleInternal(d,8,p)},c.prototype.SUBRULE9=function(d,p){return this.subruleInternal(d,9,p)},c.prototype.OPTION=function(d){return this.optionInternal(d,0)},c.prototype.OPTION1=function(d){return this.optionInternal(d,1)},c.prototype.OPTION2=function(d){return this.optionInternal(d,2)},c.prototype.OPTION3=function(d){return this.optionInternal(d,3)},c.prototype.OPTION4=function(d){return this.optionInternal(d,4)},c.prototype.OPTION5=function(d){return this.optionInternal(d,5)},c.prototype.OPTION6=function(d){return this.optionInternal(d,6)},c.prototype.OPTION7=function(d){return this.optionInternal(d,7)},c.prototype.OPTION8=function(d){return this.optionInternal(d,8)},c.prototype.OPTION9=function(d){return this.optionInternal(d,9)},c.prototype.OR=function(d){return this.orInternal(d,0)},c.prototype.OR1=function(d){return this.orInternal(d,1)},c.prototype.OR2=function(d){return this.orInternal(d,2)},c.prototype.OR3=function(d){return this.orInternal(d,3)},c.prototype.OR4=function(d){return this.orInternal(d,4)},c.prototype.OR5=function(d){return this.orInternal(d,5)},c.prototype.OR6=function(d){return this.orInternal(d,6)},c.prototype.OR7=function(d){return this.orInternal(d,7)},c.prototype.OR8=function(d){return this.orInternal(d,8)},c.prototype.OR9=function(d){return this.orInternal(d,9)},c.prototype.MANY=function(d){this.manyInternal(0,d)},c.prototype.MANY1=function(d){this.manyInternal(1,d)},c.prototype.MANY2=function(d){this.manyInternal(2,d)},c.prototype.MANY3=function(d){this.manyInternal(3,d)},c.prototype.MANY4=function(d){this.manyInternal(4,d)},c.prototype.MANY5=function(d){this.manyInternal(5,d)},c.prototype.MANY6=function(d){this.manyInternal(6,d)},c.prototype.MANY7=function(d){this.manyInternal(7,d)},c.prototype.MANY8=function(d){this.manyInternal(8,d)},c.prototype.MANY9=function(d){this.manyInternal(9,d)},c.prototype.MANY_SEP=function(d){this.manySepFirstInternal(0,d)},c.prototype.MANY_SEP1=function(d){this.manySepFirstInternal(1,d)},c.prototype.MANY_SEP2=function(d){this.manySepFirstInternal(2,d)},c.prototype.MANY_SEP3=function(d){this.manySepFirstInternal(3,d)},c.prototype.MANY_SEP4=function(d){this.manySepFirstInternal(4,d)},c.prototype.MANY_SEP5=function(d){this.manySepFirstInternal(5,d)},c.prototype.MANY_SEP6=function(d){this.manySepFirstInternal(6,d)},c.prototype.MANY_SEP7=function(d){this.manySepFirstInternal(7,d)},c.prototype.MANY_SEP8=function(d){this.manySepFirstInternal(8,d)},c.prototype.MANY_SEP9=function(d){this.manySepFirstInternal(9,d)},c.prototype.AT_LEAST_ONE=function(d){this.atLeastOneInternal(0,d)},c.prototype.AT_LEAST_ONE1=function(d){return this.atLeastOneInternal(1,d)},c.prototype.AT_LEAST_ONE2=function(d){this.atLeastOneInternal(2,d)},c.prototype.AT_LEAST_ONE3=function(d){this.atLeastOneInternal(3,d)},c.prototype.AT_LEAST_ONE4=function(d){this.atLeastOneInternal(4,d)},c.prototype.AT_LEAST_ONE5=function(d){this.atLeastOneInternal(5,d)},c.prototype.AT_LEAST_ONE6=function(d){this.atLeastOneInternal(6,d)},c.prototype.AT_LEAST_ONE7=function(d){this.atLeastOneInternal(7,d)},c.prototype.AT_LEAST_ONE8=function(d){this.atLeastOneInternal(8,d)},c.prototype.AT_LEAST_ONE9=function(d){this.atLeastOneInternal(9,d)},c.prototype.AT_LEAST_ONE_SEP=function(d){this.atLeastOneSepFirstInternal(0,d)},c.prototype.AT_LEAST_ONE_SEP1=function(d){this.atLeastOneSepFirstInternal(1,d)},c.prototype.AT_LEAST_ONE_SEP2=function(d){this.atLeastOneSepFirstInternal(2,d)},c.prototype.AT_LEAST_ONE_SEP3=function(d){this.atLeastOneSepFirstInternal(3,d)},c.prototype.AT_LEAST_ONE_SEP4=function(d){this.atLeastOneSepFirstInternal(4,d)},c.prototype.AT_LEAST_ONE_SEP5=function(d){this.atLeastOneSepFirstInternal(5,d)},c.prototype.AT_LEAST_ONE_SEP6=function(d){this.atLeastOneSepFirstInternal(6,d)},c.prototype.AT_LEAST_ONE_SEP7=function(d){this.atLeastOneSepFirstInternal(7,d)},c.prototype.AT_LEAST_ONE_SEP8=function(d){this.atLeastOneSepFirstInternal(8,d)},c.prototype.AT_LEAST_ONE_SEP9=function(d){this.atLeastOneSepFirstInternal(9,d)},c.prototype.RULE=function(d,p,m){if(m===void 0&&(m=i.DEFAULT_RULE_CONFIG),t.contains(this.definedRulesNames,d)){var y=n.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:d,grammarName:this.className}),_={message:y,type:i.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:d};this.definitionErrors.push(_)}if(this.definedRulesNames.push(d),!this.gastProductionsCache.containsKey(d)&&!this.serializedGrammar){var E=r.buildTopProduction(p.toString(),d,this.tokensMap);this.gastProductionsCache.put(d,E)}var C=this.defineRule(d,p,m);return this[d]=C,C},c.prototype.OVERRIDE_RULE=function(d,p,m){m===void 0&&(m=i.DEFAULT_RULE_CONFIG);var y=[];if(y=y.concat(s.validateRuleIsOverridden(d,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,y),!this.serializedGrammar){var _=r.buildTopProduction(p.toString(),d,this.tokensMap);this.gastProductionsCache.put(d,_)}var E=this.defineRule(d,p,m);return this[d]=E,E},c.prototype.BACKTRACK=function(d,p){return function(){this.isBackTrackingStack.push(1);var m=this.saveRecogState();try{return d.apply(this,p),!0}catch(y){if(e.isRecognitionException(y))return!1;throw y}finally{this.reloadRecogState(m),this.isBackTrackingStack.pop()}}},c.prototype.getGAstProductions=function(){return this.gastProductionsCache},c.prototype.getSerializedGastProductions=function(){return a.serializeGrammar(this.gastProductionsCache.values())},c}();return A_.RecognizerApi=o,A_}var R_={},oM;function Rz(){if(oM)return R_;oM=1,Object.defineProperty(R_,"__esModule",{value:!0});var t=Xe,e=eb,i=fl,n=tb,r=Ca,s=pl(),a=MU(),o=so(),c=WE(),d=wa,p=function(){function m(){}return m.prototype.initRecognizerEngine=function(y,_){if(this.className=d.classNameFromInstance(this),this.shortRuleNameToFull=new d.HashTable,this.fullRuleNameToShort=new d.HashTable,this.ruleShortNameIdx=256,this.tokenMatcher=c.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.allRuleNames=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache=new d.HashTable,this.serializedGrammar=t.has(_,"serializedGrammar")?_.serializedGrammar:s.DEFAULT_PARSER_CONFIG.serializedGrammar,t.isArray(y)){if(t.isEmpty(y))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof y[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(t.isArray(y))this.tokensMap=t.reduce(y,function(k,R){return k[o.tokenName(R)]=R,k},{});else if(t.has(y,"modes")&&t.every(t.flatten(t.values(y.modes)),c.isTokenType)){var E=t.flatten(t.values(y.modes)),C=t.uniq(E);this.tokensMap=t.reduce(C,function(k,R){return k[o.tokenName(R)]=R,k},{})}else if(t.isObject(y))this.tokensMap=t.cloneObj(y);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=o.EOF;var S=t.every(t.values(y),function(k){return t.isEmpty(k.categoryMatches)});this.tokenMatcher=S?c.tokenStructuredMatcherNoCategories:c.tokenStructuredMatcher,c.augmentTokenTypes(t.values(this.tokensMap))},m.prototype.defineRule=function(y,_,E){if(this.selfAnalysisDone)throw Error("Grammar rule <"+y+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var C=t.has(E,"resyncEnabled")?E.resyncEnabled:s.DEFAULT_RULE_CONFIG.resyncEnabled,S=t.has(E,"recoveryValueFunc")?E.recoveryValueFunc:s.DEFAULT_RULE_CONFIG.recoveryValueFunc,k=this.ruleShortNameIdx<<e.BITS_FOR_METHOD_IDX+e.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull.put(k,y),this.fullRuleNameToShort.put(y,k);function R(F){try{if(this.outputCst===!0){_.apply(this,F);var P=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(P),P}else return _.apply(this,F)}catch(B){var x=this.RULE_STACK.length===1,M=C&&!this.isBackTracking()&&this.recoveryEnabled;if(i.isRecognitionException(B))if(M){var q=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(q))if(B.resyncedTokens=this.reSyncTo(q),this.outputCst){var $=this.CST_STACK[this.CST_STACK.length-1];return $.recoveredNode=!0,$}else return S();else{if(this.outputCst){var $=this.CST_STACK[this.CST_STACK.length-1];$.recoveredNode=!0,B.partialCstResult=$}throw B}}else{if(x)return this.moveToTerminatedState(),S();throw B}else throw B}finally{this.ruleFinallyStateUpdate()}}var O;O=function(F,P){return F===void 0&&(F=0),this.ruleInvocationStateUpdate(k,y,F),R.call(this,P)};var I="ruleName";return O[I]=y,O},m.prototype.optionInternal=function(y,_){var E=this.getKeyForAutomaticLookahead(e.OPTION_IDX,_),C=this.nestedRuleBeforeClause(y,E);try{return this.optionInternalLogic(y,_,E)}finally{C!==void 0&&this.nestedRuleFinallyClause(E,C)}},m.prototype.optionInternalNoCst=function(y,_){var E=this.getKeyForAutomaticLookahead(e.OPTION_IDX,_);return this.optionInternalLogic(y,_,E)},m.prototype.optionInternalLogic=function(y,_,E){var C=this,S=this.getLookaheadFuncForOption(E,_),k,R;if(y.DEF!==void 0){if(k=y.DEF,R=y.GATE,R!==void 0){var O=S;S=function(){return R.call(C)&&O.call(C)}}}else k=y;if(S.call(this)===!0)return k.call(this)},m.prototype.atLeastOneInternal=function(y,_){var E=this.getKeyForAutomaticLookahead(e.AT_LEAST_ONE_IDX,y),C=this.nestedRuleBeforeClause(_,E);try{return this.atLeastOneInternalLogic(y,_,E)}finally{C!==void 0&&this.nestedRuleFinallyClause(E,C)}},m.prototype.atLeastOneInternalNoCst=function(y,_){var E=this.getKeyForAutomaticLookahead(e.AT_LEAST_ONE_IDX,y);this.atLeastOneInternalLogic(y,_,E)},m.prototype.atLeastOneInternalLogic=function(y,_,E){var C=this,S=this.getLookaheadFuncForAtLeastOne(E,y),k,R;if(_.DEF!==void 0){if(k=_.DEF,R=_.GATE,R!==void 0){var O=S;S=function(){return R.call(C)&&O.call(C)}}}else k=_;if(S.call(this)===!0)for(var I=this.doSingleRepetition(k);S.call(this)===!0&&I===!0;)I=this.doSingleRepetition(k);else throw this.raiseEarlyExitException(y,n.PROD_TYPE.REPETITION_MANDATORY,_.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[y,_],S,e.AT_LEAST_ONE_IDX,y,r.NextTerminalAfterAtLeastOneWalker)},m.prototype.atLeastOneSepFirstInternal=function(y,_){var E=this.getKeyForAutomaticLookahead(e.AT_LEAST_ONE_SEP_IDX,y),C=this.nestedRuleBeforeClause(_,E);try{this.atLeastOneSepFirstInternalLogic(y,_,E)}finally{C!==void 0&&this.nestedRuleFinallyClause(E,C)}},m.prototype.atLeastOneSepFirstInternalNoCst=function(y,_){var E=this.getKeyForAutomaticLookahead(e.AT_LEAST_ONE_SEP_IDX,y);this.atLeastOneSepFirstInternalLogic(y,_,E)},m.prototype.atLeastOneSepFirstInternalLogic=function(y,_,E){var C=this,S=_.DEF,k=_.SEP,R=this.getLookaheadFuncForAtLeastOneSep(E,y);if(R.call(this)===!0){S.call(this);for(var O=function(){return C.tokenMatcher(C.LA(1),k)};this.tokenMatcher(this.LA(1),k)===!0;)this.CONSUME(k),S.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[y,k,O,S,r.NextTerminalAfterAtLeastOneSepWalker],O,e.AT_LEAST_ONE_SEP_IDX,y,r.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(y,n.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,_.ERR_MSG)},m.prototype.manyInternal=function(y,_){var E=this.getKeyForAutomaticLookahead(e.MANY_IDX,y),C=this.nestedRuleBeforeClause(_,E);try{return this.manyInternalLogic(y,_,E)}finally{C!==void 0&&this.nestedRuleFinallyClause(E,C)}},m.prototype.manyInternalNoCst=function(y,_){var E=this.getKeyForAutomaticLookahead(e.MANY_IDX,y);return this.manyInternalLogic(y,_,E)},m.prototype.manyInternalLogic=function(y,_,E){var C=this,S=this.getLookaheadFuncForMany(E,y),k,R;if(_.DEF!==void 0){if(k=_.DEF,R=_.GATE,R!==void 0){var O=S;S=function(){return R.call(C)&&O.call(C)}}}else k=_;for(var I=!0;S.call(this)===!0&&I===!0;)I=this.doSingleRepetition(k);this.attemptInRepetitionRecovery(this.manyInternal,[y,_],S,e.MANY_IDX,y,r.NextTerminalAfterManyWalker,I)},m.prototype.manySepFirstInternal=function(y,_){var E=this.getKeyForAutomaticLookahead(e.MANY_SEP_IDX,y),C=this.nestedRuleBeforeClause(_,E);try{this.manySepFirstInternalLogic(y,_,E)}finally{C!==void 0&&this.nestedRuleFinallyClause(E,C)}},m.prototype.manySepFirstInternalNoCst=function(y,_){var E=this.getKeyForAutomaticLookahead(e.MANY_SEP_IDX,y);this.manySepFirstInternalLogic(y,_,E)},m.prototype.manySepFirstInternalLogic=function(y,_,E){var C=this,S=_.DEF,k=_.SEP,R=this.getLookaheadFuncForManySep(E,y);if(R.call(this)===!0){S.call(this);for(var O=function(){return C.tokenMatcher(C.LA(1),k)};this.tokenMatcher(this.LA(1),k)===!0;)this.CONSUME(k),S.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[y,k,O,S,r.NextTerminalAfterManySepWalker],O,e.MANY_SEP_IDX,y,r.NextTerminalAfterManySepWalker)}},m.prototype.repetitionSepSecondInternal=function(y,_,E,C,S){for(;E();)this.CONSUME(_),C.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[y,_,E,C,S],E,e.AT_LEAST_ONE_SEP_IDX,y,S)},m.prototype.doSingleRepetition=function(y){var _=this.getLexerPosition();y.call(this);var E=this.getLexerPosition();return E>_},m.prototype.orInternalNoCst=function(y,_){var E=t.isArray(y)?y:y.DEF,C=this.getLookaheadFuncForOr(_,E),S=C.call(this,E);if(S!==void 0){var k=E[S];return k.ALT.call(this)}this.raiseNoAltException(_,y.ERR_MSG)},m.prototype.orInternal=function(y,_){var E=this.getKeyForAutomaticLookahead(e.OR_IDX,_),C=this.nestedRuleBeforeClause(y,E);try{var S=t.isArray(y)?y:y.DEF,k=this.getLookaheadFuncForOr(_,S),R=k.call(this,S);if(R!==void 0){var O=S[R],I=this.nestedAltBeforeClause(O,_,e.OR_IDX,R);try{return O.ALT.call(this)}finally{I!==void 0&&this.nestedRuleFinallyClause(I.shortName,I.nestedName)}}this.raiseNoAltException(_,y.ERR_MSG)}finally{C!==void 0&&this.nestedRuleFinallyClause(E,C)}},m.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&!this.isAtEndOfInput()){var y=this.LA(1),_=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:y,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new i.NotAllInputParsedException(_,y))}},m.prototype.subruleInternal=function(y,_,E){var C;try{var S=E!==void 0?E.ARGS:void 0;return C=y.call(this,_,S),this.cstPostNonTerminal(C,E!==void 0&&E.LABEL!==void 0?E.LABEL:y.ruleName),C}catch(k){throw i.isRecognitionException(k)&&k.partialCstResult!==void 0&&(this.cstPostNonTerminal(k.partialCstResult,E!==void 0&&E.LABEL!==void 0?E.LABEL:y.ruleName),delete k.partialCstResult),k}},m.prototype.consumeInternal=function(y,_,E){var C;try{var S=this.LA(1);if(this.tokenMatcher(S,y)===!0)this.consumeToken(),C=S;else{var k=void 0,R=this.LA(0);throw E!==void 0&&E.ERR_MSG?k=E.ERR_MSG:k=this.errorMessageProvider.buildMismatchTokenMessage({expected:y,actual:S,previous:R,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new i.MismatchedTokenException(k,S,R))}}catch(I){if(this.recoveryEnabled&&I.name==="MismatchedTokenException"&&!this.isBackTracking()){var O=this.getFollowsForInRuleRecovery(y,_);try{C=this.tryInRuleRecovery(y,O)}catch(F){throw F.name===a.IN_RULE_RECOVERY_EXCEPTION?I:F}}else throw I}return this.cstPostTerminal(E!==void 0&&E.LABEL!==void 0?E.LABEL:y.tokenName,C),C},m.prototype.saveRecogState=function(){var y=this.errors,_=t.cloneArr(this.RULE_STACK);return{errors:y,lexerState:this.exportLexerState(),RULE_STACK:_,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}},m.prototype.reloadRecogState=function(y){this.errors=y.errors,this.importLexerState(y.lexerState),this.RULE_STACK=y.RULE_STACK},m.prototype.ruleInvocationStateUpdate=function(y,_,E){this.RULE_OCCURRENCE_STACK.push(E),this.RULE_STACK.push(y),this.cstInvocationStateUpdate(_,y)},m.prototype.isBackTracking=function(){return!t.isEmpty(this.isBackTrackingStack)},m.prototype.getCurrRuleFullName=function(){var y=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull.get(y)},m.prototype.shortRuleNameToFullName=function(y){return this.shortRuleNameToFull.get(y)},m.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),o.EOF)},m.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},m}();return R_.RecognizerEngine=p,R_}var I_={},lM;function Iz(){if(lM)return I_;lM=1,Object.defineProperty(I_,"__esModule",{value:!0});var t=fl,e=Xe,i=tb,n=pl(),r=function(){function s(){}return s.prototype.initErrorHandler=function(a){this._errors=[],this.errorMessageProvider=e.defaults(a.errorMessageProvider,n.DEFAULT_PARSER_CONFIG.errorMessageProvider)},s.prototype.SAVE_ERROR=function(a){if(t.isRecognitionException(a))return a.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:e.cloneArr(this.RULE_OCCURRENCE_STACK)},this._errors.push(a),a;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(s.prototype,"errors",{get:function(){return e.cloneArr(this._errors)},set:function(a){this._errors=a},enumerable:!0,configurable:!0}),s.prototype.raiseEarlyExitException=function(a,o,c){for(var d=this.getCurrRuleFullName(),p=this.getGAstProductions().get(d),m=i.getLookaheadPathsForOptionalProd(a,p,o,this.maxLookahead),y=m[0],_=[],E=1;E<this.maxLookahead;E++)_.push(this.LA(E));var C=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:y,actual:_,previous:this.LA(0),customUserDescription:c,ruleName:d});throw this.SAVE_ERROR(new t.EarlyExitException(C,this.LA(1),this.LA(0)))},s.prototype.raiseNoAltException=function(a,o){for(var c=this.getCurrRuleFullName(),d=this.getGAstProductions().get(c),p=i.getLookaheadPathsForOr(a,d,this.maxLookahead),m=[],y=1;y<=this.maxLookahead;y++)m.push(this.LA(y));var _=this.LA(0),E=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:p,actual:m,previous:_,customUserDescription:o,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new t.NoViableAltException(E,this.LA(1),_))},s}();return I_.ErrorHandler=r,I_}var zk={};Object.defineProperty(zk,"__esModule",{value:!0});var cM=Ca,uM=Xe,Dz=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(e,i){var n=this.gastProductionsCache.get(e);if(uM.isUndefined(n))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return cM.nextPossibleTokensAfter([n],i,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(e){var i=uM.first(e.ruleStack),n=this.getGAstProductions(),r=n.get(i),s=new cM.NextAfterTokenWalker(r,e).startWalking();return s},t}();zk.ContentAssist=Dz;var dM;function pl(){return dM||(dM=1,function(t){var e=Si&&Si.__extends||function(){var P=function(x,M){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,$){q.__proto__=$}||function(q,$){for(var B in $)$.hasOwnProperty(B)&&(q[B]=$[B])},P(x,M)};return function(x,M){P(x,M);function q(){this.constructor=x}x.prototype=M===null?Object.create(M):(q.prototype=M.prototype,new q)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=wa,n=Xe,r=Wm,s=so(),a=jk,o=hc,c=QE(),d=TU(),p=MU(),m=wz(),y=Sz(),_=kz(),E=Az(),C=Rz(),S=Iz(),k=zk;t.END_OF_FILE=s.createTokenInstance(s.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(t.END_OF_FILE),t.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:c.defaultParserErrorProvider,serializedGrammar:null,nodeLocationTracking:"none"}),t.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),function(P){P[P.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",P[P.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",P[P.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",P[P.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",P[P.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",P[P.LEFT_RECURSION=5]="LEFT_RECURSION",P[P.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",P[P.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",P[P.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",P[P.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",P[P.INVALID_NESTED_RULE_NAME=10]="INVALID_NESTED_RULE_NAME",P[P.DUPLICATE_NESTED_NAME=11]="DUPLICATE_NESTED_NAME",P[P.NO_NON_EMPTY_LOOKAHEAD=12]="NO_NON_EMPTY_LOOKAHEAD",P[P.AMBIGUOUS_PREFIX_ALTS=13]="AMBIGUOUS_PREFIX_ALTS",P[P.TOO_MANY_ALTS=14]="TOO_MANY_ALTS"}(t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={}));function R(P){return P===void 0&&(P=void 0),function(){return P}}t.EMPTY_ALT=R;var O=function(){function P(x,M){M===void 0&&(M=t.DEFAULT_PARSER_CONFIG),this.ignoredIssues=t.DEFAULT_PARSER_CONFIG.ignoredIssues,this.definitionErrors=[],this.selfAnalysisDone=!1;var q=this;q.initErrorHandler(M),q.initLexerAdapter(),q.initLooksAhead(M),q.initRecognizerEngine(x,M),q.initRecoverable(M),q.initTreeBuilder(M),q.initContentAssist(),this.ignoredIssues=n.has(M,"ignoredIssues")?M.ignoredIssues:t.DEFAULT_PARSER_CONFIG.ignoredIssues,n.toFastProperties(this)}return P.performSelfAnalysis=function(x){x.performSelfAnalysis()},P.prototype.performSelfAnalysis=function(){var x=this,M;this.selfAnalysisDone=!0;var q=i.classNameFromInstance(this),$=this.gastProductionsCache;if(this.serializedGrammar){var B=a.deserializeGrammar(this.serializedGrammar,this.tokensMap);n.forEach(B,function(ue){x.gastProductionsCache.put(ue.name,ue)})}var j=d.resolveGrammar({rules:$.values()});if(this.definitionErrors.push.apply(this.definitionErrors,j),n.isEmpty(j)){var z=d.validateGrammar({rules:$.values(),maxLookahead:this.maxLookahead,tokenTypes:n.values(this.tokensMap),ignoredIssues:this.ignoredIssues,errMsgProvider:c.defaultGrammarValidatorErrorProvider,grammarName:q});this.definitionErrors.push.apply(this.definitionErrors,z)}if(n.isEmpty(this.definitionErrors)){var X=r.computeAllProdsFollows($.values());this.resyncFollows=X}var se=o.analyzeCst($.values(),this.fullRuleNameToShort);if(this.allRuleNames=se.allRuleNames,!P.DEFER_DEFINITION_ERRORS_HANDLING&&!n.isEmpty(this.definitionErrors))throw M=n.map(this.definitionErrors,function(ue){return ue.message}),new Error(`Parser Definition Errors detected:
 `+M.join(`
-------------------------------
`))},P.DEFER_DEFINITION_ERRORS_HANDLING=!1,P}();t.Parser=O,n.applyMixins(O,[p.Recoverable,m.LooksAhead,y.TreeBuilder,_.LexerAdapter,C.RecognizerEngine,E.RecognizerApi,S.ErrorHandler,k.ContentAssist]);var I=function(P){e(x,P);function x(M,q){q===void 0&&(q=t.DEFAULT_PARSER_CONFIG);var $=this,B=n.cloneObj(q);return B.outputCst=!0,$=P.call(this,M,B)||this,$}return x}(O);t.CstParser=I;var F=function(P){e(x,P);function x(M,q){q===void 0&&(q=t.DEFAULT_PARSER_CONFIG);var $=this,B=n.cloneObj(q);return B.outputCst=!1,$=P.call(this,M,B)||this,$}return x}(O);t.EmbeddedActionsParser=F}(Y1)),Y1}var Xk={};Object.defineProperty(Xk,"__esModule",{value:!0});var hM=nb;function xz(t,e){var i=e===void 0?{}:e,n=i.resourceBase,r=n===void 0?"https://unpkg.com/chevrotain@"+hM.VERSION+"/diagrams/":n,s=i.css,a=s===void 0?"https://unpkg.com/chevrotain@"+hM.VERSION+"/diagrams/diagrams.css":s,o=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,c=`
<link rel='stylesheet' href='`+a+`'>
`,d=`
<script src='`+r+`vendor/railroad-diagrams.js'><\/script>
<script src='`+r+`src/diagrams_builder.js'><\/script>
<script src='`+r+`src/diagrams_behavior.js'><\/script>
<script src='`+r+`src/main.js'><\/script>
`,p=`
<div id="diagrams" align="center"></div>    
`,m=`
<script>
    window.serializedGrammar = `+JSON.stringify(t,null,"  ")+`;
<\/script>
`,y=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return o+c+d+p+m+y}Xk.createSyntaxDiagramsCode=xz;var Qy={},ml={};Object.defineProperty(ml,"__esModule",{value:!0});var Kk=Xe,PU=so(),Pc=zi,or=`
`;function Mz(t){return`
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(['chevrotain'], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        module.exports = factory(require('chevrotain'));
    } else {
        // Browser globals (root is window)
        root.returnExports = factory(root.b);
    }
}(typeof self !== 'undefined' ? self : this, function (chevrotain) {

`+Zk(t)+`
    
return {
    `+t.name+": "+t.name+` 
}
}));
`}ml.genUmdModule=Mz;function Pz(t){return`    
`+Zk(t)+`
return new `+t.name+`(tokenVocabulary, config)    
`}ml.genWrapperFunction=Pz;function Zk(t){var e=`
function `+t.name+`(tokenVocabulary, config) {
    // invoke super constructor
    // No support for embedded actions currently, so we can 'hardcode'
    // The use of CstParser.
    chevrotain.CstParser.call(this, tokenVocabulary, config)

    const $ = this

    `+OU(t.rules)+`

    // very important to call this after all the rules have been defined.
    // otherwise the parser may not work correctly as it will lack information
    // derived during the self analysis phase.
    this.performSelfAnalysis(this)
}

// inheritance as implemented in javascript in the previous decade... :(
`+t.name+`.prototype = Object.create(chevrotain.CstParser.prototype)
`+t.name+".prototype.constructor = "+t.name+`    
    `;return e}ml.genClass=Zk;function OU(t){var e=Kk.map(t,function(i){return NU(i,1)});return e.join(`
`)}ml.genAllRules=OU;function NU(t,e){var i=rs(e,'$.RULE("'+t.name+'", function() {')+or;return i+=JE(t.definition,e+1),i+=rs(e+1,"})")+or,i}ml.genRule=NU;function GU(t,e){var i=PU.tokenName(t.terminalType);return rs(e,"$.CONSUME"+t.idx+"(this.tokensMap."+i+")"+or)}ml.genTerminal=GU;function UU(t,e){return rs(e,"$.SUBRULE"+t.idx+"($."+t.nonTerminalName+")"+or)}ml.genNonTerminal=UU;function LU(t,e){var i=rs(e,"$.OR"+t.idx+"([")+or,n=Kk.map(t.definition,function(r){return BU(r,e+1)});return i+=n.join(","+or),i+=or+rs(e,"])"+or),i}ml.genAlternation=LU;function BU(t,e){var i=rs(e,"{")+or;return t.name&&(i+=rs(e+1,'NAME: "'+t.name+'",')+or),i+=rs(e+1,"ALT: function() {")+or,i+=JE(t.definition,e+1),i+=rs(e+1,"}")+or,i+=rs(e,"}"),i}ml.genSingleAlt=BU;function Oz(t,e){if(t instanceof Pc.NonTerminal)return UU(t,e);if(t instanceof Pc.Option)return Jy("OPTION",t,e);if(t instanceof Pc.RepetitionMandatory)return Jy("AT_LEAST_ONE",t,e);if(t instanceof Pc.RepetitionMandatoryWithSeparator)return Jy("AT_LEAST_ONE_SEP",t,e);if(t instanceof Pc.RepetitionWithSeparator)return Jy("MANY_SEP",t,e);if(t instanceof Pc.Repetition)return Jy("MANY",t,e);if(t instanceof Pc.Alternation)return LU(t,e);if(t instanceof Pc.Terminal)return GU(t,e);if(t instanceof Pc.Flat)return JE(t.definition,e);throw Error("non exhaustive match")}function Jy(t,e,i){var n=rs(i,"$."+(t+e.idx)+"(");return e.name||e.separator?(n+="{"+or,e.name&&(n+=rs(i+1,'NAME: "'+e.name+'"')+","+or),e.separator&&(n+=rs(i+1,"SEP: this.tokensMap."+PU.tokenName(e.separator))+","+or),n+="DEF: "+fM(e.definition,i+2)+or,n+=rs(i,"}")+or):n+=fM(e.definition,i+1),n+=rs(i,")")+or,n}function fM(t,e){var i="function() {"+or;return i+=JE(t,e),i+=rs(e,"}")+or,i}function JE(t,e){var i="";return Kk.forEach(t,function(n){i+=Oz(n,e+1)}),i}function rs(t,e){var i=Array(t*4+1).join(" ");return i+e}var pM;function Nz(){if(pM)return Qy;pM=1,Object.defineProperty(Qy,"__esModule",{value:!0});var t=ml;function e(n){var r=t.genWrapperFunction({name:n.name,rules:n.rules}),s=new Function("tokenVocabulary","config","chevrotain",r);return function(a){return s(n.tokenVocabulary,a,FU())}}Qy.generateParserFactory=e;function i(n){return t.genUmdModule({name:n.name,rules:n.rules})}return Qy.generateParserModule=i,Qy}var Gz=g0.exports,mM;function FU(){if(mM)return g0.exports;mM=1,Object.defineProperty(Gz,"__esModule",{value:!0});var t=pl(),e=Wk(),i=so(),n=fl,r=nb,s=QE(),a=Xk,o=qd,c=zi,d=TU(),p=Nz(),m=jE,y={};return y.VERSION=r.VERSION,y.Parser=t.Parser,y.CstParser=t.CstParser,y.EmbeddedActionsParser=t.EmbeddedActionsParser,y.ParserDefinitionErrorType=t.ParserDefinitionErrorType,y.Lexer=e.Lexer,y.LexerDefinitionErrorType=e.LexerDefinitionErrorType,y.EOF=i.EOF,y.tokenName=i.tokenName,y.tokenLabel=i.tokenLabel,y.tokenMatcher=i.tokenMatcher,y.createToken=i.createToken,y.createTokenInstance=i.createTokenInstance,y.EMPTY_ALT=t.EMPTY_ALT,y.defaultParserErrorProvider=s.defaultParserErrorProvider,y.isRecognitionException=n.isRecognitionException,y.EarlyExitException=n.EarlyExitException,y.MismatchedTokenException=n.MismatchedTokenException,y.NotAllInputParsedException=n.NotAllInputParsedException,y.NoViableAltException=n.NoViableAltException,y.defaultLexerErrorProvider=m.defaultLexerErrorProvider,y.Flat=c.Flat,y.Repetition=c.Repetition,y.RepetitionWithSeparator=c.RepetitionWithSeparator,y.RepetitionMandatory=c.RepetitionMandatory,y.RepetitionMandatoryWithSeparator=c.RepetitionMandatoryWithSeparator,y.Option=c.Option,y.Alternation=c.Alternation,y.NonTerminal=c.NonTerminal,y.Terminal=c.Terminal,y.Rule=c.Rule,y.GAstVisitor=o.GAstVisitor,y.serializeGrammar=c.serializeGrammar,y.serializeProduction=c.serializeProduction,y.resolveGrammar=d.resolveGrammar,y.defaultGrammarResolverErrorProvider=s.defaultGrammarResolverErrorProvider,y.validateGrammar=d.validateGrammar,y.defaultGrammarValidatorErrorProvider=s.defaultGrammarValidatorErrorProvider,y.assignOccurrenceIndices=d.assignOccurrenceIndices,y.clearCache=function(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)},y.createSyntaxDiagramsCode=a.createSyntaxDiagramsCode,y.generateParserFactory=p.generateParserFactory,y.generateParserModule=p.generateParserModule,g0.exports=y,g0.exports}var ji=FU();const eT=t=>ji.createToken({name:t,pattern:ji.Lexer.NA,longer_alt:jm}),Yl={},Bt=(t,e,i,n={})=>{const r=[t];n.extraCategories&&r.push(...n.extraCategories);const s=ji.createToken({name:e,pattern:i,categories:r,longer_alt:jm}),a=Array.isArray(t)?t[0].name:t.name;Yl[a]===void 0&&(Yl[a]=[]),Yl[a].push(s);const o=i.toString().match(/^\/([a-zA-Z0-9]*)\/[a-zA-Z]*$/ui);return o&&o[1]&&(s.$autocomplete=o[1]),Object.assign(s,n),s},Uz=ji.createToken({name:"HSpace",pattern:/[ \t]+/,group:ji.Lexer.SKIPPED}),Lz=ji.createToken({name:"EOL",line_breaks:!0,pattern:/[ \t\r]*\n\s*/,label:"End of line"}),Bz=ji.createToken({name:"StringLiteral",pattern:/".*"/}),Fz=ji.createToken({name:"StringLiteralSingleQuote",pattern:/'.*'/}),$z=ji.createToken({name:"Comment",pattern:/(#|\/\/)[^\n]*/}),$U=ji.createToken({name:"NumberLiteral",pattern:/-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/}),Hz=ji.createToken({name:"BlackHoleStr",pattern:/[Bb][Hh][12]/}),jm=ji.createToken({name:"Identifier",pattern:/[a-zA-Z_][a-zA-Z_0-9]*/}),Ff=ji.createToken({name:"ComparisonOperator",pattern:ji.Lexer.NA}),nn=eT("AutomatorCurrency"),tT=eT("PrestigeEvent"),lu=eT("StudyPath"),rb=eT("TimeUnit");Bt(Ff,"OpGTE",/>=/,{$autocomplete:">=",$compare:(t,e)=>Decimal.gte(t,e)});Bt(Ff,"OpLTE",/<=/,{$autocomplete:"<=",$compare:(t,e)=>Decimal.lte(t,e)});Bt(Ff,"OpGT",/>/,{$autocomplete:">",$compare:(t,e)=>Decimal.gt(t,e)});Bt(Ff,"OpLT",/</,{$autocomplete:"<",$compare:(t,e)=>Decimal.lt(t,e)});const Vz=Bt(Ff,"OpEQ",/==/,{$compare:(t,e)=>Decimal.eq(t,e)}),HU=ji.createToken({name:"EqualSign",pattern:/=/,categories:Ff,label:"=",longer_alt:Vz});HU.$compare=(t,e)=>Decimal.eq(t,e);Bt(nn,"EP",/ep/i,{$getter:()=>Currency.eternityPoints.value});Bt(nn,"IP",/ip/i,{$getter:()=>Currency.infinityPoints.value});Bt(nn,"AM",/am/i,{$getter:()=>Currency.antimatter.value});Bt(nn,"DT",/dt/i,{$getter:()=>Currency.dilatedTime.value});Bt(nn,"TP",/tp/i,{$getter:()=>Currency.tachyonParticles.value});Bt(nn,"RG",/rg/i,{$getter:()=>new Decimal(Replicanti.galaxies.total)});Bt(nn,"RM",/rm/i,{$getter:()=>Currency.realityMachines.value});Bt(nn,"infinities",/infinities/i,{$getter:()=>Currency.infinities.value});Bt(nn,"bankedInfinities",/banked[ \t]+infinities/i,{$autocomplete:"banked infinities",$getter:()=>Currency.infinitiesBanked.value});Bt(nn,"eternities",/eternities/i,{$getter:()=>Currency.eternities.value});Bt(nn,"realities",/realities/i,{$getter:()=>Currency.realities.value});Bt(nn,"PendingIP",/pending[ \t]+ip/i,{$autocomplete:"pending IP",$getter:()=>Player.canCrunch?gainedInfinityPoints():L.D0});Bt(nn,"PendingEP",/pending[ \t]+ep/i,{$autocomplete:"pending EP",$getter:()=>Player.canEternity?gainedEternityPoints():L.D0});Bt(nn,"PendingTP",/pending[ \t]+tp/i,{$autocomplete:"pending TP",$getter:()=>player.dilation.active?getTachyonGain():L.D0});Bt(nn,"PendingRM",/pending[ \t]+rm/i,{$autocomplete:"pending RM",$getter:()=>isRealityAvailable()?MachineHandler.gainedRealityMachines:L.D0});Bt(nn,"PendingGlyphLevel",/pending[ \t]+glyph[ \t]+level/i,{$autocomplete:"pending Glyph level",$getter:()=>new Decimal(isRealityAvailable()?gainedGlyphLevel().actualLevel:0)});Bt(nn,"Rep",/rep(licanti)?/i,{$autocomplete:"rep",$getter:()=>Replicanti.amount});Bt(nn,"TT",/(tt|time theorems?)/i,{$autocomplete:"TT",$getter:()=>Currency.timeTheorems.value});Bt(nn,"TotalTT",/total[ \t]+tt/i,{$autocomplete:"total TT",$getter:()=>player.timestudy.theorem.plus(TimeTheorems.calculateTimeStudiesCost())});Bt(nn,"SpentTT",/spent[ \t]+tt/i,{$autocomplete:"spent TT",$getter:()=>new Decimal(GameCache.currentStudyTree.value.spentTheorems[0])});Bt(nn,"TotalCompletions",/total[ \t]+completions/i,{$autocomplete:"total completions",$getter:()=>EternityChallenges.completions});Bt(nn,"PendingCompletions",/pending[ \t]+completions/i,{$autocomplete:"pending completions",$getter:()=>EternityChallenge.isRunning?EternityChallenge.current.gainedCompletionStatus.totalCompletions:Decimal.NUMBER_MAX_VALUE});Bt(nn,"FilterScore",/filter[ \t]+score/i,{$autocomplete:"filter score",$getter:()=>{if(!EffarigUnlock.glyphFilter.isUnlocked)return-Number.MAX_VALUE;const t=GlyphSelection.glyphList(GlyphSelection.choiceCount,gainedGlyphLevel(),{isChoosingGlyph:!1}),e=AutoGlyphProcessor.pick(t);return AutoGlyphProcessor.filterValue(e)},$unlocked:()=>EffarigUnlock.glyphFilter.isUnlocked});Bt(nn,"ST",/space[ \t]+theorems/i,{$autocomplete:"space theorems",$getter:()=>V.availableST,$unlocked:()=>V.spaceTheorems>0});Bt(nn,"TotalST",/total[ \t]+space[ \t]+theorems/i,{$autocomplete:"total space theorems",$getter:()=>V.spaceTheorems,$unlocked:()=>V.spaceTheorems>0});for(let t=1;t<=12;++t){const e=t;Bt(nn,`EC${t}`,new RegExp(`ec${t} completions`,"i"),{$autocomplete:`ec${t} completions`,$getter:()=>EternityChallenge(e).completions})}Bt(tT,"Infinity",/infinity/i,{extraCategories:[lu],$autobuyer:()=>Autobuyer.bigCrunch,$autobuyerDurationMode:AUTO_CRUNCH_MODE.TIME,$autobuyerXHighestMode:AUTO_CRUNCH_MODE.X_HIGHEST,$autobuyerCurrencyMode:AUTO_CRUNCH_MODE.AMOUNT,$prestigeAvailable:()=>Player.canCrunch,$prestige:()=>bigCrunchResetRequest(!0),$prestigeLevel:1,$prestigeCurrency:"IP",$studyPath:TIME_STUDY_PATH.INFINITY_DIM});Bt(tT,"Eternity",/eternity/i,{$autobuyer:()=>Autobuyer.eternity,$autobuyerDurationMode:AUTO_ETERNITY_MODE.TIME,$autobuyerXHighestMode:AUTO_ETERNITY_MODE.X_HIGHEST,$autobuyerCurrencyMode:AUTO_ETERNITY_MODE.AMOUNT,$prestigeAvailable:()=>Player.canEternity,$prestigeLevel:2,$prestigeCurrency:"EP",$prestige:()=>eternity(!1,!0),$respec:()=>{player.respec=!0}});Bt(tT,"Reality",/reality/i,{$autobuyer:()=>Autobuyer.reality,$autobuyerCurrencyMode:AUTO_REALITY_MODE.RM,$prestigeAvailable:()=>isRealityAvailable(),$prestigeLevel:3,$prestigeCurrency:"RM",$prestige:()=>autoReality(),$respec:()=>{player.reality.respec=!0}});Bt(lu,"Idle",/idle/i,{$studyPath:TIME_STUDY_PATH.IDLE});Bt(lu,"Passive",/passive/i,{$studyPath:TIME_STUDY_PATH.PASSIVE});Bt(lu,"Active",/active/i,{$studyPath:TIME_STUDY_PATH.ACTIVE});Bt(lu,"Antimatter",/antimatter/i,{$studyPath:TIME_STUDY_PATH.ANTIMATTER_DIM});Bt(lu,"Time",/time/i,{$studyPath:TIME_STUDY_PATH.TIME_DIM});Bt(lu,"Light",/light/i,{$studyPath:TIME_STUDY_PATH.LIGHT});Bt(lu,"Dark",/dark/i,{$studyPath:TIME_STUDY_PATH.DARK});Bt(rb,"Milliseconds",/ms/i,{$autocomplete:"ms",$scale:1});Bt(rb,"Seconds",/s(ec(onds?)?)?/i,{$autocomplete:"sec",$scale:1e3});Bt(rb,"Minutes",/m(in(utes?)?)?/i,{$autocomplete:"min",$scale:60*1e3});Bt(rb,"Hours",/h(ours?)?/i,{$autocomplete:"hours",$scale:3600*1e3});const VU=ji.createToken({name:"Keyword",pattern:ji.Lexer.NA,longer_alt:jm}),qU=[],Xi=(t,e,i={})=>{const n=[VU];i.extraCategories&&n.push(...i.extraCategories);const r=ji.createToken({name:t,pattern:e,categories:n,longer_alt:jm});return r.$autocomplete=t.toLocaleLowerCase(),qU.push(r),Object.assign(r,i),r};Xi("Auto",/auto/i);Xi("Buy",/buy/i);Xi("Blob",/blob\s\s/i,{$unlocked:()=>!1});Xi("If",/if/i);Xi("Load",/load/i);Xi("Notify",/notify/i);Xi("Nowait",/nowait/i);Xi("Off",/off/i);Xi("On",/on/i);Xi("Pause",/pause/i);Xi("Name",/name([ \t]+(\/(?!\/)|[^\n#/])*)?/i);Xi("Id",/id\b([ \t]+\d)?/i);Xi("Purchase",/purchase/i);Xi("Respec",/respec/i);Xi("Restart",/restart/i);Xi("Start",/start/i);Xi("Stop",/stop/i);Xi("Studies",/studies/i);Xi("Unlock",/unlock/i);Xi("Until",/until/i);Xi("Use",/use/i);Xi("Wait",/wait/i);Xi("While",/while/i);Xi("BlackHole",/black[ \t]+hole/i,{$autocomplete:"black hole",$unlocked:()=>BlackHole(1).isUnlocked});Xi("StoreGameTime",/stored?[ \t]+game[ \t]+time/i,{$autocomplete:"store game time",$unlocked:()=>Enslaved.isUnlocked});Xi("Dilation",/dilation/i);Xi("EC",/ec/i);Xi("XHighest",/x[ \t]+highest/i,{$autocomplete:"x highest"});const qz=ji.createToken({name:"ECLiteral",pattern:/ec[1-9][0-9]*/i,longer_alt:jm}),YU=ji.createToken({name:"LCurly",pattern:/[ \t]*{/}),WU=ji.createToken({name:"RCurly",pattern:/[ \t]*}/}),jU=ji.createToken({name:"Comma",pattern:/,/}),Yz=ji.createToken({name:"Pipe",pattern:/\|/,label:"|"}),Wz=ji.createToken({name:"Dash",pattern:/-/,label:"-"}),jz=ji.createToken({name:"Exclamation",pattern:/!/,label:"!"}),Qk=[Uz,Bz,Fz,$z,Lz,Ff,...Yl.ComparisonOperator,YU,WU,jU,HU,Yz,Wz,jz,Hz,$U,nn,...Yl.AutomatorCurrency,qz,VU,...qU,tT,...Yl.PrestigeEvent,lu,...Yl.StudyPath,rb,...Yl.TimeUnit,jm];YU.LABEL="'{'";WU.LABEL="'}'";$U.LABEL="Number";jU.LABEL="❟";const iT=new ji.Lexer(Qk,{positionTracking:"full",ensureOptimizations:!0}),zU=[];for(const t of iT.lexerDefinition)zU[t.tokenTypeIdx]=t;const Le=Qk.mapToObject(t=>t.name,t=>t),zz=Yl.AutomatorCurrency.map(t=>t.$autocomplete.toUpperCase()),Bu=function(t){try{if(zz.includes(t.toUpperCase()))return t.toUpperCase()}catch{return t}for(const e of Yl.AutomatorCurrency)if(t.match(e.PATTERN)&&t.match(e.PATTERN)[0].length===t.length)return e.$autocomplete.toUpperCase();return t},Xz=["Identifier","LCurly","RCurly"],XU=iT.lexerDefinition.filter(t=>!Xz.includes(t.name)).map(t=>t.PATTERN.source).flatMap(t=>t.includes("(")||t.includes(")")?t:t.split("[ \\t]+")),Kz=/name[ \t]+(.+$)/ui,Zz=/id[ \t]+(\d)/ui;function Jk(t){if(!AutomatorBackend.isOn)return;const e=AutomatorBackend.stack.top.commandState;e&&e.prestigeLevel!==void 0&&(e.prestigeLevel=Math.max(e.prestigeLevel,t))}EventHub.logic.on(GAME_EVENT.BIG_CRUNCH_AFTER,()=>Jk(Le.Infinity.$prestigeLevel));EventHub.logic.on(GAME_EVENT.ETERNITY_RESET_AFTER,()=>Jk(Le.Eternity.$prestigeLevel));EventHub.logic.on(GAME_EVENT.REALITY_RESET_AFTER,()=>Jk(Le.Reality.$prestigeLevel));function yM(t,e,i,n){return{run:()=>{const r=n?"UNTIL":"WHILE";return t()?(AutomatorBackend.push(e),AutomatorData.logCommandEvent(`Checked ${Uh(i)} (${!n}),
        moving to line ${AutomatorBackend.translateLineNumber(i.LCurly[0].startLine+1)-1}
        (start of ${r} loop)`,i.startLine),AUTOMATOR_COMMAND_STATUS.SAME_INSTRUCTION):(AutomatorData.logCommandEvent(`Checked ${Uh(i)} (${n}),
          exiting loop at line ${AutomatorBackend.translateLineNumber(i.RCurly[0].startLine+1)-1}
          (end of ${r} loop)`,i.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_TICK_NEXT_INSTRUCTION)},blockCommands:e}}function Uh(t){const e=t.comparison[0].children,i=e.compareValue.map(r=>{if(r.children.AutomatorCurrency)return()=>r.children.AutomatorCurrency[0].image;const s=r.children.$value;return typeof s=="string"?()=>s:()=>format(s,2,2)}),n=e.ComparisonOperator[0].image;return`${i[0]()} ${n} ${i[1]()}`}function gM(t){let e,i;switch(t){case"INFINITY":return`${format(player.records.recentInfinities[0][1],2)} IP`;case"ETERNITY":return e=AutomatorData.lastECCompletionCount,i=`${format(player.records.recentEternities[0][1],2)} EP`,e===0?`${i}`:`${i}, ${e} completions`;case"REALITY":return`${format(player.records.recentRealities[0][1],2)} RM`;default:throw Error(`Unrecognized prestige ${t} in Automator event log`)}}const nT=[{id:"auto",rule:t=>()=>{t.CONSUME(Le.Auto),t.CONSUME(Le.PrestigeEvent),t.OR([{ALT:()=>t.CONSUME(Le.On)},{ALT:()=>t.CONSUME(Le.Off)},{ALT:()=>t.OR1([{ALT:()=>t.SUBRULE(t.duration)},{ALT:()=>t.SUBRULE(t.xHighest)},{ALT:()=>t.SUBRULE(t.currencyAmount)}])}])},validate:(t,e)=>{if(t.startLine=t.Auto[0].startLine,t.PrestigeEvent&&t.currencyAmount){const n=t.PrestigeEvent[0].tokenType.$prestigeCurrency,r=t.currencyAmount[0].children.AutomatorCurrency[0].tokenType.name;if(n!==r)return e.addError(t.currencyAmount,`AutomatorCurrency doesn't match prestige (${n} vs ${r})`,`Use ${n} for the specified prestige resource`),!1}if(!t.PrestigeEvent)return!0;const i=t.duration||t.xHighest;if(t.PrestigeEvent[0].tokenType===Le.Infinity){if(!Autobuyer.bigCrunch.isUnlocked)return e.addError(t.PrestigeEvent,"Infinity autobuyer is not unlocked","Complete the Big Crunch Autobuyer challenge to use this command"),!1;if(i&&!EternityMilestone.bigCrunchModes.isReached)return e.addError((t.duration||t.xHighest)[0],"Advanced Infinity autobuyer settings are not unlocked",`Reach ${quantifyInt("Eternity",EternityMilestone.bigCrunchModes.config.eternities)}
            to use this command`),!1}if(t.PrestigeEvent[0].tokenType===Le.Eternity){if(!EternityMilestone.autobuyerEternity.isReached)return e.addError(t.PrestigeEvent,"Eternity autobuyer is not unlocked",`Reach ${quantifyInt("Eternity",EternityMilestone.autobuyerEternity.config.eternities)}
            to use this command`),!1;if(i&&!RealityUpgrade(13).isBought)return e.addError((t.duration||t.xHighest)[0],"Advanced Eternity autobuyer settings are not unlocked","Purchase the Reality Upgrade which unlocks advanced Eternity autobuyer settings"),!1}if(t.PrestigeEvent[0].tokenType===Le.Reality){if(!RealityUpgrade(25).isBought)return e.addError(t.PrestigeEvent,"Reality autobuyer is not unlocked","Purchase the Reality Upgrade which unlocks the Reality autobuyer"),!1;if(i)return e.addError((t.duration||t.xHighest)[0],"Auto Reality cannot be set to a duration or x highest","Use RM for Auto Reality"),!1}return!0},compile:t=>{const e=t.PrestigeEvent[0].tokenType===Le.Reality,i=!!(t.On||t.duration||t.xHighest||t.currencyAmount),n=t.duration?t.duration[0].children.$value:void 0,r=t.xHighest?t.xHighest[0].children.$value:void 0,s=t.currencyAmount?t.currencyAmount[0].children.$value:void 0,a=t.PrestigeEvent[0].tokenType.$autobuyerDurationMode,o=t.PrestigeEvent[0].tokenType.$autobuyerXHighestMode,c=t.PrestigeEvent[0].tokenType.$autobuyerCurrencyMode,d=t.PrestigeEvent[0].tokenType.$autobuyer();return()=>{d.isActive=i;let p="";n!==void 0?(d.mode=a,d.time=n/1e3,p=`${d.time>1e3?formatInt(d.time):quantify("second",d.time)}`):r!==void 0?(d.mode=o,d.xHighest=new Decimal(r),p=`${format(r,2,2)} times highest`):s!==void 0&&(d.mode=c,e?(d.rm=new Decimal(s),p=`${format(d.rm,2)} RM`):(d.amount=new Decimal(s),p=`${s} ${t.PrestigeEvent[0].image==="infinity"?"IP":"EP"}`));const m=d.isActive&&p!==""?`(Setting: ${p})`:"";return AutomatorData.logCommandEvent(`Automatic ${t.PrestigeEvent[0].image}
          turned ${d.isActive?"ON":"OFF"} ${m}`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION}},blockify:t=>{const e=t.duration?`${t.duration[0].children.NumberLiteral[0].image} ${t.duration[0].children.TimeUnit[0].image}`:void 0,i=t.xHighest?t.xHighest[0].children.$value:void 0,n=t.currencyAmount?`${t.currencyAmount[0].children.NumberLiteral[0].image} ${t.currencyAmount[0].children.AutomatorCurrency[0].image.toUpperCase()}`:void 0,r=!!t.On;let s="";return e?s=e:i?s=`${i} x highest`:n?s=`${n}`:s=r?"ON":"OFF",{singleSelectionInput:t.PrestigeEvent[0].tokenType.name.toUpperCase(),singleTextInput:s,...automatorBlocksMap.AUTO}}},{id:"blackHole",rule:t=>()=>{t.CONSUME(Le.BlackHole),t.OR([{ALT:()=>t.CONSUME(Le.On)},{ALT:()=>t.CONSUME(Le.Off)}])},validate:t=>(t.startLine=t.BlackHole[0].startLine,!0),compile:t=>{const e=!!t.On;return()=>{e===BlackHoles.arePaused&&BlackHoles.togglePause();let i;return BlackHole(1).isUnlocked?i=`Black Holes toggled ${t.On?"ON":"OFF"}`:Enslaved.isRunning||Pelle.isDisabled("blackhole")?i="Black Hole command ignored because BH is disabled in your current Reality":i="Black Hole command ignored because BH is not unlocked",AutomatorData.logCommandEvent(i,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION}},blockify:t=>({singleSelectionInput:t.On?"ON":"OFF",...automatorBlocksMap["BLACK HOLE"]})},{id:"blob",rule:t=>()=>{t.CONSUME(Le.Blob)},validate:t=>(t.startLine=t.Blob[0].startLine,!0),compile:()=>()=>AUTOMATOR_COMMAND_STATUS.SKIP_INSTRUCTION,blockify:()=>({...automatorBlocksMap.BLOB})},{id:"comment",rule:t=>()=>{t.CONSUME(Le.Comment)},validate:t=>(t.startLine=t.Comment[0].startLine,!0),compile:()=>()=>AUTOMATOR_COMMAND_STATUS.SKIP_INSTRUCTION,blockify:t=>({...automatorBlocksMap.COMMENT,singleTextInput:t.Comment[0].image.replace(/(#|\/\/)\s?/u,"")})},{id:"ifBlock",rule:t=>()=>{t.CONSUME(Le.If),t.SUBRULE(t.comparison),t.CONSUME(Le.LCurly),t.CONSUME(Le.EOL),t.SUBRULE(t.block),t.CONSUME(Le.RCurly)},validate:(t,e)=>(t.startLine=t.If[0].startLine,e.checkBlock(t,t.If)),compile:(t,e)=>{const i=e.visit(t.comparison),n=e.visit(t.block);return{run:r=>r.commandState!==null?AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION:(r.commandState={advanceOnPop:!0,ifEndLine:t.RCurly[0].startLine},i()?(AutomatorBackend.push(n),AutomatorData.logCommandEvent(`Checked ${Uh(t)} (true),
            entering IF block`,t.startLine),AUTOMATOR_COMMAND_STATUS.SAME_INSTRUCTION):(AutomatorData.logCommandEvent(`Checked ${Uh(t)} (false),
              skipping to line ${AutomatorBackend.translateLineNumber(t.RCurly[0].startLine+1)}`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION)),blockCommands:n}},blockify:(t,e)=>{const i=[];e.visit(t.block,i);const n=e.visit(t.comparison);return{nest:i,...automatorBlocksMap.IF,...n,genericInput1:Bu(n.genericInput1),genericInput2:Bu(n.genericInput2)}}},{id:"notify",rule:t=>()=>{t.CONSUME(Le.Notify),t.OR([{ALT:()=>t.CONSUME(Le.StringLiteral)},{ALT:()=>t.CONSUME(Le.StringLiteralSingleQuote)}])},validate:t=>(t.startLine=t.Notify[0].startLine,!0),compile:t=>{const e=t.StringLiteral||t.StringLiteralSingleQuote;return()=>(GameUI.notify.automator(`Automator: ${e[0].image}`),AutomatorData.logCommandEvent(`NOTIFY call: ${e[0].image}`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION)},blockify:t=>({...automatorBlocksMap.NOTIFY,singleTextInput:(t.StringLiteral||t.StringLiteralSingleQuote)[0].image})},{id:"pauseTime",rule:t=>()=>{t.CONSUME(Le.Pause),t.OR([{ALT:()=>t.SUBRULE(t.duration)},{ALT:()=>t.CONSUME(Le.Identifier)}])},validate:(t,e)=>{t.startLine=t.Pause[0].startLine;let i;if(t.Identifier){if(!e.isValidVarFormat(t.Identifier[0],AUTOMATOR_VAR_TYPES.DURATION))return e.addError(t,`Constant ${t.Identifier[0].image} is not a valid time duration constant`,`Ensure that ${t.Identifier[0].image} is a number of seconds less than
            ${format(Number.MAX_VALUE/1e3)}`),!1;const n=e.lookupVar(t.Identifier[0],AUTOMATOR_VAR_TYPES.DURATION);i=n&&n.value}else i=e.visit(t.duration);return t.$duration=i,t.$duration!==void 0},compile:t=>{const e=t.$duration;return i=>{let n;if(t.duration){const s=t.duration[0].children;n=`${s.NumberLiteral[0].image} ${s.TimeUnit[0].image}`}else n=TimeSpan.fromMilliseconds(e);return i.commandState===null?(i.commandState={timeMs:0},AutomatorData.logCommandEvent(`Pause started (waiting ${n})`,t.startLine)):i.commandState.timeMs+=Math.max(Time.unscaledDeltaTime.totalMilliseconds,AutomatorBackend.currentInterval),i.commandState.timeMs>=e?(AutomatorData.logCommandEvent(`Pause finished (waited ${n})`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION}},blockify:t=>{let e;if(t.duration){const i=t.duration[0].children;e=`${i.NumberLiteral[0].image} ${i.TimeUnit[0].image}`}else e=`${t.Identifier[0].image}`;return{...automatorBlocksMap.PAUSE,singleTextInput:e}}},{id:"prestige",rule:t=>()=>{t.CONSUME(Le.PrestigeEvent),t.OPTION(()=>t.CONSUME(Le.Nowait)),t.OPTION1(()=>t.CONSUME(Le.Respec))},validate:(t,e)=>(t.startLine=t.PrestigeEvent[0].startLine,t.PrestigeEvent&&t.PrestigeEvent[0].tokenType===Le.Eternity&&!EternityMilestone.autobuyerEternity.isReached?(e.addError(t.PrestigeEvent,"Eternity autobuyer is not unlocked",`Reach ${quantifyInt("Eternity",EternityMilestone.autobuyerEternity.config.eternities)}
          to use this command`),!1):t.PrestigeEvent&&t.PrestigeEvent[0].tokenType===Le.Reality&&!RealityUpgrade(25).isBought?(e.addError(t.PrestigeEvent,"Reality autobuyer is not unlocked","Purchase the Reality Upgrade which unlocks the Reality autobuyer"),!1):(t.PrestigeEvent&&t.PrestigeEvent[0].tokenType===Le.Infinity&&t.Respec&&e.addError(t.Respec,"There's no 'respec' for infinity","Remove 'respec' from the command"),!0)),compile:t=>{const e=t.Nowait!==void 0,i=t.Respec!==void 0,n=t.PrestigeEvent[0].tokenType;return()=>{if(!n.$prestigeAvailable())return e?(AutomatorData.logCommandEvent(`${t.PrestigeEvent.image} attempted, but skipped due to NOWAIT`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION;i&&n.$respec(),n.$prestige();const s=t.PrestigeEvent[0].image.toUpperCase();return AutomatorData.logCommandEvent(`${s} triggered (${gM(s)})`,t.startLine),s==="REALITY"&&AutomatorBackend.state.forceRestart?AUTOMATOR_COMMAND_STATUS.RESTART:AUTOMATOR_COMMAND_STATUS.NEXT_TICK_NEXT_INSTRUCTION}},blockify:t=>({...automatorBlocksMap[t.PrestigeEvent[0].tokenType.name.toUpperCase()],nowait:t.Nowait!==void 0,respec:t.Respec!==void 0})},{id:"startDilation",rule:t=>()=>{t.CONSUME(Le.Start),t.CONSUME(Le.Dilation)},validate:t=>(t.startLine=t.Start[0].startLine,!0),compile:t=>()=>player.dilation.active?(AutomatorData.logCommandEvent("Start Dilation encountered but ignored due to already being dilated",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):startDilatedEternity(!0)?(AutomatorData.logCommandEvent("Dilation entered",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_TICK_NEXT_INSTRUCTION):AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION,blockify:()=>({singleSelectionInput:"DILATION",...automatorBlocksMap.START})},{id:"startEC",rule:t=>()=>{t.CONSUME(Le.Start),t.SUBRULE(t.eternityChallenge)},validate:t=>(t.startLine=t.Start[0].startLine,!0),compile:t=>{const e=t.eternityChallenge[0].children.$ecNumber;return()=>{const i=EternityChallenge(e);return i.isRunning?(AutomatorData.logCommandEvent("Start EC encountered but ignored due to already being in the specified EC",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):!EternityChallenge(e).isUnlocked&&!TimeStudy.eternityChallenge(e).purchase(!0)?AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION:i.start(!0)?(AutomatorData.logCommandEvent(`Eternity Challenge ${e} started`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_TICK_NEXT_INSTRUCTION):AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION}},blockify:t=>({singleSelectionInput:"EC",singleTextInput:t.eternityChallenge[0].children.$ecNumber,...automatorBlocksMap.START})},{id:"storeGameTime",rule:t=>()=>{t.CONSUME(Le.StoreGameTime),t.OR([{ALT:()=>t.CONSUME(Le.On)},{ALT:()=>t.CONSUME(Le.Off)},{ALT:()=>t.CONSUME(Le.Use)}])},validate:(t,e)=>(t.startLine=t.StoreGameTime[0].startLine,Enslaved.isUnlocked?!0:(e.addError(t.StoreGameTime[0],"You do not yet know how to store game time","Unlock the ability to store game time"),!1)),compile:t=>{if(t.Use)return()=>(Enslaved.isUnlocked?(Enslaved.useStoredTime(!1),AutomatorData.logCommandEvent("Stored game time used",t.startLine)):AutomatorData.logCommandEvent("Attempted to use stored game time, but failed (not unlocked yet)",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION);const e=!!t.On;return()=>(e!==player.celestials.enslaved.isStoring&&Enslaved.toggleStoreBlackHole(),AutomatorData.logCommandEvent(`Storing game time toggled ${t.On?"ON":"OFF"}`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION)},blockify:t=>({singleSelectionInput:t.Use?"USE":t.On?"ON":"OFF",...automatorBlocksMap["STORE GAME TIME"]})},{id:"studiesBuy",rule:t=>()=>{t.CONSUME(Le.Studies),t.OPTION(()=>t.CONSUME(Le.Nowait)),t.CONSUME(Le.Purchase),t.OR([{ALT:()=>t.SUBRULE(t.studyList)},{ALT:()=>t.CONSUME1(Le.Identifier)}])},validate:(t,e)=>{if(t.startLine=t.Studies[0].startLine,t.Identifier){if(!e.isValidVarFormat(t.Identifier[0],AUTOMATOR_VAR_TYPES.STUDIES))return e.addError(t,`Constant ${t.Identifier[0].image} is not a valid Time Study constant`,`Ensure that ${t.Identifier[0].image} is a properly-formatted Time Study string`),!1;const i=e.lookupVar(t.Identifier[0],AUTOMATOR_VAR_TYPES.STUDIES);t.$studies=i.value,t.$studies.image=t.Identifier[0].image}else t.studyList&&(t.$studies=e.visit(t.studyList));return!0},compile:t=>{const e=t.$studies;return t.Nowait===void 0?()=>{let i=0,n=0,r;for(const o of e.normal)TimeStudy(o).isBought?i++:TimeStudy(o).purchase(!0)?n++:r=r??o;if(i+n<e.normal.length)return i+n===0&&AutomatorData.logCommandEvent("Could not purchase any of the specified Time Studies",t.startLine),n>0&&r&&AutomatorData.logCommandEvent(`Purchased ${quantifyInt("Time Study",n)} and stopped at
            Time Study ${r}, waiting to attempt to purchase more Time Studies`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION;const s=e.ec?TimeStudy.eternityChallenge(e.ec).isBought:!1;if(!e.ec||s&&!e.startEC)return AutomatorData.logCommandEvent("Purchased all specified Time Studies",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION;const a=TimeStudy.eternityChallenge(e.ec).purchase(!0);return s||a?(e.startEC?(EternityChallenge(e.ec).start(!0),EternityChallenge(e.ec).isRunning?AutomatorData.logCommandEvent(`Purchased all specified Time Studies, then unlocked and started running
                Eternity Challenge ${e.ec}`,t.startLine):AutomatorData.logCommandEvent(`Purchased all specified Time Studies and unlocked Eternity Challenge
                ${e.ec}, but failed to start it`,t.startLine)):AutomatorData.logCommandEvent(`Purchased all specified Time Studies and unlocked Eternity Challenge
              ${e.ec}`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION}:()=>{for(const i of e.normal)TimeStudy(i).purchase(!0);return!e.ec||TimeStudy.eternityChallenge(e.ec).isBought||TimeStudy.eternityChallenge(e.ec).purchase(!0),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION}},blockify:t=>({singleTextInput:t.$studies.image,nowait:t.Nowait!==void 0,...automatorBlocksMap["STUDIES PURCHASE"]})},{id:"studiesLoad",rule:t=>()=>{t.CONSUME(Le.Studies),t.OPTION(()=>t.CONSUME(Le.Nowait)),t.CONSUME(Le.Load),t.OR([{ALT:()=>t.CONSUME1(Le.Id)},{ALT:()=>t.CONSUME1(Le.Name)}])},validate:(t,e)=>{if(t.startLine=t.Studies[0].startLine,t.Id){const i=Zz.exec(t.Id[0].image);if(!i||t.Id[0].isInsertedInRecovery)return e.addError(t,"Missing preset id","Provide the id of a saved study preset slot from the Time Studies page"),!1;const n=parseInt(i[1],10);return n<1||n>6?(e.addError(t.Id[0],`Could not find a preset with an id of ${n}`,"Type in a valid id (1 - 6) for your study preset"),!1):(t.$presetIndex=n,!0)}if(t.Name){const i=Kz.exec(t.Name[0].image);if(!i||t.Name[0].isInsertedInRecovery)return e.addError(t,"Missing preset name","Provide the name of a saved study preset from the Time Studies page"),!1;const n=player.timestudy.presets.findIndex(r=>r.name===i[1])+1;return n===0?(e.addError(t.Name[0],`Could not find preset named ${i[1]} (Note: Names are case-sensitive)`,"Check to make sure you typed in the correct name for your study preset"),!1):(t.$presetIndex=n,!0)}return!1},compile:t=>{const e=t.$presetIndex;return()=>{const i=new TimeStudyTree(player.timestudy.presets[e-1].studies),n=GameCache.currentStudyTree.value.purchasedStudies.length;TimeStudyTree.commitToGameState(i.purchasedStudies,!0,i.startEC);const r=GameCache.currentStudyTree.value.purchasedStudies.length,s=i.purchasedStudies.filter(o=>!GameCache.currentStudyTree.value.purchasedStudies.includes(o)).length,a=t.Name?t.Name[0].image:t.Id[0].image;return s===0?AutomatorData.logCommandEvent(`Fully loaded study preset ${a}`,t.startLine):r>n&&AutomatorData.logCommandEvent(`Partially loaded study preset ${a}
            (missing ${quantifyInt("study",s)})`,t.startLine),t.Nowait!==void 0||s===0?AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION:AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION}},blockify:t=>({singleSelectionInput:t.Name?"NAME":"ID",singleTextInput:t.Name?player.timestudy.presets[t.$presetIndex-1].name:t.$presetIndex,nowait:t.Nowait!==void 0,...automatorBlocksMap["STUDIES LOAD"]})},{id:"studiesRespec",rule:t=>()=>{t.CONSUME(Le.Studies),t.CONSUME(Le.Respec)},validate:t=>(t.startLine=t.Studies[0].startLine,!0),compile:t=>()=>(player.respec=!0,AutomatorData.logCommandEvent("Turned study respec ON",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION),blockify:()=>automatorBlocksMap["STUDIES RESPEC"]},{id:"unlockDilation",rule:t=>()=>{t.CONSUME(Le.Unlock),t.OPTION(()=>t.CONSUME(Le.Nowait)),t.CONSUME(Le.Dilation)},validate:t=>(t.startLine=t.Unlock[0].startLine,!0),compile:t=>{const e=t.Nowait!==void 0;return()=>PlayerProgress.dilationUnlocked()?(AutomatorData.logCommandEvent("Skipped dilation unlock due to being already unlocked",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):TimeStudy.dilation.purchase(!0)?(AutomatorData.logCommandEvent("Unlocked Dilation",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):e?(AutomatorData.logCommandEvent("Skipped dilation unlock due to lack of requirements (NOWAIT)",t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION},blockify:t=>({singleSelectionInput:"DILATION",nowait:t.Nowait!==void 0,...automatorBlocksMap.UNLOCK})},{id:"unlockEC",rule:t=>()=>{t.CONSUME(Le.Unlock),t.OPTION(()=>t.CONSUME(Le.Nowait)),t.SUBRULE(t.eternityChallenge)},validate:t=>(t.startLine=t.Unlock[0].startLine,!0),compile:t=>{const e=t.Nowait!==void 0,i=t.eternityChallenge[0].children.$ecNumber;return()=>EternityChallenge(i).isUnlocked?(AutomatorData.logCommandEvent(`Skipped EC ${i} unlock due to being already unlocked`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):e?(AutomatorData.logCommandEvent(`EC ${i} unlock failed and skipped (NOWAIT)`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):TimeStudy.eternityChallenge(i).purchase(!0)?(AutomatorData.logCommandEvent(`EC ${i} unlocked`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION},blockify:t=>({singleSelectionInput:"EC",singleTextInput:t.eternityChallenge[0].children.$ecNumber,nowait:t.Nowait!==void 0,...automatorBlocksMap.UNLOCK})},{id:"untilLoop",rule:t=>()=>{t.CONSUME(Le.Until),t.OR([{ALT:()=>t.SUBRULE(t.comparison)},{ALT:()=>t.CONSUME(Le.PrestigeEvent)}]),t.CONSUME(Le.LCurly),t.CONSUME(Le.EOL),t.SUBRULE(t.block),t.CONSUME(Le.RCurly)},validate:(t,e)=>(t.startLine=t.Until[0].startLine,e.checkBlock(t,t.Until)),compile:(t,e)=>{const i=e.visit(t.block);if(t.comparison){const s=e.visit(t.comparison);return yM(()=>!s(),i,t,!0)}const n=t.PrestigeEvent[0].tokenType.$prestigeLevel;let r;switch(t.PrestigeEvent[0].tokenType){case Le.Infinity:r="Infinity";break;case Le.Eternity:r="Eternity";break;case Le.Reality:r="Reality";break;default:throw Error("Unrecognized prestige layer in until loop")}return{run:s=>(s.commandState===null&&(s.commandState={prestigeLevel:0}),s.commandState.prestigeLevel>=n?(AutomatorData.logCommandEvent(`${r} prestige has occurred, exiting until loop`,t.startLine),AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION):(AutomatorBackend.push(i),AutomatorData.logCommandEvent(`${r} prestige has not occurred yet, moving to line
            ${AutomatorBackend.translateLineNumber(t.LCurly[0].startLine+1)} (start of until loop)`,t.startLine),AUTOMATOR_COMMAND_STATUS.SAME_INSTRUCTION)),blockCommands:i}},blockify:(t,e)=>{const i=[];e.visit(t.block,i);const n=e.visit(t.comparison);return t.comparison?{nest:i,...automatorBlocksMap.UNTIL,...n,genericInput1:Bu(n.genericInput1),genericInput2:Bu(n.genericInput2)}:{genericInput1:t.PrestigeEvent[0].tokenType.name.toUpperCase(),nest:i,...automatorBlocksMap.UNTIL}}},{id:"waitCondition",rule:t=>()=>{t.CONSUME(Le.Wait),t.SUBRULE(t.comparison)},validate:t=>(t.startLine=t.Wait[0].startLine,!0),compile:(t,e)=>()=>{if(e.visit(t.comparison)()){const r=TimeSpan.fromMilliseconds(Date.now()-AutomatorData.waitStart).toStringShort();return AutomatorData.isWaiting?AutomatorData.logCommandEvent(`Continuing after WAIT
            (${Uh(t)} is true, after ${r})`,t.startLine):AutomatorData.logCommandEvent(`WAIT skipped (${Uh(t)} is already true)`,t.startLine),AutomatorData.isWaiting=!1,AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION}return AutomatorData.isWaiting||(AutomatorData.logCommandEvent(`Started WAIT for ${Uh(t)}`,t.startLine),AutomatorData.waitStart=Date.now()),AutomatorData.isWaiting=!0,AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION},blockify:(t,e)=>{const i=[];e.visit(t.block,i);const n=e.visit(t.comparison);return{nest:i,...automatorBlocksMap.WAIT,...n,genericInput1:Bu(n.genericInput1),genericInput2:Bu(n.genericInput2)}}},{id:"waitEvent",rule:t=>()=>{t.CONSUME(Le.Wait),t.CONSUME(Le.PrestigeEvent)},validate:t=>(t.startLine=t.Wait[0].startLine,!0),compile:t=>{const e=t.PrestigeEvent[0].tokenType.$prestigeLevel;return i=>{i.commandState===null&&(i.commandState={prestigeLevel:0});const n=i.commandState.prestigeLevel>=e,r=t.PrestigeEvent[0].image.toUpperCase();if(n){const s=TimeSpan.fromMilliseconds(Date.now()-AutomatorData.waitStart).toStringShort();return AutomatorData.logCommandEvent(`Continuing after WAIT (${r} occurred for
            ${gM(r)}, after ${s})`,t.startLine),AutomatorData.isWaiting=!1,AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION}return AutomatorData.isWaiting||(AutomatorData.logCommandEvent(`Started WAIT for ${r}`,t.startLine),AutomatorData.waitStart=Date.now()),AutomatorData.isWaiting=!0,AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION}},blockify:t=>({genericInput1:t.PrestigeEvent[0].tokenType.name.toUpperCase(),...automatorBlocksMap.WAIT})},{id:"waitBlackHole",rule:t=>()=>{t.CONSUME(Le.Wait),t.CONSUME(Le.BlackHole),t.OR([{ALT:()=>t.CONSUME(Le.Off)},{ALT:()=>t.CONSUME(Le.BlackHoleStr)}])},validate:t=>(t.startLine=t.Wait[0].startLine,!0),compile:t=>()=>{const e=!!t.Off,i=t.BlackHoleStr?Number(t.BlackHoleStr[0].image.charAt(2)):0,n=e?!BlackHole(1).isActive:BlackHole(i).isActive,r=e?"inactive Black Holes":`active Black Hole ${i}`;if(n){const s=TimeSpan.fromMilliseconds(Date.now()-AutomatorData.waitStart).toStringShort();return AutomatorData.logCommandEvent(`Continuing after WAIT (waited ${s} for ${r})`,t.startLine),AutomatorData.isWaiting=!1,AUTOMATOR_COMMAND_STATUS.NEXT_INSTRUCTION}return AutomatorData.isWaiting||(AutomatorData.logCommandEvent(`Started WAIT for ${r}`,t.startLine),AutomatorData.waitStart=Date.now()),AutomatorData.isWaiting=!0,AUTOMATOR_COMMAND_STATUS.NEXT_TICK_SAME_INSTRUCTION},blockify:t=>({genericInput1:"BLACK HOLE",compOperator:t.BlackHoleStr?t.BlackHoleStr[0].image.toUpperCase():"OFF",...automatorBlocksMap.WAIT})},{id:"whileLoop",rule:t=>()=>{t.CONSUME(Le.While),t.SUBRULE(t.comparison),t.CONSUME(Le.LCurly),t.CONSUME(Le.EOL),t.SUBRULE(t.block),t.CONSUME(Le.RCurly)},validate:(t,e)=>(t.startLine=t.While[0].startLine,e.checkBlock(t,t.While)),compile:(t,e)=>yM(e.visit(t.comparison),e.visit(t.block),t,!1),blockify:(t,e)=>{const i=[];e.visit(t.block,i);const n=e.visit(t.comparison);return{nest:i,...automatorBlocksMap.WHILE,...n,genericInput1:Bu(n.genericInput1),genericInput2:Bu(n.genericInput2)}}},{id:"stop",rule:t=>()=>{t.CONSUME(Le.Stop)},validate:t=>(t.startLine=t.Stop[0].startLine,!0),compile:t=>()=>(AutomatorData.logCommandEvent("Automator execution stopped with STOP command",t.startLine),AUTOMATOR_COMMAND_STATUS.HALT),blockify:()=>({...automatorBlocksMap.STOP})}];class Qz extends ji.Parser{constructor(){super(Qk,{recoveryEnabled:!0,outputCst:!0,nodeLocationTracking:"full"});const e=this;e.RULE("script",()=>e.SUBRULE(e.block)),e.RULE("block",()=>e.MANY_SEP({SEP:Le.EOL,DEF:()=>e.OPTION(()=>e.SUBRULE(e.command))}));const i=["$.SUBRULE($.badCommand)","$.CONSUME(EOF)"];for(const r of nT)e.RULE(r.id,r.rule(e)),i.push(`$.SUBRULE($.${r.id})`);const n=window.Function("$","EOF",`
      return () => $.OR($.c1 || ($.c1 = [
        ${i.map(r=>`{ ALT: () => ${r} },`).join(`
`)}]));
    `);e.RULE("command",n(e,ji.EOF)),e.RULE("badCommand",()=>e.AT_LEAST_ONE(()=>e.SUBRULE(e.badCommandToken)),{resyncEnabled:!1}),e.RULE("badCommandToken",()=>e.OR([{ALT:()=>e.CONSUME(Le.Identifier)},{ALT:()=>e.CONSUME(Le.NumberLiteral)},{ALT:()=>e.CONSUME(Le.ComparisonOperator)}]),{resyncEnabled:!1}),e.RULE("comparison",()=>{e.SUBRULE(e.compareValue),e.CONSUME(Le.ComparisonOperator),e.SUBRULE2(e.compareValue)}),e.RULE("compareValue",()=>e.OR([{ALT:()=>e.CONSUME(Le.NumberLiteral)},{ALT:()=>e.CONSUME(Le.Identifier)},{ALT:()=>e.CONSUME(Le.AutomatorCurrency)}])),e.RULE("duration",()=>{e.CONSUME(Le.NumberLiteral),e.CONSUME(Le.TimeUnit)}),e.RULE("eternityChallenge",()=>e.OR([{ALT:()=>{e.CONSUME(Le.EC),e.CONSUME(Le.NumberLiteral)}},{ALT:()=>e.CONSUME(Le.ECLiteral)}])),e.RULE("studyList",()=>{e.AT_LEAST_ONE(()=>e.SUBRULE(e.studyListEntry)),e.OPTION(()=>{e.CONSUME(Le.Pipe),e.CONSUME1(Le.NumberLiteral,{LABEL:"ECNumber"}),e.OPTION1(()=>e.CONSUME(Le.Exclamation))})},{resyncEnabled:!1}),e.RULE("studyListEntry",()=>{e.OR([{ALT:()=>e.SUBRULE(e.studyRange)},{ALT:()=>e.CONSUME(Le.NumberLiteral)},{ALT:()=>e.CONSUME(Le.StudyPath)}]),e.OPTION(()=>e.CONSUME(Le.Comma))}),e.RULE("studyRange",()=>{e.CONSUME(Le.NumberLiteral,{LABEL:"firstStudy"}),e.CONSUME(Le.Dash),e.CONSUME1(Le.NumberLiteral,{LABEL:"lastStudy"})}),e.RULE("xHighest",()=>{e.CONSUME(Le.NumberLiteral),e.CONSUME(Le.XHighest)}),e.RULE("currencyAmount",()=>{e.CONSUME(Le.NumberLiteral),e.CONSUME(Le.AutomatorCurrency)}),e.performSelfAnalysis()}}const Wp=new Qz,eA=Wp.getBaseCstVisitorConstructorWithDefaults();let tA=class Ya extends eA{constructor(e){super(),this.validateVisitor(),this.reset(e);for(const r of nT){if(!r.validate)continue;const s=this[r.id];this[r.id]=a=>{r.validate(a,this)&&s&&s.call(this,a)}}const i=iT.tokenize(e),n=i.tokens;Wp.input=n,this.parseResult=Wp.script(),this.visit(this.parseResult),this.addLexerErrors(i.errors),this.addParserErrors(Wp.errors,n),this.modifyErrorMessages(),this.errorCount=i.errors.length+this.errors.length+Wp.errors.length}addLexerErrors(e){for(const i of e)this.errors.push({startLine:i.line,startOffset:i.offset,endOffset:i.offset+i.length,info:`Unexpected characters: ${this.rawText.substr(i.offset,i.length)}`,tip:`${this.rawText.substr(i.offset,i.length)} cannot be part of a command, remove them`})}static combinePositionRanges(e,i){return{startLine:Math.min(e.startLine,i.startLine),startOffset:Math.min(e.startOffset,i.startOffset),endOffset:Math.max(e.endOffset,i.endOffset)}}addParserErrors(e,i){for(const n of e){let r=Ya.combinePositionRanges(Ya.getPositionRange(n.previousToken),Ya.getPositionRange(n.token));n.token.tokenType.name==="EOF"&&n.previousToken.tokenType.name==="EOF"&&(r=Ya.combinePositionRanges(r,Ya.getPositionRange(i[i.length-1]))),r.info=n.message.replace(/'\n\s*'/ui,"End of line");const s=n.token.tokenType.name==="EOF"||n.token.tokenType.name==="EOL";n.name==="NoViableAltException"?s||(r.info=`Unexpected input ${n.token.image}`,r.tip=`Remove ${n.token.image}`):n.name==="EarlyExitException"&&(r.info="Unexpected end of command",r.tip="Complete the command by adding the other parameters"),this.errors.push(r)}}static getPositionRange(e){let i={startLine:Number.MAX_VALUE,startOffset:Number.MAX_VALUE,endOffset:0};if(e==null)return i;if(e.startOffset!==void 0)return{startLine:e.startLine,startOffset:e.startOffset,endOffset:e.endOffset};if(e.location!==void 0&&e.location.startOffset!==void 0)return e.location;if(e.children&&!Array.isArray(e.children))return Ya.getPositionRange(e.children);if(Array.isArray(e))return e.reduce((n,r)=>Ya.combinePositionRanges(n,Ya.getPositionRange(r)),i);for(const n in e)!Object.prototype.hasOwnProperty.call(e,n)||!Array.isArray(e[n])||(i=Ya.combinePositionRanges(i,Ya.getPositionRange(e[n])));return i}addError(e,i,n){const r=Ya.getPositionRange(e);r.info=i,r.tip=n,this.errors.push(r)}modifyErrorMessages(){if(!Player.automatorUnlocked||AutomatorData.currentScriptText()===void 0)return;const e=[];let i=0;for(const n of this.errors.sort((r,s)=>r.startLine-s.startLine))if(isNaN(n.startLine)&&(n.startLine=AutomatorData.currentScriptText().split(`
`).length),n.startLine!==i){if(n.tip){e.push(n),i=n.startLine;continue}n.info.match(/EOF but found.*\}/gu)?(n.info=n.info.replaceAll("--> ","[").replaceAll(" <--","]"),n.tip="Remove }. Parser halted at this line and may miss errors farther down the script."):n.info.match(/found.*\}/gu)?(n.info=n.info.replaceAll("--> ","[").replaceAll(" <--","]"),n.tip="Remove }"):n.info.match(/Expecting/gu)?(n.info=n.info.replaceAll("--> ","[").replaceAll(" <--","]"),n.tip="Use the appropriate type of data in the command as specified in the command help"):n.info.match(/End of line/gu)?n.tip="Provide the remaining arguments to complete the incomplete command":n.info.match(/EOF but found:/gu)?n.tip="Remove extra command argument":n.tip="This error's cause is unclear",e.push(n),i=n.startLine}for(const n of e)n.startLine=AutomatorBackend.translateLineNumber(n.startLine);this.errors=e}reset(e){this.rawText=e,this.variables={},this.errors=[]}checkTimeStudyNumber(e){const i=parseFloat(e.image);return!TimeStudy(i)||TimeStudy(i).isTriad&&!Ra.canBuyTriad?(this.addError(e,`Invalid Time Study identifier ${i}`,"Make sure you copied or typed in your time study IDs correctly"),0):i}lookupVar(e,i){const n=e.image,r={},s=player.reality.automator.constants;if(!Object.keys(s).includes(n)){this.addError(e,`Variable ${n} has not been defined`,`Use the definition panel to define ${n} in order to reference it, or check for typos`);return}const a=s[n];let o;switch(i){case AUTOMATOR_VAR_TYPES.NUMBER:r.value=new Decimal(a);break;case AUTOMATOR_VAR_TYPES.STUDIES:o=new TimeStudyTree(a),r.value={normal:o.selectedStudies.map(c=>c.id),ec:o.ec,startEC:o.startEC};break;case AUTOMATOR_VAR_TYPES.DURATION:r.value=parseInt(1e3*a,10);break;default:throw new Error("Unrecognized variable format in automator constant lookup")}return r}isValidVarFormat(e,i){const n=e.image,r=player.reality.automator.constants;if(!Object.keys(r).includes(n))return!1;const s=r[n];switch(i){case AUTOMATOR_VAR_TYPES.NUMBER:return s.match(/^-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?$/u);case AUTOMATOR_VAR_TYPES.STUDIES:return TimeStudyTree.isValidImportString(s);case AUTOMATOR_VAR_TYPES.DURATION:return!Number.isNaN(parseInt(1e3*s,10));default:throw new Error("Unrecognized variable format in automator constant lookup")}}duration(e){if(e.$value)return e.$value;if(!e.TimeUnit||e.TimeUnit[0].isInsertedInRecovery){this.addError(e,"Missing time unit","Provide a unit of time (eg. seconds or minutes)");return}const i=parseFloat(e.NumberLiteral[0].image)*e.TimeUnit[0].tokenType.$scale;if(isNaN(i)){this.addError(e,"Error parsing duration","Provide a properly-formatted number for time");return}return e.$value=i,e.$value}xHighest(e){if(e.$value)return e.$value;if(!e.NumberLiteral||e.NumberLiteral[0].isInsertedInRecovery){this.addError(e,"Missing multiplier","Provide a multiplier to set the autobuyer to");return}return e.$value=new Decimal(e.NumberLiteral[0].image),e.$value}currencyAmount(e){if(e.$value)return e.$value;if(!e.NumberLiteral||e.NumberLiteral[0].isInsertedInRecovery){this.addError(e,"Missing amount","Provide a threshold to set the autobuyer to");return}return e.$value=new Decimal(e.NumberLiteral[0].image),e.$value}studyRange(e,i){if(!e.firstStudy||e.firstStudy[0].isInsertedInRecovery||!e.lastStudy||e.lastStudy[0].isInsertedInRecovery){this.addError(e,"Missing Time Study number in range","Provide starting and ending IDs for Time Study number ranges");return}const n=this.checkTimeStudyNumber(e.firstStudy[0]),r=this.checkTimeStudyNumber(e.lastStudy[0]);if(!(!n||!r||!i))for(let s=n;s<=r;++s)TimeStudy(s)&&i.push(s)}studyListEntry(e,i){if(e.studyRange){this.visit(e.studyRange,i);return}if(e.NumberLiteral){if(e.NumberLiteral[0].isInsertedInRecovery){this.addError(e,"Missing Time Study number","Provide a Time Study ID to purchase");return}const n=this.checkTimeStudyNumber(e.NumberLiteral[0]);n&&i.push(n);return}if(e.StudyPath){const n=e.StudyPath[0].tokenType.$studyPath,r=NormalTimeStudies.paths[n];i.push(...r)}}studyList(e){if(e.$cached!==void 0)return e.$cached;const i=[];for(const r of e.studyListEntry)this.visit(r,i);const n=Ya.getPositionRange(e);if(e.$cached={normal:i,image:this.rawText.substr(n.startOffset,n.endOffset-n.startOffset+1),ec:0,startEC:!1},e.ECNumber){e.ECNumber.isInsertedInRecovery&&this.addError(e.Pipe[0],"Missing Eternity Challenge number","Specify which Eternity Challenge is being referred to");const r=parseFloat(e.ECNumber[0].image);(!Number.isInteger(r)||r<0||r>12)&&this.addError(e.ECNumber,`Invalid Eternity Challenge ID ${r}`,`Eternity Challenge ${r} does not exist, use an integer between ${format(1)} and ${format(12)}`),e.$cached.ec=r}return e.Exclamation&&(e.$cached.startEC=!0),e.$cached}compareValue(e){e.NumberLiteral?e.$value=new Decimal(e.NumberLiteral[0].image):e.Identifier&&(this.isValidVarFormat(e.Identifier[0],AUTOMATOR_VAR_TYPES.NUMBER)||this.addError(e,`Constant ${e.Identifier[0].image} cannot be used for comparison`,`Ensure that ${e.Identifier[0].image} contains a properly-formatted number and not a Time Study string`),this.lookupVar(e.Identifier[0],AUTOMATOR_VAR_TYPES.NUMBER)&&(e.$value=e.Identifier[0].image))}comparison(e){if(super.comparison(e),(!e.compareValue||e.compareValue[0].recoveredNode||e.compareValue.length!==2||e.compareValue[1].recoveredNode)&&this.addError(e,"Missing value for comparison","Ensure that the comparison has two values"),!e.ComparisonOperator||e.ComparisonOperator[0].isInsertedInRecovery){this.addError(e,"Missing comparison operator (<, >, <=, >=)","Insert the appropriate comparison operator");return}(e.ComparisonOperator[0].tokenType===Le.OpEQ||e.ComparisonOperator[0].tokenType===Le.EqualSign)&&this.addError(e,"Please use an inequality comparison (>, <, >=, <=)","Comparisons cannot be done with equality, only with inequality operators")}badCommand(e){const i=e.badCommandToken[0].children,n=Object.keys(i)[0];this.addError(i[n][0],`Unrecognized command "${i[n][0].image}"`,"Check to make sure you have typed in the command name correctly")}eternityChallenge(e){let i,n;if(e.ECLiteral)n=parseFloat(e.ECLiteral[0].image.substr(2)),i=e.ECLiteral[0];else if(e.NumberLiteral)n=parseFloat(e.NumberLiteral[0].image),i=e.NumberLiteral[0];else{this.addError(e,"Missing Eternity Challenge number","Specify which Eternity Challenge is being referred to");return}(!Number.isInteger(n)||n<1||n>12)&&this.addError(i,`Invalid Eternity Challenge ID ${n}`,`Eternity Challenge ${n} does not exist, use an integer between ${format(1)} and ${format(12)}`),e.$ecNumber=n}checkBlock(e,i){let n=!1;return(!e.RCurly||e.RCurly[0].isInsertedInRecovery)&&(this.addError(i[0],"Missing closing }","This loop has mismatched brackets, add a corresponding } on another line to close the loop"),n=!0),(!e.LCurly||e.LCurly[0].isInsertedInRecovery)&&(this.addError(i[0],"Missing opening {","This line has an extra } closing a loop which does not exist, remove the }"),n=!0),!n}script(e){e.block&&this.visit(e.block),e.variables=this.variables}};class Jz extends eA{constructor(){super();for(const e of nT){if(!e.compile)continue;const i=this[e.id];this[e.id]=(n,r)=>{i&&i!==super[e.id]&&i.call(this,n,r);let s=e.compile(n,this);typeof s=="function"&&(s={run:s}),s.lineNumber=n.startLine,r.push(s)}}this.validateVisitor()}comparison(e){const i=e.compareValue.map(s=>{if(s.children.AutomatorCurrency)return s.children.AutomatorCurrency[0].tokenType.$getter;const a=s.children.$value;return typeof a=="string"?()=>player.reality.automator.constants[a]:()=>a}),n=e.compareValue.map(s=>{if(s.children.AutomatorCurrency){const a=s.children.AutomatorCurrency[0].tokenType.$unlocked;return a?a():!0}return!0});if(!n[0]||!n[1])return()=>!1;const r=e.ComparisonOperator[0].tokenType.$compare;return()=>r(i[0](),i[1]())}block(e){const i=[];if(e.command)for(const n of e.command)this.visit(n,i);return i}script(e){if(e.variables===void 0)throw new Error("Compiler called before Validator");return e.block?this.visit(e.block):[]}}class e7 extends eA{constructor(){super();for(const e of nT){const i=e.blockify;if(!i)continue;const n=this[e.id];this[e.id]=(r,s)=>{n&&n!==super[e.id]&&n.call(this,r,s);try{const a=i(r,this);s.push({...a,id:UIID.next()})}catch{}}}this.validateVisitor()}comparison(e){const i=n=>{const r=e.compareValue[n];return r.children.AutomatorCurrency?r.children.AutomatorCurrency[0].image:r.children.$value};return{compOperator:e.ComparisonOperator[0].image,genericInput1:i(0),genericInput2:i(1)}}script(e){const i=[];return e.block&&this.visit(e.block,i),i}block(e,i){if(e.command)for(const n of e.command)this.visit(n,i)}}function rT(t,e=!1){const i=`${t}
 `,n=new tA(i);let r;return n.errorCount===0&&!e&&(r=new Jz().visit(n.parseResult)),{errors:n.errors,compiled:r}}function KU(t){return rT(t,!0).errors.length!==0}function cv(t){const e=new tA(t),n=new e7().visit(e.parseResult),r=c=>{var m,y;if(!c)return 0;const d=c.children;let p=0;for(const _ of Object.keys(d)){const E=(y=(m=d[_][0])==null?void 0:m.children)==null?void 0:y.block,C=E?E[0].children.command:[];if(p+=C?C.map(S=>r(S)+1).reduce((S,k)=>S+k,0):0,_==="EOF")return-1}return p},s=c=>c.nest?1+c.nest.map(d=>s(d)).reduce((d,p)=>d+p,0):1,a=e.parseResult.children.block[0].children.command.map(c=>r(c)+1).reduce((c,d)=>c+d,0),o=n.map(c=>s(c)).reduce((c,d)=>c+d,0);return{blocks:n,validatedBlocks:a,visitedBlocks:o}}function WC(t){return new tA(t)}function ZU(t,e,i){const n=t.$autocomplete&&t.$autocomplete.startsWith(e)&&t.$autocomplete!==e,r=t.$unlocked?t.$unlocked():!0;n&&r&&i.add(t.$autocomplete);for(const s of t.categoryMatches)ZU(zU[s],e,i)}CodeMirror.registerHelper("lint","automato",(t,e,i)=>{const n=i.getDoc();return rT(t,!0).errors.map(s=>({message:s.info,severity:"error",from:n.posFromIndex(s.startOffset),to:n.posFromIndex(s.endOffset+1)}))});CodeMirror.registerHelper("hint","anyword",t=>{const e=t.getDoc().getCursor();let i=e.ch;const n=e.ch,r=t.getLine(e.line);for(;i&&/\w/u.test(r.charAt(i-1));)--i;const s=r.slice(0,i),a=r.slice(i,n),o=iT.tokenize(s);if(o.errors.length>0)return;const c=Wp.computeContentAssist("command",o.tokens),d=new Set;for(const p of c)p.ruleStack[1]!=="badCommand"&&ZU(p.nextTokenType,a,d);return{list:Array.from(d),from:CodeMirror.Pos(e.line,i),to:CodeMirror.Pos(e.line,n)}});const Gl={regex:/(\/\/|#).*/u,token:"comment",next:"start"};CodeMirror.defineSimpleMode("automato",{start:[Gl,{regex:/studies\s+/ui,token:"keyword",next:"studiesArgs"},{regex:/blob\s\s/ui,token:"blob"},{regex:/(auto|if|pause|studies|time[ \t]+theorems?|space[ \t]+theorems?|until|wait|while|black[ \t]+hole|stored?[ \t]+game[ \t]+time|notify)\s/ui,token:"keyword",next:"commandArgs"},{regex:/stop/ui,token:"keyword",next:"commandDone"},{regex:/start\s|unlock\s/ui,token:"keyword",next:"startUnlock"},{regex:/infinity\S+|eternity\S+|reality\S+|pause\S+|restart\S+/ui,token:"error",next:"commandDone"},{regex:/infinity|eternity|reality/ui,token:"keyword",next:"prestige"},{regex:/pause|restart/ui,token:"keyword",next:"commandDone"},{regex:/\}/ui,dedent:!0},{regex:/\S+\s/ui,token:"error",next:"commandDone"}],studiesArgs:[Gl,{sol:!0,next:"start"},{regex:/load(\s+|$)/ui,token:"variable-2",next:"studiesLoad"},{regex:/respec/ui,token:"variable-2",next:"commandDone"},{regex:/purchase/ui,token:"variable-2",next:"studiesList"},{regex:/nowait(\s+|$)/ui,token:"property"}],studiesList:[Gl,{sol:!0,next:"start"},{regex:/(antimatter|infinity|time)(?=[\s,|]|$)/ui,token:"number"},{regex:/(active|passive|idle)(?=[\s,|]|$)/ui,token:"number"},{regex:/(light|dark)(?=[\s,|]|$)/ui,token:"number"},{regex:/([1-9][0-9]+)(?=[\s,!|-]|$)/ui,token:"number"},{regex:/[a-zA-Z_][a-zA-Z_0-9]*/u,token:"variable",next:"commandDone"},{regex:/!$/ui,token:"variable-2"},{regex:/([1-9]|1[0-2])(?=!|$)/ui,token:"number"}],studiesLoad:[Gl,{sol:!0,next:"start"},{regex:/id(\s+|$)/ui,token:"variable-2",next:"studiesLoadId"},{regex:/name(\s+|$)/ui,token:"variable-2",next:"studiesLoadPreset"},{regex:/\S+/ui,token:"error"}],studiesLoadId:[Gl,{sol:!0,next:"start"},{regex:/\d/ui,token:"qualifier",next:"commandDone"}],studiesLoadPreset:[Gl,{sol:!0,next:"start"},{regex:/(\/(?!\/)|[^\s#/])+/ui,token:"qualifier",next:"commandDone"}],prestige:[Gl,{sol:!0,next:"start"},{regex:/nowait(\s|$)/ui,token:"property"},{regex:/respec/ui,token:"variable-2"}],commandDone:[Gl,{sol:!0,next:"start"},{regex:/\}/ui,dedent:!0},{regex:/\S+/ui,token:"error"}],startUnlock:[Gl,{sol:!0,next:"start"},{regex:/ec\s?(1[0-2]|[1-9])|dilation/ui,token:"variable-2",next:"commandDone"},{regex:/nowait(\s|$)/ui,token:"property"}],commandArgs:[Gl,{sol:!0,next:"start"},{regex:/<=|>=|<|>/ui,token:"operator"},{regex:/nowait(\s|$)/ui,token:"property"},{regex:/".*"/ui,token:"string",next:"commandDone"},{regex:/'.*'/ui,token:"string",next:"commandDone"},{regex:/(on|off|bh1|bh2|dilation|load|respec)(\s|$)/ui,token:"variable-2"},{regex:/(eternity|reality|use)(\s|$)/ui,token:"variable-2"},{regex:/(antimatter|infinity|time)(\s|$|(?=,))/ui,token:"variable-2"},{regex:/(active|passive|idle)(\s|$|(?=,))/ui,token:"variable-2"},{regex:/(light|dark)(\s|$|(?=,))/ui,token:"variable-2"},{regex:/x[\t ]+highest(\s|$)/ui,token:"variable-2"},{regex:/pending[\t ]+(completions|ip|ep|tp|rm|glyph[\t ]+level)(\s|$)/ui,token:"variable-2"},{regex:/total[\t ]+(completions|tt|space theorems)(\s|$)/ui,token:"variable-2"},{regex:/spent[\t ]+tt(\s|$)/ui,token:"variable-2"},{regex:/filter[ \t]+score/ui,token:"variable-2"},{regex:/ec(1[0-2]|[1-9])[\t ]+completions(\s|$)/ui,token:"variable-2"},{regex:/(am|ip|ep|all)(\s|$)/ui,token:"variable-2"},{regex:/(rm|rg|dt|tp|tt|space theorems|(banked )?infinities|eternities|realities|rep(licanti)?)(\s|$)/ui,token:"variable-2"},{regex:/ sec(onds ?) ?| min(utes ?) ?| hours ?/ui,token:"variable-2"},{regex:/([0-9]+:[0-5][0-9]:[0-5][0-9]|[0-5]?[0-9]:[0-5][0-9]|t[1-4])/ui,token:"number"},{regex:/-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/ui,token:"number"},{regex:/[a-zA-Z_][a-zA-Z_0-9]*/u,token:"variable"},{regex:/\{/ui,indent:!0,next:"commandDone"},{regex:/\}/ui,dedent:!0}],meta:{lineComment:"//",electricChars:"}"}});const Ko=Object.freeze({NEXT_INSTRUCTION:0,NEXT_TICK_SAME_INSTRUCTION:1,NEXT_TICK_NEXT_INSTRUCTION:2,SAME_INSTRUCTION:3,SKIP_INSTRUCTION:4,HALT:5,RESTART:6}),vo=Object.freeze({PAUSE:1,RUN:2,SINGLE_STEP:3}),t7={NUMBER:{id:0,name:"number"},STUDIES:{id:1,name:"studies"},DURATION:{id:2,name:"duration"},UNKNOWN:{id:-1,name:"unknown"}},wr=Object.freeze({TEXT:0,BLOCK:1});class vM{constructor(e){this._stackIndex=e,this._commandIndex=0}initializeNew(e){this._commands=e,this._commandIndex=0,this.persistent={lineNumber:e[0].lineNumber,commandState:null}}get commandIndex(){return this._commandIndex}set commandIndex(e){this._commandIndex=e,this.lineNumber=this._commands[e].lineNumber}get lineNumber(){return this.persistent.lineNumber}set lineNumber(e){this.persistent.lineNumber=e}get commandState(){return this.persistent.commandState}set commandState(e){this.persistent.commandState=e}get persistent(){return player.reality.automator.state.stack[this._stackIndex]}set persistent(e){player.reality.automator.state.stack[this._stackIndex]=e}get commands(){return this._commands}set commands(e){this._commands=e}}class fd{constructor(e){this._id=e,this.compile()}get id(){return this._id}get name(){return this.persistent.name}set name(e){this.persistent.name=e}get persistent(){return player.reality.automator.scripts[this._id]}get commands(){return this._compiled}get text(){return this.persistent.content}save(e){Xa.isWithinLimit()&&(this.persistent.content=e),this.compile()}compile(){this._compiled=rT(this.text).compiled}static create(e,i=""){const n=Object.keys(player.reality.automator.scripts),r=n.findIndex((a,o)=>o+1!==Number(a));let s=1+(r===-1?n.length:r);return(!player.reality.automator.scripts||s===0)&&(s=1),player.reality.automator.scripts[s]={id:s,name:e,content:i},new fd(s)}}const Xa={lastECCompletionCount:0,isWaiting:!1,waitStart:0,lastEvent:0,eventLog:[],isEditorFullscreen:!1,needsRecompile:!0,cachedErrors:0,blockTemplates:[],undoBuffer:[],redoBuffer:[],charsSinceLastUndoState:0,MAX_ALLOWED_SCRIPT_CHARACTERS:1e4,MAX_ALLOWED_TOTAL_CHARACTERS:6e4,MAX_ALLOWED_SCRIPT_NAME_LENGTH:15,MAX_ALLOWED_SCRIPT_COUNT:20,MAX_ALLOWED_CONSTANT_NAME_LENGTH:20,MAX_ALLOWED_CONSTANT_VALUE_LENGTH:250,MAX_ALLOWED_CONSTANT_COUNT:30,MIN_CHARS_BETWEEN_UNDOS:10,MAX_UNDO_ENTRIES:30,scriptIndex(){return player.reality.automator.state.editorScript},currentScriptName(){return player.reality.automator.scripts[this.scriptIndex()].name},currentScriptText(t){var i;const e=t||this.scriptIndex();return(i=player.reality.automator.scripts[e])==null?void 0:i.content},createNewScript(t,e){const i=fd.create(e,t);GameUI.notify.automator(`Imported Script "${e}"`),player.reality.automator.state.editorScript=i.id,Xa.clearUndoData(),EventHub.dispatch(GAME_EVENT.AUTOMATOR_SAVE_CHANGED)},recalculateErrors(){const t=this.currentScriptText();this.cachedErrors=rT(t).errors,this.cachedErrors.sort((e,i)=>e.startLine-i.startLine)},currentErrors(){return this.needsRecompile&&(this.recalculateErrors(),this.needsRecompile=!1),this.cachedErrors},logCommandEvent(t,e){const i=Date.now();this.eventLog.push({message:t.replaceAll(/\s?\n\s+/gu," "),line:Wc.translateLineNumber(e),thisReality:Time.thisRealityRealTime.totalSeconds,timestamp:i,timegap:i-this.lastEvent}),this.lastEvent=i,this.eventLog.length>player.options.automatorEvents.maxEntries&&this.eventLog.shift()},clearEventLog(){this.eventLog=[],this.lastEvent=0},singleScriptCharacters(){var t;return player.reality.automator.type===wr.TEXT?((t=AutomatorTextUI.editor)==null?void 0:t.getDoc().getValue().length)??0:BlockAutomator.parseLines(BlockAutomator.lines).join(`
`).length},totalScriptCharacters(){return Object.values(player.reality.automator.scripts).filter(t=>t.id!==this.scriptIndex()).map(t=>t.content.length).reduce((t,e)=>t+e,0)+this.singleScriptCharacters()},isWithinLimit(){return this.singleScriptCharacters()<=this.MAX_ALLOWED_SCRIPT_CHARACTERS&&this.totalScriptCharacters()<=this.MAX_ALLOWED_TOTAL_CHARACTERS},clearUndoData(){this.undoBuffer=[],this.redoBuffer=[],this.charsSinceLastUndoState=0},pushUndoData(t,e){this.charsSinceLastUndoState+=e,!(this.charsSinceLastUndoState<=this.MIN_CHARS_BETWEEN_UNDOS&&this.undoBuffer.length!==0)&&(this.undoBuffer[this.undoBuffer.length-1]!==t&&this.undoBuffer.push(t),this.undoBuffer.length>this.MAX_UNDO_ENTRIES&&this.undoBuffer.shift(),this.charsSinceLastUndoState=0)},pushRedoData(t){this.redoBuffer[this.redoBuffer.length-1]!==t&&this.redoBuffer.push(t)},undoScriptEdit(){if(this.undoBuffer.length===0||Tabs.current._currentSubtab.name!=="Automator")return;const t=this.undoBuffer.pop();this.pushRedoData(this.currentScriptText()),player.reality.automator.scripts[this.scriptIndex()].content=t,Wc.saveScript(this.scriptIndex(),t),player.reality.automator.type===wr.TEXT?AutomatorTextUI.editor.setValue(t):BlockAutomator.updateEditor(t)},redoScriptEdit(){if(this.redoBuffer.length===0||Tabs.current._currentSubtab.name!=="Automator")return;const t=this.redoBuffer.pop();this.pushUndoData(this.currentScriptText(),2*this.MIN_CHARS_BETWEEN_UNDOS),player.reality.automator.scripts[this.scriptIndex()].content=t,Wc.saveScript(this.scriptIndex(),t),player.reality.automator.type===wr.TEXT?AutomatorTextUI.editor.setValue(t):BlockAutomator.updateEditor(t)}},QU={Active:"active",Event:"event",Error:"error"},jC={lines:{active:-1,event:-1,error:-1},updateHighlightedLine(t,e){if(player.reality.automator.type===wr.TEXT&&t!==-1){if(!AutomatorTextUI.editor)return;this.removeHighlightedTextLine(e),this.addHighlightedTextLine(t,e)}else this.lines[e]=t},removeHighlightedTextLine(t){const e=this.lines[t]-1;AutomatorTextUI.editor.removeLineClass(e,"background",`c-automator-editor__${t}-line`),AutomatorTextUI.editor.removeLineClass(e,"gutter",`c-automator-editor__${t}-line-gutter`),this.lines[t]=-1},addHighlightedTextLine(t,e){AutomatorTextUI.editor.addLineClass(t-1,"background",`c-automator-editor__${e}-line`),AutomatorTextUI.editor.addLineClass(t-1,"gutter",`c-automator-editor__${e}-line-gutter`),this.lines[e]=t},clearAllHighlightedLines(){for(const t of Object.values(QU)){if(player.reality.automator.type===wr.TEXT&&AutomatorTextUI.editor)for(let e=0;e<AutomatorTextUI.editor.doc.size;e++)AutomatorTextUI.editor.removeLineClass(e,"background",`c-automator-editor__${t}-line`),AutomatorTextUI.editor.removeLineClass(e,"gutter",`c-automator-editor__${t}-line-gutter`);this.lines[t]=-1}}},zC={scrollToRawLine(t){const e=player.reality.automator.type===wr.TEXT?t:Wc.translateLineNumber(t);this.scrollToLine(e)},scrollToLine(t){let e,i,n;if(player.reality.automator.type===wr.TEXT?(e=document.querySelector(".CodeMirror-scroll"),i=AutomatorTextUI.editor.defaultTextHeight(),n=t+1):(e=BlockAutomator.editor,i=34.5,n=t),!e)return;const r=e.clientHeight-40,s=i*(n-1);s>e.scrollTop+r&&e.scrollTo(0,s-r),s<e.scrollTop&&e.scrollTo(0,s),player.reality.automator.type===wr.BLOCK&&(BlockAutomator.gutter.style.bottom=`${e.scrollTop}px`)}},Wc={MAX_COMMANDS_PER_UPDATE:100,hasJustCompleted:!1,_scripts:[],get state(){return player.reality.automator.state},get isOn(){return!this.stack.isEmpty},get mode(){return this.state.mode},set mode(t){this.state.mode=t},get isRunning(){return this.isOn&&this.mode===vo.RUN},findRawScriptObject(t){const e=player.reality.automator.scripts,i=Object.values(e).findIndex(n=>n.id===t);return e[parseInt(Object.keys(e)[i],10)]},get currentRunningScript(){return this.findRawScriptObject(this.state.topLevelScript)},get currentEditingScript(){return this.findRawScriptObject(player.reality.automator.state.editorScript)},get scriptName(){var t;return((t=this.currentRunningScript)==null?void 0:t.name)??""},hasDuplicateName(t){return Object.values(player.reality.automator.scripts).map(i=>i.name).filter(i=>i===t).length>1},translateLineNumber(t){return player.reality.automator.type===wr.TEXT?t:BlockAutomator.lineNumber(t)},get currentLineNumber(){return this.stack.top?this.translateLineNumber(this.stack.top.lineNumber):-1},get currentInterval(){return Math.clampMin(Math.pow(.994,Currency.realities.value)*500,1)},get currentRawText(){var t;return((t=this.currentRunningScript)==null?void 0:t.content)??""},get currentScriptLength(){return this.currentRawText.split(`
`).length},getUsedPresets(t){const e=this.findRawScriptObject(t);if(!e)return null;const i=new Set,n=e.content.split(`
`);for(const s of n){const a=s.match(/studies( nowait)? load id ([1-6])/ui);a&&i.add(Number(a[2])-1);const o=s.match(/studies( nowait)? load name (\S+)/ui);if(o){const c=player.timestudy.presets.findIndex(d=>d.name===o[2]);c!==-1&&i.add(c)}}const r=Array.from(i);return r.sort(),r},getUsedConstants(t){const e=this.findRawScriptObject(t);if(!e)return null;const i=new Set,n=e.content.split(`
`);for(const s of n){const a=Object.keys(player.reality.automator.constants);for(const o of a)s.match(`(?<![Nn][Aa][Mm][Ee])\\s${o}(\\s|$)`)&&i.add(o)}const r=Array.from(i);return r.sort(),r},addConstant(t,e){Object.keys(player.reality.automator.constants).length>=Xa.MAX_ALLOWED_CONSTANT_COUNT||(player.reality.automator.constants[t]=e,player.reality.automator.constantSortOrder.push(t),EventHub.dispatch(GAME_EVENT.AUTOMATOR_CONSTANT_CHANGED))},modifyConstant(t,e){Object.keys(player.reality.automator.constants).includes(t)?(player.reality.automator.constants[t]=e,EventHub.dispatch(GAME_EVENT.AUTOMATOR_CONSTANT_CHANGED)):this.addConstant(t,e)},renameConstant(t,e){const i=player.reality.automator.constants[t];player.reality.automator.constants[e]=i,delete player.reality.automator.constants[t];const n=player.reality.automator.constantSortOrder.indexOf(t);n!==-1&&(player.reality.automator.constantSortOrder[n]=e),EventHub.dispatch(GAME_EVENT.AUTOMATOR_CONSTANT_CHANGED)},deleteConstant(t){delete player.reality.automator.constants[t];const e=player.reality.automator.constantSortOrder.indexOf(t);e>-1&&player.reality.automator.constantSortOrder.splice(e,1),EventHub.dispatch(GAME_EVENT.AUTOMATOR_CONSTANT_CHANGED)},serializeAutomatorData(t){const e=n=>`0000${n}`.slice(-5),i=[];for(const n of t)i.push(`${e(n.length)}${n}`);return i.join("")},deserializeAutomatorData(t){if(t==="")throw new Error("Attempted deserialization of empty string");const e=[];let i=t;for(;i.length>0;){const n=Number(i.slice(0,5));if(i=i.substr(5),Number.isNaN(n)||i.length<n)throw new Error("Inconsistent or malformed serialized automator data");{const r=i.slice(0,n);i=i.substr(n),e.push(r)}}return e},exportCurrentScriptContents(){const t=Xa.currentScriptText().replace(/^\s*(.*?)\s*$/u,"$1");if(t.length===0)return null;const e=Xa.currentScriptName();return GameSaveSerializer.encodeText(this.serializeAutomatorData([e,t]),"automator script")},parseScriptContents(t){let e,i;try{e=GameSaveSerializer.decodeText(t,"automator script"),i=this.deserializeAutomatorData(e)}catch{return null}return{name:i[0],content:i[1]}},importScriptContents(t){const e=this.parseScriptContents(t);Xa.createNewScript(e.content,e.name),this.initializeFromSave()},exportFullScriptData(t){const e=this.findRawScriptObject(t),i=e.content.replace(/^\s*(.*?)\s*$/u,"$1");if(i.length===0)return null;const n=new Set,r=new Set,s=i.split(`
`);for(const d of s){const p=d.match(/studies( nowait)? load id ([1-6])/ui);p&&n.add(Number(p[2])-1);const m=d.match(/studies( nowait)? load name (\S+)/ui);if(m){const _=player.timestudy.presets.findIndex(E=>E.name===m[2]);_!==-1&&n.add(_)}const y=Object.keys(player.reality.automator.constants);for(const _ of y)d.match(`\\s${_}(\\s|$)`)&&r.add(_)}const a=[];for(const d of Array.from(n)){const p=player.timestudy.presets[d];a.push(`${d}:${(p==null?void 0:p.name)??""}:${(p==null?void 0:p.studies)??""}`)}const o=[];for(const d of Array.from(r))o.push(`${d}:${player.reality.automator.constants[d]}`);const c=this.serializeAutomatorData([e.name,a.join("*"),o.join("*"),i]);return GameSaveSerializer.encodeText(c,"automator data")},parseFullScriptData(t){let e,i;try{e=GameSaveSerializer.decodeText(t,"automator data"),i=this.deserializeAutomatorData(e)}catch{return null}if(i.length!==4)return null;const n=i[1],r=[];if(n)for(const o of n.split("*")){const c=o.split(":");r.push({id:Number(c[0]),name:c[1],studies:c[2]})}r.sort((o,c)=>o.id-c.id);const s=i[2],a=[];for(const o of s.split("*")){if(o==="")continue;const c=o.split(":");a.push({key:c[0],value:c[1]})}return{name:i[0],presets:r,constants:a,content:i[3]}},importFullScriptData(t,e){const i=this.parseFullScriptData(t);if(Xa.createNewScript(i.content,i.name),!e.presets)for(const n of i.presets)player.timestudy.presets[n.id]={name:n.name,studies:n.studies};if(!e.constants)for(const n of i.constants)this.modifyConstant(n.key,n.value);this.initializeFromSave()},update(t){if(!this.isOn)return;let e;switch(this.mode){case vo.PAUSE:return;case vo.SINGLE_STEP:this.singleStep(),e=Wc.stack.top,e&&this.state.followExecution&&zC.scrollToRawLine(e.lineNumber),this.state.mode=vo.PAUSE;return;case vo.RUN:break;default:this.stop();return}player.reality.automator.execTimer+=t;const i=Math.min(Math.floor(player.reality.automator.execTimer/this.currentInterval),this.MAX_COMMANDS_PER_UPDATE);player.reality.automator.execTimer-=i*this.currentInterval;for(let n=0;n<i&&this.isRunning&&this.step();++n);},step(){if(this.stack.isEmpty)return!1;for(let t=0;t<100&&!this.hasJustCompleted;t++){switch(this.runCurrentCommand()){case Ko.SAME_INSTRUCTION:return!0;case Ko.NEXT_INSTRUCTION:return this.nextCommand();case Ko.NEXT_TICK_SAME_INSTRUCTION:return!1;case Ko.NEXT_TICK_NEXT_INSTRUCTION:return this.nextCommand(),!1;case Ko.SKIP_INSTRUCTION:this.nextCommand();break;case Ko.HALT:return this.stop(),!1;case Ko.RESTART:return this.restart(),!1}this.stack.top||(this.hasJustCompleted=!0)}return this.hasJustCompleted||(GameUI.notify.error("Automator halted - too many consecutive no-ops detected"),Xa.logCommandEvent("Automator halted due to excessive no-op commands",this.currentLineNumber)),this.stop(),!1},singleStep(){if(!this.stack.isEmpty)switch(this.runCurrentCommand()){case Ko.NEXT_TICK_SAME_INSTRUCTION:break;case Ko.HALT:this.stop();break;case Ko.RESTART:this.restart();break;default:this.nextCommand();break}},runCurrentCommand(){const t=this.stack.top;return t.commands[t.commandIndex].run(t)},nextCommand(){const t=this.stack.top;if(t.commandIndex>=t.commands.length-1){if(this.stack.pop(),this.stack.isEmpty){if(this.state.repeat)return this.start(this.state.topLevelScript,vo.RUN,!1),!1;this.stop()}else if(this.stack.top.commandState&&this.stack.top.commandState.advanceOnPop)return Xa.logCommandEvent("Exiting IF block",this.stack.top.commandState.ifEndLine),this.nextCommand()}else t.commandState=null,++t.commandIndex;return!0},push(t){t.length!==0&&this.stack.push(t)},findScript(t){return this._scripts.find(e=>e.id===t)},_createDefaultScript(){const t=fd.create("New Script");return this._scripts=[t],this.state.topLevelScript=t.id,t.id},initializeFromSave(){const t=Object.keys(player.reality.automator.scripts).map(i=>parseInt(i,10));t.length===0?t.push(this._createDefaultScript()):this._scripts=t.map(i=>new fd(i)),t.includes(this.state.topLevelScript)||(this.state.topLevelScript=t[0]);const e=this.findScript(this.state.topLevelScript);if(e.commands){const i=e.commands;this.stack.initializeFromSave(i)||this.reset(i)}else this.stack.clear()},saveScript(t,e){const i=this.findScript(t);if(!i)return;const n=i.persistent.content,r=Math.abs(n.length-e.length);Xa.pushUndoData(n,r),i.save(e),t===this.state.topLevelScript&&this.stop()},newScript(){const t=Wc._scripts.map(i=>i.name);let e;if(t.includes("New Script")){let i=2;for(;t.includes(`New Script (${i})`);)i++;e=fd.create(`New Script (${i})`)}else e=fd.create("New Script");return this._scripts.push(e),e},deleteScript(t){const e=Object.values(player.reality.automator.scripts).findIndex(n=>n.id===t);delete player.reality.automator.scripts[parseInt(Object.keys(player.reality.automator.scripts)[e],10)];const i=this._scripts.findIndex(n=>n.id===t);this._scripts.splice(i,1),this._scripts.length===0&&(this._createDefaultScript(),this.clearEditor()),t===this.state.topLevelScript&&(this.stop(),this.state.topLevelScript=this._scripts[0].id),EventHub.dispatch(GAME_EVENT.AUTOMATOR_SAVE_CHANGED)},toggleRepeat(){this.state.repeat=!this.state.repeat},toggleForceRestart(){this.state.forceRestart=!this.state.forceRestart},toggleFollowExecution(){this.state.followExecution=!this.state.followExecution,this.jumpToActiveLine()},jumpToActiveLine(){const t=this.state;t.topLevelScript===t.editorScript&&this.isRunning&&t.followExecution&&zC.scrollToRawLine(Wc.stack.top.lineNumber)},reset(t){this.stack.clear(),this.push(t)},stop(){this.stack.clear(),this.state.mode=vo.PAUSE,this.hasJustCompleted=!0,jC.clearAllHighlightedLines()},pause(){this.state.mode=vo.PAUSE},start(t=this.state.topLevelScript,e=vo.RUN,i=!0){if(!Player.automatorUnlocked)return;this.hasJustCompleted=!1,this.state.topLevelScript=t,player.reality.automator.execTimer=0;const n=this.findScript(t);n&&(i&&n.compile(),n.commands&&(this.reset(n.commands),this.state.mode=e),Xa.isWaiting=!1,player.options.automatorEvents.clearOnRestart&&Xa.clearEventLog())},restart(){this.start(this.state.topLevelScript,vo.RUN),!this.stack.isEmpty&&this.reset(this.stack._data[0].commands)},changeModes(t){if(Tutorial.moveOn(TUTORIAL_STATE.AUTOMATOR),player.reality.automator.type===wr.BLOCK)BlockAutomator.parseTextFromBlocks(),player.reality.automator.type=wr.TEXT;else{const e=AutomatorTextUI.editor.getDoc().getValue();BlockAutomator.updateEditor(e),Wc.saveScript(t,e),player.reality.automator.type=wr.BLOCK}jC.clearAllHighlightedLines(),EventHub.ui.dispatch(GAME_EVENT.AUTOMATOR_TYPE_CHANGED)},clearEditor(){player.reality.automator.type===wr.BLOCK?BlockAutomator.clearEditor():AutomatorTextUI.clearEditor()},stack:{_data:[],push(t){const e=new vM(this.length);e.initializeNew(t),this._data.push(e)},pop(){this._data.length!==0&&(player.reality.automator.state.stack.pop(),this._data.pop())},clear(){this._data=[],player.reality.automator.state.stack.length=0},initializeFromSave(t){this._data=[];const e=player.reality.automator.state.stack;let i=t;for(let n=0;n<e.length;++n){const r=e[n],s=new vM(n);s.commands=i;const a=i.findIndex(o=>o.lineNumber===r.lineNumber);if(a===-1)return!1;if(s.commandIndex=a,this._data.push(s),n!==e.length-1){if(i[a].blockCommands===void 0)return!1;i=i[a].blockCommands}}return!0},get top(){return this._data[this.length-1]},get length(){if(this._data.length!==player.reality.automator.state.stack.length)throw new Error("Inconsistent stack length");return this._data.length},get isEmpty(){return this._data.length===0}}},i7={get perks(){return Perks.all.filter(t=>t.automatorPoints)},get upgrades(){return RealityUpgrades.all.filter(t=>t.automatorPoints)},get pointsFromPerks(){return this.perks.filter(t=>t.isBought).map(t=>t.automatorPoints).sum()},get pointsFromUpgrades(){return this.upgrades.filter(t=>t.isBought).map(t=>t.automatorPoints).sum()},get pointsFromOther(){return GameDatabase.reality.automator.otherAutomatorPoints.map(t=>t.automatorPoints()).sum()},get totalPoints(){return this.pointsFromPerks+this.pointsFromUpgrades+this.pointsFromOther},get pointsForAutomator(){return 100}},n7={name:"AutomatorBlockSingleInput",props:{constant:{type:String,required:!1,default:""},block:{type:Object,required:!0},blockTarget:{type:String,required:!1,default:""},updateFunction:{type:Function,required:!0},initialSelection:{type:String,required:!1,default:""},patterns:{type:Array,required:!1,default:()=>[]},recursive:{type:Boolean,required:!1,default:!1},currentPath:{type:String,required:!1,default:""}},data(){return{b:{},suppressTooltip:!1,errors:[],hasError:!1,isTextInput:!1,dropdownOptions:[],dropdownSelection:"",textContents:"",pathRef:{},currentNodeOnPath:"",unknownNext:!1,nextNodeCount:0,lineNumber:0,scriptID:0}},computed:{displayedConstant(){return this.constant?this.constant==="BLOB"?"":this.constant:this.dropdownOptions.length===1&&!this.isBoolTarget&&!this.isTextInput?this.dropdownOptions[0]:""},isBoolTarget(){return this.blockTarget==="nowait"||this.blockTarget==="respec"},nextInputKey(){return this.block.targets[this.currentPath.length+1]},nextInputValue(){const e=this.block.targets?this.block[this.nextInputKey]:"";return e?`${e}`:""},hasLongTextInput(){return this.block.cmd==="NOTIFY"||this.block.cmd==="COMMENT"}},created(){if(this.scriptID=player.reality.automator.state.editorScript,this.b=this.block,this.lineNumber=BlockAutomator.lineNumber(BlockAutomator._idArray.indexOf(this.block.id)+1),BlockAutomator.updateIdArray(),!this.constant){if(this.isBoolTarget){this.dropdownOptions=[this.blockTarget.toUpperCase()],this.dropdownSelection=this.block[this.blockTarget]?this.blockTarget.toUpperCase():"";return}if(this.recursive){const t=this.patterns.filter(e=>e.startsWith(this.currentPath)&&e.length>this.currentPath.length).map(e=>e.charAt(this.currentPath.length));for(const e of t){if(this.pathRef[e])continue;const i=this.block[e];this.pathRef[e]=i,this.dropdownOptions.push(...i)}this.calculatePath()}this.dropdownOptions.includes(this.initialSelection)?this.dropdownSelection=this.initialSelection:this.initialSelection&&(this.isTextInput=!0,this.textContents=this.initialSelection),this.dropdownOptions.length===1&&this.dropdownOptions[0].startsWith("*")&&(this.isTextInput=!0,this.textContents=this.initialSelection),this.recalculateErrorCount(),this.suppressTooltip=!0,BlockAutomator.parseTextFromBlocks()}},destroyed(){if(player.reality.automator.type===AUTOMATOR_TYPE.TEXT||Tabs.current._currentSubtab.key!=="automator"||this.scriptID!==player.reality.automator.state.editorScript)return;this.recalculateErrorCount();const t=BlockAutomator.lineNumber(BlockAutomator._idArray.indexOf(this.block.id)+1);if(this.lineNumber!==t){const e=[];for(const i of AutomatorData.cachedErrors)i.startLine!==this.lineNumber&&e.push(i);e.sort((i,n)=>i.startLine-n.startLine),AutomatorData.cachedErrors=e;return}this.recalculateErrorCount(),BlockAutomator.parseTextFromBlocks()},methods:{update(){this.errors=AutomatorData.cachedErrors,this.hasError=this.errors.some(t=>t.startLine===this.lineNumber),this.dropdownSelection.startsWith("*")&&(this.isTextInput=!0),this.calculatePath()},calculatePath(){this.currentNodeOnPath=" ";for(const e of Object.keys(this.pathRef)){const i=this.pathRef[e].some(n=>n.startsWith("*"))&&this.isTextInput;(this.pathRef[e].includes(this.dropdownSelection)||i)&&(this.currentNodeOnPath=e)}const t=this.currentPath+this.currentNodeOnPath;this.nextNodeCount=this.patterns.filter(e=>e.length>t.length&&e.startsWith(t)).length,this.unknownNext=this.nextNodeCount>1||this.dropdownSelection===""&&!this.isTextInput},validateInput(){let t,e;if(this.b.nest){const r=Object.assign({},this.b);r.nest=[],e=BlockAutomator.parseLines([r]),t=WC(e.join(`
`))}else e=BlockAutomator.parseLines([this.b]),t=WC(e[0]);if(e[0]==="undefined")return;const i=[],n=BlockAutomator._idArray.filter(r=>r).length;for(const r of AutomatorData.cachedErrors)r.startLine!==this.lineNumber&&r.startLine<n&&i.push(r);if(t.errors.length>0){const r=t.errors[0];r.startLine=this.lineNumber,i.push(r)}i.sort((r,s)=>r.startLine-s.startLine),AutomatorData.cachedErrors=i},handleFocus(t){this.suppressTooltip=!t,this.changeBlock()},changeBlock(){if(this.updateFunction(this.block,this.block.id),this.blockTarget){let t;if(this.isBoolTarget?t=this.dropdownSelection!=="":this.isTextInput?t=this.textContents:t=this.dropdownSelection,this.block[this.blockTarget]=t,this.calculatePath(),this.nextNodeCount===0&&!this.isBoolTarget){const e=this.block.targets.indexOf(this.blockTarget);for(let i=e+1;i<this.block.targets.length;i++)this.block[this.block.targets[i]]=void 0}}this.recalculateErrorCount()},recalculateErrorCount(){BlockAutomator.parseTextFromBlocks(this.scriptID),this.validateInput(),AutomatorBackend.currentEditingScript.id===AutomatorBackend.currentRunningScript.id&&AutomatorBackend.stop()},errorTooltip(){if(!this.hasError||this.suppressTooltip)return;let t=this.errors.find(e=>e.startLine===this.lineNumber).info;return t=t.replaceAll(`
`,"").replace(/Expecting: one of these possible Token sequences:.*but found: (.*)/ui,"Unexpected input format: $1"),{content:`<div class="c-block-automator-error">
          <div>${t}</div>
        </div>`,html:!0,trigger:"manual",show:!0,classes:["c-block-automator-error-container","general-tooltip"]}},textInputClassObject(){return{"o-automator-block-input":!0,"o-long-text-input":this.hasLongTextInput,"l-error-textbox":this.hasError,"c-automator-input-required":!this.hasError}},dropdownClassObject(){return{"o-automator-block-input":!0,"c-automator-input-required":!this.isBoolTarget,"c-automator-input-optional":this.isBoolTarget,"l-error-textbox":this.hasError&&!this.isBoolTarget&&this.dropdownSelection===""}},revertToDropdown(){this.isTextInput=!1,this.dropdownSelection="",this.textContents=""}}};var r7=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator-single-block"},[e.displayedConstant?i("div",{staticClass:"c-automator-single-block o-automator-command c-automator-constant-block",class:{"l-blob":e.constant==="BLOB"}},[e._v(" "+e._s(e.displayedConstant)+" ")]):e.isTextInput?i("div",{staticClass:"c-automator-text-input-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.textContents,expression:"textContents"},{name:"tooltip",rawName:"v-tooltip",value:e.errorTooltip(),expression:"errorTooltip()"}],class:e.textInputClassObject(),domProps:{value:e.textContents},on:{keyup:function(n){return e.changeBlock()},focusin:function(n){return e.handleFocus(!0)},focusout:function(n){return e.handleFocus(!1)},input:function(n){n.target.composing||(e.textContents=n.target.value)}}}),e.dropdownOptions.length>1?i("div",{staticClass:"c-automator-close-text-input fa-solid fa-circle-xmark",on:{click:e.revertToDropdown}}):e._e()]):i("select",{directives:[{name:"model",rawName:"v-model",value:e.dropdownSelection,expression:"dropdownSelection"}],class:e.dropdownClassObject(),on:{change:[function(n){var r=Array.prototype.filter.call(n.target.options,function(s){return s.selected}).map(function(s){var a="_value"in s?s._value:s.value;return a});e.dropdownSelection=n.target.multiple?r:r[0]},function(n){return e.changeBlock()}]}},e._l(["",...e.dropdownOptions],function(n){return i("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])}),0),e.recursive&&e.nextNodeCount>0?i("AutomatorBlockSingleInput",{key:e.currentNodeOnPath,attrs:{constant:e.unknownNext?"...":"",block:e.block,"block-target":e.nextInputKey,patterns:e.patterns,"initial-selection":e.nextInputValue,"update-function":e.updateFunction,recursive:!0,"current-path":e.currentPath+e.currentNodeOnPath}}):e._e()],1)},s7=[],a7=K(n7,r7,s7,!1,null,"fd1c3b93");const o7=a7.exports,l7={name:"AutomatorBlockSingleRow",components:{draggable:Hk,AutomatorBlockSingleInput:o7},props:{block:{type:Object,required:!0},updateBlock:{type:Function,required:!0},deleteBlock:{type:Function,required:!0}},data(){return{b:{},activeLine:-1,eventLine:-1,errorLine:-1}},computed:{lineNumber(){return BlockAutomator.lineNumberFromBlockID(this.b.id)},isActiveLine(){return this.lineNumber===this.activeLine},isEventLine(){return this.lineNumber===this.eventLine},isErrorLine(){return this.lineNumber===this.errorLine}},created(){this.recalculateErrorCount()},destroyed(){this.recalculateErrorCount()},mounted(){this.b=this.block},methods:{update(){const t=AutomatorHighlighter.lines;this.activeLine=t.active,this.eventLine=t.event,this.errorLine=t.error},parseRequest(){BlockAutomator.parseTextFromBlocks()},deleteBlockFromNest(t){const e=this.b.nest.findIndex(i=>i.id===t);this.b.nest.splice(e,1)},updateBlockFromNest(t,e){this.$set(this.b.nest,this.b.nest.findIndex(i=>i.id===e),t),this.parseRequest()},removeBlock(t,e){this.deleteBlock(t,e),this.recalculateErrorCount()},recalculateErrorCount(){AutomatorData.recalculateErrors(),AutomatorBackend.currentEditingScript.id===AutomatorBackend.currentRunningScript.id&&AutomatorBackend.stop()},highlightClass(){return{"c-automator-block-row-active":this.isActiveLine,"c-automator-block-row-event":this.isEventLine,"c-automator-block-row-error":this.isErrorLine}},nextSelection(){return this.b.targets?this.b[this.b.targets[0]]:""}}};var c7=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator-block-row--container"},[i("div",{staticClass:"c-automator-block-row",class:e.highlightClass()},[i("AutomatorBlockSingleInput",{attrs:{constant:e.b.alias?e.b.alias:e.b.cmd,block:e.b,"update-function":e.updateBlock}}),e.b.canWait?i("AutomatorBlockSingleInput",{attrs:{block:e.b,"block-target":"nowait","initial-selection":e.b.nowait?"NOWAIT":"","update-function":e.updateBlock}}):e._e(),e.b.canRespec?i("AutomatorBlockSingleInput",{attrs:{block:e.b,"block-target":"respec","initial-selection":e.b.respec?"RESPEC":"","update-function":e.updateBlock}}):e._e(),e.b.allowedPatterns?i("AutomatorBlockSingleInput",{attrs:{block:e.b,"block-target":e.b.targets[0],patterns:e.b.allowedPatterns,"initial-selection":e.nextSelection(),"update-function":e.updateBlock,recursive:!0}}):e._e(),i("div",{staticClass:"o-automator-block-delete",on:{click:function(n){return e.removeBlock(e.b.id)}}},[e._v(" X ")])],1),e.block.nested?i("draggable",{staticClass:"l-automator-nested-block",attrs:{group:"code-blocks"},model:{value:e.block.nest,callback:function(n){e.$set(e.block,"nest",n)},expression:"block.nest"}},e._l(e.block.nest,function(n){return i("AutomatorBlockSingleRow",{key:n.id,attrs:{block:n,"update-block":e.updateBlockFromNest,"delete-block":e.deleteBlockFromNest}})}),1):e._e()],1)},u7=[],d7=K(l7,c7,u7,!1,null,"4561265c");const h7=d7.exports,f7={name:"AutomatorBlockEditor",components:{AutomatorBlockSingleRow:h7,draggable:Hk},computed:{lines:{get(){return this.$viewModel.tabs.reality.automator.lines},set(t){this.$viewModel.tabs.reality.automator.lines=t}},numberOfLines(){return this.lines.reduce((t,e)=>t+Hs.numberOfLinesInBlock(e),0)}},mounted(){Hs.initialize(),AutomatorData.recalculateErrors(),Hs.editor.scrollTo(0,Hs.previousScrollPosition),Hs.gutter.style.bottom=`${Hs.editor.scrollTop}px`},methods:{update(){AutomatorBackend.state.followExecution&&AutomatorBackend.jumpToActiveLine();const t=AutomatorBackend.isOn?Hs.lineNumberFromBlockID(Hs.currentBlockId):-1;AutomatorHighlighter.updateHighlightedLine(t,LineEnum.Active)},setPreviousScroll(){Hs.previousScrollPosition=this.$refs.blockEditorElement.scrollTop,Hs.gutter.style.bottom=`${Hs.editor.scrollTop}px`},parseRequest(){Hs.updateIdArray(),AutomatorData.recalculateErrors(),Hs.parseTextFromBlocks()},updateBlock(t,e){this.lines[this.lines.findIndex(i=>i.id===e)]=t,this.parseRequest()},deleteBlock(t){const e=this.lines.findIndex(i=>i.id===t);this.lines.splice(e,1),this.parseRequest()}}},Hs={editor:null,gutter:null,_idArray:[],initialize(){this.editor=document.getElementsByClassName("c-automator-block-editor")[0],this.gutter=document.getElementsByClassName("c-automator-block-editor--gutter")[0]},get lines(){return ui.view.tabs.reality.automator.lines},set lines(t){ui.view.tabs.reality.automator.lines=t,this.updateIdArray()},get currentBlockId(){return AutomatorBackend.stack.isEmpty?!1:this._idArray[AutomatorBackend.stack.top.lineNumber-1]},lineNumber(t){const e=this._idArray.map((i,n)=>i?-1:n+1).filter(i=>i!==-1);return t-e.countWhere(i=>i<=t)},lineNumberFromBlockID(t){return this.lineNumber(this._idArray.indexOf(t)+1)},parseTextFromBlocks(t){const e=this.parseLines(Hs.lines).join(`
`),i=t??ui.view.tabs.reality.automator.editorScriptID;AutomatorData.recalculateErrors(),AutomatorBackend.saveScript(i,e)},updateEditor(t){const e=cv(t).blocks;return this.lines=e,e},hasUnparsableCommands(t){const e=cv(t);return e.validatedBlocks!==e.visitedBlocks},generateText(t,e=0){let i=`${"	".repeat(e)}${t.cmd} `;i=i.replace("COMMENT","//").replace("BLOB","blob  "),t.canWait&&t.nowait&&(i=i.replace(/(\S+)/u,"$1 NOWAIT")),t.respec&&(i+=" RESPEC");const n=["genericInput1","compOperator","genericInput2","singleSelectionInput","singleTextInput"];for(const r of n)t[r]&&(i+=` ${t[r]}`);return(t.cmd==="IF"||t.cmd==="WHILE"||t.cmd==="UNTIL")&&(i+=" {"),i.replace("  "," ")},parseLines(t,e=0){const i=[];for(let n=0;n<t.length;n++)i.push(this.generateText(t[n],e)),(t[n].cmd==="IF"||t[n].cmd==="WHILE"||t[n].cmd==="UNTIL")&&(i.push(...this.parseLines(t[n].nest,e+1)),i.push(`${"	".repeat(e)}}`));return i},blockIdArray(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];e.push(n.id),n.nested&&e.push(...this.blockIdArray(n.nest),void 0)}return e},updateIdArray(){this._idArray=this.blockIdArray(this.lines)},numberOfLinesInBlock(t){return t.nested?Math.max(t.nest.reduce((e,i)=>e+this.numberOfLinesInBlock(i),1),2):1},clearEditor(){setTimeout(()=>this.lines=[],0)},previousScrollPosition:0};var p7=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator-block-editor--container"},[i("div",{ref:"editorGutter",staticClass:"c-automator-block-editor--gutter"},e._l(e.numberOfLines,function(n){return i("div",{key:n,staticClass:"c-automator-block-line-number",style:{top:`${(n-1)*3.45}rem`}},[e._v(" "+e._s(n)+" ")])}),0),i("div",{ref:"blockEditorElement",staticClass:"c-automator-block-editor",on:{scroll:function(n){return e.setPreviousScroll()}}},[i("draggable",{staticClass:"c-automator-blocks",attrs:{group:"code-blocks","ghost-class":"c-automator-block-row-ghost"},on:{end:e.parseRequest},model:{value:e.lines,callback:function(n){e.lines=n},expression:"lines"}},e._l(e.lines,function(n,r){return i("AutomatorBlockSingleRow",{key:n.id+1e4*r,attrs:{block:n,"update-block":e.updateBlock,"delete-block":e.deleteBlock}})}),1)],1)])},m7=[],y7=K(f7,p7,m7,!1,null,"5e25ee3f");const JU=y7.exports,g7=Object.freeze(Object.defineProperty({__proto__:null,BlockAutomator:Hs,default:JU},Symbol.toStringTag,{value:"Module"})),v7={name:"AutomatorBlocks",components:{draggable:Hk},data(){return{allBlocks:iA.filter(t=>!b7.includes(t.cmd)),blocks:[]}},methods:{update(){this.blocks=this.allBlocks.filter(t=>{var e;return((e=t.isUnlocked)==null?void 0:e.call(t))??!0})},clone(t){const e={...t,id:UIID.next()};return t.nested&&!t.nest&&(e.nest=[]),AutomatorData.recalculateErrors(),e}}},D_=["<",">",">=","<="],x_=["AM","IP","EP","RM","INFINITIES","BANKED INFINITIES","ETERNITIES","REALITIES","PENDING IP","PENDING EP","PENDING TP","PENDING RM","PENDING GLYPH LEVEL","DT","TP","RG","REP","TT","TOTAL TT","SPENT TT","TOTAL COMPLETIONS","PENDING COMPLETIONS","EC1 COMPLETIONS","EC2 COMPLETIONS","EC3 COMPLETIONS","EC4 COMPLETIONS","EC5 COMPLETIONS","EC6 COMPLETIONS","EC7 COMPLETIONS","EC8 COMPLETIONS","EC9 COMPLETIONS","EC10 COMPLETIONS","EC11 COMPLETIONS","EC12 COMPLETIONS"],tw=["INFINITY","ETERNITY","REALITY"],iA=[{cmd:"STUDIES RESPEC",alias:"RESPEC TIME STUDIES"},{cmd:"STUDIES LOAD",alias:"LOAD STUDY PRESET",allowedPatterns:["AB"],A:["ID","NAME"],B:["*"],targets:["singleSelectionInput","singleTextInput"],canWait:!0},{cmd:"STUDIES PURCHASE",alias:"PURCHASE STUDIES",allowedPatterns:["A"],A:["*"],targets:["singleTextInput"],canWait:!0},{cmd:"INFINITY",canWait:!0},{cmd:"ETERNITY",canRespec:!0,canWait:!0},{cmd:"REALITY",canRespec:!0,canWait:!0,isUnlocked:()=>RealityUpgrade(25).isBought},{cmd:"UNLOCK",allowedPatterns:["AB","C"],A:["EC"],B:["*"],C:["DILATION"],targets:["singleSelectionInput","singleTextInput"],canWait:!0},{cmd:"START",allowedPatterns:["AB","C"],A:["EC"],B:["*"],C:["DILATION"],targets:["singleSelectionInput","singleTextInput"]},{cmd:"AUTO",alias:"CHANGE AUTOBUYER SETTING",allowedPatterns:["AB"],A:tw,B:["ON","OFF","* AUTOBUYER SETTING"],targets:["singleSelectionInput","singleTextInput"]},{cmd:"BLACK HOLE",alias:"TURN BLACK HOLE",allowedPatterns:["A"],A:["ON","OFF"],targets:["singleSelectionInput"],isUnlocked:()=>BlackHole(1).isUnlocked},{cmd:"STORE GAME TIME",alias:"SET GAME TIME STORAGE TO",allowedPatterns:["A"],A:["ON","OFF","USE"],targets:["singleSelectionInput"],isUnlocked:()=>Enslaved.isUnlocked},{cmd:"NOTIFY",alias:"GAME NOTIFICATION:",allowedPatterns:["A"],A:["*"],targets:["singleTextInput"]},{cmd:"COMMENT",alias:"NOTE:",allowedPatterns:["A"],A:["*"],targets:["singleTextInput"]},{cmd:"WAIT",alias:"PAUSE AUTOMATOR UNTIL",allowedPatterns:["A","DE","BCB"],A:tw,B:[...x_,"* SPECIFIED CONSTANT"],C:D_,D:["BLACK HOLE"],E:["OFF","BH1","BH2"],targets:["genericInput1","compOperator","genericInput2"]},{cmd:"PAUSE",alias:"PAUSE AUTOMATOR FOR",allowedPatterns:["A"],A:["*"],targets:["singleTextInput"]},{cmd:"IF",alias:"ENTER BLOCK IF",allowedPatterns:["ABA"],A:[...x_,"* SPECIFIED CONSTANT"],B:D_,targets:["genericInput1","compOperator","genericInput2"],nested:!0},{cmd:"UNTIL",alias:"REPEAT BLOCK UNTIL",allowedPatterns:["A","BCB"],A:tw,B:[...x_,"* SPECIFIED CONSTANT"],C:D_,targets:["genericInput1","compOperator","genericInput2"],nested:!0},{cmd:"WHILE",alias:"REPEAT BLOCK WHILE",allowedPatterns:["ABA"],A:[...x_,"* SPECIFIED CONSTANT"],B:D_,targets:["genericInput1","compOperator","genericInput2"],nested:!0},{cmd:"BLOB"},{cmd:"STOP",alias:"STOP EXECUTION"}],b7=["BLOB"],_7=iA.mapToObject(t=>t.cmd,t=>t);var E7=function(){var e=this,i=e._self._c;return i("draggable",{staticClass:"o-drag-cancel-region",attrs:{group:"code-blocks","ghost-class":"null-block",draggable:".draggable-blocks"}},[i("p",[e._v(" Drag and drop these blocks to the area on the left! The blocks have names matching the commands in the reference page, but may change appearance after being placed to describe what they do in a more natural-sounding manner. If a block changes in this way, the alternate text will be shown as a tooltip when going to drag it over. ")]),i("br"),i("p",[e._v(" Inputs with a "),i("span",{staticClass:"c-automator-input-optional"},[e._v("brown")]),e._v(" color are optional, while inputs with a "),i("span",{staticClass:"c-automator-input-required"},[e._v("teal")]),e._v(" color are required. "),i("span",{staticClass:"c-automator-block-row-error"},[e._v("Red")]),e._v(" inputs are causing errors and must be changed before the script can be run. For more details, check the Scripting Information pane. ")]),i("p",[e._v(" Options in dropdown menus which start with a * will be replaced with a text box. This can be turned back into a dropdown by clicking the "),i("i",{staticClass:"fa-solid fa-circle-xmark"}),e._v(" on the right side of the text box. ")]),i("draggable",{staticClass:"block-container",attrs:{list:e.blocks,group:{name:"code-blocks",pull:"clone",put:!1},sort:!1,clone:e.clone}},e._l(e.blocks,function(n){return i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.alias,expression:"block.alias"}],key:n.id,staticClass:"o-automator-command o-automator-block-list draggable-blocks"},[e._v(" "+e._s(n.cmd)+" ")])}),0),i("p",[e._v(" Note: Blocks and their contents count towards the character limits as if the command was typed in text mode. ")])],1)},T7=[],w7=K(v7,E7,T7,!1,null,"da2b831d");const eL=w7.exports,C7=Object.freeze(Object.defineProperty({__proto__:null,automatorBlocks:iA,automatorBlocksMap:_7,default:eL},Symbol.toStringTag,{value:"Module"})),S7={name:"AutomatorTextEditor",props:{currentScriptId:{type:[Number,String],required:!0}},data(){return{markedLineNumber:0,unclearedLines:!1,isActiveScript:!1}},computed:{UI(){return Dh.initialize(),Dh},fullScreen(){return this.$viewModel.tabs.reality.automator.fullScreen}},watch:{currentScriptId:{handler(t,e){this.unmarkActiveLine();const i=player.reality.automator.scripts;(!this.UI.documents[t]||this.UI.documents[t].getValue()!==i[t].content)&&(this.UI.documents[t]=CodeMirror.Doc(i[t].content,"automato")),this.UI.editor.getDoc()!==this.UI.documents[t]&&this.UI.editor.swapDoc(this.UI.documents[t]),this.UI.documents[e]!==void 0&&i[e]===void 0&&delete this.UI.documents[e]},immediate:!0},fullScreen(){this.$nextTick(()=>this.UI.editor.refresh())}},created(){Dh.initialize(),this.on$(GAME_EVENT.GAME_LOAD,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>this.onGameLoad())},mounted(){this.$refs.container.appendChild(this.UI.container),this.$nextTick(()=>{this.UI.editor.refresh(),this.UI.editor.performLint(),this.UI.editor.scrollTo(null,Dh.savedVertPos)})},beforeDestroy(){AutomatorHighlighter.clearAllHighlightedLines(),Dh.savedVertPos=Dh.editor.doc.scrollTop,this.$refs.container.removeChild(this.UI.container)},methods:{update(){AutomatorBackend.jumpToActiveLine(),this.unclearedLines&&!AutomatorBackend.isOn&&this.clearAllActiveLines(),AutomatorBackend.isOn?this.setActiveState(`${AutomatorBackend.state.topLevelScript}`,AutomatorBackend.stack.top.lineNumber):this.setActiveState("",-1)},onGameLoad(){this.UI.documents={}},unmarkActiveLine(){AutomatorHighlighter.updateHighlightedLine(-1,LineEnum.Active)},markActiveLine(t){AutomatorHighlighter.updateHighlightedLine(t,LineEnum.Active),this.unclearedLines=!0},clearAllActiveLines(){AutomatorHighlighter.clearAllHighlightedLines(),this.unclearedLines=!1},setActiveState(t,e){`${this.currentScriptId}`===t?this.markActiveLine(e):this.unmarkActiveLine()}}},Dh={documents:{},wrapper:null,editor:null,container:null,textArea:null,mode:{mode:"automato",lint:"automato",lineNumbers:!0,theme:"liquibyte",tabSize:2,extraKeys:{Tab:t=>t.execCommand("indentMore"),"Shift-Tab":t=>t.execCommand("indentLess")},autoCloseBrackets:!0,lineWrapping:!0},initialize(){this.container||(this.setUpContainer(),this.setUpEditor(),EventHub.ui.on(GAME_EVENT.GAME_LOAD,()=>this.documents={}))},setUpContainer(){this.container=document.createElement("div"),this.container.className="l-automator-editor__codemirror-container",this.textArea=document.createElement("textarea"),this.container.appendChild(this.textArea)},setUpEditor(){this.editor=CodeMirror.fromTextArea(this.textArea,this.mode),this.editor.on("beforeChange",(t,e)=>{e.origin==="undo"&&e.cancel()}),this.editor.on("keydown",(t,e)=>{const i=e.key;if(e.ctrlKey&&["z","y"].includes(i)){i==="z"&&AutomatorData.undoScriptEdit(),i==="y"&&AutomatorData.redoScriptEdit();return}t.state.completionActive||e.ctrlKey||e.altKey||e.metaKey||!/^[a-zA-Z0-9 \t]$/u.test(i)||CodeMirror.commands.autocomplete(t,null,{completeSingle:!1})}),this.editor.on("change",(t,e)=>{const i=ui.view.tabs.reality.automator.editorScriptID,n=t.getDoc().getValue();e.origin!=="setValue"&&(AutomatorBackend.saveScript(i,n),AutomatorData.redoBuffer=[]),AutomatorData.recalculateErrors(),AutomatorData.currentErrors().length>t.doc.size&&SecretAchievement(48).unlock(),AutomatorHighlighter.clearAllHighlightedLines()})},clearEditor(){this.editor||(this.setUpContainer(),this.setUpEditor()),this.editor.setValue(""),this.editor.clearHistory(),this.editor.clearGutter("gutterId")},savedVertPos:0};var k7=function(){var e=this,i=e._self._c;return i("div",{ref:"container",staticClass:"c-automator-editor l-automator-editor l-automator-pane__content"})},A7=[],R7=K(S7,k7,A7,!1,null,null);const tL=R7.exports,I7=Object.freeze(Object.defineProperty({__proto__:null,AutomatorTextUI:Dh,default:tL},Symbol.toStringTag,{value:"Module"}));/*
 * vis-network - network
 * http://visjs.org/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 5.1.1
 * @date    2019-07-31T11:02:13Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2018-2019 visjs contributors, https://github.com/visjs
 *
 * @license 
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function D7(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var x7=D7;function M7(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}}var P7=M7;function O7(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}var N7=O7;function G7(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var U7=G7;function L7(t){return P7(t)||N7(t)||U7()}var B7=L7,F7=typeof globalThis>"u"?typeof window>"u"?typeof global>"u"?typeof self>"u"?{}:self:global:window:globalThis;function $7(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function bM(t,e){return e={exports:{}},t(e,e.exports),e.exports}for(var Nd=bM(function(t){function e(n){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e(n)}function i(n){return t.exports=typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?i=function(r){return e(r)}:i=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":e(r)},i(n)}t.exports=i}),Gc=bM(function(t){var e=Math.round,i=Math.pow,n=Math.max,r=Math.abs,s=Math.min,a=Math.floor,o=Math.ceil;(function(c,d){t.exports=d()})(F7,function(){function c(){return Ma.apply(null,arguments)}function d(l){return l instanceof Array||Object.prototype.toString.call(l)==="[object Array]"}function p(l){return l!=null&&Object.prototype.toString.call(l)==="[object Object]"}function m(l){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(l).length===0;for(var h in l)if(l.hasOwnProperty(h))return!1;return!0}function y(l){return l===void 0}function _(l){return typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]"}function E(l){return l instanceof Date||Object.prototype.toString.call(l)==="[object Date]"}function C(l,h){var b=[],w;for(w=0;w<l.length;++w)b.push(h(l[w],w));return b}function S(l,h){return Object.prototype.hasOwnProperty.call(l,h)}function k(l,h){for(var b in h)S(h,b)&&(l[b]=h[b]);return S(h,"toString")&&(l.toString=h.toString),S(h,"valueOf")&&(l.valueOf=h.valueOf),l}function R(l,h,b,w){return fr(l,h,b,w,!0).utc()}function O(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function I(l){return l._pf==null&&(l._pf=O()),l._pf}function F(l){if(l._isValid==null){var h=I(l),b=Pa.call(h.parsedDateParts,function(D){return D!=null}),w=!isNaN(l._d.getTime())&&0>h.overflow&&!h.empty&&!h.invalidMonth&&!h.invalidWeekday&&!h.weekdayMismatch&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&b);if(l._strict&&(w=w&&h.charsLeftOver===0&&h.unusedTokens.length===0&&h.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(l))l._isValid=w;else return w}return l._isValid}function P(l){var h=R(NaN);return l==null?I(h).userInvalidated=!0:k(I(h),l),h}function x(l,h){var b,w,D;if(y(h._isAMomentObject)||(l._isAMomentObject=h._isAMomentObject),y(h._i)||(l._i=h._i),y(h._f)||(l._f=h._f),y(h._l)||(l._l=h._l),y(h._strict)||(l._strict=h._strict),y(h._tzm)||(l._tzm=h._tzm),y(h._isUTC)||(l._isUTC=h._isUTC),y(h._offset)||(l._offset=h._offset),y(h._pf)||(l._pf=I(h)),y(h._locale)||(l._locale=h._locale),0<Ms.length)for(b=0;b<Ms.length;b++)w=Ms[b],D=h[w],y(D)||(l[w]=D);return l}function M(l){x(this,l),this._d=new Date(l._d==null?NaN:l._d.getTime()),this.isValid()||(this._d=new Date(NaN)),ea===!1&&(ea=!0,c.updateOffset(this),ea=!1)}function q(l){return l instanceof M||l!=null&&l._isAMomentObject!=null}function $(l){return 0>l?o(l)||0:a(l)}function B(l){var h=+l,b=0;return h!=0&&isFinite(h)&&(b=$(h)),b}function j(l,h,b){var w=s(l.length,h.length),D=r(l.length-h.length),G=0,te;for(te=0;te<w;te++)(b&&l[te]!==h[te]||!b&&B(l[te])!==B(h[te]))&&G++;return G+D}function z(l){c.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+l)}function X(l,h){var b=!0;return k(function(){if(c.deprecationHandler!=null&&c.deprecationHandler(null,l),b){for(var w=[],D=0,G;D<arguments.length;D++){if(G="",typeof arguments[D]=="object"){for(var te in G+=`
[`+D+"] ",arguments[0])G+=te+": "+arguments[0][te]+", ";G=G.slice(0,-2)}else G=arguments[D];w.push(G)}z(l+`
Arguments: `+Array.prototype.slice.call(w).join("")+`
`+new Error().stack),b=!1}return h.apply(this,arguments)},h)}function se(l,h){c.deprecationHandler!=null&&c.deprecationHandler(l,h),Ho[l]||(z(h),Ho[l]=!0)}function ue(l){return l instanceof Function||Object.prototype.toString.call(l)==="[object Function]"}function ve(l){var h,b;for(b in l)h=l[b],ue(h)?this[b]=h:this["_"+b]=h;this._config=l,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function _e(l,h){var b=k({},l),w;for(w in h)S(h,w)&&(p(l[w])&&p(h[w])?(b[w]={},k(b[w],l[w]),k(b[w],h[w])):h[w]==null?delete b[w]:b[w]=h[w]);for(w in l)S(l,w)&&!S(h,w)&&p(l[w])&&(b[w]=k({},b[w]));return b}function de(l){l!=null&&this.set(l)}function oe(l,h){var b=l.toLowerCase();Qn[b]=Qn[b+"s"]=Qn[h]=l}function Q(l){return typeof l=="string"?Qn[l]||Qn[l.toLowerCase()]:void 0}function Z(l){var h={},b,w;for(w in l)S(l,w)&&(b=Q(w),b&&(h[b]=l[w]));return h}function W(l,h){Jn[l]=h}function ne(l){var h=[];for(var b in l)h.push({unit:b,priority:Jn[b]});return h.sort(function(w,D){return w.priority-D.priority}),h}function ce(l,h,b){var w=""+r(l),D=h-w.length;return(0<=l?b?"+":"":"-")+i(10,n(0,D)).toString().substr(1)+w}function J(l,h,b,w){var D=w;typeof w=="string"&&(D=function(){return this[w]()}),l&&(In[l]=D),h&&(In[h[0]]=function(){return ce(D.apply(this,arguments),h[1],h[2])}),b&&(In[b]=function(){return this.localeData().ordinal(D.apply(this,arguments),l)})}function pe(l){return l.match(/\[[\s\S]/)?l.replace(/^\[|\]$/g,""):l.replace(/\\/g,"")}function he(l){var h=l.match(wl),b,w;for(b=0,w=h.length;b<w;b++)h[b]=In[h[b]]?In[h[b]]:pe(h[b]);return function(D){var G="",te;for(te=0;te<w;te++)G+=ue(h[te])?h[te].call(D,l):h[te];return G}}function fe(l,h){return l.isValid()?(h=be(h,l.localeData()),Ps[h]=Ps[h]||he(h),Ps[h](l)):l.localeData().invalidDate()}function be(l,h){function b(D){return h.longDateFormat(D)||D}var w=5;for(ds.lastIndex=0;0<=w&&ds.test(l);)l=l.replace(ds,b),ds.lastIndex=0,w-=1;return l}function re(l,h,b){Na[l]=ue(h)?h:function(w){return w&&b?b:h}}function Ft(l,h){return S(Na,l)?Na[l](h._strict,h._locale):new RegExp(Dt(l))}function Dt(l){return ft(l.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(h,b,w,D,G){return b||w||D||G}))}function ft(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ae(l,h){var b=h,w;for(typeof l=="string"&&(l=[l]),_(h)&&(b=function(D,G){G[h]=B(D)}),w=0;w<l.length;w++)ta[l[w]]=b}function ei(l,h){Ae(l,function(b,w,D,G){D._w=D._w||{},h(b,D._w,D,G)})}function $t(l,h,b){h!=null&&S(ta,l)&&ta[l](h,b._a,b,l)}function At(l){return It(l)?366:365}function It(l){return l%4==0&&l%100!=0||l%400==0}function St(l,h){return function(b){return b==null?rt(this,l):(De(this,l,b),c.updateOffset(this,h),this)}}function rt(l,h){return l.isValid()?l._d["get"+(l._isUTC?"UTC":"")+h]():NaN}function De(l,h,b){l.isValid()&&!isNaN(b)&&(h==="FullYear"&&It(l.year())&&l.month()===1&&l.date()===29?l._d["set"+(l._isUTC?"UTC":"")+h](b,l.month(),ot(b,l.month())):l._d["set"+(l._isUTC?"UTC":"")+h](b))}function qe(l,h){if(typeof l=="object"){l=Z(l);for(var b=ne(l),w=0;w<b.length;w++)this[b[w].unit](l[b[w].unit])}else if(l=Q(l),ue(this[l]))return this[l](h);return this}function Pt(l,h){return(l%h+h)%h}function ot(l,h){if(isNaN(l)||isNaN(h))return NaN;var b=Pt(h,12);return l+=(h-b)/12,b===1?It(l)?29:28:31-b%7%2}function Ei(l,h,b){var w=l.toLocaleLowerCase(),D,G,te;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],D=0;12>D;++D)te=R([2e3,D]),this._shortMonthsParse[D]=this.monthsShort(te,"").toLocaleLowerCase(),this._longMonthsParse[D]=this.months(te,"").toLocaleLowerCase();return b?h==="MMM"?(G=ut.call(this._shortMonthsParse,w),G===-1?null:G):(G=ut.call(this._longMonthsParse,w),G===-1?null:G):h==="MMM"?(G=ut.call(this._shortMonthsParse,w),G!==-1?G:(G=ut.call(this._longMonthsParse,w),G===-1?null:G)):(G=ut.call(this._longMonthsParse,w),G!==-1?G:(G=ut.call(this._shortMonthsParse,w),G===-1?null:G))}function yi(l,h,b){var w,D,G;if(this._monthsParseExact)return Ei.call(this,l,h,b);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),w=0;12>w;w++)if(D=R([2e3,w]),b&&!this._longMonthsParse[w]&&(this._longMonthsParse[w]=new RegExp("^"+this.months(D,"").replace(".","")+"$","i"),this._shortMonthsParse[w]=new RegExp("^"+this.monthsShort(D,"").replace(".","")+"$","i")),b||this._monthsParse[w]||(G="^"+this.months(D,"")+"|^"+this.monthsShort(D,""),this._monthsParse[w]=new RegExp(G.replace(".",""),"i")),b&&h==="MMMM"&&this._longMonthsParse[w].test(l)||b&&h==="MMM"&&this._shortMonthsParse[w].test(l)||!b&&this._monthsParse[w].test(l))return w}function Ti(l,h){var b;if(!l.isValid())return l;if(typeof h=="string"){if(/^\d+$/.test(h))h=B(h);else if(h=l.localeData().monthsParse(h),!_(h))return l}return b=s(l.date(),ot(l.year(),h)),l._d["set"+(l._isUTC?"UTC":"")+"Month"](h,b),l}function wi(l){return l==null?rt(this,"Month"):(Ti(this,l),c.updateOffset(this,!0),this)}function hi(){function l(te,Te){return Te.length-te.length}var h=[],b=[],w=[],D,G;for(D=0;12>D;D++)G=R([2e3,D]),h.push(this.monthsShort(G,"")),b.push(this.months(G,"")),w.push(this.months(G,"")),w.push(this.monthsShort(G,""));for(h.sort(l),b.sort(l),w.sort(l),D=0;12>D;D++)h[D]=ft(h[D]),b[D]=ft(b[D]);for(D=0;24>D;D++)w[D]=ft(w[D]);this._monthsRegex=new RegExp("^("+w.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Ki(l,h,b,w,D,G,te){var Te;return 100>l&&0<=l?(Te=new Date(l+400,h,b,w,D,G,te),isFinite(Te.getFullYear())&&Te.setFullYear(l)):Te=new Date(l,h,b,w,D,G,te),Te}function xt(l){var h;if(100>l&&0<=l){var b=Array.prototype.slice.call(arguments);b[0]=l+400,h=new Date(Date.UTC.apply(null,b)),isFinite(h.getUTCFullYear())&&h.setUTCFullYear(l)}else h=new Date(Date.UTC.apply(null,arguments));return h}function zt(l,h,b){var w=7+h-b,D=(7+xt(l,0,w).getUTCDay()-h)%7;return-D+w-1}function Ke(l,h,b,w,D){var G=zt(l,w,D),te=1+7*(h-1)+(7+b-w)%7+G,Te,Ne;return 0>=te?(Te=l-1,Ne=At(Te)+te):te>At(l)?(Te=l+1,Ne=te-At(l)):(Te=l,Ne=te),{year:Te,dayOfYear:Ne}}function Xt(l,h,b){var w=zt(l.year(),h,b),D=a((l.dayOfYear()-w-1)/7)+1,G,te;return 1>D?(te=l.year()-1,G=D+dt(te,h,b)):D>dt(l.year(),h,b)?(G=D-dt(l.year(),h,b),te=l.year()+1):(te=l.year(),G=D),{week:G,year:te}}function dt(l,h,b){var w=zt(l,h,b),D=zt(l+1,h,b);return(At(l)-w+D)/7}function Ot(l,h){return typeof l=="string"?isNaN(l)?(l=h.weekdaysParse(l),typeof l=="number"?l:null):parseInt(l,10):l}function ge(l,h){return typeof l=="string"?h.weekdaysParse(l)%7||7:isNaN(l)?null:l}function Oe(l,h){return l.slice(h,7).concat(l.slice(0,h))}function Be(l,h,b){var w=l.toLocaleLowerCase(),D,G,te;if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],D=0;7>D;++D)te=R([2e3,1]).day(D),this._minWeekdaysParse[D]=this.weekdaysMin(te,"").toLocaleLowerCase(),this._shortWeekdaysParse[D]=this.weekdaysShort(te,"").toLocaleLowerCase(),this._weekdaysParse[D]=this.weekdays(te,"").toLocaleLowerCase();return b?h==="dddd"?(G=ut.call(this._weekdaysParse,w),G===-1?null:G):h==="ddd"?(G=ut.call(this._shortWeekdaysParse,w),G===-1?null:G):(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G):h==="dddd"?(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._shortWeekdaysParse,w),G!==-1?G:(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G))):h==="ddd"?(G=ut.call(this._shortWeekdaysParse,w),G!==-1?G:(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G))):(G=ut.call(this._minWeekdaysParse,w),G!==-1?G:(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._shortWeekdaysParse,w),G===-1?null:G)))}function ct(l,h,b){var w,D,G;if(this._weekdaysParseExact)return Be.call(this,l,h,b);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),w=0;7>w;w++)if(D=R([2e3,1]).day(w),b&&!this._fullWeekdaysParse[w]&&(this._fullWeekdaysParse[w]=new RegExp("^"+this.weekdays(D,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[w]=new RegExp("^"+this.weekdaysShort(D,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[w]=new RegExp("^"+this.weekdaysMin(D,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[w]||(G="^"+this.weekdays(D,"")+"|^"+this.weekdaysShort(D,"")+"|^"+this.weekdaysMin(D,""),this._weekdaysParse[w]=new RegExp(G.replace(".",""),"i")),b&&h==="dddd"&&this._fullWeekdaysParse[w].test(l)||b&&h==="ddd"&&this._shortWeekdaysParse[w].test(l)||b&&h==="dd"&&this._minWeekdaysParse[w].test(l)||!b&&this._weekdaysParse[w].test(l))return w}function it(){function l(Jt,ir){return ir.length-Jt.length}var h=[],b=[],w=[],D=[],G,te,Te,Ne,Ct;for(G=0;7>G;G++)te=R([2e3,1]).day(G),Te=this.weekdaysMin(te,""),Ne=this.weekdaysShort(te,""),Ct=this.weekdays(te,""),h.push(Te),b.push(Ne),w.push(Ct),D.push(Te),D.push(Ne),D.push(Ct);for(h.sort(l),b.sort(l),w.sort(l),D.sort(l),G=0;7>G;G++)b[G]=ft(b[G]),w[G]=ft(w[G]),D[G]=ft(D[G]);this._weekdaysRegex=new RegExp("^("+D.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+w.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function at(){return this.hours()%12||12}function Kt(l,h){J(l,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),h)})}function fi(l,h){return h._meridiemParse}function An(l){return l&&l.toLowerCase().replace("_","-")}function Sa(l){for(var h=0,b,w,D,G;h<l.length;){for(G=An(l[h]).split("-"),b=G.length,w=An(l[h+1]),w=w?w.split("-"):null;0<b;){if(D=dr(G.slice(0,b).join("-")),D)return D;if(w&&w.length>=b&&j(G,w,!0)>=b-1)break;b--}h++}return tr}function dr(l){var h=null;if(!ht[l]&&t&&t.exports)try{h=tr._abbr,$7("./locale/"+l),Zi(h)}catch{}return ht[l]}function Zi(l,h){var b;return l&&(b=y(h)?Oi(l):ka(l,h),b?tr=b:typeof console<"u"&&console.warn&&console.warn("Locale "+l+" not found. Did you forget to load it?")),tr._abbr}function ka(l,h){if(h!==null){var b=po,w;if(h.abbr=l,ht[l]!=null)se("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),b=ht[l]._config;else if(h.parentLocale!=null)if(ht[h.parentLocale]!=null)b=ht[h.parentLocale]._config;else if(w=dr(h.parentLocale),w!=null)b=w._config;else return yr[h.parentLocale]||(yr[h.parentLocale]=[]),yr[h.parentLocale].push({name:l,config:h}),null;return ht[l]=new de(_e(b,h)),yr[l]&&yr[l].forEach(function(D){ka(D.name,D.config)}),Zi(l),ht[l]}return delete ht[l],null}function Oi(l){var h;if(l&&l._locale&&l._locale._abbr&&(l=l._locale._abbr),!l)return tr;if(!d(l)){if(h=dr(l),h)return h;l=[l]}return Sa(l)}function Xd(){return Tl(ht)}function Rs(l){var h=l._a,b;return h&&I(l).overflow===-2&&(b=0>h[1]||11<h[1]?1:1>h[2]||h[2]>ot(h[0],h[1])?2:0>h[3]||24<h[3]||h[3]===24&&(h[4]!==0||h[5]!==0||h[6]!==0)?3:0>h[4]||59<h[4]?4:0>h[5]||59<h[5]?5:0>h[6]||999<h[6]?6:-1,I(l)._overflowDayOfYear&&(0>b||2<b)&&(b=2),I(l)._overflowWeeks&&b===-1&&(b=7),I(l)._overflowWeekday&&b===-1&&(b=8),I(l).overflow=b),l}function Gn(l,h,b){return l??h??b}function Kd(l){var h=new Date(c.now());return l._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()]}function Is(l){var h=[],b,w,D,G,te;if(!l._d){for(D=Kd(l),l._w&&l._a[2]==null&&l._a[1]==null&&Zd(l),l._dayOfYear!=null&&(te=Gn(l._a[0],D[0]),(l._dayOfYear>At(te)||l._dayOfYear===0)&&(I(l)._overflowDayOfYear=!0),w=xt(te,0,l._dayOfYear),l._a[1]=w.getUTCMonth(),l._a[2]=w.getUTCDate()),b=0;3>b&&l._a[b]==null;++b)l._a[b]=h[b]=D[b];for(;7>b;b++)l._a[b]=h[b]=l._a[b]==null?b===2?1:0:l._a[b];l._a[3]===24&&l._a[4]===0&&l._a[5]===0&&l._a[6]===0&&(l._nextDay=!0,l._a[3]=0),l._d=(l._useUTC?xt:Ki).apply(null,h),G=l._useUTC?l._d.getUTCDay():l._d.getDay(),l._tzm!=null&&l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),l._nextDay&&(l._a[3]=24),l._w&&typeof l._w.d<"u"&&l._w.d!==G&&(I(l).weekdayMismatch=!0)}}function Zd(l){var h,b,w,D,G,te,Te,Ne;if(h=l._w,h.GG!=null||h.W!=null||h.E!=null)G=1,te=4,b=Gn(h.GG,l._a[0],Xt(Ge(),1,4).year),w=Gn(h.W,1),D=Gn(h.E,1),(1>D||7<D)&&(Ne=!0);else{G=l._locale._week.dow,te=l._locale._week.doy;var Ct=Xt(Ge(),G,te);b=Gn(h.gg,l._a[0],Ct.year),w=Gn(h.w,Ct.week),h.d==null?h.e==null?D=G:(D=h.e+G,(0>h.e||6<h.e)&&(Ne=!0)):(D=h.d,(0>D||6<D)&&(Ne=!0))}1>w||w>dt(b,G,te)?I(l)._overflowWeeks=!0:Ne==null?(Te=Ke(b,w,D,G,te),l._a[0]=Te.year,l._dayOfYear=Te.dayOfYear):I(l)._overflowWeekday=!0}function co(l){var h=l._i,b=lh.exec(h)||bu.exec(h),w,D,G,te,Te,Ne;if(b){for(I(l).iso=!0,w=0,D=ys.length;w<D;w++)if(ys[w][1].exec(b[1])){te=ys[w][0],G=ys[w][2]!==!1;break}if(te==null)return void(l._isValid=!1);if(b[3]){for(w=0,D=Kr.length;w<D;w++)if(Kr[w][1].exec(b[3])){Te=(b[2]||" ")+Kr[w][0];break}if(Te==null)return void(l._isValid=!1)}if(!G&&Te!=null)return void(l._isValid=!1);if(b[4])if(_u.exec(b[4]))Ne="Z";else return void(l._isValid=!1);l._f=te+(Te||"")+(Ne||""),hr(l)}else l._isValid=!1}function uo(l,h,b,w,D,G){var te=[Qd(l),ia.indexOf(h),parseInt(b,10),parseInt(w,10),parseInt(D,10)];return G&&te.push(parseInt(G,10)),te}function Qd(l){var h=parseInt(l,10);return 49>=h?2e3+h:999>=h?1900+h:h}function Jd(l){return l.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function bl(l,h,b){if(l){var w=Al.indexOf(l),D=new Date(h[0],h[1],h[2]).getDay();if(w!==D)return I(b).weekdayMismatch=!0,b._isValid=!1,!1}return!0}function vc(l,h,b){if(l)return Tc[l];if(h)return 0;var w=parseInt(b,10),D=w%100;return 60*((w-D)/100)+D}function Ds(l){var h=Rl.exec(Jd(l._i));if(h){var b=uo(h[4],h[3],h[2],h[5],h[6],h[7]);if(!bl(h[1],b,l))return;l._a=b,l._tzm=vc(h[8],h[9],h[10]),l._d=xt.apply(null,l._a),l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),I(l).rfc2822=!0}else l._isValid=!1}function eh(l){var h=Os.exec(l._i);if(h!==null)return void(l._d=new Date(+h[1]));if(co(l),l._isValid===!1)delete l._isValid;else return;if(Ds(l),l._isValid===!1)delete l._isValid;else return;c.createFromInputFallback(l)}function hr(l){if(l._f===c.ISO_8601)return void co(l);if(l._f===c.RFC_2822)return void Ds(l);l._a=[],I(l).empty=!0;var h=""+l._i,b=h.length,w=0,D,G,te,Te,Ne;for(te=be(l._f,l._locale).match(wl)||[],D=0;D<te.length;D++)Te=te[D],G=(h.match(Ft(Te,l))||[])[0],G&&(Ne=h.substr(0,h.indexOf(G)),0<Ne.length&&I(l).unusedInput.push(Ne),h=h.slice(h.indexOf(G)+G.length),w+=G.length),In[Te]?(G?I(l).empty=!1:I(l).unusedTokens.push(Te),$t(Te,G,l)):l._strict&&!G&&I(l).unusedTokens.push(Te);I(l).charsLeftOver=b-w,0<h.length&&I(l).unusedInput.push(h),12>=l._a[3]&&I(l).bigHour===!0&&0<l._a[3]&&(I(l).bigHour=void 0),I(l).parsedDateParts=l._a.slice(0),I(l).meridiem=l._meridiem,l._a[3]=bc(l._locale,l._a[3],l._meridiem),Is(l),Rs(l)}function bc(l,h,b){var w;return b==null?h:l.meridiemHour==null?(l.isPM==null||(w=l.isPM(b),w&&12>h&&(h+=12),w||h!==12||(h=0)),h):l.meridiemHour(h,b)}function pu(l){var h,b,w,D,G;if(l._f.length===0)return I(l).invalidFormat=!0,void(l._d=new Date(NaN));for(D=0;D<l._f.length;D++)G=0,h=x({},l),l._useUTC!=null&&(h._useUTC=l._useUTC),h._f=l._f[D],hr(h),F(h)&&(G+=I(h).charsLeftOver,G+=10*I(h).unusedTokens.length,I(h).score=G,(w==null||G<w)&&(w=G,b=h));k(l,b||h)}function Qi(l){if(!l._d){var h=Z(l._i);l._a=C([h.year,h.month,h.day||h.date,h.hour,h.minute,h.second,h.millisecond],function(b){return b&&parseInt(b,10)}),Is(l)}}function lt(l){var h=new M(Rs(as(l)));return h._nextDay&&(h.add(1,"d"),h._nextDay=void 0),h}function as(l){var h=l._i,b=l._f;return l._locale=l._locale||Oi(l._l),h===null||b===void 0&&h===""?P({nullInput:!0}):(typeof h=="string"&&(l._i=h=l._locale.preparse(h)),q(h)?new M(Rs(h)):(E(h)?l._d=h:d(b)?pu(l):b?hr(l):_c(l),F(l)||(l._d=null),l))}function _c(l){var h=l._i;y(h)?l._d=new Date(c.now()):E(h)?l._d=new Date(h.valueOf()):typeof h=="string"?eh(l):d(h)?(l._a=C(h.slice(0),function(b){return parseInt(b,10)}),Is(l)):p(h)?Qi(l):_(h)?l._d=new Date(h):c.createFromInputFallback(l)}function fr(l,h,b,w,D){var G={};return(b===!0||b===!1)&&(w=b,b=void 0),(p(l)&&m(l)||d(l)&&l.length===0)&&(l=void 0),G._isAMomentObject=!0,G._useUTC=G._isUTC=D,G._l=b,G._i=l,G._f=h,G._strict=w,lt(G)}function Ge(l,h,b,w){return fr(l,h,b,w,!1)}function os(l,h){var b,w;if(h.length===1&&d(h[0])&&(h=h[0]),!h.length)return Ge();for(b=h[0],w=1;w<h.length;++w)(!h[w].isValid()||h[w][l](b))&&(b=h[w]);return b}function Oo(l){for(var h in l)if(ut.call(qn,h)===-1||l[h]!=null&&isNaN(l[h]))return!1;for(var b=!1,w=0;w<qn.length;++w)if(l[qn[w]]){if(b)return!1;parseFloat(l[qn[w]])!==B(l[qn[w]])&&(b=!0)}return!0}function kr(l){var h=Z(l),b=h.year||0,w=h.quarter||0,D=h.month||0,G=h.week||h.isoWeek||0,te=h.day||0,Te=h.hour||0,Ne=h.minute||0,Ct=h.second||0,Jt=h.millisecond||0;this._isValid=Oo(h),this._milliseconds=+Jt+1e3*Ct+6e4*Ne+60*(60*(1e3*Te)),this._days=+te+7*G,this._months=+D+3*w+12*b,this._data={},this._locale=Oi(),this._bubble()}function xe(l){return l instanceof kr}function gt(l){return 0>l?-1*e(-1*l):e(l)}function ho(l,h){J(l,0,0,function(){var b=this.utcOffset(),w="+";return 0>b&&(b=-b,w="-"),w+ce(~~(b/60),2)+h+ce(~~b%60,2)})}function xs(l,h){var b=(h||"").match(l);if(b===null)return null;var w=b[b.length-1]||[],D=(w+"").match(ch)||["-",0,0],G=+(60*D[1])+B(D[2]);return G===0?0:D[0]==="+"?G:-G}function ls(l,h){var b,w;return h._isUTC?(b=h.clone(),w=(q(l)||E(l)?l.valueOf():Ge(l).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+w),c.updateOffset(b,!1),b):Ge(l).local()}function cs(l){return 15*-e(l._d.getTimezoneOffset()/15)}function mu(){if(!y(this._isDSTShifted))return this._isDSTShifted;var l={};if(x(l,this),l=as(l),l._a){var h=l._isUTC?R(l._a):Ge(l._a);this._isDSTShifted=this.isValid()&&0<j(l._a,h.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function bt(){return!!this.isValid()&&this._isUTC&&this._offset===0}function oi(l,h){var b=l,w=null,D,G,te;return xe(l)?b={ms:l._milliseconds,d:l._days,M:l._months}:_(l)?(b={},h?b[h]=l:b.milliseconds=l):(w=Eu.exec(l))?(D=w[1]==="-"?-1:1,b={y:0,d:B(w[2])*D,h:B(w[3])*D,m:B(w[4])*D,s:B(w[5])*D,ms:B(gt(1e3*w[6]))*D}):(w=uh.exec(l))?(D=w[1]==="-"?-1:1,b={y:rn(w[2],D),M:rn(w[3],D),w:rn(w[4],D),d:rn(w[5],D),h:rn(w[6],D),m:rn(w[7],D),s:rn(w[8],D)}):b==null?b={}:typeof b=="object"&&("from"in b||"to"in b)&&(te=us(Ge(b.from),Ge(b.to)),b={},b.ms=te.milliseconds,b.M=te.months),G=new kr(b),xe(l)&&S(l,"_locale")&&(G._locale=l._locale),G}function rn(l,h){var b=l&&parseFloat(l.replace(",","."));return(isNaN(b)?0:b)*h}function Aa(l,h){var b={};return b.months=h.month()-l.month()+12*(h.year()-l.year()),l.clone().add(b.months,"M").isAfter(h)&&--b.months,b.milliseconds=+h-+l.clone().add(b.months,"M"),b}function us(l,h){var b;return l.isValid()&&h.isValid()?(h=ls(h,l),l.isBefore(h)?b=Aa(l,h):(b=Aa(h,l),b.milliseconds=-b.milliseconds,b.months=-b.months),b):{milliseconds:0,months:0}}function No(l,h){return function(b,w){var D,G;return w===null||isNaN(+w)||(se(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),G=b,b=w,w=G),b=typeof b=="string"?+b:b,D=oi(b,w),Go(this,D,l),this}}function Go(l,h,b,w){var D=h._milliseconds,G=gt(h._days),te=gt(h._months);l.isValid()&&(w=w==null||w,te&&Ti(l,rt(l,"Month")+te*b),G&&De(l,"Date",rt(l,"Date")+G*b),D&&l._d.setTime(l._d.valueOf()+D*b),w&&c.updateOffset(l,G||te))}function qr(l,h){var b=12*(h.year()-l.year())+(h.month()-l.month()),w=l.clone().add(b,"months"),D,G;return 0>h-w?(D=l.clone().add(b-1,"months"),G=(h-w)/(w-D)):(D=l.clone().add(b+1,"months"),G=(h-w)/(D-w)),-(b+G)||0}function fo(l){var h;return l===void 0?this._locale._abbr:(h=Oi(l),h!=null&&(this._locale=h),this)}function Uo(){return this._locale}function gn(l,h){return(l%h+h)%h}function Lo(l,h,b){return 100>l&&0<=l?new Date(l+400,h,b)-126227808e5:new Date(l,h,b).valueOf()}function Bo(l,h,b){return 100>l&&0<=l?Date.UTC(l+400,h,b)-126227808e5:Date.UTC(l,h,b)}function Yr(l,h){J(0,[l,l.length],0,h)}function Fo(l,h,b,w,D){var G;return l==null?Xt(this,w,D).year:(G=dt(l,w,D),h>G&&(h=G),th.call(this,l,h,b,w,D))}function th(l,h,b,w,D){var G=Ke(l,h,b,w,D),te=xt(G.year,0,G.dayOfYear);return this.year(te.getUTCFullYear()),this.month(te.getUTCMonth()),this.date(te.getUTCDate()),this}function ih(l,h){h[6]=B(1e3*("0."+l))}function $o(l){return l}function vn(l,h,b,w){var D=Oi(),G=R().set(w,h);return D[b](G,l)}function _l(l,h,b){if(_(l)&&(h=l,l=void 0),l=l||"",h!=null)return vn(l,h,b,"month");var w=[],D;for(D=0;12>D;D++)w[D]=vn(l,D,b,"month");return w}function Ia(l,h,b,w){typeof l=="boolean"?(_(h)&&(b=h,h=void 0),h=h||""):(h=l,b=h,l=!1,_(h)&&(b=h,h=void 0),h=h||"");var D=Oi(),G=l?D._week.dow:0;if(b!=null)return vn(h,(b+G)%7,w,"day");var te=[],Te;for(Te=0;7>Te;Te++)te[Te]=vn(h,(Te+G)%7,w,"day");return te}function Da(l,h,b,w){var D=oi(h,b);return l._milliseconds+=w*D._milliseconds,l._days+=w*D._days,l._months+=w*D._months,l._bubble()}function Js(l){return 0>l?a(l):o(l)}function El(l){return 4800*l/146097}function xa(l){return 146097*l/4800}function Pi(l){return function(){return this.as(l)}}function un(l){return function(){return this.isValid()?this._data[l]:NaN}}function Ec(l,h,b,w,D){return D.relativeTime(h||1,!!b,l,w)}function yu(l,h,b){var w=oi(l).abs(),D=qi(w.as("s")),G=qi(w.as("m")),te=qi(w.as("h")),Te=qi(w.as("d")),Ne=qi(w.as("M")),Ct=qi(w.as("y")),Jt=D<=Qt.ss&&["s",D]||D<Qt.s&&["ss",D]||1>=G&&["m"]||G<Qt.m&&["mm",G]||1>=te&&["h"]||te<Qt.h&&["hh",te]||1>=Te&&["d"]||Te<Qt.d&&["dd",Te]||1>=Ne&&["M"]||Ne<Qt.M&&["MM",Ne]||1>=Ct&&["y"]||["yy",Ct];return Jt[2]=h,Jt[3]=0<+l,Jt[4]=b,Ec.apply(null,Jt)}function nh(l){return l===void 0?qi:typeof l=="function"&&(qi=l,!0)}function Rn(l){return(0<l)-(0>l)||+l}function Wr(){if(!this.isValid())return this.localeData().invalidDate();var l=Dr(this._milliseconds)/1e3,h=Dr(this._days),b=Dr(this._months),w,D,G;w=$(l/60),D=$(w/60),l%=60,w%=60,G=$(b/12),b%=12;var te=G,Te=b,Ne=h,Ct=D,Jt=w,ir=l?l.toFixed(3).replace(/\.?0+$/,""):"",Dn=this.asSeconds();if(!Dn)return"P0D";var xu=0>Dn?"-":"",mo=Rn(this._months)===Rn(Dn)?"":"-",xl=Rn(this._days)===Rn(Dn)?"":"-",Ua=Rn(this._milliseconds)===Rn(Dn)?"":"-";return xu+"P"+(te?mo+te+"Y":"")+(Te?mo+Te+"M":"")+(Ne?xl+Ne+"D":"")+(Ct||Jt||ir?"T":"")+(Ct?Ua+Ct+"H":"")+(Jt?Ua+Jt+"M":"")+(ir?Ua+ir+"S":"")}var Ma,Pa;Pa=Array.prototype.some?Array.prototype.some:function(l){for(var h=Object(this),b=h.length>>>0,w=0;w<b;w++)if(w in h&&l.call(this,h[w],w,h))return!0;return!1};var Ms=c.momentProperties=[],ea=!1,Ho={};c.suppressDeprecationWarnings=!1,c.deprecationHandler=null;var Tl=Object.keys?Object.keys:function(l){var h=[],b;for(b in l)S(l,b)&&h.push(b);return h},rh=/\d{1,2}/,Qn={},Jn={},wl=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ds=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ps={},In={},jr=/\d/,Ut=/\d\d/,Ar=/\d{3}/,hs=/\d{4}/,Rr=/[+-]?\d{6}/,je=/\d\d?/,Cl=/\d\d\d\d?/,Sl=/\d\d\d\d\d\d?/,fs=/\d{1,3}/,Oa=/\d{1,4}/,zr=/[+-]?\d{1,6}/,gu=/\d+/,ps=/[+-]?\d+/,sh=/Z|[+-]\d\d:?\d\d/gi,ms=/Z|[+-]\d\d(?::?\d\d)?/gi,ah=/[+-]?\d+(\.\d{1,3})?/,er=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Na={},ta={},pr=0,Ir=1,kl=2,dn=3,mr=4,Xr=5;J("Y",0,0,function(){var l=this.year();return 9999>=l?""+l:"+"+l}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),oe("year","y"),W("year",1),re("Y",ps),re("YY",je,Ut),re("YYYY",Oa,hs),re("YYYYY",zr,Rr),re("YYYYYY",zr,Rr),Ae(["YYYYY","YYYYYY"],pr),Ae("YYYY",function(l,h){h[pr]=l.length===2?c.parseTwoDigitYear(l):B(l)}),Ae("YY",function(l,h){h[pr]=c.parseTwoDigitYear(l)}),Ae("Y",function(l,h){h[pr]=parseInt(l,10)}),c.parseTwoDigitYear=function(l){return B(l)+(68<B(l)?1900:2e3)};var Hi=St("FullYear",!0),ut;ut=Array.prototype.indexOf?Array.prototype.indexOf:function(l){var h;for(h=0;h<this.length;++h)if(this[h]===l)return h;return-1},J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(l){return this.localeData().monthsShort(this,l)}),J("MMMM",0,0,function(l){return this.localeData().months(this,l)}),oe("month","M"),W("month",8),re("M",je),re("MM",je,Ut),re("MMM",function(l,h){return h.monthsShortRegex(l)}),re("MMMM",function(l,h){return h.monthsRegex(l)}),Ae(["M","MM"],function(l,h){h[Ir]=B(l)-1}),Ae(["MMM","MMMM"],function(l,h,b,w){var D=b._locale.monthsParse(l,w,b._strict);D==null?I(b).invalidMonth=l:h[Ir]=D});var Vo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ia=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),oe("week","w"),oe("isoWeek","W"),W("week",5),W("isoWeek",5),re("w",je),re("ww",je,Ut),re("W",je),re("WW",je,Ut),ei(["w","ww","W","WW"],function(l,h,b,w){h[w.substr(0,1)]=B(l)}),J("d",0,"do","day"),J("dd",0,0,function(l){return this.localeData().weekdaysMin(this,l)}),J("ddd",0,0,function(l){return this.localeData().weekdaysShort(this,l)}),J("dddd",0,0,function(l){return this.localeData().weekdays(this,l)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),oe("day","d"),oe("weekday","e"),oe("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),re("d",je),re("e",je),re("E",je),re("dd",function(l,h){return h.weekdaysMinRegex(l)}),re("ddd",function(l,h){return h.weekdaysShortRegex(l)}),re("dddd",function(l,h){return h.weekdaysRegex(l)}),ei(["dd","ddd","dddd"],function(l,h,b,w){var D=b._locale.weekdaysParse(l,w,b._strict);D==null?I(b).invalidWeekday=l:h.d=D}),ei(["d","e","E"],function(l,h,b,w){h[w]=B(l)});var Al=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];J("H",["HH",2],0,"hour"),J("h",["hh",2],0,at),J("k",["kk",2],0,function(){return this.hours()||24}),J("hmm",0,0,function(){return""+at.apply(this)+ce(this.minutes(),2)}),J("hmmss",0,0,function(){return""+at.apply(this)+ce(this.minutes(),2)+ce(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+ce(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+ce(this.minutes(),2)+ce(this.seconds(),2)}),Kt("a",!0),Kt("A",!1),oe("hour","h"),W("hour",13),re("a",fi),re("A",fi),re("H",je),re("h",je),re("k",je),re("HH",je,Ut),re("hh",je,Ut),re("kk",je,Ut),re("hmm",Cl),re("hmmss",Sl),re("Hmm",Cl),re("Hmmss",Sl),Ae(["H","HH"],dn),Ae(["k","kk"],function(l,h){var b=B(l);h[dn]=b===24?0:b}),Ae(["a","A"],function(l,h,b){b._isPm=b._locale.isPM(l),b._meridiem=l}),Ae(["h","hh"],function(l,h,b){h[dn]=B(l),I(b).bigHour=!0}),Ae("hmm",function(l,h,b){var w=l.length-2;h[dn]=B(l.substr(0,w)),h[mr]=B(l.substr(w)),I(b).bigHour=!0}),Ae("hmmss",function(l,h,b){var w=l.length-4,D=l.length-2;h[dn]=B(l.substr(0,w)),h[mr]=B(l.substr(w,2)),h[Xr]=B(l.substr(D)),I(b).bigHour=!0}),Ae("Hmm",function(l,h){var b=l.length-2;h[dn]=B(l.substr(0,b)),h[mr]=B(l.substr(b))}),Ae("Hmmss",function(l,h){var b=l.length-4,w=l.length-2;h[dn]=B(l.substr(0,b)),h[mr]=B(l.substr(b,2)),h[Xr]=B(l.substr(w))});var vu=/[ap]\.?m?\.?/i,oh=St("Hours",!0),po={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:rh,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:ia,week:{dow:0,doy:6},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdaysShort:Al,meridiemParse:vu},ht={},yr={},lh=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bu=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_u=/Z|[+-]\d\d(?::?\d\d)?/,ys=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Kr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Os=/^\/?Date\((\-?\d+)/i,Rl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},tr;c.createFromInputFallback=X("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(l){l._d=new Date(l._i+(l._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var gs=X("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ge.apply(null,arguments);return this.isValid()&&l.isValid()?l<this?this:l:P()}),Ga=X("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ge.apply(null,arguments);return this.isValid()&&l.isValid()?l>this?this:l:P()}),qn=["year","quarter","month","week","day","hour","minute","second","millisecond"];ho("Z",":"),ho("ZZ",""),re("Z",ms),re("ZZ",ms),Ae(["Z","ZZ"],function(l,h,b){b._useUTC=!0,b._tzm=xs(ms,l)});var ch=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Eu=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,uh=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;oi.fn=kr.prototype,oi.invalid=function(){return oi(NaN)};var Tu=No(1,"add"),wc=No(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ns=X("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(l){return l===void 0?this.localeData():this.locale(l)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Yr("gggg","weekYear"),Yr("ggggg","weekYear"),Yr("GGGG","isoWeekYear"),Yr("GGGGG","isoWeekYear"),oe("weekYear","gg"),oe("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),re("G",ps),re("g",ps),re("GG",je,Ut),re("gg",je,Ut),re("GGGG",Oa,hs),re("gggg",Oa,hs),re("GGGGG",zr,Rr),re("ggggg",zr,Rr),ei(["gggg","ggggg","GGGG","GGGGG"],function(l,h,b,w){h[w.substr(0,2)]=B(l)}),ei(["gg","GG"],function(l,h,b,w){h[w]=c.parseTwoDigitYear(l)}),J("Q",0,"Qo","quarter"),oe("quarter","Q"),W("quarter",7),re("Q",jr),Ae("Q",function(l,h){h[Ir]=3*(B(l)-1)}),J("D",["DD",2],"Do","date"),oe("date","D"),W("date",9),re("D",je),re("DD",je,Ut),re("Do",function(l,h){return l?h._dayOfMonthOrdinalParse||h._ordinalParse:h._dayOfMonthOrdinalParseLenient}),Ae(["D","DD"],kl),Ae("Do",function(l,h){h[kl]=B(l.match(je)[0])});var gr=St("Date",!0);J("DDD",["DDDD",3],"DDDo","dayOfYear"),oe("dayOfYear","DDD"),W("dayOfYear",4),re("DDD",fs),re("DDDD",Ar),Ae(["DDD","DDDD"],function(l,h,b){b._dayOfYear=B(l)}),J("m",["mm",2],0,"minute"),oe("minute","m"),W("minute",14),re("m",je),re("mm",je,Ut),Ae(["m","mm"],mr);var wu=St("Minutes",!1);J("s",["ss",2],0,"second"),oe("second","s"),W("second",15),re("s",je),re("ss",je,Ut),Ae(["s","ss"],Xr);var Cu=St("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),oe("millisecond","ms"),W("millisecond",16),re("S",fs,jr),re("SS",fs,Ut),re("SSS",fs,Ar);var Vi;for(Vi="SSSS";9>=Vi.length;Vi+="S")re(Vi,gu);for(Vi="S";9>=Vi.length;Vi+="S")Ae(Vi,ih);var dh=St("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var ae=M.prototype;ae.add=Tu,ae.calendar=function(l,h){var b=l||Ge(),w=ls(b,this).startOf("day"),D=c.calendarFormat(this,w)||"sameElse",G=h&&(ue(h[D])?h[D].call(this,b):h[D]);return this.format(G||this.localeData().calendar(D,this,Ge(b)))},ae.clone=function(){return new M(this)},ae.diff=function(l,h,b){var w,D,G;return this.isValid()?(w=ls(l,this),w.isValid()?(D=6e4*(w.utcOffset()-this.utcOffset()),h=Q(h),G=h==="year"?qr(this,w)/12:h==="month"?qr(this,w):h==="quarter"?qr(this,w)/3:h==="second"?(this-w)/1e3:h==="minute"?(this-w)/6e4:h==="hour"?(this-w)/36e5:h==="day"?(this-w-D)/864e5:h==="week"?(this-w-D)/6048e5:this-w,b?G:$(G)):NaN):NaN},ae.endOf=function(l){var h;if(l=Q(l),l===void 0||l==="millisecond"||!this.isValid())return this;var b=this._isUTC?Bo:Lo;return l==="year"?h=b(this.year()+1,0,1)-1:l==="quarter"?h=b(this.year(),this.month()-this.month()%3+3,1)-1:l==="month"?h=b(this.year(),this.month()+1,1)-1:l==="week"?h=b(this.year(),this.month(),this.date()-this.weekday()+7)-1:l==="isoWeek"?h=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1:l==="day"||l==="date"?h=b(this.year(),this.month(),this.date()+1)-1:l==="hour"?(h=this._d.valueOf(),h+=36e5-gn(h+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1):l==="minute"?(h=this._d.valueOf(),h+=6e4-gn(h,6e4)-1):l==="second"&&(h=this._d.valueOf(),h+=1e3-gn(h,1e3)-1),this._d.setTime(h),c.updateOffset(this,!0),this},ae.format=function(l){l||(l=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var h=fe(this,l);return this.localeData().postformat(h)},ae.from=function(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ge(l).isValid())?oi({to:this,from:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()},ae.fromNow=function(l){return this.from(Ge(),l)},ae.to=function(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ge(l).isValid())?oi({from:this,to:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()},ae.toNow=function(l){return this.to(Ge(),l)},ae.get=function(l){return l=Q(l),ue(this[l])?this[l]():this},ae.invalidAt=function(){return I(this).overflow},ae.isAfter=function(l,h){var b=q(l)?l:Ge(l);return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(h).valueOf())},ae.isBefore=function(l,h){var b=q(l)?l:Ge(l);return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()<b.valueOf():this.clone().endOf(h).valueOf()<b.valueOf())},ae.isBetween=function(l,h,b,w){var D=q(l)?l:Ge(l),G=q(h)?h:Ge(h);return!!(this.isValid()&&D.isValid()&&G.isValid())&&(w=w||"()",(w[0]==="("?this.isAfter(D,b):!this.isBefore(D,b))&&(w[1]===")"?this.isBefore(G,b):!this.isAfter(G,b)))},ae.isSame=function(l,h){var b=q(l)?l:Ge(l),w;return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()===b.valueOf():(w=b.valueOf(),this.clone().startOf(h).valueOf()<=w&&w<=this.clone().endOf(h).valueOf()))},ae.isSameOrAfter=function(l,h){return this.isSame(l,h)||this.isAfter(l,h)},ae.isSameOrBefore=function(l,h){return this.isSame(l,h)||this.isBefore(l,h)},ae.isValid=function(){return F(this)},ae.lang=Ns,ae.locale=fo,ae.localeData=Uo,ae.max=Ga,ae.min=gs,ae.parsingFlags=function(){return k({},I(this))},ae.set=qe,ae.startOf=function(l){var h;if(l=Q(l),l===void 0||l==="millisecond"||!this.isValid())return this;var b=this._isUTC?Bo:Lo;return l==="year"?h=b(this.year(),0,1):l==="quarter"?h=b(this.year(),this.month()-this.month()%3,1):l==="month"?h=b(this.year(),this.month(),1):l==="week"?h=b(this.year(),this.month(),this.date()-this.weekday()):l==="isoWeek"?h=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)):l==="day"||l==="date"?h=b(this.year(),this.month(),this.date()):l==="hour"?(h=this._d.valueOf(),h-=gn(h+(this._isUTC?0:6e4*this.utcOffset()),36e5)):l==="minute"?(h=this._d.valueOf(),h-=gn(h,6e4)):l==="second"&&(h=this._d.valueOf(),h-=gn(h,1e3)),this._d.setTime(h),c.updateOffset(this,!0),this},ae.subtract=wc,ae.toArray=function(){var l=this;return[l.year(),l.month(),l.date(),l.hour(),l.minute(),l.second(),l.millisecond()]},ae.toObject=function(){var l=this;return{years:l.year(),months:l.month(),date:l.date(),hours:l.hours(),minutes:l.minutes(),seconds:l.seconds(),milliseconds:l.milliseconds()}},ae.toDate=function(){return new Date(this.valueOf())},ae.toISOString=function(l){if(!this.isValid())return null;var h=l!==!0,b=h?this.clone().utc():this;return 0>b.year()||9999<b.year()?fe(b,h?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ue(Date.prototype.toISOString)?h?this.toDate().toISOString():new Date(this.valueOf()+1e3*(60*this.utcOffset())).toISOString().replace("Z",fe(b,"Z")):fe(b,h?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ae.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var l="moment",h="";this.isLocal()||(l=this.utcOffset()===0?"moment.utc":"moment.parseZone",h="Z");var b="["+l+'("]',w=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",D=h+'[")]';return this.format(b+w+"-MM-DD[T]HH:mm:ss.SSS"+D)},ae.toJSON=function(){return this.isValid()?this.toISOString():null},ae.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ae.unix=function(){return a(this.valueOf()/1e3)},ae.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ae.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ae.year=Hi,ae.isLeapYear=function(){return It(this.year())},ae.weekYear=function(l){return Fo.call(this,l,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ae.isoWeekYear=function(l){return Fo.call(this,l,this.isoWeek(),this.isoWeekday(),1,4)},ae.quarter=ae.quarters=function(l){return l==null?o((this.month()+1)/3):this.month(3*(l-1)+this.month()%3)},ae.month=wi,ae.daysInMonth=function(){return ot(this.year(),this.month())},ae.week=ae.weeks=function(l){var h=this.localeData().week(this);return l==null?h:this.add(7*(l-h),"d")},ae.isoWeek=ae.isoWeeks=function(l){var h=Xt(this,1,4).week;return l==null?h:this.add(7*(l-h),"d")},ae.weeksInYear=function(){var l=this.localeData()._week;return dt(this.year(),l.dow,l.doy)},ae.isoWeeksInYear=function(){return dt(this.year(),1,4)},ae.date=gr,ae.day=ae.days=function(l){if(!this.isValid())return l==null?NaN:this;var h=this._isUTC?this._d.getUTCDay():this._d.getDay();return l==null?h:(l=Ot(l,this.localeData()),this.add(l-h,"d"))},ae.weekday=function(l){if(!this.isValid())return l==null?NaN:this;var h=(this.day()+7-this.localeData()._week.dow)%7;return l==null?h:this.add(l-h,"d")},ae.isoWeekday=function(l){if(!this.isValid())return l==null?NaN:this;if(l!=null){var h=ge(l,this.localeData());return this.day(this.day()%7?h:h-7)}return this.day()||7},ae.dayOfYear=function(l){var h=e((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return l==null?h:this.add(l-h,"d")},ae.hour=ae.hours=oh,ae.minute=ae.minutes=wu,ae.second=ae.seconds=Cu,ae.millisecond=ae.milliseconds=dh,ae.utcOffset=function(l,h,b){var w=this._offset||0,D;if(!this.isValid())return l==null?NaN:this;if(l!=null){if(typeof l!="string")16>r(l)&&!b&&(l*=60);else if(l=xs(ms,l),l===null)return this;return!this._isUTC&&h&&(D=cs(this)),this._offset=l,this._isUTC=!0,D!=null&&this.add(D,"m"),w!==l&&(!h||this._changeInProgress?Go(this,oi(l-w,"m"),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?w:cs(this)},ae.utc=function(l){return this.utcOffset(0,l)},ae.local=function(l){return this._isUTC&&(this.utcOffset(0,l),this._isUTC=!1,l&&this.subtract(cs(this),"m")),this},ae.parseZone=function(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var l=xs(sh,this._i);l==null?this.utcOffset(0,!0):this.utcOffset(l)}return this},ae.hasAlignedHourOffset=function(l){return!!this.isValid()&&(l=l?Ge(l).utcOffset():0,(this.utcOffset()-l)%60==0)},ae.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ae.isLocal=function(){return!!this.isValid()&&!this._isUTC},ae.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ae.isUtc=bt,ae.isUTC=bt,ae.zoneAbbr=function(){return this._isUTC?"UTC":""},ae.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ae.dates=X("dates accessor is deprecated. Use date instead.",gr),ae.months=X("months accessor is deprecated. Use month instead",wi),ae.years=X("years accessor is deprecated. Use year instead",Hi),ae.zone=X("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(l,h){return l==null?-this.utcOffset():(typeof l!="string"&&(l=-l),this.utcOffset(l,h),this)}),ae.isDSTShifted=X("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mu);var ze=de.prototype;ze.calendar=function(l,h,b){var w=this._calendar[l]||this._calendar.sameElse;return ue(w)?w.call(h,b):w},ze.longDateFormat=function(l){var h=this._longDateFormat[l],b=this._longDateFormat[l.toUpperCase()];return h||!b?h:(this._longDateFormat[l]=b.replace(/MMMM|MM|DD|dddd/g,function(w){return w.slice(1)}),this._longDateFormat[l])},ze.invalidDate=function(){return this._invalidDate},ze.ordinal=function(l){return this._ordinal.replace("%d",l)},ze.preparse=$o,ze.postformat=$o,ze.relativeTime=function(l,h,b,w){var D=this._relativeTime[b];return ue(D)?D(l,h,b,w):D.replace(/%d/i,l)},ze.pastFuture=function(l,h){var b=this._relativeTime[0<l?"future":"past"];return ue(b)?b(h):b.replace(/%s/i,h)},ze.set=ve,ze.months=function(l,h){return l?d(this._months)?this._months[l.month()]:this._months[(this._months.isFormat||Vo).test(h)?"format":"standalone"][l.month()]:d(this._months)?this._months:this._months.standalone},ze.monthsShort=function(l,h){return l?d(this._monthsShort)?this._monthsShort[l.month()]:this._monthsShort[Vo.test(h)?"format":"standalone"][l.month()]:d(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ze.monthsParse=yi,ze.monthsRegex=function(l){return this._monthsParseExact?(S(this,"_monthsRegex")||hi.call(this),l?this._monthsStrictRegex:this._monthsRegex):(S(this,"_monthsRegex")||(this._monthsRegex=er),this._monthsStrictRegex&&l?this._monthsStrictRegex:this._monthsRegex)},ze.monthsShortRegex=function(l){return this._monthsParseExact?(S(this,"_monthsRegex")||hi.call(this),l?this._monthsShortStrictRegex:this._monthsShortRegex):(S(this,"_monthsShortRegex")||(this._monthsShortRegex=er),this._monthsShortStrictRegex&&l?this._monthsShortStrictRegex:this._monthsShortRegex)},ze.week=function(l){return Xt(l,this._week.dow,this._week.doy).week},ze.firstDayOfYear=function(){return this._week.doy},ze.firstDayOfWeek=function(){return this._week.dow},ze.weekdays=function(l,h){var b=d(this._weekdays)?this._weekdays:this._weekdays[l&&l!==!0&&this._weekdays.isFormat.test(h)?"format":"standalone"];return l===!0?Oe(b,this._week.dow):l?b[l.day()]:b},ze.weekdaysMin=function(l){return l===!0?Oe(this._weekdaysMin,this._week.dow):l?this._weekdaysMin[l.day()]:this._weekdaysMin},ze.weekdaysShort=function(l){return l===!0?Oe(this._weekdaysShort,this._week.dow):l?this._weekdaysShort[l.day()]:this._weekdaysShort},ze.weekdaysParse=ct,ze.weekdaysRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysStrictRegex:this._weekdaysRegex):(S(this,"_weekdaysRegex")||(this._weekdaysRegex=er),this._weekdaysStrictRegex&&l?this._weekdaysStrictRegex:this._weekdaysRegex)},ze.weekdaysShortRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(S(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=er),this._weekdaysShortStrictRegex&&l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ze.weekdaysMinRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(S(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=er),this._weekdaysMinStrictRegex&&l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ze.isPM=function(l){return(l+"").toLowerCase().charAt(0)==="p"},ze.meridiem=function(l,h,b){return 11<l?b?"pm":"PM":b?"am":"AM"},Zi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(l){var h=l%10,b=B(l%100/10)===1?"th":h==1?"st":h==2?"nd":h==3?"rd":"th";return l+b}}),c.lang=X("moment.lang is deprecated. Use moment.locale instead.",Zi),c.langData=X("moment.langData is deprecated. Use moment.localeData instead.",Oi);var Ri=r,qo=Pi("ms"),Su=Pi("s"),ku=Pi("m"),Cc=Pi("h"),Il=Pi("d"),Au=Pi("w"),Dl=Pi("M"),Zr=Pi("Q"),Ru=Pi("y"),Sc=un("milliseconds"),kc=un("seconds"),Iu=un("minutes"),Du=un("hours"),Ac=un("days"),hh=un("months"),fh=un("years"),qi=e,Qt={ss:44,s:45,m:45,h:22,d:26,M:11},Dr=r,Pe=kr.prototype;return Pe.isValid=function(){return this._isValid},Pe.abs=function(){var l=this._data;return this._milliseconds=Ri(this._milliseconds),this._days=Ri(this._days),this._months=Ri(this._months),l.milliseconds=Ri(l.milliseconds),l.seconds=Ri(l.seconds),l.minutes=Ri(l.minutes),l.hours=Ri(l.hours),l.months=Ri(l.months),l.years=Ri(l.years),this},Pe.add=function(l,h){return Da(this,l,h,1)},Pe.subtract=function(l,h){return Da(this,l,h,-1)},Pe.as=function(l){if(!this.isValid())return NaN;var h=this._milliseconds,b,w;if(l=Q(l),l==="month"||l==="quarter"||l==="year")switch(b=this._days+h/864e5,w=this._months+El(b),l){case"month":return w;case"quarter":return w/3;case"year":return w/12}else switch(b=this._days+e(xa(this._months)),l){case"week":return b/7+h/6048e5;case"day":return b+h/864e5;case"hour":return 24*b+h/36e5;case"minute":return 1440*b+h/6e4;case"second":return 86400*b+h/1e3;case"millisecond":return a(864e5*b)+h;default:throw new Error("Unknown unit "+l)}},Pe.asMilliseconds=qo,Pe.asSeconds=Su,Pe.asMinutes=ku,Pe.asHours=Cc,Pe.asDays=Il,Pe.asWeeks=Au,Pe.asMonths=Dl,Pe.asQuarters=Zr,Pe.asYears=Ru,Pe.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*B(this._months/12):NaN},Pe._bubble=function(){var l=this._milliseconds,h=this._days,b=this._months,w=this._data,D,G,te,Te,Ne;return 0<=l&&0<=h&&0<=b||0>=l&&0>=h&&0>=b||(l+=864e5*Js(xa(b)+h),h=0,b=0),w.milliseconds=l%1e3,D=$(l/1e3),w.seconds=D%60,G=$(D/60),w.minutes=G%60,te=$(G/60),w.hours=te%24,h+=$(te/24),Ne=$(El(h)),b+=Ne,h-=Js(xa(Ne)),Te=$(b/12),b%=12,w.days=h,w.months=b,w.years=Te,this},Pe.clone=function(){return oi(this)},Pe.get=function(l){return l=Q(l),this.isValid()?this[l+"s"]():NaN},Pe.milliseconds=Sc,Pe.seconds=kc,Pe.minutes=Iu,Pe.hours=Du,Pe.days=Ac,Pe.weeks=function(){return $(this.days()/7)},Pe.months=hh,Pe.years=fh,Pe.humanize=function(l){if(!this.isValid())return this.localeData().invalidDate();var h=this.localeData(),b=yu(this,!l,h);return l&&(b=h.pastFuture(+this,b)),h.postformat(b)},Pe.toISOString=Wr,Pe.toString=Wr,Pe.toJSON=Wr,Pe.locale=fo,Pe.localeData=Uo,Pe.toIsoString=X("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Wr),Pe.lang=Ns,J("X",0,0,"unix"),J("x",0,0,"valueOf"),re("x",ps),re("X",ah),Ae("X",function(l,h,b){b._d=new Date(1e3*parseFloat(l,10))}),Ae("x",function(l,h,b){b._d=new Date(B(l))}),c.version="2.24.0",function(l){Ma=l}(Ge),c.fn=ae,c.min=function(){var l=[].slice.call(arguments,0);return os("isBefore",l)},c.max=function(){var l=[].slice.call(arguments,0);return os("isAfter",l)},c.now=function(){return Date.now?Date.now():+new Date},c.utc=R,c.unix=function(l){return Ge(1e3*l)},c.months=function(l,h){return _l(l,h,"months")},c.isDate=E,c.locale=Zi,c.invalid=P,c.duration=oi,c.isMoment=q,c.weekdays=function(l,h,b){return Ia(l,h,b,"weekdays")},c.parseZone=function(){return Ge.apply(null,arguments).parseZone()},c.localeData=Oi,c.isDuration=xe,c.monthsShort=function(l,h){return _l(l,h,"monthsShort")},c.weekdaysMin=function(l,h,b){return Ia(l,h,b,"weekdaysMin")},c.defineLocale=ka,c.updateLocale=function(l,h){if(h!=null){var b=po,w,D;D=dr(l),D!=null&&(b=D._config),h=_e(b,h),w=new de(h),w.parentLocale=ht[l],ht[l]=w,Zi(l)}else ht[l]!=null&&(ht[l].parentLocale==null?ht[l]!=null&&delete ht[l]:ht[l]=ht[l].parentLocale);return ht[l]},c.locales=Xd,c.weekdaysShort=function(l,h,b){return Ia(l,h,b,"weekdaysShort")},c.normalizeUnits=Q,c.relativeTimeRounding=nh,c.relativeTimeThreshold=function(l,h){return Qt[l]!==void 0&&(h===void 0?Qt[l]:(Qt[l]=h,l==="s"&&(Qt.ss=h-1),!0))},c.calendarFormat=function(l,h){var b=l.diff(h,"days",!0);return-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse"},c.prototype=ae,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},c})}),iL=[],M_=0;256>M_;M_++)iL[M_]=(M_+256).toString(16).substr(1);function H7(t,e){var i=0,n=iL;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}for(var nL=function(){if(typeof crypto<"u"&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var e=Array(16);return function(){for(var i=0,n;16>i;i++)!(3&i)&&(n=4294967296*Math.random()),e[i]=255&n>>>((3&i)<<3);return e}}(),V7=[],P_=0;256>P_;P_++)V7[P_]=(P_+256).toString(16).substr(1);var Ku=nL();1|Ku[0],Ku[1],Ku[2],Ku[3],Ku[4],Ku[5];16383&(Ku[6]<<8|Ku[7]);function q7(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0,n=e&&i||0;typeof t=="string"&&(e=t==="binary"?Array(16):void 0,t={});var r=t.random||(t.rng||nL)();if(r[6]=64|15&r[6],r[8]=128|63&r[8],e)for(var s=0;16>s;s++)e[n+s]=r[s];return e||H7(r)}function _M(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i}function Y7(t){for(var e=1,i;e<arguments.length;e++)i=arguments[e]==null?{}:arguments[e],e%2?_M(i,!0).forEach(function(n){x7(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):_M(i).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))});return t}var _g=/^\/?Date\((-?\d+)/i,W7=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,j7=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;function jp(t){return t instanceof Number||typeof t=="number"}function rL(t){if(t)for(;t.hasChildNodes()===!0;){var e=t.firstChild;e&&(rL(e),t.removeChild(e))}}function Ja(t){return t instanceof String||typeof t=="string"}function XC(t){return Nd(t)==="object"&&t!==null}function z7(t){if(t instanceof Date)return!0;if(Ja(t)){var e=_g.exec(t);if(e||!isNaN(Date.parse(t)))return!0}return!1}function Eg(t){return Gc.isMoment(t)}function pf(t,e,i,n){var r=!1;n===!0&&(r=e[i]===null&&t[i]!==void 0),r?delete t[i]:t[i]=e[i]}function sL(t,e){var i=2<arguments.length&&arguments[2]!==void 0&&arguments[2];for(var n in t)if(e[n]!==void 0)if(e[n]===null||Nd(e[n])!=="object")pf(t,e,n,i);else{var r=t[n],s=e[n];XC(r)&&XC(s)&&sL(r,s,i)}}var X7=Object.assign;function K7(t,e){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var i=2,n;i<(2>=arguments.length?0:arguments.length-2);i++){n=2>i+2||arguments.length<=i+2?void 0:arguments[i+2];for(var r=0,s;r<t.length;r++)s=t[r],n&&Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}function Z7(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0,s;r<t.length;r++)if(s=t[r],Object.prototype.hasOwnProperty.call(i,s))if(i[s]&&i[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?sT(e[s],i[s],!1,n):pf(e,i,s,n);else{if(Array.isArray(i[s]))throw new TypeError("Arrays are not supported by deepExtend");pf(e,i,s,n)}return e}function Q7(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&t.indexOf(r)===-1)if(i[r]&&i[r].constructor===Object)e[r]===void 0&&(e[r]={}),e[r].constructor===Object?sT(e[r],i[r]):pf(e,i,r,n);else if(Array.isArray(i[r])){e[r]=[];for(var s=0;s<i[r].length;s++)e[r].push(i[r][s])}else pf(e,i,r,n);return e}function sT(t,e){var i=2<arguments.length&&arguments[2]!==void 0&&arguments[2],n=3<arguments.length&&arguments[3]!==void 0&&arguments[3];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)||i===!0)if(e[r]&&e[r].constructor===Object)t[r]===void 0&&(t[r]={}),t[r].constructor===Object?sT(t[r],e[r],i):pf(t,e,r,n);else if(Array.isArray(e[r])){t[r]=[];for(var s=0;s<e[r].length;s++)t[r].push(e[r][s])}else pf(t,e,r,n);return t}function J7(t,e){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0}function eX(t,e){var i;if(t!==void 0){if(t===null)return null;if(!e)return t;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!t;case"number":case"Number":return Ja(t)&&!isNaN(Date.parse(t))?Gc(t).valueOf():+t.valueOf();case"string":case"String":return t+"";case"Date":if(jp(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(Eg(t))return new Date(t.valueOf());if(Ja(t))return i=_g.exec(t),i?new Date(+i[1]):Gc(new Date(t)).toDate();throw new Error("Cannot convert object of type "+Tg(t)+" to type Date");case"Moment":if(jp(t))return Gc(t);if(t instanceof Date)return Gc(t.valueOf());if(Eg(t))return Gc(t);if(Ja(t))return i=_g.exec(t),Gc(i?+i[1]:t);throw new Error("Cannot convert object of type "+Tg(t)+" to type Date");case"ISODate":if(jp(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(Eg(t))return t.toDate().toISOString();if(Ja(t))return i=_g.exec(t),i?new Date(+i[1]).toISOString():Gc(t).format();throw new Error("Cannot convert object of type "+Tg(t)+" to type ISODate");case"ASPDate":if(jp(t))return"/Date("+t+")/";if(t instanceof Date||Eg(t))return"/Date("+t.valueOf()+")/";if(Ja(t)){i=_g.exec(t);var n;return n=i?new Date(+i[1]).valueOf():new Date(t).valueOf(),"/Date("+n+")/"}throw new Error("Cannot convert object of type "+Tg(t)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function Tg(t){var e=Nd(t);return e==="object"?t===null?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function tX(t,e){return[].concat(B7(t),[e])}function iX(t){return t.slice()}function nX(t){return t.getBoundingClientRect().left}function rX(t){return t.getBoundingClientRect().right}function sX(t){return t.getBoundingClientRect().top}function aX(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.concat(n.filter(function(r){return 0>i.indexOf(r)})),t.className=i.join(" ")}function oX(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.filter(function(r){return 0>n.indexOf(r)}),t.className=i.join(" ")}function lX(t,e){if(Array.isArray(t))for(var i=t.length,n=0;n<i;n++)e(t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}var cX=Object.values;function uX(t,e,i){return t[e]!==i&&(t[e]=i,!0)}function dX(t){var e=!1;return function(){e||(e=!0,requestAnimationFrame(function(){e=!1,t()}))}}function hX(t,e,i,n){t.addEventListener?(n===void 0&&(n=!1),e==="mousewheel"&&0<=navigator.userAgent.indexOf("Firefox")&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)}function fX(t,e,i,n){t.removeEventListener?(n===void 0&&(n=!1),e==="mousewheel"&&0<=navigator.userAgent.indexOf("Firefox")&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)}function pX(t){t||(t=window.event),!t||(t.preventDefault?t.preventDefault():t.returnValue=!1)}function mX(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:window.event,e=null;return t&&(t.target?e=t.target:t.srcElement&&(e=t.srcElement)),e instanceof Element?e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e:null}function yX(t,e){for(var i=t;i;){if(i===e)return!0;if(i.parentNode)i=i.parentNode;else return!1}return!1}var gX={asBoolean:function(t,e){return typeof t=="function"&&(t=t()),t==null?e||null:t!=!1},asNumber:function(t,e){return typeof t=="function"&&(t=t()),t==null?e||null:+t||e||null},asString:function(t,e){return typeof t=="function"&&(t=t()),t==null?e||null:t+""},asSize:function(t,e){return typeof t=="function"&&(t=t()),Ja(t)?t:jp(t)?t+"px":e||null},asElement:function(t,e){return typeof t=="function"&&(t=t()),t||e||null}};function nA(t){var e;switch(t.length){case 3:case 4:return e=j7.exec(t),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=W7.exec(t),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}function vX(t,e){if(t.indexOf("rgba")!==-1)return t;if(t.indexOf("rgb")!==-1){var i=t.substr(t.indexOf("(")+1).replace(")","").split(",");return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"}var n=nA(t);return n==null?t:"rgba("+n.r+","+n.g+","+n.b+","+e+")"}function rA(t,e,i){return"#"+(16777216+(t<<16)+(e<<8)+i).toString(16).slice(1)}function bX(t,e){var i=Math.min;if(Ja(t)){var n=t;if(uL(n)){var r=n.substr(4).substr(0,n.length-5).split(",").map(function(y){return parseInt(y)});n=rA(r[0],r[1],r[2])}if(cL(n)===!0){var s=lL(n),a={h:s.h,s:.8*s.s,v:i(1,1.02*s.v)},o={h:s.h,s:i(1,1.25*s.s),v:.8*s.v},c=KC(o.h,o.s,o.v),d=KC(a.h,a.s,a.v);return{background:n,border:c,highlight:{background:d,border:c},hover:{background:d,border:c}}}return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}}}if(e){var p={background:t.background||e.background,border:t.border||e.border,highlight:Ja(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:Ja(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}};return p}var m={background:t.background||void 0,border:t.border||void 0,highlight:Ja(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:Ja(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}};return m}function aL(t,e,i){var n=Math.max,r=Math.min;t/=255,e/=255,i/=255;var s=r(t,r(e,i)),a=n(t,n(e,i));if(s===a)return{h:0,s:0,v:s};var o=t===s?e-i:i===s?t-e:i-t,c=t===s?3:i===s?1:5;return{h:60*(c-o/(a-s))/360,s:(a-s)/a,v:a}}var rm={split:function(t){var e={};return t.split(";").forEach(function(i){if(i.trim()!=""){var n=i.split(":"),r=n[0].trim(),s=n[1].trim();e[r]=s}}),e},join:function(t){return Object.keys(t).map(function(e){return e+": "+t[e]}).join("; ")}};function _X(t,e){var i=rm.split(t.style.cssText),n=rm.split(e),r=Y7({},i,{},n);t.style.cssText=rm.join(r)}function EX(t,e){var i=rm.split(t.style.cssText),n=rm.split(e);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&delete i[r];t.style.cssText=rm.join(i)}function oL(t,e,i){var n=Math.floor,r=n(6*t),s=6*t-r,a=i*(1-e),o=i*(1-s*e),c=i*(1-(1-s)*e),d,p,m;switch(r%6){case 0:d=i,p=c,m=a;break;case 1:d=o,p=i,m=a;break;case 2:d=a,p=i,m=c;break;case 3:d=a,p=o,m=i;break;case 4:d=c,p=a,m=i;break;case 5:d=i,p=a,m=o}return{r:n(255*d),g:n(255*p),b:n(255*m)}}function KC(t,e,i){var n=oL(t,e,i);return rA(n.r,n.g,n.b)}function lL(t){var e=nA(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return aL(e.r,e.g,e.b)}function cL(t){var e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return e}function uL(t){t=t.replace(" ","");var e=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(t);return e}function TX(t){t=t.replace(" ","");var e=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(0?.{1,3})\)/i.test(t);return e}function wX(t,e){if(e!==null&&Nd(e)==="object"){for(var i=Object.create(e),n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(e,t[n])&&Nd(e[t[n]])=="object"&&(i[t[n]]=sA(e[t[n]]));return i}return null}function sA(t){if(t===null||Nd(t)!=="object")return null;if(t instanceof Element)return t;var e=Object.create(t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&Nd(t[i])=="object"&&(e[i]=sA(t[i]));return e}function CX(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=void 0;for(r=i;0<r&&0>e(n,t[r-1]);r--)t[r]=t[r-1];t[r]=n}return t}function SX(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},r=function(y){return y!=null},s=function(y){return y!==null&&Nd(y)==="object"};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!r(i))throw new Error("Parameter option must have a value");if(!s(n))throw new Error("Parameter globalOptions must be an object");var a=function(y,_,E){s(y[E])||(y[E]={});var C=_[E],S=y[E];for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&(S[k]=C[k])},o=e[i],c=s(n)&&!function(y){for(var _ in y)if(Object.prototype.hasOwnProperty.call(y,_))return!1;return!0}(n),d=c?n[i]:void 0,p=d?d.enabled:void 0;if(o!==void 0){if(typeof o=="boolean")return s(t[i])||(t[i]={}),void(t[i].enabled=o);if(o===null&&!s(t[i]))if(r(d))t[i]=Object.create(d);else return;if(s(o)){var m=!0;o.enabled===void 0?p!==void 0&&(m=d.enabled):m=o.enabled,a(t,e,i),t[i].enabled=m}}}function kX(t,e,i,n){for(var r=0,s=0,a=t.length-1;s<=a&&r<1e4;){var o=Math.floor((s+a)/2),c=t[o],d=n===void 0?c[i]:c[i][n],p=e(d);if(p==0)return o;p==-1?s=o+1:a=o-1,r++}return-1}function AX(t,e,i,n,r){var s=Math.max,a=Math.min,o=Math.floor,c=0,d=0,p=t.length-1,m,y,_,E;for(r=r??function(C,S){return C==S?0:C<S?-1:1};d<=p&&1e4>c;){if(E=o(.5*(p+d)),m=t[s(0,E-1)][i],y=t[E][i],_=t[a(t.length-1,E+1)][i],r(y,e)==0)return E;if(0>r(m,e)&&0<r(y,e))return n=="before"?s(0,E-1):E;if(0>r(y,e)&&0<r(_,e))return n=="before"?E:a(t.length-1,E+1);0>r(y,e)?d=E+1:p=E-1,c++}return-1}var RX={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return .5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return .5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return .5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return .5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function IX(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;return i==n&&(n=e.clientWidth),document.body.removeChild(e),i-n}function DX(t,e){var i;Array.isArray(e)||(e=[e]);var n=!0,r=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o,c;!(n=(o=a.next()).done);n=!0)if(c=o.value,c){i=c[e[0]];for(var d=1;d<e.length;d++)i&&(i=i[e[d]]);if(typeof i<"u")break}}catch(p){r=!0,s=p}finally{try{n||a.return==null||a.return()}finally{if(r)throw s}}return i}var we=Object.freeze({isNumber:jp,recursiveDOMDelete:rL,isString:Ja,isObject:XC,isDate:z7,isMoment:Eg,fillIfDefined:sL,extend:X7,selectiveExtend:K7,selectiveDeepExtend:Z7,selectiveNotDeepExtend:Q7,deepExtend:sT,equalArray:J7,convert:eX,getType:Tg,copyAndExtendArray:tX,copyArray:iX,getAbsoluteLeft:nX,getAbsoluteRight:rX,getAbsoluteTop:sX,addClassName:aX,removeClassName:oX,forEach:lX,toArray:cX,updateProperty:uX,throttle:dX,addEventListener:hX,removeEventListener:fX,preventDefault:pX,getTarget:mX,hasParent:yX,option:gX,hexToRGB:nA,overrideOpacity:vX,RGBToHex:rA,parseColor:bX,RGBToHSV:aL,addCssText:_X,removeCssText:EX,HSVToRGB:oL,HSVToHex:KC,hexToHSV:lL,isValidHex:cL,isValidRGB:uL,isValidRGBA:TX,selectiveBridgeObject:wX,bridgeObject:sA,insertSort:CX,mergeOptions:SX,binarySearchCustom:kX,binarySearchValue:AX,easingFunctions:RX,getScrollBarWidth:IX,topMost:DX,randomUUID:q7});function xX(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var MX=xX;function aA(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Gp=aA(function(t){function e(n){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e(n)}function i(n){return t.exports=typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?i=function(r){return e(r)}:i=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":e(r)},i(n)}t.exports=i});function PX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var aT=PX;function EM(t,e){for(var i=0,n;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function OX(t,e,i){return e&&EM(t.prototype,e),i&&EM(t,i),t}var oT=OX;function NX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var dL=NX;function GX(t,e){return e&&(Gp(e)==="object"||typeof e=="function")?e:dL(t)}var hL=GX,fL=aA(function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},e(i)}t.exports=e}),UX=aA(function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},e(i,n)}t.exports=e});function LX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&UX(t,e)}for(var pL=LX,mL=[],O_=0;256>O_;O_++)mL[O_]=(O_+256).toString(16).substr(1);function BX(t,e){var i=0,n=mL;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}for(var yL=function(){if(typeof crypto<"u"&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var e=Array(16);return function(){for(var i=0,n;16>i;i++)!(3&i)&&(n=4294967296*Math.random()),e[i]=255&n>>>((3&i)<<3);return e}}(),FX=[],N_=0;256>N_;N_++)FX[N_]=(N_+256).toString(16).substr(1);var Zu=yL();1|Zu[0],Zu[1],Zu[2],Zu[3],Zu[4],Zu[5];16383&(Zu[6]<<8|Zu[7]);function $X(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0,n=e&&i||0;typeof t=="string"&&(e=t==="binary"?Array(16):void 0,t={});var r=t.random||(t.rng||yL)();if(r[6]=64|15&r[6],r[8]=128|63&r[8],e)for(var s=0;16>s;s++)e[n+s]=r[s];return e||BX(r)}function ZC(t){return ZC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZC(t)}var HX=typeof globalThis>"u"?typeof window>"u"?typeof global>"u"?typeof self>"u"?{}:self:global:window:globalThis;function VX(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function qX(t,e){return e={exports:{}},t(e,e.exports),e.exports}for(var Uc=qX(function(t){var e=Math.round,i=Math.pow,n=Math.max,r=Math.abs,s=Math.min,a=Math.floor,o=Math.ceil;(function(c,d){t.exports=d()})(HX,function(){function c(){return Ma.apply(null,arguments)}function d(l){return l instanceof Array||Object.prototype.toString.call(l)==="[object Array]"}function p(l){return l!=null&&Object.prototype.toString.call(l)==="[object Object]"}function m(l){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(l).length===0;for(var h in l)if(l.hasOwnProperty(h))return!1;return!0}function y(l){return l===void 0}function _(l){return typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]"}function E(l){return l instanceof Date||Object.prototype.toString.call(l)==="[object Date]"}function C(l,h){var b=[],w;for(w=0;w<l.length;++w)b.push(h(l[w],w));return b}function S(l,h){return Object.prototype.hasOwnProperty.call(l,h)}function k(l,h){for(var b in h)S(h,b)&&(l[b]=h[b]);return S(h,"toString")&&(l.toString=h.toString),S(h,"valueOf")&&(l.valueOf=h.valueOf),l}function R(l,h,b,w){return fr(l,h,b,w,!0).utc()}function O(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function I(l){return l._pf==null&&(l._pf=O()),l._pf}function F(l){if(l._isValid==null){var h=I(l),b=Pa.call(h.parsedDateParts,function(D){return D!=null}),w=!isNaN(l._d.getTime())&&0>h.overflow&&!h.empty&&!h.invalidMonth&&!h.invalidWeekday&&!h.weekdayMismatch&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&b);if(l._strict&&(w=w&&h.charsLeftOver===0&&h.unusedTokens.length===0&&h.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(l))l._isValid=w;else return w}return l._isValid}function P(l){var h=R(NaN);return l==null?I(h).userInvalidated=!0:k(I(h),l),h}function x(l,h){var b,w,D;if(y(h._isAMomentObject)||(l._isAMomentObject=h._isAMomentObject),y(h._i)||(l._i=h._i),y(h._f)||(l._f=h._f),y(h._l)||(l._l=h._l),y(h._strict)||(l._strict=h._strict),y(h._tzm)||(l._tzm=h._tzm),y(h._isUTC)||(l._isUTC=h._isUTC),y(h._offset)||(l._offset=h._offset),y(h._pf)||(l._pf=I(h)),y(h._locale)||(l._locale=h._locale),0<Ms.length)for(b=0;b<Ms.length;b++)w=Ms[b],D=h[w],y(D)||(l[w]=D);return l}function M(l){x(this,l),this._d=new Date(l._d==null?NaN:l._d.getTime()),this.isValid()||(this._d=new Date(NaN)),ea===!1&&(ea=!0,c.updateOffset(this),ea=!1)}function q(l){return l instanceof M||l!=null&&l._isAMomentObject!=null}function $(l){return 0>l?o(l)||0:a(l)}function B(l){var h=+l,b=0;return h!=0&&isFinite(h)&&(b=$(h)),b}function j(l,h,b){var w=s(l.length,h.length),D=r(l.length-h.length),G=0,te;for(te=0;te<w;te++)(b&&l[te]!==h[te]||!b&&B(l[te])!==B(h[te]))&&G++;return G+D}function z(l){c.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+l)}function X(l,h){var b=!0;return k(function(){if(c.deprecationHandler!=null&&c.deprecationHandler(null,l),b){for(var w=[],D=0,G;D<arguments.length;D++){if(G="",typeof arguments[D]=="object"){for(var te in G+=`
[`+D+"] ",arguments[0])G+=te+": "+arguments[0][te]+", ";G=G.slice(0,-2)}else G=arguments[D];w.push(G)}z(l+`
Arguments: `+Array.prototype.slice.call(w).join("")+`
`+new Error().stack),b=!1}return h.apply(this,arguments)},h)}function se(l,h){c.deprecationHandler!=null&&c.deprecationHandler(l,h),Ho[l]||(z(h),Ho[l]=!0)}function ue(l){return l instanceof Function||Object.prototype.toString.call(l)==="[object Function]"}function ve(l){var h,b;for(b in l)h=l[b],ue(h)?this[b]=h:this["_"+b]=h;this._config=l,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function _e(l,h){var b=k({},l),w;for(w in h)S(h,w)&&(p(l[w])&&p(h[w])?(b[w]={},k(b[w],l[w]),k(b[w],h[w])):h[w]==null?delete b[w]:b[w]=h[w]);for(w in l)S(l,w)&&!S(h,w)&&p(l[w])&&(b[w]=k({},b[w]));return b}function de(l){l!=null&&this.set(l)}function oe(l,h){var b=l.toLowerCase();Qn[b]=Qn[b+"s"]=Qn[h]=l}function Q(l){return typeof l=="string"?Qn[l]||Qn[l.toLowerCase()]:void 0}function Z(l){var h={},b,w;for(w in l)S(l,w)&&(b=Q(w),b&&(h[b]=l[w]));return h}function W(l,h){Jn[l]=h}function ne(l){var h=[];for(var b in l)h.push({unit:b,priority:Jn[b]});return h.sort(function(w,D){return w.priority-D.priority}),h}function ce(l,h,b){var w=""+r(l),D=h-w.length;return(0<=l?b?"+":"":"-")+i(10,n(0,D)).toString().substr(1)+w}function J(l,h,b,w){var D=w;typeof w=="string"&&(D=function(){return this[w]()}),l&&(In[l]=D),h&&(In[h[0]]=function(){return ce(D.apply(this,arguments),h[1],h[2])}),b&&(In[b]=function(){return this.localeData().ordinal(D.apply(this,arguments),l)})}function pe(l){return l.match(/\[[\s\S]/)?l.replace(/^\[|\]$/g,""):l.replace(/\\/g,"")}function he(l){var h=l.match(wl),b,w;for(b=0,w=h.length;b<w;b++)h[b]=In[h[b]]?In[h[b]]:pe(h[b]);return function(D){var G="",te;for(te=0;te<w;te++)G+=ue(h[te])?h[te].call(D,l):h[te];return G}}function fe(l,h){return l.isValid()?(h=be(h,l.localeData()),Ps[h]=Ps[h]||he(h),Ps[h](l)):l.localeData().invalidDate()}function be(l,h){function b(D){return h.longDateFormat(D)||D}var w=5;for(ds.lastIndex=0;0<=w&&ds.test(l);)l=l.replace(ds,b),ds.lastIndex=0,w-=1;return l}function re(l,h,b){Na[l]=ue(h)?h:function(w){return w&&b?b:h}}function Ft(l,h){return S(Na,l)?Na[l](h._strict,h._locale):new RegExp(Dt(l))}function Dt(l){return ft(l.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(h,b,w,D,G){return b||w||D||G}))}function ft(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ae(l,h){var b=h,w;for(typeof l=="string"&&(l=[l]),_(h)&&(b=function(D,G){G[h]=B(D)}),w=0;w<l.length;w++)ta[l[w]]=b}function ei(l,h){Ae(l,function(b,w,D,G){D._w=D._w||{},h(b,D._w,D,G)})}function $t(l,h,b){h!=null&&S(ta,l)&&ta[l](h,b._a,b,l)}function At(l){return It(l)?366:365}function It(l){return l%4==0&&l%100!=0||l%400==0}function St(l,h){return function(b){return b==null?rt(this,l):(De(this,l,b),c.updateOffset(this,h),this)}}function rt(l,h){return l.isValid()?l._d["get"+(l._isUTC?"UTC":"")+h]():NaN}function De(l,h,b){l.isValid()&&!isNaN(b)&&(h==="FullYear"&&It(l.year())&&l.month()===1&&l.date()===29?l._d["set"+(l._isUTC?"UTC":"")+h](b,l.month(),ot(b,l.month())):l._d["set"+(l._isUTC?"UTC":"")+h](b))}function qe(l,h){if(typeof l=="object"){l=Z(l);for(var b=ne(l),w=0;w<b.length;w++)this[b[w].unit](l[b[w].unit])}else if(l=Q(l),ue(this[l]))return this[l](h);return this}function Pt(l,h){return(l%h+h)%h}function ot(l,h){if(isNaN(l)||isNaN(h))return NaN;var b=Pt(h,12);return l+=(h-b)/12,b===1?It(l)?29:28:31-b%7%2}function Ei(l,h,b){var w=l.toLocaleLowerCase(),D,G,te;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],D=0;12>D;++D)te=R([2e3,D]),this._shortMonthsParse[D]=this.monthsShort(te,"").toLocaleLowerCase(),this._longMonthsParse[D]=this.months(te,"").toLocaleLowerCase();return b?h==="MMM"?(G=ut.call(this._shortMonthsParse,w),G===-1?null:G):(G=ut.call(this._longMonthsParse,w),G===-1?null:G):h==="MMM"?(G=ut.call(this._shortMonthsParse,w),G!==-1?G:(G=ut.call(this._longMonthsParse,w),G===-1?null:G)):(G=ut.call(this._longMonthsParse,w),G!==-1?G:(G=ut.call(this._shortMonthsParse,w),G===-1?null:G))}function yi(l,h,b){var w,D,G;if(this._monthsParseExact)return Ei.call(this,l,h,b);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),w=0;12>w;w++)if(D=R([2e3,w]),b&&!this._longMonthsParse[w]&&(this._longMonthsParse[w]=new RegExp("^"+this.months(D,"").replace(".","")+"$","i"),this._shortMonthsParse[w]=new RegExp("^"+this.monthsShort(D,"").replace(".","")+"$","i")),b||this._monthsParse[w]||(G="^"+this.months(D,"")+"|^"+this.monthsShort(D,""),this._monthsParse[w]=new RegExp(G.replace(".",""),"i")),b&&h==="MMMM"&&this._longMonthsParse[w].test(l)||b&&h==="MMM"&&this._shortMonthsParse[w].test(l)||!b&&this._monthsParse[w].test(l))return w}function Ti(l,h){var b;if(!l.isValid())return l;if(typeof h=="string"){if(/^\d+$/.test(h))h=B(h);else if(h=l.localeData().monthsParse(h),!_(h))return l}return b=s(l.date(),ot(l.year(),h)),l._d["set"+(l._isUTC?"UTC":"")+"Month"](h,b),l}function wi(l){return l==null?rt(this,"Month"):(Ti(this,l),c.updateOffset(this,!0),this)}function hi(){function l(te,Te){return Te.length-te.length}var h=[],b=[],w=[],D,G;for(D=0;12>D;D++)G=R([2e3,D]),h.push(this.monthsShort(G,"")),b.push(this.months(G,"")),w.push(this.months(G,"")),w.push(this.monthsShort(G,""));for(h.sort(l),b.sort(l),w.sort(l),D=0;12>D;D++)h[D]=ft(h[D]),b[D]=ft(b[D]);for(D=0;24>D;D++)w[D]=ft(w[D]);this._monthsRegex=new RegExp("^("+w.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Ki(l,h,b,w,D,G,te){var Te;return 100>l&&0<=l?(Te=new Date(l+400,h,b,w,D,G,te),isFinite(Te.getFullYear())&&Te.setFullYear(l)):Te=new Date(l,h,b,w,D,G,te),Te}function xt(l){var h;if(100>l&&0<=l){var b=Array.prototype.slice.call(arguments);b[0]=l+400,h=new Date(Date.UTC.apply(null,b)),isFinite(h.getUTCFullYear())&&h.setUTCFullYear(l)}else h=new Date(Date.UTC.apply(null,arguments));return h}function zt(l,h,b){var w=7+h-b,D=(7+xt(l,0,w).getUTCDay()-h)%7;return-D+w-1}function Ke(l,h,b,w,D){var G=zt(l,w,D),te=1+7*(h-1)+(7+b-w)%7+G,Te,Ne;return 0>=te?(Te=l-1,Ne=At(Te)+te):te>At(l)?(Te=l+1,Ne=te-At(l)):(Te=l,Ne=te),{year:Te,dayOfYear:Ne}}function Xt(l,h,b){var w=zt(l.year(),h,b),D=a((l.dayOfYear()-w-1)/7)+1,G,te;return 1>D?(te=l.year()-1,G=D+dt(te,h,b)):D>dt(l.year(),h,b)?(G=D-dt(l.year(),h,b),te=l.year()+1):(te=l.year(),G=D),{week:G,year:te}}function dt(l,h,b){var w=zt(l,h,b),D=zt(l+1,h,b);return(At(l)-w+D)/7}function Ot(l,h){return typeof l=="string"?isNaN(l)?(l=h.weekdaysParse(l),typeof l=="number"?l:null):parseInt(l,10):l}function ge(l,h){return typeof l=="string"?h.weekdaysParse(l)%7||7:isNaN(l)?null:l}function Oe(l,h){return l.slice(h,7).concat(l.slice(0,h))}function Be(l,h,b){var w=l.toLocaleLowerCase(),D,G,te;if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],D=0;7>D;++D)te=R([2e3,1]).day(D),this._minWeekdaysParse[D]=this.weekdaysMin(te,"").toLocaleLowerCase(),this._shortWeekdaysParse[D]=this.weekdaysShort(te,"").toLocaleLowerCase(),this._weekdaysParse[D]=this.weekdays(te,"").toLocaleLowerCase();return b?h==="dddd"?(G=ut.call(this._weekdaysParse,w),G===-1?null:G):h==="ddd"?(G=ut.call(this._shortWeekdaysParse,w),G===-1?null:G):(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G):h==="dddd"?(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._shortWeekdaysParse,w),G!==-1?G:(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G))):h==="ddd"?(G=ut.call(this._shortWeekdaysParse,w),G!==-1?G:(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G))):(G=ut.call(this._minWeekdaysParse,w),G!==-1?G:(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._shortWeekdaysParse,w),G===-1?null:G)))}function ct(l,h,b){var w,D,G;if(this._weekdaysParseExact)return Be.call(this,l,h,b);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),w=0;7>w;w++)if(D=R([2e3,1]).day(w),b&&!this._fullWeekdaysParse[w]&&(this._fullWeekdaysParse[w]=new RegExp("^"+this.weekdays(D,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[w]=new RegExp("^"+this.weekdaysShort(D,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[w]=new RegExp("^"+this.weekdaysMin(D,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[w]||(G="^"+this.weekdays(D,"")+"|^"+this.weekdaysShort(D,"")+"|^"+this.weekdaysMin(D,""),this._weekdaysParse[w]=new RegExp(G.replace(".",""),"i")),b&&h==="dddd"&&this._fullWeekdaysParse[w].test(l)||b&&h==="ddd"&&this._shortWeekdaysParse[w].test(l)||b&&h==="dd"&&this._minWeekdaysParse[w].test(l)||!b&&this._weekdaysParse[w].test(l))return w}function it(){function l(Jt,ir){return ir.length-Jt.length}var h=[],b=[],w=[],D=[],G,te,Te,Ne,Ct;for(G=0;7>G;G++)te=R([2e3,1]).day(G),Te=this.weekdaysMin(te,""),Ne=this.weekdaysShort(te,""),Ct=this.weekdays(te,""),h.push(Te),b.push(Ne),w.push(Ct),D.push(Te),D.push(Ne),D.push(Ct);for(h.sort(l),b.sort(l),w.sort(l),D.sort(l),G=0;7>G;G++)b[G]=ft(b[G]),w[G]=ft(w[G]),D[G]=ft(D[G]);this._weekdaysRegex=new RegExp("^("+D.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+w.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function at(){return this.hours()%12||12}function Kt(l,h){J(l,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),h)})}function fi(l,h){return h._meridiemParse}function An(l){return l&&l.toLowerCase().replace("_","-")}function Sa(l){for(var h=0,b,w,D,G;h<l.length;){for(G=An(l[h]).split("-"),b=G.length,w=An(l[h+1]),w=w?w.split("-"):null;0<b;){if(D=dr(G.slice(0,b).join("-")),D)return D;if(w&&w.length>=b&&j(G,w,!0)>=b-1)break;b--}h++}return tr}function dr(l){var h=null;if(!ht[l]&&t&&t.exports)try{h=tr._abbr,VX("./locale/"+l),Zi(h)}catch{}return ht[l]}function Zi(l,h){var b;return l&&(b=y(h)?Oi(l):ka(l,h),b?tr=b:typeof console<"u"&&console.warn&&console.warn("Locale "+l+" not found. Did you forget to load it?")),tr._abbr}function ka(l,h){if(h!==null){var b=po,w;if(h.abbr=l,ht[l]!=null)se("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),b=ht[l]._config;else if(h.parentLocale!=null)if(ht[h.parentLocale]!=null)b=ht[h.parentLocale]._config;else if(w=dr(h.parentLocale),w!=null)b=w._config;else return yr[h.parentLocale]||(yr[h.parentLocale]=[]),yr[h.parentLocale].push({name:l,config:h}),null;return ht[l]=new de(_e(b,h)),yr[l]&&yr[l].forEach(function(D){ka(D.name,D.config)}),Zi(l),ht[l]}return delete ht[l],null}function Oi(l){var h;if(l&&l._locale&&l._locale._abbr&&(l=l._locale._abbr),!l)return tr;if(!d(l)){if(h=dr(l),h)return h;l=[l]}return Sa(l)}function Xd(){return Tl(ht)}function Rs(l){var h=l._a,b;return h&&I(l).overflow===-2&&(b=0>h[1]||11<h[1]?1:1>h[2]||h[2]>ot(h[0],h[1])?2:0>h[3]||24<h[3]||h[3]===24&&(h[4]!==0||h[5]!==0||h[6]!==0)?3:0>h[4]||59<h[4]?4:0>h[5]||59<h[5]?5:0>h[6]||999<h[6]?6:-1,I(l)._overflowDayOfYear&&(0>b||2<b)&&(b=2),I(l)._overflowWeeks&&b===-1&&(b=7),I(l)._overflowWeekday&&b===-1&&(b=8),I(l).overflow=b),l}function Gn(l,h,b){return l??h??b}function Kd(l){var h=new Date(c.now());return l._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()]}function Is(l){var h=[],b,w,D,G,te;if(!l._d){for(D=Kd(l),l._w&&l._a[2]==null&&l._a[1]==null&&Zd(l),l._dayOfYear!=null&&(te=Gn(l._a[0],D[0]),(l._dayOfYear>At(te)||l._dayOfYear===0)&&(I(l)._overflowDayOfYear=!0),w=xt(te,0,l._dayOfYear),l._a[1]=w.getUTCMonth(),l._a[2]=w.getUTCDate()),b=0;3>b&&l._a[b]==null;++b)l._a[b]=h[b]=D[b];for(;7>b;b++)l._a[b]=h[b]=l._a[b]==null?b===2?1:0:l._a[b];l._a[3]===24&&l._a[4]===0&&l._a[5]===0&&l._a[6]===0&&(l._nextDay=!0,l._a[3]=0),l._d=(l._useUTC?xt:Ki).apply(null,h),G=l._useUTC?l._d.getUTCDay():l._d.getDay(),l._tzm!=null&&l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),l._nextDay&&(l._a[3]=24),l._w&&typeof l._w.d<"u"&&l._w.d!==G&&(I(l).weekdayMismatch=!0)}}function Zd(l){var h,b,w,D,G,te,Te,Ne;if(h=l._w,h.GG!=null||h.W!=null||h.E!=null)G=1,te=4,b=Gn(h.GG,l._a[0],Xt(Ge(),1,4).year),w=Gn(h.W,1),D=Gn(h.E,1),(1>D||7<D)&&(Ne=!0);else{G=l._locale._week.dow,te=l._locale._week.doy;var Ct=Xt(Ge(),G,te);b=Gn(h.gg,l._a[0],Ct.year),w=Gn(h.w,Ct.week),h.d==null?h.e==null?D=G:(D=h.e+G,(0>h.e||6<h.e)&&(Ne=!0)):(D=h.d,(0>D||6<D)&&(Ne=!0))}1>w||w>dt(b,G,te)?I(l)._overflowWeeks=!0:Ne==null?(Te=Ke(b,w,D,G,te),l._a[0]=Te.year,l._dayOfYear=Te.dayOfYear):I(l)._overflowWeekday=!0}function co(l){var h=l._i,b=lh.exec(h)||bu.exec(h),w,D,G,te,Te,Ne;if(b){for(I(l).iso=!0,w=0,D=ys.length;w<D;w++)if(ys[w][1].exec(b[1])){te=ys[w][0],G=ys[w][2]!==!1;break}if(te==null)return void(l._isValid=!1);if(b[3]){for(w=0,D=Kr.length;w<D;w++)if(Kr[w][1].exec(b[3])){Te=(b[2]||" ")+Kr[w][0];break}if(Te==null)return void(l._isValid=!1)}if(!G&&Te!=null)return void(l._isValid=!1);if(b[4])if(_u.exec(b[4]))Ne="Z";else return void(l._isValid=!1);l._f=te+(Te||"")+(Ne||""),hr(l)}else l._isValid=!1}function uo(l,h,b,w,D,G){var te=[Qd(l),ia.indexOf(h),parseInt(b,10),parseInt(w,10),parseInt(D,10)];return G&&te.push(parseInt(G,10)),te}function Qd(l){var h=parseInt(l,10);return 49>=h?2e3+h:999>=h?1900+h:h}function Jd(l){return l.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function bl(l,h,b){if(l){var w=Al.indexOf(l),D=new Date(h[0],h[1],h[2]).getDay();if(w!==D)return I(b).weekdayMismatch=!0,b._isValid=!1,!1}return!0}function vc(l,h,b){if(l)return Tc[l];if(h)return 0;var w=parseInt(b,10),D=w%100;return 60*((w-D)/100)+D}function Ds(l){var h=Rl.exec(Jd(l._i));if(h){var b=uo(h[4],h[3],h[2],h[5],h[6],h[7]);if(!bl(h[1],b,l))return;l._a=b,l._tzm=vc(h[8],h[9],h[10]),l._d=xt.apply(null,l._a),l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),I(l).rfc2822=!0}else l._isValid=!1}function eh(l){var h=Os.exec(l._i);if(h!==null)return void(l._d=new Date(+h[1]));if(co(l),l._isValid===!1)delete l._isValid;else return;if(Ds(l),l._isValid===!1)delete l._isValid;else return;c.createFromInputFallback(l)}function hr(l){if(l._f===c.ISO_8601)return void co(l);if(l._f===c.RFC_2822)return void Ds(l);l._a=[],I(l).empty=!0;var h=""+l._i,b=h.length,w=0,D,G,te,Te,Ne;for(te=be(l._f,l._locale).match(wl)||[],D=0;D<te.length;D++)Te=te[D],G=(h.match(Ft(Te,l))||[])[0],G&&(Ne=h.substr(0,h.indexOf(G)),0<Ne.length&&I(l).unusedInput.push(Ne),h=h.slice(h.indexOf(G)+G.length),w+=G.length),In[Te]?(G?I(l).empty=!1:I(l).unusedTokens.push(Te),$t(Te,G,l)):l._strict&&!G&&I(l).unusedTokens.push(Te);I(l).charsLeftOver=b-w,0<h.length&&I(l).unusedInput.push(h),12>=l._a[3]&&I(l).bigHour===!0&&0<l._a[3]&&(I(l).bigHour=void 0),I(l).parsedDateParts=l._a.slice(0),I(l).meridiem=l._meridiem,l._a[3]=bc(l._locale,l._a[3],l._meridiem),Is(l),Rs(l)}function bc(l,h,b){var w;return b==null?h:l.meridiemHour==null?(l.isPM==null||(w=l.isPM(b),w&&12>h&&(h+=12),w||h!==12||(h=0)),h):l.meridiemHour(h,b)}function pu(l){var h,b,w,D,G;if(l._f.length===0)return I(l).invalidFormat=!0,void(l._d=new Date(NaN));for(D=0;D<l._f.length;D++)G=0,h=x({},l),l._useUTC!=null&&(h._useUTC=l._useUTC),h._f=l._f[D],hr(h),F(h)&&(G+=I(h).charsLeftOver,G+=10*I(h).unusedTokens.length,I(h).score=G,(w==null||G<w)&&(w=G,b=h));k(l,b||h)}function Qi(l){if(!l._d){var h=Z(l._i);l._a=C([h.year,h.month,h.day||h.date,h.hour,h.minute,h.second,h.millisecond],function(b){return b&&parseInt(b,10)}),Is(l)}}function lt(l){var h=new M(Rs(as(l)));return h._nextDay&&(h.add(1,"d"),h._nextDay=void 0),h}function as(l){var h=l._i,b=l._f;return l._locale=l._locale||Oi(l._l),h===null||b===void 0&&h===""?P({nullInput:!0}):(typeof h=="string"&&(l._i=h=l._locale.preparse(h)),q(h)?new M(Rs(h)):(E(h)?l._d=h:d(b)?pu(l):b?hr(l):_c(l),F(l)||(l._d=null),l))}function _c(l){var h=l._i;y(h)?l._d=new Date(c.now()):E(h)?l._d=new Date(h.valueOf()):typeof h=="string"?eh(l):d(h)?(l._a=C(h.slice(0),function(b){return parseInt(b,10)}),Is(l)):p(h)?Qi(l):_(h)?l._d=new Date(h):c.createFromInputFallback(l)}function fr(l,h,b,w,D){var G={};return(b===!0||b===!1)&&(w=b,b=void 0),(p(l)&&m(l)||d(l)&&l.length===0)&&(l=void 0),G._isAMomentObject=!0,G._useUTC=G._isUTC=D,G._l=b,G._i=l,G._f=h,G._strict=w,lt(G)}function Ge(l,h,b,w){return fr(l,h,b,w,!1)}function os(l,h){var b,w;if(h.length===1&&d(h[0])&&(h=h[0]),!h.length)return Ge();for(b=h[0],w=1;w<h.length;++w)(!h[w].isValid()||h[w][l](b))&&(b=h[w]);return b}function Oo(l){for(var h in l)if(ut.call(qn,h)===-1||l[h]!=null&&isNaN(l[h]))return!1;for(var b=!1,w=0;w<qn.length;++w)if(l[qn[w]]){if(b)return!1;parseFloat(l[qn[w]])!==B(l[qn[w]])&&(b=!0)}return!0}function kr(l){var h=Z(l),b=h.year||0,w=h.quarter||0,D=h.month||0,G=h.week||h.isoWeek||0,te=h.day||0,Te=h.hour||0,Ne=h.minute||0,Ct=h.second||0,Jt=h.millisecond||0;this._isValid=Oo(h),this._milliseconds=+Jt+1e3*Ct+6e4*Ne+60*(60*(1e3*Te)),this._days=+te+7*G,this._months=+D+3*w+12*b,this._data={},this._locale=Oi(),this._bubble()}function xe(l){return l instanceof kr}function gt(l){return 0>l?-1*e(-1*l):e(l)}function ho(l,h){J(l,0,0,function(){var b=this.utcOffset(),w="+";return 0>b&&(b=-b,w="-"),w+ce(~~(b/60),2)+h+ce(~~b%60,2)})}function xs(l,h){var b=(h||"").match(l);if(b===null)return null;var w=b[b.length-1]||[],D=(w+"").match(ch)||["-",0,0],G=+(60*D[1])+B(D[2]);return G===0?0:D[0]==="+"?G:-G}function ls(l,h){var b,w;return h._isUTC?(b=h.clone(),w=(q(l)||E(l)?l.valueOf():Ge(l).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+w),c.updateOffset(b,!1),b):Ge(l).local()}function cs(l){return 15*-e(l._d.getTimezoneOffset()/15)}function mu(){if(!y(this._isDSTShifted))return this._isDSTShifted;var l={};if(x(l,this),l=as(l),l._a){var h=l._isUTC?R(l._a):Ge(l._a);this._isDSTShifted=this.isValid()&&0<j(l._a,h.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function bt(){return!!this.isValid()&&this._isUTC&&this._offset===0}function oi(l,h){var b=l,w=null,D,G,te;return xe(l)?b={ms:l._milliseconds,d:l._days,M:l._months}:_(l)?(b={},h?b[h]=l:b.milliseconds=l):(w=Eu.exec(l))?(D=w[1]==="-"?-1:1,b={y:0,d:B(w[2])*D,h:B(w[3])*D,m:B(w[4])*D,s:B(w[5])*D,ms:B(gt(1e3*w[6]))*D}):(w=uh.exec(l))?(D=w[1]==="-"?-1:1,b={y:rn(w[2],D),M:rn(w[3],D),w:rn(w[4],D),d:rn(w[5],D),h:rn(w[6],D),m:rn(w[7],D),s:rn(w[8],D)}):b==null?b={}:typeof b=="object"&&("from"in b||"to"in b)&&(te=us(Ge(b.from),Ge(b.to)),b={},b.ms=te.milliseconds,b.M=te.months),G=new kr(b),xe(l)&&S(l,"_locale")&&(G._locale=l._locale),G}function rn(l,h){var b=l&&parseFloat(l.replace(",","."));return(isNaN(b)?0:b)*h}function Aa(l,h){var b={};return b.months=h.month()-l.month()+12*(h.year()-l.year()),l.clone().add(b.months,"M").isAfter(h)&&--b.months,b.milliseconds=+h-+l.clone().add(b.months,"M"),b}function us(l,h){var b;return l.isValid()&&h.isValid()?(h=ls(h,l),l.isBefore(h)?b=Aa(l,h):(b=Aa(h,l),b.milliseconds=-b.milliseconds,b.months=-b.months),b):{milliseconds:0,months:0}}function No(l,h){return function(b,w){var D,G;return w===null||isNaN(+w)||(se(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),G=b,b=w,w=G),b=typeof b=="string"?+b:b,D=oi(b,w),Go(this,D,l),this}}function Go(l,h,b,w){var D=h._milliseconds,G=gt(h._days),te=gt(h._months);l.isValid()&&(w=w==null||w,te&&Ti(l,rt(l,"Month")+te*b),G&&De(l,"Date",rt(l,"Date")+G*b),D&&l._d.setTime(l._d.valueOf()+D*b),w&&c.updateOffset(l,G||te))}function qr(l,h){var b=12*(h.year()-l.year())+(h.month()-l.month()),w=l.clone().add(b,"months"),D,G;return 0>h-w?(D=l.clone().add(b-1,"months"),G=(h-w)/(w-D)):(D=l.clone().add(b+1,"months"),G=(h-w)/(D-w)),-(b+G)||0}function fo(l){var h;return l===void 0?this._locale._abbr:(h=Oi(l),h!=null&&(this._locale=h),this)}function Uo(){return this._locale}function gn(l,h){return(l%h+h)%h}function Lo(l,h,b){return 100>l&&0<=l?new Date(l+400,h,b)-126227808e5:new Date(l,h,b).valueOf()}function Bo(l,h,b){return 100>l&&0<=l?Date.UTC(l+400,h,b)-126227808e5:Date.UTC(l,h,b)}function Yr(l,h){J(0,[l,l.length],0,h)}function Fo(l,h,b,w,D){var G;return l==null?Xt(this,w,D).year:(G=dt(l,w,D),h>G&&(h=G),th.call(this,l,h,b,w,D))}function th(l,h,b,w,D){var G=Ke(l,h,b,w,D),te=xt(G.year,0,G.dayOfYear);return this.year(te.getUTCFullYear()),this.month(te.getUTCMonth()),this.date(te.getUTCDate()),this}function ih(l,h){h[6]=B(1e3*("0."+l))}function $o(l){return l}function vn(l,h,b,w){var D=Oi(),G=R().set(w,h);return D[b](G,l)}function _l(l,h,b){if(_(l)&&(h=l,l=void 0),l=l||"",h!=null)return vn(l,h,b,"month");var w=[],D;for(D=0;12>D;D++)w[D]=vn(l,D,b,"month");return w}function Ia(l,h,b,w){typeof l=="boolean"?(_(h)&&(b=h,h=void 0),h=h||""):(h=l,b=h,l=!1,_(h)&&(b=h,h=void 0),h=h||"");var D=Oi(),G=l?D._week.dow:0;if(b!=null)return vn(h,(b+G)%7,w,"day");var te=[],Te;for(Te=0;7>Te;Te++)te[Te]=vn(h,(Te+G)%7,w,"day");return te}function Da(l,h,b,w){var D=oi(h,b);return l._milliseconds+=w*D._milliseconds,l._days+=w*D._days,l._months+=w*D._months,l._bubble()}function Js(l){return 0>l?a(l):o(l)}function El(l){return 4800*l/146097}function xa(l){return 146097*l/4800}function Pi(l){return function(){return this.as(l)}}function un(l){return function(){return this.isValid()?this._data[l]:NaN}}function Ec(l,h,b,w,D){return D.relativeTime(h||1,!!b,l,w)}function yu(l,h,b){var w=oi(l).abs(),D=qi(w.as("s")),G=qi(w.as("m")),te=qi(w.as("h")),Te=qi(w.as("d")),Ne=qi(w.as("M")),Ct=qi(w.as("y")),Jt=D<=Qt.ss&&["s",D]||D<Qt.s&&["ss",D]||1>=G&&["m"]||G<Qt.m&&["mm",G]||1>=te&&["h"]||te<Qt.h&&["hh",te]||1>=Te&&["d"]||Te<Qt.d&&["dd",Te]||1>=Ne&&["M"]||Ne<Qt.M&&["MM",Ne]||1>=Ct&&["y"]||["yy",Ct];return Jt[2]=h,Jt[3]=0<+l,Jt[4]=b,Ec.apply(null,Jt)}function nh(l){return l===void 0?qi:typeof l=="function"&&(qi=l,!0)}function Rn(l){return(0<l)-(0>l)||+l}function Wr(){if(!this.isValid())return this.localeData().invalidDate();var l=Dr(this._milliseconds)/1e3,h=Dr(this._days),b=Dr(this._months),w,D,G;w=$(l/60),D=$(w/60),l%=60,w%=60,G=$(b/12),b%=12;var te=G,Te=b,Ne=h,Ct=D,Jt=w,ir=l?l.toFixed(3).replace(/\.?0+$/,""):"",Dn=this.asSeconds();if(!Dn)return"P0D";var xu=0>Dn?"-":"",mo=Rn(this._months)===Rn(Dn)?"":"-",xl=Rn(this._days)===Rn(Dn)?"":"-",Ua=Rn(this._milliseconds)===Rn(Dn)?"":"-";return xu+"P"+(te?mo+te+"Y":"")+(Te?mo+Te+"M":"")+(Ne?xl+Ne+"D":"")+(Ct||Jt||ir?"T":"")+(Ct?Ua+Ct+"H":"")+(Jt?Ua+Jt+"M":"")+(ir?Ua+ir+"S":"")}var Ma,Pa;Pa=Array.prototype.some?Array.prototype.some:function(l){for(var h=Object(this),b=h.length>>>0,w=0;w<b;w++)if(w in h&&l.call(this,h[w],w,h))return!0;return!1};var Ms=c.momentProperties=[],ea=!1,Ho={};c.suppressDeprecationWarnings=!1,c.deprecationHandler=null;var Tl=Object.keys?Object.keys:function(l){var h=[],b;for(b in l)S(l,b)&&h.push(b);return h},rh=/\d{1,2}/,Qn={},Jn={},wl=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ds=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ps={},In={},jr=/\d/,Ut=/\d\d/,Ar=/\d{3}/,hs=/\d{4}/,Rr=/[+-]?\d{6}/,je=/\d\d?/,Cl=/\d\d\d\d?/,Sl=/\d\d\d\d\d\d?/,fs=/\d{1,3}/,Oa=/\d{1,4}/,zr=/[+-]?\d{1,6}/,gu=/\d+/,ps=/[+-]?\d+/,sh=/Z|[+-]\d\d:?\d\d/gi,ms=/Z|[+-]\d\d(?::?\d\d)?/gi,ah=/[+-]?\d+(\.\d{1,3})?/,er=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Na={},ta={},pr=0,Ir=1,kl=2,dn=3,mr=4,Xr=5;J("Y",0,0,function(){var l=this.year();return 9999>=l?""+l:"+"+l}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),oe("year","y"),W("year",1),re("Y",ps),re("YY",je,Ut),re("YYYY",Oa,hs),re("YYYYY",zr,Rr),re("YYYYYY",zr,Rr),Ae(["YYYYY","YYYYYY"],pr),Ae("YYYY",function(l,h){h[pr]=l.length===2?c.parseTwoDigitYear(l):B(l)}),Ae("YY",function(l,h){h[pr]=c.parseTwoDigitYear(l)}),Ae("Y",function(l,h){h[pr]=parseInt(l,10)}),c.parseTwoDigitYear=function(l){return B(l)+(68<B(l)?1900:2e3)};var Hi=St("FullYear",!0),ut;ut=Array.prototype.indexOf?Array.prototype.indexOf:function(l){var h;for(h=0;h<this.length;++h)if(this[h]===l)return h;return-1},J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(l){return this.localeData().monthsShort(this,l)}),J("MMMM",0,0,function(l){return this.localeData().months(this,l)}),oe("month","M"),W("month",8),re("M",je),re("MM",je,Ut),re("MMM",function(l,h){return h.monthsShortRegex(l)}),re("MMMM",function(l,h){return h.monthsRegex(l)}),Ae(["M","MM"],function(l,h){h[Ir]=B(l)-1}),Ae(["MMM","MMMM"],function(l,h,b,w){var D=b._locale.monthsParse(l,w,b._strict);D==null?I(b).invalidMonth=l:h[Ir]=D});var Vo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ia=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),oe("week","w"),oe("isoWeek","W"),W("week",5),W("isoWeek",5),re("w",je),re("ww",je,Ut),re("W",je),re("WW",je,Ut),ei(["w","ww","W","WW"],function(l,h,b,w){h[w.substr(0,1)]=B(l)}),J("d",0,"do","day"),J("dd",0,0,function(l){return this.localeData().weekdaysMin(this,l)}),J("ddd",0,0,function(l){return this.localeData().weekdaysShort(this,l)}),J("dddd",0,0,function(l){return this.localeData().weekdays(this,l)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),oe("day","d"),oe("weekday","e"),oe("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),re("d",je),re("e",je),re("E",je),re("dd",function(l,h){return h.weekdaysMinRegex(l)}),re("ddd",function(l,h){return h.weekdaysShortRegex(l)}),re("dddd",function(l,h){return h.weekdaysRegex(l)}),ei(["dd","ddd","dddd"],function(l,h,b,w){var D=b._locale.weekdaysParse(l,w,b._strict);D==null?I(b).invalidWeekday=l:h.d=D}),ei(["d","e","E"],function(l,h,b,w){h[w]=B(l)});var Al=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];J("H",["HH",2],0,"hour"),J("h",["hh",2],0,at),J("k",["kk",2],0,function(){return this.hours()||24}),J("hmm",0,0,function(){return""+at.apply(this)+ce(this.minutes(),2)}),J("hmmss",0,0,function(){return""+at.apply(this)+ce(this.minutes(),2)+ce(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+ce(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+ce(this.minutes(),2)+ce(this.seconds(),2)}),Kt("a",!0),Kt("A",!1),oe("hour","h"),W("hour",13),re("a",fi),re("A",fi),re("H",je),re("h",je),re("k",je),re("HH",je,Ut),re("hh",je,Ut),re("kk",je,Ut),re("hmm",Cl),re("hmmss",Sl),re("Hmm",Cl),re("Hmmss",Sl),Ae(["H","HH"],dn),Ae(["k","kk"],function(l,h){var b=B(l);h[dn]=b===24?0:b}),Ae(["a","A"],function(l,h,b){b._isPm=b._locale.isPM(l),b._meridiem=l}),Ae(["h","hh"],function(l,h,b){h[dn]=B(l),I(b).bigHour=!0}),Ae("hmm",function(l,h,b){var w=l.length-2;h[dn]=B(l.substr(0,w)),h[mr]=B(l.substr(w)),I(b).bigHour=!0}),Ae("hmmss",function(l,h,b){var w=l.length-4,D=l.length-2;h[dn]=B(l.substr(0,w)),h[mr]=B(l.substr(w,2)),h[Xr]=B(l.substr(D)),I(b).bigHour=!0}),Ae("Hmm",function(l,h){var b=l.length-2;h[dn]=B(l.substr(0,b)),h[mr]=B(l.substr(b))}),Ae("Hmmss",function(l,h){var b=l.length-4,w=l.length-2;h[dn]=B(l.substr(0,b)),h[mr]=B(l.substr(b,2)),h[Xr]=B(l.substr(w))});var vu=/[ap]\.?m?\.?/i,oh=St("Hours",!0),po={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:rh,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:ia,week:{dow:0,doy:6},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdaysShort:Al,meridiemParse:vu},ht={},yr={},lh=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bu=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_u=/Z|[+-]\d\d(?::?\d\d)?/,ys=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Kr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Os=/^\/?Date\((\-?\d+)/i,Rl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},tr;c.createFromInputFallback=X("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(l){l._d=new Date(l._i+(l._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var gs=X("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ge.apply(null,arguments);return this.isValid()&&l.isValid()?l<this?this:l:P()}),Ga=X("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ge.apply(null,arguments);return this.isValid()&&l.isValid()?l>this?this:l:P()}),qn=["year","quarter","month","week","day","hour","minute","second","millisecond"];ho("Z",":"),ho("ZZ",""),re("Z",ms),re("ZZ",ms),Ae(["Z","ZZ"],function(l,h,b){b._useUTC=!0,b._tzm=xs(ms,l)});var ch=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Eu=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,uh=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;oi.fn=kr.prototype,oi.invalid=function(){return oi(NaN)};var Tu=No(1,"add"),wc=No(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ns=X("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(l){return l===void 0?this.localeData():this.locale(l)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Yr("gggg","weekYear"),Yr("ggggg","weekYear"),Yr("GGGG","isoWeekYear"),Yr("GGGGG","isoWeekYear"),oe("weekYear","gg"),oe("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),re("G",ps),re("g",ps),re("GG",je,Ut),re("gg",je,Ut),re("GGGG",Oa,hs),re("gggg",Oa,hs),re("GGGGG",zr,Rr),re("ggggg",zr,Rr),ei(["gggg","ggggg","GGGG","GGGGG"],function(l,h,b,w){h[w.substr(0,2)]=B(l)}),ei(["gg","GG"],function(l,h,b,w){h[w]=c.parseTwoDigitYear(l)}),J("Q",0,"Qo","quarter"),oe("quarter","Q"),W("quarter",7),re("Q",jr),Ae("Q",function(l,h){h[Ir]=3*(B(l)-1)}),J("D",["DD",2],"Do","date"),oe("date","D"),W("date",9),re("D",je),re("DD",je,Ut),re("Do",function(l,h){return l?h._dayOfMonthOrdinalParse||h._ordinalParse:h._dayOfMonthOrdinalParseLenient}),Ae(["D","DD"],kl),Ae("Do",function(l,h){h[kl]=B(l.match(je)[0])});var gr=St("Date",!0);J("DDD",["DDDD",3],"DDDo","dayOfYear"),oe("dayOfYear","DDD"),W("dayOfYear",4),re("DDD",fs),re("DDDD",Ar),Ae(["DDD","DDDD"],function(l,h,b){b._dayOfYear=B(l)}),J("m",["mm",2],0,"minute"),oe("minute","m"),W("minute",14),re("m",je),re("mm",je,Ut),Ae(["m","mm"],mr);var wu=St("Minutes",!1);J("s",["ss",2],0,"second"),oe("second","s"),W("second",15),re("s",je),re("ss",je,Ut),Ae(["s","ss"],Xr);var Cu=St("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),oe("millisecond","ms"),W("millisecond",16),re("S",fs,jr),re("SS",fs,Ut),re("SSS",fs,Ar);var Vi;for(Vi="SSSS";9>=Vi.length;Vi+="S")re(Vi,gu);for(Vi="S";9>=Vi.length;Vi+="S")Ae(Vi,ih);var dh=St("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var ae=M.prototype;ae.add=Tu,ae.calendar=function(l,h){var b=l||Ge(),w=ls(b,this).startOf("day"),D=c.calendarFormat(this,w)||"sameElse",G=h&&(ue(h[D])?h[D].call(this,b):h[D]);return this.format(G||this.localeData().calendar(D,this,Ge(b)))},ae.clone=function(){return new M(this)},ae.diff=function(l,h,b){var w,D,G;return this.isValid()?(w=ls(l,this),w.isValid()?(D=6e4*(w.utcOffset()-this.utcOffset()),h=Q(h),G=h==="year"?qr(this,w)/12:h==="month"?qr(this,w):h==="quarter"?qr(this,w)/3:h==="second"?(this-w)/1e3:h==="minute"?(this-w)/6e4:h==="hour"?(this-w)/36e5:h==="day"?(this-w-D)/864e5:h==="week"?(this-w-D)/6048e5:this-w,b?G:$(G)):NaN):NaN},ae.endOf=function(l){var h;if(l=Q(l),l===void 0||l==="millisecond"||!this.isValid())return this;var b=this._isUTC?Bo:Lo;return l==="year"?h=b(this.year()+1,0,1)-1:l==="quarter"?h=b(this.year(),this.month()-this.month()%3+3,1)-1:l==="month"?h=b(this.year(),this.month()+1,1)-1:l==="week"?h=b(this.year(),this.month(),this.date()-this.weekday()+7)-1:l==="isoWeek"?h=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1:l==="day"||l==="date"?h=b(this.year(),this.month(),this.date()+1)-1:l==="hour"?(h=this._d.valueOf(),h+=36e5-gn(h+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1):l==="minute"?(h=this._d.valueOf(),h+=6e4-gn(h,6e4)-1):l==="second"&&(h=this._d.valueOf(),h+=1e3-gn(h,1e3)-1),this._d.setTime(h),c.updateOffset(this,!0),this},ae.format=function(l){l||(l=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var h=fe(this,l);return this.localeData().postformat(h)},ae.from=function(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ge(l).isValid())?oi({to:this,from:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()},ae.fromNow=function(l){return this.from(Ge(),l)},ae.to=function(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ge(l).isValid())?oi({from:this,to:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()},ae.toNow=function(l){return this.to(Ge(),l)},ae.get=function(l){return l=Q(l),ue(this[l])?this[l]():this},ae.invalidAt=function(){return I(this).overflow},ae.isAfter=function(l,h){var b=q(l)?l:Ge(l);return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(h).valueOf())},ae.isBefore=function(l,h){var b=q(l)?l:Ge(l);return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()<b.valueOf():this.clone().endOf(h).valueOf()<b.valueOf())},ae.isBetween=function(l,h,b,w){var D=q(l)?l:Ge(l),G=q(h)?h:Ge(h);return!!(this.isValid()&&D.isValid()&&G.isValid())&&(w=w||"()",(w[0]==="("?this.isAfter(D,b):!this.isBefore(D,b))&&(w[1]===")"?this.isBefore(G,b):!this.isAfter(G,b)))},ae.isSame=function(l,h){var b=q(l)?l:Ge(l),w;return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()===b.valueOf():(w=b.valueOf(),this.clone().startOf(h).valueOf()<=w&&w<=this.clone().endOf(h).valueOf()))},ae.isSameOrAfter=function(l,h){return this.isSame(l,h)||this.isAfter(l,h)},ae.isSameOrBefore=function(l,h){return this.isSame(l,h)||this.isBefore(l,h)},ae.isValid=function(){return F(this)},ae.lang=Ns,ae.locale=fo,ae.localeData=Uo,ae.max=Ga,ae.min=gs,ae.parsingFlags=function(){return k({},I(this))},ae.set=qe,ae.startOf=function(l){var h;if(l=Q(l),l===void 0||l==="millisecond"||!this.isValid())return this;var b=this._isUTC?Bo:Lo;return l==="year"?h=b(this.year(),0,1):l==="quarter"?h=b(this.year(),this.month()-this.month()%3,1):l==="month"?h=b(this.year(),this.month(),1):l==="week"?h=b(this.year(),this.month(),this.date()-this.weekday()):l==="isoWeek"?h=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)):l==="day"||l==="date"?h=b(this.year(),this.month(),this.date()):l==="hour"?(h=this._d.valueOf(),h-=gn(h+(this._isUTC?0:6e4*this.utcOffset()),36e5)):l==="minute"?(h=this._d.valueOf(),h-=gn(h,6e4)):l==="second"&&(h=this._d.valueOf(),h-=gn(h,1e3)),this._d.setTime(h),c.updateOffset(this,!0),this},ae.subtract=wc,ae.toArray=function(){var l=this;return[l.year(),l.month(),l.date(),l.hour(),l.minute(),l.second(),l.millisecond()]},ae.toObject=function(){var l=this;return{years:l.year(),months:l.month(),date:l.date(),hours:l.hours(),minutes:l.minutes(),seconds:l.seconds(),milliseconds:l.milliseconds()}},ae.toDate=function(){return new Date(this.valueOf())},ae.toISOString=function(l){if(!this.isValid())return null;var h=l!==!0,b=h?this.clone().utc():this;return 0>b.year()||9999<b.year()?fe(b,h?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ue(Date.prototype.toISOString)?h?this.toDate().toISOString():new Date(this.valueOf()+1e3*(60*this.utcOffset())).toISOString().replace("Z",fe(b,"Z")):fe(b,h?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ae.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var l="moment",h="";this.isLocal()||(l=this.utcOffset()===0?"moment.utc":"moment.parseZone",h="Z");var b="["+l+'("]',w=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",D=h+'[")]';return this.format(b+w+"-MM-DD[T]HH:mm:ss.SSS"+D)},ae.toJSON=function(){return this.isValid()?this.toISOString():null},ae.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ae.unix=function(){return a(this.valueOf()/1e3)},ae.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ae.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ae.year=Hi,ae.isLeapYear=function(){return It(this.year())},ae.weekYear=function(l){return Fo.call(this,l,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ae.isoWeekYear=function(l){return Fo.call(this,l,this.isoWeek(),this.isoWeekday(),1,4)},ae.quarter=ae.quarters=function(l){return l==null?o((this.month()+1)/3):this.month(3*(l-1)+this.month()%3)},ae.month=wi,ae.daysInMonth=function(){return ot(this.year(),this.month())},ae.week=ae.weeks=function(l){var h=this.localeData().week(this);return l==null?h:this.add(7*(l-h),"d")},ae.isoWeek=ae.isoWeeks=function(l){var h=Xt(this,1,4).week;return l==null?h:this.add(7*(l-h),"d")},ae.weeksInYear=function(){var l=this.localeData()._week;return dt(this.year(),l.dow,l.doy)},ae.isoWeeksInYear=function(){return dt(this.year(),1,4)},ae.date=gr,ae.day=ae.days=function(l){if(!this.isValid())return l==null?NaN:this;var h=this._isUTC?this._d.getUTCDay():this._d.getDay();return l==null?h:(l=Ot(l,this.localeData()),this.add(l-h,"d"))},ae.weekday=function(l){if(!this.isValid())return l==null?NaN:this;var h=(this.day()+7-this.localeData()._week.dow)%7;return l==null?h:this.add(l-h,"d")},ae.isoWeekday=function(l){if(!this.isValid())return l==null?NaN:this;if(l!=null){var h=ge(l,this.localeData());return this.day(this.day()%7?h:h-7)}return this.day()||7},ae.dayOfYear=function(l){var h=e((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return l==null?h:this.add(l-h,"d")},ae.hour=ae.hours=oh,ae.minute=ae.minutes=wu,ae.second=ae.seconds=Cu,ae.millisecond=ae.milliseconds=dh,ae.utcOffset=function(l,h,b){var w=this._offset||0,D;if(!this.isValid())return l==null?NaN:this;if(l!=null){if(typeof l!="string")16>r(l)&&!b&&(l*=60);else if(l=xs(ms,l),l===null)return this;return!this._isUTC&&h&&(D=cs(this)),this._offset=l,this._isUTC=!0,D!=null&&this.add(D,"m"),w!==l&&(!h||this._changeInProgress?Go(this,oi(l-w,"m"),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?w:cs(this)},ae.utc=function(l){return this.utcOffset(0,l)},ae.local=function(l){return this._isUTC&&(this.utcOffset(0,l),this._isUTC=!1,l&&this.subtract(cs(this),"m")),this},ae.parseZone=function(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var l=xs(sh,this._i);l==null?this.utcOffset(0,!0):this.utcOffset(l)}return this},ae.hasAlignedHourOffset=function(l){return!!this.isValid()&&(l=l?Ge(l).utcOffset():0,(this.utcOffset()-l)%60==0)},ae.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ae.isLocal=function(){return!!this.isValid()&&!this._isUTC},ae.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ae.isUtc=bt,ae.isUTC=bt,ae.zoneAbbr=function(){return this._isUTC?"UTC":""},ae.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ae.dates=X("dates accessor is deprecated. Use date instead.",gr),ae.months=X("months accessor is deprecated. Use month instead",wi),ae.years=X("years accessor is deprecated. Use year instead",Hi),ae.zone=X("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(l,h){return l==null?-this.utcOffset():(typeof l!="string"&&(l=-l),this.utcOffset(l,h),this)}),ae.isDSTShifted=X("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mu);var ze=de.prototype;ze.calendar=function(l,h,b){var w=this._calendar[l]||this._calendar.sameElse;return ue(w)?w.call(h,b):w},ze.longDateFormat=function(l){var h=this._longDateFormat[l],b=this._longDateFormat[l.toUpperCase()];return h||!b?h:(this._longDateFormat[l]=b.replace(/MMMM|MM|DD|dddd/g,function(w){return w.slice(1)}),this._longDateFormat[l])},ze.invalidDate=function(){return this._invalidDate},ze.ordinal=function(l){return this._ordinal.replace("%d",l)},ze.preparse=$o,ze.postformat=$o,ze.relativeTime=function(l,h,b,w){var D=this._relativeTime[b];return ue(D)?D(l,h,b,w):D.replace(/%d/i,l)},ze.pastFuture=function(l,h){var b=this._relativeTime[0<l?"future":"past"];return ue(b)?b(h):b.replace(/%s/i,h)},ze.set=ve,ze.months=function(l,h){return l?d(this._months)?this._months[l.month()]:this._months[(this._months.isFormat||Vo).test(h)?"format":"standalone"][l.month()]:d(this._months)?this._months:this._months.standalone},ze.monthsShort=function(l,h){return l?d(this._monthsShort)?this._monthsShort[l.month()]:this._monthsShort[Vo.test(h)?"format":"standalone"][l.month()]:d(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ze.monthsParse=yi,ze.monthsRegex=function(l){return this._monthsParseExact?(S(this,"_monthsRegex")||hi.call(this),l?this._monthsStrictRegex:this._monthsRegex):(S(this,"_monthsRegex")||(this._monthsRegex=er),this._monthsStrictRegex&&l?this._monthsStrictRegex:this._monthsRegex)},ze.monthsShortRegex=function(l){return this._monthsParseExact?(S(this,"_monthsRegex")||hi.call(this),l?this._monthsShortStrictRegex:this._monthsShortRegex):(S(this,"_monthsShortRegex")||(this._monthsShortRegex=er),this._monthsShortStrictRegex&&l?this._monthsShortStrictRegex:this._monthsShortRegex)},ze.week=function(l){return Xt(l,this._week.dow,this._week.doy).week},ze.firstDayOfYear=function(){return this._week.doy},ze.firstDayOfWeek=function(){return this._week.dow},ze.weekdays=function(l,h){var b=d(this._weekdays)?this._weekdays:this._weekdays[l&&l!==!0&&this._weekdays.isFormat.test(h)?"format":"standalone"];return l===!0?Oe(b,this._week.dow):l?b[l.day()]:b},ze.weekdaysMin=function(l){return l===!0?Oe(this._weekdaysMin,this._week.dow):l?this._weekdaysMin[l.day()]:this._weekdaysMin},ze.weekdaysShort=function(l){return l===!0?Oe(this._weekdaysShort,this._week.dow):l?this._weekdaysShort[l.day()]:this._weekdaysShort},ze.weekdaysParse=ct,ze.weekdaysRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysStrictRegex:this._weekdaysRegex):(S(this,"_weekdaysRegex")||(this._weekdaysRegex=er),this._weekdaysStrictRegex&&l?this._weekdaysStrictRegex:this._weekdaysRegex)},ze.weekdaysShortRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(S(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=er),this._weekdaysShortStrictRegex&&l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ze.weekdaysMinRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(S(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=er),this._weekdaysMinStrictRegex&&l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ze.isPM=function(l){return(l+"").toLowerCase().charAt(0)==="p"},ze.meridiem=function(l,h,b){return 11<l?b?"pm":"PM":b?"am":"AM"},Zi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(l){var h=l%10,b=B(l%100/10)===1?"th":h==1?"st":h==2?"nd":h==3?"rd":"th";return l+b}}),c.lang=X("moment.lang is deprecated. Use moment.locale instead.",Zi),c.langData=X("moment.langData is deprecated. Use moment.localeData instead.",Oi);var Ri=r,qo=Pi("ms"),Su=Pi("s"),ku=Pi("m"),Cc=Pi("h"),Il=Pi("d"),Au=Pi("w"),Dl=Pi("M"),Zr=Pi("Q"),Ru=Pi("y"),Sc=un("milliseconds"),kc=un("seconds"),Iu=un("minutes"),Du=un("hours"),Ac=un("days"),hh=un("months"),fh=un("years"),qi=e,Qt={ss:44,s:45,m:45,h:22,d:26,M:11},Dr=r,Pe=kr.prototype;return Pe.isValid=function(){return this._isValid},Pe.abs=function(){var l=this._data;return this._milliseconds=Ri(this._milliseconds),this._days=Ri(this._days),this._months=Ri(this._months),l.milliseconds=Ri(l.milliseconds),l.seconds=Ri(l.seconds),l.minutes=Ri(l.minutes),l.hours=Ri(l.hours),l.months=Ri(l.months),l.years=Ri(l.years),this},Pe.add=function(l,h){return Da(this,l,h,1)},Pe.subtract=function(l,h){return Da(this,l,h,-1)},Pe.as=function(l){if(!this.isValid())return NaN;var h=this._milliseconds,b,w;if(l=Q(l),l==="month"||l==="quarter"||l==="year")switch(b=this._days+h/864e5,w=this._months+El(b),l){case"month":return w;case"quarter":return w/3;case"year":return w/12}else switch(b=this._days+e(xa(this._months)),l){case"week":return b/7+h/6048e5;case"day":return b+h/864e5;case"hour":return 24*b+h/36e5;case"minute":return 1440*b+h/6e4;case"second":return 86400*b+h/1e3;case"millisecond":return a(864e5*b)+h;default:throw new Error("Unknown unit "+l)}},Pe.asMilliseconds=qo,Pe.asSeconds=Su,Pe.asMinutes=ku,Pe.asHours=Cc,Pe.asDays=Il,Pe.asWeeks=Au,Pe.asMonths=Dl,Pe.asQuarters=Zr,Pe.asYears=Ru,Pe.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*B(this._months/12):NaN},Pe._bubble=function(){var l=this._milliseconds,h=this._days,b=this._months,w=this._data,D,G,te,Te,Ne;return 0<=l&&0<=h&&0<=b||0>=l&&0>=h&&0>=b||(l+=864e5*Js(xa(b)+h),h=0,b=0),w.milliseconds=l%1e3,D=$(l/1e3),w.seconds=D%60,G=$(D/60),w.minutes=G%60,te=$(G/60),w.hours=te%24,h+=$(te/24),Ne=$(El(h)),b+=Ne,h-=Js(xa(Ne)),Te=$(b/12),b%=12,w.days=h,w.months=b,w.years=Te,this},Pe.clone=function(){return oi(this)},Pe.get=function(l){return l=Q(l),this.isValid()?this[l+"s"]():NaN},Pe.milliseconds=Sc,Pe.seconds=kc,Pe.minutes=Iu,Pe.hours=Du,Pe.days=Ac,Pe.weeks=function(){return $(this.days()/7)},Pe.months=hh,Pe.years=fh,Pe.humanize=function(l){if(!this.isValid())return this.localeData().invalidDate();var h=this.localeData(),b=yu(this,!l,h);return l&&(b=h.pastFuture(+this,b)),h.postformat(b)},Pe.toISOString=Wr,Pe.toString=Wr,Pe.toJSON=Wr,Pe.locale=fo,Pe.localeData=Uo,Pe.toIsoString=X("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Wr),Pe.lang=Ns,J("X",0,0,"unix"),J("x",0,0,"valueOf"),re("x",ps),re("X",ah),Ae("X",function(l,h,b){b._d=new Date(1e3*parseFloat(l,10))}),Ae("x",function(l,h,b){b._d=new Date(B(l))}),c.version="2.24.0",function(l){Ma=l}(Ge),c.fn=ae,c.min=function(){var l=[].slice.call(arguments,0);return os("isBefore",l)},c.max=function(){var l=[].slice.call(arguments,0);return os("isAfter",l)},c.now=function(){return Date.now?Date.now():+new Date},c.utc=R,c.unix=function(l){return Ge(1e3*l)},c.months=function(l,h){return _l(l,h,"months")},c.isDate=E,c.locale=Zi,c.invalid=P,c.duration=oi,c.isMoment=q,c.weekdays=function(l,h,b){return Ia(l,h,b,"weekdays")},c.parseZone=function(){return Ge.apply(null,arguments).parseZone()},c.localeData=Oi,c.isDuration=xe,c.monthsShort=function(l,h){return _l(l,h,"monthsShort")},c.weekdaysMin=function(l,h,b){return Ia(l,h,b,"weekdaysMin")},c.defineLocale=ka,c.updateLocale=function(l,h){if(h!=null){var b=po,w,D;D=dr(l),D!=null&&(b=D._config),h=_e(b,h),w=new de(h),w.parentLocale=ht[l],ht[l]=w,Zi(l)}else ht[l]!=null&&(ht[l].parentLocale==null?ht[l]!=null&&delete ht[l]:ht[l]=ht[l].parentLocale);return ht[l]},c.locales=Xd,c.weekdaysShort=function(l,h,b){return Ia(l,h,b,"weekdaysShort")},c.normalizeUnits=Q,c.relativeTimeRounding=nh,c.relativeTimeThreshold=function(l,h){return Qt[l]!==void 0&&(h===void 0?Qt[l]:(Qt[l]=h,l==="s"&&(Qt.ss=h-1),!0))},c.calendarFormat=function(l,h){var b=l.diff(h,"days",!0);return-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse"},c.prototype=ae,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},c})}),YX=[],G_=0;256>G_;G_++)YX[G_]=(G_+256).toString(16).substr(1);for(var WX=function(){if(typeof crypto<"u"&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var e=Array(16);return function(){for(var i=0,n;16>i;i++)!(3&i)&&(n=4294967296*Math.random()),e[i]=255&n>>>((3&i)<<3);return e}}(),jX=[],U_=0;256>U_;U_++)jX[U_]=(U_+256).toString(16).substr(1);var Qu=WX();1|Qu[0],Qu[1],Qu[2],Qu[3],Qu[4],Qu[5];16383&(Qu[6]<<8|Qu[7]);var L_=/^\/?Date\((-?\d+)/i;function B_(t){return t instanceof Number||typeof t=="number"}function eg(t){return t instanceof String||typeof t=="string"}function iw(t){return Uc.isMoment(t)}function F_(t,e){var i;if(t!==void 0){if(t===null)return null;if(!e)return t;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!t;case"number":case"Number":return eg(t)&&!isNaN(Date.parse(t))?Uc(t).valueOf():+t.valueOf();case"string":case"String":return t+"";case"Date":if(B_(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(iw(t))return new Date(t.valueOf());if(eg(t))return i=L_.exec(t),i?new Date(+i[1]):Uc(new Date(t)).toDate();throw new Error("Cannot convert object of type "+$_(t)+" to type Date");case"Moment":if(B_(t))return Uc(t);if(t instanceof Date)return Uc(t.valueOf());if(iw(t))return Uc(t);if(eg(t))return i=L_.exec(t),Uc(i?+i[1]:t);throw new Error("Cannot convert object of type "+$_(t)+" to type Date");case"ISODate":if(B_(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(iw(t))return t.toDate().toISOString();if(eg(t))return i=L_.exec(t),i?new Date(+i[1]).toISOString():Uc(t).format();throw new Error("Cannot convert object of type "+$_(t)+" to type ISODate");case"ASPDate":if(B_(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(eg(t)){i=L_.exec(t);var n;return n=i?new Date(+i[1]).valueOf():new Date(t).valueOf(),"/Date("+n+")/"}throw new Error("Cannot convert object of type "+$_(t)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function $_(t){var e=ZC(t);return e==="object"?t===null?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function QC(t){return typeof t=="string"||typeof t=="number"}var zX=function(){function t(e){aT(this,t),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(e)}return oT(t,[{key:"setOptions",value:function(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var e=this._extended.object,i=this._extended.methods,n=0,r;n<i.length;n++)r=i[n],r.original?e[r.name]=r.original:delete e[r.name];this._extended=null}}},{key:"replace",value:function(e,i){var n=this,r=e[i];if(!r)throw new Error("Method "+i+" undefined");e[i]=function(){for(var s=arguments.length,a=Array(s),o=0;o<s;o++)a[o]=arguments[o];n.queue({args:a,fn:r,context:this})}}},{key:"queue",value:function(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var e=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),0<this.queue.length&&typeof this.delay=="number"&&(this._timeout=setTimeout(function(){e.flush()},this.delay))}},{key:"flush",value:function(){this._queue.splice(0).forEach(function(e){e.fn.apply(e.context||e.fn,e.args||[])})}}],[{key:"extend",value:function(e,i){var n=new t(i);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=function(){n.flush()};var r=[{name:"flush",original:void 0}];if(i&&i.replace)for(var s=0,a;s<i.replace.length;s++)a=i.replace[s],r.push({name:a,original:e[a]}),n.replace(e,a);return n._extended={object:e,methods:r},n}}]),t}();function XX(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}}var KX=XX;function ZX(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}var QX=ZX;function JX(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var eK=JX;function tK(t){return KX(t)||QX(t)||eK()}var TM=tK,gL=function(){function t(){aT(this,t),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=t.prototype.on,this.unsubscribe=t.prototype.off}return oT(t,[{key:"_trigger",value:function(e,i,n){if(e==="*")throw new Error("Cannot trigger event *");for(var r=[].concat(TM(this._subscribers[e]),TM(this._subscribers["*"])),s=0,a=r.length,o;s<a;s++)o=r[s],o.callback&&o.callback(e,i,n??null)}},{key:"on",value:function(e,i){this._subscribers[e].push({callback:i})}},{key:"off",value:function(e,i){this._subscribers[e]=this._subscribers[e].filter(function(n){return n.callback!==i})}}]),t}();function wM(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i}function iK(t){for(var e=1,i;e<arguments.length;e++)i=arguments[e]==null?{}:arguments[e],e%2?wM(i,!0).forEach(function(n){MX(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wM(i).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))});return t}var vd=function(t){function e(i,n){var r;if(aT(this,e),r=hL(this,fL(e).call(this)),i&&!Array.isArray(i)&&(n=i,i=[]),r._options=n||{},r._data=Object.create({}),r.length=0,r._idProp=r._options.fieldId||"id",r._type={},r._options.type)for(var s=Object.keys(r._options.type),a=0,o=s.length;a<o;a++){var c=s[a],d=r._options.type[c];r._type[c]=d=="Date"||d=="ISODate"||d=="ASPDate"?"Date":d}return i&&i.length&&r.add(i),r.setOptions(n),r}return pL(e,t),oT(e,[{key:"setOptions",value:function(i){i&&i.queue!==void 0&&(i.queue===!1?this._queue&&(this._queue.destroy(),delete this._queue):(!this._queue&&(this._queue=zX.extend(this,{replace:["add","update","remove"]})),i.queue&&Gp(i.queue)==="object"&&this._queue.setOptions(i.queue)))}},{key:"add",value:function(i,n){var r=[],s;if(Array.isArray(i))for(var a=0,o=i.length;a<o;a++)s=this._addItem(i[a]),r.push(s);else if(i&&Gp(i)==="object")s=this._addItem(i),r.push(s);else throw new Error("Unknown dataType");return r.length&&this._trigger("add",{items:r},n),r}},{key:"update",value:function(i,n){var r=this,s=[],a=[],o=[],c=[],d=this._idProp,p=function(_){var E=_[d];if(E!=null&&r._data[E]){var C=_,S=Object.assign({},r._data[E]),k=r._updateItem(C);a.push(k),c.push(C),o.push(S)}else{var R=r._addItem(_);s.push(R)}};if(Array.isArray(i))for(var m=0,y=i.length;m<y;m++)i[m]&&Gp(i[m])==="object"?p(i[m]):console.warn("Ignoring input item, which is not an object at index "+m);else if(i&&Gp(i)==="object")p(i);else throw new Error("Unknown dataType");return s.length&&this._trigger("add",{items:s},n),a.length&&this._trigger("update",{items:a,oldData:o,data:c},n),s.concat(a)}},{key:"get",value:function(i,n){var r=void 0,s=void 0,a=void 0;QC(i)?(r=i,a=n):Array.isArray(i)?(s=i,a=n):a=i;var o=a&&a.returnType==="Object"?"Object":"Array",c=a&&a.type||this._options.type,d=a&&a.filter,p=[],m=null,y=null,_=null;if(r!=null)m=this._getItem(r,c),m&&d&&!d(m)&&(m=null);else if(s!=null)for(var E=0,C=s.length;E<C;E++)m=this._getItem(s[E],c),m!=null&&(!d||d(m))&&p.push(m);else{y=Object.keys(this._data);for(var S=0,k=y.length;S<k;S++)_=y[S],m=this._getItem(_,c),m!=null&&(!d||d(m))&&p.push(m)}if(a&&a.order&&r==null&&this._sort(p,a.order),a&&a.fields){var R=a.fields;if(r!=null&&m!=null)m=this._filterFields(m,R);else for(var O=0,I=p.length;O<I;O++)p[O]=this._filterFields(p[O],R)}if(o=="Object"){for(var F={},P=0,x=p.length;P<x;P++){var M=p[P],q=M[this._idProp];F[q]=M}return F}return r==null?p:m}},{key:"getIds",value:function(i){var n=this._data,r=i&&i.filter,s=i&&i.order,a=i&&i.type||this._options.type,o=Object.keys(n),c=[],d,p;if(r)if(s){p=[];for(var m=0,y=o.length,_;m<y;m++)_=o[m],d=this._getItem(_,a),r(d)&&p.push(d);this._sort(p,s);for(var E=0,C=p.length;E<C;E++)c.push(p[E][this._idProp])}else for(var S=0,k=o.length,R;S<k;S++)R=o[S],d=this._getItem(R,a),r(d)&&c.push(d[this._idProp]);else if(s){p=[];for(var O=0,I=o.length,F;O<I;O++)F=o[O],p.push(n[F]);this._sort(p,s);for(var P=0,x=p.length;P<x;P++)c.push(p[P][this._idProp])}else for(var M=0,q=o.length,$;M<q;M++)$=o[M],d=n[$],c.push(d[this._idProp]);return c}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(i,n){var r=n&&n.filter,s=n&&n.type||this._options.type,a=this._data,o=Object.keys(a);if(n&&n.order)for(var c=this.get(n),d=0,p=c.length;d<p;d++){var m=c[d],y=m[this._idProp];i(m,y)}else for(var _=0,E=o.length;_<E;_++){var C=o[_],S=this._getItem(C,s);(!r||r(S))&&i(S,C)}}},{key:"map",value:function(i,n){for(var r=n&&n.filter,s=n&&n.type||this._options.type,a=[],o=this._data,c=Object.keys(o),d=0,p=c.length;d<p;d++){var m=c[d],y=this._getItem(m,s);(!r||r(y))&&a.push(i(y,m))}return n&&n.order&&this._sort(a,n.order),a}},{key:"_filterFields",value:function(i,n){return i&&(Array.isArray(n)?n:Object.keys(n)).reduce(function(r,s){return r[s]=i[s],r},{})}},{key:"_sort",value:function(i,n){if(typeof n=="string"){var r=n;i.sort(function(s,a){var o=s[r],c=a[r];return o>c?1:o<c?-1:0})}else if(typeof n=="function")i.sort(n);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(i,n){for(var r=[],s=[],a=Array.isArray(i)?i:[i],o=0,c=a.length,d;o<c;o++)if(d=this._remove(a[o]),d){var p=d[this._idProp];p!=null&&(r.push(p),s.push(d))}return r.length&&this._trigger("remove",{items:r,oldData:s},n),r}},{key:"_remove",value:function(i){var n;if(QC(i)?n=i:i&&Gp(i)==="object"&&(n=i[this._idProp]),n!=null&&this._data[n]){var r=this._data[n];return delete this._data[n],--this.length,r}return null}},{key:"clear",value:function(i){for(var n=Object.keys(this._data),r=[],s=0,a=n.length;s<a;s++)r.push(this._data[n[s]]);return this._data={},this.length=0,this._trigger("remove",{items:n,oldData:r},i),n}},{key:"max",value:function(n){for(var r=this._data,s=Object.keys(r),a=null,o=null,c=0,d=s.length;c<d;c++){var p=s[c],m=r[p],y=m[n];y!=null&&(o==null||y>o)&&(a=m,o=y)}return a}},{key:"min",value:function(n){for(var r=this._data,s=Object.keys(r),a=null,o=null,c=0,d=s.length;c<d;c++){var p=s[c],m=r[p],y=m[n];y!=null&&(o==null||y<o)&&(a=m,o=y)}return a}},{key:"distinct",value:function(i){for(var n=this._data,r=Object.keys(n),s=[],a=this._options.type&&this._options.type[i]||null,o=0,c=0,d=r.length;c<d;c++){for(var p=r[c],m=n[p],y=m[i],_=!1,E=0;E<o;E++)if(s[E]==y){_=!0;break}_||y===void 0||(s[o]=y,o++)}if(a)for(var C=0,S=s.length;C<S;C++)s[C]=F_(s[C],a);return s}},{key:"_addItem",value:function(i){var n=i[this._idProp];if(n==null)n=$X(),i[this._idProp]=n;else if(this._data[n])throw new Error("Cannot add item: item with id "+n+" already exists");for(var r={},s=Object.keys(i),a=0,o=s.length;a<o;a++){var c=s[a],d=this._type[c];r[c]=F_(i[c],d)}return this._data[n]=r,this.length++,n}},{key:"_getItem",value:function(i,n){var r=this._data[i];if(!r)return null;var s=Object.keys(r),a;if(n){a={};for(var o=0,c=s.length;o<c;o++){var d=s[o],p=r[d];a[d]=F_(p,n[d])}}else a=iK({},r);return a[this._idProp]==null&&(a[this._idProp]=r.id),a}},{key:"_updateItem",value:function(i){var n=i[this._idProp];if(n==null)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(i)+")");var r=this._data[n];if(!r)throw new Error("Cannot update item: no item with id "+n+" found");for(var s=Object.keys(i),a=0,o=s.length;a<o;a++){var c=s[a],d=this._type[c];r[c]=F_(i[c],d)}return n}}]),e}(gL),vL=function(t){function e(i,n){var r;return aT(this,e),r=hL(this,fL(e).call(this)),r.length=0,r._ids={},r._options=n||{},r.listener=r._onEvent.bind(dL(r)),r.setData(i),r}return pL(e,t),oT(e,[{key:"setData",value:function(i){if(this._data){this._data.off&&this._data.off("*",this.listener);var n=this._data.getIds({filter:this._options.filter}),r=this._data.get(n);this._ids={},this.length=0,this._trigger("remove",{items:n,oldData:r})}if(i!=null){this._data=i;for(var s=this._data.getIds({filter:this._options.filter}),a=0,o=s.length,c;a<o;a++)c=s[a],this._ids[c]=!0;this.length=s.length,this._trigger("add",{items:s})}else this._data=new vd;this._data.on&&this._data.on("*",this.listener)}},{key:"refresh",value:function(){for(var i=this._data.getIds({filter:this._options.filter}),n=Object.keys(this._ids),r={},s=[],a=[],o=[],c=0,d=i.length,p;c<d;c++)p=i[c],r[p]=!0,this._ids[p]||(s.push(p),this._ids[p]=!0);for(var m=0,y=n.length;m<y;m++){var _=n[m],E=this._data.get(_);E==null?console.error("If you see this, report it please."):!r[_]&&(a.push(_),o.push(E),delete this._ids[_])}this.length+=s.length-a.length,s.length&&this._trigger("add",{items:s}),a.length&&this._trigger("remove",{items:a,oldData:o})}},{key:"get",value:function(i,n){if(this._data==null)return null;var r=null,s;QC(i)||Array.isArray(i)?(r=i,s=n):s=i;var a=Object.assign({},this._options,s),o=this._options.filter,c=s&&s.filter;return o&&c&&(a.filter=function(d){return o(d)&&c(d)}),r==null?this._data.get(a):this._data.get(r,a)}},{key:"getIds",value:function(i){if(this._data.length){var n=this._options.filter,r=i==null?null:i.filter,s;return s=r?n?function(a){return n(a)&&r(a)}:r:n,this._data.getIds({filter:s,order:i&&i.order})}return[]}},{key:"forEach",value:function(i,n){if(this._data){var r=this._options.filter,s=n&&n.filter,a;a=s?r?function(o){return r(o)&&s(o)}:s:r,this._data.forEach(i,{filter:a,order:n&&n.order})}}},{key:"map",value:function(i,n){if(this._data){var r=this._options.filter,s=n&&n.filter,a;return a=s?r?function(o){return r(o)&&s(o)}:s:r,this._data.map(i,{filter:a,order:n&&n.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"_onEvent",value:function(i,n,r){if(n&&n.items&&this._data){var s=n.items,a=[],o=[],c=[],d=[],p=[],m=[];switch(i){case"add":for(var y=0,_=s.length;y<_;y++){var E=s[y],C=this.get(E);C&&(this._ids[E]=!0,a.push(E))}break;case"update":for(var S=0,k=s.length;S<k;S++){var R=s[S],O=this.get(R);O?this._ids[R]?(o.push(R),p.push(n.data[S]),d.push(n.oldData[S])):(this._ids[R]=!0,a.push(R)):this._ids[R]&&(delete this._ids[R],c.push(R),m.push(n.oldData[S]))}break;case"remove":for(var I=0,F=s.length,P;I<F;I++)P=s[I],this._ids[P]&&(delete this._ids[P],c.push(P),m.push(n.oldData[I]))}this.length+=a.length-c.length,a.length&&this._trigger("add",{items:a},r),o.length&&this._trigger("update",{items:o,oldData:d,data:p},r),c.length&&this._trigger("remove",{items:c,oldData:m},r)}}}]),e}(gL);typeof CanvasRenderingContext2D<"u"&&(CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(t,e,i){this.beginPath(),this.rect(t-i,e-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(t,e,i){var n=Math.sqrt;this.beginPath(),i*=1.15,e+=.275*i;var r=2*i,s=r/2,a=n(3)/6*r,o=n(r*r-s*s);this.moveTo(t,e-(o-a)),this.lineTo(t+s,e+a),this.lineTo(t-s,e+a),this.lineTo(t,e-(o-a)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(t,e,i){var n=Math.sqrt;this.beginPath(),i*=1.15,e-=.275*i;var r=2*i,s=r/2,a=n(3)/6*r,o=n(r*r-s*s);this.moveTo(t,e+(o-a)),this.lineTo(t+s,e-a),this.lineTo(t-s,e-a),this.lineTo(t,e+(o-a)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,e,i){var n=Math.cos,r=Math.sin,s=Math.PI;this.beginPath(),i*=.82,e+=.1*i;for(var a=0,o;10>a;a++)o=a%2==0?1.3*i:.5*i,this.lineTo(t+o*r(2*a*s/10),e-o*n(2*a*s/10));this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(t,e,i){this.beginPath(),this.lineTo(t,e+i),this.lineTo(t+i,e),this.lineTo(t,e-i),this.lineTo(t-i,e),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,r){var s=Math.PI/180;0>i-2*r&&(r=i/2),0>n-2*r&&(r=n/2),this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+i-r,e),this.arc(t+i-r,e+r,r,270*s,360*s,!1),this.lineTo(t+i,e+n-r),this.arc(t+i-r,e+n-r,r,0,90*s,!1),this.lineTo(t+r,e+n),this.arc(t+r,e+n-r,r,90*s,180*s,!1),this.lineTo(t,e+r),this.arc(t+r,e+r,r,180*s,270*s,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse_vis=function(t,e,i,n){var r=.5522848,s=i/2*r,a=n/2*r,o=t+i,c=e+n,d=t+i/2,p=e+n/2;this.beginPath(),this.moveTo(t,p),this.bezierCurveTo(t,p-a,d-s,e,d,e),this.bezierCurveTo(d+s,e,o,p-a,o,p),this.bezierCurveTo(o,p+a,d+s,c,d,c),this.bezierCurveTo(d-s,c,t,p+a,t,p),this.closePath()},CanvasRenderingContext2D.prototype.database=function(t,e,i,n){var r=i,s=n*(1/3),a=.5522848,o=r/2*a,c=s/2*a,d=t+r,p=e+s,m=t+r/2,y=e+s/2,_=e+(n-s/2),E=e+n;this.beginPath(),this.moveTo(d,y),this.bezierCurveTo(d,y+c,m+o,p,m,p),this.bezierCurveTo(m-o,p,t,y+c,t,y),this.bezierCurveTo(t,y-c,m-o,e,m,e),this.bezierCurveTo(m+o,e,d,y-c,d,y),this.lineTo(d,_),this.bezierCurveTo(d,_+c,m+o,E,m,E),this.bezierCurveTo(m-o,E,t,_+c,t,_),this.lineTo(t,y)},CanvasRenderingContext2D.prototype.dashedLine=function(t,e,i,n,r){var s=Math.sqrt;this.beginPath(),this.moveTo(t,e);for(var a=r.length,o=i-t,c=n-e,d=c/o,p=s(o*o+c*c),m=0,y=!0,_=0,E=r[0];.1<=p;)E=r[m++%a],E>p&&(E=p),_=s(E*E/(1+d*d)),_=0>o?-_:_,t+=_,e+=d*_,y===!0?this.lineTo(t,e):this.moveTo(t,e),p-=E,y=!y},CanvasRenderingContext2D.prototype.hexagon=function(t,e,i){this.beginPath();var n=2*Math.PI/6;this.moveTo(t+i,e);for(var r=1;r<6;r++)this.lineTo(t+i*Math.cos(n*r),e+i*Math.sin(n*r));this.closePath()});var oA=typeof globalThis>"u"?typeof window>"u"?typeof global>"u"?typeof self>"u"?{}:self:global:window:globalThis;function nK(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function rK(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yl(t,e){return e={exports:{}},t(e,e.exports),e.exports}var bL=yl(function(t){function e(n){if(n)return i(n)}function i(n){for(var r in e.prototype)n[r]=e.prototype[r];return n}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(n,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(r),this},e.prototype.once=function(n,r){function s(){this.off(n,s),r.apply(this,arguments)}return s.fn=r,this.on(n,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+n];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var a=0,o;a<s.length;a++)if(o=s[a],o===r||o.fn===r){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var r=Array(arguments.length-1),s=this._callbacks["$"+n],a=1;a<arguments.length;a++)r[a-1]=arguments[a];if(s){s=s.slice(0);for(var a=0,o=s.length;a<o;++a)s[a].apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}});function _L(t){return pd=t,cK()}var EL={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},JC=Object.create(EL);JC.color="color.color",JC.style="dashes";var Ys={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},CM={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},pd="",_m=0,ti="",kt="",ma=Ys.NULL;function sK(){_m=0,ti=pd.charAt(0)}function Pr(){_m++,ti=pd.charAt(_m)}function Cp(){return pd.charAt(_m+1)}var aK=/[a-zA-Z_0-9.:#]/;function SM(t){return aK.test(t)}function Gd(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function oK(t,e,i){for(var n=e.split("."),r=t;n.length;){var s=n.shift();n.length?(!r[s]&&(r[s]={}),r=r[s]):r[s]=i}}function TL(t,e){for(var i=null,n=[t],r=t,s,a;r.parent;)n.push(r.parent),r=r.parent;if(r.nodes){for(s=0,a=r.nodes.length;s<a;s++)if(e.id===r.nodes[s].id){i=r.nodes[s];break}}for(i||(i={id:e.id},t.node&&(i.attr=Gd(i.attr,t.node))),s=n.length-1;0<=s;s--){var o=n[s];o.nodes||(o.nodes=[]),o.nodes.indexOf(i)===-1&&o.nodes.push(i)}e.attr&&(i.attr=Gd(i.attr,e.attr))}function lK(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=Gd({},t.edge);e.attr=Gd(i,e.attr)}}function wL(t,e,i,n,r){var s={from:e,to:i,type:n};return t.edge&&(s.attr=Gd({},t.edge)),s.attr=Gd(s.attr||{},r),r!=null&&r.hasOwnProperty("arrows")&&r.arrows!=null&&(s.arrows={to:{enabled:!0,type:r.arrows.type}},r.arrows=null),s}function an(){for(ma=Ys.NULL,kt="";ti===" "||ti==="	"||ti===`
`||ti==="\r";)Pr();do{var t=!1;if(ti==="#"){for(var e=_m-1;pd.charAt(e)===" "||pd.charAt(e)==="	";)e--;if(pd.charAt(e)===`
`||pd.charAt(e)===""){for(;ti!=""&&ti!=`
`;)Pr();t=!0}}if(ti==="/"&&Cp()==="/"){for(;ti!=""&&ti!=`
`;)Pr();t=!0}if(ti==="/"&&Cp()==="*"){for(;ti!="";)if(ti==="*"&&Cp()==="/"){Pr(),Pr();break}else Pr();t=!0}for(;ti===" "||ti==="	"||ti===`
`||ti==="\r";)Pr()}while(t);if(ti==="")return void(ma=Ys.DELIMITER);var i=ti+Cp();if(CM[i])return ma=Ys.DELIMITER,kt=i,Pr(),void Pr();if(CM[ti])return ma=Ys.DELIMITER,kt=ti,void Pr();if(SM(ti)||ti==="-"){for(kt+=ti,Pr();SM(ti);)kt+=ti,Pr();return kt==="false"?kt=!1:kt==="true"?kt=!0:!isNaN(+kt)&&(kt=+kt),void(ma=Ys.IDENTIFIER)}if(ti==='"'){for(Pr();ti!=""&&(ti!='"'||ti==='"'&&Cp()==='"');)ti==='"'?(kt+=ti,Pr()):ti==="\\"&&Cp()==="n"?(kt+=`
`,Pr()):kt+=ti,Pr();if(ti!='"')throw Ws('End of string " expected');return Pr(),void(ma=Ys.IDENTIFIER)}for(ma=Ys.UNKNOWN;ti!="";)kt+=ti,Pr();throw new SyntaxError('Syntax error in part "'+AL(kt,30)+'"')}function cK(){var t={};if(sK(),an(),kt==="strict"&&(t.strict=!0,an()),(kt==="graph"||kt==="digraph")&&(t.type=kt,an()),ma===Ys.IDENTIFIER&&(t.id=kt,an()),kt!="{")throw Ws("Angle bracket { expected");if(an(),CL(t),kt!="}")throw Ws("Angle bracket } expected");if(an(),kt!=="")throw Ws("End of file expected");return an(),delete t.node,delete t.edge,delete t.graph,t}function CL(t){for(;kt!==""&&kt!="}";)uK(t),kt===";"&&an()}function uK(t){var e=SL(t);if(e)return void kL(t,e);var i=dK(t);if(!i){if(ma!=Ys.IDENTIFIER)throw Ws("Identifier expected");var n=kt;if(an(),kt==="="){if(an(),ma!=Ys.IDENTIFIER)throw Ws("Identifier expected");t[n]=kt,an()}else hK(t,n)}}function SL(t){var e=null;if(kt==="subgraph"&&(e={},e.type="subgraph",an(),ma===Ys.IDENTIFIER&&(e.id=kt,an())),kt==="{"){if(an(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,CL(e),kt!="}")throw Ws("Angle bracket } expected");an(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function dK(t){return kt==="node"?(an(),t.node=Vg(),"node"):kt==="edge"?(an(),t.edge=Vg(),"edge"):kt==="graph"?(an(),t.graph=Vg(),"graph"):null}function hK(t,e){var i={id:e},n=Vg();n&&(i.attr=n),TL(t,i),kL(t,e)}function kL(t,e){for(;kt==="->"||kt==="--";){var i=kt,n;an();var r=SL(t);if(r)n=r;else{if(ma!=Ys.IDENTIFIER)throw Ws("Identifier or subgraph expected");n=kt,TL(t,{id:n}),an()}var s=Vg(),a=wL(t,e,n,i,s);lK(t,a),e=n}}function Vg(){for(var t=null,e={dashed:!0,solid:!1,dotted:[1,5]},i={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},n=[],r=[],s;kt==="[";){for(an(),t={};kt!==""&&kt!="]";){if(ma!=Ys.IDENTIFIER)throw Ws("Attribute name expected");var a=kt;if(an(),kt!="=")throw Ws("Equal sign = expected");if(an(),ma!=Ys.IDENTIFIER)throw Ws("Attribute value expected");var o=kt;a==="style"&&(o=e[o]);var c;a==="arrowhead"&&(c=i[o],a="arrows",o={to:{enabled:!0,type:c}}),a==="arrowtail"&&(c=i[o],a="arrows",o={from:{enabled:!0,type:c}}),n.push({attr:t,name:a,value:o}),r.push(a),an(),kt==","&&an()}if(kt!="]")throw Ws("Bracket ] expected");an()}if(r.includes("dir")){var d={arrows:{}};for(s=0;s<n.length;s++)if(n[s].name!=="arrows")n[s].name==="dir"&&(d.dir=s);else if(n[s].value.to!=null)d.arrows.to=s;else if(n[s].value.from!=null)d.arrows.from=s;else throw Ws("Invalid value of arrows");var p=n[d.dir].value;if(!r.includes("arrows"))if(p==="both")n.push({attr:n[d.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),d.arrows.to=n.length-1,n.push({attr:n[d.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),d.arrows.from=n.length-1;else if(p==="forward")n.push({attr:n[d.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),d.arrows.to=n.length-1;else if(p==="back")n.push({attr:n[d.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),d.arrows.from=n.length-1;else if(p==="none")n.push({attr:n[d.dir].attr,name:"arrows",value:""}),d.arrows.to=n.length-1;else throw Ws('Invalid dir type "'+p+'"');var m,y;if(p==="both")d.arrows.to&&d.arrows.from?(y=n[d.arrows.to].value.to.type,m=n[d.arrows.from].value.from.type,n[d.arrows.to]={attr:n[d.arrows.to].attr,name:n[d.arrows.to].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}},n.splice(d.arrows.from,1)):d.arrows.to?(y=n[d.arrows.to].value.to.type,m="arrow",n[d.arrows.to]={attr:n[d.arrows.to].attr,name:n[d.arrows.to].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}}):d.arrows.from&&(y="arrow",m=n[d.arrows.from].value.from.type,n[d.arrows.from]={attr:n[d.arrows.from].attr,name:n[d.arrows.from].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}});else if(p==="back")d.arrows.to&&d.arrows.from?(y="",m=n[d.arrows.from].value.from.type,n[d.arrows.from]={attr:n[d.arrows.from].attr,name:n[d.arrows.from].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}}):d.arrows.to?(y="",m="arrow",d.arrows.from=d.arrows.to,n[d.arrows.from]={attr:n[d.arrows.from].attr,name:n[d.arrows.from].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}}):d.arrows.from&&(y="",m=n[d.arrows.from].value.from.type,n[d.arrows.to]={attr:n[d.arrows.from].attr,name:n[d.arrows.from].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}}),n[d.arrows.from]={attr:n[d.arrows.from].attr,name:n[d.arrows.from].name,value:{from:{enabled:!0,type:n[d.arrows.from].value.from.type}}};else if(p==="none"){var _;_=d.arrows.to?d.arrows.to:d.arrows.from,n[_]={attr:n[_].attr,name:n[_].name,value:""}}else if(p==="forward")d.arrows.to&&d.arrows.from?(y=n[d.arrows.to].value.to.type,m="",n[d.arrows.to]={attr:n[d.arrows.to].attr,name:n[d.arrows.to].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}}):d.arrows.to?(y=n[d.arrows.to].value.to.type,m="",n[d.arrows.to]={attr:n[d.arrows.to].attr,name:n[d.arrows.to].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}}):d.arrows.from&&(y="arrow",m="",d.arrows.to=d.arrows.from,n[d.arrows.to]={attr:n[d.arrows.to].attr,name:n[d.arrows.to].name,value:{to:{enabled:!0,type:y},from:{enabled:!0,type:m}}}),n[d.arrows.to]={attr:n[d.arrows.to].attr,name:n[d.arrows.to].name,value:{to:{enabled:!0,type:n[d.arrows.to].value.to.type}}};else throw Ws('Invalid dir type "'+p+'"');n.splice(d.dir,1)}var E;if(r.includes("penwidth")){var C=[];for(E=n.length,s=0;s<E;s++)n[s].name!=="width"&&(n[s].name==="penwidth"&&(n[s].name="width"),C.push(n[s]));n=C}for(E=n.length,s=0;s<E;s++)oK(n[s].attr,n[s].name,n[s].value);return t}function Ws(t){return new SyntaxError(t+', got "'+AL(kt,30)+'" (char '+_m+")")}function AL(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function fK(t,e,i){Array.isArray(t)?t.forEach(function(n){Array.isArray(e)?e.forEach(function(r){i(n,r)}):i(n,e)}):Array.isArray(e)?e.forEach(function(n){i(t,n)}):i(t,e)}function nw(t,e,i){for(var n=e.split("."),r=n.pop(),s=t,a=0,o;a<n.length;a++)o=n[a],o in s||(s[o]={}),s=s[o];return s[r]=i,t}function kM(t,e){var i={};for(var n in t)if(t.hasOwnProperty(n)){var r=e[n];Array.isArray(r)?r.forEach(function(s){nw(i,s,t[n])}):typeof r=="string"?nw(i,r,t[n]):nw(i,n,t[n])}return i}function pK(t){var e=_L(t),i={nodes:[],edges:[],options:{}};if(e.nodes&&e.nodes.forEach(function(r){var s={id:r.id,label:(r.label||r.id)+""};Gd(s,kM(r.attr,EL)),s.image&&(s.shape="image"),i.nodes.push(s)}),e.edges){var n=function(r){var s={from:r.from,to:r.to};return Gd(s,kM(r.attr,JC)),s.arrows==null&&r.type==="->"&&(s.arrows="to"),s};e.edges.forEach(function(r){var s,a;s=r.from instanceof Object?r.from.nodes:{id:r.from},a=r.to instanceof Object?r.to.nodes:{id:r.to},r.from instanceof Object&&r.from.edges&&r.from.edges.forEach(function(o){var c=n(o);i.edges.push(c)}),fK(s,a,function(o,c){var d=wL(i,o.id,c.id,r.type,r.attr),p=n(d);i.edges.push(p)}),r.to instanceof Object&&r.to.edges&&r.to.edges.forEach(function(o){var c=n(o);i.edges.push(c)})})}return e.attr&&(i.options=e.attr),i}var mK=_L,yK=pK,gK={parseDOT:mK,DOTToGraph:yK};function vK(t,e){var i=[],n=[],r={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};e!==void 0&&(e.fixed!==void 0&&(r.nodes.fixed=e.fixed),e.parseColor!==void 0&&(r.nodes.parseColor=e.parseColor),e.inheritColor!==void 0&&(r.edges.inheritColor=e.inheritColor));for(var s=t.edges,a=t.nodes,o=0;o<s.length;o++){var c={},d=s[o];c.id=d.id,c.from=d.source,c.to=d.target,c.attributes=d.attributes,c.label=d.label,c.title=d.attributes===void 0?void 0:d.attributes.title,d.type==="Directed"&&(c.arrows="to"),d.color&&r.inheritColor===!1&&(c.color=d.color),i.push(c)}for(var p=0;p<a.length;p++){var m={},y=a[p];m.id=y.id,m.attributes=y.attributes,m.x=y.x,m.y=y.y,m.label=y.label,m.title=y.attributes===void 0?y.title:y.attributes.title,m.color=r.nodes.parseColor===!0?y.color:y.color===void 0?void 0:{background:y.color,border:y.color,highlight:{background:y.color,border:y.color},hover:{background:y.color,border:y.color}},m.size=y.size,m.fixed=r.nodes.fixed&&y.x!==void 0&&y.y!==void 0,n.push(m)}return{nodes:n,edges:i}}var bK=vK,_K={parseGephi:bK},eS=yl(function(t){(function(e,i){t.exports=i()})(oA,function(){function e(i){var n=String.fromCharCode,r=i&&i.preventDefault||!1,s=i&&i.container||window,a={},o={keydown:{},keyup:{}},c={},d;for(d=97;122>=d;d++)c[n(d)]={code:65+(d-97),shift:!1};for(d=65;90>=d;d++)c[n(d)]={code:d,shift:!0};for(d=0;9>=d;d++)c[""+d]={code:48+d,shift:!1};for(d=1;12>=d;d++)c["F"+d]={code:111+d,shift:!1};for(d=0;9>=d;d++)c["num"+d]={code:96+d,shift:!1};c["num*"]={code:106,shift:!1},c["num+"]={code:107,shift:!1},c["num-"]={code:109,shift:!1},c["num/"]={code:111,shift:!1},c["num."]={code:110,shift:!1},c.left={code:37,shift:!1},c.up={code:38,shift:!1},c.right={code:39,shift:!1},c.down={code:40,shift:!1},c.space={code:32,shift:!1},c.enter={code:13,shift:!1},c.shift={code:16,shift:void 0},c.esc={code:27,shift:!1},c.backspace={code:8,shift:!1},c.tab={code:9,shift:!1},c.ctrl={code:17,shift:!1},c.alt={code:18,shift:!1},c.delete={code:46,shift:!1},c.pageup={code:33,shift:!1},c.pagedown={code:34,shift:!1},c["="]={code:187,shift:!1},c["-"]={code:189,shift:!1},c["]"]={code:221,shift:!1},c["["]={code:219,shift:!1};var p=function(_){y(_,"keydown")},m=function(_){y(_,"keyup")},y=function(_,E){if(o[E][_.keyCode]!==void 0){for(var C=o[E][_.keyCode],S=0;S<C.length;S++)(C[S].shift===void 0||C[S].shift==!0&&_.shiftKey==!0||C[S].shift==!1&&_.shiftKey==!1)&&C[S].fn(_);r==!0&&_.preventDefault()}};return a.bind=function(_,E,C){if(C===void 0&&(C="keydown"),c[_]===void 0)throw new Error("unsupported key: "+_);o[C][c[_].code]===void 0&&(o[C][c[_].code]=[]),o[C][c[_].code].push({fn:E,shift:c[_].shift})},a.bindAll=function(_,E){for(var C in E===void 0&&(E="keydown"),c)c.hasOwnProperty(C)&&a.bind(C,_,E)},a.getKey=function(_){for(var E in c)if(c.hasOwnProperty(E)&&(_.shiftKey==!0&&c[E].shift==!0&&_.keyCode==c[E].code||_.shiftKey==!1&&c[E].shift==!1&&_.keyCode==c[E].code||_.keyCode==c[E].code&&E=="shift"))return E;return"unknown key, currently not supported"},a.unbind=function(_,E,C){if(C===void 0&&(C="keydown"),c[_]===void 0)throw new Error("unsupported key: "+_);if(E!==void 0){var S=[],k=o[C][c[_].code];if(k!==void 0)for(var R=0;R<k.length;R++)(k[R].fn!=E||k[R].shift!=c[_].shift)&&S.push(o[C][c[_].code][R]);o[C][c[_].code]=S}else o[C][c[_].code]=[]},a.reset=function(){o={keydown:{},keyup:{}}},a.destroy=function(){o={keydown:{},keyup:{}},s.removeEventListener("keydown",p,!0),s.removeEventListener("keyup",m,!0)},s.addEventListener("keydown",p,!0),s.addEventListener("keyup",m,!0),a}return e})});function dl(){return dl=Object.assign||function(t){for(var e=1,i;e<arguments.length;e++)for(var n in i=arguments[e],i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},dl.apply(this,arguments)}function Po(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function H_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var EK=typeof Object.assign=="function"?Object.assign:function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1,n;i<arguments.length;i++)if(n=arguments[i],n!=null)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e},Em=EK,AM=["","webkit","Moz","MS","ms","o"],TK=typeof document>"u"?{style:{}}:document.createElement("div"),wK="function",zp=Math.round,mf=Math.abs,lA=Date.now;function lT(t,e){for(var i=e[0].toUpperCase()+e.slice(1),n=0,r,s;n<AM.length;){if(r=AM[n],s=r?r+i:e,s in t)return s;n++}}var tf=typeof window>"u"?{}:window,RL=lT(TK.style,"touchAction"),IL=RL!==void 0;function CK(){if(!IL)return!1;var t={},e=tf.CSS&&tf.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){return t[i]=!e||tf.CSS.supports("touch-action",i)}),t}var SK="compute",DL="auto",tS="manipulation",nf="none",uv="pan-x",dv="pan-y",V_=CK(),kK=/mobile|tablet|ip(ad|hone|od)|android/i,xL="ontouchstart"in tf,AK=lT(tf,"PointerEvent")!==void 0,RK=xL&&kK.test(navigator.userAgent),sb="touch",IK="pen",cA="mouse",DK="kinect",xK=25,Zs=1,$f=2,lr=4,Ea=8,iE=1,ab=2,ob=4,lb=8,Tm=16,rc=ab|ob,rf=lb|Tm,ML=rc|rf,PL=["x","y"],nE=["clientX","clientY"];function Qc(t,e,i){if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(var n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function cT(t,e){return typeof t===wK?t.apply(e&&e[0]||void 0,e):t}function Vh(t,e){return-1<t.indexOf(e)}function MK(t){if(Vh(t,nf))return nf;var e=Vh(t,uv),i=Vh(t,dv);return e&&i?nf:e||i?e?uv:dv:Vh(t,tS)?tS:DL}var OL=function(){function t(i,n){this.manager=i,this.set(n)}var e=t.prototype;return e.set=function(i){i===SK&&(i=this.compute()),IL&&this.manager.element.style&&V_[i]&&(this.manager.element.style[RL]=i),this.actions=i.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var i=[];return Qc(this.manager.recognizers,function(n){cT(n.options.enable,[n])&&(i=i.concat(n.getTouchAction()))}),MK(i.join(" "))},e.preventDefaults=function(i){var n=i.srcEvent,r=i.offsetDirection;if(this.manager.session.prevented)return void n.preventDefault();var s=this.actions,a=Vh(s,nf)&&!V_[nf],o=Vh(s,dv)&&!V_[dv],c=Vh(s,uv)&&!V_[uv];if(a){var d=i.pointers.length===1,p=2>i.distance,m=250>i.deltaTime;if(d&&p&&m)return}return c&&o?void 0:a||o&&r&rc||c&&r&rf?this.preventSrc(n):void 0},e.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},t}();function uA(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function NL(t){var e=t.length;if(e===1)return{x:zp(t[0].clientX),y:zp(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:zp(i/e),y:zp(n/e)}}function RM(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:zp(t.pointers[i].clientX),clientY:zp(t.pointers[i].clientY)},i++;return{timeStamp:lA(),pointers:e,center:NL(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rE(t,e,i){i||(i=PL);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function iS(t,e,i){i||(i=PL);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function GL(t,e){return t===e?iE:mf(t)>=mf(e)?0>t?ab:ob:0>e?lb:Tm}function PK(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};(e.eventType===Zs||s.eventType===lr)&&(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function UL(t,e,i){return{x:e/t||0,y:i/t||0}}function OK(t,e){return rE(e[0],e[1],nE)/rE(t[0],t[1],nE)}function NK(t,e){return iS(e[1],e[0],nE)+iS(t[1],t[0],nE)}function GK(t,e){var i=t.lastInterval||e,n=e.timeStamp-i.timeStamp,r,s,a,o;if(e.eventType!==Ea&&(n>xK||i.velocity===void 0)){var c=e.deltaX-i.deltaX,d=e.deltaY-i.deltaY,p=UL(n,c,d);s=p.x,a=p.y,r=mf(p.x)>mf(p.y)?p.x:p.y,o=GL(c,d),t.lastInterval=e}else r=i.velocity,s=i.velocityX,a=i.velocityY,o=i.direction;e.velocity=r,e.velocityX=s,e.velocityY=a,e.direction=o}function UK(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=RM(e)),1<r&&!i.firstMultiple?i.firstMultiple=RM(e):r===1&&(i.firstMultiple=!1);var s=i.firstInput,a=i.firstMultiple,o=a?a.center:s.center,c=e.center=NL(n);e.timeStamp=lA(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=iS(o,c),e.distance=rE(o,c),PK(i,e),e.offsetDirection=GL(e.deltaX,e.deltaY);var d=UL(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=mf(d.x)>mf(d.y)?d.x:d.y,e.scale=a?OK(a.pointers,n):1,e.rotation=a?NK(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,GK(i,e);var p=t.element;uA(e.srcEvent.target,p)&&(p=e.srcEvent.target),e.target=p}function LK(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&Zs&&n-r==0;i.isFirst=!!s,i.isFinal=!!(e&(lr|Ea)&&n-r==0),s&&(t.session={}),i.eventType=e,UK(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function hv(t){return t.trim().split(/\s+/g)}function qg(t,e,i){Qc(hv(e),function(n){t.addEventListener(n,i,!1)})}function Yg(t,e,i){Qc(hv(e),function(n){t.removeEventListener(n,i,!1)})}function IM(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var zm=function(){function t(i,n){var r=this;this.manager=i,this.callback=n,this.element=i.element,this.target=i.options.inputTarget,this.domHandler=function(s){cT(i.options.enable,[i])&&r.handler(s)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qg(this.element,this.evEl,this.domHandler),this.evTarget&&qg(this.target,this.evTarget,this.domHandler),this.evWin&&qg(IM(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Yg(this.element,this.evEl,this.domHandler),this.evTarget&&Yg(this.target,this.evTarget,this.domHandler),this.evWin&&Yg(IM(this.element),this.evWin,this.domHandler)},t}();function yf(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}var BK={pointerdown:Zs,pointermove:$f,pointerup:lr,pointercancel:Ea,pointerout:Ea},FK={2:sb,3:IK,4:cA,5:DK},LL="pointerdown",BL="pointermove pointerup pointercancel";tf.MSPointerEvent&&!tf.PointerEvent&&(LL="MSPointerDown",BL="MSPointerMove MSPointerUp MSPointerCancel");var FL=function(t){function e(){var n=e.prototype,r;return n.evEl=LL,n.evWin=BL,r=t.apply(this,arguments)||this,r.store=r.manager.session.pointerEvents=[],r}Po(e,t);var i=e.prototype;return i.handler=function(n){var r=this.store,s=!1,a=n.type.toLowerCase().replace("ms",""),o=BK[a],c=FK[n.pointerType]||n.pointerType,d=yf(r,n.pointerId,"pointerId");o&Zs&&(n.button===0||c===sb)?0>d&&(r.push(n),d=r.length-1):o&(lr|Ea)&&(s=!0),0>d||(r[d]=n,this.callback(this.manager,o,{pointers:r,changedPointers:[n],pointerType:c,srcEvent:n}),s&&r.splice(d,1))},e}(zm);function fv(t){return Array.prototype.slice.call(t,0)}function dA(t,e,i){for(var n=[],r=[],s=0,a;s<t.length;)a=e?t[s][e]:t[s],0>yf(r,a)&&n.push(t[s]),r[s]=a,s++;return i&&(e?n=n.sort(function(o,c){return o[e]>c[e]}):n=n.sort()),n}var $K={touchstart:Zs,touchmove:$f,touchend:lr,touchcancel:Ea},HK="touchstart touchmove touchend touchcancel",hA=function(t){function e(){var n;return e.prototype.evTarget=HK,n=t.apply(this,arguments)||this,n.targetIds={},n}Po(e,t);var i=e.prototype;return i.handler=function(n){var r=$K[n.type],s=VK.call(this,n,r);s&&this.callback(this.manager,r,{pointers:s[0],changedPointers:s[1],pointerType:sb,srcEvent:n})},e}(zm);function VK(t,e){var i=fv(t.touches),n=this.targetIds;if(e&(Zs|$f)&&i.length===1)return n[i[0].identifier]=!0,[i,i];var r=fv(t.changedTouches),s=[],a=this.target,o,c;if(c=i.filter(function(d){return uA(d.target,a)}),e===Zs)for(o=0;o<c.length;)n[c[o].identifier]=!0,o++;for(o=0;o<r.length;)n[r[o].identifier]&&s.push(r[o]),e&(lr|Ea)&&delete n[r[o].identifier],o++;return s.length?[dA(c.concat(s),"identifier",!0),s]:void 0}var qK={mousedown:Zs,mousemove:$f,mouseup:lr},YK="mousedown",WK="mousemove mouseup",fA=function(t){function e(){var n=e.prototype,r;return n.evEl=YK,n.evWin=WK,r=t.apply(this,arguments)||this,r.pressed=!1,r}Po(e,t);var i=e.prototype;return i.handler=function(n){var r=qK[n.type];r&Zs&&n.button===0&&(this.pressed=!0),r&$f&&n.which!==1&&(r=lr),this.pressed&&(r&lr&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:cA,srcEvent:n}))},e}(zm),jK=2500,DM=25;function xM(t){var e=t.changedPointers,i=e[0];if(i.identifier===this.primaryTouch){var n={x:i.clientX,y:i.clientY},r=this.lastTouches;this.lastTouches.push(n);var s=function(){var a=r.indexOf(n);-1<a&&r.splice(a,1)};setTimeout(s,jK)}}function zK(t,e){t&Zs?(this.primaryTouch=e.changedPointers[0].identifier,xM.call(this,e)):t&(lr|Ea)&&xM.call(this,e)}function XK(t){for(var e=Math.abs,i=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var s=this.lastTouches[r],a=e(i-s.x),o=e(n-s.y);if(a<=DM&&o<=DM)return!0}return!1}var $L=function(){var t=function(e){function i(r,s){var a;return a=e.call(this,r,s)||this,a.handler=function(o,c,d){var p=d.pointerType===sb,m=d.pointerType===cA;if(!(m&&d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents)){if(p)zK.call(H_(H_(a)),c,d);else if(m&&XK.call(H_(H_(a)),d))return;a.callback(o,c,d)}},a.touch=new hA(a.manager,a.handler),a.mouse=new fA(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}Po(i,e);var n=i.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},i}(zm);return t}();function KK(t){var e=t.options.inputClass,i;return i=e||(AK?FL:RK?hA:xL?$L:fA),new i(t,LK)}function Xp(t,e,i){return!!Array.isArray(t)&&(Qc(t,i[e],i),!0)}var _0=1,So=2,wm=4,bd=8,Jc=bd,pv=16,Ql=32,ZK=1;function QK(){return ZK++}function q_(t,e){var i=e.manager;return i?i.get(t):t}function MM(t){return t&pv?"cancel":t&bd?"end":t&wm?"move":t&So?"start":""}var cb=function(){function t(i){i===void 0&&(i={}),this.options=dl({enable:!0},i),this.id=QK(),this.manager=null,this.state=_0,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(i){return Em(this.options,i),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(i){if(Xp(i,"recognizeWith",this))return this;var n=this.simultaneous;return i=q_(i,this),n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this},e.dropRecognizeWith=function(i){return Xp(i,"dropRecognizeWith",this)?this:(i=q_(i,this),delete this.simultaneous[i.id],this)},e.requireFailure=function(i){if(Xp(i,"requireFailure",this))return this;var n=this.requireFail;return i=q_(i,this),yf(n,i)===-1&&(n.push(i),i.requireFailure(this)),this},e.dropRequireFailure=function(i){if(Xp(i,"dropRequireFailure",this))return this;i=q_(i,this);var n=yf(this.requireFail,i);return-1<n&&this.requireFail.splice(n,1),this},e.hasRequireFailures=function(){return 0<this.requireFail.length},e.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},e.emit=function(n){function r(o){s.manager.emit(o,n)}var s=this,a=this.state;a<bd&&r(s.options.event+MM(a)),r(s.options.event),n.additionalEvent&&r(n.additionalEvent),a>=bd&&r(s.options.event+MM(a))},e.tryEmit=function(i){return this.canEmit()?this.emit(i):void(this.state=Ql)},e.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(Ql|_0)))return!1;i++}return!0},e.recognize=function(i){var n=Em({},i);return cT(this.options.enable,[this,n])?(this.state&(Jc|pv|Ql)&&(this.state=_0),this.state=this.process(n),void(this.state&(So|wm|bd|pv)&&this.tryEmit(n))):(this.reset(),void(this.state=Ql))},e.process=function(){},e.getTouchAction=function(){},e.reset=function(){},t}(),HL={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},JK=1,PM=2;function OM(t,e){var i=t.element;if(i.style){var n;Qc(t.options.cssProps,function(r,s){n=lT(i.style,s),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function eZ(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var NM=function(){function t(i,n){var r=this;this.options=Em({},HL,n||{}),this.options.inputTarget=this.options.inputTarget||i,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=i,this.input=KK(this),this.touchAction=new OL(this,this.options.touchAction),OM(this,!0),Qc(this.options.recognizers,function(s){var a=r.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}var e=t.prototype;return e.set=function(i){return Em(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},e.stop=function(i){this.session.stopped=i?PM:JK},e.recognize=function(i){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(i);var r=this.recognizers,s=n.curRecognizer,a;(!s||s&&s.state&Jc)&&(n.curRecognizer=null,s=null);for(var o=0;o<r.length;)a=r[o],n.stopped!==PM&&(!s||a===s||a.canRecognizeWith(s))?a.recognize(i):a.reset(),!s&&a.state&(So|wm|bd)&&(n.curRecognizer=a,s=a),o++}},e.get=function(i){if(i instanceof cb)return i;for(var n=this.recognizers,r=0;r<n.length;r++)if(n[r].options.event===i)return n[r];return null},e.add=function(i){if(Xp(i,"add",this))return this;var n=this.get(i.options.event);return n&&this.remove(n),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},e.remove=function(i){if(Xp(i,"remove",this))return this;var n=this.get(i);if(i){var r=this.recognizers,s=yf(r,n);s!==-1&&(r.splice(s,1),this.touchAction.update())}return this},e.on=function(i,n){if(i===void 0||n===void 0)return this;var r=this.handlers;return Qc(hv(i),function(s){r[s]=r[s]||[],r[s].push(n)}),this},e.off=function(i,n){if(i===void 0)return this;var r=this.handlers;return Qc(hv(i),function(s){n?r[s]&&r[s].splice(yf(r[s],n),1):delete r[s]}),this},e.emit=function(i,n){this.options.domEvents&&eZ(i,n);var r=this.handlers[i]&&this.handlers[i].slice();if(r&&r.length){n.type=i,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var s=0;s<r.length;)r[s](n),s++}},e.destroy=function(){this.element&&OM(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),tZ={touchstart:Zs,touchmove:$f,touchend:lr,touchcancel:Ea},iZ="touchstart",nZ="touchstart touchmove touchend touchcancel",rZ=function(t){function e(){var n=e.prototype,r;return n.evTarget=iZ,n.evWin=nZ,r=t.apply(this,arguments)||this,r.started=!1,r}Po(e,t);var i=e.prototype;return i.handler=function(n){var r=tZ[n.type];if(r===Zs&&(this.started=!0),!!this.started){var s=sZ.call(this,n,r);r&(lr|Ea)&&s[0].length-s[1].length==0&&(this.started=!1),this.callback(this.manager,r,{pointers:s[0],changedPointers:s[1],pointerType:sb,srcEvent:n})}},e}(zm);function sZ(t,e){var i=fv(t.touches),n=fv(t.changedTouches);return e&(lr|Ea)&&(i=dA(i.concat(n),"identifier",!0)),[i,n]}var Cm=function(t){function e(n){return n===void 0&&(n={}),t.call(this,dl({pointers:1},n))||this}Po(e,t);var i=e.prototype;return i.attrTest=function(n){var r=this.options.pointers;return r===0||n.pointers.length===r},i.process=function(n){var r=this.state,s=n.eventType,a=r&(So|wm),o=this.attrTest(n);return a&&(s&Ea||!o)?r|pv:a||o?s&lr?r|bd:r&So?r|wm:So:Ql},e}(cb),rw=function(t){function e(n){var r;return n===void 0&&(n={}),r=t.call(this,dl({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}Po(e,t);var i=e.prototype;return i.getTouchAction=function(){return[tS]},i.process=function(n){var r=this,s=this.options,a=n.pointers.length===s.pointers,o=n.distance<s.threshold,c=n.deltaTime<s.time;if(this.reset(),n.eventType&Zs&&this.count===0)return this.failTimeout();if(o&&c&&a){if(n.eventType!==lr)return this.failTimeout();var d=!this.pTime||n.timeStamp-this.pTime<s.interval,p=!this.pCenter||rE(this.pCenter,n.center)<s.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,p&&d?this.count+=1:this.count=1,this._input=n;var m=this.count%s.taps;if(m==0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){r.state=Jc,r.tryEmit()},s.interval),So):Jc}return Ql},i.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=Ql},this.options.interval),Ql},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){this.state===Jc&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(cb);function VL(t){return t===Tm?"down":t===lb?"up":t===ab?"left":t===ob?"right":""}var nS=function(t){var e=Math.abs;function i(r){var s;return r===void 0&&(r={}),s=t.call(this,dl({event:"pan",threshold:10,pointers:1,direction:ML},r))||this,s.pX=null,s.pY=null,s}Po(i,t);var n=i.prototype;return n.getTouchAction=function(){var r=this.options.direction,s=[];return r&rc&&s.push(dv),r&rf&&s.push(uv),s},n.directionTest=function(r){var s=this.options,a=!0,o=r.distance,c=r.direction,d=r.deltaX,p=r.deltaY;return c&s.direction||(s.direction&rc?(c=d===0?iE:0>d?ab:ob,a=d!==this.pX,o=e(r.deltaX)):(c=p===0?iE:0>p?lb:Tm,a=p!==this.pY,o=e(r.deltaY))),r.direction=c,a&&o>s.threshold&&c&s.direction},n.attrTest=function(r){return Cm.prototype.attrTest.call(this,r)&&(this.state&So||!(this.state&So)&&this.directionTest(r))},n.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var s=VL(r.direction);s&&(r.additionalEvent=this.options.event+s),t.prototype.emit.call(this,r)},i}(Cm),GM=function(t){function e(n){return n===void 0&&(n={}),t.call(this,dl({event:"swipe",threshold:10,velocity:.3,direction:rc|rf,pointers:1},n))||this}Po(e,t);var i=e.prototype;return i.getTouchAction=function(){return nS.prototype.getTouchAction.call(this)},i.attrTest=function(n){var r=this.options.direction,s;return r&(rc|rf)?s=n.overallVelocity:r&rc?s=n.overallVelocityX:r&rf&&(s=n.overallVelocityY),t.prototype.attrTest.call(this,n)&&r&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&mf(s)>this.options.velocity&&n.eventType&lr},i.emit=function(n){var r=VL(n.offsetDirection);r&&this.manager.emit(this.options.event+r,n),this.manager.emit(this.options.event,n)},e}(Cm),UM=function(t){var e=Math.abs;function i(r){return r===void 0&&(r={}),t.call(this,dl({event:"pinch",threshold:0,pointers:2},r))||this}Po(i,t);var n=i.prototype;return n.getTouchAction=function(){return[nf]},n.attrTest=function(r){return t.prototype.attrTest.call(this,r)&&(e(r.scale-1)>this.options.threshold||this.state&So)},n.emit=function(r){if(r.scale!==1){var s=1>r.scale?"in":"out";r.additionalEvent=this.options.event+s}t.prototype.emit.call(this,r)},i}(Cm),LM=function(t){var e=Math.abs;function i(r){return r===void 0&&(r={}),t.call(this,dl({event:"rotate",threshold:0,pointers:2},r))||this}Po(i,t);var n=i.prototype;return n.getTouchAction=function(){return[nf]},n.attrTest=function(r){return t.prototype.attrTest.call(this,r)&&(e(r.rotation)>this.options.threshold||this.state&So)},i}(Cm),BM=function(t){function e(n){var r;return n===void 0&&(n={}),r=t.call(this,dl({event:"press",pointers:1,time:251,threshold:9},n))||this,r._timer=null,r._input=null,r}Po(e,t);var i=e.prototype;return i.getTouchAction=function(){return[DL]},i.process=function(n){var r=this,s=this.options,a=n.pointers.length===s.pointers,o=n.distance<s.threshold,c=n.deltaTime>s.time;if(this._input=n,!o||!a||n.eventType&(lr|Ea)&&!c)this.reset();else if(n.eventType&Zs)this.reset(),this._timer=setTimeout(function(){r.state=Jc,r.tryEmit()},s.time);else if(n.eventType&lr)return Jc;return Ql},i.reset=function(){clearTimeout(this._timer)},i.emit=function(n){this.state!==Jc||(n&&n.eventType&lr?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=lA(),this.manager.emit(this.options.event,this._input)))},e}(cb);function qL(t,e,i){return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=window.console&&(window.console.warn||window.console.log);return s&&s.call(window.console,"DEPRECATED METHOD: "+e+`
`+i+` AT 
`,r),t.apply(this,arguments)}}var YL=qL(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===void 0)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),aZ=qL(function(t,e){return YL(t,e,!0)},"merge","Use `assign`.");function oZ(t,e,i){var n=e.prototype,r;r=t.prototype=Object.create(n),r.constructor=t,r._super=n,i&&Em(r,i)}function FM(t,e){return function(){return t.apply(e,arguments)}}var lZ=function(){var t=function(e,i){return i===void 0&&(i={}),new NM(e,dl({recognizers:[[LM,{enable:!1}],[UM,{enable:!1},["rotate"]],[GM,{direction:rc}],[nS,{direction:rc},["swipe"]],[rw],[rw,{event:"doubletap",taps:2},["tap"]],[BM]]},i))};return t.VERSION="2.0.15",t.DIRECTION_ALL=ML,t.DIRECTION_DOWN=Tm,t.DIRECTION_LEFT=ab,t.DIRECTION_RIGHT=ob,t.DIRECTION_UP=lb,t.DIRECTION_HORIZONTAL=rc,t.DIRECTION_VERTICAL=rf,t.DIRECTION_NONE=iE,t.DIRECTION_DOWN=Tm,t.INPUT_START=Zs,t.INPUT_MOVE=$f,t.INPUT_END=lr,t.INPUT_CANCEL=Ea,t.STATE_POSSIBLE=_0,t.STATE_BEGAN=So,t.STATE_CHANGED=wm,t.STATE_ENDED=bd,t.STATE_RECOGNIZED=Jc,t.STATE_CANCELLED=pv,t.STATE_FAILED=Ql,t.Manager=NM,t.Input=zm,t.TouchAction=OL,t.TouchInput=hA,t.MouseInput=fA,t.PointerEventInput=FL,t.TouchMouseInput=$L,t.SingleTouchInput=rZ,t.Recognizer=cb,t.AttrRecognizer=Cm,t.Tap=rw,t.Pan=nS,t.Swipe=GM,t.Pinch=UM,t.Rotate=LM,t.Press=BM,t.on=qg,t.off=Yg,t.each=Qc,t.merge=aZ,t.extend=YL,t.bindFn=FM,t.assign=Em,t.inherit=oZ,t.bindFn=FM,t.prefixed=lT,t.toArray=fv,t.inArray=yf,t.uniqueArray=dA,t.splitStr=hv,t.boolOrFn=cT,t.hasParent=uA,t.addEventListeners=qg,t.removeEventListeners=Yg,t.defaults=HL,t}(),_d=yl(function(t){function e(){var n=function(){};return{on:n,off:n,destroy:n,emit:n,get:function(){return{set:n}}}}if(typeof window<"u"){var i=window.Hammer||lZ;t.exports=i}else t.exports=function(){return e()}});function Fl(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=_d(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(i){e.hammer.on(i,function(n){n.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){cZ(i.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=eS(),this.escListener=this.deactivate.bind(this)}bL(Fl.prototype),Fl.current=null,Fl.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},Fl.prototype.activate=function(){Fl.current&&Fl.current.deactivate(),Fl.current=this,this.active=!0,this.dom.overlay.style.display="none",we.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},Fl.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",we.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Fl.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()};function cZ(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var uZ=Fl,dZ=yl(function(t,e){e.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},e.en_EN=e.en,e.en_US=e.en,e.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."},e.de_DE=e.de,e.es={edit:"Editar",del:"Eliminar selección",back:"Atrás",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},e.es_ES=e.es,e.it={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."},e.it_IT=e.it,e.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},e.nl_NL=e.nl,e.nl_BE=e.nl,e["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar nó",addEdge:"Adicionar aresta",editNode:"Editar nó",editEdge:"Editar aresta",addDescription:"Clique em um espaço em branco para adicionar um novo nó",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",createEdgeError:"Não foi possível linkar arestas a um cluster.",deleteClusterError:"Clusters não puderam ser removidos.",editClusterError:"Clusters não puderam ser editados."},e["pt-BR"]=e["pt-br"],e.pt_BR=e["pt-br"],e.pt_br=e["pt-br"],e.ru={edit:"Редактировать",del:"Удалить выбранное",back:"Назад",addNode:"Добавить узел",addEdge:"Добавить ребро",editNode:"Редактировать узел",editEdge:"Редактировать ребро",addDescription:"Кликните в свободное место, чтобы добавить новый узел.",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",createEdgeError:"Невозможно соединить ребра в кластер.",deleteClusterError:"Кластеры не могут быть удалены",editClusterError:"Кластеры недоступны для редактирования."},e.ru_RU=e.ru,e.cn={edit:"编辑",del:"删除选定",back:"返回",addNode:"添加节点",addEdge:"添加连接线",editNode:"编辑节点",editEdge:"编辑连接线",addDescription:"单击空白处放置新节点。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",createEdgeError:"无法将连接线连接到群集。",deleteClusterError:"无法删除群集。",editClusterError:"无法编辑群集。"},e.zh_CN=e.cn,e.uk={edit:"Редагувати",del:"Видалити обране",back:"Назад",addNode:"Додати вузол",addEdge:"Додати край",editNode:"Редагувати вузол",editEdge:"Редагувати край",addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",createEdgeError:"Не можливо об'єднати краї в групу.",deleteClusterError:"Групи не можуть бути видалені.",editClusterError:"Групи недоступні для редагування."},e.uk_UA=e.uk,e.fr={edit:"Editer",del:"Effacer la selection",back:"Retour",addNode:"Ajouter un noeud",addEdge:"Ajouter un lien",editNode:"Editer le noeud",editEdge:"Editer le lien",addDescription:"Cliquez dans un endroit vide pour placer un noeud.",edgeDescription:"Cliquez sur un noeud et glissez le lien vers un autre noeud pour les connecter.",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un noeud.",createEdgeError:"Impossible de créer un lien vers un cluster.",deleteClusterError:"Les clusters ne peuvent pas être éffacés.",editClusterError:"Les clusters ne peuvent pas être édites."},e.fr_FR=e.fr});function hZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Qe=hZ;function $M(t,e){for(var i=0,n;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function fZ(t,e,i){return e&&$M(t.prototype,e),i&&$M(t,i),t}var Je=fZ,pZ=function(){var t=Math.floor;function e(){Qe(this,e),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return Je(e,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var i=this.image.width,n=this.image.height;this.width=i,this.height=n;var r=t(n/2),s=t(n/4),a=t(n/8),o=t(n/16),c=t(i/2),d=t(i/4),p=t(i/8),m=t(i/16);this.canvas.width=3*d,this.canvas.height=r,this.coordinates=[[0,0,c,r],[c,0,d,s],[c,s,p,a],[5*p,s,m,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return this.coordinates!==void 0}},{key:"_fillMipMap",value:function(){var i=this.canvas.getContext("2d"),n=this.coordinates[0];i.drawImage(this.image,n[0],n[1],n[2],n[3]);for(var r=1;r<this.NUM_ITERATIONS;r++){var s=this.coordinates[r-1],a=this.coordinates[r];i.drawImage(this.canvas,s[0],s[1],s[2],s[3],a[0],a[1],a[2],a[3])}}},{key:"drawImageAtPosition",value:function(i,n,r,s,a,o){if(this.initialized())if(2<n){n*=.5;for(var c=0;2<n&&c<this.NUM_ITERATIONS;)n*=.5,c+=1;c>=this.NUM_ITERATIONS&&(c=this.NUM_ITERATIONS-1);var d=this.coordinates[c];i.drawImage(this.canvas,d[0],d[1],d[2],d[3],r,s,a,o)}else i.drawImage(this.image,r,s,a,o)}}]),e}(),mZ=function(){function t(e){Qe(this,t),this.images={},this.imageBroken={},this.callback=e}return Je(t,[{key:"_tryloadBrokenUrl",value:function(e,i,n){return e===void 0||n===void 0?void 0:i===void 0?void console.warn("No broken url image defined"):(n.image.onerror=function(){console.error("Could not load brokenImage:",i)},void(n.image.src=i))}},{key:"_redrawWithImage",value:function(e){this.callback&&this.callback(e)}},{key:"load",value:function(e,i){var n=this,r=this.images[e];if(r)return r;var s=new pZ;return this.images[e]=s,s.image.onload=function(){n._fixImageCoordinates(s.image),s.init(),n._redrawWithImage(s)},s.image.onerror=function(){console.error("Could not load image:",e),n._tryloadBrokenUrl(e,i,s)},s.image.src=e,s}},{key:"_fixImageCoordinates",value:function(e){e.width===0&&(document.body.appendChild(e),e.width=e.offsetWidth,e.height=e.offsetHeight,document.body.removeChild(e))}}]),t}(),yZ=function(){function t(){Qe(this,t),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},we.extend(this.options,this.defaultOptions)}return Je(t,[{key:"setOptions",value:function(e){var i=["useDefaultGroups"];if(e!==void 0){for(var n in e)if(e.hasOwnProperty(n)&&i.indexOf(n)===-1){var r=e[n];this.add(n,r)}}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(e){var i=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],n=this.groups[e];if(n===void 0&&i)if(this.options.useDefaultGroups===!1&&0<this.groupsArray.length){var r=this.groupIndex%this.groupsArray.length;this.groupIndex++,n={},n.color=this.groups[this.groupsArray[r]],this.groups[e]=n}else{var s=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,n={},n.color=this.defaultGroups[s],this.groups[e]=n}return n}},{key:"add",value:function(e,i){return this.groups[e]=i,this.groupsArray.push(e),i}}]),t}();function gZ(t){if(Array.isArray(t))return t}var vZ=gZ;function bZ(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(n=(o=a.next()).done)&&(i.push(o.value),!(e&&i.length===e));n=!0);}catch(c){r=!0,s=c}finally{try{n||a.return==null||a.return()}finally{if(r)throw s}}return i}var _Z=bZ;function EZ(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var TZ=EZ;function wZ(t,e){return vZ(t)||_Z(t,e)||TZ()}var Tr=wZ,zs=yl(function(t){function e(n){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e(n)}function i(n){return t.exports=typeof Symbol=="function"&&e(Symbol.iterator)==="symbol"?i=function(r){return e(r)}:i=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":e(r)},i(n)}t.exports=i}),Jl=function(){var t=Math.cos,e=Math.sin;function i(){Qe(this,i)}return Je(i,null,[{key:"choosify",value:function(n,r){var s=["node","edge","label"],a=!0,o=we.topMost(r,"chosen");if(typeof o=="boolean")a=o;else if(zs(o)==="object"){if(s.indexOf(n)===-1)throw new Error("choosify: subOption '"+n+"' should be one of '"+s.join("', '")+"'");var c=we.topMost(r,["chosen",n]);(typeof c=="boolean"||typeof c=="function")&&(a=c)}return a}},{key:"pointInRect",value:function(n,r,s){if(0>=n.width||0>=n.height)return!1;if(s!==void 0){var a={x:r.x-s.x,y:r.y-s.y};if(s.angle!==0){var o=-s.angle,c={x:t(o)*a.x-e(o)*a.y,y:e(o)*a.x+t(o)*a.y};r=c}else r=a}var d=n.x+n.width,p=n.y+n.width;return n.left<r.x&&d>r.x&&n.top<r.y&&p>r.y}},{key:"isValidLabel",value:function(n){return typeof n=="string"&&n!==""}}]),i}(),CZ=function(){function t(e){Qe(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return Je(t,[{key:"_add",value:function(e,i){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"normal";this.lines[e]===void 0&&(this.lines[e]={width:0,height:0,blocks:[]});var r=i;(i===void 0||i==="")&&(r=" ");var s=this.measureText(r,n),a=Object.assign({},s.values);a.text=i,a.width=s.width,a.mod=n,(i===void 0||i==="")&&(a.width=0),this.lines[e].blocks.push(a),this.lines[e].width+=a.width}},{key:"curWidth",value:function(){var e=this.lines[this.current];return e===void 0?0:e.width}},{key:"append",value:function(e){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,i)}},{key:"newLine",value:function(e){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"normal";this._add(this.current,e,i),this.current++}},{key:"determineLineHeights",value:function(){for(var e=0;e<this.lines.length;e++){var i=this.lines[e],n=0;if(i.blocks!==void 0)for(var r=0,s;r<i.blocks.length;r++)s=i.blocks[r],n<s.height&&(n=s.height);i.height=n}}},{key:"determineLabelSize",value:function(){for(var e=0,i=0,n=0,r;n<this.lines.length;n++)r=this.lines[n],r.width>e&&(e=r.width),i+=r.height;this.width=e,this.height=i}},{key:"removeEmptyBlocks",value:function(){for(var e=[],i=0,n;i<this.lines.length;i++)if(n=this.lines[i],n.blocks.length!==0){if(i==this.lines.length-1&&n.width===0)continue;var r={};Object.assign(r,n),r.blocks=[];for(var s=void 0,a=[],o=0,c;o<n.blocks.length;o++)c=n.blocks[o],c.width===0?s===void 0&&(s=c):a.push(c);a.length===0&&s!==void 0&&a.push(s),r.blocks=a,e.push(r)}return e}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var e=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:e}}}]),t}(),SZ={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/\_/,"`":/`/,afterBold:/[^\*]/,afterItal:/[^_]/,afterMono:/[^`]/},HM=function(){function t(e){Qe(this,t),this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return Je(t,[{key:"mod",value:function(){return this.modStack.length===0?"normal":this.modStack[0]}},{key:"modName",value:function(){return this.modStack.length===0?"normal":this.modStack[0]==="mono"?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),0<this.buffer.length&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(e){e===" "&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1),e!=" "&&(this.buffer+=e)}},{key:"parseWS",value:function(e){return!!/[ \t]/.test(e)&&(this.mono?this.add(e):this.spacing=!0,!0)}},{key:"setTag",value:function(e){this.emitBlock(),this[e]=!0,this.modStack.unshift(e)}},{key:"unsetTag",value:function(e){this.emitBlock(),this[e]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(e,i){return!(this.mono||this[e]||!this.match(i))&&(this.setTag(e),!0)}},{key:"match",value:function(e){var i=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],n=this.prepareRegExp(e),r=Tr(n,2),s=r[0],a=r[1],o=s.test(this.text.substr(this.position,a));return o&&i&&(this.position+=a-1),o}},{key:"parseEndTag",value:function(e,i,n){var r=this.mod()===e;return r=e==="mono"?r&&this.mono:r&&!this.mono,!!(r&&this.match(i))&&(n===void 0?this.unsetTag(e):(this.position===this.text.length-1||this.match(n,!1))&&this.unsetTag(e),!0)}},{key:"replace",value:function(e,i){return!!this.match(e)&&(this.add(i),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(e){var i,n;if(e instanceof RegExp)n=e,i=1;else{var r=SZ[e];n=r===void 0?new RegExp(e):r,i=e.length}return[n,i]}}]),t}(),kZ=function(){function t(e,i,n,r){var s=this;Qe(this,t),this.ctx=e,this.parent=i,this.selected=n,this.hover=r,this.lines=new CZ(function(a,o){if(a===void 0)return 0;var c=s.parent.getFormattingValues(e,n,r,o),d=0;if(a!==""){var p=s.ctx.measureText(a);d=p.width}return{width:d,values:c}})}return Je(t,[{key:"process",value:function(e){if(!Jl.isValidLabel(e))return this.lines.finalize();var i=this.parent.fontOptions;e=e.replace(/\r\n/g,`
`),e=e.replace(/\r/g,`
`);var n=(e+"").split(`
`),r=n.length;if(i.multi){for(var s=0,a;s<r;s++)if(a=this.splitBlocks(n[s],i.multi),a!==void 0){if(a.length===0){this.lines.newLine("");continue}if(0<i.maxWdt)for(var o=0;o<a.length;o++){var c=a[o].mod,d=a[o].text;this.splitStringIntoLines(d,c,!0)}else for(var p=0;p<a.length;p++){var m=a[p].mod,y=a[p].text;this.lines.append(y,m)}this.lines.newLine()}}else if(0<i.maxWdt)for(var _=0;_<r;_++)this.splitStringIntoLines(n[_]);else for(var E=0;E<r;E++)this.lines.newLine(n[E]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(e){var i="none";return e==="markdown"||e==="md"?i="markdown":(e===!0||e==="html")&&(i="html"),i}},{key:"splitHtmlBlocks",value:function(e){for(var i=new HM(e),n=function(a){if(/&/.test(a)){var o=i.replace(i.text,"&lt;","<")||i.replace(i.text,"&amp;","&");return o||i.add("&"),!0}return!1};i.position<i.text.length;){var r=i.text.charAt(i.position),s=i.parseWS(r)||/</.test(r)&&(i.parseStartTag("bold","<b>")||i.parseStartTag("ital","<i>")||i.parseStartTag("mono","<code>")||i.parseEndTag("bold","</b>")||i.parseEndTag("ital","</i>")||i.parseEndTag("mono","</code>"))||n(r);s||i.add(r),i.position++}return i.emitBlock(),i.blocks}},{key:"splitMarkdownBlocks",value:function(e){for(var i=this,n=new HM(e),r=!0,s=function(c){return!!/\\/.test(c)&&(n.position<i.text.length+1&&(n.position++,c=i.text.charAt(n.position),/ \t/.test(c)?n.spacing=!0:(n.add(c),r=!1)),!0)};n.position<n.text.length;){var a=n.text.charAt(n.position),o=n.parseWS(a)||s(a)||(r||n.spacing)&&(n.parseStartTag("bold","*")||n.parseStartTag("ital","_")||n.parseStartTag("mono","`"))||n.parseEndTag("bold","*","afterBold")||n.parseEndTag("ital","_","afterItal")||n.parseEndTag("mono","`","afterMono");o||(n.add(a),r=!1),n.position++}return n.emitBlock(),n.blocks}},{key:"splitBlocks",value:function(e,i){var n=this.decodeMarkupSystem(i);return n==="none"?[{text:e,mod:"normal"}]:n==="markdown"?this.splitMarkdownBlocks(e):n==="html"?this.splitHtmlBlocks(e):void 0}},{key:"overMaxWidth",value:function(e){var i=this.ctx.measureText(e).width;return this.lines.curWidth()+i>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(e){for(var i="",n=0;n<e.length;){var r=i===""?"":" ",s=i+r+e[n];if(this.overMaxWidth(s))break;i=s,n++}return n}},{key:"getLongestFitWord",value:function(e){for(var i=0;i<e.length&&!this.overMaxWidth(e.slice(0,i));)i++;return i}},{key:"splitStringIntoLines",value:function(e){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"normal",n=2<arguments.length&&arguments[2]!==void 0&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,i),e=e.replace(/^( +)/g,"$1\r"),e=e.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var r=e.split("\r"),s;0<r.length;)if(s=this.getLongestFit(r),s===0){var a=r[0],o=this.getLongestFitWord(a);this.lines.newLine(a.slice(0,o),i),r[0]=a.slice(o)}else{var c=s;r[s-1]===" "?s--:r[c]===" "&&c++;var d=r.slice(0,s).join("");s==r.length&&n?this.lines.append(d,i):this.lines.newLine(d,i),r=r.slice(c)}}}]),t}(),Y_=["bold","ital","boldital","mono"],WL=function(){var t=Math.max,e=Math.min;function i(n,r){var s=2<arguments.length&&arguments[2]!==void 0&&arguments[2];Qe(this,i),this.body=n,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=s}return Je(i,[{key:"setOptions",value:function(n){if(this.elementOptions=n,this.initFontOptions(n.font),Jl.isValidLabel(n.label)?this.labelDirty=!0:n.label=void 0,n.font!==void 0&&n.font!==null){if(typeof n.font=="string")this.baseSize=this.fontOptions.size;else if(zs(n.font)==="object"){var r=n.font.size;r!==void 0&&(this.baseSize=r)}}}},{key:"initFontOptions",value:function(n){var r=this;return we.forEach(Y_,function(s){r.fontOptions[s]={}}),i.parseFontString(this.fontOptions,n)?void(this.fontOptions.vadjust=0):void we.forEach(n,function(s,a){s!=null&&zs(s)!=="object"&&(r.fontOptions[a]=s)})}},{key:"constrain",value:function(n){var r={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},s=we.topMost(n,"widthConstraint");if(typeof s=="number")r.maxWdt=+s,r.minWdt=+s;else if(zs(s)==="object"){var a=we.topMost(n,["widthConstraint","maximum"]);typeof a=="number"&&(r.maxWdt=+a);var o=we.topMost(n,["widthConstraint","minimum"]);typeof o=="number"&&(r.minWdt=+o)}var c=we.topMost(n,"heightConstraint");if(typeof c=="number")r.minHgt=+c;else if(zs(c)==="object"){var d=we.topMost(n,["heightConstraint","minimum"]);typeof d=="number"&&(r.minHgt=+d);var p=we.topMost(n,["heightConstraint","valign"]);typeof p=="string"&&(p==="top"||p==="bottom")&&(r.valign=p)}return r}},{key:"update",value:function(n,r){this.setOptions(n,!0),this.propagateFonts(r),we.deepExtend(this.fontOptions,this.constrain(r)),this.fontOptions.chooser=Jl.choosify("label",r)}},{key:"adjustSizes",value:function(n){var r=n?n.right+n.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=r,this.fontOptions.minWdt-=r);var s=n?n.top+n.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=s)}},{key:"addFontOptionsToPile",value:function(n,r){for(var s=0;s<r.length;++s)this.addFontToPile(n,r[s])}},{key:"addFontToPile",value:function(n,r){if(r!==void 0&&r.font!==void 0&&r.font!==null){var s=r.font;n.push(s)}}},{key:"getBasicOptions",value:function(n){for(var r={},s=0;s<n.length;++s){var a=n[s],o={};i.parseFontString(o,a)&&(a=o),we.forEach(a,function(c,d){c===void 0||r.hasOwnProperty(d)||(Y_.indexOf(d)===-1?r[d]=c:r[d]={})})}return r}},{key:"getFontOption",value:function(n,r,s){for(var a=0,o,c;a<n.length;++a)if(c=n[a],c.hasOwnProperty(r)){if(o=c[r],o==null)continue;var d={};if(i.parseFontString(d,o)&&(o=d),o.hasOwnProperty(s))return o[s]}if(this.fontOptions.hasOwnProperty(s))return this.fontOptions[s];throw new Error("Did not find value for multi-font for property: '"+s+"'")}},{key:"getFontOptions",value:function(n,r){for(var s={},a=["color","size","face","mod","vadjust"],o=0,c;o<a.length;++o)c=a[o],s[c]=this.getFontOption(n,r,c);return s}},{key:"propagateFonts",value:function(n){var r=this,s=[];this.addFontOptionsToPile(s,n),this.fontOptions=this.getBasicOptions(s);for(var a=function(c){var d=Y_[c],p=r.fontOptions[d],m=r.getFontOptions(s,d);we.forEach(m,function(y,_){p[_]=y}),p.size=+p.size,p.vadjust=+p.vadjust},o=0;o<Y_.length;++o)a(o)}},{key:"draw",value:function(n,r,s,a,o){var c=5<arguments.length&&arguments[5]!==void 0?arguments[5]:"middle";if(this.elementOptions.label!==void 0){var d=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&d<this.elementOptions.scaling.label.drawThreshold-1||(d>=this.elementOptions.scaling.label.maxVisible&&(d=+this.elementOptions.scaling.label.maxVisible/this.body.view.scale),this.calculateLabelSize(n,a,o,r,s,c),this._drawBackground(n),this._drawText(n,r,this.size.yLine,c,d))}}},{key:"_drawBackground",value:function(n){if(this.fontOptions.background!==void 0&&this.fontOptions.background!=="none"){n.fillStyle=this.fontOptions.background;var r=this.getSize();n.fillRect(r.left,r.top,r.width,r.height)}}},{key:"_drawText",value:function(n,r,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"middle",o=4<arguments.length?arguments[4]:void 0,c=this._setAlignment(n,r,s,a),d=Tr(c,2);r=d[0],s=d[1],n.textAlign="left",r-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&(this.fontOptions.valign==="top"&&(s-=(this.size.height-this.size.labelHeight)/2),this.fontOptions.valign==="bottom"&&(s+=(this.size.height-this.size.labelHeight)/2));for(var p=0,m;p<this.lineCount;p++)if(m=this.lines[p],m&&m.blocks){var y=0;this.isEdgeLabel||this.fontOptions.align==="center"?y+=(this.size.width-m.width)/2:this.fontOptions.align==="right"&&(y+=this.size.width-m.width);for(var _=0,E;_<m.blocks.length;_++){E=m.blocks[_],n.font=E.font;var C=this._getColor(E.color,o,E.strokeColor),S=Tr(C,2),k=S[0],R=S[1];0<E.strokeWidth&&(n.lineWidth=E.strokeWidth,n.strokeStyle=R,n.lineJoin="round"),n.fillStyle=k,0<E.strokeWidth&&n.strokeText(E.text,r+y,s+E.vadjust),n.fillText(E.text,r+y,s+E.vadjust),y+=E.width}s+=m.height}}},{key:"_setAlignment",value:function(n,r,s,a){return this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===!1?(r=0,s=0,this.fontOptions.align==="top"?(n.textBaseline="alphabetic",s-=4):this.fontOptions.align==="bottom"?(n.textBaseline="hanging",s+=4):n.textBaseline="middle"):n.textBaseline=a,[r,s]}},{key:"_getColor",value:function(n,r,s){var a=n||"#000000",o=s||"#ffffff";if(r<=this.elementOptions.scaling.label.drawThreshold){var c=t(0,e(1,1-(this.elementOptions.scaling.label.drawThreshold-r)));a=we.overrideOpacity(a,c),o=we.overrideOpacity(o,c)}return[a,o]}},{key:"getTextSize",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0&&arguments[1],s=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return this._processLabel(n,r,s),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var n=this.size.left,r=this.size.top-1;if(this.isEdgeLabel){var s=.5*-this.size.width;switch(this.fontOptions.align){case"middle":n=s,r=.5*-this.size.height;break;case"top":n=s,r=-(this.size.height+2);break;case"bottom":n=s,r=2}}var a={left:n,top:r,width:this.size.width,height:this.size.height};return a}},{key:"calculateLabelSize",value:function(n,r,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,c=5<arguments.length&&arguments[5]!==void 0?arguments[5]:"middle";this._processLabel(n,r,s),this.size.left=a-.5*this.size.width,this.size.top=o-.5*this.size.height,this.size.yLine=o+.5*(1-this.lineCount)*this.fontOptions.size,c==="hanging"&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(n,r,s,a){var o=function(p,m,y){return m==="normal"?y==="mod"?"":p[y]:p[m][y]===void 0?p[y]:p[m][y]},c={color:o(this.fontOptions,a,"color"),size:o(this.fontOptions,a,"size"),face:o(this.fontOptions,a,"face"),mod:o(this.fontOptions,a,"mod"),vadjust:o(this.fontOptions,a,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(r||s)&&(a==="normal"&&this.fontOptions.chooser===!0&&this.elementOptions.labelHighlightBold?c.mod="bold":typeof this.fontOptions.chooser=="function"&&this.fontOptions.chooser(c,this.elementOptions.id,r,s));var d="";return c.mod!==void 0&&c.mod!==""&&(d+=c.mod+" "),d+=c.size+"px "+c.face,n.font=d.replace(/"/g,""),c.font=n.font,c.height=c.size,c}},{key:"differentState",value:function(n,r){return n!==this.selectedState||r!==this.hoverState}},{key:"_processLabelText",value:function(n,r,s,a){var o=new kZ(n,this,r,s);return o.process(a)}},{key:"_processLabel",value:function(n,r,s){if(this.labelDirty!==!1||this.differentState(r,s)){var a=this._processLabelText(n,r,s,this.elementOptions.label);0<this.fontOptions.minWdt&&a.width<this.fontOptions.minWdt&&(a.width=this.fontOptions.minWdt),this.size.labelHeight=a.height,0<this.fontOptions.minHgt&&a.height<this.fontOptions.minHgt&&(a.height=this.fontOptions.minHgt),this.lines=a.lines,this.lineCount=a.lines.length,this.size.width=a.width,this.size.height=a.height,this.selectedState=r,this.hoverState=s,this.labelDirty=!1}}},{key:"visible",value:function(){if(this.size.width===0||this.size.height===0||this.elementOptions.label===void 0)return!1;var n=this.fontOptions.size*this.body.view.scale;return!(n<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(n,r){if(!r||typeof r!="string")return!1;var s=r.split(" ");return n.size=s[0].replace("px",""),n.face=s[1],n.color=s[2],!0}}]),i}();function AZ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var RZ=AZ;function IZ(t,e){return e&&(zs(e)==="object"||typeof e=="function")?e:RZ(t)}var Bi=IZ,Fi=yl(function(t){function e(i){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},e(i)}t.exports=e}),DZ=yl(function(t){function e(i,n){return t.exports=e=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},e(i,n)}t.exports=e});function xZ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&DZ(t,e)}var $i=xZ,Hf=function(){var t=Math.cos,e=Math.sin,i=Math.abs,n=Math.min;function r(s,a,o){Qe(this,r),this.body=a,this.labelModule=o,this.setOptions(s),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return Je(r,[{key:"setOptions",value:function(s){this.options=s}},{key:"_setMargins",value:function(s){this.margin={},this.options.margin&&(zs(this.options.margin)=="object"?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),s.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(s,a){var o=this.options.borderWidth;return this.resize(s),n(i(this.width/2/t(a)),i(this.height/2/e(a)))+o}},{key:"enableShadow",value:function(s,a){a.shadow&&(s.shadowColor=a.shadowColor,s.shadowBlur=a.shadowSize,s.shadowOffsetX=a.shadowX,s.shadowOffsetY=a.shadowY)}},{key:"disableShadow",value:function(s,a){a.shadow&&(s.shadowColor="rgba(0,0,0,0)",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(s,a){if(a.borderDashes!==!1)if(s.setLineDash!==void 0){var o=a.borderDashes;o===!0&&(o=[5,15]),s.setLineDash(o)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,a.borderDashes=!1}},{key:"disableBorderDashes",value:function(s,a){a.borderDashes!==!1&&(s.setLineDash===void 0?(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,a.borderDashes=!1):s.setLineDash([0]))}},{key:"needsRefresh",value:function(s,a){return this.refreshNeeded===!0?(this.refreshNeeded=!1,!0):this.width===void 0||this.labelModule.differentState(s,a)}},{key:"initContextForDraw",value:function(s,a){var o=a.borderWidth/this.body.view.scale;s.lineWidth=n(this.width,o),s.strokeStyle=a.borderColor,s.fillStyle=a.color}},{key:"performStroke",value:function(s,a){var o=a.borderWidth/this.body.view.scale;s.save(),0<o&&(this.enableBorderDashes(s,a),s.stroke(),this.disableBorderDashes(s,a)),s.restore()}},{key:"performFill",value:function(s,a){this.enableShadow(s,a),s.fill(),this.disableShadow(s,a),this.performStroke(s,a)}},{key:"_addBoundingBoxMargin",value:function(s){this.boundingBox.left-=s,this.boundingBox.top-=s,this.boundingBox.bottom+=s,this.boundingBox.right+=s}},{key:"_updateBoundingBox",value:function(s,a,o,c,d){o!==void 0&&this.resize(o,c,d),this.left=s-this.width/2,this.top=a-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(s,a,o,c,d){this._updateBoundingBox(s,a,o,c,d)}},{key:"getDimensionsFromLabel",value:function(s,a,o){this.textSize=this.labelModule.getTextSize(s,a,o);var c=this.textSize.width,d=this.textSize.height,p=14;return c===0&&(c=p,d=p),{width:c,height:d}}}]),r}(),MZ=function(t){var e=Math.cos,i=Math.sin,n=Math.abs,r=Math.min;function s(a,o,c){var d;return Qe(this,s),d=Bi(this,Fi(s).call(this,a,o,c)),d._setMargins(c),d}return $i(s,t),Je(s,[{key:"resize",value:function(a){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.selected,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(o,c)){var d=this.getDimensionsFromLabel(a,o,c);this.width=d.width+this.margin.right+this.margin.left,this.height=d.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(a,o,c,d,p,m){this.resize(a,d,p),this.left=o-this.width/2,this.top=c-this.height/2,this.initContextForDraw(a,m),a.roundRect(this.left,this.top,this.width,this.height,m.borderRadius),this.performFill(a,m),this.updateBoundingBox(o,c,a,d,p),this.labelModule.draw(a,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,d,p)}},{key:"updateBoundingBox",value:function(a,o,c,d,p){this._updateBoundingBox(a,o,c,d,p);var m=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(m)}},{key:"distanceToBorder",value:function(a,o){this.resize(a);var c=this.options.borderWidth;return r(n(this.width/2/e(o)),n(this.height/2/i(o)))+c}}]),s}(Hf),pA=function(t){function e(i,n,r){var s;return Qe(this,e),s=Bi(this,Fi(e).call(this,i,n,r)),s.labelOffset=0,s.selected=!1,s}return $i(e,t),Je(e,[{key:"setOptions",value:function(i,n,r){this.options=i,n===void 0&&r===void 0||this.setImages(n,r)}},{key:"setImages",value:function(i,n){n&&this.selected?(this.imageObj=n,this.imageObjAlt=i):(this.imageObj=i,this.imageObjAlt=n)}},{key:"switchImages",value:function(i){var n=i&&!this.selected||!i&&this.selected;if(this.selected=i,this.imageObjAlt!==void 0&&n){var r=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=r}}},{key:"_resizeImage",value:function(){var i,n;if(this.options.shapeProperties.useImageSize===!1){var r=1,s=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?r=this.imageObj.width/this.imageObj.height:s=this.imageObj.height/this.imageObj.width),i=2*this.options.size*r,n=2*this.options.size*s}else i=this.imageObj.width,n=this.imageObj.height;this.width=i,this.height=n,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(i,n,r,s){this.initContextForDraw(i,s),i.circle(n,r,s.size),this.performFill(i,s)}},{key:"_drawImageAtPosition",value:function(i,n){if(this.imageObj.width!=0){i.globalAlpha=1,this.enableShadow(i,n);var r=1;this.options.shapeProperties.interpolation===!0&&(r=this.imageObj.width/this.width/this.body.view.scale),this.imageObj.drawImageAtPosition(i,r,this.left,this.top,this.width,this.height),this.disableShadow(i,n)}}},{key:"_drawImageLabel",value:function(i,n,r,s,a){var o=0,c;if(this.height!==void 0){o=.5*this.height;var d=this.labelModule.getTextSize(i,s,a);1<=d.lineCount&&(o+=d.height/2)}c=r+o,this.options.label&&(this.labelOffset=o),this.labelModule.draw(i,n,c,s,a,"hanging")}}]),e}(Hf),PZ=function(t){var e=Math.max;function i(n,r,s){var a;return Qe(this,i),a=Bi(this,Fi(i).call(this,n,r,s)),a._setMargins(s),a}return $i(i,t),Je(i,[{key:"resize",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.selected,s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(r,s)){var a=this.getDimensionsFromLabel(n,r,s),o=e(a.width+this.margin.right+this.margin.left,a.height+this.margin.top+this.margin.bottom);this.options.size=o/2,this.width=o,this.height=o,this.radius=this.width/2}}},{key:"draw",value:function(n,r,s,a,o,c){this.resize(n,a,o),this.left=r-this.width/2,this.top=s-this.height/2,this._drawRawCircle(n,r,s,c),this.updateBoundingBox(r,s),this.labelModule.draw(n,this.left+this.textSize.width/2+this.margin.left,s,a,o)}},{key:"updateBoundingBox",value:function(n,r){this.boundingBox.top=r-this.options.size,this.boundingBox.left=n-this.options.size,this.boundingBox.right=n+this.options.size,this.boundingBox.bottom=r+this.options.size}},{key:"distanceToBorder",value:function(n){return this.resize(n),.5*this.width}}]),i}(pA),OZ=function(t){var e=Math.max,i=Math.min;function n(r,s,a,o,c){var d;return Qe(this,n),d=Bi(this,Fi(n).call(this,r,s,a)),d.setImages(o,c),d}return $i(n,t),Je(n,[{key:"resize",value:function(){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.selected,s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var o=2*this.options.size;return this.width=o,this.height=o,void(this.radius=.5*this.width)}this.needsRefresh(r,s)&&this._resizeImage()}},{key:"draw",value:function(r,s,a,o,c,d){this.switchImages(o),this.resize(),this.left=s-this.width/2,this.top=a-this.height/2,this._drawRawCircle(r,s,a,d),r.save(),r.clip(),this._drawImageAtPosition(r,d),r.restore(),this._drawImageLabel(r,s,a,o,c),this.updateBoundingBox(s,a)}},{key:"updateBoundingBox",value:function(r,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=r-this.options.size,this.boundingBox.right=r+this.options.size,this.boundingBox.bottom=s+this.options.size,this.boundingBox.left=i(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=e(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=e(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(r){return this.resize(r),.5*this.width}}]),n}(pA),NZ=function(t){function e(i,n,r){var s;return Qe(this,e),s=Bi(this,Fi(e).call(this,i,n,r)),s._setMargins(r),s}return $i(e,t),Je(e,[{key:"resize",value:function(i,n,r){if(this.needsRefresh(n,r)){var s=this.getDimensionsFromLabel(i,n,r),a=s.width+this.margin.right+this.margin.left;this.width=a,this.height=a,this.radius=this.width/2}}},{key:"draw",value:function(i,n,r,s,a,o){this.resize(i,s,a),this.left=n-this.width/2,this.top=r-this.height/2,this.initContextForDraw(i,o),i.database(n-this.width/2,r-this.height/2,this.width,this.height),this.performFill(i,o),this.updateBoundingBox(n,r,i,s,a),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,a)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Hf),Vf=function(t){var e=Math.max,i=Math.min;function n(r,s,a){return Qe(this,n),Bi(this,Fi(n).call(this,r,s,a))}return $i(n,t),Je(n,[{key:"resize",value:function(r){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.selected,a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.hover,o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{size:this.options.size};if(this.needsRefresh(s,a)){this.labelModule.getTextSize(r,s,a);var c=2*o.size;this.width=c,this.height=c,this.radius=.5*this.width}}},{key:"_drawShape",value:function(r,s,a,o,c,d,p,m){if(this.resize(r,d,p,m),this.left=o-this.width/2,this.top=c-this.height/2,this.initContextForDraw(r,m),r[s](o,c,m.size),this.performFill(r,m),this.options.icon!==void 0&&this.options.icon.code!==void 0&&(r.font=(d?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),r.fillStyle=this.options.icon.color||"black",r.textAlign="center",r.textBaseline="middle",r.fillText(this.options.icon.code,o,c)),this.options.label!==void 0){this.labelModule.calculateLabelSize(r,d,p,o,c,"hanging");var y=c+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(r,o,y,d,p,"hanging")}this.updateBoundingBox(o,c)}},{key:"updateBoundingBox",value:function(r,s){this.boundingBox.top=s-this.options.size,this.boundingBox.left=r-this.options.size,this.boundingBox.right=r+this.options.size,this.boundingBox.bottom=s+this.options.size,this.options.label!==void 0&&0<this.labelModule.size.width&&(this.boundingBox.left=i(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=e(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=e(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),n}(Hf),GZ=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"draw",value:function(i,n,r,s,a,o){this._drawShape(i,"diamond",4,n,r,s,a,o)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Vf),UZ=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"draw",value:function(i,n,r,s,a,o){this._drawShape(i,"circle",2,n,r,s,a,o)}},{key:"distanceToBorder",value:function(i){return this.resize(i),this.options.size}}]),e}(Vf),VM=function(t){var e=Math.cos,i=Math.sin,n=Math.sqrt;function r(s,a,o){return Qe(this,r),Bi(this,Fi(r).call(this,s,a,o))}return $i(r,t),Je(r,[{key:"resize",value:function(s){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.selected,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.hover;if(this.needsRefresh(a,o)){var c=this.getDimensionsFromLabel(s,a,o);this.height=2*c.height,this.width=c.width+c.height,this.radius=.5*this.width}}},{key:"draw",value:function(s,a,o,c,d,p){this.resize(s,c,d),this.left=a-.5*this.width,this.top=o-.5*this.height,this.initContextForDraw(s,p),s.ellipse_vis(this.left,this.top,this.width,this.height),this.performFill(s,p),this.updateBoundingBox(a,o,s,c,d),this.labelModule.draw(s,a,o,c,d)}},{key:"distanceToBorder",value:function(s,a){this.resize(s);var o=.5*this.width,c=.5*this.height,d=i(a)*o,p=e(a)*c;return o*c/n(d*d+p*p)}}]),r}(Hf),LZ=function(t){var e=Math.max,i=Math.min;function n(r,s,a){var o;return Qe(this,n),o=Bi(this,Fi(n).call(this,r,s,a)),o._setMargins(a),o}return $i(n,t),Je(n,[{key:"resize",value:function(r,s,a){this.needsRefresh(s,a)&&(this.iconSize={width:+this.options.icon.size,height:+this.options.icon.size},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(r,s,a,o,c,d){this.resize(r,o,c),this.options.icon.size=this.options.icon.size||50,this.left=s-this.width/2,this.top=a-this.height/2,this._icon(r,s,a,o,c,d),this.options.label!==void 0&&this.labelModule.draw(r,this.left+this.iconSize.width/2+this.margin.left,a+this.height/2+5,o),this.updateBoundingBox(s,a)}},{key:"updateBoundingBox",value:function(r,s){this.boundingBox.top=s-.5*this.options.icon.size,this.boundingBox.left=r-.5*this.options.icon.size,this.boundingBox.right=r+.5*this.options.icon.size,this.boundingBox.bottom=s+.5*this.options.icon.size,this.options.label!==void 0&&0<this.labelModule.size.width&&(this.boundingBox.left=i(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=e(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=e(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(r,s,a,o,c,d){var p=+this.options.icon.size;this.options.icon.code===void 0?console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally."):(r.font=(o?"bold ":"")+p+"px "+this.options.icon.face,r.fillStyle=this.options.icon.color||"black",r.textAlign="center",r.textBaseline="middle",this.enableShadow(r,d),r.fillText(this.options.icon.code,s,a),this.disableShadow(r,d))}},{key:"distanceToBorder",value:function(r,s){return this._distanceToBorder(r,s)}}]),n}(Hf),BZ=function(t){var e=Math.max,i=Math.min;function n(r,s,a,o,c){var d;return Qe(this,n),d=Bi(this,Fi(n).call(this,r,s,a)),d.setImages(o,c),d}return $i(n,t),Je(n,[{key:"resize",value:function(){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.selected,s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this.hover,a=this.imageObj.src===void 0||this.imageObj.width===void 0||this.imageObj.height===void 0;if(a){var o=2*this.options.size;return this.width=o,void(this.height=o)}this.needsRefresh(r,s)&&this._resizeImage()}},{key:"draw",value:function(r,s,a,o,c,d){if(this.switchImages(o),this.resize(),this.left=s-this.width/2,this.top=a-this.height/2,this.options.shapeProperties.useBorderWithImage===!0){var p=this.options.borderWidth,m=this.options.borderWidthSelected||2*this.options.borderWidth,y=(o?m:p)/this.body.view.scale;r.lineWidth=i(this.width,y),r.beginPath(),r.strokeStyle=o?this.options.color.highlight.border:c?this.options.color.hover.border:this.options.color.border,r.fillStyle=o?this.options.color.highlight.background:c?this.options.color.hover.background:this.options.color.background,r.rect(this.left-.5*r.lineWidth,this.top-.5*r.lineWidth,this.width+r.lineWidth,this.height+r.lineWidth),r.fill(),this.performStroke(r,d),r.closePath()}this._drawImageAtPosition(r,d),this._drawImageLabel(r,s,a,o,c),this.updateBoundingBox(s,a)}},{key:"updateBoundingBox",value:function(r,s){this.resize(),this._updateBoundingBox(r,s),this.options.label!==void 0&&0<this.labelModule.size.width&&(this.boundingBox.left=i(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=e(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=e(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(r,s){return this._distanceToBorder(r,s)}}]),n}(pA),FZ=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"draw",value:function(i,n,r,s,a,o){this._drawShape(i,"square",2,n,r,s,a,o)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Vf),$Z=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"draw",value:function(i,n,r,s,a,o){this._drawShape(i,"hexagon",4,n,r,s,a,o)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Vf),HZ=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"draw",value:function(i,n,r,s,a,o){this._drawShape(i,"star",4,n,r,s,a,o)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Vf),VZ=function(t){function e(i,n,r){var s;return Qe(this,e),s=Bi(this,Fi(e).call(this,i,n,r)),s._setMargins(r),s}return $i(e,t),Je(e,[{key:"resize",value:function(i,n,r){this.needsRefresh(n,r)&&(this.textSize=this.labelModule.getTextSize(i,n,r),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(i,n,r,s,a,o){this.resize(i,s,a),this.left=n-this.width/2,this.top=r-this.height/2,this.enableShadow(i,o),this.labelModule.draw(i,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,a),this.disableShadow(i,o),this.updateBoundingBox(n,r,i,s,a)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Hf),qZ=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"draw",value:function(i,n,r,s,a,o){this._drawShape(i,"triangle",3,n,r,s,a,o)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Vf),YZ=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"draw",value:function(i,n,r,s,a,o){this._drawShape(i,"triangleDown",3,n,r,s,a,o)}},{key:"distanceToBorder",value:function(i,n){return this._distanceToBorder(i,n)}}]),e}(Vf),tg=!1,sE="background: #FFeeee; color: #dd0000",WZ=function(){var t=Math.min;function e(){Qe(this,e)}return Je(e,null,[{key:"validate",value:function(i,n,r){tg=!1,zM=n;var s=n;return r!==void 0&&(s=n[r]),e.parse(i,s,[]),tg}},{key:"parse",value:function(i,n,r){for(var s in i)i.hasOwnProperty(s)&&e.check(s,i,n,r)}},{key:"check",value:function(i,n,r,s){if(r[i]===void 0&&r.__any__===void 0)return void e.getSuggestion(i,r,s);var a=i,o=!0;r[i]===void 0&&r.__any__!==void 0&&(a="__any__",o=e.getType(n[i])==="object");var c=r[a];o&&c.__type__!==void 0&&(c=c.__type__),e.checkFields(i,n,r,a,c,s)}},{key:"checkFields",value:function(i,n,r,s,a,o){var c=function(m){console.log("%c"+m+e.printLocation(o,i),sE)},d=e.getType(n[i]),p=a[d];p===void 0?a.any===void 0&&(c('Invalid type received for "'+i+'". Expected: '+e.print(Object.keys(a))+". Received ["+d+'] "'+n[i]+'"'),tg=!0):e.getType(p)==="array"&&p.indexOf(n[i])===-1?(c('Invalid option detected in "'+i+'". Allowed values are:'+e.print(p)+' not "'+n[i]+'". '),tg=!0):d==="object"&&s!=="__any__"&&(o=we.copyAndExtendArray(o,i),e.parse(n[i],r[s],o))}},{key:"getType",value:function(i){var n=zs(i);return n==="object"?i===null?"null":i instanceof Boolean?"boolean":i instanceof Number?"number":i instanceof String?"string":Array.isArray(i)?"array":i instanceof Date?"date":i.nodeType===void 0?i._isAMomentObject===!0?"moment":"object":"dom":n==="number"?"number":n==="boolean"?"boolean":n==="string"?"string":n===void 0?"undefined":n}},{key:"getSuggestion",value:function(i,n,r){var s=e.findInOptions(i,n,r,!1),a=e.findInOptions(i,zM,[],!0),o;o=s.indexMatch===void 0?a.distance<=4&&s.distance>a.distance?" in "+e.printLocation(s.path,i,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(a.path,a.closestMatch,""):s.distance<=8?'. Did you mean "'+s.closestMatch+'"?'+e.printLocation(s.path,i):". Did you mean one of these: "+e.print(Object.keys(n))+e.printLocation(r,i):" in "+e.printLocation(s.path,i,"")+'Perhaps it was incomplete? Did you mean: "'+s.indexMatch+`"?

`,console.log('%cUnknown option detected: "'+i+'"'+o,sE),tg=!0}},{key:"findInOptions",value:function(i,n,r){var s=3<arguments.length&&arguments[3]!==void 0&&arguments[3],a=1e9,o="",c=[],d=i.toLowerCase(),p=void 0;for(var m in n){var y=void 0;if(n[m].__type__!==void 0&&s===!0){var _=e.findInOptions(i,n[m],we.copyAndExtendArray(r,m));a>_.distance&&(o=_.closestMatch,c=_.path,a=_.distance,p=_.indexMatch)}else m.toLowerCase().indexOf(d)!==-1&&(p=m),y=e.levenshteinDistance(i,m),a>y&&(o=m,c=we.copyArray(r),a=y)}return{closestMatch:o,path:c,distance:a,indexMatch:p}}},{key:"printLocation",value:function(i,n){for(var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,s=`

`+r+`options = {
`,a=0;a<i.length;a++){for(var o=0;o<a+1;o++)s+="  ";s+=i[a]+`: {
`}for(var c=0;c<i.length+1;c++)s+="  ";s+=n+`
`;for(var d=0;d<i.length+1;d++){for(var p=0;p<i.length-d;p++)s+="  ";s+=`}
`}return s+`

`}},{key:"print",value:function(i){return JSON.stringify(i).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(i,n){if(i.length===0)return n.length;if(n.length===0)return i.length;var r=[],s;for(s=0;s<=n.length;s++)r[s]=[s];var a;for(a=0;a<=i.length;a++)r[0][a]=a;for(s=1;s<=n.length;s++)for(a=1;a<=i.length;a++)r[s][a]=n.charAt(s-1)==i.charAt(a-1)?r[s-1][a-1]:t(r[s-1][a-1]+1,t(r[s][a-1]+1,r[s-1][a]+1));return r[n.length][i.length]}}]),e}(),ha=function(){function t(e,i,n,r,s,a){Qe(this,t),this.options=we.bridgeObject(s),this.globalOptions=s,this.defaultOptions=a,this.body=i,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=r,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new WL(this.body,this.options,!1),this.setOptions(e)}return Je(t,[{key:"attachEdge",value:function(e){this.edges.indexOf(e)===-1&&this.edges.push(e)}},{key:"detachEdge",value:function(e){var i=this.edges.indexOf(e);i!=-1&&this.edges.splice(i,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if(e.id!==void 0&&(this.id=e.id),this.id===void 0)throw new Error("Node must have an id");t.checkMass(e,this.id),e.x!==void 0&&(e.x===null?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(e.x),this.predefinedPosition=!0)),e.y!==void 0&&(e.y===null?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(e.y),this.predefinedPosition=!0)),e.size!==void 0&&(this.baseSize=e.size),e.value!==void 0&&(e.value=parseFloat(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var n=[e,this.options,this.defaultOptions];return this.chooser=Jl.choosify("node",n),this._load_images(),this.updateLabelModule(e),this.updateShape(i),e.hidden!==void 0||e.physics!==void 0}}},{key:"_load_images",value:function(){if((this.options.shape==="circularImage"||this.options.shape==="image")&&this.options.image===void 0)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(this.options.image!==void 0){if(this.imagelist===void 0)throw new Error("Internal Error: No images provided");if(typeof this.options.image=="string")this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(this.options.image.unselected===void 0)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),this.imageObjAlt=this.options.image.selected===void 0?void 0:this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id)}}}},{key:"getFormattingValues",value:function(){var e={color:this.options.color.background,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};return this.selected||this.hover?this.chooser===!0?this.selected?(e.borderWidth*=2,e.color=this.options.color.highlight.background,e.borderColor=this.options.color.highlight.border,e.shadow=this.options.shadow.enabled):this.hover&&(e.color=this.options.color.hover.background,e.borderColor=this.options.color.hover.border,e.shadow=this.options.shadow.enabled):typeof this.chooser=="function"&&(this.chooser(e,this.options.id,this.selected,this.hover),e.shadow===!1&&(e.shadowColor!==this.options.shadow.color||e.shadowSize!==this.options.shadow.size||e.shadowX!==this.options.shadow.x||e.shadowY!==this.options.shadow.y)&&(e.shadow=!0)):e.shadow=this.options.shadow.enabled,e}},{key:"updateLabelModule",value:function(e){(this.options.label===void 0||this.options.label===null)&&(this.options.label=""),t.updateGroupOptions(this.options,e,this.grouplist);var i=this.grouplist.get(this.options.group,!1),n=[e,this.options,i,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(e){if(e===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new MZ(this.options,this.body,this.labelModule);break;case"circle":this.shape=new PZ(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new OZ(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new NZ(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new GZ(this.options,this.body,this.labelModule);break;case"dot":this.shape=new UZ(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new VM(this.options,this.body,this.labelModule);break;case"icon":this.shape=new LZ(this.options,this.body,this.labelModule);break;case"image":this.shape=new BZ(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new FZ(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new $Z(this.options,this.body,this.labelModule);break;case"star":this.shape=new HZ(this.options,this.body,this.labelModule);break;case"text":this.shape=new VZ(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new qZ(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new YZ(this.options,this.body,this.labelModule);break;default:this.shape=new VM(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(e,i){return this.shape.distanceToBorder(e,i)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(e,i,n){if(this.options.value!==void 0){var r=this.options.scaling.customScalingFunction(e,i,n,this.options.value),s=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var a=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+r*a}this.options.size=this.options.scaling.min+r*s}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(e){var i=this.getFormattingValues();this.shape.draw(e,this.x,this.y,this.selected,this.hover,i)}},{key:"updateBoundingBox",value:function(e){this.shape.updateBoundingBox(this.x,this.y,e)}},{key:"resize",value:function(e){var i=this.getFormattingValues();this.shape.resize(e,this.selected,this.hover,i)}},{key:"getItemsOnPoint",value:function(e){var i=[];return this.labelModule.visible()&&Jl.pointInRect(this.labelModule.getSize(),e)&&i.push({nodeId:this.id,labelId:0}),Jl.pointInRect(this.shape.boundingBox,e)&&i.push({nodeId:this.id}),i}},{key:"isOverlappingWith",value:function(e){return this.shape.left<e.right&&this.shape.left+this.shape.width>e.left&&this.shape.top<e.bottom&&this.shape.top+this.shape.height>e.top}},{key:"isBoundingBoxOverlappingWith",value:function(e){return this.shape.boundingBox.left<e.right&&this.shape.boundingBox.right>e.left&&this.shape.boundingBox.top<e.bottom&&this.shape.boundingBox.bottom>e.top}}],[{key:"updateGroupOptions",value:function(e,i,n){if(n!==void 0){var r=e.group;if(i!==void 0&&i.group!==void 0&&r!==i.group)throw new Error("updateGroupOptions: group values in options don't match.");if(typeof r=="number"||typeof r=="string"&&r!=""){var s=n.get(r),a=["font"];i!==void 0&&i.color!==void 0&&i.color!=null&&a.push("color"),we.selectiveNotDeepExtend(a,e,s),e.color=we.parseColor(e.color)}}}},{key:"parseOptions",value:function(e,i){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},s=4<arguments.length?arguments[4]:void 0;if(we.selectiveNotDeepExtend(["color","fixed","shadow"],e,i,n),t.checkMass(i),we.mergeOptions(e,i,"shadow",r),i.color!==void 0&&i.color!==null){var a=we.parseColor(i.color);we.fillIfDefined(e.color,a)}else n===!0&&i.color===null&&(e.color=we.bridgeObject(r.color));i.fixed!==void 0&&i.fixed!==null&&(typeof i.fixed=="boolean"?(e.fixed.x=i.fixed,e.fixed.y=i.fixed):(i.fixed.x!==void 0&&typeof i.fixed.x=="boolean"&&(e.fixed.x=i.fixed.x),i.fixed.y!==void 0&&typeof i.fixed.y=="boolean"&&(e.fixed.y=i.fixed.y))),n===!0&&i.font===null&&(e.font=we.bridgeObject(r.font)),t.updateGroupOptions(e,i,s),i.scaling!==void 0&&we.mergeOptions(e.scaling,i.scaling,"label",r.scaling)}},{key:"checkMass",value:function(e,i){if(e.mass!==void 0&&0>=e.mass){var n="";i!==void 0&&(n=" in node id: "+i),console.log("%cNegative or zero mass disallowed"+n+", setting mass to 1.",sE),e.mass=1}}}]),t}(),jZ=function(){var t=Math.round,e=Math.max;function i(n,r,s,a){var o=this;if(Qe(this,i),this.body=n,this.images=r,this.groups=s,this.layoutEngine=a,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(c,d){o.add(d.items)},update:function(c,d){o.update(d.items,d.data,d.oldData)},remove:function(c,d){o.remove(d.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(c,d,p,m){return d===c?.5:e(0,(m-c)*(1/(d-c)))}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},0>=this.defaultOptions.mass)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=we.bridgeObject(this.defaultOptions),this.bindEventListeners()}return Je(i,[{key:"bindEventListeners",value:function(){var n=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){we.forEach(n.nodesListeners,function(r,s){n.body.data.nodes&&n.body.data.nodes.off(s,r)}),delete n.body.functions.createNode,delete n.nodesListeners.add,delete n.nodesListeners.update,delete n.nodesListeners.remove,delete n.nodesListeners})}},{key:"setOptions",value:function(n){if(n!==void 0){if(ha.parseOptions(this.options,n),n.shape!==void 0)for(var r in this.body.nodes)this.body.nodes.hasOwnProperty(r)&&this.body.nodes[r].updateShape();if(n.font!==void 0)for(var s in this.body.nodes)this.body.nodes.hasOwnProperty(s)&&(this.body.nodes[s].updateLabelModule(),this.body.nodes[s].needsRefresh());if(n.size!==void 0)for(var a in this.body.nodes)this.body.nodes.hasOwnProperty(a)&&this.body.nodes[a].needsRefresh();(n.hidden!==void 0||n.physics!==void 0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0&&arguments[1],s=this.body.data.nodes;if(n instanceof vd||n instanceof vL)this.body.data.nodes=n;else if(Array.isArray(n))this.body.data.nodes=new vd,this.body.data.nodes.add(n);else if(!n)this.body.data.nodes=new vd;else throw new TypeError("Array or DataSet expected");if(s&&we.forEach(this.nodesListeners,function(c,d){s.off(d,c)}),this.body.nodes={},this.body.data.nodes){var a=this;we.forEach(this.nodesListeners,function(c,d){a.body.data.nodes.on(d,c)});var o=this.body.data.nodes.getIds();this.add(o,!0)}r===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(n){for(var r=1<arguments.length&&arguments[1]!==void 0&&arguments[1],s=[],a=0,o;a<n.length;a++){o=n[a];var c=this.body.data.nodes.get(o),d=this.create(c);s.push(d),this.body.nodes[o]=d}this.layoutEngine.positionInitially(s),r===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(n,r,s){for(var a=this.body.nodes,o=!1,c=0;c<n.length;c++){var d=n[c],p=a[d],m=r[c];p===void 0?(o=!0,p=this.create(m),a[d]=p):p.setOptions(m)&&(o=!0)}o||s===void 0||(o=r.some(function(y,_){var E=s[_];return E&&E.level!==y.level})),o===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(n){for(var r=this.body.nodes,s=0,a;s<n.length;s++)a=n[s],delete r[a];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:ha;return new r(n,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var n=this,r=0<arguments.length&&arguments[0]!==void 0&&arguments[0];we.forEach(this.body.nodes,function(s,a){var o=n.body.data.nodes.get(a);o!==void 0&&(r===!0&&s.setOptions({x:null,y:null}),s.setOptions({fixed:!1}),s.setOptions(o))})}},{key:"getPositions",value:function(n){var r={};if(n===void 0)for(var s=0,a;s<this.body.nodeIndices.length;s++)a=this.body.nodes[this.body.nodeIndices[s]],r[this.body.nodeIndices[s]]={x:t(a.x),y:t(a.y)};else if(Array.isArray(n)===!0){for(var o=0;o<n.length;o++)if(this.body.nodes[n[o]]!==void 0){var c=this.body.nodes[n[o]];r[n[o]]={x:t(c.x),y:t(c.y)}}}else if(this.body.nodes[n]!==void 0){var d=this.body.nodes[n];r[n]={x:t(d.x),y:t(d.y)}}return r}},{key:"storePositions",value:function(){var n=[],r=this.body.data.nodes.getDataSet();for(var s in r._data)if(r._data.hasOwnProperty(s)){var a=this.body.nodes[s];(r._data[s].x!=t(a.x)||r._data[s].y!=t(a.y))&&n.push({id:a.id,x:t(a.x),y:t(a.y)})}r.update(n)}},{key:"getBoundingBox",value:function(n){if(this.body.nodes[n]!==void 0)return this.body.nodes[n].shape.boundingBox}},{key:"getConnectedNodes",value:function(n,r){var s=[];if(this.body.nodes[n]!==void 0)for(var a=this.body.nodes[n],o={},c=0,d;c<a.edges.length;c++)d=a.edges[c],r!=="to"&&d.toId==a.id?o[d.fromId]===void 0&&(s.push(d.fromId),o[d.fromId]=!0):r!=="from"&&d.fromId==a.id&&o[d.toId]===void 0&&(s.push(d.toId),o[d.toId]=!0);return s}},{key:"getConnectedEdges",value:function(n){var r=[];if(this.body.nodes[n]!==void 0)for(var s=this.body.nodes[n],a=0;a<s.edges.length;a++)r.push(s.edges[a].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",n);return r}},{key:"moveNode",value:function(n,r,s){var a=this;this.body.nodes[n]===void 0?console.log("Node id supplied to moveNode does not exist. Provided: ",n):(this.body.nodes[n].x=+r,this.body.nodes[n].y=+s,setTimeout(function(){a.body.emitter.emit("startSimulation")},0))}}]),i}(),cr=function(){var t=Math.cos,e=Math.sin;function i(){Qe(this,i)}return Je(i,null,[{key:"transform",value:function(n,r){n instanceof Array||(n=[n]);for(var s=r.point.x,a=r.point.y,o=r.angle,c=r.length,d=0;d<n.length;++d){var p=n[d],m=p.x*t(o)-p.y*e(o),y=p.x*e(o)+p.y*t(o);p.x=s+c*m,p.y=a+c*y}}},{key:"drawPath",value:function(n,r){n.beginPath(),n.moveTo(r[0].x,r[0].y);for(var s=1;s<r.length;++s)n.lineTo(r[s].x,r[s].y);n.closePath()}}]),i}(),zZ=function(t){function e(){return Qe(this,e),Bi(this,Fi(e).apply(this,arguments))}return $i(e,t),Je(e,null,[{key:"draw",value:function(i,n){var r=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];cr.transform(r,n),cr.drawPath(i,r)}}]),e}(cr),XZ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];cr.transform(n,i),cr.drawPath(e,n)}}]),t}(),KZ=function(){var t=Math.PI;function e(){Qe(this,e)}return Je(e,null,[{key:"draw",value:function(i,n){var r={x:-.4,y:0};cr.transform(r,n),i.strokeStyle=i.fillStyle,i.fillStyle="rgba(0, 0, 0, 0)";var s=t,a=n.angle-s/2,o=n.angle+s/2;i.beginPath(),i.arc(r.x,r.y,.4*n.length,a,o,!1),i.stroke()}}]),e}(),ZZ=function(){var t=Math.PI;function e(){Qe(this,e)}return Je(e,null,[{key:"draw",value:function(i,n){var r={x:-.3,y:0};cr.transform(r,n),i.strokeStyle=i.fillStyle,i.fillStyle="rgba(0, 0, 0, 0)";var s=t,a=n.angle+s/2,o=n.angle+3*s/2;i.beginPath(),i.arc(r.x,r.y,.4*n.length,a,o,!1),i.stroke()}}]),e}(),QZ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];cr.transform(n,i),cr.drawPath(e,n)}}]),t}(),JZ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];cr.transform(n,i),cr.drawPath(e,n)}}]),t}(),eQ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n={x:-.4,y:0};cr.transform(n,i),e.circle(n.x,n.y,.4*i.length)}}]),t}(),tQ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];cr.transform(n,i),cr.drawPath(e,n)}}]),t}(),iQ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];cr.transform(n,i),cr.drawPath(e,n)}}]),t}(),nQ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];cr.transform(n,i),cr.drawPath(e,n)}}]),t}(),rQ=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];cr.transform(n,i),cr.drawPath(e,n)}}]),t}(),jL=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"draw",value:function(e,i){var n;switch(i.type&&(n=i.type.toLowerCase()),n){case"circle":eQ.draw(e,i);break;case"box":iQ.draw(e,i);break;case"crow":XZ.draw(e,i);break;case"curve":KZ.draw(e,i);break;case"diamond":nQ.draw(e,i);break;case"inv_curve":ZZ.draw(e,i);break;case"triangle":QZ.draw(e,i);break;case"inv_triangle":JZ.draw(e,i);break;case"bar":tQ.draw(e,i);break;case"vee":rQ.draw(e,i);break;case"arrow":default:zZ.draw(e,i)}}}]),t}(),zL=function(){var t=Math.atan2,e=Math.cos,i=Math.sin,n=Math.sqrt,r=Math.PI,s=Math.pow,a=Math.max,o=Math.abs,c=Math.min;function d(p,m,y){Qe(this,d),this.body=m,this.labelModule=y,this.options={},this.setOptions(p),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}return Je(d,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(p){this.options=p,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(p,m,y,_,E){p.strokeStyle=this.getColor(p,m,y,_),p.lineWidth=m.width,m.dashes===!1?this._drawLine(p,m,E):this._drawDashedLine(p,m,E)}},{key:"_drawLine",value:function(p,m,y,_,E){if(this.from!=this.to)this._line(p,m,y,_,E);else{var C=this._getCircleData(p),S=Tr(C,3),k=S[0],R=S[1],O=S[2];this._circle(p,m,k,R,O)}}},{key:"_drawDashedLine",value:function(p,m,y){p.lineCap="round";var _=[5,5];if(Array.isArray(m.dashes)===!0&&(_=m.dashes),p.setLineDash!==void 0){if(p.save(),p.setLineDash(_),p.lineDashOffset=0,this.from!=this.to)this._line(p,m,y);else{var E=this._getCircleData(p),C=Tr(E,3),S=C[0],k=C[1],R=C[2];this._circle(p,m,S,k,R)}p.setLineDash([0]),p.lineDashOffset=0,p.restore()}else{if(this.from!=this.to)p.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,_);else{var O=this._getCircleData(p),I=Tr(O,3),F=I[0],P=I[1],x=I[2];this._circle(p,m,F,P,x)}this.enableShadow(p,m),p.stroke(),this.disableShadow(p,m)}}},{key:"findBorderPosition",value:function(p,m,y){return this.from==this.to?this._findBorderPositionCircle(p,m,y):this._findBorderPosition(p,m,y)}},{key:"findBorderPositions",value:function(p){var m={},y={};if(this.from!=this.to)m=this._findBorderPosition(this.from,p),y=this._findBorderPosition(this.to,p);else{var _=this._getCircleData(p).slice(0,2),E=Tr(_,2),C=E[0],S=E[1];m=this._findBorderPositionCircle(this.from,p,{x:C,y:S,low:.25,high:.6,direction:-1}),y=this._findBorderPositionCircle(this.from,p,{x:C,y:S,low:.6,high:.8,direction:1})}return{from:m,to:y}}},{key:"_getCircleData",value:function(p){var m=this.from,y=this.options.selfReferenceSize,_,E;return p!==void 0&&m.shape.width===void 0&&m.shape.resize(p),m.shape.width>m.shape.height?(_=m.x+.5*m.shape.width,E=m.y-y):(_=m.x+y,E=m.y-.5*m.shape.height),[_,E,y]}},{key:"_pointOnCircle",value:function(p,m,y,_){var E=2*_*r;return{x:p+y*e(E),y:m-y*i(E)}}},{key:"_findBorderPositionCircle",value:function(p,m,y){for(var _=y.x,E=y.y,C=y.low,S=y.high,k=y.direction,R=0,O=this.options.selfReferenceSize,I=.5*(C+S),F,P,x,M,q;C<=S&&R<10&&(I=.5*(C+S),F=this._pointOnCircle(_,E,O,I),P=t(p.y-F.y,p.x-F.x),x=p.distanceToBorder(m,P),M=n(s(F.x-p.x,2)+s(F.y-p.y,2)),q=x-M,!(o(q)<.05));)0<q?0<k?C=I:S=I:0<k?S=I:C=I,R++;return F.t=I,F}},{key:"getLineWidth",value:function(p,m){return p===!0?a(this.selectionWidth,.3/this.body.view.scale):m===!0?a(this.hoverWidth,.3/this.body.view.scale):a(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(p,m){if(m.inheritsColor!==!1){if(m.inheritsColor==="both"&&this.from.id!==this.to.id){var y=p.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),_,E;return _=this.from.options.color.highlight.border,E=this.to.options.color.highlight.border,this.from.selected===!1&&this.to.selected===!1?(_=we.overrideOpacity(this.from.options.color.border,m.opacity),E=we.overrideOpacity(this.to.options.color.border,m.opacity)):this.from.selected===!0&&this.to.selected===!1?E=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(_=this.from.options.color.border),y.addColorStop(0,_),y.addColorStop(1,E),y}return m.inheritsColor==="to"?we.overrideOpacity(this.to.options.color.border,m.opacity):we.overrideOpacity(this.from.options.color.border,m.opacity)}return we.overrideOpacity(m.color,m.opacity)}},{key:"_circle",value:function(p,m,y,_,E){this.enableShadow(p,m),p.beginPath(),p.arc(y,_,E,0,2*r,!1),p.stroke(),this.disableShadow(p,m)}},{key:"getDistanceToEdge",value:function(p,m,y,_,E,C,S){var k=0;if(this.from!=this.to)k=this._getDistanceToEdge(p,m,y,_,E,C,S);else{var R=this._getCircleData(void 0),O=Tr(R,3),I=O[0],F=O[1],P=O[2],x=I-E,M=F-C;k=o(n(x*x+M*M)-P)}return k}},{key:"_getDistanceToLine",value:function(p,m,y,_,E,C){var S=y-p,k=_-m,R=((E-p)*S+(C-m)*k)/(S*S+k*k);1<R?R=1:0>R&&(R=0);var O=p+R*S,I=m+R*k,F=O-E,P=I-C;return n(F*F+P*P)}},{key:"getArrowData",value:function(p,m,y,_,E,C){var S=C.width,k,R,O,I,F,P,x;if(m==="from"?(O=this.from,I=this.to,F=.1,P=C.fromArrowScale,x=C.fromArrowType):m==="to"?(O=this.to,I=this.from,F=-.1,P=C.toArrowScale,x=C.toArrowType):(O=this.to,I=this.from,P=C.middleArrowScale,x=C.middleArrowType),O==I){var M=this._getCircleData(p),q=Tr(M,3),$=q[0],B=q[1],j=q[2];m==="from"?(R=this.findBorderPosition(this.from,p,{x:$,y:B,low:.25,high:.6,direction:-1}),k=-2*R.t*r+1.5*r+.1*r):m==="to"?(R=this.findBorderPosition(this.from,p,{x:$,y:B,low:.6,high:1,direction:1}),k=-2*R.t*r+1.5*r-1.1*r):(R=this._pointOnCircle($,B,j,.175),k=3.9269908169872414)}else if(m==="middle")k=t(O.y-I.y,O.x-I.x),R=this.getPoint(.5,y);else if(this.options.smooth.enabled===!0){R=this.findBorderPosition(O,p,{via:y});var z=this.getPoint(a(0,c(1,R.t+F)),y);k=t(R.y-z.y,R.x-z.x)}else k=t(O.y-I.y,O.x-I.x),R=this.findBorderPosition(O,p);m==="middle"&&0>P&&(S*=-1);var X=15*P+3*S,se=R.x-.9*X*e(k),ue=R.y-.9*X*i(k);return{point:R,core:{x:se,y:ue},angle:k,length:X,type:x}}},{key:"drawArrowHead",value:function(p,m,y,_,E){p.strokeStyle=this.getColor(p,m,y,_),p.fillStyle=p.strokeStyle,p.lineWidth=m.width,jL.draw(p,E),this.enableShadow(p,m),p.fill(),this.disableShadow(p,m)}},{key:"enableShadow",value:function(p,m){m.shadow===!0&&(p.shadowColor=m.shadowColor,p.shadowBlur=m.shadowSize,p.shadowOffsetX=m.shadowX,p.shadowOffsetY=m.shadowY)}},{key:"disableShadow",value:function(p,m){m.shadow===!0&&(p.shadowColor="rgba(0,0,0,0)",p.shadowBlur=0,p.shadowOffsetX=0,p.shadowOffsetY=0)}},{key:"drawBackground",value:function(p,m){if(m.background!==!1){var y=["strokeStyle","lineWidth","dashes"],_={};y.forEach(function(E){_[E]=p[E]}),p.strokeStyle=m.backgroundColor,p.lineWidth=m.backgroundSize,this.setStrokeDashed(p,m.backgroundDashes),p.stroke(),y.forEach(function(E){p[E]=_[E]}),this.setStrokeDashed(p,m.dashes)}}},{key:"setStrokeDashed",value:function(p,m){if(m===!1)p.setLineDash===void 0?console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used."):p.setLineDash([]);else if(p.setLineDash!==void 0){var y=[5,5];Array.isArray(m)===!0&&(y=m),p.setLineDash(y)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),d}(),mA=function(t){var e=Math.atan2,i=Math.sqrt,n=Math.pow,r=Math.abs;function s(a,o,c){return Qe(this,s),Bi(this,Fi(s).call(this,a,o,c))}return $i(s,t),Je(s,[{key:"_findBorderPositionBezier",value:function(a,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this._getViaCoordinates(),d=0,p=0,m=1,y=this.to,_=!1,E,C,S,k,R;for(a.id===this.from.id&&(y=this.from,_=!0);p<=m&&d<10;){var O=.5*(p+m);if(E=this.getPoint(O,c),C=e(y.y-E.y,y.x-E.x),S=y.distanceToBorder(o,C),k=i(n(E.x-y.x,2)+n(E.y-y.y,2)),R=S-k,r(R)<.2)break;0>R?_===!1?p=O:m=O:_===!1?m=O:p=O,d++}return E.t=O,E}},{key:"_getDistanceToBezierEdge",value:function(a,o,c,d,p,m,y){var _=1e9,E=a,C=o,S,k,R,O,I;for(k=1;10>k;k++)R=.1*k,O=n(1-R,2)*a+2*R*(1-R)*y.x+n(R,2)*c,I=n(1-R,2)*o+2*R*(1-R)*y.y+n(R,2)*d,0<k&&(S=this._getDistanceToLine(E,C,O,I,p,m),_=S<_?S:_),E=O,C=I;return _}},{key:"_bezierCurve",value:function(a,o,c,d){var p=c!==void 0&&c.x!==void 0,m=d!==void 0&&d.x!==void 0;a.beginPath(),a.moveTo(this.fromPoint.x,this.fromPoint.y),p&&m?a.bezierCurveTo(c.x,c.y,d.x,d.y,this.toPoint.x,this.toPoint.y):p?a.quadraticCurveTo(c.x,c.y,this.toPoint.x,this.toPoint.y):a.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(a,o),this.enableShadow(a,o),a.stroke(),this.disableShadow(a,o)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),s}(zL),sQ=function(t){var e=Math.pow;function i(n,r,s){return Qe(this,i),Bi(this,Fi(i).call(this,n,r,s))}return $i(i,t),Je(i,[{key:"_getDistanceToBezierEdge",value:function(n,r,s,a,o,c,d,p){var m=1e9,y=n,_=r,E=[0,0,0,0],C,S,k,R,O;for(S=1;10>S;S++)k=.1*S,E[0]=e(1-k,3),E[1]=3*k*e(1-k,2),E[2]=3*e(k,2)*(1-k),E[3]=e(k,3),R=E[0]*n+E[1]*d.x+E[2]*p.x+E[3]*s,O=E[0]*r+E[1]*d.y+E[2]*p.y+E[3]*a,0<S&&(C=this._getDistanceToLine(y,_,R,O,o,c),m=C<m?C:m),y=R,_=O;return m}}]),i}(mA),qM=function(t){var e=Math.pow,i=Math.abs;function n(r,s,a){return Qe(this,n),Bi(this,Fi(n).call(this,r,s,a))}return $i(n,t),Je(n,[{key:"_line",value:function(r,s,a){var o=a[0],c=a[1];this._bezierCurve(r,s,o,c)}},{key:"_getViaCoordinates",value:function(){var r=this.from.x-this.to.x,s=this.from.y-this.to.y,a=this.options.smooth.roundness,o,c,d,p;return(i(r)>i(s)||this.options.smooth.forceDirection===!0||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"?(c=this.from.y,p=this.to.y,o=this.from.x-a*r,d=this.to.x+a*r):(c=this.from.y-a*s,p=this.to.y+a*s,o=this.from.x,d=this.to.x),[{x:o,y:c},{x:d,y:p}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(r,s){return this._findBorderPositionBezier(r,s)}},{key:"_getDistanceToEdge",value:function(r,s,a,o,c,d){var p=6<arguments.length&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates(),m=Tr(p,2),y=m[0],_=m[1];return this._getDistanceToBezierEdge(r,s,a,o,c,d,y,_)}},{key:"getPoint",value:function(r){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),a=Tr(s,2),o=a[0],c=a[1],d=r,p=[];p[0]=e(1-d,3),p[1]=3*d*e(1-d,2),p[2]=3*e(d,2)*(1-d),p[3]=e(d,3);var m=p[0]*this.fromPoint.x+p[1]*o.x+p[2]*c.x+p[3]*this.toPoint.x,y=p[0]*this.fromPoint.y+p[1]*o.y+p[2]*c.y+p[3]*this.toPoint.y;return{x:m,y}}}]),n}(sQ),YM=function(t){var e=Math.cos,i=Math.sin,n=Math.PI,r=Math.pow;function s(a,o,c){var d;return Qe(this,s),d=Bi(this,Fi(s).call(this,a,o,c)),d._boundFunction=function(){d.positionBezierNode()},d.body.emitter.on("_repositionBezierNodes",d._boundFunction),d}return $i(s,t),Je(s,[{key:"setOptions",value:function(a){var o=!1;this.options.physics!==a.physics&&(o=!0),this.options=a,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),o==!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.from===void 0||this.to===void 0||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),this.via!==void 0&&(delete this.body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(this.via===void 0){var a="edgeId:"+this.id,o=this.body.functions.createNode({id:a,shape:"circle",physics:!0,hidden:!0});this.body.nodes[a]=o,this.via=o,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){this.via!==void 0&&this.from!==void 0&&this.to!==void 0?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):this.via!==void 0&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(a,o,c){this._bezierCurve(a,o,c)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(a){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.via,c=a,d,p;if(this.from===this.to){var m=this._getCircleData(this.from),y=Tr(m,3),_=y[0],E=y[1],C=y[2],S=2*n*(1-c);d=_+C*i(S),p=E+C-C*(1-e(S))}else d=r(1-c,2)*this.fromPoint.x+2*c*(1-c)*o.x+r(c,2)*this.toPoint.x,p=r(1-c,2)*this.fromPoint.y+2*c*(1-c)*o.y+r(c,2)*this.toPoint.y;return{x:d,y:p}}},{key:"_findBorderPosition",value:function(a,o){return this._findBorderPositionBezier(a,o,this.via)}},{key:"_getDistanceToEdge",value:function(a,o,c,d,p,m){return this._getDistanceToBezierEdge(a,o,c,d,p,m,this.via)}}]),s}(mA),WM=function(t){var e=Math.atan2,i=Math.cos,n=Math.sin,r=Math.sqrt,s=Math.PI,a=Math.pow,o=Math.abs;function c(d,p,m){return Qe(this,c),Bi(this,Fi(c).call(this,d,p,m))}return $i(c,t),Je(c,[{key:"_line",value:function(d,p,m){this._bezierCurve(d,p,m)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var d=void 0,p=void 0,m=this.options.smooth.roundness,y=this.options.smooth.type,_=o(this.from.x-this.to.x),E=o(this.from.y-this.to.y);if(y==="discrete"||y==="diagonalCross"){var C,S;C=_<=E?S=m*E:S=m*_,this.from.x>this.to.x&&(C=-C),this.from.y>=this.to.y&&(S=-S),d=this.from.x+C,p=this.from.y+S,y==="discrete"&&(_<=E?d=_<m*E?this.from.x:d:p=E<m*_?this.from.y:p)}else if(y==="straightCross"){var k=(1-m)*_,R=(1-m)*E;_<=E?(k=0,this.from.y<this.to.y&&(R=-R)):(this.from.x<this.to.x&&(k=-k),R=0),d=this.to.x+k,p=this.to.y+R}else if(y==="horizontal"){var O=(1-m)*_;this.from.x<this.to.x&&(O=-O),d=this.to.x+O,p=this.from.y}else if(y==="vertical"){var I=(1-m)*E;this.from.y<this.to.y&&(I=-I),d=this.from.x,p=this.to.y+I}else if(y==="curvedCW"){_=this.to.x-this.from.x,E=this.from.y-this.to.y;var F=r(_*_+E*E),P=s,x=e(E,_),M=(x+(.5*m+.5)*P)%(2*P);d=this.from.x+(.5*m+.5)*F*n(M),p=this.from.y+(.5*m+.5)*F*i(M)}else if(y==="curvedCCW"){_=this.to.x-this.from.x,E=this.from.y-this.to.y;var q=r(_*_+E*E),$=s,B=e(E,_),j=(B+(.5*-m+.5)*$)%(2*$);d=this.from.x+(.5*m+.5)*q*n(j),p=this.from.y+(.5*m+.5)*q*i(j)}else{var z,X;z=_<=E?X=m*E:X=m*_,this.from.x>this.to.x&&(z=-z),this.from.y>=this.to.y&&(X=-X),d=this.from.x+z,p=this.from.y+X,_<=E?this.from.x<=this.to.x?d=this.to.x<d?this.to.x:d:d=this.to.x>d?this.to.x:d:this.from.y>=this.to.y?p=this.to.y>p?this.to.y:p:p=this.to.y<p?this.to.y:p}return{x:d,y:p}}},{key:"_findBorderPosition",value:function(d,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return this._findBorderPositionBezier(d,p,m.via)}},{key:"_getDistanceToEdge",value:function(d,p,m,y,_,E){var C=6<arguments.length&&arguments[6]!==void 0?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(d,p,m,y,_,E,C)}},{key:"getPoint",value:function(d){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this._getViaCoordinates(),m=d,y=a(1-m,2)*this.fromPoint.x+2*m*(1-m)*p.x+a(m,2)*this.toPoint.x,_=a(1-m,2)*this.fromPoint.y+2*m*(1-m)*p.y+a(m,2)*this.toPoint.y;return{x:y,y:_}}}]),c}(mA),jM=function(t){var e=Math.atan2,i=Math.sqrt;function n(r,s,a){return Qe(this,n),Bi(this,Fi(n).call(this,r,s,a))}return $i(n,t),Je(n,[{key:"_line",value:function(r,s){r.beginPath(),r.moveTo(this.fromPoint.x,this.fromPoint.y),r.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(r,s),r.stroke(),this.disableShadow(r,s)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(r){return{x:(1-r)*this.fromPoint.x+r*this.toPoint.x,y:(1-r)*this.fromPoint.y+r*this.toPoint.y}}},{key:"_findBorderPosition",value:function(r,s){var a=this.to,o=this.from;r.id===this.from.id&&(a=this.from,o=this.to);var c=e(a.y-o.y,a.x-o.x),d=a.x-o.x,p=a.y-o.y,m=i(d*d+p*p),y=r.distanceToBorder(s,c),_=(m-y)/m,E={};return E.x=(1-_)*o.x+_*a.x,E.y=(1-_)*o.y+_*a.y,E}},{key:"_getDistanceToEdge",value:function(r,s,a,o,c,d){return this._getDistanceToLine(r,s,a,o,c,d)}}]),n}(zL),sm=function(){var t=Math.atan2,e=Math.cos,i=Math.sin,n=Math.PI,r=Math.max,s=Math.min;function a(o,c,d,p){if(Qe(this,a),c===void 0)throw new Error("No body provided");this.options=we.bridgeObject(d),this.globalOptions=d,this.defaultOptions=p,this.body=c,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new WL(this.body,this.options,!0),this.setOptions(o)}return Je(a,[{key:"setOptions",value:function(o){if(o){var c=this.options.hidden;c==null&&(c=!1),a.parseOptions(this.options,o,!0,this.globalOptions),o.id!==void 0&&(this.id=o.id),o.from!==void 0&&(this.fromId=o.from),o.to!==void 0&&(this.toId=o.to),o.title!==void 0&&(this.title=o.title),o.value!==void 0&&(o.value=parseFloat(o.value));var d=[o,this.options,this.defaultOptions];this.chooser=Jl.choosify("edge",d),this.updateLabelModule(o);var p=this.updateEdgeType();this._setInteractionWidths(),this.connect();var m=this.options.hidden;return m==null&&(m=!1),(m!=c||o.physics!==void 0)&&(p=!0),o.physics!==void 0&&(p=!0),p}}},{key:"getFormattingValues",value:function(){var o=this.options.arrows.to===!0||this.options.arrows.to.enabled===!0,c=this.options.arrows.from===!0||this.options.arrows.from.enabled===!0,d=this.options.arrows.middle===!0||this.options.arrows.middle.enabled===!0,p=this.options.color.inherit,m={toArrow:o,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,middleArrow:d,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,fromArrow:c,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,arrowStrikethrough:this.options.arrowStrikethrough,color:p?void 0:this.options.color.color,inheritsColor:p,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(!(this.selected||this.hover))m.shadow=this.options.shadow.enabled,m.width=r(m.width,.3/this.body.view.scale);else if(this.chooser!==!0)typeof this.chooser=="function"&&(this.chooser(m,this.options.id,this.selected,this.hover),m.color!==void 0&&(m.inheritsColor=!1),m.shadow===!1&&(m.shadowColor!==this.options.shadow.color||m.shadowSize!==this.options.shadow.size||m.shadowX!==this.options.shadow.x||m.shadowY!==this.options.shadow.y)&&(m.shadow=!0));else if(this.selected){var y=this.options.selectionWidth;typeof y=="function"?m.width=y(m.width):typeof y=="number"&&(m.width+=y),m.width=r(m.width,.3/this.body.view.scale),m.color=this.options.color.highlight,m.shadow=this.options.shadow.enabled}else if(this.hover){var _=this.options.hoverWidth;typeof _=="function"?m.width=_(m.width):typeof _=="number"&&(m.width+=_),m.width=r(m.width,.3/this.body.view.scale),m.color=this.options.color.hover,m.shadow=this.options.shadow.enabled}return m}},{key:"updateLabelModule",value:function(o){var c=[o,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,c),this.labelModule.baseSize!==void 0&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var o=this.options.smooth,c=!1,d=!0;return this.edgeType!==void 0&&((this.edgeType instanceof YM&&o.enabled===!0&&o.type==="dynamic"||this.edgeType instanceof qM&&o.enabled===!0&&o.type==="cubicBezier"||this.edgeType instanceof WM&&o.enabled===!0&&o.type!=="dynamic"&&o.type!=="cubicBezier"||this.edgeType instanceof jM&&o.type.enabled===!1)&&(d=!1),d===!0&&(c=this.cleanup())),d===!0?o.enabled===!0?o.type==="dynamic"?(c=!0,this.edgeType=new YM(this.options,this.body,this.labelModule)):o.type==="cubicBezier"?this.edgeType=new qM(this.options,this.body,this.labelModule):this.edgeType=new WM(this.options,this.body,this.labelModule):this.edgeType=new jM(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),c}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=this.from!==void 0&&this.to!==void 0,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(o,c,d){if(this.options.value!==void 0){var p=this.options.scaling.customScalingFunction(o,c,d,this.options.value),m=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var y=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+p*y}this.options.width=this.options.scaling.min+p*m}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){this.edgeType.hoverWidth=typeof this.options.hoverWidth=="function"?this.options.hoverWidth(this.options.width):this.options.hoverWidth+this.options.width,this.edgeType.selectionWidth=typeof this.options.selectionWidth=="function"?this.options.selectionWidth(this.options.width):this.options.selectionWidth+this.options.width}},{key:"draw",value:function(o){var c=this.getFormattingValues();if(!c.hidden){var d=this.edgeType.getViaNode(),p={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,c.fromArrow&&(p.from=this.edgeType.getArrowData(o,"from",d,this.selected,this.hover,c),c.arrowStrikethrough===!1&&(this.edgeType.fromPoint=p.from.core)),c.toArrow&&(p.to=this.edgeType.getArrowData(o,"to",d,this.selected,this.hover,c),c.arrowStrikethrough===!1&&(this.edgeType.toPoint=p.to.core)),c.middleArrow&&(p.middle=this.edgeType.getArrowData(o,"middle",d,this.selected,this.hover,c)),this.edgeType.drawLine(o,c,this.selected,this.hover,d),this.drawArrows(o,p,c),this.drawLabel(o,d)}}},{key:"drawArrows",value:function(o,c,d){d.fromArrow&&this.edgeType.drawArrowHead(o,d,this.selected,this.hover,c.from),d.middleArrow&&this.edgeType.drawArrowHead(o,d,this.selected,this.hover,c.middle),d.toArrow&&this.edgeType.drawArrowHead(o,d,this.selected,this.hover,c.to)}},{key:"drawLabel",value:function(o,c){if(this.options.label!==void 0){var d=this.from,p=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(o,this.selected,this.hover),d.id!=p.id){this.labelModule.pointToSelf=!1;var m=this.edgeType.getPoint(.5,c);o.save();var y=this._getRotation(o);y.angle!=0&&(o.translate(y.x,y.y),o.rotate(y.angle)),this.labelModule.draw(o,m.x,m.y,this.selected,this.hover),o.restore()}else{this.labelModule.pointToSelf=!0;var _=this.options.selfReferenceSize,E,C;d.shape.width>d.shape.height?(E=d.x+.5*d.shape.width,C=d.y-_):(E=d.x+_,C=d.y-.5*d.shape.height),m=this._pointOnCircle(E,C,_,.125),this.labelModule.draw(o,m.x,m.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(o){var c=[];if(this.labelModule.visible()){var d=this._getRotation();Jl.pointInRect(this.labelModule.getSize(),o,d)&&c.push({edgeId:this.id,labelId:0})}var p={left:o.x,top:o.y};return this.isOverlappingWith(p)&&c.push({edgeId:this.id}),c}},{key:"isOverlappingWith",value:function(o){if(this.connected){var c=this.from.x,d=this.from.y,p=this.to.x,m=this.to.y,y=o.left,_=o.top,E=this.edgeType.getDistanceToEdge(c,d,p,m,y,_);return 10>E}return!1}},{key:"_getRotation",value:function(o){var c=this.edgeType.getViaNode(),d=this.edgeType.getPoint(.5,c);o!==void 0&&this.labelModule.calculateLabelSize(o,this.selected,this.hover,d.x,d.y);var p={x:d.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||this.options.font.align==="horizontal")return p;var m=this.from.y-this.to.y,y=this.from.x-this.to.x,_=t(m,y);return(-1>_&&0>y||0<_&&0>y)&&(_+=n),p.angle=_,p}},{key:"_pointOnCircle",value:function(o,c,d,p){var m=2*p*n;return{x:o+d*e(m),y:c-d*i(m)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return this.body.nodes[this.fromId]!==void 0&&this.body.nodes[this.toId]!==void 0}}],[{key:"parseOptions",value:function(o,c){var d=2<arguments.length&&arguments[2]!==void 0&&arguments[2],p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},m=4<arguments.length&&arguments[4]!==void 0&&arguments[4];if(we.selectiveDeepExtend(["arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width","font","chosen","widthConstraint"],o,c,d),Jl.isValidLabel(c.label)?o.label=c.label:!Jl.isValidLabel(o.label)&&(o.label=void 0),we.mergeOptions(o,c,"smooth",p),we.mergeOptions(o,c,"shadow",p),we.mergeOptions(o,c,"background",p),c.dashes!==void 0&&c.dashes!==null?o.dashes=c.dashes:d===!0&&c.dashes===null&&(o.dashes=Object.create(p.dashes)),c.scaling!==void 0&&c.scaling!==null?(c.scaling.min!==void 0&&(o.scaling.min=c.scaling.min),c.scaling.max!==void 0&&(o.scaling.max=c.scaling.max),we.mergeOptions(o.scaling,c.scaling,"label",p.scaling)):d===!0&&c.scaling===null&&(o.scaling=Object.create(p.scaling)),c.arrows===void 0||c.arrows===null)d===!0&&c.arrows===null&&(o.arrows=Object.create(p.arrows));else if(typeof c.arrows=="string"){var y=c.arrows.toLowerCase();o.arrows.to.enabled=y.indexOf("to")!=-1,o.arrows.middle.enabled=y.indexOf("middle")!=-1,o.arrows.from.enabled=y.indexOf("from")!=-1}else if(zs(c.arrows)==="object")we.mergeOptions(o.arrows,c.arrows,"to",p.arrows),we.mergeOptions(o.arrows,c.arrows,"middle",p.arrows),we.mergeOptions(o.arrows,c.arrows,"from",p.arrows);else throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(c.arrows));if(c.color!==void 0&&c.color!==null){var _=c.color,E=o.color;if(m)we.deepExtend(E,p.color,!1,d);else for(var C in E)E.hasOwnProperty(C)&&delete E[C];if(we.isString(E))E.color=E,E.highlight=E,E.hover=E,E.inherit=!1,_.opacity===void 0&&(E.opacity=1);else{var S=!1;_.color!==void 0&&(E.color=_.color,S=!0),_.highlight!==void 0&&(E.highlight=_.highlight,S=!0),_.hover!==void 0&&(E.hover=_.hover,S=!0),_.inherit!==void 0&&(E.inherit=_.inherit),_.opacity!==void 0&&(E.opacity=s(1,r(0,_.opacity))),S==!0?E.inherit=!1:E.inherit===void 0&&(E.inherit="from")}}else d===!0&&c.color===null&&(o.color=we.bridgeObject(p.color));d===!0&&c.font===null&&(o.font=we.bridgeObject(p.font))}}]),a}(),aQ=function(){var t=Math.max;function e(i,n,r){var s=this;Qe(this,e),this.body=i,this.images=n,this.groups=r,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(a,o){s.add(o.items)},update:function(a,o){s.update(o.items)},remove:function(a,o){s.remove(o.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(a,o,c,d){return o===a?.5:t(0,(d-a)*(1/(o-a)))}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},we.deepExtend(this.options,this.defaultOptions),this.bindEventListeners()}return Je(e,[{key:"bindEventListeners",value:function(){var i=this;this.body.emitter.on("_forceDisableDynamicCurves",function(n){var r=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];n==="dynamic"&&(n="continuous");var s=!1;for(var a in i.body.edges)if(i.body.edges.hasOwnProperty(a)){var o=i.body.edges[a],c=i.body.data.edges._data[a];if(c!==void 0){var d=c.smooth;d!==void 0&&d.enabled===!0&&d.type==="dynamic"&&(n===void 0?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:n}}),s=!0)}}r===!0&&s==!0&&i.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){i.reconnectEdges()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){we.forEach(i.edgesListeners,function(n,r){i.body.data.edges&&i.body.data.edges.off(r,n)}),delete i.body.functions.createEdge,delete i.edgesListeners.add,delete i.edgesListeners.update,delete i.edgesListeners.remove,delete i.edgesListeners})}},{key:"setOptions",value:function(i){if(i!==void 0){sm.parseOptions(this.options,i,!0,this.defaultOptions,!0);var n=!1;if(i.smooth!==void 0)for(var r in this.body.edges)this.body.edges.hasOwnProperty(r)&&(n=this.body.edges[r].updateEdgeType()||n);if(i.font!==void 0)for(var s in this.body.edges)this.body.edges.hasOwnProperty(s)&&this.body.edges[s].updateLabelModule();(i.hidden!==void 0||i.physics!==void 0||n===!0)&&this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(i){var n=this,r=1<arguments.length&&arguments[1]!==void 0&&arguments[1],s=this.body.data.edges;if(i instanceof vd||i instanceof vL)this.body.data.edges=i;else if(Array.isArray(i))this.body.data.edges=new vd,this.body.data.edges.add(i);else if(!i)this.body.data.edges=new vd;else throw new TypeError("Array or DataSet expected");if(s&&we.forEach(this.edgesListeners,function(o,c){s.off(c,o)}),this.body.edges={},this.body.data.edges){we.forEach(this.edgesListeners,function(o,c){n.body.data.edges.on(c,o)});var a=this.body.data.edges.getIds();this.add(a,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),r===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(i){for(var n=1<arguments.length&&arguments[1]!==void 0&&arguments[1],r=this.body.edges,s=this.body.data.edges,a=0;a<i.length;a++){var o=i[a],c=r[o];c&&c.disconnect();var d=s.get(o,{showInternalIds:!0});r[o]=this.create(d)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),n===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(i){for(var n=this.body.edges,r=this.body.data.edges,s=!1,a=0;a<i.length;a++){var o=i[a],c=r.get(o),d=n[o];d===void 0?(this.body.edges[o]=this.create(c),s=!0):(d.disconnect(),s=d.setOptions(c)||s,d.connect())}s===!0?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(i){var n=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(i.length!==0){var r=this.body.edges;we.forEach(i,function(s){var a=r[s];a!==void 0&&a.remove()}),n&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var i=this;we.forEach(this.body.edges,function(n,r){var s=i.body.data.edges._data[r];s!==void 0&&n.setOptions(s)})}},{key:"create",value:function(i){return new sm(i,this.body,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var i=this.body.nodes,n=this.body.edges,r;for(r in i)i.hasOwnProperty(r)&&(i[r].edges=[]);for(r in n)if(n.hasOwnProperty(r)){var s=n[r];s.from=null,s.to=null,s.connect()}}},{key:"getConnectedNodes",value:function(i){var n=[];if(this.body.edges[i]!==void 0){var r=this.body.edges[i];r.fromId!==void 0&&n.push(r.fromId),r.toId!==void 0&&n.push(r.toId)}return n}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var i=this,n=[];we.forEach(this.body.edges,function(r,s){var a=i.body.nodes[r.toId],o=i.body.nodes[r.fromId];a!==void 0&&a.isCluster===!0||o!==void 0&&o.isCluster===!0||(a===void 0||o===void 0)&&n.push(s)}),this.remove(n,!1)}},{key:"_addMissingEdges",value:function(){var i=this.body.data.edges;if(i!=null){var n=this.body.edges,r=[];i.forEach(function(s,a){var o=n[a];o===void 0&&r.push(a)}),this.add(r,!0)}}}]),e}(),XL=function(){var t=Math.sin,e=Math.sqrt,i=Math.pow,n=Math.max,r=Math.abs,s=Math.min,a=Math.floor;function o(c,d,p){Qe(this,o),this.body=c,this.physicsBody=d,this.barnesHutTree,this.setOptions(p),this.randomSeed=5}return Je(o,[{key:"setOptions",value:function(c){this.options=c,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-n(0,s(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var c=1e4*t(this.randomSeed++);return c-a(c)}},{key:"solve",value:function(){if(this.options.gravitationalConstant!==0&&0<this.physicsBody.physicsNodeIndices.length){var c=this.body.nodes,d=this.physicsBody.physicsNodeIndices,p=d.length,m=this._formBarnesHutTree(c,d),y;this.barnesHutTree=m;for(var _=0;_<p;_++)y=c[d[_]],0<y.options.mass&&this._getForceContributions(m.root,y)}}},{key:"_getForceContributions",value:function(c,d){this._getForceContribution(c.children.NW,d),this._getForceContribution(c.children.NE,d),this._getForceContribution(c.children.SW,d),this._getForceContribution(c.children.SE,d)}},{key:"_getForceContribution",value:function(c,d){if(0<c.childrenCount){var p,m,y;p=c.centerOfMass.x-d.x,m=c.centerOfMass.y-d.y,y=e(p*p+m*m),y*c.calcSize>this.thetaInversed?this._calculateForces(y,p,m,d,c):c.childrenCount===4?this._getForceContributions(c,d):c.children.data.id!=d.id&&this._calculateForces(y,p,m,d,c)}}},{key:"_calculateForces",value:function(c,d,p,m,y){c===0&&(c=.1,d=c),1>this.overlapAvoidanceFactor&&m.shape.radius&&(c=n(.1+this.overlapAvoidanceFactor*m.shape.radius,c-m.shape.radius));var _=this.options.gravitationalConstant*y.mass*m.options.mass/i(c,3),E=d*_;this.physicsBody.forces[m.id].x+=E,this.physicsBody.forces[m.id].y+=p*_}},{key:"_formBarnesHutTree",value:function(c,d){for(var p=d.length,m=c[d[0]].x,y=c[d[0]].y,_=c[d[0]].x,E=c[d[0]].y,C=1,S;C<p;C++){var k=c[d[C]],R=k.x,O=k.y;0<k.options.mass&&(R<m&&(m=R),R>_&&(_=R),O<y&&(y=O),O>E&&(E=O))}var I=r(_-m)-r(E-y);0<I?(y-=.5*I,E+=.5*I):(m+=.5*I,_-=.5*I);var F=n(1e-5,r(_-m)),P=.5*F,x=.5*(m+_),M=.5*(y+E),q={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:x-P,maxX:x+P,minY:M-P,maxY:M+P},size:F,calcSize:1/F,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(q.root);for(var $=0;$<p;$++)S=c[d[$]],0<S.options.mass&&this._placeInTree(q.root,S);return q}},{key:"_updateBranchMass",value:function(c,d){var p=c.centerOfMass,m=c.mass+d.options.mass,y=1/m;p.x=p.x*c.mass+d.x*d.options.mass,p.x*=y,p.y=p.y*c.mass+d.y*d.options.mass,p.y*=y,c.mass=m;var _=n(n(d.height,d.radius),d.width);c.maxWidth=c.maxWidth<_?_:c.maxWidth}},{key:"_placeInTree",value:function(c,d,p){(p!=!0||p===void 0)&&this._updateBranchMass(c,d);var m=c.children.NW.range,y;y=m.maxX>d.x?m.maxY>d.y?"NW":"SW":m.maxY>d.y?"NE":"SE",this._placeInRegion(c,d,y)}},{key:"_placeInRegion",value:function(c,d,p){var m=c.children[p];switch(m.childrenCount){case 0:m.children.data=d,m.childrenCount=1,this._updateBranchMass(m,d);break;case 1:m.children.data.x===d.x&&m.children.data.y===d.y?(d.x+=this.seededRandom(),d.y+=this.seededRandom()):(this._splitBranch(m),this._placeInTree(m,d));break;case 4:this._placeInTree(m,d)}}},{key:"_splitBranch",value:function(c){var d=null;c.childrenCount===1&&(d=c.children.data,c.mass=0,c.centerOfMass.x=0,c.centerOfMass.y=0),c.childrenCount=4,c.children.data=null,this._insertRegion(c,"NW"),this._insertRegion(c,"NE"),this._insertRegion(c,"SW"),this._insertRegion(c,"SE"),d!=null&&this._placeInTree(c,d)}},{key:"_insertRegion",value:function(c,d){var p=.5*c.size,m,y,_,E;d==="NW"?(m=c.range.minX,y=c.range.minX+p,_=c.range.minY,E=c.range.minY+p):d==="NE"?(m=c.range.minX+p,y=c.range.maxX,_=c.range.minY,E=c.range.minY+p):d==="SW"?(m=c.range.minX,y=c.range.minX+p,_=c.range.minY+p,E=c.range.maxY):d==="SE"&&(m=c.range.minX+p,y=c.range.maxX,_=c.range.minY+p,E=c.range.maxY),c.children[d]={centerOfMass:{x:0,y:0},mass:0,range:{minX:m,maxX:y,minY:_,maxY:E},size:.5*c.size,calcSize:2*c.calcSize,children:{data:null},maxWidth:0,level:c.level+1,childrenCount:0}}},{key:"_debug",value:function(c,d){this.barnesHutTree!==void 0&&(c.lineWidth=1,this._drawBranch(this.barnesHutTree.root,c,d))}},{key:"_drawBranch",value:function(c,d,p){p===void 0&&(p="#FF0000"),c.childrenCount===4&&(this._drawBranch(c.children.NW,d),this._drawBranch(c.children.NE,d),this._drawBranch(c.children.SE,d),this._drawBranch(c.children.SW,d)),d.strokeStyle=p,d.beginPath(),d.moveTo(c.range.minX,c.range.minY),d.lineTo(c.range.maxX,c.range.minY),d.stroke(),d.beginPath(),d.moveTo(c.range.maxX,c.range.minY),d.lineTo(c.range.maxX,c.range.maxY),d.stroke(),d.beginPath(),d.moveTo(c.range.maxX,c.range.maxY),d.lineTo(c.range.minX,c.range.maxY),d.stroke(),d.beginPath(),d.moveTo(c.range.minX,c.range.maxY),d.lineTo(c.range.minX,c.range.minY),d.stroke()}}]),o}(),oQ=function(){var t=Math.sqrt;function e(i,n,r){Qe(this,e),this.body=i,this.physicsBody=n,this.setOptions(r)}return Je(e,[{key:"setOptions",value:function(i){this.options=i}},{key:"solve",value:function(){for(var i=this.body.nodes,n=this.physicsBody.physicsNodeIndices,r=this.physicsBody.forces,s=this.options.nodeDistance,a=0,o,c,d,p,m,y,_,E;a<n.length-1;a++){_=i[n[a]];for(var C=a+1;C<n.length;C++)E=i[n[C]],o=E.x-_.x,c=E.y-_.y,d=t(o*o+c*c),d===0&&(d=.1*Math.random(),o=d),d<2*s&&(y=d<.5*s?1:-2/3/s*d+4/3,y/=d,p=o*y,m=c*y,r[_.id].x-=p,r[_.id].y-=m,r[E.id].x+=p,r[E.id].y+=m)}}}]),e}(),lQ=function(){var t=Math.sqrt,e=Math.pow;function i(n,r,s){Qe(this,i),this.body=n,this.physicsBody=r,this.setOptions(s)}return Je(i,[{key:"setOptions",value:function(n){this.options=n}},{key:"solve",value:function(){var n=this.body.nodes,r=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=this.options.nodeDistance,o,c,d,p,m,y,_,E,C,S;for(C=0;C<r.length-1;C++)for(_=n[r[C]],S=C+1;S<r.length;S++)if(E=n[r[S]],_.level===E.level){o=E.x-_.x,c=E.y-_.y,d=t(o*o+c*c);var k=.05;y=d<a?-e(k*d,2)+e(k*a,2):0,d===0?d=.01:y/=d,p=o*y,m=c*y,s[_.id].x-=p,s[_.id].y-=m,s[E.id].x+=p,s[E.id].y+=m}}}]),i}(),sw=function(){var t=Math.sqrt,e=Math.max;function i(n,r,s){Qe(this,i),this.body=n,this.physicsBody=r,this.setOptions(s)}return Je(i,[{key:"setOptions",value:function(n){this.options=n}},{key:"solve",value:function(){for(var n=this.physicsBody.physicsEdgeIndices,r=this.body.edges,s=0,a,o,c,d,p;s<n.length;s++)o=r[n[s]],o.connected===!0&&o.toId!==o.fromId&&this.body.nodes[o.toId]!==void 0&&this.body.nodes[o.fromId]!==void 0&&(o.edgeType.via===void 0?(a=o.options.length===void 0?1.5*this.options.springLength:o.options.length,this._calculateSpringForce(o.from,o.to,a)):(a=o.options.length===void 0?this.options.springLength:o.options.length,c=o.to,d=o.edgeType.via,p=o.from,this._calculateSpringForce(c,d,.5*a),this._calculateSpringForce(d,p,.5*a)))}},{key:"_calculateSpringForce",value:function(n,r,s){var a=n.x-r.x,o=n.y-r.y,c=e(t(a*a+o*o),.01),d=this.options.springConstant*(s-c)/c,p=a*d,m=o*d;this.physicsBody.forces[n.id]!==void 0&&(this.physicsBody.forces[n.id].x+=p,this.physicsBody.forces[n.id].y+=m),this.physicsBody.forces[r.id]!==void 0&&(this.physicsBody.forces[r.id].x-=p,this.physicsBody.forces[r.id].y-=m)}}]),i}(),cQ=function(){var t=Math.sqrt,e=Math.max,i=Math.min;function n(r,s,a){Qe(this,n),this.body=r,this.physicsBody=s,this.setOptions(a)}return Je(n,[{key:"setOptions",value:function(r){this.options=r}},{key:"solve",value:function(){for(var r=this.body.edges,s=.5,a=this.physicsBody.physicsEdgeIndices,o=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,d=0,p,m,y,_,E,C,S,k,R;d<o.length;d++)R=o[d],c[R].springFx=0,c[R].springFy=0;for(var O=0;O<a.length;O++)m=r[a[O]],m.connected===!0&&(p=m.options.length===void 0?this.options.springLength:m.options.length,y=m.from.x-m.to.x,_=m.from.y-m.to.y,k=t(y*y+_*_),k=k===0?.01:k,S=this.options.springConstant*(p-k)/k,E=y*S,C=_*S,m.to.level==m.from.level?(c[m.toId]!==void 0&&(c[m.toId].x-=s*E,c[m.toId].y-=s*C),c[m.fromId]!==void 0&&(c[m.fromId].x+=s*E,c[m.fromId].y+=s*C)):(c[m.toId]!==void 0&&(c[m.toId].springFx-=E,c[m.toId].springFy-=C),c[m.fromId]!==void 0&&(c[m.fromId].springFx+=E,c[m.fromId].springFy+=C)));S=1;for(var I=0,F,P,x;I<o.length;I++)x=o[I],F=i(S,e(-S,c[x].springFx)),P=i(S,e(-S,c[x].springFy)),c[x].x+=F,c[x].y+=P;for(var M=0,q=0,$=0,B;$<o.length;$++)B=o[$],M+=c[B].x,q+=c[B].y;for(var j=M/o.length,z=q/o.length,X=0,se;X<o.length;X++)se=o[X],c[se].x-=j,c[se].y-=z}}]),n}(),E0=function(){var t=Math.sqrt;function e(i,n,r){Qe(this,e),this.body=i,this.physicsBody=n,this.setOptions(r)}return Je(e,[{key:"setOptions",value:function(i){this.options=i}},{key:"solve",value:function(){for(var i=this.body.nodes,n=this.physicsBody.physicsNodeIndices,r=this.physicsBody.forces,s=0,a,o,c,d,p;s<n.length;s++)p=n[s],d=i[p],a=-d.x,o=-d.y,c=t(a*a+o*o),this._calculateForces(c,a,o,r,d)}},{key:"_calculateForces",value:function(i,n,r,s,a){var o=i===0?0:this.options.centralGravity/i;s[a.id].x=n*o,s[a.id].y=r*o}}]),e}(),uQ=function(t){var e=Math.pow,i=Math.max;function n(r,s,a){return Qe(this,n),Bi(this,Fi(n).call(this,r,s,a))}return $i(n,t),Je(n,[{key:"_calculateForces",value:function(r,s,a,o,c){r===0&&(r=.1*Math.random(),s=r),1>this.overlapAvoidanceFactor&&o.shape.radius&&(r=i(.1+this.overlapAvoidanceFactor*o.shape.radius,r-o.shape.radius));var d=o.edges.length+1,p=this.options.gravitationalConstant*c.mass*o.options.mass*d/e(r,2),m=s*p;this.physicsBody.forces[o.id].x+=m,this.physicsBody.forces[o.id].y+=a*p}}]),n}(XL),dQ=function(t){function e(i,n,r){return Qe(this,e),Bi(this,Fi(e).call(this,i,n,r))}return $i(e,t),Je(e,[{key:"_calculateForces",value:function(i,n,r,s,a){if(0<i){var o=a.edges.length+1,c=this.options.centralGravity*o*a.options.mass;s[a.id].x=n*c,s[a.id].y=r*c}}}]),e}(E0),hQ=function(){var t=Math.atan2,e=Math.sqrt,i=Math.pow,n=Math.max,r=Math.abs,s=Math.min;function a(o){Qe(this,a),this.body=o,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},we.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return Je(a,[{key:"bindEventListeners",value:function(){var o=this;this.body.emitter.on("initPhysics",function(){o.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){o.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){o.stopSimulation(),o.ready=!1}),this.body.emitter.on("disablePhysics",function(){o.physicsEnabled=!1,o.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){o.setOptions(o.options),o.ready===!0&&o.startSimulation()}),this.body.emitter.on("startSimulation",function(){o.ready===!0&&o.startSimulation()}),this.body.emitter.on("stopSimulation",function(){o.stopSimulation()}),this.body.emitter.on("destroy",function(){o.stopSimulation(!1),o.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){o.updatePhysicsData()})}},{key:"setOptions",value:function(o){o!==void 0&&(o===!1?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):o===!0?(this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation()):(this.physicsEnabled=!0,we.selectiveNotDeepExtend(["stabilization"],this.options,o),we.mergeOptions(this.options,o,"stabilization"),o.enabled===void 0&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var o;this.options.solver==="forceAtlas2Based"?(o=this.options.forceAtlas2Based,this.nodesSolver=new uQ(this.body,this.physicsBody,o),this.edgesSolver=new sw(this.body,this.physicsBody,o),this.gravitySolver=new dQ(this.body,this.physicsBody,o)):this.options.solver==="repulsion"?(o=this.options.repulsion,this.nodesSolver=new oQ(this.body,this.physicsBody,o),this.edgesSolver=new sw(this.body,this.physicsBody,o),this.gravitySolver=new E0(this.body,this.physicsBody,o)):this.options.solver==="hierarchicalRepulsion"?(o=this.options.hierarchicalRepulsion,this.nodesSolver=new lQ(this.body,this.physicsBody,o),this.edgesSolver=new cQ(this.body,this.physicsBody,o),this.gravitySolver=new E0(this.body,this.physicsBody,o)):(o=this.options.barnesHut,this.nodesSolver=new XL(this.body,this.physicsBody,o),this.edgesSolver=new sw(this.body,this.physicsBody,o),this.gravitySolver=new E0(this.body,this.physicsBody,o)),this.modelOptions=o}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),this.viewFunction===void 0&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var o=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0];this.stabilized=!0,o===!0&&this._emitStabilized(),this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,o===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var o=Date.now();this.physicsTick();var c=Date.now()-o;(c<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var o=this,c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.stabilizationIterations;(1<this.stabilizationIterations||this.startedStabilization===!0)&&setTimeout(function(){o.body.emitter.emit("stabilized",{iterations:c}),o.startedStabilization=!1,o.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){var o=1.2;this._evaluateStepQuality()===!0?this.timestep=o*this.timestep:this.timestep/o<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=n(this.options.timestep,this.timestep/o))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),this.stabilized!==!0){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var o=this.adaptiveCounter%this.adaptiveInterval==0;o?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.physicsStep();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var o=this.body.nodes,c=this.body.edges;for(var d in o)o.hasOwnProperty(d)&&o[d].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(o[d].id);for(var p in c)c.hasOwnProperty(p)&&c[p].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(c[p].id);for(var m=0,y;m<this.physicsBody.physicsNodeIndices.length;m++)y=this.physicsBody.physicsNodeIndices[m],this.physicsBody.forces[y]={x:0,y:0},this.physicsBody.velocities[y]===void 0&&(this.physicsBody.velocities[y]={x:0,y:0});for(var _ in this.physicsBody.velocities)o[_]===void 0&&delete this.physicsBody.velocities[_]}},{key:"revert",value:function(){var o=Object.keys(this.previousStates),c=this.body.nodes,d=this.physicsBody.velocities;this.referenceState={};for(var p=0,m;p<o.length;p++)m=o[p],c[m]===void 0?delete this.previousStates[m]:c[m].options.physics===!0&&(this.referenceState[m]={positions:{x:c[m].x,y:c[m].y}},d[m].x=this.previousStates[m].vx,d[m].y=this.previousStates[m].vy,c[m].x=this.previousStates[m].x,c[m].y=this.previousStates[m].y)}},{key:"_evaluateStepQuality",value:function(){var o=this.body.nodes,c=this.referenceState,d,p,m;for(var y in this.referenceState)if(this.referenceState.hasOwnProperty(y)&&o[y]!==void 0&&(d=o[y].x-c[y].positions.x,p=o[y].y-c[y].positions.y,m=e(i(d,2)+i(p,2)),m>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var o=this.physicsBody.physicsNodeIndices,c=0,d=0,p=5,m=0;m<o.length;m++){var y=o[m],_=this._performStep(y);c=n(c,_),d+=_}this.adaptiveTimestepEnabled=d/o.length<p,this.stabilized=c<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(o,c,d){var p=this.modelOptions.damping*o;o+=(c-p)/d*this.timestep;var m=this.options.maxVelocity||1e9;return r(o)>m&&(o=0<o?m:-m),o}},{key:"_performStep",value:function(o){var c=this.body.nodes[o],d=this.physicsBody.forces[o],p=this.physicsBody.velocities[o];this.previousStates[o]={x:c.x,y:c.y,vx:p.x,vy:p.y},c.options.fixed.x===!1?(p.x=this.calculateComponentVelocity(p.x,d.x,c.options.mass),c.x+=p.x*this.timestep):(d.x=0,p.x=0),c.options.fixed.y===!1?(p.y=this.calculateComponentVelocity(p.y,d.y,c.options.mass),c.y+=p.y*this.timestep):(d.y=0,p.y=0);var m=e(i(p.x,2)+i(p.y,2));return m}},{key:"_freezeNodes",value:function(){var o=this.body.nodes;for(var c in o)if(o.hasOwnProperty(c)&&o[c].x&&o[c].y){var d=o[c].options.fixed;this.freezeCache[c]={x:d.x,y:d.y},d.x=!0,d.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var o=this.body.nodes;for(var c in o)o.hasOwnProperty(c)&&this.freezeCache[c]!==void 0&&(o[c].options.fixed.x=this.freezeCache[c].x,o[c].options.fixed.y=this.freezeCache[c].y);this.freezeCache={}}},{key:"stabilize",value:function(){var o=this,c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options.stabilization.iterations;return typeof c!="number"&&(c=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",c)),this.physicsBody.physicsNodeIndices.length===0?void(this.ready=!0):(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=c,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,void setTimeout(function(){return o._stabilizationBatch()},0))}},{key:"_startStabilizing",value:function(){return this.startedStabilization!==!0&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var o=this,c=function(){return o.stabilized===!1&&o.stabilizationIterations<o.targetIterations},d=function(){o.body.emitter.emit("stabilizationProgress",{iterations:o.stabilizationIterations,total:o.targetIterations})};this._startStabilizing()&&d();for(var p=0;c()&&p<this.options.stabilization.updateInterval;)this.physicsTick(),p++;d(),c()?setTimeout(this._stabilizationBatch.bind(this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(o){for(var c=0;c<this.physicsBody.physicsNodeIndices.length;c++){var d=this.physicsBody.physicsNodeIndices[c],p=this.body.nodes[d],m=this.physicsBody.forces[d],y=20,_=e(i(m.x,2)+i(m.x,2)),E=s(n(5,_),15),C=we.HSVToHex((180-180*s(1,n(0,.03*_)))/360,1,1),S={x:p.x+y*m.x,y:p.y+y*m.y};o.lineWidth=E,o.strokeStyle=C,o.beginPath(),o.moveTo(p.x,p.y),o.lineTo(S.x,S.y),o.stroke();var k=t(m.y,m.x);o.fillStyle=C,jL.draw(o,{type:"arrow",point:S,angle:k,length:3*E}),o.fill()}}}]),a}(),ga=function(){function t(){Qe(this,t)}return Je(t,null,[{key:"getRange",value:function(e){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],n=1e9,r=-1e9,s=1e9,a=-1e9,o;if(0<i.length)for(var c=0;c<i.length;c++)o=e[i[c]],s>o.shape.boundingBox.left&&(s=o.shape.boundingBox.left),a<o.shape.boundingBox.right&&(a=o.shape.boundingBox.right),n>o.shape.boundingBox.top&&(n=o.shape.boundingBox.top),r<o.shape.boundingBox.bottom&&(r=o.shape.boundingBox.bottom);return s===1e9&&a===-1e9&&n===1e9&&r===-1e9&&(n=0,r=0,s=0,a=0),{minX:s,maxX:a,minY:n,maxY:r}}},{key:"getRangeCore",value:function(e){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],n=1e9,r=-1e9,s=1e9,a=-1e9,o;if(0<i.length)for(var c=0;c<i.length;c++)o=e[i[c]],s>o.x&&(s=o.x),a<o.x&&(a=o.x),n>o.y&&(n=o.y),r<o.y&&(r=o.y);return s===1e9&&a===-1e9&&n===1e9&&r===-1e9&&(n=0,r=0,s=0,a=0),{minX:s,maxX:a,minY:n,maxY:r}}},{key:"findCenter",value:function(e){return{x:.5*(e.maxX+e.minX),y:.5*(e.maxY+e.minY)}}},{key:"cloneOptions",value:function(e,i){var n={};return i===void 0||i==="node"?(we.deepExtend(n,e.options,!0),n.x=e.x,n.y=e.y,n.amountOfConnections=e.edges.length):we.deepExtend(n,e.options,!0),n}}]),t}(),fQ=function(t){function e(i,n,r,s,a,o){var c;return Qe(this,e),c=Bi(this,Fi(e).call(this,i,n,r,s,a,o)),c.isCluster=!0,c.containedNodes={},c.containedEdges={},c}return $i(e,t),Je(e,[{key:"_openChildCluster",value:function(i){var n=this,r=this.body.nodes[i];if(this.containedNodes[i]===void 0)throw new Error("node with id: "+i+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+i+" is not a cluster");delete this.containedNodes[i],we.forEach(r.edges,function(s){delete n.containedEdges[s.id]}),we.forEach(r.containedNodes,function(s,a){n.containedNodes[a]=s}),r.containedNodes={},we.forEach(r.containedEdges,function(s,a){n.containedEdges[a]=s}),r.containedEdges={},we.forEach(r.edges,function(s){we.forEach(n.edges,function(a){var o=a.clusteringEdgeReplacingIds.indexOf(s.id);o===-1||(we.forEach(s.clusteringEdgeReplacingIds,function(c){a.clusteringEdgeReplacingIds.push(c),n.body.edges[c].edgeReplacedById=a.id}),a.clusteringEdgeReplacingIds.splice(o,1))})}),r.edges=[]}}]),e}(ha),pQ=function(){var t=Math.sqrt,e=Math.pow,i=Math.floor;function n(r){var s=this;Qe(this,n),this.body=r,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},we.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){s.clusteredNodes={},s.clusteredEdges={}})}return Je(n,[{key:"clusterByHubsize",value:function(r,s){r===void 0?r=this._getHubSize():zs(r)==="object"&&(s=this._checkOptions(r),r=this._getHubSize());for(var a=[],o=0,c;o<this.body.nodeIndices.length;o++)c=this.body.nodes[this.body.nodeIndices[o]],c.edges.length>=r&&a.push(c.id);for(var d=0;d<a.length;d++)this.clusterByConnection(a[d],s,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var r=this,s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},a=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(s.joinCondition===void 0)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");s=this._checkOptions(s);var o={},c={};we.forEach(this.body.nodes,function(d,p){d.options&&s.joinCondition(d.options)===!0&&(o[p]=d,we.forEach(d.edges,function(m){r.clusteredEdges[m.id]===void 0&&(c[m.id]=m)}))}),this._cluster(o,c,s,a)}},{key:"clusterByEdgeCount",value:function(r,s){var a=this,o=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2];s=this._checkOptions(s);for(var c=[],d={},p=function(R){var O={},I={},F=a.body.nodeIndices[R],P=a.body.nodes[F];if(d[F]===void 0){E=0,_=[];for(var x=0;x<P.edges.length;x++)y=P.edges[x],a.clusteredEdges[y.id]===void 0&&(y.toId!==y.fromId&&E++,_.push(y));if(E===r){C=function(z){if(s.joinCondition===void 0||s.joinCondition===null)return!0;var X=ga.cloneOptions(z);return s.joinCondition(X)};for(var M=!0,q=0;q<_.length;q++){y=_[q];var $=a._getConnectedId(y,F);if(C(P))I[y.id]=y,O[F]=P,O[$]=a.body.nodes[$],d[F]=!0;else{M=!1;break}}if(0<Object.keys(O).length&&0<Object.keys(I).length&&M===!0)if(S=function(){for(var z=0;z<c.length;++z)for(var X in O)if(c[z].nodes[X]!==void 0)return c[z]},k=S(),k!==void 0){for(var B in O)k.nodes[B]===void 0&&(k.nodes[B]=O[B]);for(var j in I)k.edges[j]===void 0&&(k.edges[j]=I[j])}else c.push({nodes:O,edges:I})}}},m=0,y,_,E;m<this.body.nodeIndices.length;m++){var C,S,k;p(m)}for(var m=0;m<c.length;m++)this._cluster(c[m].nodes,c[m].edges,s,!1);o===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(r){var s=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];this.clusterByEdgeCount(1,r,s)}},{key:"clusterBridges",value:function(r){var s=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];this.clusterByEdgeCount(2,r,s)}},{key:"clusterByConnection",value:function(r,s){var a=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2];if(r===void 0)throw new Error("No nodeId supplied to clusterByConnection!");if(this.body.nodes[r]===void 0)throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[r];s=this._checkOptions(s,o),s.clusterNodeProperties.x===void 0&&(s.clusterNodeProperties.x=o.x),s.clusterNodeProperties.y===void 0&&(s.clusterNodeProperties.y=o.y),s.clusterNodeProperties.fixed===void 0&&(s.clusterNodeProperties.fixed={},s.clusterNodeProperties.fixed.x=o.options.fixed.x,s.clusterNodeProperties.fixed.y=o.options.fixed.y);var c={},d={},p=o.id,m=ga.cloneOptions(o);c[p]=o;for(var y=0,_;y<o.edges.length;y++)if(_=o.edges[y],this.clusteredEdges[_.id]===void 0){var E=this._getConnectedId(_,p);if(this.clusteredNodes[E]===void 0)if(E===p)d[_.id]=_;else if(s.joinCondition===void 0)d[_.id]=_,c[E]=this.body.nodes[E];else{var C=ga.cloneOptions(this.body.nodes[E]);s.joinCondition(m,C)===!0&&(d[_.id]=_,c[E]=this.body.nodes[E])}}var S=Object.keys(c).map(function(I){return c[I].id});for(k in c)if(c.hasOwnProperty(k))for(var k=c[k],R=0,O;R<k.edges.length;R++)O=k.edges[R],-1<S.indexOf(this._getConnectedId(O,k.id))&&(d[O.id]=O);this._cluster(c,d,s,a)}},{key:"_createClusterEdges",value:function(r,s,a,o){for(var c=Object.keys(r),d=[],p=0,m,y,_,E,C,S;p<c.length;p++){y=c[p],_=r[y];for(var k=0;k<_.edges.length;k++)m=_.edges[k],this.clusteredEdges[m.id]===void 0&&(m.toId==m.fromId?s[m.id]=m:m.toId==y?(E=a.id,C=m.fromId,S=C):(E=m.toId,C=a.id,S=E),r[S]===void 0&&d.push({edge:m,fromId:C,toId:E}))}for(var R=[],O=function(M){for(var q=0;q<R.length;q++){var $=R[q],B=M.fromId===$.fromId&&M.toId===$.toId,j=M.fromId===$.toId&&M.toId===$.fromId;if(B||j)return $}return null},I=0;I<d.length;I++){var F=d[I],P=F.edge,x=O(F);x===null?(x=this._createClusteredEdge(F.fromId,F.toId,P,o),R.push(x)):x.clusteringEdgeReplacingIds.push(P.id),this.body.edges[P.id].edgeReplacedById=x.id,this._backupEdgeOptions(P),P.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return r.clusterEdgeProperties===void 0&&(r.clusterEdgeProperties={}),r.clusterNodeProperties===void 0&&(r.clusterNodeProperties={}),r}},{key:"_cluster",value:function(r,s,a){var o=!(3<arguments.length&&arguments[3]!==void 0)||arguments[3],c=[];for(var d in r)r.hasOwnProperty(d)&&this.clusteredNodes[d]!==void 0&&c.push(d);for(var p=0;p<c.length;++p)delete r[c[p]];if(Object.keys(r).length!=0&&(Object.keys(r).length!=1||a.clusterNodeProperties.allowSingleNodeCluster==!0)){var m=we.deepExtend({},a.clusterNodeProperties);if(a.processProperties!==void 0){var y=[];for(var _ in r)if(r.hasOwnProperty(_)){var E=ga.cloneOptions(r[_]);y.push(E)}var C=[];for(var S in s)if(s.hasOwnProperty(S)&&S.substr(0,12)!=="clusterEdge:"){var k=ga.cloneOptions(s[S],"edge");C.push(k)}if(m=a.processProperties(m,y,C),!m)throw new Error("The processProperties function does not return properties!")}m.id===void 0&&(m.id="cluster:"+we.randomUUID());var R=m.id;m.label===void 0&&(m.label="cluster");var O;m.x===void 0&&(O=this._getClusterPosition(r),m.x=O.x),m.y===void 0&&(O===void 0&&(O=this._getClusterPosition(r)),m.y=O.y),m.id=R;var I=this.body.functions.createNode(m,fQ);I.containedNodes=r,I.containedEdges=s,I.clusterEdgeProperties=a.clusterEdgeProperties,this.body.nodes[m.id]=I,this._clusterEdges(r,s,m,a.clusterEdgeProperties),m.id=void 0,o===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(r){this.clusteredEdges[r.id]===void 0&&(this.clusteredEdges[r.id]={physics:r.options.physics})}},{key:"_restoreEdge",value:function(r){var s=this.clusteredEdges[r.id];s!==void 0&&(r.setOptions({physics:s.physics}),delete this.clusteredEdges[r.id])}},{key:"isCluster",value:function(r){return this.body.nodes[r]===void 0?(console.log("Node does not exist."),!1):this.body.nodes[r].isCluster===!0}},{key:"_getClusterPosition",value:function(r){for(var s=Object.keys(r),a=r[s[0]].x,o=r[s[0]].x,c=r[s[0]].y,d=r[s[0]].y,p=1,m;p<s.length;p++)m=r[s[p]],a=m.x<a?m.x:a,o=m.x>o?m.x:o,c=m.y<c?m.y:c,d=m.y>d?m.y:d;return{x:.5*(a+o),y:.5*(c+d)}}},{key:"openCluster",value:function(r,s){var a=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2];if(r===void 0)throw new Error("No clusterNodeId supplied to openCluster.");var o=this.body.nodes[r];if(o===void 0)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(o.isCluster!==!0||o.containedNodes===void 0||o.containedEdges===void 0)throw new Error("The node:"+r+" is not a valid cluster.");var c=this.findNode(r),d=c.indexOf(r)-1;if(0<=d){var p=c[d],m=this.body.nodes[p];return m._openChildCluster(r),delete this.body.nodes[r],void(a===!0&&this.body.emitter.emit("_dataChanged"))}var y=o.containedNodes,_=o.containedEdges;if(s!==void 0&&s.releaseFunction!==void 0&&typeof s.releaseFunction=="function"){var E={},C={x:o.x,y:o.y};for(var S in y)if(y.hasOwnProperty(S)){var k=this.body.nodes[S];E[S]={x:k.x,y:k.y}}var R=s.releaseFunction(C,E);for(var O in y)if(y.hasOwnProperty(O)){var I=this.body.nodes[O];R[O]!==void 0&&(I.x=R[O].x===void 0?o.x:R[O].x,I.y=R[O].y===void 0?o.y:R[O].y)}}else we.forEach(y,function(oe){oe.options.fixed.x===!1&&(oe.x=o.x),oe.options.fixed.y===!1&&(oe.y=o.y)});for(var F in y)if(y.hasOwnProperty(F)){var P=this.body.nodes[F];P.vx=o.vx,P.vy=o.vy,P.setOptions({physics:!0}),delete this.clusteredNodes[F]}for(var x=[],M=0;M<o.edges.length;M++)x.push(o.edges[M]);for(var q=0;q<x.length;q++){for(var $=x[q],B=this._getConnectedId($,r),j=this.clusteredNodes[B],z=0;z<$.clusteringEdgeReplacingIds.length;z++){var X=$.clusteringEdgeReplacingIds[z],se=this.body.edges[X];if(se!==void 0)if(j!==void 0){var ue=this.body.nodes[j.clusterId];ue.containedEdges[se.id]=se,delete _[se.id];var ve=se.fromId,_e=se.toId;se.toId==B?_e=j.clusterId:ve=j.clusterId,this._createClusteredEdge(ve,_e,se,ue.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(se)}$.remove()}for(var de in _)_.hasOwnProperty(de)&&this._restoreEdge(_[de]);delete this.body.nodes[r],a===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(r){var s=[];if(this.isCluster(r)===!0){var a=this.body.nodes[r].containedNodes;for(var o in a)a.hasOwnProperty(o)&&s.push(this.body.nodes[o].id)}return s}},{key:"findNode",value:function(r){for(var s=[],a=0,o;this.clusteredNodes[r]!==void 0&&a<100;){if(o=this.body.nodes[r],o===void 0)return[];s.push(o.id),r=this.clusteredNodes[r].clusterId,a++}return o=this.body.nodes[r],o===void 0?[]:(s.push(o.id),s.reverse(),s)}},{key:"updateClusteredNode",value:function(r,s){if(r===void 0)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(s===void 0)throw new Error("No newOptions supplied to updateClusteredNode.");if(this.body.nodes[r]===void 0)throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[r].setOptions(s),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(r,s){if(r===void 0)throw new Error("No startEdgeId supplied to updateEdge.");if(s===void 0)throw new Error("No newOptions supplied to updateEdge.");if(this.body.edges[r]===void 0)throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var a=this.getClusteredEdges(r),o=0,c;o<a.length;o++)c=this.body.edges[a[o]],c.setOptions(s);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(r){for(var s=[],a=0;r!==void 0&&this.body.edges[r]!==void 0&&a<100;)s.push(this.body.edges[r].id),r=this.body.edges[r].edgeReplacedById,a++;return s.reverse(),s}},{key:"getBaseEdge",value:function(r){return this.getBaseEdges(r)[0]}},{key:"getBaseEdges",value:function(r){for(var s=[r],a=[],o=[],c=0,d;0<s.length&&c<100;)if(d=s.pop(),d!==void 0){var p=this.body.edges[d];if(p!==void 0){c++;var m=p.clusteringEdgeReplacingIds;if(m===void 0)o.push(d);else for(var y=0,_;y<m.length;++y)_=m[y],s.indexOf(m)===-1&&a.indexOf(m)===-1&&s.push(_);a.push(d)}}return o}},{key:"_getConnectedId",value:function(r,s){return r.toId==s?(r.fromId==s,r.fromId):r.toId}},{key:"_getHubSize",value:function(){for(var r=0,s=0,a=0,o=0,c=0,d;c<this.body.nodeIndices.length;c++)d=this.body.nodes[this.body.nodeIndices[c]],d.edges.length>o&&(o=d.edges.length),r+=d.edges.length,s+=e(d.edges.length,2),a+=1;r/=a,s/=a;var p=s-e(r,2),m=t(p),y=i(r+2*m);return y>o&&(y=o),y}},{key:"_createClusteredEdge",value:function(r,s,a,o,c){var d=ga.cloneOptions(a,"edge");we.deepExtend(d,o),d.from=r,d.to=s,d.id="clusterEdge:"+we.randomUUID(),c!==void 0&&we.deepExtend(d,c);var p=this.body.functions.createEdge(d);return p.clusteringEdgeReplacingIds=[a.id],p.connect(),this.body.edges[p.id]=p,p}},{key:"_clusterEdges",value:function(r,s,a,o){if(s instanceof sm){var c=s,d={};d[c.id]=c,s=d}if(r instanceof ha){var p=r,m={};m[p.id]=p,r=m}if(a==null)throw new Error("_clusterEdges: parameter clusterNode required");for(var y in o===void 0&&(o=a.clusterEdgeProperties),this._createClusterEdges(r,s,a,o),s)if(s.hasOwnProperty(y)&&this.body.edges[y]!==void 0){var _=this.body.edges[y];this._backupEdgeOptions(_),_.setOptions({physics:!1})}for(var E in r)r.hasOwnProperty(E)&&(this.clusteredNodes[E]={clusterId:a.id,node:this.body.nodes[E]},this.body.nodes[E].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(r){if(r!==void 0){var s=this.clusteredNodes[r];if(s!==void 0){var a=s.clusterId;return a===void 0?void 0:this.body.nodes[a]}}}},{key:"_filter",value:function(r,s){var a=[];return we.forEach(r,function(o){s(o)&&a.push(o)}),a}},{key:"_updateState",value:function(){var r=this,s=[],a={},o=function(C){we.forEach(r.body.nodes,function(S){S.isCluster===!0&&C(S)})},c;for(c in this.clusteredNodes)if(this.clusteredNodes.hasOwnProperty(c)){var d=this.body.nodes[c];d===void 0&&s.push(c)}o(function(C){for(var S=0;S<s.length;S++)delete C.containedNodes[s[S]]});for(var p=0;p<s.length;p++)delete this.clusteredNodes[s[p]];we.forEach(this.clusteredEdges,function(C){var S=r.body.edges[C];S!==void 0&&S.endPointsValid()||(a[C]=C)}),o(function(C){we.forEach(C.containedEdges,function(S,k){S.endPointsValid()||a[k]||(a[k]=k)})}),we.forEach(this.body.edges,function(C,S){var k=!0,R=C.clusteringEdgeReplacingIds;if(R!==void 0){var O=0;we.forEach(R,function(I){var F=r.body.edges[I];F!==void 0&&F.endPointsValid()&&(O+=1)}),k=0<O}C.endPointsValid()&&k||(a[S]=S)}),o(function(C){we.forEach(a,function(S){delete C.containedEdges[S],we.forEach(C.edges,function(k,R){return k.id===S?void(C.edges[R]=null):void(k.clusteringEdgeReplacingIds=r._filter(k.clusteringEdgeReplacingIds,function(O){return!a[O]}))}),C.edges=r._filter(C.edges,function(k){return k!==null})})}),we.forEach(a,function(C){delete r.clusteredEdges[C]}),we.forEach(a,function(C){delete r.body.edges[C]});var m=Object.keys(this.body.edges);we.forEach(m,function(C){var S=r.body.edges[C],k=r._isClusteredNode(S.fromId)||r._isClusteredNode(S.toId);if(k!==r._isClusteredEdge(S.id))if(k){var R=r._getClusterNodeForNode(S.fromId);R!==void 0&&r._clusterEdges(r.body.nodes[S.fromId],S,R);var O=r._getClusterNodeForNode(S.toId);O!==void 0&&r._clusterEdges(r.body.nodes[S.toId],S,O)}else delete r._clusterEdges[C],r._restoreEdge(S)});for(var y=!1,_=!0,E=function(){var C=[];o(function(k){var R=Object.keys(k.containedNodes).length,O=k.options.allowSingleNodeCluster===!0;(O&&1>R||!O&&2>R)&&C.push(k.id)});for(var S=0;S<C.length;++S)r.openCluster(C[S],{},!1);_=0<C.length,y=y||_};_;)E();y&&this._updateState()}},{key:"_isClusteredNode",value:function(r){return this.clusteredNodes[r]!==void 0}},{key:"_isClusteredEdge",value:function(r){return this.clusteredEdges[r]!==void 0}}]),n}(),zM;function mQ(){var t;window!==void 0&&(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=t===void 0?function(e){e()}:t}var yQ=function(){function t(e,i){Qe(this,t),mQ(),this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},we.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return Je(t,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("dragStart",function(){e.dragging=!0}),this.body.emitter.on("dragEnd",function(){e.dragging=!1}),this.body.emitter.on("zoom",function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=window.setTimeout(function(){e.zooming=!1,e._requestRedraw.bind(e)()},250)}),this.body.emitter.on("_resizeNodes",function(){e._resizeNodes()}),this.body.emitter.on("_redraw",function(){e.renderingActive===!1&&e._redraw()}),this.body.emitter.on("_blockRedraw",function(){e.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){e.allowRedraw=!0,e.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()}),this.body.emitter.on("_stopRendering",function(){e.renderRequests-=1,e.renderingActive=0<e.renderRequests,e.renderTimer=void 0}),this.body.emitter.on("destroy",function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,e.requiresTimeout===!0?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()})}},{key:"setOptions",value:function(e){e!==void 0&&we.selectiveDeepExtend(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,e)}},{key:"_requestNextFrame",value:function(e,i){if(typeof window<"u"){var n=window,r;return this.requiresTimeout===!0?r=n.setTimeout(e,i):n.requestAnimationFrame&&(r=n.requestAnimationFrame(e)),r}}},{key:"_startRendering",value:function(){this.renderingActive===!0&&this.renderTimer===void 0&&(this.renderTimer=this._requestNextFrame(this._renderStep.bind(this),this.simulationInterval))}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var e=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this._requestNextFrame(function(){e._redraw(!1)},0))}},{key:"_redraw",value:function(){var e=0<arguments.length&&arguments[0]!==void 0&&arguments[0];if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1,(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0)&&this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),n=this.canvas.frame.canvas.clientWidth,r=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,n,r),this.canvas.frame.clientWidth===0)return;i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),e===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&(this.zooming===!1||this.zooming===!0&&this.options.hideEdgesOnZoom===!1)&&this._drawEdges(i),(this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1)&&this._drawNodes(i,e),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),e===!0&&i.clearRect(0,0,n,r)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var e=this.canvas.getContext();e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale);var i=this.body.nodes,n;for(var r in i)i.hasOwnProperty(r)&&(n=i[r],n.resize(e),n.updateBoundingBox(e,n.selected));e.restore()}},{key:"_drawNodes",value:function(e){for(var i=1<arguments.length&&arguments[1]!==void 0&&arguments[1],n=this.body.nodes,r=this.body.nodeIndices,s=[],a=20,o=this.canvas.DOMtoCanvas({x:-a,y:-a}),c=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+a,y:this.canvas.frame.canvas.clientHeight+a}),d={top:o.y,left:o.x,bottom:c.y,right:c.x},p=0,m;p<r.length;p++)m=n[r[p]],m.isSelected()?s.push(r[p]):i===!0||m.isBoundingBoxOverlappingWith(d)===!0?m.draw(e):m.updateBoundingBox(e,m.selected);for(var y=0;y<s.length;y++)m=n[s[y]],m.draw(e)}},{key:"_drawEdges",value:function(e){for(var i=this.body.edges,n=this.body.edgeIndices,r=0,s;r<n.length;r++)s=i[n[r]],s.connected===!0&&s.draw(e)}},{key:"_determineBrowserMethod",value:function(){if(typeof window<"u"){var e=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,e.indexOf("msie 9.0")==-1?e.indexOf("safari")!=-1&&-1>=e.indexOf("chrome")&&(this.requiresTimeout=!0):this.requiresTimeout=!0}else this.requiresTimeout=!0}}]),t}(),ko=yl(function(t,e){e.onTouch=function(i,n){n.inputHandler=function(r){r.isFirst&&n(r)},i.on("hammer.input",n.inputHandler)},e.onRelease=function(i,n){return n.inputHandler=function(r){r.isFinal&&n(r)},i.on("hammer.input",n.inputHandler)},e.offTouch=function(i,n){i.off("hammer.input",n.inputHandler)},e.offRelease=e.offTouch,e.disablePreventDefaultVertically=function(i){return i.getTouchAction=function(){return["pan-y"]},i}});ko.onTouch;ko.onRelease;ko.offTouch;ko.offRelease;ko.disablePreventDefaultVertically;var gQ=function(){var t=Math.round;function e(i){Qe(this,e),this.body=i,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},we.extend(this.options,this.defaultOptions),this.bindEventListeners()}return Je(e,[{key:"bindEventListeners",value:function(){var i=this;this.body.emitter.once("resize",function(n){n.width!==0&&(i.body.view.translation.x=.5*n.width),n.height!==0&&(i.body.view.translation.y=.5*n.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){i.hammerFrame.destroy(),i.hammer.destroy(),i._cleanUp()})}},{key:"setOptions",value:function(i){var n=this;i!==void 0&&we.selectiveDeepExtend(["width","height","autoResize"],this.options,i),this.options.autoResize===!0&&(this._cleanUp(),this.resizeTimer=setInterval(function(){var r=n.setSize();r===!0&&n.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),we.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){this.resizeTimer!==void 0&&clearInterval(this.resizeTimer),we.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.pixelRatio;this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/i,this.cameraState.previousHeight=this.frame.canvas.height/i,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/i,y:.5*this.frame.canvas.height/i}))}},{key:"_setCameraState",value:function(){if(this.cameraState.scale!==void 0&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&0<this.cameraState.previousWidth){var i=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,n=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,r=this.cameraState.scale;i!=1&&n!=1?r=.5*this.cameraState.scale*(i+n):i==1?n!=1&&(r=this.cameraState.scale*n):r=this.cameraState.scale*i,this.body.view.scale=r;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),a={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=a.x*this.body.view.scale,this.body.view.translation.y+=a.y*this.body.view.scale}}},{key:"_prepareValue",value:function(i){if(typeof i=="number")return i+"px";if(typeof i=="string"){if(i.indexOf("%")!==-1||i.indexOf("px")!==-1)return i;if(i.indexOf("%")===-1)return i+"px"}throw new Error("Could not use the value supplied for width or height:"+i)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),!this.frame.canvas.getContext){var i=document.createElement("DIV");i.style.color="red",i.style.fontWeight="bold",i.style.padding="10px",i.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(i)}else this._setPixelRatio(),this.setTransform();this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var i=this;this.hammer!==void 0&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new _d(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:_d.DIRECTION_ALL}),ko.onTouch(this.hammer,function(n){i.body.eventListeners.onTouch(n)}),this.hammer.on("tap",function(n){i.body.eventListeners.onTap(n)}),this.hammer.on("doubletap",function(n){i.body.eventListeners.onDoubleTap(n)}),this.hammer.on("press",function(n){i.body.eventListeners.onHold(n)}),this.hammer.on("panstart",function(n){i.body.eventListeners.onDragStart(n)}),this.hammer.on("panmove",function(n){i.body.eventListeners.onDrag(n)}),this.hammer.on("panend",function(n){i.body.eventListeners.onDragEnd(n)}),this.hammer.on("pinch",function(n){i.body.eventListeners.onPinch(n)}),this.frame.canvas.addEventListener("mousewheel",function(n){i.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(n){i.body.eventListeners.onMouseWheel(n)}),this.frame.canvas.addEventListener("mousemove",function(n){i.body.eventListeners.onMouseMove(n)}),this.frame.canvas.addEventListener("contextmenu",function(n){i.body.eventListeners.onContext(n)}),this.hammerFrame=new _d(this.frame),ko.onRelease(this.hammerFrame,function(n){i.body.eventListeners.onRelease(n)})}},{key:"setSize",value:function(){var i=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.options.width,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.options.height;i=this._prepareValue(i),n=this._prepareValue(n);var r=!1,s=this.frame.canvas.width,a=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),i!=this.options.width||n!=this.options.height||this.frame.style.width!=i||this.frame.style.height!=n)this._getCameraState(o),this.frame.style.width=i,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=t(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=t(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=i,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},r=!0;else{var c=t(this.frame.canvas.clientWidth*this.pixelRatio),d=t(this.frame.canvas.clientHeight*this.pixelRatio);(this.frame.canvas.width!==c||this.frame.canvas.height!==d)&&this._getCameraState(o),this.frame.canvas.width!==c&&(this.frame.canvas.width=c,r=!0),this.frame.canvas.height!==d&&(this.frame.canvas.height=d,r=!0)}return r==!0&&(this.body.emitter.emit("resize",{width:t(this.frame.canvas.width/this.pixelRatio),height:t(this.frame.canvas.height/this.pixelRatio),oldWidth:t(s/this.pixelRatio),oldHeight:t(a/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,r}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var i=this.getContext();if(i===void 0)throw new Error("Could not get canvax context");var n=1;typeof window<"u"&&(n=window.devicePixelRatio||1);var r=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1;return n/r}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var i=this.getContext();if(i===void 0)throw new Error("Could not get canvax context");i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(i){return(i-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(i){return i*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(i){return(i-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(i){return i*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(i){return{x:this._XconvertCanvasToDOM(i.x),y:this._YconvertCanvasToDOM(i.y)}}},{key:"DOMtoCanvas",value:function(i){return{x:this._XconvertDOMtoCanvas(i.x),y:this._YconvertDOMtoCanvas(i.y)}}}]),e}(),vQ=function(){var t=Math.abs,e=Math.min;function i(n,r){var s=this;Qe(this,i),this.body=n,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){s.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}return Je(i,[{key:"setOptions",value:function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.options=n}},{key:"fit",value:function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{nodes:[]},r=1<arguments.length&&arguments[1]!==void 0&&arguments[1],s,a;if(n=Object.assign({},n),(n.nodes===void 0||n.nodes.length===0)&&(n.nodes=this.body.nodeIndices),r===!0){var o=0;for(var c in this.body.nodes)if(this.body.nodes.hasOwnProperty(c)){var d=this.body.nodes[c];d.predefinedPosition===!0&&(o+=1)}if(o>.5*this.body.nodeIndices.length)return void this.fit(n,!1);s=ga.getRange(this.body.nodes,n.nodes);var p=this.body.nodeIndices.length;a=12.662/(p+7.4147)+.0964822;var m=e(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600);a*=m}else{this.body.emitter.emit("_resizeNodes"),s=ga.getRange(this.body.nodes,n.nodes);var y=1.1*t(s.maxX-s.minX),_=1.1*t(s.maxY-s.minY),E=this.canvas.frame.canvas.clientWidth/y,C=this.canvas.frame.canvas.clientHeight/_;a=E<=C?E:C}(1<a||a===0)&&(a=1);var S=ga.findCenter(s),k={position:S,scale:a,animation:n.animation};this.moveTo(k)}},{key:"focus",value:function(n){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(this.body.nodes[n]!==void 0){var s={x:this.body.nodes[n].x,y:this.body.nodes[n].y};r.position=s,r.lockedOnNode=n,this.moveTo(r)}else console.log("Node: "+n+" cannot be found.")}},{key:"moveTo",value:function(n){if(n===void 0)return void(n={});if(n.scale=+n.scale,!(0<n.scale))throw new TypeError('The option "scale" has to be a number greater than zero.');n.offset===void 0&&(n.offset={x:0,y:0}),n.offset.x===void 0&&(n.offset.x=0),n.offset.y===void 0&&(n.offset.y=0),n.scale===void 0&&(n.scale=this.body.view.scale),n.position===void 0&&(n.position=this.getViewPosition()),n.animation===void 0&&(n.animation={duration:0}),n.animation===!1&&(n.animation={duration:0}),n.animation===!0&&(n.animation={}),n.animation.duration===void 0&&(n.animation.duration=1e3),n.animation.easingFunction===void 0&&(n.animation.easingFunction="easeInOutQuad"),this.animateView(n)}},{key:"animateView",value:function(n){if(n!==void 0){this.animationEasingFunction=n.animation.easingFunction,this.releaseNode(),n.locked===!0&&(this.lockedOnNodeId=n.lockedOnNode,this.lockedOnNodeOffset=n.offset),this.easingTime!=0&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=n.scale,this.body.view.scale=this.targetScale;var r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),s={x:r.x-n.position.x,y:r.y-n.position.y};this.targetTranslation={x:this.sourceTranslation.x+s.x*this.targetScale+n.offset.x,y:this.sourceTranslation.y+s.y*this.targetScale+n.offset.y},n.animation.duration===0?this.lockedOnNodeId==null?(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.animationSpeed=1/(.001*(60*n.animation.duration))||1/60,this.animationEasingFunction=n.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var n={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),s={x:r.x-n.x,y:r.y-n.y},a=this.body.view.translation,o={x:a.x+s.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:a.y+s.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=o}},{key:"releaseNode",value:function(){this.lockedOnNodeId!==void 0&&this.viewFunction!==void 0&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var n=0<arguments.length&&arguments[0]!==void 0&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=n===!0?1:this.easingTime;var r=we.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},1<=this.easingTime&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,this.lockedOnNodeId!=null&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),i}(),bQ=function(){function t(e,i){var n=this;Qe(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){n.keycharm!==void 0&&n.keycharm.destroy()}),this.options={}}return Je(t,[{key:"setOptions",value:function(e){e!==void 0&&(this.options=e,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(this.navigationHammers.length!=0){for(var e=0;e<this.navigationHammers.length;e++)this.navigationHammers[e].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var e=this;this.cleanNavigation(),this.navigationDOM={};var i=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],n=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var r=0;r<i.length;r++){this.navigationDOM[i[r]]=document.createElement("div"),this.navigationDOM[i[r]].className="vis-button vis-"+i[r],this.navigationDOM.wrapper.appendChild(this.navigationDOM[i[r]]);var s=new _d(this.navigationDOM[i[r]]);n[r]==="_fit"?ko.onTouch(s,this._fit.bind(this)):ko.onTouch(s,this.bindToRedraw.bind(this,n[r])),this.navigationHammers.push(s)}var a=new _d(this.canvas.frame);ko.onRelease(a,function(){e._stopMovement()}),this.navigationHammers.push(a),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(e){this.boundFunctions[e]===void 0&&(this.boundFunctions[e]=this[e].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(e){this.boundFunctions[e]!==void 0&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[e])}},{key:"_fit",value:function(){700<new Date().valueOf()-this.touchTime&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=new Date().valueOf())}},{key:"_stopMovement",value:function(){for(var e in this.boundFunctions)this.boundFunctions.hasOwnProperty(e)&&(this.body.emitter.off("initRedraw",this.boundFunctions[e]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var e=this.body.view.scale,i=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,r=i/e,s=(1-r)*this.canvas.canvasViewCenter.x+n.x*r,a=(1-r)*this.canvas.canvasViewCenter.y+n.y*r;this.body.view.scale=i,this.body.view.translation={x:s,y:a},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var e=this.body.view.scale,i=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,r=i/e,s=(1-r)*this.canvas.canvasViewCenter.x+n.x*r,a=(1-r)*this.canvas.canvasViewCenter.y+n.y*r;this.body.view.scale=i,this.body.view.translation={x:s,y:a},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var e=this;this.keycharm!==void 0&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.keycharm=this.options.keyboard.bindToWindow===!0?eS({container:window,preventDefault:!0}):eS({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0&&(this.keycharm.bind("up",function(){e.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){e.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){e.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){e.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){e.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){e.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){e.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){e.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){e.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){e.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){e.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){e.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){e.unbindFromRedraw("_zoomOut")},"keyup")))}}]),t}(),_Q=function(){function t(e,i){Qe(this,t),this.container=e,this.overflowMethod=i||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Je(t,[{key:"setPosition",value:function(e,i){this.x=parseInt(e),this.y=parseInt(i)}},{key:"setText",value:function(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=e}},{key:"show",value:function(e){if(e===void 0&&(e=!0),e===!0){var i=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth,a=0,o=0;if(this.overflowMethod=="flip"){var c=!1,d=!0;this.y-i<this.padding&&(d=!1),this.x+n>s-this.padding&&(c=!0),a=c?this.x-n:this.x,o=d?this.y-i:this.y}else o=this.y-i,o+i+this.padding>r&&(o=r-i-this.padding),o<this.padding&&(o=this.padding),a=this.x,a+n+this.padding>s&&(a=s-n-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),EQ=function(){function t(e,i,n){Qe(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.navigationHandler=new bQ(e,i),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},we.extend(this.options,this.defaultOptions),this.bindEventListeners()}return Je(t,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("destroy",function(){clearTimeout(e.popupTimer),delete e.body.functions.getPointer})}},{key:"setOptions",value:function(e){e!==void 0&&(we.selectiveNotDeepExtend(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,e),we.mergeOptions(this.options,e,"keyboard"),e.tooltip&&(we.extend(this.options.tooltip,e.tooltip),e.tooltip.color&&(this.options.tooltip.color=we.parseColor(e.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(e){return{x:e.x-we.getAbsoluteLeft(this.canvas.frame.canvas),y:e.y-we.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(e){50<new Date().valueOf()-this.touchTime&&(this.drag.pointer=this.getPointer(e.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=new Date().valueOf())}},{key:"onTap",value:function(e){var i=this.getPointer(e.center),n=this.selectionHandler.options.multiselect&&(e.changedPointers[0].ctrlKey||e.changedPointers[0].metaKey);this.checkSelectionChanges(i,e,n),this.selectionHandler._generateClickEvent("click",e,i)}},{key:"onDoubleTap",value:function(e){var i=this.getPointer(e.center);this.selectionHandler._generateClickEvent("doubleClick",e,i)}},{key:"onHold",value:function(e){var i=this.getPointer(e.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(i,e,n),this.selectionHandler._generateClickEvent("click",e,i),this.selectionHandler._generateClickEvent("hold",e,i)}},{key:"onRelease",value:function(e){if(10<new Date().valueOf()-this.touchTime){var i=this.getPointer(e.center);this.selectionHandler._generateClickEvent("release",e,i),this.touchTime=new Date().valueOf()}}},{key:"onContext",value:function(e){var i=this.getPointer({x:e.clientX,y:e.clientY});this.selectionHandler._generateClickEvent("oncontext",e,i)}},{key:"checkSelectionChanges",value:function(e,i){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],r=this.selectionHandler.getSelection(),s=!1;s=n===!0?this.selectionHandler.selectAdditionalOnPoint(e):this.selectionHandler.selectOnPoint(e);var a=this.selectionHandler.getSelection(),o=this._determineDifference(r,a),c=this._determineDifference(a,r);0<o.edges.length&&(this.selectionHandler._generateClickEvent("deselectEdge",i,e,r),s=!0),0<o.nodes.length&&(this.selectionHandler._generateClickEvent("deselectNode",i,e,r),s=!0),0<c.nodes.length&&(this.selectionHandler._generateClickEvent("selectNode",i,e),s=!0),0<c.edges.length&&(this.selectionHandler._generateClickEvent("selectEdge",i,e),s=!0),s===!0&&this.selectionHandler._generateClickEvent("select",i,e)}},{key:"_determineDifference",value:function(e,i){var n=function(r,s){for(var a=[],o=0,c;o<r.length;o++)c=r[o],s.indexOf(c)===-1&&a.push(c);return a};return{nodes:n(e.nodes,i.nodes),edges:n(e.edges,i.edges)}}},{key:"onDragStart",value:function(e){this.drag.pointer===void 0&&this.onTouch(e);var i=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=we.extend({},this.body.view.translation),this.drag.nodeId=void 0,i!==void 0&&this.options.dragNodes===!0){this.drag.nodeId=i.id,i.isSelected()===!1&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(i)),this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer);var n=this.selectionHandler.selectionObj.nodes;for(var r in n)if(n.hasOwnProperty(r)){var s=n[r],a={id:s.id,node:s,x:s.x,y:s.y,xFixed:s.options.fixed.x,yFixed:s.options.fixed.y};s.options.fixed.x=!0,s.options.fixed.y=!0,this.drag.selection.push(a)}}else this.selectionHandler._generateClickEvent("dragStart",e,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(e){var i=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var n=this.getPointer(e.center),r=this.drag.selection;if(r&&r.length&&this.options.dragNodes===!0){this.selectionHandler._generateClickEvent("dragging",e,n);var s=n.x-this.drag.pointer.x,a=n.y-this.drag.pointer.y;r.forEach(function(d){var p=d.node;d.xFixed===!1&&(p.x=i.canvas._XconvertDOMtoCanvas(i.canvas._XconvertCanvasToDOM(d.x)+s)),d.yFixed===!1&&(p.y=i.canvas._YconvertDOMtoCanvas(i.canvas._YconvertCanvasToDOM(d.y)+a))}),this.body.emitter.emit("startSimulation")}else if(this.options.dragView===!0){if(this.selectionHandler._generateClickEvent("dragging",e,n,void 0,!0),this.drag.pointer===void 0)return void this.onDragStart(e);var o=n.x-this.drag.pointer.x,c=n.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+o,y:this.drag.translation.y+c},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(e){this.drag.dragging=!1;var i=this.drag.selection;i&&i.length?(i.forEach(function(n){n.node.options.fixed.x=n.xFixed,n.node.options.fixed.y=n.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",e,this.getPointer(e.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(e){var i=this.getPointer(e.center);this.drag.pinched=!0,this.pinch.scale===void 0&&(this.pinch.scale=1);var n=this.pinch.scale*e.scale;this.zoom(n,i)}},{key:"zoom",value:function(e,i){if(this.options.zoomView===!0){var n=this.body.view.scale;1e-5>e&&(e=1e-5),10<e&&(e=10);var r;this.drag!==void 0&&this.drag.dragging===!0&&(r=this.canvas.DOMtoCanvas(this.drag.pointer));var s=this.body.view.translation,a=e/n,o=(1-a)*i.x+s.x*a,c=(1-a)*i.y+s.y*a;if(this.body.view.scale=e,this.body.view.translation={x:o,y:c},r!=null){var d=this.canvas.canvasToDOM(r);this.drag.pointer.x=d.x,this.drag.pointer.y=d.y}this.body.emitter.emit("_requestRedraw"),n<e?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:i}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:i})}}},{key:"onMouseWheel",value:function(e){if(this.options.zoomView===!0){var i=0;if(e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i!=0){var n=this.body.view.scale,r=i*(this.options.zoomSpeed/10);0>i&&(r/=1-r),n*=1+r;var s=this.getPointer({x:e.clientX,y:e.clientY});this.zoom(n,s)}e.preventDefault()}}},{key:"onMouseMove",value:function(e){var i=this,n=this.getPointer({x:e.clientX,y:e.clientY}),r=!1;this.popup!==void 0&&(this.popup.hidden===!1&&this._checkHidePopup(n),this.popup.hidden===!1&&(r=!0,this.popup.setPosition(n.x+3,n.y-5),this.popup.show())),this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),r===!1&&(this.popupTimer!==void 0&&(clearInterval(this.popupTimer),this.popupTimer=void 0),!this.drag.dragging&&(this.popupTimer=setTimeout(function(){return i._checkShowPopup(n)},this.options.tooltipDelay))),this.options.hover===!0&&this.selectionHandler.hoverObject(e,n)}},{key:"_checkShowPopup",value:function(e){var i=this.canvas._XconvertDOMtoCanvas(e.x),n=this.canvas._YconvertDOMtoCanvas(e.y),r={left:i,top:n,right:i,bottom:n},s=this.popupObj===void 0?void 0:this.popupObj.id,a=!1,o="node";if(this.popupObj===void 0){for(var c=this.body.nodeIndices,d=this.body.nodes,p=[],m=0,y;m<c.length;m++)y=d[c[m]],y.isOverlappingWith(r)===!0&&(a=!0,y.getTitle()!==void 0&&p.push(c[m]));0<p.length&&(this.popupObj=d[p[p.length-1]],a=!0)}if(this.popupObj===void 0&&a===!1){for(var _=this.body.edgeIndices,E=this.body.edges,C=[],S=0,k;S<_.length;S++)k=E[_[S]],k.isOverlappingWith(r)===!0&&k.connected===!0&&k.getTitle()!==void 0&&C.push(_[S]);0<C.length&&(this.popupObj=E[C[C.length-1]],o="edge")}this.popupObj===void 0?this.popup!==void 0&&(this.popup.hide(),this.body.emitter.emit("hidePopup")):this.popupObj.id!==s&&(this.popup===void 0&&(this.popup=new _Q(this.canvas.frame)),this.popup.popupTargetType=o,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(e.x+3,e.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id))}},{key:"_checkHidePopup",value:function(e){var i=this.selectionHandler._pointerToPositionObject(e),n=!1;if(this.popup.popupTargetType!=="node")this.selectionHandler.getNodeAt(e)===void 0&&this.body.edges[this.popup.popupTargetId]!==void 0&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(i));else if(this.body.nodes[this.popup.popupTargetId]!==void 0&&(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(i),n===!0)){var r=this.selectionHandler.getNodeAt(e);n=r!==void 0&&r.id===this.popup.popupTargetId}n===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}(),TQ=function(){function t(e,i){var n=this;Qe(this,t),this.body=e,this.canvas=i,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},we.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return Je(t,[{key:"setOptions",value:function(e){e!==void 0&&we.selectiveDeepExtend(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,e)}},{key:"selectOnPoint",value:function(e){var i=!1;if(this.options.selectable===!0){var n=this.getNodeAt(e)||this.getEdgeAt(e);this.unselectAll(),n!==void 0&&(i=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return i}},{key:"selectAdditionalOnPoint",value:function(e){var i=!1;if(this.options.selectable===!0){var n=this.getNodeAt(e)||this.getEdgeAt(e);n!==void 0&&(i=!0,n.isSelected()===!0?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return i}},{key:"_initBaseEvent",value:function(e,i){var n={pointer:{DOM:{x:i.x,y:i.y},canvas:this.canvas.DOMtoCanvas(i)},event:e};return n}},{key:"_generateClickEvent",value:function(e,i,n,r){var s=4<arguments.length&&arguments[4]!==void 0&&arguments[4],a=this._initBaseEvent(i,n);if(s===!0)a.nodes=[],a.edges=[];else{var o=this.getSelection();a.nodes=o.nodes,a.edges=o.edges}r!==void 0&&(a.previousSelection=r),e=="click"&&(a.items=this.getClickedItems(n)),i.controlEdge!==void 0&&(a.controlEdge=i.controlEdge),this.body.emitter.emit(e,a)}},{key:"selectObject",value:function(e){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:this.options.selectConnectedEdges;return e!==void 0&&(e instanceof ha&&i===!0&&this._selectConnectedEdges(e),e.select(),this._addToSelection(e),!0)}},{key:"deselectObject",value:function(e){e.isSelected()===!0&&(e.selected=!1,this._removeFromSelection(e))}},{key:"_getAllNodesOverlappingWith",value:function(e){for(var i=[],n=this.body.nodes,r=0,s;r<this.body.nodeIndices.length;r++)s=this.body.nodeIndices[r],n[s].isOverlappingWith(e)&&i.push(s);return i}},{key:"_pointerToPositionObject",value:function(e){var i=this.canvas.DOMtoCanvas(e);return{left:i.x-1,top:i.y+1,right:i.x+1,bottom:i.y-1}}},{key:"getNodeAt",value:function(e){var i=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],n=this._pointerToPositionObject(e),r=this._getAllNodesOverlappingWith(n);return 0<r.length?i===!0?this.body.nodes[r[r.length-1]]:r[r.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(e,i){for(var n=this.body.edges,r=0,s;r<this.body.edgeIndices.length;r++)s=this.body.edgeIndices[r],n[s].isOverlappingWith(e)&&i.push(s)}},{key:"_getAllEdgesOverlappingWith",value:function(e){var i=[];return this._getEdgesOverlappingWith(e,i),i}},{key:"getEdgeAt",value:function(e){for(var i=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],n=this.canvas.DOMtoCanvas(e),r=10,s=null,a=this.body.edges,o=0;o<this.body.edgeIndices.length;o++){var c=this.body.edgeIndices[o],d=a[c];if(d.connected){var p=d.from.x,m=d.from.y,y=d.to.x,_=d.to.y,E=d.edgeType.getDistanceToEdge(p,m,y,_,n.x,n.y);E<r&&(s=c,r=E)}}return s===null?void 0:i===!0?this.body.edges[s]:s}},{key:"_addToSelection",value:function(e){e instanceof ha?this.selectionObj.nodes[e.id]=e:this.selectionObj.edges[e.id]=e}},{key:"_addToHover",value:function(e){e instanceof ha?this.hoverObj.nodes[e.id]=e:this.hoverObj.edges[e.id]=e}},{key:"_removeFromSelection",value:function(e){e instanceof ha?(delete this.selectionObj.nodes[e.id],this._unselectConnectedEdges(e)):delete this.selectionObj.edges[e.id]}},{key:"unselectAll",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].unselect();for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&this.selectionObj.edges[i].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var e=0;for(var i in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(i)&&(e+=1);return e}},{key:"_getSelectedNode",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return this.selectionObj.nodes[e]}},{key:"_getSelectedEdge",value:function(){for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return this.selectionObj.edges[e]}},{key:"_getSelectedEdgeCount",value:function(){var e=0;for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(e+=1);return e}},{key:"_getSelectedObjectCount",value:function(){var e=0;for(var i in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(i)&&(e+=1);for(var n in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(n)&&(e+=1);return e}},{key:"_selectionIsEmpty",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e))return!1;for(var i in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(i))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var e in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(e)&&1<this.selectionObj.nodes[e].clusterSize)return!0;return!1}},{key:"_selectConnectedEdges",value:function(e){for(var i=0,n;i<e.edges.length;i++)n=e.edges[i],n.select(),this._addToSelection(n)}},{key:"_hoverConnectedEdges",value:function(e){for(var i=0,n;i<e.edges.length;i++)n=e.edges[i],n.hover=!0,this._addToHover(n)}},{key:"_unselectConnectedEdges",value:function(e){for(var i=0,n;i<e.edges.length;i++)n=e.edges[i],n.unselect(),this._removeFromSelection(n)}},{key:"emitBlurEvent",value:function(e,i,n){var r=this._initBaseEvent(e,i);n.hover===!0&&(n.hover=!1,n instanceof ha?(r.node=n.id,this.body.emitter.emit("blurNode",r)):(r.edge=n.id,this.body.emitter.emit("blurEdge",r)))}},{key:"emitHoverEvent",value:function(e,i,n){var r=this._initBaseEvent(e,i),s=!1;return n.hover===!1&&(n.hover=!0,this._addToHover(n),s=!0,n instanceof ha?(r.node=n.id,this.body.emitter.emit("hoverNode",r)):(r.edge=n.id,this.body.emitter.emit("hoverEdge",r))),s}},{key:"hoverObject",value:function(e,i){var n=this.getNodeAt(i);n===void 0&&(n=this.getEdgeAt(i));var r=!1;for(var s in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(s)&&(n===void 0||n instanceof ha&&n.id!=s||n instanceof sm)&&(this.emitBlurEvent(e,i,this.hoverObj.nodes[s]),delete this.hoverObj.nodes[s],r=!0);for(var a in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(a)&&(r===!0?(this.hoverObj.edges[a].hover=!1,delete this.hoverObj.edges[a]):(n===void 0||n instanceof sm&&n.id!=a||n instanceof ha&&!n.hover)&&(this.emitBlurEvent(e,i,this.hoverObj.edges[a]),delete this.hoverObj.edges[a],r=!0));if(n!==void 0){var o=Object.keys(this.hoverObj.edges).length,c=Object.keys(this.hoverObj.nodes).length,d=n instanceof sm&&o===0&&c===0,p=n instanceof ha&&o===0&&c===0;(r||d||p)&&(r=this.emitHoverEvent(e,i,n)),n instanceof ha&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(n)}r===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){var e=this.getSelectedNodes(),i=this.getSelectedEdges();return{nodes:e,edges:i}}},{key:"getSelectedNodes",value:function(){var e=[];if(this.options.selectable===!0)for(var i in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(i)&&e.push(this.selectionObj.nodes[i].id);return e}},{key:"getSelectedEdges",value:function(){var e=[];if(this.options.selectable===!0)for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&e.push(this.selectionObj.edges[i].id);return e}},{key:"setSelection",value:function(e){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n,r;if(!e||!e.nodes&&!e.edges)throw"Selection must be an object with nodes and/or edges properties";if((i.unselectAll||i.unselectAll===void 0)&&this.unselectAll(),e.nodes)for(n=0;n<e.nodes.length;n++){r=e.nodes[n];var s=this.body.nodes[r];if(!s)throw new RangeError('Node with id "'+r+'" not found');this.selectObject(s,i.highlightEdges)}if(e.edges)for(n=0;n<e.edges.length;n++){r=e.edges[n];var a=this.body.edges[r];if(!a)throw new RangeError('Edge with id "'+r+'" not found');this.selectObject(a)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(e){var i=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({nodes:e},{highlightEdges:i})}},{key:"selectEdges",value:function(e){if(!e||e.length===void 0)throw"Selection must be an array with ids";this.setSelection({edges:e})}},{key:"updateSelection",value:function(){for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(this.body.nodes.hasOwnProperty(e)||delete this.selectionObj.nodes[e]);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(this.body.edges.hasOwnProperty(i)||delete this.selectionObj.edges[i])}},{key:"getClickedItems",value:function(e){for(var i=this.canvas.DOMtoCanvas(e),n=[],r=this.body.nodeIndices,s=this.body.nodes,a=r.length-1;0<=a;a--){var o=s[r[a]],c=o.getItemsOnPoint(i);n.push.apply(n,c)}for(var d=this.body.edgeIndices,p=this.body.edges,m=d.length-1;0<=m;m--){var y=p[d[m]],_=y.getItemsOnPoint(i);n.push.apply(n,_)}return n}}]),t}(),KL=yl(function(t,e){(function(i,n){n(e)})(oA,function(i){function n(S,k){if(!(S instanceof k))throw new TypeError("Cannot call a class as a function")}function r(S){return 1e5>S?100>S?10>S?0:1:1e4>S?1e3>S?2:3:4:1e7>S?1e6>S?5:6:1e9>S?1e8>S?7:8:9}function s(S,k){if(S===k)return 0;if(~~S===S&&~~k===k){if(S===0||k===0)return S<k?-1:1;if(0>S||0>k){if(0<=k)return-1;if(0<=S)return 1;S=-S,k=-k}var R=r(S),O=r(k),I=0;return R<O?(S*=E[O-R-1],k/=10,I=-1):R>O&&(k*=E[R-O-1],S/=10,I=1),S===k?I:S<k?-1:1}var F=S+"",P=k+"";return F===P?0:F<P?-1:1}function a(S){for(var k=0;S>=32;)k|=1&S,S>>=1;return S+k}function o(S,k,R,O){var I=k+1;if(I===R)return 1;if(0>O(S[I++],S[k])){for(;I<R&&0>O(S[I],S[I-1]);)I++;c(S,k,I)}else for(;I<R&&0<=O(S[I],S[I-1]);)I++;return I-k}function c(S,k,R){for(R--;k<R;){var O=S[k];S[k++]=S[R],S[R--]=O}}function d(S,k,R,O,I){for(O===k&&O++;O<R;O++){for(var F=S[O],P=k,x=O;P<x;){var M=P+x>>>1;0>I(F,S[M])?x=M:P=M+1}var q=O-P;switch(q){case 3:S[P+3]=S[P+2];case 2:S[P+2]=S[P+1];case 1:S[P+1]=S[P];break;default:for(;0<q;)S[P+q]=S[P+q-1],q--}S[P]=F}}function p(S,k,R,O,I,F){var P=0,x=0,M=1;if(0<F(S,k[R+I])){for(x=O-I;M<x&&0<F(S,k[R+I+M]);)P=M,M=(M<<1)+1,0>=M&&(M=x);M>x&&(M=x),P+=I,M+=I}else{for(x=I+1;M<x&&0>=F(S,k[R+I-M]);)P=M,M=(M<<1)+1,0>=M&&(M=x);M>x&&(M=x);var q=P;P=I-M,M=I-q}for(P++;P<M;){var $=P+(M-P>>>1);0<F(S,k[R+$])?P=$+1:M=$}return M}function m(S,k,R,O,I,F){var P=0,x=0,M=1;if(0>F(S,k[R+I])){for(x=I+1;M<x&&0>F(S,k[R+I-M]);)P=M,M=(M<<1)+1,0>=M&&(M=x);M>x&&(M=x);var q=P;P=I-M,M=I-q}else{for(x=O-I;M<x&&0<=F(S,k[R+I+M]);)P=M,M=(M<<1)+1,0>=M&&(M=x);M>x&&(M=x),P+=I,M+=I}for(P++;P<M;){var $=P+(M-P>>>1);0>F(S,k[R+$])?M=$:P=$+1}return M}i.__esModule=!0,i.sort=function(S,k,R,O){if(!Array.isArray(S))throw new TypeError("Can only sort arrays");k?typeof k!="function"&&(O=R,R=k,k=s):k=s,R||(R=0),O||(O=S.length);var I=O-R;if(!(2>I)){var F=0;if(32>I)return F=o(S,R,O,k),void d(S,R,O,R+F,k);var P=new C(S,k),x=a(I);do{if(F=o(S,R,O,k),F<x){var M=I;M>x&&(M=x),d(S,R,R+M,R+F,k),F=M}P.pushRun(R,F),P.mergeRuns(),I-=F,R+=F}while(I!==0);P.forceMergeRuns()}};var y=7,_=256,E=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],C=function(){function S(k,R){n(this,S),this.array=null,this.compare=null,this.minGallop=y,this.length=0,this.tmpStorageLength=_,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=k,this.compare=R,this.length=k.length,this.length<2*_&&(this.tmpStorageLength=this.length>>>1),this.tmp=Array(this.tmpStorageLength),this.stackLength=120>this.length?5:1542>this.length?10:119151>this.length?19:40,this.runStart=Array(this.stackLength),this.runLength=Array(this.stackLength)}return S.prototype.pushRun=function(k,R){this.runStart[this.stackSize]=k,this.runLength[this.stackSize]=R,this.stackSize+=1},S.prototype.mergeRuns=function(){for(;1<this.stackSize;){var k=this.stackSize-2;if(1<=k&&this.runLength[k-1]<=this.runLength[k]+this.runLength[k+1]||2<=k&&this.runLength[k-2]<=this.runLength[k]+this.runLength[k-1])this.runLength[k-1]<this.runLength[k+1]&&k--;else if(this.runLength[k]>this.runLength[k+1])break;this.mergeAt(k)}},S.prototype.forceMergeRuns=function(){for(;1<this.stackSize;){var k=this.stackSize-2;0<k&&this.runLength[k-1]<this.runLength[k+1]&&k--,this.mergeAt(k)}},S.prototype.mergeAt=function(k){var R=this.compare,O=this.array,I=this.runStart[k],F=this.runLength[k],P=this.runStart[k+1],x=this.runLength[k+1];this.runLength[k]=F+x,k===this.stackSize-3&&(this.runStart[k+1]=this.runStart[k+2],this.runLength[k+1]=this.runLength[k+2]),this.stackSize--;var M=m(O[P],O,I,F,0,R);I+=M,F-=M,F!==0&&(x=p(O[I+F-1],O,P,x,x-1,R),x===0||(F<=x?this.mergeLow(I,F,P,x):this.mergeHigh(I,F,P,x)))},S.prototype.mergeLow=function(k,R,O,I){var F=this.compare,P=this.array,x=this.tmp,M=0;for(M=0;M<R;M++)x[M]=P[k+M];var q=0,$=O,B=k;if(P[B++]=P[$++],--I==0){for(M=0;M<R;M++)P[B+M]=x[q+M];return}if(R===1){for(M=0;M<I;M++)P[B+M]=P[$+M];return void(P[B+I]=x[q])}for(var j=this.minGallop;;){var z=0,X=0,se=!1;do if(0>F(P[$],x[q])){if(P[B++]=P[$++],X++,z=0,--I==0){se=!0;break}}else if(P[B++]=x[q++],z++,X=0,--R==1){se=!0;break}while((z|X)<j);if(se)break;do{if(z=m(P[$],x,q,R,0,F),z!==0){for(M=0;M<z;M++)P[B+M]=x[q+M];if(B+=z,q+=z,R-=z,1>=R){se=!0;break}}if(P[B++]=P[$++],--I==0){se=!0;break}if(X=p(x[q],P,$,I,0,F),X!==0){for(M=0;M<X;M++)P[B+M]=P[$+M];if(B+=X,$+=X,I-=X,I===0){se=!0;break}}if(P[B++]=x[q++],--R==1){se=!0;break}j--}while(z>=y||X>=y);if(se)break;0>j&&(j=0),j+=2}if(this.minGallop=j,1>j&&(this.minGallop=1),R===1){for(M=0;M<I;M++)P[B+M]=P[$+M];P[B+I]=x[q]}else{if(R===0)throw new Error("mergeLow preconditions were not respected");for(M=0;M<R;M++)P[B+M]=x[q+M]}},S.prototype.mergeHigh=function(k,R,O,I){var F=this.compare,P=this.array,x=this.tmp,M=0;for(M=0;M<I;M++)x[M]=P[O+M];var q=k+R-1,$=I-1,B=O+I-1,j=0,z=0;if(P[B--]=P[q--],--R==0){for(j=B-(I-1),M=0;M<I;M++)P[j+M]=x[M];return}if(I===1){for(B-=R,q-=R,z=B+1,j=q+1,M=R-1;0<=M;M--)P[z+M]=P[j+M];return void(P[B]=x[$])}for(var X=this.minGallop;;){var se=0,ue=0,ve=!1;do if(0>F(x[$],P[q])){if(P[B--]=P[q--],se++,ue=0,--R==0){ve=!0;break}}else if(P[B--]=x[$--],ue++,se=0,--I==1){ve=!0;break}while((se|ue)<X);if(ve)break;do{if(se=R-m(x[$],P,k,R,R-1,F),se!=0){for(B-=se,q-=se,R-=se,z=B+1,j=q+1,M=se-1;0<=M;M--)P[z+M]=P[j+M];if(R===0){ve=!0;break}}if(P[B--]=x[$--],--I==1){ve=!0;break}if(ue=I-p(P[q],x,0,I,I-1,F),ue!==0){for(B-=ue,$-=ue,I-=ue,z=B+1,j=$+1,M=0;M<ue;M++)P[z+M]=x[j+M];if(1>=I){ve=!0;break}}if(P[B--]=P[q--],--R==0){ve=!0;break}X--}while(se>=y||ue>=y);if(ve)break;0>X&&(X=0),X+=2}if(this.minGallop=X,1>X&&(this.minGallop=1),I===1){for(B-=R,q-=R,z=B+1,j=q+1,M=R-1;0<=M;M--)P[z+M]=P[j+M];P[B]=x[$]}else{if(I===0)throw new Error("mergeHigh preconditions were not respected");for(j=B-(I-1),M=0;M<I;M++)P[j+M]=x[M]}},S}()})});rK(KL);var yA=KL,ZL=function(){function t(){Qe(this,t)}return Je(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(e){return this.fake_use(e),this.abstract()}},{key:"setPosition",value:function(e,i){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:void 0;this.fake_use(e,i,n),this.abstract()}},{key:"getTreeSize",value:function(e){return this.fake_use(e),this.abstract()}},{key:"sort",value:function(e){this.fake_use(e),this.abstract()}},{key:"fix",value:function(e,i){this.fake_use(e,i),this.abstract()}},{key:"shift",value:function(e,i){this.fake_use(e,i),this.abstract()}}]),t}(),wQ=function(t){function e(i){var n;return Qe(this,e),n=Bi(this,Fi(e).call(this)),n.layout=i,n}return $i(e,t),Je(e,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(i){return i.x}},{key:"setPosition",value:function(i,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:void 0;r!==void 0&&this.layout.hierarchical.addToOrdering(i,r),i.x=n}},{key:"getTreeSize",value:function(i){var n=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:n.min_x,max:n.max_x}}},{key:"sort",value:function(i){yA.sort(i,function(n,r){return n.x-r.x})}},{key:"fix",value:function(i,n){i.y=this.layout.options.hierarchical.levelSeparation*n,i.options.fixed.y=!0}},{key:"shift",value:function(i,n){this.layout.body.nodes[i].x+=n}}]),e}(ZL),CQ=function(t){function e(i){var n;return Qe(this,e),n=Bi(this,Fi(e).call(this)),n.layout=i,n}return $i(e,t),Je(e,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(i){return i.y}},{key:"setPosition",value:function(i,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:void 0;r!==void 0&&this.layout.hierarchical.addToOrdering(i,r),i.y=n}},{key:"getTreeSize",value:function(i){var n=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,i);return{min:n.min_y,max:n.max_y}}},{key:"sort",value:function(i){yA.sort(i,function(n,r){return n.y-r.y})}},{key:"fix",value:function(i,n){i.x=this.layout.options.hierarchical.levelSeparation*n,i.options.fixed.x=!0}},{key:"shift",value:function(i,n){this.layout.body.nodes[i].y+=n}}]),e}(ZL),SQ=function(){var t=Math.max,e=Math.min;function i(){Qe(this,i),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return Je(i,[{key:"addRelation",value:function(n,r){this.childrenReference[n]===void 0&&(this.childrenReference[n]=[]),this.childrenReference[n].push(r),this.parentReference[r]===void 0&&(this.parentReference[r]=[]),this.parentReference[r].push(n)}},{key:"checkIfTree",value:function(){for(var n in this.parentReference)if(1<this.parentReference[n].length)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(n,r){r===void 0||this.trees[n.id]===void 0&&(this.trees[n.id]=r,this.treeIndex=t(r,this.treeIndex))}},{key:"ensureLevel",value:function(n){this.levels[n]===void 0&&(this.levels[n]=0)}},{key:"getMaxLevel",value:function(n){var r=this,s={},a=function o(c){if(s[c]!==void 0)return s[c];var d=r.levels[c];if(r.childrenReference[c]){var p=r.childrenReference[c];if(0<p.length)for(var m=0;m<p.length;m++)d=t(d,o(p[m]))}return s[c]=d,d};return a(n)}},{key:"levelDownstream",value:function(n,r){this.levels[r.id]===void 0&&(this.levels[n.id]===void 0&&(this.levels[n.id]=0),this.levels[r.id]=this.levels[n.id]+1)}},{key:"setMinLevelToZero",value:function(n){var r=1e9;for(var s in n)n.hasOwnProperty(s)&&this.levels[s]!==void 0&&(r=e(this.levels[s],r));for(var a in n)n.hasOwnProperty(a)&&this.levels[a]!==void 0&&(this.levels[a]-=r)}},{key:"getTreeSize",value:function(n,r){var s=1e9,a=-1e9,o=1e9,c=-1e9;for(var d in this.trees)if(this.trees.hasOwnProperty(d)&&this.trees[d]===r){var p=n[d];s=e(p.x,s),a=t(p.x,a),o=e(p.y,o),c=t(p.y,c)}return{min_x:s,max_x:a,min_y:o,max_y:c}}},{key:"hasSameParent",value:function(n,r){var s=this.parentReference[n.id],a=this.parentReference[r.id];if(s===void 0||a===void 0)return!1;for(var o=0;o<s.length;o++)for(var c=0;c<a.length;c++)if(s[o]==a[c])return!0;return!1}},{key:"inSameSubNetwork",value:function(n,r){return this.trees[n.id]===this.trees[r.id]}},{key:"getLevels",value:function(){return Object.keys(this.distributionOrdering)}},{key:"addToOrdering",value:function(n,r){this.distributionOrdering[r]===void 0&&(this.distributionOrdering[r]=[]);var s=!1,a=this.distributionOrdering[r];for(var o in a)if(a[o]===n){s=!0;break}s||(this.distributionOrdering[r].push(n),this.distributionIndex[n.id]=this.distributionOrdering[r].length-1)}}]),i}(),kQ=function(){var t=Math.cos,e=Math.sin,i=Math.sqrt,n=Math.PI,r=Math.round,s=Math.pow,a=Math.max,o=Math.abs,c=Math.min,d=Math.floor;function p(m){Qe(this,p),this.body=m,this.initialRandomSeed=r(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},we.extend(this.options,this.defaultOptions),this.bindEventListeners()}return Je(p,[{key:"bindEventListeners",value:function(){var m=this;this.body.emitter.on("_dataChanged",function(){m.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){m.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){m.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(m.options.hierarchical.enabled===!0){var y=m.direction.curveType();m.body.emitter.emit("_forceDisableDynamicCurves",y,!1)}})}},{key:"setOptions",value:function(m,y){if(m!==void 0){var _=this.options.hierarchical,E=_.enabled;if(we.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,m),we.mergeOptions(this.options,m,"hierarchical"),m.randomSeed!==void 0&&(this.initialRandomSeed=m.randomSeed),_.enabled===!0)return E===!0&&this.body.emitter.emit("refresh",!0),_.direction==="RL"||_.direction==="DU"?0<_.levelSeparation&&(_.levelSeparation*=-1):0>_.levelSeparation&&(_.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(y);if(E===!0)return this.body.emitter.emit("refresh"),we.deepExtend(y,this.optionsBackup)}return y}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(m){if(this.options.hierarchical.enabled===!0){var y=this.optionsBackup.physics;m.physics===void 0||m.physics===!0?(m.physics={enabled:y.enabled===void 0||y.enabled,solver:"hierarchicalRepulsion"},y.enabled=y.enabled===void 0||y.enabled,y.solver=y.solver||"barnesHut"):zs(m.physics)==="object"?(y.enabled=m.physics.enabled===void 0||m.physics.enabled,y.solver=m.physics.solver||"barnesHut",m.physics.solver="hierarchicalRepulsion"):m.physics!==!1&&(y.solver="barnesHut",m.physics={solver:"hierarchicalRepulsion"});var _=this.direction.curveType();if(m.edges===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},m.edges={smooth:!1};else if(m.edges.smooth===void 0)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},m.edges.smooth=!1;else if(typeof m.edges.smooth=="boolean")this.optionsBackup.edges={smooth:m.edges.smooth},m.edges.smooth={enabled:m.edges.smooth,type:_};else{var E=m.edges.smooth;E.type!==void 0&&E.type!=="dynamic"&&(_=E.type),this.optionsBackup.edges={smooth:E.enabled===void 0||E.enabled,type:E.type===void 0?"dynamic":E.type,roundness:E.roundness===void 0?.5:E.roundness,forceDirection:E.forceDirection!==void 0&&E.forceDirection},m.edges.smooth={enabled:E.enabled===void 0||E.enabled,type:_,roundness:E.roundness===void 0?.5:E.roundness,forceDirection:E.forceDirection!==void 0&&E.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",_)}return m}},{key:"seededRandom",value:function(){var m=1e4*e(this.randomSeed++);return m-d(m)}},{key:"positionInitially",value:function(m){if(this.options.hierarchical.enabled!==!0){this.randomSeed=this.initialRandomSeed;for(var y=m.length+50,_=0;_<m.length;_++){var E=m[_],C=2*n*this.seededRandom();E.x===void 0&&(E.x=y*t(C)),E.y===void 0&&(E.y=y*e(C))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var m=this.body.nodeIndices,y=0,_=0,E;_<m.length;_++)E=this.body.nodes[m[_]],E.predefinedPosition===!0&&(y+=1);if(y<.5*m.length){var C=0,S=150,k={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(m.length>S){for(var R=m.length;m.length>S&&10>=C;){C+=1;var O=m.length;C%3==0?this.body.modules.clustering.clusterBridges(k):this.body.modules.clustering.clusterOutliers(k);var I=m.length;if(O==I&&C%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:a(150,2*R)})}10<C&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(m,this.body.edgeIndices,!0),this._shiftToCenter();for(var F=70,P=0,x;P<m.length;P++)x=this.body.nodes[m[P]],x.predefinedPosition===!1&&(x.x+=(.5-this.seededRandom())*F,x.y+=(.5-this.seededRandom())*F);this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var m=ga.getRangeCore(this.body.nodes,this.body.nodeIndices),y=ga.findCenter(m),_=0,E;_<this.body.nodeIndices.length;_++)E=this.body.nodes[this.body.nodeIndices[_]],E.x-=y.x,E.y-=y.y}},{key:"_declusterAll",value:function(){for(var m=!0;m===!0;){m=!1;for(var y=0;y<this.body.nodeIndices.length;y++)this.body.nodes[this.body.nodeIndices[y]].isCluster===!0&&(m=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[y],{},!1));m===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&0<this.body.nodeIndices.length){var m=!1,y=!1,_,E;for(E in this.lastNodeOnLevel={},this.hierarchical=new SQ,this.body.nodes)this.body.nodes.hasOwnProperty(E)&&(_=this.body.nodes[E],_.options.level===void 0?y=!0:(m=!0,this.hierarchical.levels[E]=_.options.level));if(y===!0&&m===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(y===!0){var C=this.options.hierarchical.sortMethod;C==="hubsize"?this._determineLevelsByHubsize():C==="directed"?this._determineLevelsDirected():C==="custom"&&this._determineLevelsCustomCallback()}for(var S in this.body.nodes)this.body.nodes.hasOwnProperty(S)&&this.hierarchical.ensureLevel(S);var k=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(k),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var m=this,y=!1,_={},E=function(){for(var $=S(),B=0,j=0,z;j<$.length-1;j++)z=$[j].max-$[j+1].min,B+=z+m.options.hierarchical.treeSpacing,C(j+1,B)},C=function($,B){var j=m.hierarchical.trees;for(var z in j)j.hasOwnProperty(z)&&j[z]===$&&m.direction.shift(z,B)},S=function(){for(var $=[],B=0;B<m.hierarchical.numTrees();B++)$.push(m.direction.getTreeSize(B));return $},k=function $(B,j){if(!j[B.id]&&(j[B.id]=!0,m.hierarchical.childrenReference[B.id])){var z=m.hierarchical.childrenReference[B.id];if(0<z.length)for(var X=0;X<z.length;X++)$(m.body.nodes[z[X]],j)}},R=function($){var B=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1e9,j=1e9,z=1e9,X=1e9,se=-1e9;for(var ue in $)if($.hasOwnProperty(ue)){var ve=m.body.nodes[ue],_e=m.hierarchical.levels[ve.id],de=m.direction.getPosition(ve),oe=m._getSpaceAroundNode(ve,$),Q=Tr(oe,2),Z=Q[0],W=Q[1];j=c(Z,j),z=c(W,z),_e<=B&&(X=c(de,X),se=a(de,se))}return[X,se,j,z]},O=function($,B){var j=m.hierarchical.getMaxLevel($.id),z=m.hierarchical.getMaxLevel(B.id);return c(j,z)},I=function($,B,j){for(var z=m.hierarchical,X=0;X<B.length;X++){var se=B[X],ue=z.distributionOrdering[se];if(1<ue.length)for(var ve=0;ve<ue.length-1;ve++){var _e=ue[ve],de=ue[ve+1];z.hasSameParent(_e,de)&&z.inSameSubNetwork(_e,de)&&$(_e,de,j)}}},F=function($,B){var j=2<arguments.length&&arguments[2]!==void 0&&arguments[2],z=m.direction.getPosition($),X=m.direction.getPosition(B),se=o(X-z),ue=m.options.hierarchical.nodeSpacing;if(se>ue){var ve={},_e={};k($,ve),k(B,_e);var de=O($,B),oe=R(ve,de),Q=R(_e,de),Z=oe[1],W=Q[0],ne=Q[2],ce=o(Z-W);if(ce>ue){var J=Z-W+ue;J<-ne+ue&&(J=-ne+ue),0>J&&(m._shiftBlock(B.id,J),y=!0,j===!0&&m._centerParent(B))}}},P=function($,B){for(var j=B.id,z=B.edges,X=m.hierarchical.levels[B.id],se=m.options.hierarchical.levelSeparation*m.options.hierarchical.levelSeparation,ue={},ve=[],_e=0,de;_e<z.length;_e++)if(de=z[_e],de.toId!=de.fromId){var oe=de.toId==j?de.from:de.to;ue[z[_e].id]=oe,m.hierarchical.levels[oe.id]<X&&ve.push(de)}var Q=function(pe,he){for(var fe=0,be=0;be<he.length;be++)if(ue[he[be].id]!==void 0){var re=m.direction.getPosition(ue[he[be].id])-pe;fe+=re/i(re*re+se)}return fe},Z=function(pe,he){for(var fe=0,be=0;be<he.length;be++)if(ue[he[be].id]!==void 0){var re=m.direction.getPosition(ue[he[be].id])-pe;fe-=se*s(re*re+se,-1.5)}return fe},W=function(pe,he){for(var fe=m.direction.getPosition(B),be={},re=0;re<pe;re++){var Ft=Q(fe,he),Dt=Z(fe,he),ft=40,Ae=a(-ft,c(ft,r(Ft/Dt)));if(fe-=Ae,be[fe]!==void 0)break;be[fe]=re}return fe},ne=function(pe){var he=m.direction.getPosition(B);if(_[B.id]===void 0){var fe={};k(B,fe),_[B.id]=fe}var be=R(_[B.id]),re=be[2],Ft=be[3],Dt=pe-he,ft=0;0<Dt?ft=c(Dt,Ft-m.options.hierarchical.nodeSpacing):0>Dt&&(ft=-c(-Dt,re-m.options.hierarchical.nodeSpacing)),ft!=0&&(m._shiftBlock(B.id,ft),y=!0)},ce=function(pe){var he=m.direction.getPosition(B),fe=m._getSpaceAroundNode(B),be=Tr(fe,2),re=be[0],Ft=be[1],Dt=pe-he,ft=he;0<Dt?ft=c(he+(Ft-m.options.hierarchical.nodeSpacing),pe):0>Dt&&(ft=a(he-(re-m.options.hierarchical.nodeSpacing),pe)),ft!==he&&(m.direction.setPosition(B,ft),y=!0)},J=W($,ve);ne(J),J=W($,z),ce(J)},x=function($){var B=m.hierarchical.getLevels();B=B.reverse();for(var j=0;j<$;j++){y=!1;for(var z=0;z<B.length;z++)for(var X=B[z],se=m.hierarchical.distributionOrdering[X],ue=0;ue<se.length;ue++)P(1e3,se[ue]);if(y!==!0)break}},M=function($){var B=m.hierarchical.getLevels();B=B.reverse();for(var j=0;j<$&&(y=!1,I(F,B,!0),y===!0);j++);},q=function(){var $=m.hierarchical.getLevels();$=$.reverse();for(var B=0;B<$.length;B++)for(var j=$[B],z=m.hierarchical.distributionOrdering[j],X=0;X<z.length;X++)m._centerParent(z[X])};this.options.hierarchical.blockShifting===!0&&(M(5),function(){for(var $ in m.body.nodes)m.body.nodes.hasOwnProperty($)&&m._centerParent(m.body.nodes[$])}()),this.options.hierarchical.edgeMinimization===!0&&x(20),this.options.hierarchical.parentCentralization===!0&&q(),E()}},{key:"_getSpaceAroundNode",value:function(m,y){var _=!0;y===void 0&&(_=!1);var E=this.hierarchical.levels[m.id];if(E!==void 0){var C=this.hierarchical.distributionIndex[m.id],S=this.direction.getPosition(m),k=this.hierarchical.distributionOrdering[E],R=1e9,O=1e9;if(C!==0){var I=k[C-1];if(_==!0&&y[I.id]===void 0||_==!1){var F=this.direction.getPosition(I);R=S-F}}if(C!=k.length-1){var P=k[C+1];if(_==!0&&y[P.id]===void 0||_==!1){var x=this.direction.getPosition(P);O=c(O,x-S)}}return[R,O]}return[0,0]}},{key:"_centerParent",value:function(m){if(this.hierarchical.parentReference[m.id])for(var y=this.hierarchical.parentReference[m.id],_=0;_<y.length;_++){var E=y[_],C=this.body.nodes[E],S=this.hierarchical.childrenReference[E];if(S!==void 0){var k=this._getCenterPosition(S),R=this.direction.getPosition(C),O=this._getSpaceAroundNode(C),I=Tr(O,2),F=I[0],P=I[1],x=R-k;(0>x&&o(x)<P-this.options.hierarchical.nodeSpacing||0<x&&o(x)<F-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(C,k)}}}},{key:"_placeNodesByHierarchy",value:function(m){for(var y in this.positionedNodes={},m)if(m.hasOwnProperty(y)){var _=Object.keys(m[y]);_=this._indexArrayToNodes(_),this.direction.sort(_);for(var E=0,C=0,S;C<_.length;C++)if(S=_[C],this.positionedNodes[S.id]===void 0){var k=this.options.hierarchical.nodeSpacing,R=k*E;0<E&&(R=this.direction.getPosition(_[C-1])+k),this.direction.setPosition(S,R,y),this._validatePositionAndContinue(S,y,R),E++}}}},{key:"_placeBranchNodes",value:function(m,y){var _=this.hierarchical.childrenReference[m];if(_!==void 0){for(var E=[],C=0;C<_.length;C++)E.push(this.body.nodes[_[C]]);this.direction.sort(E);for(var S=0;S<E.length;S++){var k=E[S],R=this.hierarchical.levels[k.id];if(R>y&&this.positionedNodes[k.id]===void 0){var O=this.options.hierarchical.nodeSpacing,I=void 0;I=S==0?this.direction.getPosition(this.body.nodes[m]):this.direction.getPosition(E[S-1])+O,this.direction.setPosition(k,I,R),this._validatePositionAndContinue(k,R,I)}else return}var F=this._getCenterPosition(E);this.direction.setPosition(this.body.nodes[m],F,y)}}},{key:"_validatePositionAndContinue",value:function(m,y,_){if(this.hierarchical.isTree){if(this.lastNodeOnLevel[y]!==void 0){var E=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[y]]);if(_-E<this.options.hierarchical.nodeSpacing){var C=E+this.options.hierarchical.nodeSpacing-_,S=this._findCommonParent(this.lastNodeOnLevel[y],m.id);this._shiftBlock(S.withChild,C)}}this.lastNodeOnLevel[y]=m.id,this.positionedNodes[m.id]=!0,this._placeBranchNodes(m.id,y)}}},{key:"_indexArrayToNodes",value:function(m){for(var y=[],_=0;_<m.length;_++)y.push(this.body.nodes[m[_]]);return y}},{key:"_getDistribution",value:function(){var m={},y,_;for(y in this.body.nodes)if(this.body.nodes.hasOwnProperty(y)){_=this.body.nodes[y];var E=this.hierarchical.levels[y]===void 0?0:this.hierarchical.levels[y];this.direction.fix(_,E),m[E]===void 0&&(m[E]={}),m[E][y]=_}return m}},{key:"_getActiveEdges",value:function(m){var y=this,_=[];return we.forEach(m.edges,function(E){y.body.edgeIndices.indexOf(E.id)!==-1&&_.push(E)}),_}},{key:"_getHubSizes",value:function(){var m=this,y={},_=this.body.nodeIndices;we.forEach(_,function(C){var S=m.body.nodes[C],k=m._getActiveEdges(S).length;y[k]=!0});var E=[];return we.forEach(y,function(C){E.push(+C)}),yA.sort(E,function(C,S){return S-C}),E}},{key:"_determineLevelsByHubsize",value:function(){for(var m=this,y=function(k,R){m.hierarchical.levelDownstream(k,R)},_=this._getHubSizes(),E=function(k){var R=_[k];return R===0?"break":void we.forEach(m.body.nodeIndices,function(O){var I=m.body.nodes[O];R===m._getActiveEdges(I).length&&m._crawlNetwork(y,O)})},C=0,S;C<_.length&&(S=E(C),S!=="break");++C);}},{key:"_determineLevelsCustomCallback",value:function(){var m=this,y=function(){};this._crawlNetwork(function(_,E,C){var S=m.hierarchical.levels[_.id];S===void 0&&(S=m.hierarchical.levels[_.id]=1e5);var k=y(ga.cloneOptions(_,"node"),ga.cloneOptions(E,"node"),ga.cloneOptions(C,"edge"));m.hierarchical.levels[E.id]=S+k}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var m=this,y=function(_){return we.forEach(m.body.edges,function(E){if(E.toId===_.fromId&&E.fromId===_.toId)return!0}),!1};this._crawlNetwork(function(_,E,C){var S=m.hierarchical.levels[_.id];m.hierarchical.levels[E.id],y(C),S===void 0&&(S=m.hierarchical.levels[_.id]=1e4),m.hierarchical.levels[E.id]=C.toId==E.id?S+1:S-1}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var m=this;this._crawlNetwork(function(y,_){m.hierarchical.levels[_.id]>m.hierarchical.levels[y.id]&&m.hierarchical.addRelation(y.id,_.id)}),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var m=this,y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){},_=1<arguments.length?arguments[1]:void 0,E={},C=function F(P,x){if(E[P.id]===void 0){m.hierarchical.setTreeIndex(P,x),E[P.id]=!0;for(var M=m._getActiveEdges(P),q=0,$,B;q<M.length;q++)B=M[q],B.connected===!0&&($=B.toId==P.id?B.from:B.to,P.id!=$.id&&(y(P,$,B),F($,x)))}};if(_===void 0){for(var S=0,k=0,R;k<this.body.nodeIndices.length;k++)if(R=this.body.nodeIndices[k],E[R]===void 0){var O=this.body.nodes[R];C(O,S),S+=1}}else{var I=this.body.nodes[_];if(I===void 0)return void console.error("Node not found:",_);C(I)}}},{key:"_shiftBlock",value:function(m,y){var _=this,E={},C=function S(k){if(!E[k]){E[k]=!0,_.direction.shift(k,y);var R=_.hierarchical.childrenReference[k];if(R!==void 0)for(var O=0;O<R.length;O++)S(R[O])}};C(m)}},{key:"_findCommonParent",value:function(m,y){var _=this,E={},C=function k(R,O){var I=_.hierarchical.parentReference[O];if(I!==void 0)for(var F=0,P;F<I.length;F++)P=I[F],R[P]=!0,k(R,P)},S=function k(R,O){var I=_.hierarchical.parentReference[O];if(I!==void 0)for(var F=0,P;F<I.length;F++){if(P=I[F],R[P]!==void 0)return{foundParent:P,withChild:O};var x=k(R,P);if(x.foundParent!==null)return x}return{foundParent:null,withChild:O}};return C(E,m),S(E,y)}},{key:"setDirectionStrategy",value:function(){var m=this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU";this.direction=m?new wQ(this):new CQ(this)}},{key:"_getCenterPosition",value:function(m){for(var y=1e9,_=-1e9,E=0,C;E<m.length;E++){if(C=void 0,m[E].id!==void 0)C=m[E];else{var S=m[E];C=this.body.nodes[S]}var k=this.direction.getPosition(C);y=c(y,k),_=a(_,k)}return .5*(y+_)}}]),p}(),AQ=function(){function t(e,i,n){var r=this;Qe(this,t),this.body=e,this.canvas=i,this.selectionHandler=n,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},we.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){r._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return Je(t,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(e,i,n){i!==void 0&&(this.options.locale=i.locale===void 0?n.locale:i.locale,this.options.locales=i.locales===void 0?n.locales:i.locales),e!==void 0&&(typeof e=="boolean"?this.options.enabled=e:(this.options.enabled=!0,we.deepExtend(this.options,e)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var e=this.selectionHandler._getSelectedNodeCount(),i=this.selectionHandler._getSelectedEdgeCount(),n=this.options.locales[this.options.locale],r=!1;this.options.addNode!==!1&&(this._createAddNodeButton(n),r=!0),this.options.addEdge!==!1&&(r===!0?this._createSeperator(1):r=!0,this._createAddEdgeButton(n)),e===1&&typeof this.options.editNode=="function"?(r===!0?this._createSeperator(2):r=!0,this._createEditNodeButton(n)):i===1&&e===0&&this.options.editEdge!==!1&&(r===!0?this._createSeperator(3):r=!0,this._createEditEdgeButton(n)),e+i!==0&&(0<e&&this.options.deleteNode!==!1?(r===!0&&this._createSeperator(4),this._createDeleteButton(n)):e===0&&this.options.deleteEdge!==!1&&(r===!0&&this._createSeperator(4),this._createDeleteButton(n))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var e=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var i=this.selectionHandler._getSelectedNode();if(i===void 0)this.showManipulatorToolbar();else{if(this.inMode="editNode",typeof this.options.editNode!="function")throw new Error("No function has been configured to handle the editing of nodes.");if(i.isCluster!==!0){var n=we.deepExtend({},i.options,!1);if(n.x=i.x,n.y=i.y,this.options.editNode.length===2)this.options.editNode(n,function(r){r!=null&&e.inMode==="editNode"&&e.body.data.nodes.getDataSet().update(r),e.showManipulatorToolbar()});else throw new Error("The function for edit does not support two arguments (data, callback)")}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}}},{key:"addEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",this._dragStartEdge.bind(this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",zs(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag=="function"&&(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],this.edgeBeingEditedId!==void 0)){var e=this.body.edges[this.edgeBeingEditedId];return void this._performEditEdge(e.from,e.to)}if(this.guiEnabled===!0){var i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],this.edgeBeingEditedId!==void 0){var n=this.body.edges[this.edgeBeingEditedId],r=this._getNewTargetNode(n.from.x,n.from.y),s=this._getNewTargetNode(n.to.x,n.to.y);this.temporaryIds.nodes.push(r.id),this.temporaryIds.nodes.push(s.id),this.body.nodes[r.id]=r,this.body.nodeIndices.push(r.id),this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id),this._temporaryBindUI("onTouch",this._controlNodeTouch.bind(this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",this._controlNodeDragStart.bind(this)),this._temporaryBindUI("onDrag",this._controlNodeDrag.bind(this)),this._temporaryBindUI("onDragEnd",this._controlNodeDragEnd.bind(this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(a){var o=n.edgeType.findBorderPositions(a);r.selected===!1&&(r.x=o.from.x,r.y=o.from.y),s.selected===!1&&(s.x=o.to.x,s.y=o.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var e=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var i=this.selectionHandler.getSelectedNodes(),n=this.selectionHandler.getSelectedEdges(),r=void 0;if(0<i.length){for(var s=0;s<i.length;s++)if(this.body.nodes[i[s]].isCluster===!0)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);typeof this.options.deleteNode=="function"&&(r=this.options.deleteNode)}else 0<n.length&&typeof this.options.deleteEdge=="function"&&(r=this.options.deleteEdge);if(typeof r=="function")if(r.length===2)r({nodes:i,edges:n},function(a){a!=null&&e.inMode==="delete"?(e.body.data.edges.getDataSet().remove(a.edges),e.body.data.nodes.getDataSet().remove(a.nodes),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()):(e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar())});else throw new Error("The function for delete does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().remove(n),this.body.data.nodes.getDataSet().remove(i),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){this.manipulationDiv===void 0&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.manipulationDiv.style.display=this.editMode===!0?"block":"none",this.canvas.frame.appendChild(this.manipulationDiv)),this.editModeDiv===void 0&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editModeDiv.style.display=this.editMode===!0?"none":"block",this.canvas.frame.appendChild(this.editModeDiv)),this.closeDiv===void 0&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(e,i){var n=we.deepExtend({},this.options.controlNodeStyle);n.id="targetNode"+we.randomUUID(),n.hidden=!1,n.physics=!1,n.x=e,n.y=i;var r=this.body.functions.createNode(n);return r.shape.boundingBox={left:e,right:e,top:i,bottom:i},r}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},we.recursiveDOMDelete(this.editModeDiv);var e=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-button vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindHammerToDiv(i,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(we.recursiveDOMDelete(this.editModeDiv),we.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(this.manipulationHammers.length!=0){for(var e=0;e<this.manipulationHammers.length;e++)this.manipulationHammers[e].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),we.recursiveDOMDelete(this.manipulationDiv),we.recursiveDOMDelete(this.editModeDiv),we.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(e){var i=this._createButton("addNode","vis-button vis-add",e.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(e){var i=this._createButton("addEdge","vis-button vis-connect",e.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(e){var i=this._createButton("editNode","vis-button vis-edit",e.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(e){var i=this._createButton("editEdge","vis-button vis-edit",e.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(e){var i=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete",n=this._createButton("delete",i,e.del||this.options.locales.en.del);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(e){var i=this._createButton("back","vis-button vis-back",e.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(e,i,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"vis-label";return this.manipulationDOM[e+"Div"]=document.createElement("div"),this.manipulationDOM[e+"Div"].className=i,this.manipulationDOM[e+"Label"]=document.createElement("div"),this.manipulationDOM[e+"Label"].className=r,this.manipulationDOM[e+"Label"].innerHTML=n,this.manipulationDOM[e+"Div"].appendChild(this.manipulationDOM[e+"Label"]),this.manipulationDOM[e+"Div"]}},{key:"_createDescription",value:function(e){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",e))}},{key:"_temporaryBindEvent",value:function(e,i){this.temporaryEventFunctions.push({event:e,boundFunction:i}),this.body.emitter.on(e,i)}},{key:"_temporaryBindUI",value:function(e,i){if(this.body.eventListeners[e]!==void 0)this.temporaryUIFunctions[e]=this.body.eventListeners[e],this.body.eventListeners[e]=i;else throw new Error("This UI function does not exist. Typo? You tried: "+e+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)))}},{key:"_unbindTemporaryUIs",value:function(){for(var e in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(e)&&(this.body.eventListeners[e]=this.temporaryUIFunctions[e],delete this.temporaryUIFunctions[e]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var e=0;e<this.temporaryEventFunctions.length;e++){var i=this.temporaryEventFunctions[e].event,n=this.temporaryEventFunctions[e].boundFunction;this.body.emitter.off(i,n)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(e,i){var n=new _d(e,{});ko.onTouch(n,i),this.manipulationHammers.push(n)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var e=0;e<this.temporaryIds.edges.length;e++){this.body.edges[this.temporaryIds.edges[e]].disconnect(),delete this.body.edges[this.temporaryIds.edges[e]];var i=this.body.edgeIndices.indexOf(this.temporaryIds.edges[e]);i!==-1&&this.body.edgeIndices.splice(i,1)}for(var n=0;n<this.temporaryIds.nodes.length;n++){delete this.body.nodes[this.temporaryIds.nodes[n]];var r=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[n]);r!==-1&&this.body.nodeIndices.splice(r,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(e){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=we.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var e=this.lastTouch,i=this.selectionHandler._pointerToPositionObject(e),n=this.body.nodes[this.temporaryIds.nodes[0]],r=this.body.nodes[this.temporaryIds.nodes[1]],s=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=n.isOverlappingWith(i),o=r.isOverlappingWith(i);a===!0?(this.selectedControlNode=n,s.edgeType.from=n):o===!0&&(this.selectedControlNode=r,s.edgeType.to=r),this.selectedControlNode!==void 0&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(e){this.body.emitter.emit("disablePhysics");var i=this.body.functions.getPointer(e.center),n=this.canvas.DOMtoCanvas(i);if(this.selectedControlNode!==void 0)this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y;else{var r=i.x-this.lastTouch.x,s=i.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+r,y:this.lastTouch.translation.y+s}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(e){var i=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(i),r=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode!==void 0){this.selectionHandler.unselectAll();for(var s=this.selectionHandler._getAllNodesOverlappingWith(n),a=void 0,o=s.length-1;0<=o;o--)if(s[o]!==this.selectedControlNode.id){a=this.body.nodes[s[o]];break}if(a===void 0||this.selectedControlNode===void 0)r.updateEdgeType(),this.body.emitter.emit("restorePhysics");else if(a.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var c=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===c.id?this._performEditEdge(a.id,r.to.id):this._performEditEdge(r.from.id,a.id)}this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(e){if(100<new Date().valueOf()-this.touchTime){this.lastTouch=this.body.functions.getPointer(e.center),this.lastTouch.translation=we.extend({},this.body.view.translation);var i=this.lastTouch,n=this.selectionHandler.getNodeAt(i);if(n!==void 0)if(n.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var r=this._getNewTargetNode(n.x,n.y);this.body.nodes[r.id]=r,this.body.nodeIndices.push(r.id);var s=this.body.functions.createEdge({id:"connectionEdge"+we.randomUUID(),from:n.id,to:r.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[s.id]=s,this.body.edgeIndices.push(s.id),this.temporaryIds.nodes.push(r.id),this.temporaryIds.edges.push(s.id)}this.touchTime=new Date().valueOf()}}},{key:"_dragControlNode",value:function(e){var i=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(i),r=void 0;this.temporaryIds.edges[0]!==void 0&&(r=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var s=this.selectionHandler._getAllNodesOverlappingWith(n),a=void 0,o=s.length-1;0<=o;o--)if(this.temporaryIds.nodes.indexOf(s[o])===-1){a=this.body.nodes[s[o]];break}if(e.controlEdge={from:r,to:a?a.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragging",e,i),this.temporaryIds.nodes[0]!==void 0){var c=this.body.nodes[this.temporaryIds.nodes[0]];c.x=this.canvas._XconvertDOMtoCanvas(i.x),c.y=this.canvas._YconvertDOMtoCanvas(i.y),this.body.emitter.emit("_redraw")}else{var d=i.x-this.lastTouch.x,p=i.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+d,y:this.lastTouch.translation.y+p}}}},{key:"_finishConnect",value:function(e){var i=this.body.functions.getPointer(e.center),n=this.selectionHandler._pointerToPositionObject(i),r=void 0;this.temporaryIds.edges[0]!==void 0&&(r=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var s=this.selectionHandler._getAllNodesOverlappingWith(n),a=void 0,o=s.length-1;0<=o;o--)if(this.temporaryIds.nodes.indexOf(s[o])===-1){a=this.body.nodes[s[o]];break}this._cleanupTemporaryNodesAndEdges(),a!==void 0&&(a.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.body.nodes[r]!==void 0&&this.body.nodes[a.id]!==void 0&&this._performAddEdge(r,a.id)),e.controlEdge={from:r,to:a?a.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragEnd",e,i),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(e){var i=this.lastTouch;this.selectionHandler._generateClickEvent("dragStart",e,i,void 0,!0)}},{key:"_performAddNode",value:function(e){var i=this,n={id:we.randomUUID(),x:e.pointer.canvas.x,y:e.pointer.canvas.y,label:"new"};if(typeof this.options.addNode!="function")this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar();else if(this.options.addNode.length===2)this.options.addNode(n,function(r){r!=null&&i.inMode==="addNode"&&i.body.data.nodes.getDataSet().add(r),i.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)")}},{key:"_performAddEdge",value:function(e,i){var n=this,r={from:e,to:i};if(typeof this.options.addEdge!="function")this.body.data.edges.getDataSet().add(r),this.selectionHandler.unselectAll(),this.showManipulatorToolbar();else if(this.options.addEdge.length===2)this.options.addEdge(r,function(s){s!=null&&n.inMode==="addEdge"&&(n.body.data.edges.getDataSet().add(s),n.selectionHandler.unselectAll(),n.showManipulatorToolbar())});else throw new Error("The function for connect does not support two arguments (data,callback)")}},{key:"_performEditEdge",value:function(e,i){var n=this,r={id:this.edgeBeingEditedId,from:e,to:i,label:this.body.data.edges._data[this.edgeBeingEditedId].label},s=this.options.editEdge;if(zs(s)==="object"&&(s=s.editWithoutDrag),typeof s!="function")this.body.data.edges.getDataSet().update(r),this.selectionHandler.unselectAll(),this.showManipulatorToolbar();else if(s.length===2)s(r,function(a){a==null||n.inMode!=="editEdge"?(n.body.edges[r.id].updateEdgeType(),n.body.emitter.emit("_redraw"),n.showManipulatorToolbar()):(n.body.data.edges.getDataSet().update(a),n.selectionHandler.unselectAll(),n.showManipulatorToolbar())});else throw new Error("The function for edit does not support two arguments (data, callback)")}}]),t}(),RQ={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},IQ=function(){var t=Math.atan2,e=Math.cos,i=Math.sin,n=Math.sqrt,r=Math.PI,s=Math.min;function a(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1;Qe(this,a),this.pixelRatio=o,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Je(a,[{key:"insertTo",value:function(o){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=o,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(o){if(typeof o=="function")this.updateCallback=o;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(o){if(typeof o=="function")this.closeCallback=o;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(o){if(typeof o=="string")return RQ[o]}},{key:"setColor",value:function(o){var c=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(o!=="none"){var d=this._isColorString(o),p;if(d!==void 0&&(o=d),we.isString(o)===!0){if(we.isValidRGB(o)===!0){var m=o.substr(4).substr(0,o.length-5).split(",");p={r:m[0],g:m[1],b:m[2],a:1}}else if(we.isValidRGBA(o)===!0){var y=o.substr(5).substr(0,o.length-6).split(",");p={r:y[0],g:y[1],b:y[2],a:y[3]}}else if(we.isValidHex(o)===!0){var _=we.hexToRGB(o);p={r:_.r,g:_.g,b:_.b,a:1}}}else if(o instanceof Object&&o.r!==void 0&&o.g!==void 0&&o.b!==void 0){var E=o.a===void 0?"1.0":o.a;p={r:o.r,g:o.g,b:o.b,a:E}}if(p===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(o));this._setColor(p,c)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var o=this,c=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0];c===!0&&(this.previousColor=we.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){o.closeCallback!==void 0&&(o.closeCallback(),o.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor===void 0?alert("There is no last color to load..."):this.setColor(this.previousColor,!1)}},{key:"_setColor",value:function(o){var c=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];c===!0&&(this.initialColor=we.extend({},o)),this.color=o;var d=we.RGBToHSV(o.r,o.g,o.b),p=2*r,m=this.r*d.s,y=this.centerCoordinates.x+m*i(p*d.h),_=this.centerCoordinates.y+m*e(p*d.h);this.colorPickerSelector.style.left=y-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=_-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(o)}},{key:"_setOpacity",value:function(o){this.color.a=o/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(o){var c=we.RGBToHSV(this.color.r,this.color.g,this.color.b);c.v=o/100;var d=we.HSVToRGB(c.h,c.s,c.v);d.a=this.color.a,this.color=d,this._updatePicker()}},{key:"_updatePicker",value:function(){var o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.color,c=we.RGBToHSV(o.r,o.g,o.b),d=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)),d.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var p=this.colorPickerCanvas.clientWidth,m=this.colorPickerCanvas.clientHeight;d.clearRect(0,0,p,m),d.putImageData(this.hueCircle,0,0),d.fillStyle="rgba(0,0,0,"+(1-c.v)+")",d.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),d.fill(),this.brightnessRange.value=100*c.v,this.opacityRange.value=100*o.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),!this.colorPickerCanvas.getContext){var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}else{var c=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var d=this;this.opacityRange.onchange=function(){d._setOpacity(this.value)},this.opacityRange.oninput=function(){d._setOpacity(this.value)},this.brightnessRange.onchange=function(){d._setBrightness(this.value)},this.brightnessRange.oninput=function(){d._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var o=this;this.drag={},this.pinch={},this.hammer=new _d(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),ko.onTouch(this.hammer,function(c){o._moveSelector(c)}),this.hammer.on("tap",function(c){o._moveSelector(c)}),this.hammer.on("panstart",function(c){o._moveSelector(c)}),this.hammer.on("panmove",function(c){o._moveSelector(c)}),this.hammer.on("panend",function(c){o._moveSelector(c)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var o=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1)),o.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var c=this.colorPickerCanvas.clientWidth,d=this.colorPickerCanvas.clientHeight;o.clearRect(0,0,c,d);var p,m,y,_;this.centerCoordinates={x:.5*c,y:.5*d},this.r=.49*c;var E=2*r/360,C=1/this.r,S;for(y=0;360>y;y++)for(_=0;_<this.r;_++)p=this.centerCoordinates.x+_*i(E*y),m=this.centerCoordinates.y+_*e(E*y),S=we.HSVToRGB(y*(1/360),_*C,1),o.fillStyle="rgb("+S.r+","+S.g+","+S.b+")",o.fillRect(p-.5,m-.5,2,2);o.strokeStyle="rgba(0,0,0,1)",o.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),o.stroke(),this.hueCircle=o.getImageData(0,0,c,d)}this.generated=!0}},{key:"_moveSelector",value:function(o){var c=this.colorPickerDiv.getBoundingClientRect(),d=o.center.x-c.left,p=o.center.y-c.top,m=.5*this.colorPickerDiv.clientHeight,y=.5*this.colorPickerDiv.clientWidth,_=d-y,E=p-m,C=t(_,E),S=.98*s(n(_*_+E*E),y),k=e(C)*S+m,R=i(C)*S+y;this.colorPickerSelector.style.top=k-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=R-.5*this.colorPickerSelector.clientWidth+"px";var O=C/(2*r);O=0>O?O+1:O;var I=S/this.r,F=we.RGBToHSV(this.color.r,this.color.g,this.color.b);F.h=O,F.s=I;var P=we.HSVToRGB(F.h,F.s,F.v);P.a=this.color.a,this.color=P,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),a}(),DQ=function(){var t=Math.ceil;function e(i,n,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1;Qe(this,e),this.parent=i,this.changedOptions=[],this.container=n,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},we.extend(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new IQ(s),this.wrapper=void 0}return Je(e,[{key:"setOptions",value:function(i){if(i!==void 0){this.popupHistory={},this._removePopup();var n=!0;if(typeof i=="string")this.options.filter=i;else if(i instanceof Array)this.options.filter=i.join();else if(zs(i)==="object"){if(i==null)throw new TypeError("options cannot be null");i.container!==void 0&&(this.options.container=i.container),i.filter!==void 0&&(this.options.filter=i.filter),i.showButton!==void 0&&(this.options.showButton=i.showButton),i.enabled!==void 0&&(n=i.enabled)}else typeof i=="boolean"?(this.options.filter=!0,n=i):typeof i=="function"&&(this.options.filter=i,n=!0);this.options.filter===!1&&(n=!1),this.options.enabled=n}this._clean()}},{key:"setModuleOptions",value:function(i){this.moduleOptions=i,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var i=this.options.filter,n=0,r=!1;for(var s in this.configureOptions)this.configureOptions.hasOwnProperty(s)&&(this.allowCreation=!1,r=!1,typeof i=="function"?(r=i(s,[]),r=r||this._handleObject(this.configureOptions[s],[s],!0)):(i===!0||i.indexOf(s)!==-1)&&(r=!0),r!==!1&&(this.allowCreation=!0,0<n&&this._makeItem([]),this._makeHeader(s),this._handleObject(this.configureOptions[s],[s])),n++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var i=0;i<this.domElements.length;i++)this.wrapper.appendChild(this.domElements[i]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var i=0;i<this.domElements.length;i++)this.wrapper.removeChild(this.domElements[i]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(i){for(var n=this.moduleOptions,r=0;r<i.length;r++)if(n[i[r]]!==void 0)n=n[i[r]];else{n=void 0;break}return n}},{key:"_makeItem",value:function(i){if(this.allowCreation===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-item vis-config-s"+i.length;for(var r=arguments.length,s=Array(1<r?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.forEach(function(o){n.appendChild(o)}),this.domElements.push(n),this.domElements.length}return 0}},{key:"_makeHeader",value:function(i){var n=document.createElement("div");n.className="vis-configuration vis-config-header",n.innerHTML=i,this._makeItem([],n)}},{key:"_makeLabel",value:function(i,n){var r=2<arguments.length&&arguments[2]!==void 0&&arguments[2],s=document.createElement("div");return s.className="vis-configuration vis-config-label vis-config-s"+n.length,s.innerHTML=r===!0?"<i><b>"+i+":</b></i>":i+":",s}},{key:"_makeDropdown",value:function(i,n,r){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var a=0;n!==void 0&&i.indexOf(n)!==-1&&(a=i.indexOf(n));for(var o=0,c;o<i.length;o++)c=document.createElement("option"),c.value=i[o],o==a&&(c.selected="selected"),c.innerHTML=i[o],s.appendChild(c);var d=this;s.onchange=function(){d._update(this.value,r)};var p=this._makeLabel(r[r.length-1],r);this._makeItem(r,p,s)}},{key:"_makeRange",value:function(i,n,r){var s=i[0],a=i[1],o=i[2],c=i[3],d=document.createElement("input");d.className="vis-configuration vis-config-range";try{d.type="range",d.min=a,d.max=o}catch{}d.step=c;var p="",m=0;if(n!==void 0){var y=1.2;0>n&&n*y<a?(d.min=t(n*y),m=d.min,p="range increased"):n/y<a&&(d.min=t(n/y),m=d.min,p="range increased"),n*y>o&&o!==1&&(d.max=t(n*y),m=d.max,p="range increased"),d.value=n}else d.value=s;var _=document.createElement("input");_.className="vis-configuration vis-config-rangeinput",_.value=d.value;var E=this;d.onchange=function(){_.value=this.value,E._update(+this.value,r)},d.oninput=function(){_.value=this.value};var C=this._makeLabel(r[r.length-1],r),S=this._makeItem(r,C,d,_);p!=""&&this.popupHistory[S]!==m&&(this.popupHistory[S]=m,this._setupPopup(p,S))}},{key:"_makeButton",value:function(){var i=this;if(this.options.showButton===!0){var n=document.createElement("div");n.className="vis-configuration vis-config-button",n.innerHTML="generate options",n.onclick=function(){i._printOptions()},n.onmouseover=function(){n.className="vis-configuration vis-config-button hover"},n.onmouseout=function(){n.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(n)}}},{key:"_setupPopup",value:function(i,n){var r=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup",s.className="vis-configuration-popup",s.innerHTML=i,s.onclick=function(){r._removePopup()},this.popupCounter+=1,this.popupDiv={html:s,index:n}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var i=this;if(this.popupDiv.html!==void 0){var n=this.domElements[this.popupDiv.index],r=n.getBoundingClientRect();this.popupDiv.html.style.left=r.left+"px",this.popupDiv.html.style.top=r.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){i.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){i._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(i,n,r){var s=document.createElement("input");s.type="checkbox",s.className="vis-configuration vis-config-checkbox",s.checked=i,n!==void 0&&(s.checked=n,n!==i&&(zs(i)==="object"?n!==i.enabled&&this.changedOptions.push({path:r,value:n}):this.changedOptions.push({path:r,value:n})));var a=this;s.onchange=function(){a._update(this.checked,r)};var o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,s)}},{key:"_makeTextInput",value:function(i,n,r){var s=document.createElement("input");s.type="text",s.className="vis-configuration vis-config-text",s.value=n,n!==i&&this.changedOptions.push({path:r,value:n});var a=this;s.onchange=function(){a._update(this.value,r)};var o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,s)}},{key:"_makeColorField",value:function(i,n,r){var s=this,a=i[1],o=document.createElement("div");n=n===void 0?a:n,n==="none"?o.className="vis-configuration vis-config-colorBlock none":(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=n),n=n===void 0?a:n,o.onclick=function(){s._showColorPicker(n,o,r)};var c=this._makeLabel(r[r.length-1],r);this._makeItem(r,c,o)}},{key:"_showColorPicker",value:function(i,n,r){var s=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(i),this.colorPicker.setUpdateCallback(function(a){var o="rgba("+a.r+","+a.g+","+a.b+","+a.a+")";n.style.backgroundColor=o,s._update(o,r)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){s._showColorPicker(i,n,r)}})}},{key:"_handleObject",value:function(i){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],r=2<arguments.length&&arguments[2]!==void 0&&arguments[2],s=!1,a=this.options.filter,o=!1;for(var c in i)if(i.hasOwnProperty(c)){s=!0;var d=i[c],p=we.copyAndExtendArray(n,c);if(typeof a=="function"&&(s=a(c,n),s===!1&&!(d instanceof Array)&&typeof d!="string"&&typeof d!="boolean"&&d instanceof Object&&(this.allowCreation=!1,s=this._handleObject(d,p,!0),this.allowCreation=r===!1)),s!==!1){o=!0;var m=this._getValue(p);if(d instanceof Array)this._handleArray(d,m,p);else if(typeof d=="string")this._makeTextInput(d,m,p);else if(typeof d=="boolean")this._makeCheckbox(d,m,p);else if(d instanceof Object){var y=!0;if(n.indexOf("physics")!==-1&&this.moduleOptions.physics.solver!==c&&(y=!1),y==!0)if(d.enabled!==void 0){var _=we.copyAndExtendArray(p,"enabled"),E=this._getValue(_);if(E===!0){var C=this._makeLabel(c,p,!0);this._makeItem(p,C),o=this._handleObject(d,p)||o}else this._makeCheckbox(d,E,p)}else{var S=this._makeLabel(c,p,!0);this._makeItem(p,S),o=this._handleObject(d,p)||o}}else console.error("dont know how to handle",d,c,p)}}return o}},{key:"_handleArray",value:function(i,n,r){typeof i[0]=="string"&&i[0]==="color"?(this._makeColorField(i,n,r),i[1]!==n&&this.changedOptions.push({path:r,value:n})):typeof i[0]=="string"?(this._makeDropdown(i,n,r),i[0]!==n&&this.changedOptions.push({path:r,value:n})):typeof i[0]=="number"&&(this._makeRange(i,n,r),i[0]!==n&&this.changedOptions.push({path:r,value:+n}))}},{key:"_update",value:function(i,n){var r=this._constructOptions(i,n);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}},{key:"_constructOptions",value:function(i,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},s=r;i=i==="true"||i,i=i!=="false"&&i;for(var a=0;a<n.length;a++)n[a]!=="global"&&(s[n[a]]===void 0&&(s[n[a]]={}),a==n.length-1?s[n[a]]=i:s=s[n[a]]);return r}},{key:"_printOptions",value:function(){var i=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(i,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var i={},n=0;n<this.changedOptions.length;n++)this._constructOptions(this.changedOptions[n].value,this.changedOptions[n].path,i);return i}}]),e}(),Ze="string",Ve="boolean",Me="number",ig="array",wt="object",XM="dom",xQ="any",aw=["arrow","circle","bar"],wg={configure:{enabled:{boolean:Ve},filter:{boolean:Ve,string:Ze,array:ig,function:"function"},container:{dom:XM},showButton:{boolean:Ve},__type__:{object:wt,boolean:Ve,string:Ze,array:ig,function:"function"}},edges:{arrows:{to:{enabled:{boolean:Ve},scaleFactor:{number:Me},type:{string:aw},__type__:{object:wt,boolean:Ve}},middle:{enabled:{boolean:Ve},scaleFactor:{number:Me},type:{string:aw},__type__:{object:wt,boolean:Ve}},from:{enabled:{boolean:Ve},scaleFactor:{number:Me},type:{string:aw},__type__:{object:wt,boolean:Ve}},__type__:{string:["from","to","middle"],object:wt}},arrowStrikethrough:{boolean:Ve},background:{enabled:{boolean:Ve},color:{string:Ze},size:{number:Me},dashes:{boolean:Ve,array:ig},__type__:{object:wt,boolean:Ve}},chosen:{label:{boolean:Ve,function:"function"},edge:{boolean:Ve,function:"function"},__type__:{object:wt,boolean:Ve}},color:{color:{string:Ze},highlight:{string:Ze},hover:{string:Ze},inherit:{string:["from","to","both"],boolean:Ve},opacity:{number:Me},__type__:{object:wt,string:Ze}},dashes:{boolean:Ve,array:ig},font:{color:{string:Ze},size:{number:Me},face:{string:Ze},background:{string:Ze},strokeWidth:{number:Me},strokeColor:{string:Ze},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Me},multi:{boolean:Ve,string:Ze},bold:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},boldital:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},ital:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},mono:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},__type__:{object:wt,string:Ze}},hidden:{boolean:Ve},hoverWidth:{function:"function",number:Me},label:{string:Ze,undefined:"undefined"},labelHighlightBold:{boolean:Ve},length:{number:Me,undefined:"undefined"},physics:{boolean:Ve},scaling:{min:{number:Me},max:{number:Me},label:{enabled:{boolean:Ve},min:{number:Me},max:{number:Me},maxVisible:{number:Me},drawThreshold:{number:Me},__type__:{object:wt,boolean:Ve}},customScalingFunction:{function:"function"},__type__:{object:wt}},selectionWidth:{function:"function",number:Me},selfReferenceSize:{number:Me},shadow:{enabled:{boolean:Ve},color:{string:Ze},size:{number:Me},x:{number:Me},y:{number:Me},__type__:{object:wt,boolean:Ve}},smooth:{enabled:{boolean:Ve},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Me},forceDirection:{string:["horizontal","vertical","none"],boolean:Ve},__type__:{object:wt,boolean:Ve}},title:{string:Ze,undefined:"undefined"},width:{number:Me},widthConstraint:{maximum:{number:Me},__type__:{object:wt,boolean:Ve,number:Me}},value:{number:Me,undefined:"undefined"},__type__:{object:wt}},groups:{useDefaultGroups:{boolean:Ve},__any__:"get from nodes, will be overwritten below",__type__:{object:wt}},interaction:{dragNodes:{boolean:Ve},dragView:{boolean:Ve},hideEdgesOnDrag:{boolean:Ve},hideEdgesOnZoom:{boolean:Ve},hideNodesOnDrag:{boolean:Ve},hover:{boolean:Ve},keyboard:{enabled:{boolean:Ve},speed:{x:{number:Me},y:{number:Me},zoom:{number:Me},__type__:{object:wt}},bindToWindow:{boolean:Ve},__type__:{object:wt,boolean:Ve}},multiselect:{boolean:Ve},navigationButtons:{boolean:Ve},selectable:{boolean:Ve},selectConnectedEdges:{boolean:Ve},hoverConnectedEdges:{boolean:Ve},tooltipDelay:{number:Me},zoomView:{boolean:Ve},zoomSpeed:{number:Me},__type__:{object:wt}},layout:{randomSeed:{undefined:"undefined",number:Me},improvedLayout:{boolean:Ve},hierarchical:{enabled:{boolean:Ve},levelSeparation:{number:Me},nodeSpacing:{number:Me},treeSpacing:{number:Me},blockShifting:{boolean:Ve},edgeMinimization:{boolean:Ve},parentCentralization:{boolean:Ve},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:wt,boolean:Ve}},__type__:{object:wt}},manipulation:{enabled:{boolean:Ve},initiallyActive:{boolean:Ve},addNode:{boolean:Ve,function:"function"},addEdge:{boolean:Ve,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:wt,boolean:Ve,function:"function"}},deleteNode:{boolean:Ve,function:"function"},deleteEdge:{boolean:Ve,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:wt,boolean:Ve}},nodes:{borderWidth:{number:Me},borderWidthSelected:{number:Me,undefined:"undefined"},brokenImage:{string:Ze,undefined:"undefined"},chosen:{label:{boolean:Ve,function:"function"},node:{boolean:Ve,function:"function"},__type__:{object:wt,boolean:Ve}},color:{border:{string:Ze},background:{string:Ze},highlight:{border:{string:Ze},background:{string:Ze},__type__:{object:wt,string:Ze}},hover:{border:{string:Ze},background:{string:Ze},__type__:{object:wt,string:Ze}},__type__:{object:wt,string:Ze}},fixed:{x:{boolean:Ve},y:{boolean:Ve},__type__:{object:wt,boolean:Ve}},font:{align:{string:Ze},color:{string:Ze},size:{number:Me},face:{string:Ze},background:{string:Ze},strokeWidth:{number:Me},strokeColor:{string:Ze},vadjust:{number:Me},multi:{boolean:Ve,string:Ze},bold:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},boldital:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},ital:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},mono:{color:{string:Ze},size:{number:Me},face:{string:Ze},mod:{string:Ze},vadjust:{number:Me},__type__:{object:wt,string:Ze}},__type__:{object:wt,string:Ze}},group:{string:Ze,number:Me,undefined:"undefined"},heightConstraint:{minimum:{number:Me},valign:{string:Ze},__type__:{object:wt,boolean:Ve,number:Me}},hidden:{boolean:Ve},icon:{face:{string:Ze},code:{string:Ze},size:{number:Me},color:{string:Ze},__type__:{object:wt}},id:{string:Ze,number:Me},image:{selected:{string:Ze,undefined:"undefined"},unselected:{string:Ze,undefined:"undefined"},__type__:{object:wt,string:Ze}},label:{string:Ze,undefined:"undefined"},labelHighlightBold:{boolean:Ve},level:{number:Me,undefined:"undefined"},margin:{top:{number:Me},right:{number:Me},bottom:{number:Me},left:{number:Me},__type__:{object:wt,number:Me}},mass:{number:Me},physics:{boolean:Ve},scaling:{min:{number:Me},max:{number:Me},label:{enabled:{boolean:Ve},min:{number:Me},max:{number:Me},maxVisible:{number:Me},drawThreshold:{number:Me},__type__:{object:wt,boolean:Ve}},customScalingFunction:{function:"function"},__type__:{object:wt}},shadow:{enabled:{boolean:Ve},color:{string:Ze},size:{number:Me},x:{number:Me},y:{number:Me},__type__:{object:wt,boolean:Ve}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},shapeProperties:{borderDashes:{boolean:Ve,array:ig},borderRadius:{number:Me},interpolation:{boolean:Ve},useImageSize:{boolean:Ve},useBorderWithImage:{boolean:Ve},__type__:{object:wt}},size:{number:Me},title:{string:Ze,dom:XM,undefined:"undefined"},value:{number:Me,undefined:"undefined"},widthConstraint:{minimum:{number:Me},maximum:{number:Me},__type__:{object:wt,boolean:Ve,number:Me}},x:{number:Me},y:{number:Me},__type__:{object:wt}},physics:{enabled:{boolean:Ve},barnesHut:{gravitationalConstant:{number:Me},centralGravity:{number:Me},springLength:{number:Me},springConstant:{number:Me},damping:{number:Me},avoidOverlap:{number:Me},__type__:{object:wt}},forceAtlas2Based:{gravitationalConstant:{number:Me},centralGravity:{number:Me},springLength:{number:Me},springConstant:{number:Me},damping:{number:Me},avoidOverlap:{number:Me},__type__:{object:wt}},repulsion:{centralGravity:{number:Me},springLength:{number:Me},springConstant:{number:Me},nodeDistance:{number:Me},damping:{number:Me},__type__:{object:wt}},hierarchicalRepulsion:{centralGravity:{number:Me},springLength:{number:Me},springConstant:{number:Me},nodeDistance:{number:Me},damping:{number:Me},__type__:{object:wt}},maxVelocity:{number:Me},minVelocity:{number:Me},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:Ve},iterations:{number:Me},updateInterval:{number:Me},onlyDynamicEdges:{boolean:Ve},fit:{boolean:Ve},__type__:{object:wt,boolean:Ve}},timestep:{number:Me},adaptiveTimestep:{boolean:Ve},__type__:{object:wt,boolean:Ve}},autoResize:{boolean:Ve},clickToUse:{boolean:Ve},locale:{string:Ze},locales:{__any__:{any:xQ},__type__:{object:wt}},height:{string:Ze},width:{string:Ze},__type__:{object:wt}};wg.groups.__any__=wg.nodes,wg.manipulation.controlNodeStyle=wg.nodes;var MQ={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,1,1,1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]}},PQ=function(){var t=Math.min;function e(){Qe(this,e)}return Je(e,[{key:"getDistances",value:function(i,n,r){for(var s={},a=i.edges,o=0;o<n.length;o++){var c=n[o],d={};s[c]=d;for(var p=0;p<n.length;p++)d[n[p]]=o==p?0:1e9}for(var m=0,y;m<r.length;m++)y=a[r[m]],y.connected===!0&&s[y.fromId]!==void 0&&s[y.toId]!==void 0&&(s[y.fromId][y.toId]=1,s[y.toId][y.fromId]=1);for(var _=n.length,E=0;E<_;E++)for(var C=n[E],S=s[C],k=0;k<_-1;k++)for(var R=n[k],O=s[R],I=k+1;I<_;I++){var F=n[I],P=s[F],x=t(O[F],O[C]+S[F]);O[F]=x,P[R]=x}return s}}]),e}(),OQ=function(){var t=Math.sqrt,e=Math.pow,i=Math.max,n=Math.min;function r(s,a,o){Qe(this,r),this.body=s,this.springLength=a,this.springConstant=o,this.distanceSolver=new PQ}return Je(r,[{key:"setOptions",value:function(s){s&&(s.springLength&&(this.springLength=s.springLength),s.springConstant&&(this.springConstant=s.springConstant))}},{key:"solve",value:function(s,a){var o=2<arguments.length&&arguments[2]!==void 0&&arguments[2],c=this.distanceSolver.getDistances(this.body,s,a);this._createL_matrix(c),this._createK_matrix(c),this._createE_matrix();for(var d=0,p=i(1e3,n(10*this.body.nodeIndices.length,6e3)),m=1e9,y=0,_=0,E=0,C=0,S=0;m>.01&&d<p;){d+=1;var k=this._getHighestEnergyNode(o),R=Tr(k,4);for(y=R[0],m=R[1],_=R[2],E=R[3],C=m,S=0;C>1&&S<5;){S+=1,this._moveNode(y,_,E);var O=this._getEnergy(y),I=Tr(O,3);C=I[0],_=I[1],E=I[2]}}}},{key:"_getHighestEnergyNode",value:function(s){for(var a=this.body.nodeIndices,o=this.body.nodes,c=0,d=a[0],p=0,m=0,y=0,_;y<a.length;y++)if(_=a[y],o[_].predefinedPosition===!1||o[_].isCluster===!0&&s===!0||o[_].options.fixed.x===!0||o[_].options.fixed.y===!0){var E=this._getEnergy(_),C=Tr(E,3),S=C[0],k=C[1],R=C[2];c<S&&(c=S,d=_,p=k,m=R)}return[d,c,p,m]}},{key:"_getEnergy",value:function(s){var a=Tr(this.E_sums[s],2),o=a[0],c=a[1],d=t(e(o,2)+e(c,2));return[d,o,c]}},{key:"_moveNode",value:function(s,a,o){for(var c=this.body.nodeIndices,d=this.body.nodes,p=0,m=0,y=0,_=d[s].x,E=d[s].y,C=this.K_matrix[s],S=this.L_matrix[s],k=0,R;k<c.length;k++)if(R=c[k],R!==s){var O=d[R].x,I=d[R].y,F=C[R],P=S[R],x=1/e(e(_-O,2)+e(E-I,2),1.5);p+=F*(1-P*e(E-I,2)*x),m+=F*(P*(_-O)*(E-I)*x),y+=F*(1-P*e(_-O,2)*x)}var M=p,q=m,$=a,B=y,j=($/M+o/q)/(q/M-B/q);d[s].x+=-(q*j+$)/M,d[s].y+=j,this._updateE_matrix(s)}},{key:"_createL_matrix",value:function(s){var a=this.body.nodeIndices,o=this.springLength;this.L_matrix=[];for(var c=0;c<a.length;c++){this.L_matrix[a[c]]={};for(var d=0;d<a.length;d++)this.L_matrix[a[c]][a[d]]=o*s[a[c]][a[d]]}}},{key:"_createK_matrix",value:function(s){var a=this.body.nodeIndices,o=this.springConstant;this.K_matrix=[];for(var c=0;c<a.length;c++){this.K_matrix[a[c]]={};for(var d=0;d<a.length;d++)this.K_matrix[a[c]][a[d]]=o*e(s[a[c]][a[d]],-2)}}},{key:"_createE_matrix",value:function(){var s=this.body.nodeIndices,a=this.body.nodes;this.E_matrix={},this.E_sums={};for(var o=0;o<s.length;o++)this.E_matrix[s[o]]=[];for(var c=0;c<s.length;c++){for(var d=s[c],p=a[d].x,m=a[d].y,y=0,_=0,E=c,C;E<s.length;E++)if(C=s[E],C!==d){var S=a[C].x,k=a[C].y,R=1/t(e(p-S,2)+e(m-k,2));this.E_matrix[d][E]=[this.K_matrix[d][C]*(p-S-this.L_matrix[d][C]*(p-S)*R),this.K_matrix[d][C]*(m-k-this.L_matrix[d][C]*(m-k)*R)],this.E_matrix[C][c]=this.E_matrix[d][E],y+=this.E_matrix[d][E][0],_+=this.E_matrix[d][E][1]}this.E_sums[d]=[y,_]}}},{key:"_updateE_matrix",value:function(s){for(var a=this.body.nodeIndices,o=this.body.nodes,c=this.E_matrix[s],d=this.K_matrix[s],p=this.L_matrix[s],m=o[s].x,y=o[s].y,_=0,E=0,C=0,S;C<a.length;C++)if(S=a[C],S!==s){var k=c[C],R=k[0],O=k[1],I=o[S].x,F=o[S].y,P=1/t(e(m-I,2)+e(y-F,2)),x=d[S]*(m-I-p[S]*(m-I)*P),M=d[S]*(y-F-p[S]*(y-F)*P);c[C]=[x,M],_+=x,E+=M;var q=this.E_sums[S];q[0]+=x-R,q[1]+=M-O}this.E_sums[s]=[_,E]}}]),r}();function _t(t,e,i){var n=this;if(!(this instanceof _t))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:dZ,clickToUse:!1},we.extend(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new mZ(function(){return n.body.emitter.emit("_requestRedraw")}),this.groups=new yZ,this.canvas=new gQ(this.body),this.selectionHandler=new TQ(this.body,this.canvas),this.interactionHandler=new EQ(this.body,this.canvas,this.selectionHandler),this.view=new vQ(this.body,this.canvas),this.renderer=new yQ(this.body,this.canvas),this.physics=new hQ(this.body),this.layoutEngine=new kQ(this.body),this.clustering=new pQ(this.body),this.manipulation=new AQ(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new jZ(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new aQ(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new OQ(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}bL(_t.prototype),_t.prototype.setOptions=function(t){var e=this;if(t===null&&(t=void 0),t!==void 0){var i=WZ.validate(t,wg);if(i===!0&&console.log("%cErrors have been found in the supplied options object.",sE),we.selectiveDeepExtend(["locale","locales","clickToUse"],this.options,t),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),t.groups!==void 0&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(!this.configurator&&(this.configurator=new DQ(this,this.body.container,MQ,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&this.configurator.options.enabled===!0){var n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};we.deepExtend(n.nodes,this.nodesHandler.options),we.deepExtend(n.edges,this.edgesHandler.options),we.deepExtend(n.layout,this.layoutEngine.options),we.deepExtend(n.interaction,this.selectionHandler.options),we.deepExtend(n.interaction,this.renderer.options),we.deepExtend(n.interaction,this.interactionHandler.options),we.deepExtend(n.manipulation,this.manipulation.options),we.deepExtend(n.physics,this.physics.options),we.deepExtend(n.global,this.canvas.options),we.deepExtend(n.global,this.options),this.configurator.setModuleOptions(n)}t.clickToUse===void 0?this.body.emitter.emit("activate"):t.clickToUse===!0?this.activator===void 0&&(this.activator=new uZ(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(this.activator!==void 0&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},_t.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],t)t.hasOwnProperty(i)&&(this.clustering._isClusteredNode(i)||t[i].options.hidden!==!1||this.body.nodeIndices.push(t[i].id));for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],s=t[r.fromId],a=t[r.toId],o=!this.clustering._isClusteredEdge(n)&&r.options.hidden===!1&&s!==void 0&&a!==void 0&&s.options.hidden===!1&&a.options.hidden===!1;o&&this.body.edgeIndices.push(r.id)}},_t.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},_t.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=gK.DOTToGraph(t.dot);return void this.setData(e)}if(t&&t.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=_K.parseGephi(t.gephi);return void this.setData(i)}this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},_t.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)this.body.nodes.hasOwnProperty(t)&&delete this.body.nodes[t];for(var e in this.body.edges)this.body.edges.hasOwnProperty(e)&&delete this.body.edges[e];we.recursiveDOMDelete(this.body.container)},_t.prototype._updateValueRange=function(t){var e=void 0,i=void 0,n=0,r;for(r in t)if(t.hasOwnProperty(r)){var s=t[r].getValue();s!==void 0&&(e=e===void 0?s:Math.min(s,e),i=i===void 0?s:Math.max(s,i),n+=s)}if(e!==void 0&&i!==void 0)for(r in t)t.hasOwnProperty(r)&&t[r].setValueRange(e,i,n)},_t.prototype.isActive=function(){return!this.activator||this.activator.active},_t.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},_t.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},_t.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},_t.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},_t.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},_t.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},_t.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},_t.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},_t.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},_t.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},_t.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},_t.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},_t.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},_t.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},_t.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},_t.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},_t.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},_t.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},_t.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},_t.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},_t.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},_t.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},_t.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},_t.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},_t.prototype.getConnectedNodes=function(t){return this.body.nodes[t]===void 0?this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments):this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments)},_t.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},_t.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},_t.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},_t.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},_t.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},_t.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},_t.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},_t.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},_t.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t},_t.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return t!==void 0&&t.id!==void 0?t.id:t},_t.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},_t.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},_t.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},_t.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},_t.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},_t.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},_t.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},_t.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},_t.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},_t.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},_t.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};var qf=yl(function(t,e){e.prepareElements=function(i){for(var n in i)i.hasOwnProperty(n)&&(i[n].redundant=i[n].used,i[n].used=[])},e.cleanupElements=function(i){for(var n in i)if(i.hasOwnProperty(n)&&i[n].redundant){for(var r=0;r<i[n].redundant.length;r++)i[n].redundant[r].parentNode.removeChild(i[n].redundant[r]);i[n].redundant=[]}},e.resetElements=function(i){e.prepareElements(i),e.cleanupElements(i),e.prepareElements(i)},e.getSVGElement=function(i,n,r){var s;return n.hasOwnProperty(i)?0<n[i].redundant.length?(s=n[i].redundant[0],n[i].redundant.shift()):(s=document.createElementNS("http://www.w3.org/2000/svg",i),r.appendChild(s)):(s=document.createElementNS("http://www.w3.org/2000/svg",i),n[i]={used:[],redundant:[]},r.appendChild(s)),n[i].used.push(s),s},e.getDOMElement=function(i,n,r,s){var a;return n.hasOwnProperty(i)?0<n[i].redundant.length?(a=n[i].redundant[0],n[i].redundant.shift()):(a=document.createElement(i),s===void 0?r.appendChild(a):r.insertBefore(a,s)):(a=document.createElement(i),n[i]={used:[],redundant:[]},s===void 0?r.appendChild(a):r.insertBefore(a,s)),n[i].used.push(a),a},e.drawPoint=function(i,n,r,s,a,o){var c;if(r.style=="circle"?(c=e.getSVGElement("circle",s,a),c.setAttributeNS(null,"cx",i),c.setAttributeNS(null,"cy",n),c.setAttributeNS(null,"r",.5*r.size)):(c=e.getSVGElement("rect",s,a),c.setAttributeNS(null,"x",i-.5*r.size),c.setAttributeNS(null,"y",n-.5*r.size),c.setAttributeNS(null,"width",r.size),c.setAttributeNS(null,"height",r.size)),r.styles!==void 0&&c.setAttributeNS(null,"style",r.styles),c.setAttributeNS(null,"class",r.className+" vis-point"),o){var d=e.getSVGElement("text",s,a);o.xOffset&&(i+=o.xOffset),o.yOffset&&(n+=o.yOffset),o.content&&(d.textContent=o.content),o.className&&d.setAttributeNS(null,"class",o.className+" vis-label"),d.setAttributeNS(null,"x",i),d.setAttributeNS(null,"y",n)}return c},e.drawBar=function(i,n,r,s,a,o,c,d){if(s!=0){0>s&&(s*=-1,n-=s);var p=e.getSVGElement("rect",o,c);p.setAttributeNS(null,"x",i-.5*r),p.setAttributeNS(null,"y",n),p.setAttributeNS(null,"width",r),p.setAttributeNS(null,"height",s),p.setAttributeNS(null,"class",a),d&&p.setAttributeNS(null,"style",d)}}});qf.prepareElements;qf.cleanupElements;qf.resetElements;qf.getSVGElement;qf.getDOMElement;qf.drawPoint;qf.drawBar;yl(function(t){var e=Math.round,i=Math.pow,n=Math.max,r=Math.abs,s=Math.min,a=Math.floor,o=Math.ceil;(function(c,d){t.exports=d()})(oA,function(){function c(){return Ma.apply(null,arguments)}function d(l){return l instanceof Array||Object.prototype.toString.call(l)==="[object Array]"}function p(l){return l!=null&&Object.prototype.toString.call(l)==="[object Object]"}function m(l){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(l).length===0;for(var h in l)if(l.hasOwnProperty(h))return!1;return!0}function y(l){return l===void 0}function _(l){return typeof l=="number"||Object.prototype.toString.call(l)==="[object Number]"}function E(l){return l instanceof Date||Object.prototype.toString.call(l)==="[object Date]"}function C(l,h){var b=[],w;for(w=0;w<l.length;++w)b.push(h(l[w],w));return b}function S(l,h){return Object.prototype.hasOwnProperty.call(l,h)}function k(l,h){for(var b in h)S(h,b)&&(l[b]=h[b]);return S(h,"toString")&&(l.toString=h.toString),S(h,"valueOf")&&(l.valueOf=h.valueOf),l}function R(l,h,b,w){return fr(l,h,b,w,!0).utc()}function O(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function I(l){return l._pf==null&&(l._pf=O()),l._pf}function F(l){if(l._isValid==null){var h=I(l),b=Pa.call(h.parsedDateParts,function(D){return D!=null}),w=!isNaN(l._d.getTime())&&0>h.overflow&&!h.empty&&!h.invalidMonth&&!h.invalidWeekday&&!h.weekdayMismatch&&!h.nullInput&&!h.invalidFormat&&!h.userInvalidated&&(!h.meridiem||h.meridiem&&b);if(l._strict&&(w=w&&h.charsLeftOver===0&&h.unusedTokens.length===0&&h.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(l))l._isValid=w;else return w}return l._isValid}function P(l){var h=R(NaN);return l==null?I(h).userInvalidated=!0:k(I(h),l),h}function x(l,h){var b,w,D;if(y(h._isAMomentObject)||(l._isAMomentObject=h._isAMomentObject),y(h._i)||(l._i=h._i),y(h._f)||(l._f=h._f),y(h._l)||(l._l=h._l),y(h._strict)||(l._strict=h._strict),y(h._tzm)||(l._tzm=h._tzm),y(h._isUTC)||(l._isUTC=h._isUTC),y(h._offset)||(l._offset=h._offset),y(h._pf)||(l._pf=I(h)),y(h._locale)||(l._locale=h._locale),0<Ms.length)for(b=0;b<Ms.length;b++)w=Ms[b],D=h[w],y(D)||(l[w]=D);return l}function M(l){x(this,l),this._d=new Date(l._d==null?NaN:l._d.getTime()),this.isValid()||(this._d=new Date(NaN)),ea===!1&&(ea=!0,c.updateOffset(this),ea=!1)}function q(l){return l instanceof M||l!=null&&l._isAMomentObject!=null}function $(l){return 0>l?o(l)||0:a(l)}function B(l){var h=+l,b=0;return h!=0&&isFinite(h)&&(b=$(h)),b}function j(l,h,b){var w=s(l.length,h.length),D=r(l.length-h.length),G=0,te;for(te=0;te<w;te++)(b&&l[te]!==h[te]||!b&&B(l[te])!==B(h[te]))&&G++;return G+D}function z(l){c.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+l)}function X(l,h){var b=!0;return k(function(){if(c.deprecationHandler!=null&&c.deprecationHandler(null,l),b){for(var w=[],D=0,G;D<arguments.length;D++){if(G="",typeof arguments[D]=="object"){for(var te in G+=`
[`+D+"] ",arguments[0])G+=te+": "+arguments[0][te]+", ";G=G.slice(0,-2)}else G=arguments[D];w.push(G)}z(l+`
Arguments: `+Array.prototype.slice.call(w).join("")+`
`+new Error().stack),b=!1}return h.apply(this,arguments)},h)}function se(l,h){c.deprecationHandler!=null&&c.deprecationHandler(l,h),Ho[l]||(z(h),Ho[l]=!0)}function ue(l){return l instanceof Function||Object.prototype.toString.call(l)==="[object Function]"}function ve(l){var h,b;for(b in l)h=l[b],ue(h)?this[b]=h:this["_"+b]=h;this._config=l,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function _e(l,h){var b=k({},l),w;for(w in h)S(h,w)&&(p(l[w])&&p(h[w])?(b[w]={},k(b[w],l[w]),k(b[w],h[w])):h[w]==null?delete b[w]:b[w]=h[w]);for(w in l)S(l,w)&&!S(h,w)&&p(l[w])&&(b[w]=k({},b[w]));return b}function de(l){l!=null&&this.set(l)}function oe(l,h){var b=l.toLowerCase();Qn[b]=Qn[b+"s"]=Qn[h]=l}function Q(l){return typeof l=="string"?Qn[l]||Qn[l.toLowerCase()]:void 0}function Z(l){var h={},b,w;for(w in l)S(l,w)&&(b=Q(w),b&&(h[b]=l[w]));return h}function W(l,h){Jn[l]=h}function ne(l){var h=[];for(var b in l)h.push({unit:b,priority:Jn[b]});return h.sort(function(w,D){return w.priority-D.priority}),h}function ce(l,h,b){var w=""+r(l),D=h-w.length;return(0<=l?b?"+":"":"-")+i(10,n(0,D)).toString().substr(1)+w}function J(l,h,b,w){var D=w;typeof w=="string"&&(D=function(){return this[w]()}),l&&(In[l]=D),h&&(In[h[0]]=function(){return ce(D.apply(this,arguments),h[1],h[2])}),b&&(In[b]=function(){return this.localeData().ordinal(D.apply(this,arguments),l)})}function pe(l){return l.match(/\[[\s\S]/)?l.replace(/^\[|\]$/g,""):l.replace(/\\/g,"")}function he(l){var h=l.match(wl),b,w;for(b=0,w=h.length;b<w;b++)h[b]=In[h[b]]?In[h[b]]:pe(h[b]);return function(D){var G="",te;for(te=0;te<w;te++)G+=ue(h[te])?h[te].call(D,l):h[te];return G}}function fe(l,h){return l.isValid()?(h=be(h,l.localeData()),Ps[h]=Ps[h]||he(h),Ps[h](l)):l.localeData().invalidDate()}function be(l,h){function b(D){return h.longDateFormat(D)||D}var w=5;for(ds.lastIndex=0;0<=w&&ds.test(l);)l=l.replace(ds,b),ds.lastIndex=0,w-=1;return l}function re(l,h,b){Na[l]=ue(h)?h:function(w){return w&&b?b:h}}function Ft(l,h){return S(Na,l)?Na[l](h._strict,h._locale):new RegExp(Dt(l))}function Dt(l){return ft(l.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(h,b,w,D,G){return b||w||D||G}))}function ft(l){return l.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ae(l,h){var b=h,w;for(typeof l=="string"&&(l=[l]),_(h)&&(b=function(D,G){G[h]=B(D)}),w=0;w<l.length;w++)ta[l[w]]=b}function ei(l,h){Ae(l,function(b,w,D,G){D._w=D._w||{},h(b,D._w,D,G)})}function $t(l,h,b){h!=null&&S(ta,l)&&ta[l](h,b._a,b,l)}function At(l){return It(l)?366:365}function It(l){return l%4==0&&l%100!=0||l%400==0}function St(l,h){return function(b){return b==null?rt(this,l):(De(this,l,b),c.updateOffset(this,h),this)}}function rt(l,h){return l.isValid()?l._d["get"+(l._isUTC?"UTC":"")+h]():NaN}function De(l,h,b){l.isValid()&&!isNaN(b)&&(h==="FullYear"&&It(l.year())&&l.month()===1&&l.date()===29?l._d["set"+(l._isUTC?"UTC":"")+h](b,l.month(),ot(b,l.month())):l._d["set"+(l._isUTC?"UTC":"")+h](b))}function qe(l,h){if(typeof l=="object"){l=Z(l);for(var b=ne(l),w=0;w<b.length;w++)this[b[w].unit](l[b[w].unit])}else if(l=Q(l),ue(this[l]))return this[l](h);return this}function Pt(l,h){return(l%h+h)%h}function ot(l,h){if(isNaN(l)||isNaN(h))return NaN;var b=Pt(h,12);return l+=(h-b)/12,b===1?It(l)?29:28:31-b%7%2}function Ei(l,h,b){var w=l.toLocaleLowerCase(),D,G,te;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],D=0;12>D;++D)te=R([2e3,D]),this._shortMonthsParse[D]=this.monthsShort(te,"").toLocaleLowerCase(),this._longMonthsParse[D]=this.months(te,"").toLocaleLowerCase();return b?h==="MMM"?(G=ut.call(this._shortMonthsParse,w),G===-1?null:G):(G=ut.call(this._longMonthsParse,w),G===-1?null:G):h==="MMM"?(G=ut.call(this._shortMonthsParse,w),G!==-1?G:(G=ut.call(this._longMonthsParse,w),G===-1?null:G)):(G=ut.call(this._longMonthsParse,w),G!==-1?G:(G=ut.call(this._shortMonthsParse,w),G===-1?null:G))}function yi(l,h,b){var w,D,G;if(this._monthsParseExact)return Ei.call(this,l,h,b);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),w=0;12>w;w++)if(D=R([2e3,w]),b&&!this._longMonthsParse[w]&&(this._longMonthsParse[w]=new RegExp("^"+this.months(D,"").replace(".","")+"$","i"),this._shortMonthsParse[w]=new RegExp("^"+this.monthsShort(D,"").replace(".","")+"$","i")),b||this._monthsParse[w]||(G="^"+this.months(D,"")+"|^"+this.monthsShort(D,""),this._monthsParse[w]=new RegExp(G.replace(".",""),"i")),b&&h==="MMMM"&&this._longMonthsParse[w].test(l)||b&&h==="MMM"&&this._shortMonthsParse[w].test(l)||!b&&this._monthsParse[w].test(l))return w}function Ti(l,h){var b;if(!l.isValid())return l;if(typeof h=="string"){if(/^\d+$/.test(h))h=B(h);else if(h=l.localeData().monthsParse(h),!_(h))return l}return b=s(l.date(),ot(l.year(),h)),l._d["set"+(l._isUTC?"UTC":"")+"Month"](h,b),l}function wi(l){return l==null?rt(this,"Month"):(Ti(this,l),c.updateOffset(this,!0),this)}function hi(){function l(te,Te){return Te.length-te.length}var h=[],b=[],w=[],D,G;for(D=0;12>D;D++)G=R([2e3,D]),h.push(this.monthsShort(G,"")),b.push(this.months(G,"")),w.push(this.months(G,"")),w.push(this.monthsShort(G,""));for(h.sort(l),b.sort(l),w.sort(l),D=0;12>D;D++)h[D]=ft(h[D]),b[D]=ft(b[D]);for(D=0;24>D;D++)w[D]=ft(w[D]);this._monthsRegex=new RegExp("^("+w.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+h.join("|")+")","i")}function Ki(l,h,b,w,D,G,te){var Te;return 100>l&&0<=l?(Te=new Date(l+400,h,b,w,D,G,te),isFinite(Te.getFullYear())&&Te.setFullYear(l)):Te=new Date(l,h,b,w,D,G,te),Te}function xt(l){var h;if(100>l&&0<=l){var b=Array.prototype.slice.call(arguments);b[0]=l+400,h=new Date(Date.UTC.apply(null,b)),isFinite(h.getUTCFullYear())&&h.setUTCFullYear(l)}else h=new Date(Date.UTC.apply(null,arguments));return h}function zt(l,h,b){var w=7+h-b,D=(7+xt(l,0,w).getUTCDay()-h)%7;return-D+w-1}function Ke(l,h,b,w,D){var G=zt(l,w,D),te=1+7*(h-1)+(7+b-w)%7+G,Te,Ne;return 0>=te?(Te=l-1,Ne=At(Te)+te):te>At(l)?(Te=l+1,Ne=te-At(l)):(Te=l,Ne=te),{year:Te,dayOfYear:Ne}}function Xt(l,h,b){var w=zt(l.year(),h,b),D=a((l.dayOfYear()-w-1)/7)+1,G,te;return 1>D?(te=l.year()-1,G=D+dt(te,h,b)):D>dt(l.year(),h,b)?(G=D-dt(l.year(),h,b),te=l.year()+1):(te=l.year(),G=D),{week:G,year:te}}function dt(l,h,b){var w=zt(l,h,b),D=zt(l+1,h,b);return(At(l)-w+D)/7}function Ot(l,h){return typeof l=="string"?isNaN(l)?(l=h.weekdaysParse(l),typeof l=="number"?l:null):parseInt(l,10):l}function ge(l,h){return typeof l=="string"?h.weekdaysParse(l)%7||7:isNaN(l)?null:l}function Oe(l,h){return l.slice(h,7).concat(l.slice(0,h))}function Be(l,h,b){var w=l.toLocaleLowerCase(),D,G,te;if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],D=0;7>D;++D)te=R([2e3,1]).day(D),this._minWeekdaysParse[D]=this.weekdaysMin(te,"").toLocaleLowerCase(),this._shortWeekdaysParse[D]=this.weekdaysShort(te,"").toLocaleLowerCase(),this._weekdaysParse[D]=this.weekdays(te,"").toLocaleLowerCase();return b?h==="dddd"?(G=ut.call(this._weekdaysParse,w),G===-1?null:G):h==="ddd"?(G=ut.call(this._shortWeekdaysParse,w),G===-1?null:G):(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G):h==="dddd"?(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._shortWeekdaysParse,w),G!==-1?G:(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G))):h==="ddd"?(G=ut.call(this._shortWeekdaysParse,w),G!==-1?G:(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._minWeekdaysParse,w),G===-1?null:G))):(G=ut.call(this._minWeekdaysParse,w),G!==-1?G:(G=ut.call(this._weekdaysParse,w),G!==-1?G:(G=ut.call(this._shortWeekdaysParse,w),G===-1?null:G)))}function ct(l,h,b){var w,D,G;if(this._weekdaysParseExact)return Be.call(this,l,h,b);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),w=0;7>w;w++)if(D=R([2e3,1]).day(w),b&&!this._fullWeekdaysParse[w]&&(this._fullWeekdaysParse[w]=new RegExp("^"+this.weekdays(D,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[w]=new RegExp("^"+this.weekdaysShort(D,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[w]=new RegExp("^"+this.weekdaysMin(D,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[w]||(G="^"+this.weekdays(D,"")+"|^"+this.weekdaysShort(D,"")+"|^"+this.weekdaysMin(D,""),this._weekdaysParse[w]=new RegExp(G.replace(".",""),"i")),b&&h==="dddd"&&this._fullWeekdaysParse[w].test(l)||b&&h==="ddd"&&this._shortWeekdaysParse[w].test(l)||b&&h==="dd"&&this._minWeekdaysParse[w].test(l)||!b&&this._weekdaysParse[w].test(l))return w}function it(){function l(Jt,ir){return ir.length-Jt.length}var h=[],b=[],w=[],D=[],G,te,Te,Ne,Ct;for(G=0;7>G;G++)te=R([2e3,1]).day(G),Te=this.weekdaysMin(te,""),Ne=this.weekdaysShort(te,""),Ct=this.weekdays(te,""),h.push(Te),b.push(Ne),w.push(Ct),D.push(Te),D.push(Ne),D.push(Ct);for(h.sort(l),b.sort(l),w.sort(l),D.sort(l),G=0;7>G;G++)b[G]=ft(b[G]),w[G]=ft(w[G]),D[G]=ft(D[G]);this._weekdaysRegex=new RegExp("^("+D.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+w.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+h.join("|")+")","i")}function at(){return this.hours()%12||12}function Kt(l,h){J(l,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),h)})}function fi(l,h){return h._meridiemParse}function An(l){return l&&l.toLowerCase().replace("_","-")}function Sa(l){for(var h=0,b,w,D,G;h<l.length;){for(G=An(l[h]).split("-"),b=G.length,w=An(l[h+1]),w=w?w.split("-"):null;0<b;){if(D=dr(G.slice(0,b).join("-")),D)return D;if(w&&w.length>=b&&j(G,w,!0)>=b-1)break;b--}h++}return tr}function dr(l){var h=null;if(!ht[l]&&t&&t.exports)try{h=tr._abbr,nK("./locale/"+l),Zi(h)}catch{}return ht[l]}function Zi(l,h){var b;return l&&(b=y(h)?Oi(l):ka(l,h),b?tr=b:typeof console<"u"&&console.warn&&console.warn("Locale "+l+" not found. Did you forget to load it?")),tr._abbr}function ka(l,h){if(h!==null){var b=po,w;if(h.abbr=l,ht[l]!=null)se("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),b=ht[l]._config;else if(h.parentLocale!=null)if(ht[h.parentLocale]!=null)b=ht[h.parentLocale]._config;else if(w=dr(h.parentLocale),w!=null)b=w._config;else return yr[h.parentLocale]||(yr[h.parentLocale]=[]),yr[h.parentLocale].push({name:l,config:h}),null;return ht[l]=new de(_e(b,h)),yr[l]&&yr[l].forEach(function(D){ka(D.name,D.config)}),Zi(l),ht[l]}return delete ht[l],null}function Oi(l){var h;if(l&&l._locale&&l._locale._abbr&&(l=l._locale._abbr),!l)return tr;if(!d(l)){if(h=dr(l),h)return h;l=[l]}return Sa(l)}function Xd(){return Tl(ht)}function Rs(l){var h=l._a,b;return h&&I(l).overflow===-2&&(b=0>h[1]||11<h[1]?1:1>h[2]||h[2]>ot(h[0],h[1])?2:0>h[3]||24<h[3]||h[3]===24&&(h[4]!==0||h[5]!==0||h[6]!==0)?3:0>h[4]||59<h[4]?4:0>h[5]||59<h[5]?5:0>h[6]||999<h[6]?6:-1,I(l)._overflowDayOfYear&&(0>b||2<b)&&(b=2),I(l)._overflowWeeks&&b===-1&&(b=7),I(l)._overflowWeekday&&b===-1&&(b=8),I(l).overflow=b),l}function Gn(l,h,b){return l??h??b}function Kd(l){var h=new Date(c.now());return l._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()]}function Is(l){var h=[],b,w,D,G,te;if(!l._d){for(D=Kd(l),l._w&&l._a[2]==null&&l._a[1]==null&&Zd(l),l._dayOfYear!=null&&(te=Gn(l._a[0],D[0]),(l._dayOfYear>At(te)||l._dayOfYear===0)&&(I(l)._overflowDayOfYear=!0),w=xt(te,0,l._dayOfYear),l._a[1]=w.getUTCMonth(),l._a[2]=w.getUTCDate()),b=0;3>b&&l._a[b]==null;++b)l._a[b]=h[b]=D[b];for(;7>b;b++)l._a[b]=h[b]=l._a[b]==null?b===2?1:0:l._a[b];l._a[3]===24&&l._a[4]===0&&l._a[5]===0&&l._a[6]===0&&(l._nextDay=!0,l._a[3]=0),l._d=(l._useUTC?xt:Ki).apply(null,h),G=l._useUTC?l._d.getUTCDay():l._d.getDay(),l._tzm!=null&&l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),l._nextDay&&(l._a[3]=24),l._w&&typeof l._w.d<"u"&&l._w.d!==G&&(I(l).weekdayMismatch=!0)}}function Zd(l){var h,b,w,D,G,te,Te,Ne;if(h=l._w,h.GG!=null||h.W!=null||h.E!=null)G=1,te=4,b=Gn(h.GG,l._a[0],Xt(Ge(),1,4).year),w=Gn(h.W,1),D=Gn(h.E,1),(1>D||7<D)&&(Ne=!0);else{G=l._locale._week.dow,te=l._locale._week.doy;var Ct=Xt(Ge(),G,te);b=Gn(h.gg,l._a[0],Ct.year),w=Gn(h.w,Ct.week),h.d==null?h.e==null?D=G:(D=h.e+G,(0>h.e||6<h.e)&&(Ne=!0)):(D=h.d,(0>D||6<D)&&(Ne=!0))}1>w||w>dt(b,G,te)?I(l)._overflowWeeks=!0:Ne==null?(Te=Ke(b,w,D,G,te),l._a[0]=Te.year,l._dayOfYear=Te.dayOfYear):I(l)._overflowWeekday=!0}function co(l){var h=l._i,b=lh.exec(h)||bu.exec(h),w,D,G,te,Te,Ne;if(b){for(I(l).iso=!0,w=0,D=ys.length;w<D;w++)if(ys[w][1].exec(b[1])){te=ys[w][0],G=ys[w][2]!==!1;break}if(te==null)return void(l._isValid=!1);if(b[3]){for(w=0,D=Kr.length;w<D;w++)if(Kr[w][1].exec(b[3])){Te=(b[2]||" ")+Kr[w][0];break}if(Te==null)return void(l._isValid=!1)}if(!G&&Te!=null)return void(l._isValid=!1);if(b[4])if(_u.exec(b[4]))Ne="Z";else return void(l._isValid=!1);l._f=te+(Te||"")+(Ne||""),hr(l)}else l._isValid=!1}function uo(l,h,b,w,D,G){var te=[Qd(l),ia.indexOf(h),parseInt(b,10),parseInt(w,10),parseInt(D,10)];return G&&te.push(parseInt(G,10)),te}function Qd(l){var h=parseInt(l,10);return 49>=h?2e3+h:999>=h?1900+h:h}function Jd(l){return l.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function bl(l,h,b){if(l){var w=Al.indexOf(l),D=new Date(h[0],h[1],h[2]).getDay();if(w!==D)return I(b).weekdayMismatch=!0,b._isValid=!1,!1}return!0}function vc(l,h,b){if(l)return Tc[l];if(h)return 0;var w=parseInt(b,10),D=w%100;return 60*((w-D)/100)+D}function Ds(l){var h=Rl.exec(Jd(l._i));if(h){var b=uo(h[4],h[3],h[2],h[5],h[6],h[7]);if(!bl(h[1],b,l))return;l._a=b,l._tzm=vc(h[8],h[9],h[10]),l._d=xt.apply(null,l._a),l._d.setUTCMinutes(l._d.getUTCMinutes()-l._tzm),I(l).rfc2822=!0}else l._isValid=!1}function eh(l){var h=Os.exec(l._i);if(h!==null)return void(l._d=new Date(+h[1]));if(co(l),l._isValid===!1)delete l._isValid;else return;if(Ds(l),l._isValid===!1)delete l._isValid;else return;c.createFromInputFallback(l)}function hr(l){if(l._f===c.ISO_8601)return void co(l);if(l._f===c.RFC_2822)return void Ds(l);l._a=[],I(l).empty=!0;var h=""+l._i,b=h.length,w=0,D,G,te,Te,Ne;for(te=be(l._f,l._locale).match(wl)||[],D=0;D<te.length;D++)Te=te[D],G=(h.match(Ft(Te,l))||[])[0],G&&(Ne=h.substr(0,h.indexOf(G)),0<Ne.length&&I(l).unusedInput.push(Ne),h=h.slice(h.indexOf(G)+G.length),w+=G.length),In[Te]?(G?I(l).empty=!1:I(l).unusedTokens.push(Te),$t(Te,G,l)):l._strict&&!G&&I(l).unusedTokens.push(Te);I(l).charsLeftOver=b-w,0<h.length&&I(l).unusedInput.push(h),12>=l._a[3]&&I(l).bigHour===!0&&0<l._a[3]&&(I(l).bigHour=void 0),I(l).parsedDateParts=l._a.slice(0),I(l).meridiem=l._meridiem,l._a[3]=bc(l._locale,l._a[3],l._meridiem),Is(l),Rs(l)}function bc(l,h,b){var w;return b==null?h:l.meridiemHour==null?(l.isPM==null||(w=l.isPM(b),w&&12>h&&(h+=12),w||h!==12||(h=0)),h):l.meridiemHour(h,b)}function pu(l){var h,b,w,D,G;if(l._f.length===0)return I(l).invalidFormat=!0,void(l._d=new Date(NaN));for(D=0;D<l._f.length;D++)G=0,h=x({},l),l._useUTC!=null&&(h._useUTC=l._useUTC),h._f=l._f[D],hr(h),F(h)&&(G+=I(h).charsLeftOver,G+=10*I(h).unusedTokens.length,I(h).score=G,(w==null||G<w)&&(w=G,b=h));k(l,b||h)}function Qi(l){if(!l._d){var h=Z(l._i);l._a=C([h.year,h.month,h.day||h.date,h.hour,h.minute,h.second,h.millisecond],function(b){return b&&parseInt(b,10)}),Is(l)}}function lt(l){var h=new M(Rs(as(l)));return h._nextDay&&(h.add(1,"d"),h._nextDay=void 0),h}function as(l){var h=l._i,b=l._f;return l._locale=l._locale||Oi(l._l),h===null||b===void 0&&h===""?P({nullInput:!0}):(typeof h=="string"&&(l._i=h=l._locale.preparse(h)),q(h)?new M(Rs(h)):(E(h)?l._d=h:d(b)?pu(l):b?hr(l):_c(l),F(l)||(l._d=null),l))}function _c(l){var h=l._i;y(h)?l._d=new Date(c.now()):E(h)?l._d=new Date(h.valueOf()):typeof h=="string"?eh(l):d(h)?(l._a=C(h.slice(0),function(b){return parseInt(b,10)}),Is(l)):p(h)?Qi(l):_(h)?l._d=new Date(h):c.createFromInputFallback(l)}function fr(l,h,b,w,D){var G={};return(b===!0||b===!1)&&(w=b,b=void 0),(p(l)&&m(l)||d(l)&&l.length===0)&&(l=void 0),G._isAMomentObject=!0,G._useUTC=G._isUTC=D,G._l=b,G._i=l,G._f=h,G._strict=w,lt(G)}function Ge(l,h,b,w){return fr(l,h,b,w,!1)}function os(l,h){var b,w;if(h.length===1&&d(h[0])&&(h=h[0]),!h.length)return Ge();for(b=h[0],w=1;w<h.length;++w)(!h[w].isValid()||h[w][l](b))&&(b=h[w]);return b}function Oo(l){for(var h in l)if(ut.call(qn,h)===-1||l[h]!=null&&isNaN(l[h]))return!1;for(var b=!1,w=0;w<qn.length;++w)if(l[qn[w]]){if(b)return!1;parseFloat(l[qn[w]])!==B(l[qn[w]])&&(b=!0)}return!0}function kr(l){var h=Z(l),b=h.year||0,w=h.quarter||0,D=h.month||0,G=h.week||h.isoWeek||0,te=h.day||0,Te=h.hour||0,Ne=h.minute||0,Ct=h.second||0,Jt=h.millisecond||0;this._isValid=Oo(h),this._milliseconds=+Jt+1e3*Ct+6e4*Ne+60*(60*(1e3*Te)),this._days=+te+7*G,this._months=+D+3*w+12*b,this._data={},this._locale=Oi(),this._bubble()}function xe(l){return l instanceof kr}function gt(l){return 0>l?-1*e(-1*l):e(l)}function ho(l,h){J(l,0,0,function(){var b=this.utcOffset(),w="+";return 0>b&&(b=-b,w="-"),w+ce(~~(b/60),2)+h+ce(~~b%60,2)})}function xs(l,h){var b=(h||"").match(l);if(b===null)return null;var w=b[b.length-1]||[],D=(w+"").match(ch)||["-",0,0],G=+(60*D[1])+B(D[2]);return G===0?0:D[0]==="+"?G:-G}function ls(l,h){var b,w;return h._isUTC?(b=h.clone(),w=(q(l)||E(l)?l.valueOf():Ge(l).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+w),c.updateOffset(b,!1),b):Ge(l).local()}function cs(l){return 15*-e(l._d.getTimezoneOffset()/15)}function mu(){if(!y(this._isDSTShifted))return this._isDSTShifted;var l={};if(x(l,this),l=as(l),l._a){var h=l._isUTC?R(l._a):Ge(l._a);this._isDSTShifted=this.isValid()&&0<j(l._a,h.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted}function bt(){return!!this.isValid()&&this._isUTC&&this._offset===0}function oi(l,h){var b=l,w=null,D,G,te;return xe(l)?b={ms:l._milliseconds,d:l._days,M:l._months}:_(l)?(b={},h?b[h]=l:b.milliseconds=l):(w=Eu.exec(l))?(D=w[1]==="-"?-1:1,b={y:0,d:B(w[2])*D,h:B(w[3])*D,m:B(w[4])*D,s:B(w[5])*D,ms:B(gt(1e3*w[6]))*D}):(w=uh.exec(l))?(D=w[1]==="-"?-1:1,b={y:rn(w[2],D),M:rn(w[3],D),w:rn(w[4],D),d:rn(w[5],D),h:rn(w[6],D),m:rn(w[7],D),s:rn(w[8],D)}):b==null?b={}:typeof b=="object"&&("from"in b||"to"in b)&&(te=us(Ge(b.from),Ge(b.to)),b={},b.ms=te.milliseconds,b.M=te.months),G=new kr(b),xe(l)&&S(l,"_locale")&&(G._locale=l._locale),G}function rn(l,h){var b=l&&parseFloat(l.replace(",","."));return(isNaN(b)?0:b)*h}function Aa(l,h){var b={};return b.months=h.month()-l.month()+12*(h.year()-l.year()),l.clone().add(b.months,"M").isAfter(h)&&--b.months,b.milliseconds=+h-+l.clone().add(b.months,"M"),b}function us(l,h){var b;return l.isValid()&&h.isValid()?(h=ls(h,l),l.isBefore(h)?b=Aa(l,h):(b=Aa(h,l),b.milliseconds=-b.milliseconds,b.months=-b.months),b):{milliseconds:0,months:0}}function No(l,h){return function(b,w){var D,G;return w===null||isNaN(+w)||(se(h,"moment()."+h+"(period, number) is deprecated. Please use moment()."+h+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),G=b,b=w,w=G),b=typeof b=="string"?+b:b,D=oi(b,w),Go(this,D,l),this}}function Go(l,h,b,w){var D=h._milliseconds,G=gt(h._days),te=gt(h._months);l.isValid()&&(w=w==null||w,te&&Ti(l,rt(l,"Month")+te*b),G&&De(l,"Date",rt(l,"Date")+G*b),D&&l._d.setTime(l._d.valueOf()+D*b),w&&c.updateOffset(l,G||te))}function qr(l,h){var b=12*(h.year()-l.year())+(h.month()-l.month()),w=l.clone().add(b,"months"),D,G;return 0>h-w?(D=l.clone().add(b-1,"months"),G=(h-w)/(w-D)):(D=l.clone().add(b+1,"months"),G=(h-w)/(D-w)),-(b+G)||0}function fo(l){var h;return l===void 0?this._locale._abbr:(h=Oi(l),h!=null&&(this._locale=h),this)}function Uo(){return this._locale}function gn(l,h){return(l%h+h)%h}function Lo(l,h,b){return 100>l&&0<=l?new Date(l+400,h,b)-126227808e5:new Date(l,h,b).valueOf()}function Bo(l,h,b){return 100>l&&0<=l?Date.UTC(l+400,h,b)-126227808e5:Date.UTC(l,h,b)}function Yr(l,h){J(0,[l,l.length],0,h)}function Fo(l,h,b,w,D){var G;return l==null?Xt(this,w,D).year:(G=dt(l,w,D),h>G&&(h=G),th.call(this,l,h,b,w,D))}function th(l,h,b,w,D){var G=Ke(l,h,b,w,D),te=xt(G.year,0,G.dayOfYear);return this.year(te.getUTCFullYear()),this.month(te.getUTCMonth()),this.date(te.getUTCDate()),this}function ih(l,h){h[6]=B(1e3*("0."+l))}function $o(l){return l}function vn(l,h,b,w){var D=Oi(),G=R().set(w,h);return D[b](G,l)}function _l(l,h,b){if(_(l)&&(h=l,l=void 0),l=l||"",h!=null)return vn(l,h,b,"month");var w=[],D;for(D=0;12>D;D++)w[D]=vn(l,D,b,"month");return w}function Ia(l,h,b,w){typeof l=="boolean"?(_(h)&&(b=h,h=void 0),h=h||""):(h=l,b=h,l=!1,_(h)&&(b=h,h=void 0),h=h||"");var D=Oi(),G=l?D._week.dow:0;if(b!=null)return vn(h,(b+G)%7,w,"day");var te=[],Te;for(Te=0;7>Te;Te++)te[Te]=vn(h,(Te+G)%7,w,"day");return te}function Da(l,h,b,w){var D=oi(h,b);return l._milliseconds+=w*D._milliseconds,l._days+=w*D._days,l._months+=w*D._months,l._bubble()}function Js(l){return 0>l?a(l):o(l)}function El(l){return 4800*l/146097}function xa(l){return 146097*l/4800}function Pi(l){return function(){return this.as(l)}}function un(l){return function(){return this.isValid()?this._data[l]:NaN}}function Ec(l,h,b,w,D){return D.relativeTime(h||1,!!b,l,w)}function yu(l,h,b){var w=oi(l).abs(),D=qi(w.as("s")),G=qi(w.as("m")),te=qi(w.as("h")),Te=qi(w.as("d")),Ne=qi(w.as("M")),Ct=qi(w.as("y")),Jt=D<=Qt.ss&&["s",D]||D<Qt.s&&["ss",D]||1>=G&&["m"]||G<Qt.m&&["mm",G]||1>=te&&["h"]||te<Qt.h&&["hh",te]||1>=Te&&["d"]||Te<Qt.d&&["dd",Te]||1>=Ne&&["M"]||Ne<Qt.M&&["MM",Ne]||1>=Ct&&["y"]||["yy",Ct];return Jt[2]=h,Jt[3]=0<+l,Jt[4]=b,Ec.apply(null,Jt)}function nh(l){return l===void 0?qi:typeof l=="function"&&(qi=l,!0)}function Rn(l){return(0<l)-(0>l)||+l}function Wr(){if(!this.isValid())return this.localeData().invalidDate();var l=Dr(this._milliseconds)/1e3,h=Dr(this._days),b=Dr(this._months),w,D,G;w=$(l/60),D=$(w/60),l%=60,w%=60,G=$(b/12),b%=12;var te=G,Te=b,Ne=h,Ct=D,Jt=w,ir=l?l.toFixed(3).replace(/\.?0+$/,""):"",Dn=this.asSeconds();if(!Dn)return"P0D";var xu=0>Dn?"-":"",mo=Rn(this._months)===Rn(Dn)?"":"-",xl=Rn(this._days)===Rn(Dn)?"":"-",Ua=Rn(this._milliseconds)===Rn(Dn)?"":"-";return xu+"P"+(te?mo+te+"Y":"")+(Te?mo+Te+"M":"")+(Ne?xl+Ne+"D":"")+(Ct||Jt||ir?"T":"")+(Ct?Ua+Ct+"H":"")+(Jt?Ua+Jt+"M":"")+(ir?Ua+ir+"S":"")}var Ma,Pa;Pa=Array.prototype.some?Array.prototype.some:function(l){for(var h=Object(this),b=h.length>>>0,w=0;w<b;w++)if(w in h&&l.call(this,h[w],w,h))return!0;return!1};var Ms=c.momentProperties=[],ea=!1,Ho={};c.suppressDeprecationWarnings=!1,c.deprecationHandler=null;var Tl=Object.keys?Object.keys:function(l){var h=[],b;for(b in l)S(l,b)&&h.push(b);return h},rh=/\d{1,2}/,Qn={},Jn={},wl=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ds=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ps={},In={},jr=/\d/,Ut=/\d\d/,Ar=/\d{3}/,hs=/\d{4}/,Rr=/[+-]?\d{6}/,je=/\d\d?/,Cl=/\d\d\d\d?/,Sl=/\d\d\d\d\d\d?/,fs=/\d{1,3}/,Oa=/\d{1,4}/,zr=/[+-]?\d{1,6}/,gu=/\d+/,ps=/[+-]?\d+/,sh=/Z|[+-]\d\d:?\d\d/gi,ms=/Z|[+-]\d\d(?::?\d\d)?/gi,ah=/[+-]?\d+(\.\d{1,3})?/,er=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Na={},ta={},pr=0,Ir=1,kl=2,dn=3,mr=4,Xr=5;J("Y",0,0,function(){var l=this.year();return 9999>=l?""+l:"+"+l}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),oe("year","y"),W("year",1),re("Y",ps),re("YY",je,Ut),re("YYYY",Oa,hs),re("YYYYY",zr,Rr),re("YYYYYY",zr,Rr),Ae(["YYYYY","YYYYYY"],pr),Ae("YYYY",function(l,h){h[pr]=l.length===2?c.parseTwoDigitYear(l):B(l)}),Ae("YY",function(l,h){h[pr]=c.parseTwoDigitYear(l)}),Ae("Y",function(l,h){h[pr]=parseInt(l,10)}),c.parseTwoDigitYear=function(l){return B(l)+(68<B(l)?1900:2e3)};var Hi=St("FullYear",!0),ut;ut=Array.prototype.indexOf?Array.prototype.indexOf:function(l){var h;for(h=0;h<this.length;++h)if(this[h]===l)return h;return-1},J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(l){return this.localeData().monthsShort(this,l)}),J("MMMM",0,0,function(l){return this.localeData().months(this,l)}),oe("month","M"),W("month",8),re("M",je),re("MM",je,Ut),re("MMM",function(l,h){return h.monthsShortRegex(l)}),re("MMMM",function(l,h){return h.monthsRegex(l)}),Ae(["M","MM"],function(l,h){h[Ir]=B(l)-1}),Ae(["MMM","MMMM"],function(l,h,b,w){var D=b._locale.monthsParse(l,w,b._strict);D==null?I(b).invalidMonth=l:h[Ir]=D});var Vo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ia=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),oe("week","w"),oe("isoWeek","W"),W("week",5),W("isoWeek",5),re("w",je),re("ww",je,Ut),re("W",je),re("WW",je,Ut),ei(["w","ww","W","WW"],function(l,h,b,w){h[w.substr(0,1)]=B(l)}),J("d",0,"do","day"),J("dd",0,0,function(l){return this.localeData().weekdaysMin(this,l)}),J("ddd",0,0,function(l){return this.localeData().weekdaysShort(this,l)}),J("dddd",0,0,function(l){return this.localeData().weekdays(this,l)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),oe("day","d"),oe("weekday","e"),oe("isoWeekday","E"),W("day",11),W("weekday",11),W("isoWeekday",11),re("d",je),re("e",je),re("E",je),re("dd",function(l,h){return h.weekdaysMinRegex(l)}),re("ddd",function(l,h){return h.weekdaysShortRegex(l)}),re("dddd",function(l,h){return h.weekdaysRegex(l)}),ei(["dd","ddd","dddd"],function(l,h,b,w){var D=b._locale.weekdaysParse(l,w,b._strict);D==null?I(b).invalidWeekday=l:h.d=D}),ei(["d","e","E"],function(l,h,b,w){h[w]=B(l)});var Al=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];J("H",["HH",2],0,"hour"),J("h",["hh",2],0,at),J("k",["kk",2],0,function(){return this.hours()||24}),J("hmm",0,0,function(){return""+at.apply(this)+ce(this.minutes(),2)}),J("hmmss",0,0,function(){return""+at.apply(this)+ce(this.minutes(),2)+ce(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+ce(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+ce(this.minutes(),2)+ce(this.seconds(),2)}),Kt("a",!0),Kt("A",!1),oe("hour","h"),W("hour",13),re("a",fi),re("A",fi),re("H",je),re("h",je),re("k",je),re("HH",je,Ut),re("hh",je,Ut),re("kk",je,Ut),re("hmm",Cl),re("hmmss",Sl),re("Hmm",Cl),re("Hmmss",Sl),Ae(["H","HH"],dn),Ae(["k","kk"],function(l,h){var b=B(l);h[dn]=b===24?0:b}),Ae(["a","A"],function(l,h,b){b._isPm=b._locale.isPM(l),b._meridiem=l}),Ae(["h","hh"],function(l,h,b){h[dn]=B(l),I(b).bigHour=!0}),Ae("hmm",function(l,h,b){var w=l.length-2;h[dn]=B(l.substr(0,w)),h[mr]=B(l.substr(w)),I(b).bigHour=!0}),Ae("hmmss",function(l,h,b){var w=l.length-4,D=l.length-2;h[dn]=B(l.substr(0,w)),h[mr]=B(l.substr(w,2)),h[Xr]=B(l.substr(D)),I(b).bigHour=!0}),Ae("Hmm",function(l,h){var b=l.length-2;h[dn]=B(l.substr(0,b)),h[mr]=B(l.substr(b))}),Ae("Hmmss",function(l,h){var b=l.length-4,w=l.length-2;h[dn]=B(l.substr(0,b)),h[mr]=B(l.substr(b,2)),h[Xr]=B(l.substr(w))});var vu=/[ap]\.?m?\.?/i,oh=St("Hours",!0),po={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:rh,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:ia,week:{dow:0,doy:6},weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekdaysShort:Al,meridiemParse:vu},ht={},yr={},lh=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bu=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_u=/Z|[+-]\d\d(?::?\d\d)?/,ys=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Kr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Os=/^\/?Date\((\-?\d+)/i,Rl=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},tr;c.createFromInputFallback=X("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(l){l._d=new Date(l._i+(l._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var gs=X("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ge.apply(null,arguments);return this.isValid()&&l.isValid()?l<this?this:l:P()}),Ga=X("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var l=Ge.apply(null,arguments);return this.isValid()&&l.isValid()?l>this?this:l:P()}),qn=["year","quarter","month","week","day","hour","minute","second","millisecond"];ho("Z",":"),ho("ZZ",""),re("Z",ms),re("ZZ",ms),Ae(["Z","ZZ"],function(l,h,b){b._useUTC=!0,b._tzm=xs(ms,l)});var ch=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Eu=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,uh=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;oi.fn=kr.prototype,oi.invalid=function(){return oi(NaN)};var Tu=No(1,"add"),wc=No(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ns=X("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(l){return l===void 0?this.localeData():this.locale(l)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Yr("gggg","weekYear"),Yr("ggggg","weekYear"),Yr("GGGG","isoWeekYear"),Yr("GGGGG","isoWeekYear"),oe("weekYear","gg"),oe("isoWeekYear","GG"),W("weekYear",1),W("isoWeekYear",1),re("G",ps),re("g",ps),re("GG",je,Ut),re("gg",je,Ut),re("GGGG",Oa,hs),re("gggg",Oa,hs),re("GGGGG",zr,Rr),re("ggggg",zr,Rr),ei(["gggg","ggggg","GGGG","GGGGG"],function(l,h,b,w){h[w.substr(0,2)]=B(l)}),ei(["gg","GG"],function(l,h,b,w){h[w]=c.parseTwoDigitYear(l)}),J("Q",0,"Qo","quarter"),oe("quarter","Q"),W("quarter",7),re("Q",jr),Ae("Q",function(l,h){h[Ir]=3*(B(l)-1)}),J("D",["DD",2],"Do","date"),oe("date","D"),W("date",9),re("D",je),re("DD",je,Ut),re("Do",function(l,h){return l?h._dayOfMonthOrdinalParse||h._ordinalParse:h._dayOfMonthOrdinalParseLenient}),Ae(["D","DD"],kl),Ae("Do",function(l,h){h[kl]=B(l.match(je)[0])});var gr=St("Date",!0);J("DDD",["DDDD",3],"DDDo","dayOfYear"),oe("dayOfYear","DDD"),W("dayOfYear",4),re("DDD",fs),re("DDDD",Ar),Ae(["DDD","DDDD"],function(l,h,b){b._dayOfYear=B(l)}),J("m",["mm",2],0,"minute"),oe("minute","m"),W("minute",14),re("m",je),re("mm",je,Ut),Ae(["m","mm"],mr);var wu=St("Minutes",!1);J("s",["ss",2],0,"second"),oe("second","s"),W("second",15),re("s",je),re("ss",je,Ut),Ae(["s","ss"],Xr);var Cu=St("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),oe("millisecond","ms"),W("millisecond",16),re("S",fs,jr),re("SS",fs,Ut),re("SSS",fs,Ar);var Vi;for(Vi="SSSS";9>=Vi.length;Vi+="S")re(Vi,gu);for(Vi="S";9>=Vi.length;Vi+="S")Ae(Vi,ih);var dh=St("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var ae=M.prototype;ae.add=Tu,ae.calendar=function(l,h){var b=l||Ge(),w=ls(b,this).startOf("day"),D=c.calendarFormat(this,w)||"sameElse",G=h&&(ue(h[D])?h[D].call(this,b):h[D]);return this.format(G||this.localeData().calendar(D,this,Ge(b)))},ae.clone=function(){return new M(this)},ae.diff=function(l,h,b){var w,D,G;return this.isValid()?(w=ls(l,this),w.isValid()?(D=6e4*(w.utcOffset()-this.utcOffset()),h=Q(h),G=h==="year"?qr(this,w)/12:h==="month"?qr(this,w):h==="quarter"?qr(this,w)/3:h==="second"?(this-w)/1e3:h==="minute"?(this-w)/6e4:h==="hour"?(this-w)/36e5:h==="day"?(this-w-D)/864e5:h==="week"?(this-w-D)/6048e5:this-w,b?G:$(G)):NaN):NaN},ae.endOf=function(l){var h;if(l=Q(l),l===void 0||l==="millisecond"||!this.isValid())return this;var b=this._isUTC?Bo:Lo;return l==="year"?h=b(this.year()+1,0,1)-1:l==="quarter"?h=b(this.year(),this.month()-this.month()%3+3,1)-1:l==="month"?h=b(this.year(),this.month()+1,1)-1:l==="week"?h=b(this.year(),this.month(),this.date()-this.weekday()+7)-1:l==="isoWeek"?h=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1:l==="day"||l==="date"?h=b(this.year(),this.month(),this.date()+1)-1:l==="hour"?(h=this._d.valueOf(),h+=36e5-gn(h+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1):l==="minute"?(h=this._d.valueOf(),h+=6e4-gn(h,6e4)-1):l==="second"&&(h=this._d.valueOf(),h+=1e3-gn(h,1e3)-1),this._d.setTime(h),c.updateOffset(this,!0),this},ae.format=function(l){l||(l=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var h=fe(this,l);return this.localeData().postformat(h)},ae.from=function(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ge(l).isValid())?oi({to:this,from:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()},ae.fromNow=function(l){return this.from(Ge(),l)},ae.to=function(l,h){return this.isValid()&&(q(l)&&l.isValid()||Ge(l).isValid())?oi({from:this,to:l}).locale(this.locale()).humanize(!h):this.localeData().invalidDate()},ae.toNow=function(l){return this.to(Ge(),l)},ae.get=function(l){return l=Q(l),ue(this[l])?this[l]():this},ae.invalidAt=function(){return I(this).overflow},ae.isAfter=function(l,h){var b=q(l)?l:Ge(l);return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(h).valueOf())},ae.isBefore=function(l,h){var b=q(l)?l:Ge(l);return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()<b.valueOf():this.clone().endOf(h).valueOf()<b.valueOf())},ae.isBetween=function(l,h,b,w){var D=q(l)?l:Ge(l),G=q(h)?h:Ge(h);return!!(this.isValid()&&D.isValid()&&G.isValid())&&(w=w||"()",(w[0]==="("?this.isAfter(D,b):!this.isBefore(D,b))&&(w[1]===")"?this.isBefore(G,b):!this.isAfter(G,b)))},ae.isSame=function(l,h){var b=q(l)?l:Ge(l),w;return!!(this.isValid()&&b.isValid())&&(h=Q(h)||"millisecond",h==="millisecond"?this.valueOf()===b.valueOf():(w=b.valueOf(),this.clone().startOf(h).valueOf()<=w&&w<=this.clone().endOf(h).valueOf()))},ae.isSameOrAfter=function(l,h){return this.isSame(l,h)||this.isAfter(l,h)},ae.isSameOrBefore=function(l,h){return this.isSame(l,h)||this.isBefore(l,h)},ae.isValid=function(){return F(this)},ae.lang=Ns,ae.locale=fo,ae.localeData=Uo,ae.max=Ga,ae.min=gs,ae.parsingFlags=function(){return k({},I(this))},ae.set=qe,ae.startOf=function(l){var h;if(l=Q(l),l===void 0||l==="millisecond"||!this.isValid())return this;var b=this._isUTC?Bo:Lo;return l==="year"?h=b(this.year(),0,1):l==="quarter"?h=b(this.year(),this.month()-this.month()%3,1):l==="month"?h=b(this.year(),this.month(),1):l==="week"?h=b(this.year(),this.month(),this.date()-this.weekday()):l==="isoWeek"?h=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)):l==="day"||l==="date"?h=b(this.year(),this.month(),this.date()):l==="hour"?(h=this._d.valueOf(),h-=gn(h+(this._isUTC?0:6e4*this.utcOffset()),36e5)):l==="minute"?(h=this._d.valueOf(),h-=gn(h,6e4)):l==="second"&&(h=this._d.valueOf(),h-=gn(h,1e3)),this._d.setTime(h),c.updateOffset(this,!0),this},ae.subtract=wc,ae.toArray=function(){var l=this;return[l.year(),l.month(),l.date(),l.hour(),l.minute(),l.second(),l.millisecond()]},ae.toObject=function(){var l=this;return{years:l.year(),months:l.month(),date:l.date(),hours:l.hours(),minutes:l.minutes(),seconds:l.seconds(),milliseconds:l.milliseconds()}},ae.toDate=function(){return new Date(this.valueOf())},ae.toISOString=function(l){if(!this.isValid())return null;var h=l!==!0,b=h?this.clone().utc():this;return 0>b.year()||9999<b.year()?fe(b,h?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ue(Date.prototype.toISOString)?h?this.toDate().toISOString():new Date(this.valueOf()+1e3*(60*this.utcOffset())).toISOString().replace("Z",fe(b,"Z")):fe(b,h?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ae.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var l="moment",h="";this.isLocal()||(l=this.utcOffset()===0?"moment.utc":"moment.parseZone",h="Z");var b="["+l+'("]',w=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",D=h+'[")]';return this.format(b+w+"-MM-DD[T]HH:mm:ss.SSS"+D)},ae.toJSON=function(){return this.isValid()?this.toISOString():null},ae.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ae.unix=function(){return a(this.valueOf()/1e3)},ae.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ae.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ae.year=Hi,ae.isLeapYear=function(){return It(this.year())},ae.weekYear=function(l){return Fo.call(this,l,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ae.isoWeekYear=function(l){return Fo.call(this,l,this.isoWeek(),this.isoWeekday(),1,4)},ae.quarter=ae.quarters=function(l){return l==null?o((this.month()+1)/3):this.month(3*(l-1)+this.month()%3)},ae.month=wi,ae.daysInMonth=function(){return ot(this.year(),this.month())},ae.week=ae.weeks=function(l){var h=this.localeData().week(this);return l==null?h:this.add(7*(l-h),"d")},ae.isoWeek=ae.isoWeeks=function(l){var h=Xt(this,1,4).week;return l==null?h:this.add(7*(l-h),"d")},ae.weeksInYear=function(){var l=this.localeData()._week;return dt(this.year(),l.dow,l.doy)},ae.isoWeeksInYear=function(){return dt(this.year(),1,4)},ae.date=gr,ae.day=ae.days=function(l){if(!this.isValid())return l==null?NaN:this;var h=this._isUTC?this._d.getUTCDay():this._d.getDay();return l==null?h:(l=Ot(l,this.localeData()),this.add(l-h,"d"))},ae.weekday=function(l){if(!this.isValid())return l==null?NaN:this;var h=(this.day()+7-this.localeData()._week.dow)%7;return l==null?h:this.add(l-h,"d")},ae.isoWeekday=function(l){if(!this.isValid())return l==null?NaN:this;if(l!=null){var h=ge(l,this.localeData());return this.day(this.day()%7?h:h-7)}return this.day()||7},ae.dayOfYear=function(l){var h=e((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return l==null?h:this.add(l-h,"d")},ae.hour=ae.hours=oh,ae.minute=ae.minutes=wu,ae.second=ae.seconds=Cu,ae.millisecond=ae.milliseconds=dh,ae.utcOffset=function(l,h,b){var w=this._offset||0,D;if(!this.isValid())return l==null?NaN:this;if(l!=null){if(typeof l!="string")16>r(l)&&!b&&(l*=60);else if(l=xs(ms,l),l===null)return this;return!this._isUTC&&h&&(D=cs(this)),this._offset=l,this._isUTC=!0,D!=null&&this.add(D,"m"),w!==l&&(!h||this._changeInProgress?Go(this,oi(l-w,"m"),1,!1):!this._changeInProgress&&(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?w:cs(this)},ae.utc=function(l){return this.utcOffset(0,l)},ae.local=function(l){return this._isUTC&&(this.utcOffset(0,l),this._isUTC=!1,l&&this.subtract(cs(this),"m")),this},ae.parseZone=function(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var l=xs(sh,this._i);l==null?this.utcOffset(0,!0):this.utcOffset(l)}return this},ae.hasAlignedHourOffset=function(l){return!!this.isValid()&&(l=l?Ge(l).utcOffset():0,(this.utcOffset()-l)%60==0)},ae.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ae.isLocal=function(){return!!this.isValid()&&!this._isUTC},ae.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ae.isUtc=bt,ae.isUTC=bt,ae.zoneAbbr=function(){return this._isUTC?"UTC":""},ae.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ae.dates=X("dates accessor is deprecated. Use date instead.",gr),ae.months=X("months accessor is deprecated. Use month instead",wi),ae.years=X("years accessor is deprecated. Use year instead",Hi),ae.zone=X("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(l,h){return l==null?-this.utcOffset():(typeof l!="string"&&(l=-l),this.utcOffset(l,h),this)}),ae.isDSTShifted=X("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mu);var ze=de.prototype;ze.calendar=function(l,h,b){var w=this._calendar[l]||this._calendar.sameElse;return ue(w)?w.call(h,b):w},ze.longDateFormat=function(l){var h=this._longDateFormat[l],b=this._longDateFormat[l.toUpperCase()];return h||!b?h:(this._longDateFormat[l]=b.replace(/MMMM|MM|DD|dddd/g,function(w){return w.slice(1)}),this._longDateFormat[l])},ze.invalidDate=function(){return this._invalidDate},ze.ordinal=function(l){return this._ordinal.replace("%d",l)},ze.preparse=$o,ze.postformat=$o,ze.relativeTime=function(l,h,b,w){var D=this._relativeTime[b];return ue(D)?D(l,h,b,w):D.replace(/%d/i,l)},ze.pastFuture=function(l,h){var b=this._relativeTime[0<l?"future":"past"];return ue(b)?b(h):b.replace(/%s/i,h)},ze.set=ve,ze.months=function(l,h){return l?d(this._months)?this._months[l.month()]:this._months[(this._months.isFormat||Vo).test(h)?"format":"standalone"][l.month()]:d(this._months)?this._months:this._months.standalone},ze.monthsShort=function(l,h){return l?d(this._monthsShort)?this._monthsShort[l.month()]:this._monthsShort[Vo.test(h)?"format":"standalone"][l.month()]:d(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ze.monthsParse=yi,ze.monthsRegex=function(l){return this._monthsParseExact?(S(this,"_monthsRegex")||hi.call(this),l?this._monthsStrictRegex:this._monthsRegex):(S(this,"_monthsRegex")||(this._monthsRegex=er),this._monthsStrictRegex&&l?this._monthsStrictRegex:this._monthsRegex)},ze.monthsShortRegex=function(l){return this._monthsParseExact?(S(this,"_monthsRegex")||hi.call(this),l?this._monthsShortStrictRegex:this._monthsShortRegex):(S(this,"_monthsShortRegex")||(this._monthsShortRegex=er),this._monthsShortStrictRegex&&l?this._monthsShortStrictRegex:this._monthsShortRegex)},ze.week=function(l){return Xt(l,this._week.dow,this._week.doy).week},ze.firstDayOfYear=function(){return this._week.doy},ze.firstDayOfWeek=function(){return this._week.dow},ze.weekdays=function(l,h){var b=d(this._weekdays)?this._weekdays:this._weekdays[l&&l!==!0&&this._weekdays.isFormat.test(h)?"format":"standalone"];return l===!0?Oe(b,this._week.dow):l?b[l.day()]:b},ze.weekdaysMin=function(l){return l===!0?Oe(this._weekdaysMin,this._week.dow):l?this._weekdaysMin[l.day()]:this._weekdaysMin},ze.weekdaysShort=function(l){return l===!0?Oe(this._weekdaysShort,this._week.dow):l?this._weekdaysShort[l.day()]:this._weekdaysShort},ze.weekdaysParse=ct,ze.weekdaysRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysStrictRegex:this._weekdaysRegex):(S(this,"_weekdaysRegex")||(this._weekdaysRegex=er),this._weekdaysStrictRegex&&l?this._weekdaysStrictRegex:this._weekdaysRegex)},ze.weekdaysShortRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(S(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=er),this._weekdaysShortStrictRegex&&l?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ze.weekdaysMinRegex=function(l){return this._weekdaysParseExact?(S(this,"_weekdaysRegex")||it.call(this),l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(S(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=er),this._weekdaysMinStrictRegex&&l?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ze.isPM=function(l){return(l+"").toLowerCase().charAt(0)==="p"},ze.meridiem=function(l,h,b){return 11<l?b?"pm":"PM":b?"am":"AM"},Zi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(l){var h=l%10,b=B(l%100/10)===1?"th":h==1?"st":h==2?"nd":h==3?"rd":"th";return l+b}}),c.lang=X("moment.lang is deprecated. Use moment.locale instead.",Zi),c.langData=X("moment.langData is deprecated. Use moment.localeData instead.",Oi);var Ri=r,qo=Pi("ms"),Su=Pi("s"),ku=Pi("m"),Cc=Pi("h"),Il=Pi("d"),Au=Pi("w"),Dl=Pi("M"),Zr=Pi("Q"),Ru=Pi("y"),Sc=un("milliseconds"),kc=un("seconds"),Iu=un("minutes"),Du=un("hours"),Ac=un("days"),hh=un("months"),fh=un("years"),qi=e,Qt={ss:44,s:45,m:45,h:22,d:26,M:11},Dr=r,Pe=kr.prototype;return Pe.isValid=function(){return this._isValid},Pe.abs=function(){var l=this._data;return this._milliseconds=Ri(this._milliseconds),this._days=Ri(this._days),this._months=Ri(this._months),l.milliseconds=Ri(l.milliseconds),l.seconds=Ri(l.seconds),l.minutes=Ri(l.minutes),l.hours=Ri(l.hours),l.months=Ri(l.months),l.years=Ri(l.years),this},Pe.add=function(l,h){return Da(this,l,h,1)},Pe.subtract=function(l,h){return Da(this,l,h,-1)},Pe.as=function(l){if(!this.isValid())return NaN;var h=this._milliseconds,b,w;if(l=Q(l),l==="month"||l==="quarter"||l==="year")switch(b=this._days+h/864e5,w=this._months+El(b),l){case"month":return w;case"quarter":return w/3;case"year":return w/12}else switch(b=this._days+e(xa(this._months)),l){case"week":return b/7+h/6048e5;case"day":return b+h/864e5;case"hour":return 24*b+h/36e5;case"minute":return 1440*b+h/6e4;case"second":return 86400*b+h/1e3;case"millisecond":return a(864e5*b)+h;default:throw new Error("Unknown unit "+l)}},Pe.asMilliseconds=qo,Pe.asSeconds=Su,Pe.asMinutes=ku,Pe.asHours=Cc,Pe.asDays=Il,Pe.asWeeks=Au,Pe.asMonths=Dl,Pe.asQuarters=Zr,Pe.asYears=Ru,Pe.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*B(this._months/12):NaN},Pe._bubble=function(){var l=this._milliseconds,h=this._days,b=this._months,w=this._data,D,G,te,Te,Ne;return 0<=l&&0<=h&&0<=b||0>=l&&0>=h&&0>=b||(l+=864e5*Js(xa(b)+h),h=0,b=0),w.milliseconds=l%1e3,D=$(l/1e3),w.seconds=D%60,G=$(D/60),w.minutes=G%60,te=$(G/60),w.hours=te%24,h+=$(te/24),Ne=$(El(h)),b+=Ne,h-=Js(xa(Ne)),Te=$(b/12),b%=12,w.days=h,w.months=b,w.years=Te,this},Pe.clone=function(){return oi(this)},Pe.get=function(l){return l=Q(l),this.isValid()?this[l+"s"]():NaN},Pe.milliseconds=Sc,Pe.seconds=kc,Pe.minutes=Iu,Pe.hours=Du,Pe.days=Ac,Pe.weeks=function(){return $(this.days()/7)},Pe.months=hh,Pe.years=fh,Pe.humanize=function(l){if(!this.isValid())return this.localeData().invalidDate();var h=this.localeData(),b=yu(this,!l,h);return l&&(b=h.pastFuture(+this,b)),h.postformat(b)},Pe.toISOString=Wr,Pe.toString=Wr,Pe.toJSON=Wr,Pe.locale=fo,Pe.localeData=Uo,Pe.toIsoString=X("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Wr),Pe.lang=Ns,J("X",0,0,"unix"),J("x",0,0,"valueOf"),re("x",ps),re("X",ah),Ae("X",function(l,h,b){b._d=new Date(1e3*parseFloat(l,10))}),Ae("x",function(l,h,b){b._d=new Date(B(l))}),c.version="2.24.0",function(l){Ma=l}(Ge),c.fn=ae,c.min=function(){var l=[].slice.call(arguments,0);return os("isBefore",l)},c.max=function(){var l=[].slice.call(arguments,0);return os("isAfter",l)},c.now=function(){return Date.now?Date.now():+new Date},c.utc=R,c.unix=function(l){return Ge(1e3*l)},c.months=function(l,h){return _l(l,h,"months")},c.isDate=E,c.locale=Zi,c.invalid=P,c.duration=oi,c.isMoment=q,c.weekdays=function(l,h,b){return Ia(l,h,b,"weekdays")},c.parseZone=function(){return Ge.apply(null,arguments).parseZone()},c.localeData=Oi,c.isDuration=xe,c.monthsShort=function(l,h){return _l(l,h,"monthsShort")},c.weekdaysMin=function(l,h,b){return Ia(l,h,b,"weekdaysMin")},c.defineLocale=ka,c.updateLocale=function(l,h){if(h!=null){var b=po,w,D;D=dr(l),D!=null&&(b=D._config),h=_e(b,h),w=new de(h),w.parentLocale=ht[l],ht[l]=w,Zi(l)}else ht[l]!=null&&(ht[l].parentLocale==null?ht[l]!=null&&delete ht[l]:ht[l]=ht[l].parentLocale);return ht[l]},c.locales=Xd,c.weekdaysShort=function(l,h,b){return Ia(l,h,b,"weekdaysShort")},c.normalizeUnits=Q,c.relativeTimeRounding=nh,c.relativeTimeThreshold=function(l,h){return Qt[l]!==void 0&&(h===void 0?Qt[l]:(Qt[l]=h,l==="s"&&(Qt.ss=h-1),!0))},c.calendarFormat=function(l,h){var b=l.diff(h,"days",!0);return-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse"},c.prototype=ae,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},c})});const NQ={name:"PrimaryButton",props:{enabled:{type:Boolean,required:!1,default:!0}},computed:{classObject(){return{"o-primary-btn--disabled":!this.enabled}}}};var GQ=function(){var e=this,i=e._self._c;return i("button",e._g({staticClass:"o-primary-btn",class:e.classObject},e.$listeners),[e._t("default")],2)},UQ=[],LQ=K(NQ,GQ,UQ,!1,null,null);const yt=LQ.exports,BQ={name:"PerkPointLabel",components:{PrimaryButton:yt},data(){return{pp:0,treeLayout:0,physicsEnabled:!1,physicsOverride:!1}},computed:{layoutText(){return PerkLayouts[this.treeLayout].buttonText},physicsText(){return`${this.physicsOverride??this.physicsEnabled?"Enabled":"Disabled"}${this.physicsOverride===void 0?"":" (fixed)"}`}},created(){this.treeLayout=player.options.perkLayout,this.physicsOverride=PerkLayouts[this.treeLayout].forcePhysics},methods:{update(){this.pp=Math.floor(Currency.perkPoints.value),this.physicsEnabled=player.options.perkPhysicsEnabled},togglePhysics(){this.physicsOverride===void 0&&(player.options.perkPhysicsEnabled=!player.options.perkPhysicsEnabled,PerkNetwork.setPhysics(player.options.perkPhysicsEnabled))},physicsClassObject(){return{"o-primary-btn c-button-physics":!0,"o-primary-btn--disabled":this.physicsOverride!==void 0}},centerTree(){PerkNetwork.resetPosition(!0)},straightenEdges(){PerkNetwork.setEdgeCurve(!1),PerkNetwork.setEdgeCurve(!0)},cycleLayout(){var e,i;let t=(player.options.perkLayout+1)%PerkLayouts.length;for(;!(((i=(e=PerkLayouts[t]).isUnlocked)==null?void 0:i.call(e))??!0);)t=(t+1)%PerkLayouts.length;player.options.perkLayout=t,this.treeLayout=t,this.physicsOverride=PerkLayouts[this.treeLayout].forcePhysics,PerkNetwork.currentLayout=PerkLayouts[this.treeLayout],PerkNetwork.setPhysics(player.options.perkPhysicsEnabled),PerkNetwork.moveToDefaultLayoutPositions(this.treeLayout)}}};var FQ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-perk-tab__header"},[e._v(" You have "),i("span",{staticClass:"c-perk-tab__perk-points"},[e._v(e._s(e.format(e.pp,2)))]),e._v(" "+e._s(e.pluralize("Perk Point",e.pp))+". "),i("br"),e._v(" Perk choices are permanent and cannot be respecced. "),i("br"),e._v(" Diamond-shaped perks also give Automator Points. "),i("br"),i("div",{staticClass:"perk-settings"},[i("PrimaryButton",{staticClass:"o-primary-btn c-button-perk-layout",on:{click:e.cycleLayout}},[e._v(" Perk Layout: "+e._s(e.layoutText)+" ")]),i("PrimaryButton",{class:e.physicsClassObject(),on:{click:e.togglePhysics}},[e._v(" Physics: "+e._s(e.physicsText)+" ")]),i("br"),i("PrimaryButton",{staticClass:"o-primary-btn",on:{click:e.centerTree}},[e._v(" Center Tree on START ")]),i("PrimaryButton",{staticClass:"o-primary-btn",on:{click:e.straightenEdges}},[e._v(" Straighten Edges ")])],1)])},$Q=[],HQ=K(BQ,FQ,$Q,!1,null,"6eb18d01");const VQ=HQ.exports,qQ={name:"PerksTab",components:{PerkPointLabel:VQ},computed:{showHintText(){return ui.view.shiftDown||player.options.showHintText.perks}},watch:{showHintText(t){ui.view.theme==="S9"?Nr.setLabelVisibility(!1):Nr.setLabelVisibility(t)}},created(){EventHub.ui.on(GAME_EVENT.PERK_BOUGHT,()=>Nr.updatePerkColor())},mounted(){Nr.initialStabilization=!1,Nr.currentLayout=Wg[player.options.perkLayout],Nr.initializeIfNeeded(),ui.view.theme==="S9"?Nr.setLabelVisibility(!1):Nr.setLabelVisibility(ui.view.shiftDown||player.options.showHintText.perks),Nr.updatePerkColor(),Nr.updatePerkSize(),this.$refs.tab.appendChild(Nr.container),Nr.moveToDefaultLayoutPositions(player.options.perkLayout)}},YQ=()=>({[Et.ANTIMATTER]:{primary:"#22aa48",secondary:"#156a2d"},[Et.INFINITY]:{primary:"#b67f33",secondary:"#7b5623"},[Et.ETERNITY]:{primary:"#b241e3",secondary:"#8b1cba"},[Et.DILATION]:{primary:"#64dd17",secondary:"#449810"},[Et.REALITY]:{primary:"#0b600e",secondary:"#063207"},[Et.AUTOMATION]:{primary:"#ff0000",secondary:"#b30000"},[Et.ACHIEVEMENT]:{primary:"#fdd835",secondary:"#e3ba02"}});function W_(t,e,i=1){return t.matrixTransform(e*i,0,0,e)}function Sp(t){const e=t%400,i=Math.floor(t/400);return new Vector(5*(e-200),5*(i-200))}const Wg=[{buttonText:"Default Untangled",position:t=>Sp(t.layoutPosList[0])},{buttonText:"Random Positions",position:()=>new Vector(2e3*Math.random()-1e3,1200*Math.random()-600)},{buttonText:"Android Layout",position:t=>W_(Sp(t.layoutPosList[1]),20,1.5),centerOffset:new Vector(0,120),forcePhysics:!1,straightEdges:!0},{buttonText:"Square",position:t=>W_(Sp(t.layoutPosList[2]),27.5),centerOffset:new Vector(0,0),forcePhysics:!1,straightEdges:!0},{buttonText:"Horizontal Grid",position:t=>W_(Sp(t.layoutPosList[3]),32.5),centerOffset:new Vector(-60,0),forcePhysics:!1,straightEdges:!0},{buttonText:"Distance from START",position:t=>W_(Sp(t.layoutPosList[4]),17.5),centerOffset:new Vector(0,0),forcePhysics:!1,straightEdges:!0},{buttonText:"Blob",position:t=>Sp(t.layoutPosList[5]),centerOffset:new Vector(50,0),forcePhysics:!1,straightEdges:!0,isUnlocked:()=>Themes.available().map(t=>t.name).includes("S11")}],Nr={container:void 0,network:void 0,nodes:void 0,minScale:.2,maxScale:4,lastPerkNotation:"",pulseTimer:0,initialStabilization:!1,currentLayout:{},initializeIfNeeded(){const t=Notations.current.name;this.container!==void 0&&t===this.lastPerkNotation||(this.lastPerkNotation=t,this.makeNetwork(),this.network.on("click",e=>{const i=e.nodes[0];isFinite(i)&&(Perks.find(i).purchase(),this.updatePerkColor(),this.updatePerkSize())}),this.network.on("dragStart",()=>{const e=this.container.getElementsByClassName("vis-tooltip")[0];e!==void 0&&(e.style.visibility="hidden"),this.initialStabilization||(this.setPhysics(player.options.perkPhysicsEnabled),this.initialStabilization=!0)}),this.network.on("dragging",()=>{SecretAchievement(45).tryUnlock(),Theme.current().name==="S4"&&Nr.updatePerkSize()}),this.network.on("zoom",()=>{const e=this.network.getScale(),i=Math.clamp(e,this.minScale,this.maxScale);e!==i&&this.network.moveTo({scale:i})}),this.network.on("stabilizationIterationsDone",()=>{this.initialStabilization||(this.resetPosition(!1),this.initialStabilization=!0),this.setPhysics(player.options.perkPhysicsEnabled)}))},makeNetwork(){function t(c){const d=document.createElement("div");return d.innerHTML=c,d}const e=c=>Pelle.isDoomed&&Pelle.uselessPerks.includes(c.id),i=c=>Wg[player.options.perkLayout].position(c);this.nodes=new vd(Perks.all.map(c=>({id:c.id,label:c.config.label,shape:c.config.automatorPoints?"diamond":"dot",title:e(c)?t(`<span style='text-decoration: line-through;'>${c.config.description}</span>`):`${c.config.description} ${c.config.automatorPoints&&!e(c)?`(+${formatInt(c.config.automatorPoints)} AP)`:""}`,x:i(c.config).x,y:i(c.config).y})));const n=[];for(const c of Perks.all)for(const d of c.connectedPerks){const p=Math.min(c.id,d.id),m=Math.max(c.id,d.id);n.find(y=>y.from===p&&y.to===m)||n.push({from:p,to:m})}const r={nodes:this.nodes,edges:n},s={interaction:{hover:!0,hoverConnectedEdges:!1,selectConnectedEdges:!1,tooltipDelay:0},nodes:{shape:"dot",size:18,font:{size:0},borderWidth:2,shadow:!0},edges:{width:4,shadow:!0,hoverWidth:c=>c,selectionWidth:c=>c,color:{inherit:"both"},hidden:ui.view.theme==="S9"}},a=document.createElement("div");a.className="c-wide-canvas-element vis-network c-perk-network",a.tabIndex=900;const o=document.createElement("canvas");o.className="c-perk-network__canvas",a.appendChild(o),this.container=a,this.network=new _t(a,r,s)},setPhysics(t){const e=this.currentLayout.forcePhysics===void 0?t:this.currentLayout.forcePhysics;this.network.setOptions({physics:{enabled:e}})},setEdgeCurve(t){const e=this.currentLayout.straightEdges===void 0?t:!this.currentLayout.straightEdges;this.network.setOptions({edges:{smooth:{enabled:e}}})},moveToDefaultLayoutPositions(t){this.setPhysics(!1),this.setEdgeCurve(!1);for(const e of Object.keys(Nr.network.getPositions())){const i=Number(e),n=Perks.all.find(s=>s.id===i).config,r=Wg[t].position(n);this.network.moveNode(i,r.x,r.y)}this.initialStabilization=!1,this.resetPosition(!1),this.setEdgeCurve(!0)},forceNetworkRemake(){this.container=void 0,this.initializeIfNeeded(),this.setPhysics(!0)},resetPosition(t){const e=t?Nr.network.body.nodes[GameDatabase.reality.perks.firstPerk.id]:Wg[player.options.perkLayout].centerOffset??new Vector(0,0);this.network.moveTo({position:{x:e.x,y:e.y},scale:.4,offset:{x:0,y:0}})},setLabelVisibility(t){const e={nodes:{font:{size:t?20:0,color:Theme.current().isDark()?"#DDDDDD":"#222222"}}};this.network.setOptions(e)},updatePerkColor(){this.perkColorList=this.perkColorList??YQ();const t=this.perkColorList;function e(n){const r=t[n.config.family],s=r.primary,a=r.secondary;if(Pelle.isDoomed&&Pelle.uselessPerks.includes(n.id)){const _="#00bcd4",E="crimson",C=a;return{background:_,border:C,hover:{background:E,border:C},highlight:{background:_,border:C}}}const c=n.canBeBought,d=n.isBought;let p;c?Theme.current().isDark()?p="#EEEEEE":p="#111111":d?p=s:Theme.current().isDark()?p="#333333":p="#CCCCCC";const m=c||d?s:"#656565",y=a;return{background:p,border:y,hover:{background:m,border:y},highlight:{background:p,border:y}}}const i=Perks.all.map(n=>({id:n.id,color:e(n)}));this.nodes.update(i)},updatePerkSize(){function t(i){Nr.pulseTimer+=.1;const n=Theme.current().name==="S4"?10*Math.sin(5*Nr.pulseTimer+.1*i._config.id):0;return i._config.label==="START"?35+n:i.isBought?25+n:i.canBeBought?20+n:12+n}const e=Perks.all.map(i=>({id:i.id,size:t(i)}));this.nodes.update(e)}};var WQ=function(){var e=this,i=e._self._c;return i("div",{ref:"tab",staticClass:"c-perk-tab"},[i("PerkPointLabel")],1)},jQ=[],zQ=K(qQ,WQ,jQ,!1,null,"e432efd9");const QL=zQ.exports,XQ=Object.freeze(Object.defineProperty({__proto__:null,PerkLayouts:Wg,PerkNetwork:Nr,default:QL},Symbol.toStringTag,{value:"Module"}));class aE{constructor(e){aE.checkInputs(e),this.id=e.id,this.bitmaskIndex=e.bitmaskIndex,this.isGenerated=e.isGenerated,this.glyphTypes=e.glyphTypes,this._singleDesc=e.singleDesc,this._totalDesc=e.totalDesc??e.singleDesc,this._genericDesc=e.genericDesc??e.singleDesc.replace("{value}","x"),this._shortDesc=e.shortDesc,this.effect=e.effect,this.formatEffect=e.formatEffect??(i=>format(i,3,3)),this.formatSingleEffect=e.formatSingleEffect||this.formatEffect,this.combine=aE.setupCombine(e),this.conversion=e.conversion,this.formatSecondaryEffect=e.formatSecondaryEffect||(i=>format(i,3,3)),this.formatSingleSecondaryEffect=e.formatSingleSecondaryEffect||this.formatSecondaryEffect,this.alteredColor=e.alteredColor,this.alterationType=e.alterationType,this._biggerIsBetter=void 0,this._enabledInDoomed=e.enabledInDoomed??!1}get biggerIsBetter(){return this._biggerIsBetter===void 0&&(this._biggerIsBetter=this.checkBiggerIsBetter()),this._biggerIsBetter}get singleDesc(){const e=this._singleDesc;return typeof e=="function"?e():e}get totalDesc(){const e=this._totalDesc;return typeof e=="function"?e():e}get genericDesc(){const e=this._genericDesc;return typeof e=="function"?e():e}get shortDesc(){const e=this._shortDesc;return typeof e=="function"?e():e}get isDisabledByDoomed(){return Pelle.isDoomed&&!this._enabledInDoomed}compareValues(e,i){const n=Decimal.compare(e,i);return this.biggerIsBetter?n:-n}checkBiggerIsBetter(){const e=new Decimal(this.effect(1,1.01));return new Decimal(this.effect(100,2)).gt(e)}static checkInputs(e){const i=["id","bitmaskIndex","glyphTypes","singleDesc","totalDesc","genericDesc","effect","formatEffect","formatSingleEffect","combine","softcap","conversion","formatSecondaryEffect","formatSingleSecondaryEffect","alteredColor","alterationType","isGenerated","shortDesc","enabledInDoomed"],n=Object.keys(e).find(a=>!i.includes(a));if(n!==void 0)throw new Error(`Glyph effect "${e.id}" includes unrecognized field "${n}"`);const r=e.glyphTypes.find(a=>!GLYPH_TYPES.includes(a));if(r!==void 0)throw new Error(`Glyph effect "${e.id}" references unknown glyphType "${r}"`);const s=e.combine([]);if(typeof s!="number"&&!(s instanceof Decimal)){if(s.value===void 0||s.capped===void 0)throw new Error(`The combine function for Glyph effect "${e.id}" has invalid return type`);if(e.softcap)throw new Error(`The combine function for Glyph effect "${e.id}" gives capped information, but there's also a softcap method`)}}static setupCombine(e){let i=e.combine;const n=e.softcap,r=i([]);if(typeof r=="number")return n===void 0?s=>({value:i(s),capped:!1}):s=>{const a=i(s),o=n(a);return{value:o,capped:a!==o}};if(r instanceof Decimal){if(n===void 0)return a=>({value:i(a),capped:!1});const s=r.value instanceof Decimal?(a,o)=>a.neq(o):(a,o)=>a!==o;return i=a=>{const o=i(a),c=n(o.value);return{value:c,capped:o.capped||s(o.value,c)}}}return i}}const KQ=[0,9e3,15e3,25e3],uT=mapGameDataToObject(no.reality.glyphEffects,t=>new aE(t));function JL(t){return uT.all.filter(e=>e.glyphTypes.includes(t))}function ZQ(t){return t.reduce((e,i)=>e+(1<<uT[i].bitmaskIndex),0)}function eB(t){return orderedEffectList.map(e=>uT[e]).filter(e=>(t&1<<e.bitmaskIndex)!==0)}function QQ(t){return eB(t).map(e=>e.id)}class JQ{constructor(e){if(this.id=e.id,this.effects=JL(e.id),this.primaryEffect=e.primaryEffect,this._isUnlocked=e.isUnlocked,this.alchemyResource=e.alchemyResource,this.hasRarity=e.hasRarity,!GLYPH_TYPES.includes(this.id))throw new Error(`Id ${this.id} not found in GLYPH_TYPES`)}get isUnlocked(){var e;return((e=this._isUnlocked)==null?void 0:e.call(this))??!0}}const eJ=mapGameDataToObject(no.reality.glyphTypes,t=>new JQ(t)),gA={...eJ,random(t,e=[]){const i=generatedTypes.filter(n=>(EffarigUnlock.reality.isUnlocked||n!=="effarig")&&!e.includes(n));return i[Math.floor(t.uniform()*i.length)]},get list(){return GLYPH_TYPES.map(t=>gA[t])},get locked(){return this.list.filter(t=>!t.isUnlocked)}},tJ={name:"AutomatorButton"};var iJ=function(){var e=this,i=e._self._c;return i("button",{staticClass:"c-automator__button l-automator__button fas",on:{click:e.emitClick}})},nJ=[],rJ=K(tJ,iJ,nJ,!1,null,"365844e0");const tB=rJ.exports,sJ={name:"AutomatorDataTransferSingleEntry",props:{script:{type:Object,required:!0}},data(){return{presets:[],constants:[],hidePresets:!0,hideConstants:!0}},computed:{presetData:()=>player.timestudy.presets,constantData:()=>player.reality.automator.constants,hasPresets(){var t;return(((t=this.presets)==null?void 0:t.length)??0)!==0},hasConstants(){var t;return(((t=this.constants)==null?void 0:t.length)??0)!==0}},methods:{update(){this.presets=AutomatorBackend.getUsedPresets(this.script.id),this.constants=AutomatorBackend.getUsedConstants(this.script.id)},iconClass(t){return t?"far fa-plus-square":"far fa-minus-square"},exportData(t){const e=AutomatorBackend.exportFullScriptData(t);e?(copyToClipboard(e),GameUI.notify.automator(`Exported all data associated with "${this.script.name}" to your clipboard`,6e3)):GameUI.notify.error("Could not export data from blank Automator script!")}}};var aJ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-entry-padding"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Export Full Script Data",expression:"'Export Full Script Data'"}],staticClass:"l-button-margin fas fa-file-export",on:{click:function(n){return e.exportData(e.script.id)}}}),i("b",[e._v("Script name: "+e._s(e.script.name))]),i("br"),e.hasPresets?i("span",[i("span",{class:e.iconClass(e.hidePresets),on:{click:function(n){e.hidePresets=!e.hidePresets}}}),e._v(" References "+e._s(e.quantifyInt("recognized study preset",e.presets.length))+" "),e.hidePresets?e._e():i("span",e._l(e.presets,function(n){return i("div",{key:n},[e.presetData[n].name?i("span",[e._v('"'+e._s(e.presetData[n].name)+'" (slot '+e._s(n+1)+"):")]):i("span",[e._v("Preset slot "+e._s(n+1)+":")]),i("br"),i("div",{staticClass:"l-value-padding"},[e.presetData[n].studies?i("span",[e._v(e._s(e.presetData[n].studies))]):i("i",[e._v("Empty Study Preset")])])])}),0)]):i("span",[e._v(" Does not reference any study presets. ")]),i("br"),e.hasConstants?i("span",[i("span",{class:e.iconClass(e.hideConstants),on:{click:function(n){e.hideConstants=!e.hideConstants}}}),e._v(" References "+e._s(e.quantifyInt("defined constant",e.constants.length))+" "),e.hideConstants?e._e():i("span",e._l(e.constants,function(n){return i("div",{key:n},[e._v(' "'+e._s(n)+'": '),i("br"),i("div",{staticClass:"l-value-padding"},[e._v(" "+e._s(e.constantData[n])+" ")])])}),0)]):i("span",[e._v(" Does not reference any defined constants. ")])])},oJ=[],lJ=K(sJ,aJ,oJ,!1,null,"03923e44");const cJ=lJ.exports,uJ={name:"AutomatorDataTransferPage",components:{AutomatorDataTransferSingleEntry:cJ},data(){return{scripts:0}},computed:{maxScriptCount:()=>AutomatorData.MAX_ALLOWED_SCRIPT_COUNT},created(){this.loadScripts(),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>{this.loadScripts()})},methods:{loadScripts(){this.scripts=Object.values(player.reality.automator.scripts).map(t=>({id:t.id,name:t.name}))}}};var dJ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-panel-padding"},[e._v(" This page lets you import and export scripts with additional data attached; the encoded text will also include data for any Time Study presets or constants used within the script. This will allow you to more easily transfer working scripts between different save files, but you may have to overwrite existing data in the process due to limited space for study presets and constants. Data exported from this page is also imported in the same way that single script data is imported. "),i("br"),i("br"),e._v(' Note: Any mentions of constant names or full study-buying commands within comments will also be counted as being "used" within a script. This is intentional, as the comment is assumed to be indicative of what the script itself is attempting to do with presets or constants. '),i("br"),i("br"),e._l(e.scripts,function(n,r){return i("div",{key:r},[i("AutomatorDataTransferSingleEntry",{staticClass:"l-entry-margin",attrs:{script:n}})],1)})],2)},hJ=[],fJ=K(uJ,dJ,hJ,!1,null,"8020ec64");const pJ=fJ.exports,mJ={name:"AutomatorDefineSingleEntry",props:{constant:{type:String,required:!0}},data(){return{oldAlias:"",aliasString:"",valueString:""}},computed:{maxNameLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_NAME_LENGTH},maxValueLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_VALUE_LENGTH}},created(){this.aliasString=this.constant,this.oldAlias=this.aliasString,this.valueString=player.reality.automator.constants[this.aliasString]},methods:{currentError(){if(!this.aliasString)return null;const t=this.aliasString.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/u),e=Object.keys(player.reality.automator.constants).includes(this.aliasString)&&this.aliasString!==this.oldAlias,i=XU.some(a=>{const o=this.aliasString.toLowerCase().match(a);return o?o[0]===this.aliasString.toLowerCase():!1}),n=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","toValueOf"].some(a=>this.aliasString.match(a));if(!t)return"Constant name must be alphanumeric without spaces and cannot start with a number";if(e)return"You have already defined a constant with this name";if(i)return"Constant name conflicts with a command key word";if(n)return"Constant name cannot shadow a built-in Javascript prototype prop";if(!this.valueString)return"Constant value cannot be empty";const r=this.valueString.match(/^-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?$/u),s=TimeStudyTree.isValidImportString(this.valueString);return!r&&!s?"Constant value must either be a number or Time Study string":null},errorTooltip(){const t=this.currentError();if(t)return{content:`<div class="c-block-automator-error">
          <div>${t}</div>
        </div>`,html:!0,trigger:"manual",show:!0,classes:["general-tooltip"]}},handleFocus(t){t||this.currentError()||(this.aliasString?this.oldAlias?this.oldAlias===this.aliasString?AutomatorBackend.modifyConstant(this.aliasString,this.valueString):AutomatorBackend.renameConstant(this.oldAlias,this.aliasString):AutomatorBackend.addConstant(this.aliasString,this.valueString):AutomatorBackend.deleteConstant(this.oldAlias),this.oldAlias=this.aliasString,AutomatorData.recalculateErrors(),player.reality.automator.type===AUTOMATOR_TYPE.BLOCK&&BlockAutomator.parseTextFromBlocks())},deleteConstant(){AutomatorBackend.deleteConstant(this.aliasString),this.oldAlias="",this.aliasString="",this.valueString=""}}};var yJ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-single-definition-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.aliasString,expression:"aliasString"}],staticClass:"c-define-textbox c-alias",class:{"l-limit-textbox":e.aliasString.length===e.maxNameLength},attrs:{placeholder:"New constant...",maxlength:e.maxNameLength},domProps:{value:e.aliasString},on:{focusin:function(n){return e.handleFocus(!0)},focusout:function(n){return e.handleFocus(!1)},input:function(n){n.target.composing||(e.aliasString=n.target.value)}}}),e.aliasString?i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.errorTooltip(),expression:"errorTooltip()"}],staticClass:"o-arrow-padding"},[e._v(" 🠈 ")]):e._e(),e.aliasString?i("input",{directives:[{name:"model",rawName:"v-model",value:e.valueString,expression:"valueString"}],staticClass:"c-define-textbox c-value",class:{"l-limit-textbox":e.valueString&&e.valueString.length===e.maxValueLength},attrs:{placeholder:"Value for constant...",maxlength:e.maxValueLength},domProps:{value:e.valueString},on:{focusin:function(n){return e.handleFocus(!0)},focusout:function(n){return e.handleFocus(!1)},input:function(n){n.target.composing||(e.valueString=n.target.value)}}}):e._e(),e.aliasString?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete this constant",expression:"'Delete this constant'"}],staticClass:"c-delete-button fas fa-eraser",on:{click:e.deleteConstant}}):e._e()])},gJ=[],vJ=K(mJ,yJ,gJ,!1,null,"6e6cd095");const bJ=vJ.exports,_J={name:"AutomatorDefinePage",components:{AutomatorDefineSingleEntry:bJ,PrimaryButton:yt},data(){return{constants:[],count:0,refreshConstants:!1}},computed:{maxConstantCount(){return AutomatorData.MAX_ALLOWED_CONSTANT_COUNT},maxNameLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_NAME_LENGTH},maxValueLength(){return AutomatorData.MAX_ALLOWED_CONSTANT_VALUE_LENGTH},hasConstants(){return this.constants.length>1||this.constants[0]!==""}},created(){this.on$(GAME_EVENT.AUTOMATOR_CONSTANT_CHANGED,()=>{this.refreshConstants=!0,this.$nextTick(()=>this.refreshConstants=!1)})},methods:{update(){const t=player.reality.automator.constantSortOrder;this.count=t.length,this.constants=this.count<this.maxConstantCount?[...t,""]:[...t]},deleteAllConstants(){this.hasConstants&&Modal.clearAutomatorConstants.show()},importPresets(){Modal.importTSConstants.show()}}};var EJ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-panel-padding"},[e._v(" This panel allows you to define case-sensitive constant values which can be used in place of numbers or Time Study import strings. These definitions are shared across all of your scripts and are limited to a maximum of "+e._s(e.maxConstantCount)+" defined constants. Additionally, constant names and values are limited to lengths of "+e._s(e.maxNameLength)+" and "+e._s(e.maxValueLength)+" characters respectively. Changes made to constants will not apply until any currently running scripts are restarted. "),i("br"),i("br"),e._v(" As a usage example, defining "),i("b",[e._v("first 🠈 11,21,22,31,32,33")]),e._v(" allows you to use "),i("b",[e._v("studies purchase first")]),e._v(" in order to purchase all of the studies in the first three rows. "),i("br"),i("br"),i("PrimaryButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.hasConstants?null:"You have no valid constants to delete!",expression:"hasConstants ? null : 'You have no valid constants to delete!'"}],staticClass:"c-delete-margin o-primary-btn--subtab-option",class:{"o-primary-btn--disabled":!e.hasConstants},on:{click:e.deleteAllConstants}},[e._v(" Delete all constants ")]),i("br"),i("br"),i("PrimaryButton",{staticClass:"c-delete-margin o-primary-btn--subtab-option",on:{click:e.importPresets}},[e._v(" Import Time Study Presets ")]),i("div",{key:e.count+e.refreshConstants,staticClass:"l-definition-container"},e._l(e.constants,function(n,r){return i("AutomatorDefineSingleEntry",{key:r,attrs:{constant:n}})}),1)],1)},TJ=[],wJ=K(_J,EJ,TJ,!1,null,"f0be6c4d");const CJ=wJ.exports,SJ={name:"AutomatorDocsManPage",props:{command:{type:Object,required:!0}},computed:{description(){const t=this.command.description;return typeof t=="function"?t():t}}};var kJ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator-docs-page"},[i("b",[e._v("NAME")]),i("div",{staticClass:"c-automator-docs-page__indented",domProps:{innerHTML:e._s(e.command.keyword)}}),i("b",[e._v("SYNTAX")]),i("div",{staticClass:"c-automator-docs-page__indented",domProps:{innerHTML:e._s(e.command.syntax)}}),e.command.description?[i("b",[e._v("DESCRIPTION")]),i("div",{staticClass:"c-automator-docs-page__indented",domProps:{innerHTML:e._s(e.description)}})]:e._e(),e._l(e.command.sections,function(n){return[i("b",{key:n.name},[e._v(e._s(n.name))]),e._l(n.items,function(r){return[i("div",{key:r.header,staticClass:"c-automator-docs-page__indented"},[i("div",{domProps:{innerHTML:e._s(r.header)}}),i("div",{staticClass:"c-automator-docs-page__indented",domProps:{innerHTML:e._s(r.description)}})])]})]}),e.command.examples?[i("b",[e._v("USAGE EXAMPLES")]),e._l(e.command.examples,function(n){return i("div",{key:n,staticClass:"c-automator-docs-page__indented",domProps:{innerHTML:e._s(n)}})})]:e._e()],2)},AJ=[],RJ=K(SJ,kJ,AJ,!1,null,"314865fa");const IJ=RJ.exports,DJ={name:"AutomatorDocsCommandList",components:{AutomatorDocsManPage:IJ},data(){return{selectedCommand:-1}},computed:{categoryNames:()=>GameDatabase.reality.automator.categoryNames,commands:()=>GameDatabase.reality.automator.commands},methods:{commandsInCategory(t){return this.commands.filter(e=>e.category===t&&e.isUnlocked())}}};var xJ=function(){var e=this,i=e._self._c;return i("div",[e.selectedCommand!==-1?i("div",[i("button",{staticClass:"c-automator-docs--button l-return-button fas fa-arrow-left",on:{click:function(n){e.selectedCommand=-1}}}),e._v(" Return to the Command List ")]):e._e(),e.selectedCommand!==-1?i("AutomatorDocsManPage",{attrs:{command:e.commands[e.selectedCommand]}}):i("div",{staticClass:"c-automator-docs-page"},[e._v(" Click on an underlined command to see more details on syntax, usage, and functionality. "),i("br"),i("br"),i("span",[e._v("Command List:")]),i("br"),e._l(e.categoryNames,function(n,r){return i("div",{key:r},[e._v(" "+e._s(n)+" ("+e._s(e.commandsInCategory(r).length)+" commands) "),e._l(e.commandsInCategory(r),function(s){return i("div",{key:s.id,staticClass:"c-automator-docs-page__link l-command-group",on:{click:function(a){e.selectedCommand=s.id}}},[s.isUnlocked()?i("span",[e._v(" "+e._s(s.keyword)+" ")]):e._e()])})],2)}),i("br"),i("span",[e._v(" Note: In the SYNTAX note on each command, "),i("u",[e._v("underlined")]),e._v(" inputs are "),i("i",[e._v("required")]),e._v(" inputs which you must fill and inputs in [square brackets] are optional (if used, they should be input "),i("i",[e._v("without")]),e._v(" the brackets). Any other parts should be typed in as they appear. Unless otherwise stated, all of the inputs are case-insensitive. Some commands may have more than one valid format, which will appear on separate lines. ")])],2)],1)},MJ=[],PJ=K(DJ,xJ,MJ,!1,null,"fdf764c9");const OJ=PJ.exports,NJ={name:"AutomatorDocsIntroPage"};var GJ=function(){var e=this;return e._self._c,e._m(0)},UJ=[function(){var t=this,e=t._self._c;return e("div",[t._v(" Welcome to the Antimatter Dimensions Automator! "),e("br"),e("br"),t._v(" This page is an introduction page which gives a very broad overview of everything you can do with the Automator. Specific details on various functionality can be found in the How To Play or their respective tabs (when relevant). "),e("br"),e("br"),e("b",[t._v("Scripting Language:")]),t._v(" The Automator uses a custom scripting language in order to perform certain game actions for you. Click "),e("div",{staticClass:"fas fa-list c-automator-button-icon"}),t._v(" to bring up a list of available commands. You can also define constants as shorthand names for various values on the "),e("div",{staticClass:"fas fa-book c-automator-button-icon"}),t._v(" page. "),e("br"),e("br"),e("b",[t._v("Layout:")]),t._v(" This Automator itself is split up into two halves; the left half contains your script and controls for starting, stopping, and repeating its execution, and the right half contains Automator information. Clicking "),e("div",{staticClass:"fas fa-expand-arrows-alt c-automator-button-icon"}),t._v(" in the top-right corner will expand the Automator to take up the whole browser page for easier editing. "),e("br"),e("br"),e("b",[t._v("Editor Modes:")]),t._v(" There are two different editors you can use to write your automator scripts - a block-based editor (default) and a text-based editor. You can swap between the two editor types with the switch in the top-right corner of the left half. Note that scripts with errors may not properly convert between the two modes, which can cause part of your script to be deleted. "),e("br"),e("br"),e("b",[t._v("Making Scripts:")]),t._v(" You can switch between multiple scripts or make new scripts using the dropdown on the second row of buttons. The current script can be renamed or deleted with the "),e("div",{staticClass:"fas fa-edit c-automator-button-icon"}),t._v(" and "),e("div",{staticClass:"fas fa-trash c-automator-button-icon"}),t._v(" buttons. The Automator will always contain at least one script for you to edit; deleting your last one will automatically create a new blank one. "),e("br"),e("br"),e("b",[t._v("Writing Scripts:")]),t._v(" Scripts in the block editor are made by going to the block tab "),e("div",{staticClass:"fas fa-cubes c-automator-button-icon"}),t._v(", while scripts in the text editor are made by typing into the left half as a text box. In either editor mode, you can also use some smaller premade scripts from the template generator "),e("div",{staticClass:"fas fa-file-code c-automator-button-icon"}),t._v(". You can undo or redo a limited number of edits using "),e("div",{staticClass:"fas fa-arrow-rotate-left c-automator-button-icon"}),t._v(" or "),e("div",{staticClass:"fas fa-arrow-rotate-right c-automator-button-icon"}),t._v(", or by using the respective hotkeys. Edit history is cleared upon switching, converting, or deleting scripts. "),e("br"),e("br"),e("b",[t._v("Debugging:")]),t._v(" The two main tools you have for fixing your scripts are the Error Log "),e("div",{staticClass:"fas fa-exclamation-triangle c-automator-button-icon"}),t._v(" for when you can't get your script to run at all, and the Event Log "),e("div",{staticClass:"fas fa-eye c-automator-button-icon"}),t._v(" for when it runs but doesn't do what you expect it to do. "),e("br"),e("br"),e("b",[t._v("Importing/Exporting:")]),t._v(" Automator scripts can be exported and imported in text format by using the "),e("div",{staticClass:"fas fa-file-export c-automator-button-icon"}),t._v(" and "),e("div",{staticClass:"fas fa-file-import c-automator-button-icon"}),t._v(" buttons respectively. You can also access additional extended exporting options "),e("div",{staticClass:"fas fa-window-restore c-automator-button-icon"}),t._v(" if desired. "),e("br"),e("br"),e("b",[t._v("Script saving:")]),t._v(" Script changes are not immediately saved to your computer under all conditions; check the Automator How To Play entries for more details. Additionally there are two character limits to reduce lag, shown above the automator panels. ")])}],LJ=K(NJ,GJ,UJ,!1,null,"691dd874");const BJ=LJ.exports,FJ={name:"AutomatorDocsTemplateList",data(){return{isBlock:!1,blockTemplates:[],selectedTemplateID:-1}},computed:{templates:()=>GameDatabase.reality.automator.templates.scripts,pasteText(){return this.isBlock?`create a special block you can drag into your Automator where you would like it to be placed. It will then
          automatically fill in all of the individual blocks needed for the template`:`copy the template as text onto your clipboard. You can directly paste the template text into your Automator
          wherever you would like it`}},methods:{update(){this.isBlock=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK,this.blockTemplates=AutomatorData.blockTemplates},showModal(t){Modal.automatorScriptTemplate.show(t)},unpackTemplateBlocks(t){const e=this.blockTemplates[this.selectedTemplateID].blocks,i=BlockAutomator.lines.slice(0,t.newIndex),n=BlockAutomator.lines.slice(t.newIndex).filter(o=>o.cmd),r=Math.max(...BlockAutomator._idArray.filter(o=>o)),s=Math.min(...e.map(o=>o.id)),a=[];for(const o of e)a.push({...o,id:o.id+r-s+1});BlockAutomator.lines=i,BlockAutomator.lines.push(...a),BlockAutomator.lines.push(...n),BlockAutomator.updateIdArray()},setIndex(t){this.selectedTemplateID=t}}};var $J=function(){var e=this,i=e._self._c;return i("div",[e._v(" These templates will let you do some more common things within the Automator. They may be slightly slower than manually-written scripts, but don't require you to have any previous programming experience to use. Clicking any of these buttons will open up a prompt with some input fields, which will generate a template you can place into your Automator. "),e._l(e.templates,function(n){return i("button",{key:n.name,staticClass:"o-primary-btn c-automator-docs-template--button l-automator__button",on:{click:function(r){return e.showModal(n)}}},[e._v(" Template: "+e._s(n.name)+" ")])}),e._v(" Since you are currently in the "+e._s(e.isBlock?"Block":"Text")+" editor, this panel will "+e._s(e.pasteText)+". "),i("br"),i("br"),e.isBlock?i("draggable",{key:e.blockTemplates.length,staticClass:"template-container",attrs:{list:e.blockTemplates,group:{name:"code-blocks",pull:"clone",put:!1},sort:!1},on:{end:e.unpackTemplateBlocks}},e._l(e.blockTemplates,function(n,r){return i("div",{key:r,staticClass:"o-automator-command o-automator-block-list draggable-blocks",on:{dragstart:function(s){return e.setIndex(r)}}},[e._v(" "+e._s(n.name)+" ")])}),0):e._e()],2)},HJ=[],VJ=K(FJ,$J,HJ,!1,null,"2f4da6f6");const qJ=VJ.exports,YJ={name:"AutomatorErrorPage",data(){return{errors:[]}},methods:{update(){this.errors=AutomatorData.currentErrors()},scrollToLine(t){AutomatorScroller.scrollToLine(t),AutomatorHighlighter.updateHighlightedLine(t,LineEnum.Error)}}};var WJ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator-docs-page"},[e.errors.length===0?i("div",[e._v(" No script errors found! ")]):i("div",[i("b",[e._v("Your script has the following "+e._s(e.quantify("error",e.errors.length))+":")]),i("br"),e._l(e.errors,function(n,r){return i("span",{key:r},[i("b",[e._v("On line "+e._s(n.startLine)+":")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Jump to line",expression:"'Jump to line'"}],staticClass:"c-automator-docs--button fas fa-arrow-circle-right",on:{click:function(s){return e.scrollToLine(n.startLine)}}}),i("div",{staticClass:"c-automator-docs-page__indented"},[e._v(" "+e._s(n.info)+" ")]),i("div",{staticClass:"c-automator-docs-page__indented"},[i("i",[e._v("Suggested fix: "+e._s(n.tip))])])])}),i("i",[e._v(' Note: Sometimes errors may cause the automator to be unable to scan the rest of the script properly. This may result in some errors "disappearing" due to other errors occurring in earlier lines, or errors in a command which has an inner block (eg. commands like IF or WHILE) causing errors to appear on correctly-formatted later commands. Additionally, some of the suggested fixes may be potentially misleading due to the cause of the error being unclear. ')])],2)])},jJ=[],zJ=K(YJ,WJ,jJ,!1,null,"2cbbdd62");const XJ=zJ.exports,KJ={name:"AutomatorEventLog",data(){return{unsortedEvents:[],newestFirst:!1,timestampMode:0,currentTime:0,maxEntries:0,clearOnReality:!1,clearOnRestart:!1}},computed:{events(){const t=this.unsortedEvents.slice(0).sort((e,i)=>e.timestamp===i.timestamp?e.thisReality===i.thisReality?e.line-i.line:e.thisReality-i.thisReality:e.timestamp-i.timestamp);return this.newestFirst?t.reverse():t},clearTooltip(){return`Clear all entries (Max. ${this.maxEntries})`},buttonClassObject(){return"c-automator-docs--button fas"}},watch:{newestFirst(t){player.options.automatorEvents.newestFirst=t},timestampMode(t){player.options.automatorEvents.timestampType=t},clearOnReality(t){player.options.automatorEvents.clearOnReality=t},clearOnRestart(t){player.options.automatorEvents.clearOnRestart=t}},methods:{update(){const t=player.options.automatorEvents;this.unsortedEvents=AutomatorData.eventLog,this.newestFirst=t.newestFirst,this.timestampMode=t.timestampType,this.currentTime=Date.now(),this.maxEntries=t.maxEntries,this.clearOnReality=t.clearOnReality,this.clearOnRestart=t.clearOnRestart},clearLog(){AutomatorData.clearEventLog(),this.update()},sortStyle(t){return{"background-color":t?"var(--color-reality)":""}},timestampStyle(t){return{"background-color":this.timestampMode===kh[t]?"var(--color-reality)":""}},clearRealityStyle(){return{"background-color":this.clearOnReality?"var(--color-reality)":""}},clearRestartStyle(){return{"background-color":this.clearOnRestart?"var(--color-reality)":""}},setTimestampMode(t){this.timestampMode=kh[t]},timestamp(t){switch(this.timestampMode){case kh.DISABLED:return"";case kh.THIS_REALITY:return`, ${TimeSpan.fromSeconds(t.thisReality).toStringShort()} (real-time) in Reality`;case kh.RELATIVE_NOW:return`, ${TimeSpan.fromMilliseconds(this.currentTime-t.timestamp).toStringShort()} ago`;case kh.RELATIVE_PREV:return t.timegap===t.timestamp?", first logged event":`, ${TimeSpan.fromMilliseconds(t.timegap).toStringShort()} after previous event`;case kh.DATE_TIME:return`, ${Time.toDateTimeString(t.timestamp)}`;default:throw Error("Unrecognized timestamp mode in Automator event log")}},scrollToLine(t){AutomatorScroller.scrollToLine(t),AutomatorHighlighter.updateHighlightedLine(t,LineEnum.Event)}}},kh={DISABLED:0,THIS_REALITY:1,RELATIVE_NOW:2,RELATIVE_PREV:3,DATE_TIME:4};var ZJ=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator-docs-page"},[i("div",[e._v(" This panel keeps a running event log of all the commands which the automator has recently executed, with a little extra info on some of the commands. It may be useful to help you find problems if you find your automator is getting stuck in certain spots. "),i("br"),i("br"),e._v(" While your settings are kept within your savefile, the actual events are not and will disappear on refresh. "),i("br"),i("br"),i("b",[e._v("Entry Sorting:")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Oldest results first",expression:"'Oldest results first'"}],staticClass:"fa-angle-down",class:e.buttonClassObject,style:e.sortStyle(!e.newestFirst),on:{click:function(n){e.newestFirst=!1}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Newest results first",expression:"'Newest results first'"}],staticClass:"fa-angle-up",class:e.buttonClassObject,style:e.sortStyle(e.newestFirst),on:{click:function(n){e.newestFirst=!0}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.clearTooltip,expression:"clearTooltip"}],staticClass:"fa-trash",class:e.buttonClassObject,on:{click:e.clearLog}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Clear event log every Reality",expression:"'Clear event log every Reality'"}],staticClass:"fa-eraser",class:e.buttonClassObject,style:e.clearRealityStyle(),on:{click:function(n){e.clearOnReality=!e.clearOnReality}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Clear event log on script restart",expression:"'Clear event log on script restart'"}],staticClass:"fa-backspace",class:e.buttonClassObject,style:e.clearRestartStyle(),on:{click:function(n){e.clearOnRestart=!e.clearOnRestart}}})]),i("div",[i("b",[e._v("Timestamp style:")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"No timestamps",expression:"'No timestamps'"}],staticClass:"fa-ban",class:e.buttonClassObject,style:e.timestampStyle("DISABLED"),on:{click:function(n){return e.setTimestampMode("DISABLED")}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Current time this Reality",expression:"'Current time this Reality'"}],staticClass:"fa-stopwatch",class:e.buttonClassObject,style:e.timestampStyle("THIS_REALITY"),on:{click:function(n){return e.setTimestampMode("THIS_REALITY")}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Time elapsed since event",expression:"'Time elapsed since event'"}],staticClass:"fa-clock",class:e.buttonClassObject,style:e.timestampStyle("RELATIVE_NOW"),on:{click:function(n){return e.setTimestampMode("RELATIVE_NOW")}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Time since last event",expression:"'Time since last event'"}],staticClass:"fa-arrow-left",class:e.buttonClassObject,style:e.timestampStyle("RELATIVE_PREV"),on:{click:function(n){return e.setTimestampMode("RELATIVE_PREV")}}}),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Date and time",expression:"'Date and time'"}],staticClass:"fa-user-clock",class:e.buttonClassObject,style:e.timestampStyle("DATE_TIME"),on:{click:function(n){return e.setTimestampMode("DATE_TIME")}}})]),e._l(e.events,function(n,r){return i("span",{key:r},[i("b",[e._v("Line "+e._s(n.line)+e._s(e.timestamp(n))+":")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Jump to line",expression:"'Jump to line'"}],staticClass:"fa-arrow-circle-right",class:e.buttonClassObject,on:{click:function(s){return e.scrollToLine(n.line)}}}),i("div",{staticClass:"c-automator-docs-page__indented"},[i("i",[e._v(e._s(n.message))])])])})],2)},QJ=[],JJ=K(KJ,ZJ,QJ,!1,null,"9e1ad02a");const eee=JJ.exports,tee={name:"AutomatorScriptDropdownEntryList",data(){return{isBlock:!1,currentScriptID:0,runningScriptID:0,isRunning:!1,isPaused:!1,canMakeNewScript:!1}},computed:{scripts(){return Object.values(player.reality.automator.scripts).map(t=>({id:t.id,name:t.name}))},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,"automato").getValue()},scriptCount(){return Object.keys(player.reality.automator.scripts).length},maxScriptCount(){return AutomatorData.MAX_ALLOWED_SCRIPT_COUNT}},created(){this.currentScriptID=player.reality.automator.state.editorScript,this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>{this.$recompute("scripts")})},methods:{update(){this.isBlock=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK,this.runningScriptID=AutomatorBackend.state.topLevelScript,this.isRunning=AutomatorBackend.isRunning,this.isPaused=AutomatorBackend.isOn&&!AutomatorBackend.isRunning,this.canMakeNewScript=this.scriptCount<this.maxScriptCount},changeScriptID(t){this.currentScriptID=t,player.reality.automator.state.editorScript=t,this.updateCurrentScriptID()},createNewScript(){const t=AutomatorBackend.newScript();player.reality.automator.state.editorScript=t.id,this.updateCurrentScriptID(),this.$parent.$parent.rename()},updateCurrentScriptID(){const t=player.reality.automator.scripts;this.currentScriptID=player.reality.automator.state.editorScript,t[this.currentScriptID]===void 0&&(this.currentScriptID=Number(Object.keys(t)[0]),player.reality.automator.state.editorScript=this.currentScriptID),this.isBlock&&this.$nextTick(()=>BlockAutomator.updateEditor(this.currentScript)),this.$parent.openRequest=!1,AutomatorData.clearUndoData()},dropdownLabel(t){const e=[];t.id===this.currentScriptID&&e.push("viewing"),t.id===this.runningScriptID&&(this.isRunning?e.push("running"):this.isPaused&&e.push("paused"));const i=e.length?`(${e.join(", ").capitalize()})`:"";return`${t.name} ${i}`},labelClassObject(t){const e=this.isRunning||this.isPaused;return{"c-automator-docs-script-select":!0,"l-active-script":t===this.runningScriptID&&e,"l-selected-script":t===this.currentScriptID&&(t!==this.runningScriptID||!e)}}}};var iee=function(){var e=this,i=e._self._c;return i("div",{key:e.scripts.length},[e._l(e.scripts,function(n){return i("div",{key:n.id,staticClass:"l-script-option c-script-option-hover-effect",class:e.labelClassObject(n.id),on:{click:function(r){return e.changeScriptID(n.id)}}},[e._v(" "+e._s(e.dropdownLabel(n))+" ")])}),e.canMakeNewScript?i("div",{staticClass:"l-create-script c-automator-docs-script-select c-script-option-hover-effect",on:{click:function(n){return e.createNewScript()}}},[i("i",[e._v("Create a new script (You have "+e._s(e.formatInt(e.scriptCount))+" / "+e._s(e.formatInt(e.maxScriptCount))+")")])]):i("div",{staticClass:"l-create-script c-automator-docs-script-select l-max-scripts"},[i("i",[e._v("You can only have "+e._s(e.formatInt(e.maxScriptCount))+" scripts!")])])],2)},nee=[],ree=K(tee,iee,nee,!1,null,"50109d28");const see=ree.exports,aee={name:"ExpandingControlBox",props:{containerClass:{type:String,required:!1,default:void 0},label:{type:String,required:!1,default:void 0},widthSource:{type:String,required:!1,default:void 0},buttonClass:{type:String,required:!1,default:"l-expanding-control-box__button"},autoClose:{type:Boolean,required:!1,default:!1}},data(){return{state:null,openRequest:!1,closedHeight:"1em",openHeight:"1em",hasMouse:!1,closeTime:0}},computed:{states:()=>({CLOSED:{name:"CLOSED",transition:!1,visibility:!1,height:"closed"},OPEN_REQUESTED:{name:"OPEN_REQUESTED",transition:!0,visibility:!0,height:"closed"},OPENING:{name:"OPENING",transition:!0,visibility:!0,height:"open"},OPEN:{name:"OPEN",transition:!1,visibility:!0,height:null},CLOSE_REQUESTED:{name:"CLOSE_REQUESTED",transition:!1,visibility:!0,height:"open"},CLOSING:{name:"CLOSING",transition:!0,visibility:!0,height:"closed"}}),maxHeight(){return this.state.height==="open"?this.openHeight:this.state.height==="closed"?this.closedHeight:null},rootClassObject(){return{"l-expanding-control-box--controls-width":this.widthSource!==void 0}},containerStyle(){return{maxHeight:this.maxHeight,visibility:this.state.visibility}},containerClassObject(){var e;const t={"l-expanding-control-box__container--transition":(e=this.state)==null?void 0:e.transition};return t[this.containerClass]=!0,t},indicatorArrowClassObject(){return{"c-indicator-arrow":!0,"c-indicator-arrow--flipped":this.state===this.states.OPENING||this.state===this.states.OPEN}}},watch:{state(t){switch(this.processRequest(t,this.openRequest),this.updateHeightInfo(),this.state){case this.states.CLOSED:break;case this.states.OPEN_REQUESTED:this.$nextTick(()=>this.state=this.states.OPENING);break;case this.states.OPENING:break;case this.states.OPEN:break;case this.states.CLOSE_REQUESTED:this.$nextTick(()=>this.state=this.states.CLOSING);break;case this.CLOSING:break}},openRequest(t){this.processRequest(this.state,t)}},created(){this.state=this.states.CLOSED,this.on$("openrequest",()=>this.openRequest=!0)},mounted(){this.updateHeightInfo(),this.$refs.root.style.height=this.closedHeight,this.updateBaseWidth()},methods:{update(){const t=this.hasMouse?0:(Date.now()-this.closeTime)/1e3;this.autoClose&&this.state===this.states.OPEN&&t>1&&(this.openRequest=!1)},processRequest(t,e){e&&(t===this.states.CLOSED||t===this.states.CLOSE_REQUESTED)&&(this.state=this.states.OPEN_REQUESTED),!e&&(t===this.states.OPEN||t===this.states.OPEN_REQUESTED)&&(this.state=this.states.CLOSE_REQUESTED)},updateBaseWidth(){this.widthSource==="content"?(this.$refs.container.style.width=`${this.$refs.dropdown.offsetWidth}px`,this.$refs.root.style.width=`${this.$refs.dropdown.offsetWidth}px`):this.widthSource==="header"&&(this.$refs.root.style.width=`${this.$refs.container.offsetWidth}px`)},updateHeightInfo(){const t=this.$refs.expandButton.offsetHeight;this.closedHeight=`${t}px`,this.openHeight=`${t+this.$refs.dropdown.offsetHeight}px`},transitionEnd(t){t.propertyName==="max-height"&&(this.state===this.states.OPENING?this.state=this.states.OPEN:this.state===this.states.CLOSING&&(this.state=this.states.CLOSED))},handleClick(){this.openRequest=!this.openRequest,this.hasMouse=this.openRequest},mouseOn(){this.hasMouse=!0},mouseOff(){this.hasMouse=!1,this.closeTime=Date.now()}}};var oee=function(){var e=this,i=e._self._c;return i("div",{ref:"root",staticClass:"l-expanding-control-box",class:e.rootClassObject},[i("div",{ref:"container",staticClass:"l-expanding-control-box__container",class:e.containerClassObject,style:e.containerStyle,on:{transitionend:e.transitionEnd,mouseenter:e.mouseOn,mouseleave:e.mouseOff}},[e.$slots.header?i("div",{ref:"expandButton",on:{click:e.handleClick}},[e._t("header")],2):i("div",{ref:"expandButton",class:e.buttonClass,on:{click:e.handleClick}},[e._v(" "+e._s(e.label)+" "),i("span",{class:e.indicatorArrowClassObject},[e._v(" ▼ ")])]),i("div",{ref:"dropdown"},[e._t("dropdown")],2)])])},lee=[],cee=K(aee,oee,lee,!1,null,"7e36c857");const fc=cee.exports,Up={INTRO_PAGE:0,COMMANDS:1,ERRORS:2,EVENTS:3,DATA_TRANSFER:4,CONSTANTS:5,TEMPLATES:6,BLOCKS:7},uee={name:"AutomatorDocs",components:{AutomatorButton:tB,AutomatorDocsCommandList:OJ,AutomatorErrorPage:XJ,AutomatorEventLog:eee,AutomatorDataTransferPage:pJ,AutomatorBlocks:eL,AutomatorDocsIntroPage:BJ,AutomatorDocsTemplateList:qJ,AutomatorDefinePage:CJ,AutomatorScriptDropdownEntryList:see,ExpandingControlBox:fc},data(){return{isBlock:!1,infoPaneID:1,errorCount:0,editingName:!1,isNameTooLong:!1,scripts:[],runningScriptID:0,totalChars:0,scriptCount:0,canMakeNewScript:!0}},computed:{fullScreen:{get(){return this.$viewModel.tabs.reality.automator.fullScreen},set(t){this.$viewModel.tabs.reality.automator.fullScreen=t,AutomatorData.isEditorFullscreen=t}},fullScreenIconClass(){return this.fullScreen?"fa-compress-arrows-alt":"fa-expand-arrows-alt"},fullScreenTooltip(){return this.fullScreen?"Exit full screen":"Expand to full screen"},errorTooltip(){return`Your script has ${quantify("error",this.errorCount)}`},nameTooltip(){return this.isNameTooLong?`Names cannot be longer than ${formatInt(AutomatorData.MAX_ALLOWED_SCRIPT_NAME_LENGTH)} characters!`:""},currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(t){this.$viewModel.tabs.reality.automator.editorScriptID=t,AutomatorTextUI.editor&&AutomatorTextUI.editor.performLint()}},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,"automato").getValue()},errorStyle(){return{"background-color":this.errorCount===0?"":"red"}},maxTotalChars(){return AutomatorData.MAX_ALLOWED_TOTAL_CHARACTERS},maxScriptCount(){return AutomatorData.MAX_ALLOWED_SCRIPT_COUNT},panelEnum(){return Up},importTooltip(){return this.canMakeNewScript?"Import single automator script or data":"You have too many scripts to import another!"},currentEditorScriptName(){return this.scripts.find(t=>t.id===this.currentScriptID).name}},watch:{infoPaneID(t){player.reality.automator.currentInfoPane=t}},created(){this.on$(GAME_EVENT.GAME_LOAD,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_TYPE_CHANGED,()=>this.openMatchingAutomatorTypeDocs()),this.onGameLoad()},destroyed(){this.fullScreen=!1},methods:{update(){this.isBlock=player.reality.automator.type===wr.BLOCK,this.infoPaneID=player.reality.automator.currentInfoPane,this.errorCount=AutomatorData.currentErrors().length,this.runningScriptID=AutomatorBackend.state.topLevelScript,this.totalChars=AutomatorData.totalScriptCharacters(),this.scriptCount=Object.keys(player.reality.automator.scripts).length,this.canMakeNewScript=this.scriptCount<this.maxScriptCount,this.currentScriptID=player.reality.automator.state.editorScript},exportScript(){const t=AutomatorBackend.exportCurrentScriptContents();t?(copyToClipboard(t),GameUI.notify.automator("Exported current Automator script to your clipboard")):GameUI.notify.error("Could not export blank Automator script!")},importScript(){this.canMakeNewScript&&Modal.importScriptData.show()},onGameLoad(){this.updateCurrentScriptID(),this.updateScriptList(),this.fixAutomatorTypeDocs()},updateScriptList(){this.scripts=Object.values(player.reality.automator.scripts).map(t=>({id:t.id,name:t.name}))},updateCurrentScriptID(){AutomatorData.recalculateErrors();const t=player.reality.automator.scripts;this.currentScriptID=player.reality.automator.state.editorScript,t[this.currentScriptID]===void 0&&(this.currentScriptID=Number(Object.keys(t)[0]),player.reality.automator.state.editorScript=this.currentScriptID,AutomatorData.clearUndoData()),this.isBlock&&BlockAutomator.hasUnparsableCommands(this.currentScript)&&this.currentScript!==""&&(AutomatorBackend.changeModes(this.currentScriptID),Modal.message.show("Some script commands were unrecognizable - defaulting to text editor.")),this.$nextTick(()=>{BlockAutomator.updateEditor(this.currentScript),!this.isBlock&&AutomatorTextUI.editor&&AutomatorTextUI.editor.performLint()})},fixAutomatorTypeDocs(){const t=player.reality.automator;t.currentInfoPane===Up.COMMANDS&&t.type===wr.BLOCK&&this.openMatchingAutomatorTypeDocs(),t.currentInfoPane===Up.BLOCKS&&t.type===wr.TEXT&&this.openMatchingAutomatorTypeDocs()},openMatchingAutomatorTypeDocs(){const t=player.reality.automator;t.currentInfoPane=t.type===wr.BLOCK?Up.BLOCKS:Up.COMMANDS},rename(){this.editingName=!0,this.$nextTick(()=>{this.updateCurrentScriptID(),this.$refs.renameInput.value=player.reality.automator.scripts[this.currentScriptID].name,this.$refs.renameInput.focus()})},deleteScript(){Modal.automatorScriptDelete.show({scriptID:this.currentScriptID})},nameEdited(){const t=this.$refs.renameInput.value.match(/^\s*(.*?)\s*$/u);let e="";if(t.length===2&&t[1].length>0&&(e=t[1]),e.length>AutomatorData.MAX_ALLOWED_SCRIPT_NAME_LENGTH){this.isNameTooLong=!0;return}this.isNameTooLong=!1,player.reality.automator.scripts[this.currentScriptID].name=e,this.updateScriptList(),this.$nextTick(()=>this.editingName=!1)},activePanelClass(t){return{"c-automator__button--active":this.infoPaneID===t}}}};var dee=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-automator-pane"},[i("div",{staticClass:"c-automator__controls l-automator__controls"},[i("div",{staticClass:"l-automator-button-row"},[i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Automator Introduction",expression:"'Automator Introduction'"}],staticClass:"fa-circle-info",class:e.activePanelClass(e.panelEnum.INTRO_PAGE),on:{click:function(n){e.infoPaneID=e.panelEnum.INTRO_PAGE}}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Scripting Information",expression:"'Scripting Information'"}],staticClass:"fa-list",class:e.activePanelClass(e.panelEnum.COMMANDS),on:{click:function(n){e.infoPaneID=e.panelEnum.COMMANDS}}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.errorTooltip,expression:"errorTooltip"}],staticClass:"fa-exclamation-triangle",class:e.activePanelClass(e.panelEnum.ERRORS),style:e.errorStyle,on:{click:function(n){e.infoPaneID=e.panelEnum.ERRORS}}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Extended Data Transfer",expression:"'Extended Data Transfer'"}],staticClass:"fa-window-restore",class:e.activePanelClass(e.panelEnum.DATA_TRANSFER),on:{click:function(n){e.infoPaneID=e.panelEnum.DATA_TRANSFER}}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"View recently executed commands",expression:"'View recently executed commands'"}],staticClass:"fa-eye",class:e.activePanelClass(e.panelEnum.EVENTS),on:{click:function(n){e.infoPaneID=e.panelEnum.EVENTS}}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Modify defined constants",expression:"'Modify defined constants'"}],staticClass:"fa-book",class:e.activePanelClass(e.panelEnum.CONSTANTS),on:{click:function(n){e.infoPaneID=e.panelEnum.CONSTANTS}}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Template Creator List",expression:"'Template Creator List'"}],staticClass:"fa-file-code",class:e.activePanelClass(e.panelEnum.TEMPLATES),on:{click:function(n){e.infoPaneID=e.panelEnum.TEMPLATES}}}),e.isBlock?i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Command menu for Block editor mode",expression:"'Command menu for Block editor mode'"}],staticClass:"fa-cubes",class:e.activePanelClass(e.panelEnum.BLOCKS),on:{click:function(n){e.infoPaneID=e.panelEnum.BLOCKS}}}):e._e(),e.fullScreen?i("span",{staticClass:"c-automator__status-text c-automator__status-text--small",class:{"c-automator__status-text--error":e.totalChars>e.maxTotalChars}},[e._v(" Across all scripts: "+e._s(e.formatInt(e.totalChars))+"/"+e._s(e.formatInt(e.maxTotalChars))+" ")]):e._e(),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.fullScreenTooltip,expression:"fullScreenTooltip"}],staticClass:"l-automator__expand-corner",class:e.fullScreenIconClass,on:{click:function(n){e.fullScreen=!e.fullScreen}}})],1),i("div",{staticClass:"l-automator-button-row"},[i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Export single automator script",expression:"'Export single automator script'"}],staticClass:"fa-file-export",on:{click:e.exportScript}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.importTooltip,expression:"importTooltip"}],staticClass:"fa-file-import",class:{"c-automator__status-text--error":!e.canMakeNewScript},on:{click:e.importScript}}),i("div",{staticClass:"l-automator__script-names"},[e.editingName?i("input",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.nameTooltip,expression:"nameTooltip"}],ref:"renameInput",staticClass:"l-automator__rename-input c-automator__rename-input",class:{"c-long-name-box":e.isNameTooLong},on:{blur:e.nameEdited,keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.$refs.renameInput.blur()}}}):[i("ExpandingControlBox",{staticClass:"l-automator__scripts-dropdown",attrs:{"auto-close":!0},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"c-automator-docs-script-select"},[e._v(" ▼ Current Script: "+e._s(e.currentEditorScriptName)+" ")])]},proxy:!0},{key:"dropdown",fn:function(){return[i("AutomatorScriptDropdownEntryList",{key:e.scriptCount})]},proxy:!0}],null,!1,1001015561)}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Rename script",expression:"'Rename script'"}],staticClass:"far fa-edit",on:{click:e.rename}})]],2),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete this script",expression:"'Delete this script'"}],staticClass:"fas fa-trash",on:{click:e.deleteScript}})],1)]),i("div",{staticClass:"c-automator-docs l-automator-pane__content"},[e.infoPaneID===e.panelEnum.INTRO_PAGE?i("AutomatorDocsIntroPage"):e.infoPaneID===e.panelEnum.COMMANDS?i("AutomatorDocsCommandList"):e.infoPaneID===e.panelEnum.ERRORS?i("AutomatorErrorPage"):e.infoPaneID===e.panelEnum.EVENTS?i("AutomatorEventLog"):e.infoPaneID===e.panelEnum.DATA_TRANSFER?i("AutomatorDataTransferPage"):e.infoPaneID===e.panelEnum.CONSTANTS?i("AutomatorDefinePage"):e.infoPaneID===e.panelEnum.TEMPLATES?i("AutomatorDocsTemplateList"):e.infoPaneID===e.panelEnum.BLOCKS?i("AutomatorBlocks"):e._e()],1)])},hee=[],fee=K(uee,dee,hee,!1,null,"a3072b8b");const pee=fee.exports,Sm={types:{NONE:0,LEVEL:1,RARITY:2,SAC_VALUE:3,FILTER_SCORE:4,CURRENT_REFINE:5,MAX_REFINE:6},labels:["None","Level","Rarity","Sacrifice Value","Glyph Filter Score","Current Refinement Value","Maximum Refinement Value"]},mee={name:"SelectGlyphInfoDropdown",computed:{availableTypes(){const t=Sm.types,e=[t.NONE,t.LEVEL,t.RARITY];return GlyphSacrificeHandler.canSacrifice&&e.push(t.SAC_VALUE),EffarigUnlock.glyphFilter.isUnlocked&&e.push(t.FILTER_SCORE),Ra.unlocks.unlockGlyphAlchemy.canBeApplied&&(e.push(t.CURRENT_REFINE),e.push(t.MAX_REFINE)),e}},methods:{setType(t){player.options.showHintText.glyphInfoType=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},getType(t){return Sm.labels[t]}}};var yee=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-select-theme"},[i("div",{staticClass:"l-select-theme__inner"},e._l(e.availableTypes,function(n){return i("div",{key:n,staticClass:"o-primary-btn l-select-theme__item c-select-theme__item",on:{click:function(r){return e.setType(n)}}},[e._v(" "+e._s(e.getType(n))+" ")])}),0)])},gee=[],vee=K(mee,yee,gee,!1,null,null);const bee=vee.exports;function _ee(t){return Array.isArray(t)?[]:{}}function mv(t,e){return t instanceof Decimal?new Decimal(t):t instanceof Set?new Set(t):e.clone!==!1&&e.isMergeableObject(t)?yv(_ee(t),t,e):t}function Eee(t,e,i){return t.concat(e).map(n=>mv(n,i))}function Tee(t,e,i){const n={};return i.isMergeableObject(t)&&Object.keys(t).forEach(r=>{n[r]=mv(t[r],i)}),Object.keys(e).forEach(r=>{t[r]&&t[r]instanceof Decimal?n[r]=new Decimal(e[r]):t[r]&&t[r]instanceof Set?n[r]=new Set(e[r]):!i.isMergeableObject(e[r])||!t[r]?n[r]=mv(e[r],i):n[r]=yv(t[r],e[r],i)}),n}function yv(t,e,i={}){if(i.arrayMerge=i.arrayMerge||Eee,i.isMergeableObject=i.isMergeableObject||wee,t instanceof Decimal)return new Decimal(e);if(t instanceof Set)return new Set(e);const n=Array.isArray(e),r=Array.isArray(t);return n===r?n?i.arrayMerge(t,e,i):Tee(t,e,i):mv(e,i)}function Yf(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return e||(e={arrayMerge:(n,r,s)=>r.map((a,o)=>n[o]&&n[o]instanceof Decimal?new Decimal(a):n[o]&&n[o]instanceof Set?new Set(a):!s.isMergeableObject(a)||!n[o]?mv(a,s):yv(n[o],a,s))}),t.reduce((i,n)=>yv(i,n,e),{})}function wee(t){return Cee(t)&&!See(t)}function Cee(t){return!!t&&typeof t=="object"}function See(t){const e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"}window.player={antimatter:L.E1,dimensions:{antimatter:Array.range(0,8).map(()=>({bought:0,costBumps:0,amount:L.D0})),infinity:Array.range(0,8).map(t=>({isUnlocked:!1,bought:0,amount:L.D0,cost:[L.E8,L.E9,L.E10,L.E20,L.E140,L.E200,L.E250,L.E280][t],baseAmount:0})),time:Array.range(0,8).map(t=>({cost:[L.D1,L.D5,L.E2,L.E3,L.E2350,L.E2650,L.E3000,L.E3350][t],amount:L.D0,bought:0}))},buyUntil10:!0,sacrificed:L.D0,achievementBits:Array.repeat(0,17),secretAchievementBits:Array.repeat(0,4),infinityUpgrades:new Set,infinityRebuyables:[0,0,0],challenge:{normal:{current:0,bestTimes:Array.repeat(Number.MAX_VALUE,11),completedBits:0},infinity:{current:0,bestTimes:Array.repeat(Number.MAX_VALUE,8),completedBits:0},eternity:{current:0,unlocked:0,requirementBits:0}},infinity:{upgradeBits:0},auto:{autobuyersOn:!0,disableContinuum:!1,reality:{mode:0,rm:L.D1,glyph:0,time:0,shard:0,isActive:!1},eternity:{mode:0,amount:L.D1,increaseWithMult:!0,time:1,xHighest:L.D1,isActive:!1},bigCrunch:{cost:1,interval:15e4,mode:0,amount:L.D1,increaseWithMult:!0,time:1,xHighest:L.D1,isActive:!0,lastTick:0},galaxy:{cost:1,interval:2e4,limitGalaxies:!1,maxGalaxies:1,buyMax:!1,buyMaxInterval:0,isActive:!0,lastTick:0},dimBoost:{cost:1,interval:4e3,limitDimBoosts:!1,maxDimBoosts:1,limitUntilGalaxies:!1,galaxies:10,buyMaxInterval:0,isActive:!0,lastTick:0},tickspeed:{isUnlocked:!1,cost:1,interval:500,mode:AUTOBUYER_MODE.BUY_SINGLE,isActive:!0,lastTick:0,isBought:!1},sacrifice:{multiplier:L.D2,isActive:!0},antimatterDims:{all:Array.range(0,8).map(t=>({isUnlocked:!1,cost:1,interval:[500,600,700,800,900,1e3,1100,1200][t],bulk:1,mode:AUTOBUYER_MODE.BUY_10,isActive:!0,lastTick:0,isBought:!1})),isActive:!0},infinityDims:{all:Array.range(0,8).map(()=>({isActive:!1,lastTick:0})),isActive:!0},timeDims:{all:Array.range(0,8).map(()=>({isActive:!1,lastTick:0})),isActive:!0},replicantiGalaxies:{isActive:!1},replicantiUpgrades:{all:Array.range(0,3).map(()=>({isActive:!1,lastTick:0})),isActive:!0},timeTheorems:{isActive:!1},dilationUpgrades:{all:Array.range(0,3).map(()=>({isActive:!1,lastTick:0})),isActive:!0},blackHolePower:{all:Array.range(0,2).map(()=>({isActive:!1})),isActive:!0},realityUpgrades:{all:Array.range(0,5).map(()=>({isActive:!1})),isActive:!0},imaginaryUpgrades:{all:Array.range(0,10).map(()=>({isActive:!1})),isActive:!0},darkMatterDims:{isActive:!1,lastTick:0},ascension:{isActive:!1,lastTick:0},annihilation:{isActive:!1,multiplier:1.05},singularity:{isActive:!1},ipMultBuyer:{isActive:!1},epMultBuyer:{isActive:!1}},infinityPoints:L.D0,infinities:L.D0,infinitiesBanked:L.D0,dimensionBoosts:0,galaxies:0,news:{seen:{},specialTickerData:{uselessNewsClicks:0,paperclips:0,newsQueuePosition:1e3,eiffelTowerChapter:0},totalSeen:0},lastUpdate:new Date().getTime(),backupTimer:0,chall2Pow:1,chall3Pow:L.D0_01,matter:L.D1,chall9TickspeedCostBumps:0,chall8TotalSacrifice:L.D1,ic2Count:0,partInfinityPoint:0,partInfinitied:0,break:!1,secretUnlocks:{themes:new Set,viewSecretTS:!1,cancerAchievements:!1},shownRuns:{Reality:!0,Eternity:!0,Infinity:!0},requirementChecks:{infinity:{maxAll:!1,noSacrifice:!0,noAD8:!0},eternity:{onlyAD1:!0,onlyAD8:!0,noAD1:!0,noRG:!0},reality:{noAM:!0,noTriads:!0,noPurchasedTT:!0,noInfinities:!0,noEternities:!0,noContinuum:!0,maxID1:L.D0,maxStudies:0,maxGlyphs:0,slowestBH:1},permanent:{emojiGalaxies:0,singleTickspeed:0,perkTreeDragging:0}},records:{gameCreatedTime:Date.now(),totalTimePlayed:0,timePlayedAtBHUnlock:Number.MAX_VALUE,realTimePlayed:0,realTimeDoomed:0,fullGameCompletions:0,previousRunRealTime:0,totalAntimatter:L.E1,recentInfinities:Array.range(0,10).map(()=>[Number.MAX_VALUE,Number.MAX_VALUE,L.D1,L.D1,""]),recentEternities:Array.range(0,10).map(()=>[Number.MAX_VALUE,Number.MAX_VALUE,L.D1,L.D1,"",L.D0]),recentRealities:Array.range(0,10).map(()=>[Number.MAX_VALUE,Number.MAX_VALUE,L.D1,1,"",0,0]),thisInfinity:{time:0,realTime:0,lastBuyTime:0,maxAM:L.D0,bestIPmin:L.D0,bestIPminVal:L.D0},bestInfinity:{time:Number.MAX_VALUE,realTime:Number.MAX_VALUE,bestIPminEternity:L.D0,bestIPminReality:L.D0},thisEternity:{time:0,realTime:0,maxAM:L.D0,maxIP:L.D0,bestIPMsWithoutMaxAll:L.D0,bestEPmin:L.D0,bestEPminVal:L.D0,bestInfinitiesPerMs:L.D0},bestEternity:{time:Number.MAX_VALUE,realTime:Number.MAX_VALUE,bestEPminReality:L.D0},thisReality:{time:0,realTime:0,maxAM:L.D0,maxIP:L.D0,maxEP:L.D0,bestEternitiesPerMs:L.D0,maxReplicanti:L.D0,maxDT:L.D0,bestRSmin:0,bestRSminVal:0},bestReality:{time:Number.MAX_VALUE,realTime:Number.MAX_VALUE,glyphStrength:0,RM:L.D0,RMSet:[],RMmin:L.D0,RMminSet:[],glyphLevel:0,glyphLevelSet:[],bestEP:L.D0,bestEPSet:[],speedSet:[],iMCapSet:[],laitelaSet:[]}},speedrun:{isUnlocked:!1,isActive:!1,isSegmented:!1,usedSTD:!1,hasStarted:!1,hideInfo:!1,displayAllMilestones:!1,startDate:0,name:"",offlineTimeUsed:0,records:Array.repeat(0,26),achievementTimes:{},seedSelection:SPEEDRUN_SEED_STATE.FIXED,initialSeed:0,previousRuns:{}},IPMultPurchases:0,version:25,infinityPower:L.D1,postC4Tier:0,eternityPoints:L.D0,eternities:L.D0,eternityUpgrades:new Set,epmultUpgrades:0,timeShards:L.D0,totalTickGained:0,totalTickBought:0,replicanti:{unl:!1,amount:L.D0,chance:.01,chanceCost:L.E150,interval:1e3,intervalCost:L.E140,boughtGalaxyCap:0,galaxies:0,galCost:L.E170},timestudy:{theorem:L.D0,maxTheorem:L.D0,amBought:0,ipBought:0,epBought:0,studies:[],shopMinimized:!1,preferredPaths:[[],0],presets:new Array(6).fill({name:"",studies:""})},eternityChalls:{},respec:!1,eterc8ids:50,eterc8repl:40,dilation:{studies:[],active:!1,tachyonParticles:L.D0,dilatedTime:L.D0,nextThreshold:L.E3,baseTachyonGalaxies:0,totalTachyonGalaxies:0,upgrades:new Set,rebuyables:{1:0,2:0,3:0,11:0,12:0,13:0},lastEP:L.DM1},realities:0,partSimulatedReality:0,reality:{realityMachines:L.D0,maxRM:L.D0,imaginaryMachines:0,iMCap:0,glyphs:{active:[],inventory:[],sac:{power:0,infinity:0,time:0,replication:0,dilation:0,effarig:0,reality:0},undo:[],sets:new Array(7).fill({name:"",glyphs:[]}),protectedRows:2,filter:{select:AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,trash:AUTO_GLYPH_REJECT.SACRIFICE,simple:0,types:gA.list.filter(t=>ALCHEMY_BASIC_GLYPH_TYPES.includes(t.id)).mapToObject(t=>t.id,t=>({rarity:0,score:0,effectCount:0,specifiedMask:0,effectScores:Array.repeat(0,t.effects.length)}))},createdRealityGlyph:!1,cosmetics:{active:!1,glowNotification:!1,unlockedFromNG:[],symbolMap:{},colorMap:{}}},initialSeed:Math.floor(Date.now()*Math.random()+1),seed:1,secondGaussian:1e6,musicSeed:Math.floor(Date.now()*Math.random()+3168660683),musicSecondGaussian:1e6,rebuyables:{1:0,2:0,3:0,4:0,5:0},upgradeBits:0,upgReqs:0,imaginaryUpgradeBits:0,imaginaryUpgReqs:0,imaginaryRebuyables:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},reqLock:{reality:0,imaginary:0},perks:new Set,respec:!1,showGlyphSacrifice:!1,showSidebarPanel:GLYPH_SIDEBAR_MODE.INVENTORY_MANAGEMENT,autoSort:0,autoCollapse:!1,autoAutoClean:!1,applyFilterToPurge:!1,moveGlyphsOnProtection:!1,perkPoints:0,unlockedEC:0,autoEC:!0,lastAutoEC:0,partEternitied:L.D0,autoAchieve:!0,gainedAutoAchievements:!0,automator:{state:{mode:vo.STOP,topLevelScript:0,editorScript:0,repeat:!0,forceRestart:!0,followExecution:!0,stack:[]},scripts:{},constants:{},constantSortOrder:[],execTimer:0,type:wr.TEXT,forceUnlock:!1,currentInfoPane:Up.INTRO_PAGE},achTimer:0,hasCheckedFilter:!1},blackHole:Array.range(0,2).map(t=>({id:t,intervalUpgrades:0,powerUpgrades:0,durationUpgrades:0,phase:0,active:!1,unlocked:!1,activations:0})),blackHolePause:!1,blackHoleAutoPauseMode:0,blackHolePauseTime:0,blackHoleNegative:1,celestials:{teresa:{pouredAmount:0,quoteBits:0,unlockBits:0,run:!1,bestRunAM:L.D1,bestAMSet:[],perkShop:Array.repeat(0,5),lastRepeatedMachines:L.D0},effarig:{relicShards:0,unlockBits:0,run:!1,quoteBits:0,glyphWeights:{ep:25,repl:25,dt:25,eternities:25},autoAdjustGlyphWeights:!1},enslaved:{isStoring:!1,stored:0,isStoringReal:!1,storedReal:0,autoStoreReal:!1,isAutoReleasing:!1,quoteBits:0,unlocks:[],run:!1,completed:!1,tesseracts:0,hasSecretStudy:!1,feltEternity:!1,progressBits:0,hintBits:0,hintUnlockProgress:0,glyphHintsGiven:0,zeroHintTime:0},v:{unlockBits:0,run:!1,quoteBits:0,runUnlocks:[0,0,0,0,0,0,0,0,0],goalReductionSteps:[0,0,0,0,0,0,0,0,0],STSpent:0,runGlyphs:[[],[],[],[],[],[],[],[],[]],runRecords:[-10,0,0,0,0,0,0,0,0],wantsFlipped:!0},ra:{pets:{teresa:{level:1,memories:0,memoryChunks:0,memoryUpgrades:0,chunkUpgrades:0},effarig:{level:1,memories:0,memoryChunks:0,memoryUpgrades:0,chunkUpgrades:0},enslaved:{level:1,memories:0,memoryChunks:0,memoryUpgrades:0,chunkUpgrades:0},v:{level:1,memories:0,memoryChunks:0,memoryUpgrades:0,chunkUpgrades:0}},alchemy:Array.repeat(0,21).map(()=>({amount:0,reaction:!1})),highestRefinementValue:{power:0,infinity:0,time:0,replication:0,dilation:0,effarig:0},quoteBits:0,momentumTime:0,unlockBits:0,run:!1,charged:new Set,disCharge:!1,peakGamespeed:1,petWithRemembrance:""},laitela:{darkMatter:L.D0,maxDarkMatter:L.D0,run:!1,quoteBits:0,dimensions:Array.range(0,4).map(()=>({amount:L.D0,intervalUpgrades:0,powerDMUpgrades:0,powerDEUpgrades:0,timeSinceLastUpdate:0,ascensionCount:0})),entropy:0,thisCompletion:3600,fastestCompletion:3600,difficultyTier:0,upgrades:{},darkMatterMult:1,darkEnergy:0,singularitySorting:{displayResource:0,sortResource:0,showCompleted:0,sortOrder:0},singularities:0,singularityCapIncreases:0,lastCheckedMilestones:0,milestoneGlow:!0},pelle:{doomed:!1,upgrades:new Set,remnants:0,realityShards:L.D0,records:{totalAntimatter:L.D0,totalInfinityPoints:L.D0,totalEternityPoints:L.D0},rebuyables:{antimatterDimensionMult:0,timeSpeedMult:0,glyphLevels:0,infConversion:0,galaxyPower:0,galaxyGeneratorAdditive:0,galaxyGeneratorMultiplicative:0,galaxyGeneratorAntimatterMult:0,galaxyGeneratorIPMult:0,galaxyGeneratorEPMult:0},rifts:{vacuum:{fill:L.D0,active:!1,reducedTo:1},decay:{fill:L.D0,active:!1,percentageSpent:0,reducedTo:1},chaos:{fill:0,active:!1,reducedTo:1},recursion:{fill:L.D0,active:!1,reducedTo:1},paradox:{fill:L.D0,active:!1,reducedTo:1}},progressBits:0,galaxyGenerator:{unlocked:!1,spentGalaxies:0,generatedGalaxies:0,phase:0,sacrificeActive:!1},quoteBits:0,collapsed:{upgrades:!1,rifts:!1,galaxies:!1},showBought:!1}},isGameEnd:!1,tabNotifications:new Set,triggeredTabNotificationBits:0,tutorialState:0,tutorialActive:!0,options:{news:{enabled:!0,repeatBuffer:40,AIChance:0,speed:1,includeAnimated:!0},notation:"Mixed scientific",notationDigits:{comma:5,notation:9},sidebarResourceID:0,retryChallenge:!1,retryCelestial:!1,showAllChallenges:!1,cloudEnabled:!0,hideGoogleName:!1,showCloudModal:!0,forceCloudOverwrite:!1,syncSaveIntervals:!0,hotkeys:!0,themeClassic:"Normal",themeModern:"Normal",updateRate:33,newUI:!0,offlineProgress:!0,loadBackupWithoutOffline:!1,automaticTabSwitching:!0,respecIntoProtected:!1,offlineTicks:1e5,hibernationCatchup:!0,statTabResources:0,multiplierTab:{currTab:0,showAltGroup:!1,replacePowers:!1},autosaveInterval:3e4,showTimeSinceSave:!0,saveFileName:"",exportedFileCount:0,hideCompletedAchievementRows:!1,glyphTextColors:!0,headerTextColored:!1,showNewGlyphIcon:!0,showUnequippedGlyphIcon:!0,highContrastRarity:!1,swapGlyphColors:!1,hideAlterationEffects:!1,ignoreGlyphEffects:!0,ignoreGlyphLevel:!0,ignoreGlyphRarity:!0,glyphBG:GLYPH_BG_SETTING.AUTO,glyphBorders:!0,showHintText:{showPercentage:!0,achievements:!0,achievementUnlockStates:!0,challenges:!0,studies:!0,glyphEffectDots:!0,realityUpgrades:!0,perks:!0,alchemy:!0,glyphInfoType:Sm.types.NONE,showGlyphInfoByDefault:!1},animations:{bigCrunch:!0,eternity:!0,dilation:!0,tachyonParticles:!0,reality:!0,background:!0,blobSnowflakes:16,blobHole:!1},confirmations:{armageddon:!0,sacrifice:!0,challenges:!0,exitChallenge:!0,eternity:!0,dilation:!0,resetReality:!0,glyphReplace:!0,glyphSacrifice:!0,autoClean:!0,sacrificeAll:!0,glyphSelection:!0,glyphUndo:!0,deleteGlyphSetSave:!0,glyphRefine:!0,bigCrunch:!0,replicantiGalaxy:!0,antimatterGalaxy:!0,dimensionBoost:!0,switchAutomatorMode:!0,respecIAP:!0},awayProgress:{antimatter:!0,dimensionBoosts:!0,antimatterGalaxies:!0,infinities:!0,infinityPoints:!0,replicanti:!0,replicantiGalaxies:!0,eternities:!0,eternityPoints:!0,tachyonParticles:!0,dilatedTime:!0,tachyonGalaxies:!0,timeTheorems:!0,achievementCount:!0,realities:!0,realityMachines:!0,imaginaryMachines:!0,relicShards:!0,darkMatter:!0,darkEnergy:!0,singularities:!0,celestialMemories:!0,blackHole:!0,realityShards:!0},hiddenTabBits:0,hiddenSubtabBits:Array.repeat(0,11),lastOpenTab:0,lastOpenSubtab:Array.repeat(0,11),perkLayout:0,perkPhysicsEnabled:!0,automatorEvents:{newestFirst:!1,timestampType:0,maxEntries:200,clearOnReality:!0,clearOnRestart:!0},invertTTgenDisplay:!1,autoRealityForFilter:!1},IAP:{enabled:!1,checkoutSession:{id:!1}}};const iB={defaultStart:Yf([{},player]),get isInMatterChallenge(){return NormalChallenge(11).isRunning||InfinityChallenge(6).isRunning},get isInAntimatterChallenge(){return NormalChallenge.isRunning||InfinityChallenge.isRunning},get antimatterChallenge(){return NormalChallenge.current||InfinityChallenge.current},get isInAnyChallenge(){return this.isInAntimatterChallenge||EternityChallenge.isRunning},get anyChallenge(){return this.antimatterChallenge||EternityChallenge.current},get canCrunch(){var i;if(Enslaved.isRunning&&Enslaved.BROKEN_CHALLENGES.includes((i=NormalChallenge.current)==null?void 0:i.id))return!1;const t=NormalChallenge.current||InfinityChallenge.current,e=t===void 0?Decimal.NUMBER_MAX_VALUE:t.goal;return player.records.thisInfinity.maxAM.gte(e)},get canEternity(){return player.records.thisEternity.maxIP.gte(iB.eternityGoal)},get bestRunIPPM(){return GameCache.bestRunIPPM.value},get averageRealTimePerEternity(){return GameCache.averageRealTimePerEternity.value},get tickSpeedMultDecrease(){return GameCache.tickSpeedMultDecrease.value},get dimensionMultDecrease(){return GameCache.dimensionMultDecrease.value},get infinityGoal(){const t=NormalChallenge.current||InfinityChallenge.current;return t===void 0?Decimal.NUMBER_MAX_VALUE:t.goal},get infinityLimit(){const t=NormalChallenge.current||InfinityChallenge.current;return t===void 0?Decimal.MAX_VALUE:t.goal},get eternityGoal(){return EternityChallenge.isRunning?EternityChallenge.current.currentGoal:requiredIPForEP(1)},get automatorUnlocked(){return AutomatorPoints.totalPoints>=AutomatorPoints.pointsForAutomator||player.reality.automator.forceUnlock},resetRequirements(t){const e=player.requirementChecks.reality.maxGlyphs;switch(t){case"reality":player.requirementChecks.reality={noAM:!0,noTriads:!0,noPurchasedTT:!0,noInfinities:!0,noEternities:!0,noContinuum:player.auto.disableContinuum,maxID1:L.D0,maxStudies:0,maxGlyphs:e,slowestBH:BlackHoles.areNegative?player.blackHoleNegative:1};case"eternity":player.requirementChecks.eternity={onlyAD1:!0,onlyAD8:!0,noAD1:!0,noRG:!0};case"infinity":player.requirementChecks.infinity={maxAll:!1,noSacrifice:!0,noAD8:!0};break;default:throw Error("Unrecognized prestige layer for requirement reset")}}};function nB(t){function e(i){return i!==null&&typeof i=="object"&&!(i instanceof Decimal)}for(const i in t){if(!Object.prototype.hasOwnProperty.call(t,i)||i==="automator")continue;let n=t[i];if(e(n)){nB(n);continue}typeof n=="number"&&Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>n,set:function(s){if(s==null)throw new Error("null/undefined player property assignment");if(typeof s!="number")throw new Error("Non-Number assignment to Number player property");if(!isFinite(s))throw new Error("NaN player property assignment");n=s}}),n instanceof Decimal&&Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>n,set:function(s){if(s==null)throw new Error("null/undefined player property assignment");if(!(s instanceof Decimal))throw new Error("Non-Decimal assignment to Decimal player property");if(!isFinite(s.mantissa)||!isFinite(s.exponent))throw new Error("NaN player property assignment");n=s}})}}const kee={container:document.getElementById("performance-stats"),samplePeriod:10*1e3,isOn:!1,currentBlocks:[],stats:{},turnOn(){this.isOn=!0,this.container.style.display="flex"},turnOff(){this.isOn=!1,this.container.style.display="none",this.stats={}},toggle(){this.isOn?this.turnOff():this.turnOn()},start(t){if(!this.isOn)return;const e=this.currentBlocks.length>0?this.currentBlocks.last().childBlocks:this.stats;let i=e[t];i===void 0&&(i={records:[],childBlocks:{}},e[t]=i),this.currentBlocks.push(i);const n={};i.records.push(n),n.timestamp=performance.now()},end(){if(!this.isOn)return;const t=performance.now(),i=this.currentBlocks.pop().records.last();i.duration=t-i.timestamp},render(){if(!this.isOn)return;let t=-1,e="";const i=this.samplePeriod;let n;function r(s){t++;for(const a in s){if(!Object.prototype.hasOwnProperty.call(s,a))continue;const o=s[a],c=o.records;for(;c.length>1&&c.last().timestamp-c.first().timestamp>i;)c.shift();if(e+=`${"-".repeat(t)}${a}: `,c.length>0){let d=0,p=Number.MIN_VALUE,m=Number.MAX_VALUE;for(const _ of c){const E=_.duration;d+=E,E>p&&(p=E),E<m&&(m=E)}const y=d/c.length;n===void 0&&(n=1e3/y,e=`FPS: ${Math.floor(n)}<br>${e}`),e+=`${y.toFixed(3)}/${m.toFixed(3)}/${p.toFixed(3)}`}e+="<br>",r(o.childBlocks)}t--}r(this.stats),this.container.innerHTML=e}};class km{add(e,i){throw new NotImplementedError}subtract(e,i){throw new NotImplementedError}multiply(e,i){throw new NotImplementedError}divide(e,i){throw new NotImplementedError}max(e,i){throw new NotImplementedError}min(e,i){throw new NotImplementedError}eq(e,i){throw new NotImplementedError}gt(e,i){throw new NotImplementedError}gte(e,i){throw new NotImplementedError}lt(e,i){throw new NotImplementedError}lte(e,i){throw new NotImplementedError}}km.number=new class extends km{add(e,i){return e+i}subtract(e,i){return e-i}multiply(e,i){return e*i}divide(e,i){return e/i}max(e,i){return Math.max(e,i)}min(e,i){return Math.min(e,i)}eq(e,i){return e===i}gt(e,i){return e>i}gte(e,i){return e>=i}lt(e,i){return e<i}lte(e,i){return e<=i}};km.decimal=new class extends km{add(e,i){return Decimal.add(e,i)}subtract(e,i){return Decimal.subtract(e,i)}multiply(e,i){return Decimal.multiply(e,i)}divide(e,i){return Decimal.divide(e,i)}max(e,i){return Decimal.max(e,i)}min(e,i){return Decimal.min(e,i)}eq(e,i){return Decimal.eq(e,i)}gt(e,i){return Decimal.gt(e,i)}gte(e,i){return Decimal.gte(e,i)}lt(e,i){return Decimal.lt(e,i)}lte(e,i){return Decimal.lte(e,i)}};let ri=class{get value(){throw new NotImplementedError}set value(e){throw new NotImplementedError}get operations(){throw new NotImplementedError}add(e){this.value=this.operations.add(this.value,e)}subtract(e){this.value=this.operations.max(this.operations.subtract(this.value,e),0)}multiply(e){this.value=this.operations.multiply(this.value,e)}divide(e){this.value=this.operations.divide(this.value,e)}eq(e){return this.operations.eq(this.value,e)}gt(e){return this.operations.gt(this.value,e)}gte(e){return this.operations.gte(this.value,e)}lt(e){return this.operations.lt(this.value,e)}lte(e){return this.operations.lte(this.value,e)}purchase(e){return this.gte(e)?(this.subtract(e),!0):!1}bumpTo(e){this.value=this.operations.max(this.value,e)}dropTo(e){this.value=this.operations.min(this.value,e)}get startingValue(){throw new NotImplementedError}reset(){this.value=this.startingValue}};class Yd extends ri{get operations(){return km.number}get startingValue(){return 0}}let Vr=class extends ri{get operations(){return km.decimal}get mantissa(){return this.value.mantissa}get exponent(){return this.value.exponent}get startingValue(){return L.D0}};window.DecimalCurrency=Vr;ri.antimatter=new class extends Vr{get value(){return player.antimatter}set value(t){InfinityChallenges.nextIC&&InfinityChallenges.notifyICUnlock(t),GameCache.cheapestAntimatterAutobuyer.value&&t.gte(GameCache.cheapestAntimatterAutobuyer.value)&&(TabNotification.newAutobuyer.clearTrigger(),TabNotification.newAutobuyer.tryTrigger()),player.antimatter=t,player.records.thisInfinity.maxAM=player.records.thisInfinity.maxAM.max(t),player.records.thisEternity.maxAM=player.records.thisEternity.maxAM.max(t),player.records.thisReality.maxAM=player.records.thisReality.maxAM.max(t),Pelle.isDoomed&&(player.celestials.pelle.records.totalAntimatter=player.celestials.pelle.records.totalAntimatter.max(t))}add(t){super.add(t),t.gt(0)&&(player.records.totalAntimatter=player.records.totalAntimatter.add(t),player.requirementChecks.reality.noAM=!1)}get productionPerSecond(){return NormalChallenge(12).isRunning?AntimatterDimension(1).productionPerRealSecond.plus(AntimatterDimension(2).productionPerRealSecond):AntimatterDimension(1).productionPerRealSecond}get startingValue(){return Pelle.isDisabled()?new Decimal(100):Effects.max(10,Perk.startAM,Achievement(21),Achievement(37),Achievement(54),Achievement(55),Achievement(78)).toDecimal()}};ri.matter=new class extends Vr{get value(){return player.matter}set value(t){player.matter=Decimal.min(t,Decimal.MAX_VALUE)}};ri.infinities=new class extends Vr{get value(){return player.infinities}set value(t){player.infinities=t}};ri.infinitiesBanked=new class extends Vr{get value(){return player.infinitiesBanked}set value(t){player.infinitiesBanked=t}};ri.infinitiesTotal=new class extends Vr{get value(){return player.infinities.plus(player.infinitiesBanked)}set value(t){player.infinities=t}};ri.infinityPoints=new class extends Vr{get value(){return player.infinityPoints}set value(t){player.infinityPoints=t,player.records.thisEternity.maxIP=player.records.thisEternity.maxIP.max(t),player.records.thisReality.maxIP=player.records.thisReality.maxIP.max(t),Pelle.isDoomed&&(player.celestials.pelle.records.totalInfinityPoints=player.celestials.pelle.records.totalInfinityPoints.max(t))}get startingValue(){return Pelle.isDisabled()?new Decimal(0):Effects.max(0,Perk.startIP1,Perk.startIP2,Achievement(104)).toDecimal()}reset(){super.reset(),player.records.thisEternity.maxIP=this.startingValue}};ri.infinityPower=new class extends Vr{get value(){return player.infinityPower}set value(t){player.infinityPower=t}};ri.eternities=new class extends Vr{get value(){return player.eternities}set value(t){player.eternities=t}get startingValue(){return Pelle.isDoomed?new Decimal(0):Effects.max(0,RealityUpgrade(10)).toDecimal()}};ri.eternityPoints=new class extends Vr{get value(){return player.eternityPoints}set value(t){player.eternityPoints=t,player.records.thisReality.maxEP=player.records.thisReality.maxEP.max(t),player.records.bestReality.bestEP.lt(t)&&(player.records.bestReality.bestEP=t,player.records.bestReality.bestEPSet=Glyphs.copyForRecords(Glyphs.active.filter(e=>e!==null))),Pelle.isDoomed&&(player.celestials.pelle.records.totalEternityPoints=player.celestials.pelle.records.totalEternityPoints.max(t))}get startingValue(){return Pelle.isDisabled()?new Decimal(0):Effects.max(0,Perk.startEP1,Perk.startEP2,Perk.startEP3).toDecimal()}reset(){super.reset(),player.records.thisReality.maxEP=this.startingValue}};ri.timeShards=new class extends Vr{get value(){return player.timeShards}set value(t){player.timeShards=t}};ri.timeTheorems=new class extends Vr{get value(){return player.timestudy.theorem}set value(t){player.timestudy.theorem=t,player.timestudy.maxTheorem=t.plus(TimeTheorems.calculateTimeStudiesCost())}get max(){return player.timestudy.maxTheorem}add(t){super.add(t),player.timestudy.maxTheorem=player.timestudy.maxTheorem.plus(t)}reset(){respecTimeStudies(!0),super.reset(),TimeTheoremPurchaseType.am.reset(),TimeTheoremPurchaseType.ip.reset(),TimeTheoremPurchaseType.ep.reset(),player.timestudy.maxTheorem=this.startingValue}};ri.tachyonParticles=new class extends Vr{get value(){return player.dilation.tachyonParticles}set value(t){player.dilation.tachyonParticles=t}};ri.dilatedTime=new class extends Vr{get value(){return player.dilation.dilatedTime}set value(t){player.dilation.dilatedTime=t,player.records.thisReality.maxDT=player.records.thisReality.maxDT.max(t)}};ri.realities=new class extends Yd{get value(){return player.realities}set value(t){player.realities=t}};ri.realityMachines=new class extends Vr{get value(){return player.reality.realityMachines}set value(t){const e=Decimal.min(t,MachineHandler.hardcapRM),i=e.minus(player.reality.realityMachines);player.reality.realityMachines=e,player.reality.maxRM=Decimal.max(player.reality.maxRM,e),player.records.bestReality.RM.lt(i)&&(player.records.bestReality.RM=i,player.records.bestReality.RMSet=Glyphs.copyForRecords(Glyphs.active.filter(n=>n!==null)))}};ri.perkPoints=new class extends Yd{get value(){return player.reality.perkPoints}set value(t){player.reality.perkPoints=t}};ri.relicShards=new class extends Yd{get value(){return player.celestials.effarig.relicShards}set value(t){player.celestials.effarig.relicShards=t}};ri.imaginaryMachines=new class extends Yd{get value(){return player.reality.imaginaryMachines}set value(t){player.reality.imaginaryMachines=Math.clampMax(t,MachineHandler.currentIMCap)}};ri.darkMatter=new class extends Vr{get value(){return player.celestials.laitela.darkMatter}set value(t){const e=Decimal.min(t,Number.MAX_VALUE);player.celestials.laitela.darkMatter=e,player.celestials.laitela.maxDarkMatter=player.celestials.laitela.maxDarkMatter.max(e)}get max(){return player.celestials.laitela.maxDarkMatter}set max(t){player.celestials.laitela.maxDarkMatter=t}};ri.darkEnergy=new class extends Yd{get value(){return player.celestials.laitela.darkEnergy}set value(t){player.celestials.laitela.darkEnergy=t}get productionPerSecond(){return DarkMatterDimensions.all.map(t=>t.productionPerSecond).sum()}};ri.singularities=new class extends Yd{get value(){return player.celestials.laitela.singularities}set value(t){player.celestials.laitela.singularities=t}};ri.remnants=new class extends Yd{get value(){return player.celestials.pelle.remnants}set value(t){player.celestials.pelle.remnants=t}};ri.realityShards=new class extends Vr{get value(){return player.celestials.pelle.realityShards}set value(t){player.celestials.pelle.realityShards=t}};ri.replicanti=new class extends Vr{get value(){return player.replicanti.amount}set value(t){player.replicanti.amount=t}};ri.galaxyGeneratorGalaxies=new class extends Yd{get value(){return player.galaxies+GalaxyGenerator.galaxies}set value(t){const e=player.galaxies+GalaxyGenerator.galaxies-t;player.celestials.pelle.galaxyGenerator.spentGalaxies+=e}};let Ln=class xh{constructor(e){this._getValue=e,xh.registerLazy(this)}static get registrar(){return xh._registrar===void 0&&(xh._registrar=[]),xh._registrar}static registerLazy(e){xh.registrar.push(e)}static invalidateAll(){for(const e of xh.registrar)e.invalidate()}get value(){return this._value===void 0&&(this._value=this._getValue()),this._value}invalidate(){this._value=void 0}invalidateOn(...e){for(const i of e)EventHub.logic.on(i,()=>this.invalidate());return this}};window.Lazy=Ln;const Kp={worstChallengeTime:new Ln(()=>player.challenge.normal.bestTimes.max()),bestRunIPPM:new Ln(()=>player.records.recentInfinities.map(t=>ratePerMinute(t[2],t[0])).reduce(Decimal.maxReducer)),averageRealTimePerEternity:new Ln(()=>player.records.recentEternities.map(t=>t[1]).reduce(Number.sumReducer)/(1e3*player.records.recentEternities.length)),tickSpeedMultDecrease:new Ln(()=>10-Effects.sum(BreakInfinityUpgrade.tickspeedCostMult,EternityChallenge(11).reward)),dimensionMultDecrease:new Ln(()=>10-Effects.sum(BreakInfinityUpgrade.dimCostMult,EternityChallenge(6).reward)),timeStudies:new Ln(()=>NormalTimeStudyState.studies.map(t=>player.timestudy.studies.includes(t.id))),currentStudyTree:new Ln(()=>new TimeStudyTree(TimeStudyTree.currentStudies)),achievementPeriod:new Ln(()=>TimeSpan.fromMinutes(30-Effects.sum(Perk.achievementGroup1,Perk.achievementGroup2,Perk.achievementGroup3,Perk.achievementGroup4)).totalMilliseconds),buyablePerks:new Ln(()=>Perks.all.filter(t=>t.canBeBought)),cheapestAntimatterAutobuyer:new Ln(()=>Autobuyer.antimatterDimension.zeroIndexed.concat(Autobuyer.tickspeed).filter(t=>!(t.isBought||t.isUnlocked)).map(t=>t.antimatterCost.toNumber()).min()),antimatterDimensionCommonMultiplier:new Ln(()=>antimatterDimensionCommonMultiplier()),antimatterDimensionFinalMultipliers:Array.range(0,9).map(t=>new Ln(()=>getDimensionFinalMultiplierUncached(t))),infinityDimensionCommonMultiplier:new Ln(()=>infinityDimensionCommonMultiplier()),timeDimensionCommonMultiplier:new Ln(()=>timeDimensionCommonMultiplier()),glyphInventorySpace:new Ln(()=>Glyphs.freeInventorySpace),glyphEffects:new Ln(()=>orderedEffectList.mapToObject(t=>t,t=>getAdjustedGlyphEffectUncached(t))),staticGlyphWeights:new Ln(()=>staticGlyphWeights()),logTotalGlyphSacrifice:new Ln(()=>GlyphSacrificeHandler.logTotalSacrifice),totalIPMult:new Ln(()=>totalIPMult()),challengeTimeSum:new Ln(()=>player.challenge.normal.bestTimes.sum()),infinityChallengeTimeSum:new Ln(()=>player.challenge.infinity.bestTimes.sum())};EventHub.logic.on(GAME_EVENT.GLYPHS_CHANGED,()=>{Kp.glyphInventorySpace.invalidate(),Kp.glyphEffects.invalidate(),Kp.staticGlyphWeights.invalidate()},Kp.glyphEffects);Kp.antimatterDimensionFinalMultipliers.invalidate=function(){for(const t of this)t.invalidate()};const rB=function(){const t=(e,i)=>{let n=-1;return{start(){if(this.isStarted)throw new Error("An already started interval cannot be started again.");n=setInterval(e,typeof i=="function"?i():i)},get isStarted(){return n!==-1},stop(){clearInterval(n),n=-1},restart(){this.stop(),this.start()}}};return{all(){return Object.values(rB).filter(e=>Object.prototype.hasOwnProperty.call(e,"start")&&Object.prototype.hasOwnProperty.call(e,"stop"))},start(){for(const e of this.all())e.start()},stop(){for(const e of this.all())e.stop()},restart(){for(const e of this.all())e.restart()},gameLoop:t(()=>gameLoop(),()=>player.options.updateRate),save:t(()=>GameStorage.save(),()=>player.options.autosaveInterval-Math.clampMin(0,Date.now()-GameStorage.lastSaveTime)),checkCloudSave:t(()=>{player.options.cloudEnabled&&Cloud.loggedIn&&Cloud.saveCheck()},600*1e3),checkEverySecond:t(()=>{Math.random()<1e-5&&SecretAchievement(18).unlock(),GameStorage.tryOnlineBackups()},1e3),checkForUpdates:t(()=>{isLocalEnvironment()||fetch("version.txt").then(e=>e.json()).then(e=>{e.version>player.version&&Modal.message.show(e.message,{callback:updateRefresh},3)})},6e4)}}();var sB={exports:{}};(function(t){(function(e,i,n){if(!e)return;for(var r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},o={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},c,d=1;d<20;++d)r[111+d]="f"+d;for(d=0;d<=9;++d)r[d+96]=d.toString();function p(x,M,q){if(x.addEventListener){x.addEventListener(M,q,!1);return}x.attachEvent("on"+M,q)}function m(x){if(x.type=="keypress"){var M=String.fromCharCode(x.which);return x.shiftKey||(M=M.toLowerCase()),M}return r[x.which]?r[x.which]:s[x.which]?s[x.which]:String.fromCharCode(x.which).toLowerCase()}function y(x,M){return x.sort().join(",")===M.sort().join(",")}function _(x){var M=[];return x.shiftKey&&M.push("shift"),x.altKey&&M.push("alt"),x.ctrlKey&&M.push("ctrl"),x.metaKey&&M.push("meta"),M}function E(x){if(x.preventDefault){x.preventDefault();return}x.returnValue=!1}function C(x){if(x.stopPropagation){x.stopPropagation();return}x.cancelBubble=!0}function S(x){return x=="shift"||x=="ctrl"||x=="alt"||x=="meta"}function k(){if(!c){c={};for(var x in r)x>95&&x<112||r.hasOwnProperty(x)&&(c[r[x]]=x)}return c}function R(x,M,q){return q||(q=k()[x]?"keydown":"keypress"),q=="keypress"&&M.length&&(q="keydown"),q}function O(x){return x==="+"?["+"]:(x=x.replace(/\+{2}/g,"+plus"),x.split("+"))}function I(x,M){var q,$,B,j=[];for(q=O(x),B=0;B<q.length;++B)$=q[B],o[$]&&($=o[$]),M&&M!="keypress"&&a[$]&&($=a[$],j.push("shift")),S($)&&j.push($);return M=R($,j,M),{key:$,modifiers:j,action:M}}function F(x,M){return x===null||x===i?!1:x===M?!0:F(x.parentNode,M)}function P(x){var M=this;if(x=x||i,!(M instanceof P))return new P(x);M.target=x,M._callbacks={},M._directMap={};var q={},$,B=!1,j=!1,z=!1;function X(Q){Q=Q||{};var Z=!1,W;for(W in q){if(Q[W]){Z=!0;continue}q[W]=0}Z||(z=!1)}function se(Q,Z,W,ne,ce,J){var pe,he,fe=[],be=W.type;if(!M._callbacks[Q])return[];for(be=="keyup"&&S(Q)&&(Z=[Q]),pe=0;pe<M._callbacks[Q].length;++pe)if(he=M._callbacks[Q][pe],!(!ne&&he.seq&&q[he.seq]!=he.level)&&be==he.action&&(be=="keypress"&&!W.metaKey&&!W.ctrlKey||y(Z,he.modifiers))){var re=!ne&&he.combo==ce,Ft=ne&&he.seq==ne&&he.level==J;(re||Ft)&&M._callbacks[Q].splice(pe,1),fe.push(he)}return fe}function ue(Q,Z,W,ne){M.stopCallback(Z,Z.target||Z.srcElement,W,ne)||Q(Z,W)===!1&&(E(Z),C(Z))}M._handleKey=function(Q,Z,W){var ne=se(Q,Z,W),ce,J={},pe=0,he=!1;for(ce=0;ce<ne.length;++ce)ne[ce].seq&&(pe=Math.max(pe,ne[ce].level));for(ce=0;ce<ne.length;++ce){if(ne[ce].seq){if(ne[ce].level!=pe)continue;he=!0,J[ne[ce].seq]=1,ue(ne[ce].callback,W,ne[ce].combo,ne[ce].seq);continue}he||ue(ne[ce].callback,W,ne[ce].combo)}var fe=W.type=="keypress"&&j;W.type==z&&!S(Q)&&!fe&&X(J),j=he&&W.type=="keydown"};function ve(Q){typeof Q.which!="number"&&(Q.which=Q.keyCode);var Z=m(Q);if(Z){if(Q.type=="keyup"&&B===Z){B=!1;return}M.handleKey(Z,_(Q),Q)}}function _e(){clearTimeout($),$=setTimeout(X,1e3)}function de(Q,Z,W,ne){q[Q]=0;function ce(be){return function(){z=be,++q[Q],_e()}}function J(be){ue(W,be,Q),ne!=="keyup"&&(B=m(be)),setTimeout(X,10)}for(var pe=0;pe<Z.length;++pe){var he=pe+1===Z.length,fe=he?J:ce(ne||I(Z[pe+1]).action);oe(Z[pe],fe,ne,Q,pe)}}function oe(Q,Z,W,ne,ce){M._directMap[Q+":"+W]=Z,Q=Q.replace(/\s+/g," ");var J=Q.split(" "),pe;if(J.length>1){de(Q,J,Z,W);return}pe=I(Q,W),M._callbacks[pe.key]=M._callbacks[pe.key]||[],se(pe.key,pe.modifiers,{type:pe.action},ne,Q,ce),M._callbacks[pe.key][ne?"unshift":"push"]({callback:Z,modifiers:pe.modifiers,action:pe.action,seq:ne,level:ce,combo:Q})}M._bindMultiple=function(Q,Z,W){for(var ne=0;ne<Q.length;++ne)oe(Q[ne],Z,W)},p(x,"keypress",ve),p(x,"keydown",ve),p(x,"keyup",ve)}P.prototype.bind=function(x,M,q){var $=this;return x=x instanceof Array?x:[x],$._bindMultiple.call($,x,M,q),$},P.prototype.unbind=function(x,M){var q=this;return q.bind.call(q,x,function(){},M)},P.prototype.trigger=function(x,M){var q=this;return q._directMap[x+":"+M]&&q._directMap[x+":"+M]({},x),q},P.prototype.reset=function(){var x=this;return x._callbacks={},x._directMap={},x},P.prototype.stopCallback=function(x,M){var q=this;if((" "+M.className+" ").indexOf(" mousetrap ")>-1||F(M,q.target))return!1;if("composedPath"in x&&typeof x.composedPath=="function"){var $=x.composedPath()[0];$!==x.target&&(M=$)}return M.tagName=="INPUT"||M.tagName=="SELECT"||M.tagName=="TEXTAREA"||M.isContentEditable},P.prototype.handleKey=function(){var x=this;return x._handleKey.apply(x,arguments)},P.addKeycodes=function(x){for(var M in x)x.hasOwnProperty(M)&&(r[M]=x[M]);c=null},P.init=function(){var x=P(i);for(var M in x)M.charAt(0)!=="_"&&(P[M]=function(q){return function(){return x[q].apply(x,arguments)}}(M))},P.init(),e.Mousetrap=P,t.exports&&(t.exports=P)})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(sB);var Aee=sB.exports;const Vl=ru(Aee),aB={};for(let t=1;t<=9;t++)aB[t+96]=`num${t}`;Vl.addKeycodes(aB);function Ree(t){return t.split("+")}const Iee=["ctrl","shift","alt","mod"];function Dee(t){return t.find(e=>!Iee.includes(e))}class xee{constructor(e){this.key=e}setAction(e,i){e.includes("shift")?this.shiftAction=i:this.action=i}start(){this.isRunning||(this.isRunning=!0,this.executeAction(),this.interval=setInterval(()=>{clearInterval(this.interval),this.executeAction(),this.interval=setInterval(()=>this.executeAction(),40)},500))}executeAction(){ui.view.shiftDown&&this.shiftAction!==void 0?this.shiftAction():this.action!==void 0&&this.action()}probablyStop(){ui.view.shiftDown&&this.stop()}stop(){this.isRunning=!1,this.interval&&clearInterval(this.interval),this.interval=void 0}}let en=class{static stopSpins(){for(const e of ow)e.stop()}static bind(e,i,n){Vl.bind(e,()=>GameUI.notify.error("We're sorry but hotkeys aren't supported"),n)}static bindRepeatable(e,i){this._bindSpin(e,()=>GameUI.notify.error("We're sorry but hotkeys aren't supported"))}static bindHotkey(e,i,n){Vl.bind(e,()=>GameUI.notify.error("We're sorry but hotkeys aren't supported"),n)}static bindRepeatableHotkey(e,i){this._bindSpin(e,()=>GameUI.notify.error("We're sorry but hotkeys aren't supported"))}static _bindSpin(e,i){const n=Ree(e),r=Dee(n);let s=ow.find(a=>a.key===r);s===void 0&&(s=new xee(r),ow.push(s),Vl.bind(r,()=>s.start(),"keydown"),Vl.bind(r,()=>s.stop(),"keyup")),e!==r&&(Vl.bind(e,()=>s.start(),"keydown"),Vl.bind(e,()=>s.probablyStop(),"keyup")),s.setAction(n,i)}static disable(){this.stopSpins(),Vl.reset()}};const ow=[];class oB{constructor(e){this.name=e,this.__module__=void 0}get isLoaded(){return this.__module__!==void 0}makePromise(e){if(!this.isLoaded)throw Error(`Node module "${this.name}" is not loaded.`);return new Promise((i,n)=>{e(this.__module__,i,n)})}safeCall(e,i){if(!this.isLoaded)throw Error(`Node module "${this.name}" is not loaded.`);try{return e(this.__module__)}catch(n){return console.error(`Failed to make a call to node module "${this.name}".`),console.error(n),i}}}const vA=new oB("electron");function lB(){return vA.isLoaded}function Mee(t){return vA.safeCall(e=>e.webFrame.setZoomFactor(t))}function Pee(t){return vA.safeCall(e=>e.shell.openExternal(t))}const Oee=.5,Nee=1.5;let $a=1;const qh={initialize(){this.isActive&&($a=Number(localStorage.getItem("Zoom")),$a=Number.isFinite($a)?$a:1,window.addEventListener("resize",()=>this.updateZoom()))},get isActive(){return lB()},increaseZoom(){if(this.isActive){if($a>Nee){GameUI.notify.info("Zoom Level is at Maximum");return}this.zoomFactor=Math.round(($a+.1)*10)/10}},decreaseZoom(){if(this.isActive){if($a<Oee){GameUI.notify.info("Zoom Level is at Minimum");return}this.zoomFactor=Math.round(($a-.1)*10)/10}},resetZoom(){this.isActive&&(this.zoomFactor=1)},get zoomFactor(){return $a},set zoomFactor(t){$a=t,localStorage.setItem("Zoom",$a.toString()),this.updateZoom(),GameUI.notify.info(`Size changed to ${Math.round($a*100)}%`)},updateZoom(){if(!this.isActive)return;const e=window.outerHeight/1020;Mee(e*$a)}};var ee=typeof ee<"u"?ee:{};ee.settings||(ee.settings={titleId:null,developerSecretKey:null,GlobalHeaderInjection:null,productionServerUrl:".playfabapi.com"});ee._internalSettings||(ee._internalSettings={entityToken:null,sdkVersion:"1.136.230206",requestGetParams:{sdk:"JavaScriptSDK-1.136.230206"},sessionTicket:null,verticalName:null,errorTitleId:"Must be have PlayFab.settings.titleId set to call this method",errorLoggedIn:"Must be logged in to call this method",errorEntityToken:"You must successfully call GetEntityToken before calling this",errorSecretKey:"Must have PlayFab.settings.developerSecretKey set to call this method",GetServerUrl:function(){return ee.settings.productionServerUrl.substring(0,4)!=="http"?ee._internalSettings.verticalName?"https://"+ee._internalSettings.verticalName+ee.settings.productionServerUrl:"https://"+ee.settings.titleId+ee.settings.productionServerUrl:ee.settings.productionServerUrl},InjectHeaders:function(t,e){if(e)for(var i in e)try{t.setRequestHeader(gHeaderKey,e[i])}catch(n){console.log("Failed to append header: "+i+" = "+e[i]+"Error: "+n)}},ExecuteRequest:function(t,e,i,n,r,s,a){var o=new Promise(function(c,d){if(r!=null&&typeof r!="function")throw"Callback must be null or a function";e==null&&(e={});var p=new Date,m=JSON.stringify(e),y=[t],_=ee._internalSettings.requestGetParams;if(_!=null){var E=!0;for(var C in _)E?(y.push("?"),E=!1):y.push("&"),y.push(C),y.push("="),y.push(_[C])}var S=y.join(""),k=new XMLHttpRequest;k.open("POST",S,!0),k.setRequestHeader("Content-Type","application/json"),k.setRequestHeader("X-PlayFabSDK","JavaScriptSDK-"+ee._internalSettings.sdkVersion),i!=null&&k.setRequestHeader(i,n),ee._internalSettings.InjectHeaders(k,ee.settings.GlobalHeaderInjection),ee._internalSettings.InjectHeaders(k,a),k.onloadend=function(){if(r!=null){var R=ee._internalSettings.GetPlayFabResponse(e,k,p,s);R.code===200?r(R,null):r(null,R)}},k.onerror=function(){if(r!=null){var R=ee._internalSettings.GetPlayFabResponse(e,k,p,s);r(null,R)}},k.send(m),k.onreadystatechange=function(){if(this.readyState===4){var R=ee._internalSettings.GetPlayFabResponse(e,this,p,s);this.status===200?c(R):d(R)}}});return o},GetPlayFabResponse:function(t,e,i,n){var r=null;try{r=JSON.parse(e.responseText)}catch{r={code:503,status:"Service Unavailable",error:"Connection error",errorCode:2,errorMessage:e.responseText}}return r.CallBackTimeMS=new Date-i,r.Request=t,r.CustomData=n,r},authenticationContext:{PlayFabId:null,EntityId:null,EntityType:null,SessionTicket:null,EntityToken:null},UpdateAuthenticationContext:function(t,e){var i={};return e.data.PlayFabId!==null&&(ee._internalSettings.authenticationContext.PlayFabId=e.data.PlayFabId,i.PlayFabId=e.data.PlayFabId),e.data.SessionTicket!==null&&(ee._internalSettings.authenticationContext.SessionTicket=e.data.SessionTicket,i.SessionTicket=e.data.SessionTicket),e.data.EntityToken!==null&&(ee._internalSettings.authenticationContext.EntityId=e.data.EntityToken.Entity.Id,i.EntityId=e.data.EntityToken.Entity.Id,ee._internalSettings.authenticationContext.EntityType=e.data.EntityToken.Entity.Type,i.EntityType=e.data.EntityToken.Entity.Type,ee._internalSettings.authenticationContext.EntityToken=e.data.EntityToken.EntityToken,i.EntityToken=e.data.EntityToken.EntityToken),t=Object.assign(t,i),t},AuthInfoMap:{"X-EntityToken":{authAttr:"entityToken",authError:"errorEntityToken"},"X-Authorization":{authAttr:"sessionTicket",authError:"errorLoggedIn"},"X-SecretKey":{authAttr:"developerSecretKey",authError:"errorSecretKey"}},GetAuthInfo:function(t,e){var i=ee._internalSettings.AuthInfoMap[e].authError,n=ee._internalSettings.AuthInfoMap[e].authAttr,r=null;n==="entityToken"?r=ee._internalSettings.entityToken:n==="sessionTicket"?r=ee._internalSettings.sessionTicket:n==="developerSecretKey"&&(r=ee.settings.developerSecretKey);var s=t.AuthenticationContext?t.AuthenticationContext[n]:r;return{authKey:e,authValue:s,authError:i}},ExecuteRequestWrapper:function(t,e,i,n,r,s){var a=null;if(i!==null){var o=ee._internalSettings.GetAuthInfo(e,i=i),i=o.authKey,a=o.authValue,c=o.authError;if(!a)throw c}return ee._internalSettings.ExecuteRequest(ee._internalSettings.GetServerUrl()+t,e,i,a,n,r,s)}});ee.buildIdentifier="adobuild_javascriptsdk_114";ee.sdkVersion="1.136.230206";ee.GenerateErrorReport=function(t){if(t==null)return"";var e=t.errorMessage;for(var i in t.errorDetails)for(var n in t.errorDetails[i])e+=`
`+i+": "+t.errorDetails[i][n];return e};ee.ClientApi={IsClientLoggedIn:function(){return ee._internalSettings.sessionTicket!=null&&ee._internalSettings.sessionTicket.length>0},ForgetAllCredentials:function(){ee._internalSettings.sessionTicket=null,ee._internalSettings.entityToken=null},AcceptTrade:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AcceptTrade",t,"X-Authorization",e,i,n)},AddFriend:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AddFriend",t,"X-Authorization",e,i,n)},AddGenericID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AddGenericID",t,"X-Authorization",e,i,n)},AddOrUpdateContactEmail:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AddOrUpdateContactEmail",t,"X-Authorization",e,i,n)},AddSharedGroupMembers:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AddSharedGroupMembers",t,"X-Authorization",e,i,n)},AddUsernamePassword:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AddUsernamePassword",t,"X-Authorization",e,i,n)},AddUserVirtualCurrency:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AddUserVirtualCurrency",t,"X-Authorization",e,i,n)},AndroidDevicePushNotificationRegistration:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AndroidDevicePushNotificationRegistration",t,"X-Authorization",e,i,n)},AttributeInstall:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/AttributeInstall",t,"X-Authorization",e,i,n)},CancelTrade:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/CancelTrade",t,"X-Authorization",e,i,n)},ConfirmPurchase:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ConfirmPurchase",t,"X-Authorization",e,i,n)},ConsumeItem:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ConsumeItem",t,"X-Authorization",e,i,n)},ConsumeMicrosoftStoreEntitlements:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ConsumeMicrosoftStoreEntitlements",t,"X-Authorization",e,i,n)},ConsumePS5Entitlements:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ConsumePS5Entitlements",t,"X-Authorization",e,i,n)},ConsumePSNEntitlements:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ConsumePSNEntitlements",t,"X-Authorization",e,i,n)},ConsumeXboxEntitlements:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ConsumeXboxEntitlements",t,"X-Authorization",e,i,n)},CreateSharedGroup:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/CreateSharedGroup",t,"X-Authorization",e,i,n)},ExecuteCloudScript:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ExecuteCloudScript",t,"X-Authorization",e,i,n)},GetAccountInfo:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetAccountInfo",t,"X-Authorization",e,i,n)},GetAdPlacements:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetAdPlacements",t,"X-Authorization",e,i,n)},GetAllUsersCharacters:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetAllUsersCharacters",t,"X-Authorization",e,i,n)},GetCatalogItems:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetCatalogItems",t,"X-Authorization",e,i,n)},GetCharacterData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetCharacterData",t,"X-Authorization",e,i,n)},GetCharacterInventory:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetCharacterInventory",t,"X-Authorization",e,i,n)},GetCharacterLeaderboard:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetCharacterLeaderboard",t,"X-Authorization",e,i,n)},GetCharacterReadOnlyData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetCharacterReadOnlyData",t,"X-Authorization",e,i,n)},GetCharacterStatistics:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetCharacterStatistics",t,"X-Authorization",e,i,n)},GetContentDownloadUrl:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetContentDownloadUrl",t,"X-Authorization",e,i,n)},GetCurrentGames:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetCurrentGames",t,"X-Authorization",e,i,n)},GetFriendLeaderboard:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetFriendLeaderboard",t,"X-Authorization",e,i,n)},GetFriendLeaderboardAroundPlayer:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetFriendLeaderboardAroundPlayer",t,"X-Authorization",e,i,n)},GetFriendsList:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetFriendsList",t,"X-Authorization",e,i,n)},GetGameServerRegions:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetGameServerRegions",t,"X-Authorization",e,i,n)},GetLeaderboard:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetLeaderboard",t,"X-Authorization",e,i,n)},GetLeaderboardAroundCharacter:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetLeaderboardAroundCharacter",t,"X-Authorization",e,i,n)},GetLeaderboardAroundPlayer:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetLeaderboardAroundPlayer",t,"X-Authorization",e,i,n)},GetLeaderboardForUserCharacters:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetLeaderboardForUserCharacters",t,"X-Authorization",e,i,n)},GetPaymentToken:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPaymentToken",t,"X-Authorization",e,i,n)},GetPhotonAuthenticationToken:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPhotonAuthenticationToken",t,"X-Authorization",e,i,n)},GetPlayerCombinedInfo:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayerCombinedInfo",t,"X-Authorization",e,i,n)},GetPlayerProfile:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayerProfile",t,"X-Authorization",e,i,n)},GetPlayerSegments:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayerSegments",t,"X-Authorization",e,i,n)},GetPlayerStatistics:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayerStatistics",t,"X-Authorization",e,i,n)},GetPlayerStatisticVersions:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayerStatisticVersions",t,"X-Authorization",e,i,n)},GetPlayerTags:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayerTags",t,"X-Authorization",e,i,n)},GetPlayerTrades:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayerTrades",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromFacebookIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromFacebookIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromFacebookInstantGamesIds:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromFacebookInstantGamesIds",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromGameCenterIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromGameCenterIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromGenericIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromGenericIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromGoogleIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromGoogleIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromGooglePlayGamesPlayerIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromGooglePlayGamesPlayerIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromKongregateIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromKongregateIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromNintendoServiceAccountIds:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromNintendoServiceAccountIds",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromNintendoSwitchDeviceIds:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromNintendoSwitchDeviceIds",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromPSNAccountIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromPSNAccountIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromSteamIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromSteamIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromTwitchIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromTwitchIDs",t,"X-Authorization",e,i,n)},GetPlayFabIDsFromXboxLiveIDs:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPlayFabIDsFromXboxLiveIDs",t,"X-Authorization",e,i,n)},GetPublisherData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPublisherData",t,"X-Authorization",e,i,n)},GetPurchase:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetPurchase",t,"X-Authorization",e,i,n)},GetSharedGroupData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetSharedGroupData",t,"X-Authorization",e,i,n)},GetStoreItems:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetStoreItems",t,"X-Authorization",e,i,n)},GetTime:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetTime",t,"X-Authorization",e,i,n)},GetTitleData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetTitleData",t,"X-Authorization",e,i,n)},GetTitleNews:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetTitleNews",t,"X-Authorization",e,i,n)},GetTitlePublicKey:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetTitlePublicKey",t,null,e,i,n)},GetTradeStatus:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetTradeStatus",t,"X-Authorization",e,i,n)},GetUserData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetUserData",t,"X-Authorization",e,i,n)},GetUserInventory:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetUserInventory",t,"X-Authorization",e,i,n)},GetUserPublisherData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetUserPublisherData",t,"X-Authorization",e,i,n)},GetUserPublisherReadOnlyData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetUserPublisherReadOnlyData",t,"X-Authorization",e,i,n)},GetUserReadOnlyData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GetUserReadOnlyData",t,"X-Authorization",e,i,n)},GrantCharacterToUser:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/GrantCharacterToUser",t,"X-Authorization",e,i,n)},LinkAndroidDeviceID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkAndroidDeviceID",t,"X-Authorization",e,i,n)},LinkApple:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkApple",t,"X-Authorization",e,i,n)},LinkCustomID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkCustomID",t,"X-Authorization",e,i,n)},LinkFacebookAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkFacebookAccount",t,"X-Authorization",e,i,n)},LinkFacebookInstantGamesId:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkFacebookInstantGamesId",t,"X-Authorization",e,i,n)},LinkGameCenterAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkGameCenterAccount",t,"X-Authorization",e,i,n)},LinkGoogleAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkGoogleAccount",t,"X-Authorization",e,i,n)},LinkGooglePlayGamesServicesAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkGooglePlayGamesServicesAccount",t,"X-Authorization",e,i,n)},LinkIOSDeviceID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkIOSDeviceID",t,"X-Authorization",e,i,n)},LinkKongregate:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkKongregate",t,"X-Authorization",e,i,n)},LinkNintendoServiceAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkNintendoServiceAccount",t,"X-Authorization",e,i,n)},LinkNintendoSwitchDeviceId:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkNintendoSwitchDeviceId",t,"X-Authorization",e,i,n)},LinkOpenIdConnect:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkOpenIdConnect",t,"X-Authorization",e,i,n)},LinkPSNAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkPSNAccount",t,"X-Authorization",e,i,n)},LinkSteamAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkSteamAccount",t,"X-Authorization",e,i,n)},LinkTwitch:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkTwitch",t,"X-Authorization",e,i,n)},LinkXboxAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/LinkXboxAccount",t,"X-Authorization",e,i,n)},LoginWithAndroidDeviceID:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithAndroidDeviceID",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithApple:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithApple",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithCustomID:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithCustomID",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithEmailAddress:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithEmailAddress",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithFacebook:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithFacebook",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithFacebookInstantGamesId:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithFacebookInstantGamesId",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithGameCenter:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithGameCenter",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithGoogleAccount:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithGoogleAccount",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithGooglePlayGamesServices:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithGooglePlayGamesServices",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithIOSDeviceID:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithIOSDeviceID",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithKongregate:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithKongregate",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithNintendoServiceAccount:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithNintendoServiceAccount",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithNintendoSwitchDeviceId:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithNintendoSwitchDeviceId",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithOpenIdConnect:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithOpenIdConnect",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithPlayFab:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithPlayFab",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithPSN:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithPSN",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithSteam:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithSteam",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithTwitch:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithTwitch",t,null,s,i,n),new Promise(function(a){a(r)})},LoginWithXbox:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;var r=JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext)),s=function(a,o){a!=null&&(a.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=a.data.SessionTicket),a.data.EntityToken!=null&&(ee._internalSettings.entityToken=a.data.EntityToken.EntityToken),r=ee._internalSettings.UpdateAuthenticationContext(r,a)),e!=null&&typeof e=="function"&&e(a,o)};return ee._internalSettings.ExecuteRequestWrapper("/Client/LoginWithXbox",t,null,s,i,n),new Promise(function(a){a(r)})},Matchmake:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/Matchmake",t,"X-Authorization",e,i,n)},OpenTrade:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/OpenTrade",t,"X-Authorization",e,i,n)},PayForPurchase:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/PayForPurchase",t,"X-Authorization",e,i,n)},PurchaseItem:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/PurchaseItem",t,"X-Authorization",e,i,n)},RedeemCoupon:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RedeemCoupon",t,"X-Authorization",e,i,n)},RefreshPSNAuthToken:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RefreshPSNAuthToken",t,"X-Authorization",e,i,n)},RegisterForIOSPushNotification:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RegisterForIOSPushNotification",t,"X-Authorization",e,i,n)},RegisterPlayFabUser:function(t,e,i,n){if(t.TitleId=ee.settings.titleId?ee.settings.titleId:t.TitleId,!t.TitleId)throw ee._internalSettings.errorTitleId;JSON.parse(JSON.stringify(ee._internalSettings.authenticationContext));var r=function(s,a){s!=null&&s.data.SessionTicket!=null&&(ee._internalSettings.sessionTicket=s.data.SessionTicket),e!=null&&typeof e=="function"&&e(s,a)};return ee._internalSettings.ExecuteRequestWrapper("/Client/RegisterPlayFabUser",t,null,r,i,n)},RemoveContactEmail:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RemoveContactEmail",t,"X-Authorization",e,i,n)},RemoveFriend:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RemoveFriend",t,"X-Authorization",e,i,n)},RemoveGenericID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RemoveGenericID",t,"X-Authorization",e,i,n)},RemoveSharedGroupMembers:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RemoveSharedGroupMembers",t,"X-Authorization",e,i,n)},ReportAdActivity:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ReportAdActivity",t,"X-Authorization",e,i,n)},ReportDeviceInfo:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ReportDeviceInfo",t,"X-Authorization",e,i,n)},ReportPlayer:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ReportPlayer",t,"X-Authorization",e,i,n)},RestoreIOSPurchases:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RestoreIOSPurchases",t,"X-Authorization",e,i,n)},RewardAdActivity:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/RewardAdActivity",t,"X-Authorization",e,i,n)},SendAccountRecoveryEmail:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/SendAccountRecoveryEmail",t,null,e,i,n)},SetFriendTags:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/SetFriendTags",t,"X-Authorization",e,i,n)},SetPlayerSecret:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/SetPlayerSecret",t,"X-Authorization",e,i,n)},StartPurchase:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/StartPurchase",t,"X-Authorization",e,i,n)},SubtractUserVirtualCurrency:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/SubtractUserVirtualCurrency",t,"X-Authorization",e,i,n)},UnlinkAndroidDeviceID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkAndroidDeviceID",t,"X-Authorization",e,i,n)},UnlinkApple:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkApple",t,"X-Authorization",e,i,n)},UnlinkCustomID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkCustomID",t,"X-Authorization",e,i,n)},UnlinkFacebookAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkFacebookAccount",t,"X-Authorization",e,i,n)},UnlinkFacebookInstantGamesId:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkFacebookInstantGamesId",t,"X-Authorization",e,i,n)},UnlinkGameCenterAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkGameCenterAccount",t,"X-Authorization",e,i,n)},UnlinkGoogleAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkGoogleAccount",t,"X-Authorization",e,i,n)},UnlinkGooglePlayGamesServicesAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkGooglePlayGamesServicesAccount",t,"X-Authorization",e,i,n)},UnlinkIOSDeviceID:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkIOSDeviceID",t,"X-Authorization",e,i,n)},UnlinkKongregate:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkKongregate",t,"X-Authorization",e,i,n)},UnlinkNintendoServiceAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkNintendoServiceAccount",t,"X-Authorization",e,i,n)},UnlinkNintendoSwitchDeviceId:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkNintendoSwitchDeviceId",t,"X-Authorization",e,i,n)},UnlinkOpenIdConnect:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkOpenIdConnect",t,"X-Authorization",e,i,n)},UnlinkPSNAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkPSNAccount",t,"X-Authorization",e,i,n)},UnlinkSteamAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkSteamAccount",t,"X-Authorization",e,i,n)},UnlinkTwitch:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkTwitch",t,"X-Authorization",e,i,n)},UnlinkXboxAccount:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlinkXboxAccount",t,"X-Authorization",e,i,n)},UnlockContainerInstance:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlockContainerInstance",t,"X-Authorization",e,i,n)},UnlockContainerItem:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UnlockContainerItem",t,"X-Authorization",e,i,n)},UpdateAvatarUrl:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdateAvatarUrl",t,"X-Authorization",e,i,n)},UpdateCharacterData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdateCharacterData",t,"X-Authorization",e,i,n)},UpdateCharacterStatistics:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdateCharacterStatistics",t,"X-Authorization",e,i,n)},UpdatePlayerStatistics:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdatePlayerStatistics",t,"X-Authorization",e,i,n)},UpdateSharedGroupData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdateSharedGroupData",t,"X-Authorization",e,i,n)},UpdateUserData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdateUserData",t,"X-Authorization",e,i,n)},UpdateUserPublisherData:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdateUserPublisherData",t,"X-Authorization",e,i,n)},UpdateUserTitleDisplayName:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/UpdateUserTitleDisplayName",t,"X-Authorization",e,i,n)},ValidateAmazonIAPReceipt:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ValidateAmazonIAPReceipt",t,"X-Authorization",e,i,n)},ValidateGooglePlayPurchase:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ValidateGooglePlayPurchase",t,"X-Authorization",e,i,n)},ValidateIOSReceipt:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ValidateIOSReceipt",t,"X-Authorization",e,i,n)},ValidateWindowsStoreReceipt:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/ValidateWindowsStoreReceipt",t,"X-Authorization",e,i,n)},WriteCharacterEvent:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/WriteCharacterEvent",t,"X-Authorization",e,i,n)},WritePlayerEvent:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/WritePlayerEvent",t,"X-Authorization",e,i,n)},WriteTitleEvent:function(t,e,i,n){return ee._internalSettings.ExecuteRequestWrapper("/Client/WriteTitleEvent",t,"X-Authorization",e,i,n)}};ee.ClientApi;ee.RegisterWithPhaser=function(){typeof Phaser>"u"||typeof Phaser.Plugin>"u"||(Phaser.Plugin.PlayFab=function(t,e){Phaser.Plugin.call(this,t,e)},Phaser.Plugin.PlayFab.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.PlayFab.prototype.constructor=Phaser.Plugin.PlayFab,Phaser.Plugin.PlayFab.prototype.PlayFab=ee,Phaser.Plugin.PlayFab.prototype.settings=ee.settings,Phaser.Plugin.PlayFab.prototype.ClientApi=ee.ClientApi)};ee.RegisterWithPhaser();const pc=ee.ClientApi;ee.settings.titleId="59813";function cB(){return cu(pc.GetUserData)}function Gee(t){return cu(pc.UpdateUserData,{Data:t})}function Uee(){return cu(pc.GetUserInventory)}function Lee(t,e,i){return cu(pc.PurchaseItem,{ItemId:t,Price:e,VirtualCurrency:i})}function Bee(t,e,i){return cu(pc.StartPurchase,{Items:[{ItemId:t,Quantity:e,Annotation:i}]})}function Fee(t,e,i){return cu(pc.PayForPurchase,{OrderId:t,Currency:e,ProviderName:i})}function $ee(t){return cu(pc.ConfirmPurchase,{OrderId:t})}function Hee(t,e){return cu(pc.ConsumeItem,{ItemInstanceId:t,ConsumeCount:e})}function Vee(t,e){return cu(pc.AddUserVirtualCurrency,{Amount:t,VirtualCurrency:e})}function cu(t,e){return pc.IsClientLoggedIn()?qee(t,e):Promise.reject("PlayFab Client is not logged in.")}function qee(t,e){return new Promise((i,n)=>{t(e??{},(r,s)=>{!s&&(r!=null&&r.data)?i(r.data):n(s??r)})})}function uB(t){lB()?Pee(t):window.open(t,"_blank").focus()}async function Yee(t){const e=`${t}STD`,s=(await Bee(e,1,"Purchased via in-game store")).OrderId,c=await Fee(s,"RM","Steam");if(gv.push(c.OrderId),SG){const d=c.ProviderData;uB(`https://store.steampowered.com/checkout/approvetxn/${d}/?returnurl=steam`)}}let KM=0,gv=[],lw=!1,cw=!1;async function dB(){if(lw){cw=!0;return}clearTimeout(KM),lw=!0;const t=[...gv];for(const i of t)try{await Wee(i)}catch{}lw=!1,KM=setTimeout(dB,cw?0:2e3),cw=!1}async function Wee(t){const e=await $ee(t),i=e.Items[0].ItemId,n=e.Items[0].ItemInstanceId;await Hee(n,1);const r=Number(i.replace("STD",""));gv=gv.filter(s=>s!==t),await Vee(r,"ST"),GameUI.notify.info(`${r} STDs Obtained!`),hB()}function jee(){return SG&&gv.length>0}async function hB(){var i,n,r;const t=await Uee();ShopPurchaseData.totalSTD=((i=t.VirtualCurrency)==null?void 0:i.ST)??0;for(const s of Object.keys(GameDatabase.shopPurchases)){const a=t.Inventory.find(o=>o.ItemId===s);ShopPurchaseData[s]=(a==null?void 0:a.RemainingUses)??0}GameUI.update();const e=await cB();ShopPurchaseData.unlockedCosmetics=((r=(n=e.Data.Cosmetics)==null?void 0:n.Value)==null?void 0:r.split(","))??[],GameUI.update()}async function zee(t,e,i){await Lee(t,e,"ST"),i!==void 0&&await Xee(i),hB()}async function Xee(t){var r,s,a;const e=await cB(),i=new Set(((a=(s=(r=e.Data)==null?void 0:r.Cosmetics)==null?void 0:s.Value)==null?void 0:a.split(","))??[]);i.add(t);const n=[...i];await Gee({Cosmetics:n.join(",")}),ShopPurchaseData.unlockedCosmetics=n,GameUI.update()}const fB=new oB("greenworks");function Kee(){return fB.safeCall(t=>t.getSteamId())}function Zee(t){return fB.makePromise((e,i,n)=>e.activateAchievement(t,i,n))}let uw=!1,Qee=!1,Jee=[];const gf={initialize(){if(uw)throw Error("Steam Runtime was initialized already.");uw=!0},get isActive(){if(!uw)throw Error("Steam Runtime was called before init.");return Qee},get screenName(){var t;return this.isActive?((t=Kee())==null?void 0:t.screenName)??"Steam user":"Non-Steam user"},activateAchievement(t){if(!this.isActive)return;const e=`Achievement${t}`;Jee.includes(e)&&Zee(e)},async purchaseIAP(t){this.isActive&&await Yee(t)},validatePurchases(){this.isActive&&dB()},async purchaseShopItem(t,e,i){if(!this.isActive)return GameUI.notify.error("Shop purchases are not available."),!1;try{return await zee(t,e,i),!0}catch(n){return GameUI.notify.error(n.errorMessage??n),!1}},get hasPendingPurchaseConfirmations(){return this.isActive?jee():!1}},pB=[{name:"Toggle Autobuyers",keys:["a"],type:"bindHotkey",function:()=>ete(),visible:!0},{name:"Buy one Tickspeed",keys:["shift","t"],type:"bindRepeatableHotkey",function:()=>buyTickSpeed(),visible:!0},{name:"Buy max Tickspeed",keys:["t"],type:"bindRepeatableHotkey",function:()=>buyMaxTickSpeed(),visible:!0},{name:"Max all",keys:["m"],type:"bindRepeatableHotkey",function:()=>maxAll(),visible:!0},{name:"Dimensional Sacrifice",keys:["s"],type:"bindRepeatableHotkey",function:()=>sacrificeBtnClick(),visible:!0},{name:"Dimension Boost",keys:["d"],type:"bindRepeatableHotkey",function:()=>manualRequestDimensionBoost(!0),visible:!0},{name:"Single Dimension Boost",keys:["shift","d"],type:"bindRepeatableHotkey",function:()=>manualRequestDimensionBoost(!1),visible:!1},{name:"Antimatter Galaxy",keys:["g"],type:"bindRepeatableHotkey",function:()=>manualRequestGalaxyReset(!0),visible:!0},{name:"Single Antimatter Galaxy",keys:["shift","g"],type:"bindRepeatableHotkey",function:()=>manualRequestGalaxyReset(!1),visible:!1},{name:"Big Crunch",keys:["c"],type:"bindRepeatableHotkey",function:()=>manualBigCrunchResetRequest(),visible:!0},{name:"Replicanti Galaxy",keys:["r"],type:"bindHotkey",function:()=>{replicantiGalaxyRequest(),setHoldingR(!0)},visible:()=>Replicanti.areUnlocked||PlayerProgress.eternityUnlocked()},{name:"Eternity",keys:["e"],type:"bindRepeatableHotkey",function:()=>eternityResetRequest(),visible:()=>PlayerProgress.eternityUnlocked()||Player.canEternity},{name:"Toggle Time Study respec",keys:["shift","e"],type:"bindHotkey",function:()=>{player.respec=!player.respec,GameUI.notify.info(`Time Study respec is now ${player.respec?"active":"inactive"}`)},visible:()=>PlayerProgress.eternityUnlocked()},{name:"Enter/Exit Dilation",keys:["l"],type:"bindRepeatableHotkey",function:()=>startDilatedEternityRequest(),visible:()=>PlayerProgress.realityUnlocked()||PlayerProgress.dilationUnlocked()},{name:"Reality",keys:["y"],type:"bindRepeatableHotkey",function:()=>requestManualReality(),visible:()=>PlayerProgress.realityUnlocked()||isRealityAvailable()},{name:"Toggle Glyph unequip",keys:["shift","y"],type:"bindHotkey",function:()=>{player.reality.respec=!player.reality.respec,GameUI.notify.info(`Glyph respec is now ${player.reality.respec?"active":"inactive"}`)},visible:()=>PlayerProgress.realityUnlocked()},{name:"Start/Pause Automator",keys:["u"],type:"bindHotkey",function:()=>ite(),visible:()=>Player.automatorUnlocked},{name:"Restart Automator",keys:["shift","u"],type:"bindHotkey",function:()=>nte(),visible:()=>Player.automatorUnlocked},{name:"Undo Edit (Automator)",keys:["mod","z"],type:"bind",function:()=>AutomatorData.undoScriptEdit(),visible:()=>Player.automatorUnlocked},{name:"Redo Edit (Automator)",keys:["mod","y"],type:"bind",function:()=>AutomatorData.redoScriptEdit(),visible:()=>Player.automatorUnlocked},{name:"Toggle Black Hole",keys:["b"],type:"bindHotkey",function:()=>BlackHoles.togglePause(),visible:()=>PlayerProgress.realityUnlocked()},{name:"Toggle Continuum",keys:["alt","a"],type:"bindHotkey",function:()=>tte(),visible:()=>Laitela.continuumUnlocked},{name:"Armageddon",keys:["z"],type:"bindRepeatableHotkey",function:()=>rte(),visible:()=>Pelle.isDoomed},{name:"Toggle Glyph unequip (Pelle)",keys:["shift","z"],type:"bindHotkey",function:()=>{Pelle.isDoomed&&(player.reality.respec=!player.reality.respec,GameUI.notify.info(`Glyph respec is now ${player.reality.respec?"active":"inactive"}`))},visible:()=>Pelle.isDoomed},{name:"Save game",keys:["mod","s"],type:"bind",function:()=>(GameStorage.save(!1,!0),!1),visible:!0},{name:"Export game",keys:["mod","e"],type:"bind",function:()=>(GameStorage.export(),!1),visible:!0},{name:"Open Hotkey List Modal",keys:["?"],type:"bind",function:()=>(ate(),!1),visible:!0},{name:"Open How To Play Modal",keys:["h"],type:"bind",function:()=>(ote(),!1),visible:!0},{name:"Modify visible tabs",keys:["tab"],type:"bind",function:()=>(cte(),!1),visible:!0},{name:"Confirm Modal",keys:["enter"],type:"bind",function:()=>(EventHub.dispatch(GAME_EVENT.ENTER_PRESSED),!0),visible:!0},{name:"Close Modal or open Options",keys:["esc"],type:"bind",function:()=>(ste(),!1),visible:!0},{name:"Paying respects",keys:["f"],type:"bindRepeatable",function:()=>{GameUI.notify.info("Paying respects"),SecretAchievement(13).unlock()},visible:!1},{name:"Change Tab",keys:["up"],type:"bind",function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,"up"),!1),visible:!1},{name:"Change Tab",keys:["down"],type:"bind",function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,"down"),!1),visible:!1},{name:"Change Subtab",keys:["left"],type:"bind",function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,"left"),!1),visible:!1},{name:"Change Subtab",keys:["right"],type:"bind",function:()=>(EventHub.dispatch(GAME_EVENT.ARROW_KEY_PRESSED,"right"),!1),visible:!1},{name:"Doesn't exist",keys:["9"],type:"bind",function:()=>SecretAchievement(41).unlock(),visible:!1},{name:"Adjust Autobuyers",keys:["mod","alt","a"],type:"bind",function:()=>lte(),visible:()=>Autobuyers.hasAutobuyersForEditModal},{name:"Fullscreen",keys:["F10"],type:"bind",function:()=>{},visible:()=>!1},{name:"Zoom In",keys:["ctrl","="],type:"bind",function:()=>qh.increaseZoom(),visible:()=>!1},{name:"Zoom In",keys:["ctrl","+"],type:"bind",function:()=>qh.increaseZoom(),visible:()=>!1},{name:"Zoom Out",keys:["ctrl","-"],type:"bind",function:()=>qh.decreaseZoom(),visible:()=>!1},{name:"Reset Zoom",keys:["ctrl","0"],type:"bind",function:()=>qh.resetZoom(),visible:()=>!1}];for(const t of pB)en[t.type](t.keys.join("+"),t.function);en.bind("r",()=>setHoldingR(!1),"keyup");en.bind("shift",()=>setShiftKey(!0),"keydown");en.bind("shift",()=>setShiftKey(!1),"keyup");en.bind("ctrl+shift",()=>setShiftKey(!0),"keydown");en.bind("ctrl+shift",()=>setShiftKey(!1),"keyup");en.bind("alt+shift",()=>setShiftKey(!0),"keydown");en.bind("alt+shift",()=>setShiftKey(!1),"keyup");en.bindHotkey("alt+t",()=>lc(Autobuyer.tickspeed));en.bindHotkey("shift+alt+t",()=>rS(Autobuyer.tickspeed));en.bindHotkey("alt+s",()=>lc(Autobuyer.sacrifice));en.bindHotkey("alt+d",()=>lc(Autobuyer.dimboost));en.bindHotkey("alt+g",()=>lc(Autobuyer.galaxy));en.bindHotkey("alt+r",()=>lc(Autobuyer.replicantiGalaxy));en.bindHotkey("alt+c",()=>lc(Autobuyer.bigCrunch));en.bindHotkey("alt+e",()=>lc(Autobuyer.eternity));en.bindHotkey("alt+y",()=>lc(Autobuyer.reality));(function(){function t(e){en.bindRepeatableHotkey(`${e}`,()=>buyManyDimension(e)),en.bindRepeatableHotkey(`num${e}`,()=>buyManyDimension(e)),en.bindRepeatableHotkey(`shift+${e}`,()=>buyOneDimension(e)),en.bindRepeatableHotkey(`shift+num${e}`,()=>buyOneDimension(e)),en.bindHotkey(`alt+${e}`,()=>lc(Autobuyer.antimatterDimension(e))),en.bindHotkey(`alt+num${e}`,()=>lc(Autobuyer.antimatterDimension(e))),en.bindHotkey(`shift+alt+${e}`,()=>rS(Autobuyer.antimatterDimension(e))),en.bindHotkey(`shift+alt+num${e}`,()=>rS(Autobuyer.antimatterDimension(e)))}for(let e=1;e<9;e++)t(e)})();en.bind(["mod+shift+c","mod+shift+i","mod+shift+j","f12"],()=>SecretAchievement(23).unlock());function lc(t){const e=t===Autobuyer.tickspeed&&t.isBought;return t.disabledByContinuum?GameUI.notify.info("Continuum is enabled, you cannot alter this autobuyer"):(t.isUnlocked||e)&&(t.toggle(),GameUI.notify.info(`${t.name} Autobuyer toggled ${t.isActive?"on":"off"}`)),!1}function rS(t){if(t.disabledByContinuum)GameUI.notify.info("Continuum is enabled, you cannot alter this autobuyer");else if(t.isUnlocked&&t.toggleMode!==null){t.toggleMode();const e=t.name==="Tickspeed"||t.hasUnlimitedBulk?"max":"10";GameUI.notify.info(`${t.name} Autobuyer set to buy ${t.mode===1?"singles":e}`)}return!1}function ete(){Tab.automation.isUnlocked&&(Autobuyers.toggle(),GameUI.notify.info(`Autobuyers ${player.auto.autobuyersOn?"resumed":"paused"}`))}function tte(){if(Laitela.continuumUnlocked){if(ImaginaryUpgrade(21).isLockingMechanics&&player.auto.disableContinuum){ImaginaryUpgrade(21).tryShowWarningModal();return}Laitela.setContinuum(player.auto.disableContinuum),GameUI.notify.info(`${player.auto.disableContinuum?"Disabled":"Enabled"} Continuum`)}}function ite(){if(Player.automatorUnlocked){if(AutomatorBackend.isRunning)AutomatorBackend.pause();else if(AutomatorBackend.isOn)AutomatorBackend.mode=AUTOMATOR_MODE.RUN;else{const i=player.reality.automator.state.editorScript;AutomatorBackend.restart(),AutomatorBackend.start(i),AutomatorData.currentErrors().length===0?GameUI.notify.automator(`Starting script "${AutomatorBackend.scriptName}"`):GameUI.notify.error(`Cannot start script "${AutomatorBackend.scriptName}" (has errors)`);return}const t=AutomatorBackend.isRunning?"Resuming":"Pausing",e=AutomatorBackend.currentLineNumber;GameUI.notify.automator(`${t} script "${AutomatorBackend.scriptName}" at line ${e}`)}}function nte(){if(Player.automatorUnlocked){const t=AutomatorBackend.isOn?"Restarting":"Starting";GameUI.notify.automator(`${t} script "${AutomatorBackend.scriptName}"`),AutomatorBackend.restart(),AutomatorBackend.start()}}function rte(){Pelle.canArmageddon&&Pelle.armageddon(!0)}function ste(){Quote.isOpen||Quote.isHistoryOpen?Quote.clearAll():Modal.isOpen?Modal.hideAll():Tab.options.show(!0)}function ate(){if(Modal.hotkeys.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Modal.isOpen&&Modal.hideAll(),Modal.hotkeys.show()}function ote(){if(Modal.h2p.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Modal.isOpen&&Modal.hideAll(),Modal.h2p.show()}function lte(){if(Modal.autobuyerEditModal.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Autobuyers.hasAutobuyersForEditModal&&(Modal.isOpen&&Modal.hideAll(),Modal.autobuyerEditModal.show())}function cte(){if(Modal.hiddenTabs.isOpen){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL);return}Modal.isOpen&&Modal.hideAll(),Modal.hiddenTabs.show()}EventHub.logic.on(GAME_EVENT.ARROW_KEY_PRESSED,t=>{if(Quote.isOpen||Quote.isHistoryOpen)return;const e=Tabs.current.key;if(t[0]==="up"||t[0]==="down"){const i=Tabs.currentUIFormat.flatMap(r=>r.isAvailable?[r.key]:[]);let n=i.indexOf(e);t[0]==="up"?n--:n++,n=(n+i.length)%i.length,Tab[i[n]].show(!0)}else if(t[0]==="left"||t[0]==="right"){const i=Tabs.current._currentSubtab.key,n=Tabs.current.subtabs.flatMap(s=>s.isAvailable?[s.key]:[]);let r=n.indexOf(i);t[0]==="left"?r--:r++,r=(r+n.length)%n.length,Tab[e][n[r]].show(!0)}});const dw=["up","up","down","down","left","right","left","right","b","a","enter"];let Ah=0;function ute(t){SecretAchievement(17).isUnlocked||(dw[Ah]===t?Ah++:Ah===2&&t==="up"?Ah=2:t===dw[0]?Ah=1:Ah=0,dw.length<=Ah&&(SecretAchievement(17).unlock(),Currency.antimatter.bumpTo(30),Speedrun.startTimer()))}const dte=Vl.prototype.handleKey;Vl.prototype.handleKey=function(t,e,i){return i.type==="keydown"&&ute(t),dte.apply(this,[t,e,i])};const qu={NORMAL:0,DISTANT:1,REMOTE:2};class hte{constructor(e,i){this.tier=e,this.amount=i}get isSatisfied(){return AntimatterDimension(this.tier).totalAmount.gte(this.amount)}}let Ed=class Mh{static get remoteStart(){return RealityUpgrade(21).effectOrDefault(800)}static get requirement(){return this.requirementAt(player.galaxies)}static buyableGalaxies(e){const i=bulkBuyBinarySearch(new Decimal(e),{costFunction:n=>this.requirementAt(n).amount,cumulative:!1},player.galaxies);if(!i)throw new Error("Unexpected failure to calculate galaxy purchase");return player.galaxies+i.quantity}static requirementAt(e){let i=Mh.baseCost+e*Mh.costMult;const n=Mh.typeAt(e);if(n===qu.DISTANT&&EternityChallenge(5).isRunning)i+=Math.pow(e,2)+e;else if(n===qu.DISTANT||n===qu.REMOTE){const s=this.costScalingStart,a=Math.clampMin(e-s+1,0);i+=Math.pow(a,2)+a}n===qu.REMOTE&&(i*=Math.pow(1.002,e-(Mh.remoteStart-1))),i-=Effects.sum(InfinityUpgrade.resetBoost),InfinityChallenge(5).isCompleted&&(i-=1),GlyphAlteration.isAdded("power")&&(i*=getSecondaryGlyphEffect("powerpow")),i=Math.floor(i);const r=Mh.requiredTier;return new hte(r,i)}static get costMult(){return Effects.min(NormalChallenge(10).isRunning?90:60,TimeStudy(42))}static get baseCost(){return NormalChallenge(10).isRunning?99:80}static get requiredTier(){return NormalChallenge(10).isRunning?6:8}static get canBeBought(){return!(EternityChallenge(6).isRunning&&!Enslaved.isRunning||NormalChallenge(8).isRunning||InfinityChallenge(7).isRunning||player.records.thisInfinity.maxAM.gt(Player.infinityGoal)&&(!player.break||Player.isInAntimatterChallenge))}static get lockText(){return this.canBeBought?null:EternityChallenge(6).isRunning?"Locked (Eternity Challenge 6)":InfinityChallenge(7).isRunning?"Locked (Infinity Challenge 7)":InfinityChallenge(1).isRunning?"Locked (Infinity Challenge 1)":NormalChallenge(8).isRunning?"Locked (8th Antimatter Dimension Autobuyer Challenge)":null}static get costScalingStart(){return 100+TimeStudy(302).effectOrDefault(0)+Effects.sum(TimeStudy(223),TimeStudy(224),EternityChallenge(5).reward,GlyphSacrifice.power)}static get type(){return this.typeAt(player.galaxies)}static typeAt(e){return e>=Mh.remoteStart?qu.REMOTE:EternityChallenge(5).isRunning||e>=this.costScalingStart?qu.DISTANT:qu.NORMAL}};function mB(){EventHub.dispatch(GAME_EVENT.GALAXY_RESET_BEFORE),player.galaxies++,(!Achievement(143).isUnlocked||Pelle.isDoomed&&!PelleUpgrade.galaxyNoResetDimboost.canBeApplied)&&(player.dimensionBoosts=0),softReset(0),Notations.current===Notation.emoji&&player.requirementChecks.permanent.emojiGalaxies++,player.requirementChecks.infinity.noSacrifice=!0,EventHub.dispatch(GAME_EVENT.GALAXY_RESET_AFTER)}function fte(t){if(!(!Ed.canBeBought||!Ed.requirement.isSatisfied)&&!GameEnd.creditsEverClosed){if(RealityUpgrade(7).isLockingMechanics&&player.galaxies>0){RealityUpgrade(7).tryShowWarningModal();return}if(player.options.confirmations.antimatterGalaxy){Modal.antimatterGalaxy.show({bulk:t&&EternityMilestone.autobuyMaxGalaxies.isReached});return}yB(t)}}function yB(t,e=Number.MAX_VALUE){const i=RealityUpgrade(7).isLockingMechanics?1:e;return EternityMilestone.autobuyMaxGalaxies.isReached&&t?pte(i):player.galaxies>=i||!Ed.canBeBought||!Ed.requirement.isSatisfied?!1:(Tutorial.turnOffEffect(TUTORIAL_STATE.GALAXY),mB(),!0)}function pte(t=Number.MAX_VALUE){if(player.galaxies>=t||!Ed.canBeBought)return!1;const e=Ed.requirement;if(!e.isSatisfied)return!1;const i=AntimatterDimension(e.tier),n=Math.clampMax(Ed.buyableGalaxies(Math.round(i.totalAmount.toNumber())),t);return Notations.current===Notation.emoji&&(player.requirementChecks.permanent.emojiGalaxies+=n-player.galaxies),player.galaxies=n-1,mB(),Enslaved.isRunning&&player.galaxies>1&&EnslavedProgress.c10.giveProgress(),Tutorial.turnOffEffect(TUTORIAL_STATE.GALAXY),!0}class mte{constructor(e){this.name=e.name,this.forcedName=e.forcedName,this.isUnlocked=()=>e.isUnlocked()||player.records.fullGameCompletions>0,this.awayOption=e.awayOption??this.name,this.showOption=e.showOption??!0,this.reference=e.reference??[this.name],this.applyFn=e.applyFn??(i=>i),this.classObjectReference=e.classObjectReference??this.name,this.appearsInAwayModal=e.appearsInAwayModal??!0}get option(){return player.options.awayProgress[this.awayOption]}set option(e){player.options.awayProgress[this.awayOption]=e}get classObject(){return`c-modal-away-progress__${this.classObjectReference.replace(/[A-Z]/gu,e=>`-${e.toLowerCase()}`)}`}get formatName(){return this.forcedName?this.forcedName:this.name.replace(/[A-Z]/gu,e=>` ${e}`).replace(/^\w/u,e=>e.toUpperCase())}navigateTo(e){let i=e;for(const n of this.reference)i=i[n];return this.applyFn(i)}}const Cg={all:{},index:[],showOption:[],appearsInAwayModal:[]};for(let t=0;t<no.awayProgressTypes.length;t++){const e=new mte(no.awayProgressTypes[t]),i=e.name;Cg.all[i]=e,Cg.index.push(i),e.showOption&&Cg.showOption.push(i),e.appearsInAwayModal&&Cg.appearsInAwayModal.push(i)}class yte{constructor(e){this.name=e.name,this._confirmationSetting=e.option,this.isUnlocked=()=>e.isUnlocked()||player.records.fullGameCompletions>0}get option(){return player.options.confirmations[this._confirmationSetting]}set option(e){player.options.confirmations[this._confirmationSetting]=e}}const sS=no.confirmationTypes.mapToObject(t=>t.option,t=>new yte(t));sS.index=Object.values(sS);class ao{constructor(e=null){this._id=e}get data(){throw new NotImplementedError}get isUnlocked(){throw new NotImplementedError}get id(){return this._id}get canTick(){const e=!player.auto.autobuyersOn||!this.constructor.isActive;return this.isActive&&!e&&(this.isUnlocked||this.isBought)}get isActive(){return this.data.isActive}set isActive(e){this.data.isActive=e}get bulk(){return 1}toggle(){this.isActive=!this.isActive}tick(){throw new NotImplementedError}reset(){}static get entryCount(){return 1}static get autobuyerGroupName(){throw new NotImplementedError}static get isActive(){return!0}static set isActive(e){throw new NotImplementedError}static createAccessor(){const e=this.entryCount,i=Array.range(1,e).map(s=>new this(s)),n=[null,...i],r=s=>n[s];return Object.defineProperties(r,{oneIndexed:{get:()=>n},zeroIndexed:{get:()=>i},entryCount:{get:()=>e},anyUnlocked:{get:()=>i.some(s=>s.isUnlocked)},allUnlocked:{get:()=>i.every(s=>s.isUnlocked)},allActive:{get:()=>i.every(s=>s.isActive)},groupName:{get:()=>this.autobuyerGroupName},isActive:{get:()=>this.isActive,set:s=>{this.isActive=s}}}),r.toggle=()=>this.isActive=!this.isActive,r}}class Wf extends ao{get interval(){return this.data.interval}get canTick(){return super.canTick&&this.timeSinceLastTick>=this.interval}get timeSinceLastTick(){return player.records.realTimePlayed-this.data.lastTick}tick(){this.data.lastTick=player.records.realTimePlayed}get resetTickOn(){}resetTick(e){e>=this.resetTickOn&&(this.data.lastTick=0)}reset(){}}class ub extends Wf{get baseInterval(){throw new NotImplementedError}get cost(){return this.data.cost}get interval(){const e=this.data.interval;return BreakInfinityUpgrade.autobuyerSpeed.isBought?e/2:e}get hasMaxedInterval(){return this.data.interval<=100}upgradeInterval(e){this.hasMaxedInterval||!e&&!Currency.infinityPoints.purchase(this.cost)||(this.data.cost*=2,this.data.interval=Math.clampMin(this.data.interval*.6,100),Achievement(52).tryUnlock(),Achievement(53).tryUnlock(),GameUI.update())}maxIntervalForFree(){for(;!this.hasMaxedInterval;)this.upgradeInterval(!0)}reset(){EternityMilestone.keepAutobuyers.isReached||PelleUpgrade.keepAutobuyers.canBeApplied||(this.data.interval=this.baseInterval,this.data.cost=1)}static createAccessor(){const e=super.createAccessor();return Object.defineProperty(e,"allMaxedInterval",{get:()=>e.zeroIndexed.every(i=>i.hasMaxedInterval)}),Object.defineProperty(e,"hasInstant",{get:()=>e.zeroIndexed.some(i=>i.interval<player.options.updateRate)}),e}}class gte extends ao{get data(){return player.auto.ipMultBuyer}get name(){return"Infinity Point Multiplier"}get isUnlocked(){return EternityMilestone.autobuyerIPMult.isReached&&!Pelle.isDoomed}get hasUnlimitedBulk(){return!0}tick(){InfinityUpgrade.ipMult.buyMax()}}class vte extends ao{get data(){return player.auto.epMultBuyer}get name(){return"Eternity Point Multiplier"}get isUnlocked(){return RealityUpgrade(13).isBought&&!Pelle.isDoomed}get hasUnlimitedBulk(){return!0}tick(){this.isActive&&(applyEU2(),EternityUpgrade.epMult.buyMax(!0))}}class bte extends ao{get data(){return player.auto.annihilation}get name(){return"Annihilation"}get isUnlocked(){return SingularityMilestone.annihilationAutobuyer.canBeApplied}get multiplier(){return this.data.multiplier}set multiplier(e){this.data.multiplier=e}get bulk(){return 0}get hasInput(){return!0}get inputType(){return"float"}get inputEntry(){return"multiplier"}tick(){Laitela.darkMatterMultGain>=this.multiplier&&Laitela.annihilate()}}class _te extends ub{get tier(){return this.id}get name(){return AntimatterDimension(this.tier).shortDisplayName}get fullName(){return`${this.name} Antimatter Dimension`}get data(){return player.auto.antimatterDims.all[this.tier-1]}get baseInterval(){return Player.defaultStart.auto.antimatterDims.all[this.tier-1].interval}get isUnlocked(){return Pelle.isDisabled(`antimatterDimAutobuyer${this.tier}`)?!1:this.data.isBought||this.canBeUpgraded}get isBought(){return this.data.isBought}get antimatterCost(){return L.E10.pow(this.tier-1).times(L.E40)}get canBeBought(){return!Pelle.isDisabled(`antimatterDimAutobuyer${this.tier}`)}get canBeUpgraded(){return NormalChallenge(this.tier).isCompleted}get disabledByContinuum(){return Laitela.continuumActive}get bulk(){return this.hasUnlimitedBulk?1e100:Math.clampMax(this.data.bulk,this.bulkCap)}get hasUnlimitedBulk(){return Achievement(61).isUnlocked}get bulkCap(){return 512}get hasMaxedBulk(){return this.bulk>=this.bulkCap}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get canUnlockSlowVersion(){return player.records.thisEternity.maxAM.gte(this.antimatterCost)}toggleMode(){this.mode=[AUTOBUYER_MODE.BUY_SINGLE,AUTOBUYER_MODE.BUY_10].nextSibling(this.mode)}get canTick(){const e=player.auto.antimatterDims,i=e.all[this.tier-1],n=e.isActive,r=i&&(Autobuyer.antimatterDimension.collapseDisplay?n:!0),s=AntimatterDimension(this.tier),a=s.isAvailableForPurchase&&s.isAffordable,o=this.timeSinceLastTick>=this.interval,c=player.auto.autobuyersOn&&this.isActive&&(this.isUnlocked||this.isBought);return r&&a&&o&&c}tick(){super.tick();const e=this.tier;switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:buyOneDimension(e);break;case AUTOBUYER_MODE.BUY_10:buyMaxDimension(e,this.bulk);break}}upgradeBulk(){this.hasMaxedBulk||Currency.infinityPoints.purchase(this.cost)&&(this.data.bulk=Math.clampMax(this.bulk*2,this.bulkCap),this.data.cost=Math.ceil(2.4*this.cost),Achievement(61).tryUnlock(),GameUI.update())}purchase(){this.canUnlockSlowVersion&&(this.data.isBought=!0)}get resetTickOn(){return Perk.antimatterNoReset.canBeApplied?PRESTIGE_EVENT.ANTIMATTER_GALAXY:PRESTIGE_EVENT.DIMENSION_BOOST}reset(){super.reset(),!(EternityMilestone.keepAutobuyers.isReached||PelleUpgrade.keepAutobuyers.canBeApplied)&&(this.data.isUnlocked=!1,this.data.isBought=!1,this.data.bulk=1,TabNotification.newAutobuyer.clearTrigger())}static get entryCount(){return 8}static get autobuyerGroupName(){return"Antimatter Dimension"}static get isActive(){return player.auto.antimatterDims.isActive}static set isActive(e){player.auto.antimatterDims.isActive=e}static createAccessor(){const e=super.createAccessor();return Object.defineProperties(e,{allBought:{get:()=>e.zeroIndexed.every(i=>i.isBought)},allUnlimitedBulk:{get:()=>e.zeroIndexed[0].hasUnlimitedBulk},bulkCap:{get:()=>e.zeroIndexed[0].bulkCap},collapseDisplay:{get:()=>e.allMaxedInterval&&e.allUnlocked&&e.allUnlimitedBulk}}),e}}class Ete extends ub{get data(){return player.auto.bigCrunch}get name(){return"Infinity"}get isUnlocked(){return Pelle.isDoomed?PelleStrikes.infinity.hasStrike:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(12).isCompleted}get baseInterval(){return Player.defaultStart.auto.bigCrunch.interval}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get hasAdditionalModes(){return EternityMilestone.bigCrunchModes.isReached}get increaseWithMult(){return this.data.increaseWithMult}set increaseWithMult(e){this.data.increaseWithMult=e}get amount(){return this.data.amount}get bulk(){return 0}set amount(e){this.data.amount=e}get time(){return this.data.time}set time(e){this.data.time=e}get xHighest(){return this.data.xHighest}set xHighest(e){this.data.xHighest=e}autoInfinitiesAvailable(e){return(e||EternityMilestone.autoInfinities.isReached)&&!EternityChallenge(4).isRunning&&!EternityChallenge(12).isRunning&&!Player.isInAntimatterChallenge&&player.auto.autobuyersOn&&this.data.isActive&&!Autobuyer.eternity.isActive&&this.mode===AUTO_CRUNCH_MODE.TIME&&this.time<=5&&!Autobuyer.eternity.autoEternitiesAvailable()}upgradeInterval(e){super.upgradeInterval(e),TabNotification.breakInfinity.tryTrigger()}bumpAmount(e){this.isUnlocked&&this.increaseWithMult&&(this.amount=this.amount.times(e))}get canTick(){return Player.canCrunch&&super.canTick}get resetTickOn(){return PRESTIGE_EVENT.ETERNITY}get highestPrevPrestige(){return player.records.thisEternity.maxIP}get timeToNextTick(){return Math.clampMin(this.time-Time.thisInfinityRealTime.totalSeconds,0)}get willInfinity(){if(!player.break||Player.isInAntimatterChallenge)return!0;switch(this.mode){case AUTO_CRUNCH_MODE.AMOUNT:return gainedInfinityPoints().gte(this.amount);case AUTO_CRUNCH_MODE.TIME:return Time.thisInfinityRealTime.totalSeconds>this.time;case AUTO_CRUNCH_MODE.X_HIGHEST:default:return gainedInfinityPoints().gte(this.highestPrevPrestige.times(this.xHighest))}}tick(){super.tick(),this.willInfinity&&bigCrunchResetRequest(!0)}reset(){super.reset(),!EternityMilestone.bigCrunchModes.isReached&&(this.mode=AUTO_CRUNCH_MODE.AMOUNT)}}class Tte extends ao{get data(){return player.auto.blackHolePower.all[this.id-1]}get name(){return`Black Hole ${this.id} Power`}get isUnlocked(){return Ra.unlocks.blackHolePowerAutobuyers.canBeApplied}get hasUnlimitedBulk(){return!0}tick(){const e=BlackHole(this.id);for(;Currency.realityMachines.gte(e.powerUpgrade.cost);)e.powerUpgrade.purchase()}static get entryCount(){return 2}static get autobuyerGroupName(){return"Black Hole Power"}static get isActive(){return player.auto.blackHolePower.isActive}static set isActive(e){player.auto.blackHolePower.isActive=e}}class wte extends Wf{get data(){return player.auto.ascension}get name(){return"Dark Matter Dimension Ascension"}get isUnlocked(){return SingularityMilestone.ascensionAutobuyers.canBeApplied}get interval(){return 1e3*SingularityMilestone.darkAutobuyerSpeed.effectValue}get hasUnlimitedBulk(){return!0}tick(){super.tick();for(let e=1;e<=SingularityMilestone.ascensionAutobuyers.effectValue;e++)DarkMatterDimension(e).ascend()}}class Cte extends Wf{get data(){return player.auto.darkMatterDims}get name(){return"Dark Matter Dimensions"}get isUnlocked(){return SingularityMilestone.darkDimensionAutobuyers.canBeApplied}get interval(){return 1e3*SingularityMilestone.darkAutobuyerSpeed.effectValue}get hasUnlimitedBulk(){return!0}tick(){super.tick(),Laitela.maxAllDMDimensions(SingularityMilestone.darkDimensionAutobuyers.effectValue)}}class Ste extends Wf{get _upgradeName(){return["dtGain","galaxyThreshold","tachyonGain"][this.id-1]}get data(){return player.auto.dilationUpgrades.all[this.id-1]}get name(){return["Dilated Time Multiplier","Tachyon Galaxy Threshold","Tachyon Particle Multiplier"][this.id-1]}get interval(){return 1e3*Perk.autobuyerFasterDilation.effectOrDefault(1)/PerkShopUpgrade.autoSpeed.effectOrDefault(1)}get isUnlocked(){return Perk.autobuyerDilation.isEffectActive&&!Pelle.isDoomed}get resetTickOn(){return PRESTIGE_EVENT.REALITY}get bulk(){return Effects.product(PerkShopUpgrade.bulkDilation,Perk.dilationAutobuyerBulk)}tick(){super.tick();const e=this._upgradeName;DilationUpgrade[e].purchase(this.bulk)}static get entryCount(){return 3}static get autobuyerGroupName(){return"Dilation Upgrade"}static get isActive(){return player.auto.dilationUpgrades.isActive}static set isActive(e){player.auto.dilationUpgrades.isActive=e}}class kte extends ub{get data(){return player.auto.dimBoost}get name(){return"Dimension Boost"}get isUnlocked(){return Pelle.isDisabled("dimBoostAutobuyer")?!1:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(10).isCompleted}get baseInterval(){return Player.defaultStart.auto.dimBoost.interval}get limitDimBoosts(){return this.data.limitDimBoosts}set limitDimBoosts(e){this.data.limitDimBoosts=e}get maxDimBoosts(){return this.data.maxDimBoosts}set maxDimBoosts(e){this.data.maxDimBoosts=e}get limitUntilGalaxies(){return this.data.limitUntilGalaxies}set limitUntilGalaxies(e){this.data.limitUntilGalaxies=e}get galaxies(){return this.data.galaxies}set galaxies(e){this.data.galaxies=e}get bulk(){return this.data.bulk}set bulk(e){this.data.bulk=e}get buyMaxInterval(){return this.data.buyMaxInterval}set buyMaxInterval(e){this.data.buyMaxInterval=e}get isBuyMaxUnlocked(){return BreakInfinityUpgrade.autobuyMaxDimboosts.isBought}get interval(){return this.isBuyMaxUnlocked?TimeSpan.fromSeconds(this.buyMaxInterval).totalMilliseconds:super.interval}get canTick(){return DimBoost.canBeBought&&DimBoost.requirement.isSatisfied&&super.canTick}get resetTickOn(){return this.isBuyMaxUnlocked?PRESTIGE_EVENT.INFINITY:PRESTIGE_EVENT.ANTIMATTER_GALAXY}tick(){if(this.isBuyMaxUnlocked){const n=!this.limitUntilGalaxies||player.galaxies>=this.galaxies;if(!DimBoost.canUnlockNewDimension&&!n)return;requestDimensionBoost(!0),super.tick();return}const e=!this.limitDimBoosts||DimBoost.purchasedBoosts<this.maxDimBoosts,i=this.limitUntilGalaxies&&player.galaxies>=this.galaxies;(e||i)&&(requestDimensionBoost(!1),super.tick())}}class Ate extends ao{get data(){return player.auto.eternity}get name(){return"Eternity"}get isUnlocked(){return EternityMilestone.autobuyerEternity.isReached}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get amount(){return this.data.amount}get increaseWithMult(){return this.data.increaseWithMult}set increaseWithMult(e){this.data.increaseWithMult=e}set amount(e){this.data.amount=e}get time(){return this.data.time}set time(e){this.data.time=e}get xHighest(){return this.data.xHighest}set xHighest(e){this.data.xHighest=e}get hasAdditionalModes(){return RealityUpgrade(13).isBought}autoEternitiesAvailable(e){return(e||EternityMilestone.autoEternities.isReached)&&!Player.isInAnyChallenge&&!player.dilation.active&&player.auto.autobuyersOn&&this.data.isActive&&this.mode===AUTO_ETERNITY_MODE.AMOUNT&&this.amount.equals(0)}bumpAmount(e){this.isUnlocked&&this.increaseWithMult&&(this.amount=this.amount.times(e))}get highestPrevPrestige(){return player.records.thisReality.maxEP}get timeToNextTick(){return Math.clampMin(this.time-Time.thisEternityRealTime.totalSeconds,0)}get willEternity(){var e;if(EternityChallenge.isRunning)return!((e=EternityChallenge.current)!=null&&e.gainedCompletionStatus.hasMoreCompletions);switch(this.mode){case AUTO_ETERNITY_MODE.AMOUNT:return gainedEternityPoints().gte(this.amount);case AUTO_ETERNITY_MODE.TIME:return Time.thisEternityRealTime.totalSeconds>this.time;case AUTO_ETERNITY_MODE.X_HIGHEST:default:return gainedEternityPoints().gte(this.highestPrevPrestige.times(this.xHighest))}}tick(){this.willEternity&&eternity(!1,!0)}reset(){EternityMilestone.autobuyerEternity.isReached||(this.isActive=!1)}}class Rte extends ub{get data(){return player.auto.galaxy}get name(){return"Antimatter Galaxy"}get isUnlocked(){return Pelle.isDisabled("galaxyAutobuyer")?!1:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(11).isCompleted}get baseInterval(){return Player.defaultStart.auto.galaxy.interval}get limitGalaxies(){return this.data.limitGalaxies}set limitGalaxies(e){this.data.limitGalaxies=e}get maxGalaxies(){return this.data.maxGalaxies}set maxGalaxies(e){this.data.maxGalaxies=e}get buyMaxInterval(){return this.data.buyMaxInterval}set buyMaxInterval(e){this.data.buyMaxInterval=e}get isBuyMaxUnlocked(){return EternityMilestone.autobuyMaxGalaxies.isReached}get interval(){return this.isBuyMaxUnlocked?TimeSpan.fromSeconds(this.buyMaxInterval).totalMilliseconds:super.interval}get canTick(){return Galaxy.canBeBought&&Galaxy.requirement.isSatisfied&&super.canTick}get resetTickOn(){return PRESTIGE_EVENT.INFINITY}tick(){super.tick();const e=this.limitGalaxies?this.maxGalaxies:Number.MAX_VALUE;requestGalaxyReset(this.isBuyMaxUnlocked,e)}}class Ite extends ao{get name(){return ImaginaryUpgrade(this.id).config.name}get data(){return player.auto.imaginaryUpgrades.all[this.id-1]}get isUnlocked(){return ImaginaryUpgrade(20).canBeApplied}get hasUnlimitedBulk(){return!0}tick(){const e=ImaginaryUpgrade(this.id);for(;Currency.imaginaryMachines.gte(e.cost);)e.purchase()}static get entryCount(){return 10}static get autobuyerGroupName(){return"Imaginary Upgrade"}static get isActive(){return player.auto.imaginaryUpgrades.isActive}static set isActive(e){player.auto.imaginaryUpgrades.isActive=e}}class Dte extends Wf{get tier(){return this.id}get dimension(){return InfinityDimension(this.tier)}get name(){return this.dimension.shortDisplayName}get fullName(){return`${this.name} Infinity Dimension`}get data(){return player.auto.infinityDims.all[this.tier-1]}get interval(){return 1e3*Perk.autobuyerFasterID.effectOrDefault(1)/PerkShopUpgrade.autoSpeed.effectOrDefault(1)}get isUnlocked(){return EternityMilestone[`autobuyerID${this.tier}`].isReached||PelleUpgrade.IDAutobuyers.canBeApplied}get resetTickOn(){return PRESTIGE_EVENT.ETERNITY}get hasUnlimitedBulk(){return!0}get canTick(){return InfinityDimensions.canAutobuy()&&this.dimension.isAvailableForPurchase&&super.canTick}tick(){super.tick(),this.dimension.buyMax(!0)}static get entryCount(){return 8}static get autobuyerGroupName(){return"Infinity Dimension"}static get isActive(){return player.auto.infinityDims.isActive}static set isActive(e){player.auto.infinityDims.isActive=e}}class xte extends ao{get data(){return player.auto.reality}get name(){return"Reality"}get isUnlocked(){return RealityUpgrade(25).isBought}get canTick(){return super.canTick&&!GlyphSelection.active}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get rm(){return this.data.rm}set rm(e){this.data.rm=e}get glyph(){return this.data.glyph}set glyph(e){this.data.glyph=e}get time(){return this.data.time}set time(e){this.data.time=e}get shard(){return this.data.shard}set shard(e){this.data.shard=e.clamp(0,Number.MAX_VALUE).toNumber()}toggleMode(){this.mode=[AUTO_REALITY_MODE.RM,AUTO_REALITY_MODE.GLYPH,AUTO_REALITY_MODE.EITHER,AUTO_REALITY_MODE.BOTH,AUTO_REALITY_MODE.TIME,AUTO_REALITY_MODE.RELIC_SHARD].nextSibling(this.mode)}bumpAmount(e){this.isUnlocked&&(this.rm=this.rm.times(e))}tick(){const e=[AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,AUTO_GLYPH_SCORE.LOWEST_ALCHEMY,AUTO_GLYPH_SCORE.ALCHEMY_VALUE],i=EffarigUnlock.glyphFilter.isUnlocked&&!player.reality.hasCheckedFilter&&!e.includes(AutoGlyphProcessor.scoreMode);if(isRealityAvailable()&&player.options.autoRealityForFilter&&i){const o=gainedGlyphLevel(),d=[AUTO_REALITY_MODE.GLYPH,AUTO_REALITY_MODE.EITHER,AUTO_REALITY_MODE.BOTH].includes(this.mode)?{actualLevel:Math.min(this.glyph,Glyphs.levelCap),rawLevel:1}:o,p=GlyphSelection.glyphList(GlyphSelection.choiceCount,d,{isChoosingGlyph:!1}),m=AutoGlyphProcessor.pick(p);if(player.reality.hasCheckedFilter=!0,!AutoGlyphProcessor.wouldKeep(m)){autoReality();return}}let n=!1;const r=simulatedRealityCount(!1)+1,s=MachineHandler.gainedRealityMachines.times(r).gte(this.rm),a=gainedGlyphLevel().actualLevel>=Math.min(this.glyph,Glyphs.levelCap);switch(this.mode){case AUTO_REALITY_MODE.RM:n=s;break;case AUTO_REALITY_MODE.GLYPH:n=a;break;case AUTO_REALITY_MODE.EITHER:n=s||a;break;case AUTO_REALITY_MODE.BOTH:n=s&&a;break;case AUTO_REALITY_MODE.TIME:n=player.records.thisReality.realTime/1e3>this.time;break;case AUTO_REALITY_MODE.RELIC_SHARD:n=Effarig.shardsGained*r>this.shard;break}n&&autoReality()}}class Mte extends ao{get name(){return RealityUpgrade(this.id).config.name}get data(){return player.auto.realityUpgrades.all[this.id-1]}get isUnlocked(){return Ra.unlocks.instantECAndRealityUpgradeAutobuyers.canBeApplied}get hasUnlimitedBulk(){return!0}tick(){const e=RealityUpgrade(this.id);for(;Currency.realityMachines.gte(e.cost);)e.purchase()}static get entryCount(){return 5}static get autobuyerGroupName(){return"Reality Upgrade"}static get isActive(){return player.auto.realityUpgrades.isActive}static set isActive(e){player.auto.realityUpgrades.isActive=e}}class Pte extends ao{get data(){return player.auto.replicantiGalaxies}get name(){return"Replicanti Galaxy"}get isUnlocked(){return EternityMilestone.autobuyerReplicantiGalaxy.isReached}get isEnabled(){return Achievement(138).isUnlocked||!TimeStudy(131).isBought}get hasUnlimitedBulk(){return Achievement(126).isUnlocked}tick(){this.isEnabled&&replicantiGalaxy(!0)}}class Ote extends Wf{get _upgradeName(){return["chance","interval","galaxies"][this.id-1]}get name(){return`Replicanti ${["Chance","Interval","Max Galaxies"][this.id-1]}`}get data(){return player.auto.replicantiUpgrades.all[this.id-1]}get interval(){return 1e3*Perk.autobuyerFasterReplicanti.effectOrDefault(1)/PerkShopUpgrade.autoSpeed.effectOrDefault(1)}get isUnlocked(){return ReplicantiUpgrade[this._upgradeName].autobuyerMilestone.isReached||PelleUpgrade.replicantiAutobuyers.canBeApplied}get resetTickOn(){return PRESTIGE_EVENT.ETERNITY}get hasUnlimitedBulk(){return!0}tick(){EternityChallenge(8).isRunning||(super.tick(),ReplicantiUpgrade[this._upgradeName].autobuyerTick())}static get entryCount(){return 3}static get autobuyerGroupName(){return"Replicanti Upgrade"}static get isActive(){return player.auto.replicantiUpgrades.isActive}static set isActive(e){player.auto.replicantiUpgrades.isActive=e}}class Nte extends ao{get data(){return player.auto.sacrifice}get name(){return"Dimensional Sacrifice"}get isUnlocked(){return EternityMilestone.autoIC.isReached||InfinityChallenge(2).isCompleted}get multiplier(){return this.data.multiplier}set multiplier(e){this.data.multiplier=e}get bulk(){return 0}get hasInput(){return!0}get inputType(){return"decimal"}get inputEntry(){return"multiplier"}tick(){(Achievement(118).canBeApplied||Sacrifice.nextBoost.gte(Decimal.max(this.multiplier,1.01)))&&sacrificeReset()}}class Gte extends ao{get data(){return player.auto.singularity}get name(){return"Singularity"}get isUnlocked(){return SingularityMilestone.autoCondense.canBeApplied}get bulk(){return Singularity.singularitiesGained}tick(){Currency.darkEnergy.value>=Singularity.cap*SingularityMilestone.autoCondense.effectValue&&Singularity.perform()}}class Ute extends ub{get data(){return player.auto.tickspeed}get name(){return"Tickspeed"}get isUnlocked(){return Pelle.isDisabled("tickspeedAutobuyer")?!1:this.canBeUpgraded}get canBeUpgraded(){return NormalChallenge(9).isCompleted}get baseInterval(){return Player.defaultStart.auto.tickspeed.interval}get isBought(){return this.data.isBought}get antimatterCost(){return L.E140}get canBeBought(){return!Pelle.isDoomed}get disabledByContinuum(){return Laitela.continuumActive}get mode(){return this.data.mode}set mode(e){this.data.mode=e}get hasUnlimitedBulk(){return this.mode===AUTOBUYER_MODE.BUY_MAX}get canUnlockSlowVersion(){return player.records.thisEternity.maxAM.gte(this.antimatterCost)}toggleMode(){this.mode=[AUTOBUYER_MODE.BUY_SINGLE,AUTOBUYER_MODE.BUY_MAX].nextSibling(this.mode)}get canTick(){return Tickspeed.isAvailableForPurchase&&Tickspeed.isAffordable&&super.canTick}tick(){switch(super.tick(),this.mode){case AUTOBUYER_MODE.BUY_SINGLE:buyTickSpeed();break;case AUTOBUYER_MODE.BUY_MAX:buyMaxTickSpeed();break}}purchase(){this.canUnlockSlowVersion&&(this.data.isBought=!0)}get resetTickOn(){return Perk.antimatterNoReset.canBeApplied?PRESTIGE_EVENT.ANTIMATTER_GALAXY:PRESTIGE_EVENT.DIMENSION_BOOST}reset(){super.reset(),!(EternityMilestone.keepAutobuyers.isReached||PelleUpgrade.keepAutobuyers.canBeApplied)&&(this.data.mode=AUTOBUYER_MODE.BUY_SINGLE,this.data.isUnlocked=!1,this.data.isBought=!1,TabNotification.newAutobuyer.clearTrigger())}}class Lte extends Wf{get tier(){return this.id}get name(){return TimeDimension(this.tier).shortDisplayName}get fullName(){return`${this.name} Time Dimension`}get data(){return player.auto.timeDims.all[this.tier-1]}get interval(){return 1e3/PerkShopUpgrade.autoSpeed.effectOrDefault(1)}get isUnlocked(){return RealityUpgrade(13).isBought&&(!Pelle.isDoomed||PelleUpgrade.TDAutobuyers.canBeApplied)}get resetTickOn(){return PRESTIGE_EVENT.REALITY}get hasUnlimitedBulk(){return!0}tick(){applyEU2(),Autobuyer.epMult.tick();const e=this.tier;TimeDimension(e).isAvailableForPurchase&&(super.tick(),Currency.eternityPoints.exponent>=10?buyMaxTimeDimension(e,1,!0):buySingleTimeDimension(e,!0))}static get entryCount(){return 8}static get autobuyerGroupName(){return"Time Dimension"}static get isActive(){return player.auto.timeDims.isActive}static set isActive(e){player.auto.timeDims.isActive=e}}class Bte extends ao{get data(){return player.auto.timeTheorems}get name(){return"Time Theorem"}get isUnlocked(){return Perk.ttBuySingle.isBought&&!Pelle.isDisabled("timeTheoremAutobuyer")}get hasUnlimitedBulk(){return Perk.ttBuyMax.canBeApplied}tick(){this.hasUnlimitedBulk?TimeTheorems.buyMax(!0):TimeTheorems.buyOneOfEach()}}const Zt={annihilation:new bte,antimatterDimension:_te.createAccessor(),bigCrunch:new Ete,blackHolePower:Tte.createAccessor(),darkMatterDimsAscension:new wte,darkMatterDims:new Cte,dilationUpgrade:Ste.createAccessor(),dimboost:new kte,eternity:new Ate,galaxy:new Rte,imaginaryUpgrade:Ite.createAccessor(),infinityDimension:Dte.createAccessor(),ipMult:new gte,epMult:new vte,reality:new xte,realityUpgrade:Mte.createAccessor(),replicantiGalaxy:new Pte,replicantiUpgrade:Ote.createAccessor(),sacrifice:new Nte,singularity:new Gte,tickspeed:new Ute,timeDimension:Lte.createAccessor(),timeTheorem:new Bte},To=function(){const t=Zt.antimatterDimension.zeroIndexed,e=Zt.infinityDimension.zeroIndexed,i=Zt.timeDimension.zeroIndexed,n=[t,e,i],r=[Zt.bigCrunch,Zt.eternity,Zt.reality],s=[Zt.sacrifice,Zt.replicantiGalaxy,Zt.timeTheorem,Zt.ipMult,Zt.epMult,Zt.darkMatterDims,Zt.darkMatterDimsAscension,Zt.singularity,Zt.annihilation],a=[Zt.tickspeed,Zt.galaxy,Zt.dimboost].concat(s),o=[Zt.replicantiUpgrade.zeroIndexed,Zt.dilationUpgrade.zeroIndexed,Zt.blackHolePower.zeroIndexed,Zt.realityUpgrade.zeroIndexed,Zt.imaginaryUpgrade.zeroIndexed],c=n.concat(r,a,o),d=[Zt.antimatterDimension,Zt.infinityDimension,Zt.timeDimension,Zt.replicantiUpgrade,Zt.dilationUpgrade,Zt.blackHolePower,Zt.realityUpgrade,Zt.imaginaryUpgrade];return{all:c.flat(),display:[d,s],upgradeable:t.concat(Zt.tickspeed,Zt.dimboost,Zt.galaxy,Zt.bigCrunch),get unlocked(){return To.all.filter(p=>p.isUnlocked||p.isBought)},get hasAutobuyersForEditModal(){return[Zt.dimboost,Zt.galaxy,Zt.bigCrunch,Zt.eternity,Zt.reality].some(p=>p.isUnlocked)},toggle(){player.auto.autobuyersOn=!player.auto.autobuyersOn},tick(){if(player.auto.autobuyersOn){PerformanceStats.start("Autobuyers");for(const p of To.all)p.canTick&&p.tick();PerformanceStats.end()}},resetTick(p){const m=To.all.filter(y=>y.resetTick!==void 0);for(const y of m)y.resetTick(p)},reset(){for(const p of To.all)p.reset()}}}();EventHub.logic.on(GAME_EVENT.ETERNITY_RESET_AFTER,()=>To.reset());EventHub.logic.on(GAME_EVENT.REALITY_RESET_AFTER,()=>To.reset());EventHub.logic.on(GAME_EVENT.DIMBOOST_AFTER,()=>To.resetTick(PRESTIGE_EVENT.DIMENSION_BOOST));EventHub.logic.on(GAME_EVENT.GALAXY_RESET_AFTER,()=>To.resetTick(PRESTIGE_EVENT.ANTIMATTER_GALAXY));EventHub.logic.on(GAME_EVENT.BIG_CRUNCH_AFTER,()=>To.resetTick(PRESTIGE_EVENT.INFINITY));EventHub.logic.on(GAME_EVENT.ETERNITY_RESET_AFTER,()=>To.resetTick(PRESTIGE_EVENT.ETERNITY));EventHub.logic.on(GAME_EVENT.REALITY_RESET_AFTER,()=>To.resetTick(PRESTIGE_EVENT.REALITY));/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Fte=4,ZM=0,QM=1,$te=2;function Xm(t){let e=t.length;for(;--e>=0;)t[e]=0}const Hte=0,gB=1,Vte=2,qte=3,Yte=258,bA=29,db=256,vv=db+1+bA,am=30,_A=19,vB=2*vv+1,Yh=15,hw=16,Wte=7,EA=256,bB=16,_B=17,EB=18,aS=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),T0=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jte=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),TB=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zte=512,Bc=new Array((vv+2)*2);Xm(Bc);const jg=new Array(am*2);Xm(jg);const bv=new Array(zte);Xm(bv);const _v=new Array(Yte-qte+1);Xm(_v);const TA=new Array(bA);Xm(TA);const oE=new Array(am);Xm(oE);function fw(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}let wB,CB,SB;function pw(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const kB=t=>t<256?bv[t]:bv[256+(t>>>7)],Ev=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},va=(t,e,i)=>{t.bi_valid>hw-i?(t.bi_buf|=e<<t.bi_valid&65535,Ev(t,t.bi_buf),t.bi_buf=e>>hw-t.bi_valid,t.bi_valid+=i-hw):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},Wl=(t,e,i)=>{va(t,i[e*2],i[e*2+1])},AB=(t,e)=>{let i=0;do i|=t&1,t>>>=1,i<<=1;while(--e>0);return i>>>1},Xte=t=>{t.bi_valid===16?(Ev(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Kte=(t,e)=>{const i=e.dyn_tree,n=e.max_code,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let d,p,m,y,_,E,C=0;for(y=0;y<=Yh;y++)t.bl_count[y]=0;for(i[t.heap[t.heap_max]*2+1]=0,d=t.heap_max+1;d<vB;d++)p=t.heap[d],y=i[i[p*2+1]*2+1]+1,y>c&&(y=c,C++),i[p*2+1]=y,!(p>n)&&(t.bl_count[y]++,_=0,p>=o&&(_=a[p-o]),E=i[p*2],t.opt_len+=E*(y+_),s&&(t.static_len+=E*(r[p*2+1]+_)));if(C!==0){do{for(y=c-1;t.bl_count[y]===0;)y--;t.bl_count[y]--,t.bl_count[y+1]+=2,t.bl_count[c]--,C-=2}while(C>0);for(y=c;y!==0;y--)for(p=t.bl_count[y];p!==0;)m=t.heap[--d],!(m>n)&&(i[m*2+1]!==y&&(t.opt_len+=(y-i[m*2+1])*i[m*2],i[m*2+1]=y),p--)}},RB=(t,e,i)=>{const n=new Array(Yh+1);let r=0,s,a;for(s=1;s<=Yh;s++)n[s]=r=r+i[s-1]<<1;for(a=0;a<=e;a++){let o=t[a*2+1];o!==0&&(t[a*2]=AB(n[o]++,o))}},Zte=()=>{let t,e,i,n,r;const s=new Array(Yh+1);for(i=0,n=0;n<bA-1;n++)for(TA[n]=i,t=0;t<1<<aS[n];t++)_v[i++]=n;for(_v[i-1]=n,r=0,n=0;n<16;n++)for(oE[n]=r,t=0;t<1<<T0[n];t++)bv[r++]=n;for(r>>=7;n<am;n++)for(oE[n]=r<<7,t=0;t<1<<T0[n]-7;t++)bv[256+r++]=n;for(e=0;e<=Yh;e++)s[e]=0;for(t=0;t<=143;)Bc[t*2+1]=8,t++,s[8]++;for(;t<=255;)Bc[t*2+1]=9,t++,s[9]++;for(;t<=279;)Bc[t*2+1]=7,t++,s[7]++;for(;t<=287;)Bc[t*2+1]=8,t++,s[8]++;for(RB(Bc,vv+1,s),t=0;t<am;t++)jg[t*2+1]=5,jg[t*2]=AB(t,5);wB=new fw(Bc,aS,db+1,vv,Yh),CB=new fw(jg,T0,0,am,Yh),SB=new fw(new Array(0),jte,0,_A,Wte)},IB=t=>{let e;for(e=0;e<vv;e++)t.dyn_ltree[e*2]=0;for(e=0;e<am;e++)t.dyn_dtree[e*2]=0;for(e=0;e<_A;e++)t.bl_tree[e*2]=0;t.dyn_ltree[EA*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},DB=t=>{t.bi_valid>8?Ev(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Qte=(t,e,i,n)=>{DB(t),Ev(t,i),Ev(t,~i),t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i},JM=(t,e,i,n)=>{const r=e*2,s=i*2;return t[r]<t[s]||t[r]===t[s]&&n[e]<=n[i]},mw=(t,e,i)=>{const n=t.heap[i];let r=i<<1;for(;r<=t.heap_len&&(r<t.heap_len&&JM(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!JM(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n},eP=(t,e,i)=>{let n,r,s=0,a,o;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],r=t.pending_buf[t.l_buf+s],s++,n===0?Wl(t,r,e):(a=_v[r],Wl(t,a+db+1,e),o=aS[a],o!==0&&(r-=TA[a],va(t,r,o)),n--,a=kB(n),Wl(t,a,i),o=T0[a],o!==0&&(n-=oE[a],va(t,n,o)));while(s<t.last_lit);Wl(t,EA,e)},oS=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,c=-1,d;for(t.heap_len=0,t.heap_max=vB,a=0;a<s;a++)i[a*2]!==0?(t.heap[++t.heap_len]=c=a,t.depth[a]=0):i[a*2+1]=0;for(;t.heap_len<2;)d=t.heap[++t.heap_len]=c<2?++c:0,i[d*2]=1,t.depth[d]=0,t.opt_len--,r&&(t.static_len-=n[d*2+1]);for(e.max_code=c,a=t.heap_len>>1;a>=1;a--)mw(t,i,a);d=s;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],mw(t,i,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,i[d*2]=i[a*2]+i[o*2],t.depth[d]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,i[a*2+1]=i[o*2+1]=d,t.heap[1]=d++,mw(t,i,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Kte(t,e),RB(i,c,t.bl_count)},tP=(t,e,i)=>{let n,r=-1,s,a=e[0*2+1],o=0,c=7,d=4;for(a===0&&(c=138,d=3),e[(i+1)*2+1]=65535,n=0;n<=i;n++)s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)&&(o<d?t.bl_tree[s*2]+=o:s!==0?(s!==r&&t.bl_tree[s*2]++,t.bl_tree[bB*2]++):o<=10?t.bl_tree[_B*2]++:t.bl_tree[EB*2]++,o=0,r=s,a===0?(c=138,d=3):s===a?(c=6,d=3):(c=7,d=4))},iP=(t,e,i)=>{let n,r=-1,s,a=e[0*2+1],o=0,c=7,d=4;for(a===0&&(c=138,d=3),n=0;n<=i;n++)if(s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)){if(o<d)do Wl(t,s,t.bl_tree);while(--o!==0);else s!==0?(s!==r&&(Wl(t,s,t.bl_tree),o--),Wl(t,bB,t.bl_tree),va(t,o-3,2)):o<=10?(Wl(t,_B,t.bl_tree),va(t,o-3,3)):(Wl(t,EB,t.bl_tree),va(t,o-11,7));o=0,r=s,a===0?(c=138,d=3):s===a?(c=6,d=3):(c=7,d=4)}},Jte=t=>{let e;for(tP(t,t.dyn_ltree,t.l_desc.max_code),tP(t,t.dyn_dtree,t.d_desc.max_code),oS(t,t.bl_desc),e=_A-1;e>=3&&t.bl_tree[TB[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},eie=(t,e,i,n)=>{let r;for(va(t,e-257,5),va(t,i-1,5),va(t,n-4,4),r=0;r<n;r++)va(t,t.bl_tree[TB[r]*2+1],3);iP(t,t.dyn_ltree,e-1),iP(t,t.dyn_dtree,i-1)},tie=t=>{let e=4093624447,i;for(i=0;i<=31;i++,e>>>=1)if(e&1&&t.dyn_ltree[i*2]!==0)return ZM;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return QM;for(i=32;i<db;i++)if(t.dyn_ltree[i*2]!==0)return QM;return ZM};let nP=!1;const iie=t=>{nP||(Zte(),nP=!0),t.l_desc=new pw(t.dyn_ltree,wB),t.d_desc=new pw(t.dyn_dtree,CB),t.bl_desc=new pw(t.bl_tree,SB),t.bi_buf=0,t.bi_valid=0,IB(t)},xB=(t,e,i,n)=>{va(t,(Hte<<1)+(n?1:0),3),Qte(t,e,i)},nie=t=>{va(t,gB<<1,3),Wl(t,EA,Bc),Xte(t)},rie=(t,e,i,n)=>{let r,s,a=0;t.level>0?(t.strm.data_type===$te&&(t.strm.data_type=tie(t)),oS(t,t.l_desc),oS(t,t.d_desc),a=Jte(t),r=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=r&&(r=s)):r=s=i+5,i+4<=r&&e!==-1?xB(t,e,i,n):t.strategy===Fte||s===r?(va(t,(gB<<1)+(n?1:0),3),eP(t,Bc,jg)):(va(t,(Vte<<1)+(n?1:0),3),eie(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),eP(t,t.dyn_ltree,t.dyn_dtree)),IB(t),n&&DB(t)},sie=(t,e,i)=>(t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=i&255,t.last_lit++,e===0?t.dyn_ltree[i*2]++:(t.matches++,e--,t.dyn_ltree[(_v[i]+db+1)*2]++,t.dyn_dtree[kB(e)*2]++),t.last_lit===t.lit_bufsize-1);var aie=iie,oie=xB,lie=rie,cie=sie,uie=nie,die={_tr_init:aie,_tr_stored_block:oie,_tr_flush_block:lie,_tr_tally:cie,_tr_align:uie};const hie=(t,e,i,n)=>{let r=t&65535|0,s=t>>>16&65535|0,a=0;for(;i!==0;){a=i>2e3?2e3:i,i-=a;do r=r+e[n++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0};var Tv=hie;const fie=()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[i]=t}return e},pie=new Uint32Array(fie()),mie=(t,e,i,n)=>{const r=pie,s=n+i;t^=-1;for(let a=n;a<s;a++)t=t>>>8^r[(t^e[a])&255];return t^-1};var Ur=mie,vf={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jf={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:yie,_tr_stored_block:gie,_tr_flush_block:vie,_tr_tally:Td,_tr_align:bie}=die,{Z_NO_FLUSH:zf,Z_PARTIAL_FLUSH:_ie,Z_FULL_FLUSH:Eie,Z_FINISH:wd,Z_BLOCK:rP,Z_OK:jl,Z_STREAM_END:sP,Z_STREAM_ERROR:Ao,Z_DATA_ERROR:Tie,Z_BUF_ERROR:yw,Z_DEFAULT_COMPRESSION:wie,Z_FILTERED:Cie,Z_HUFFMAN_ONLY:j_,Z_RLE:Sie,Z_FIXED:kie,Z_DEFAULT_STRATEGY:Aie,Z_UNKNOWN:Rie,Z_DEFLATED:dT}=jf,Iie=9,Die=15,xie=8,Mie=29,Pie=256,lS=Pie+1+Mie,Oie=30,Nie=19,Gie=2*lS+1,Uie=15,bi=3,md=258,cl=md+bi+1,Lie=32,hT=42,cS=69,w0=73,C0=91,S0=103,Wh=113,Sg=666,Cr=1,hb=2,bf=3,Km=4,Bie=3,yd=(t,e)=>(t.msg=vf[e],e),aP=t=>(t<<1)-(t>4?9:0),rd=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let Fie=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask,Cd=Fie;const Yu=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),i!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,e.pending===0&&(e.pending_out=0))},ss=(t,e)=>{vie(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Yu(t.strm)},Di=(t,e)=>{t.pending_buf[t.pending++]=e},ng=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},$ie=(t,e,i,n)=>{let r=t.avail_in;return r>n&&(r=n),r===0?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),i),t.state.wrap===1?t.adler=Tv(t.adler,e,r,i):t.state.wrap===2&&(t.adler=Ur(t.adler,e,r,i)),t.next_in+=r,t.total_in+=r,r)},MB=(t,e)=>{let i=t.max_chain_length,n=t.strstart,r,s,a=t.prev_length,o=t.nice_match;const c=t.strstart>t.w_size-cl?t.strstart-(t.w_size-cl):0,d=t.window,p=t.w_mask,m=t.prev,y=t.strstart+md;let _=d[n+a-1],E=d[n+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do if(r=e,!(d[r+a]!==E||d[r+a-1]!==_||d[r]!==d[n]||d[++r]!==d[n+1])){n+=2,r++;do;while(d[++n]===d[++r]&&d[++n]===d[++r]&&d[++n]===d[++r]&&d[++n]===d[++r]&&d[++n]===d[++r]&&d[++n]===d[++r]&&d[++n]===d[++r]&&d[++n]===d[++r]&&n<y);if(s=md-(y-n),n=y-md,s>a){if(t.match_start=e,a=s,s>=o)break;_=d[n+a-1],E=d[n+a]}}while((e=m[e&p])>c&&--i!==0);return a<=t.lookahead?a:t.lookahead},_f=t=>{const e=t.w_size;let i,n,r,s,a;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-cl)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,i=n;do r=t.head[--i],t.head[i]=r>=e?r-e:0;while(--n);n=e,i=n;do r=t.prev[--i],t.prev[i]=r>=e?r-e:0;while(--n);s+=e}if(t.strm.avail_in===0)break;if(n=$ie(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=n,t.lookahead+t.insert>=bi)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=Cd(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=Cd(t,t.ins_h,t.window[a+bi-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<bi)););}while(t.lookahead<cl&&t.strm.avail_in!==0)},Hie=(t,e)=>{let i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_f(t),t.lookahead===0&&e===zf)return Cr;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+i;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,ss(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-cl&&(ss(t,!1),t.strm.avail_out===0))return Cr}return t.insert=0,e===wd?(ss(t,!0),t.strm.avail_out===0?bf:Km):(t.strstart>t.block_start&&(ss(t,!1),t.strm.avail_out===0),Cr)},gw=(t,e)=>{let i,n;for(;;){if(t.lookahead<cl){if(_f(t),t.lookahead<cl&&e===zf)return Cr;if(t.lookahead===0)break}if(i=0,t.lookahead>=bi&&(t.ins_h=Cd(t,t.ins_h,t.window[t.strstart+bi-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),i!==0&&t.strstart-i<=t.w_size-cl&&(t.match_length=MB(t,i)),t.match_length>=bi)if(n=Td(t,t.strstart-t.match_start,t.match_length-bi),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=bi){t.match_length--;do t.strstart++,t.ins_h=Cd(t,t.ins_h,t.window[t.strstart+bi-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Cd(t,t.ins_h,t.window[t.strstart+1]);else n=Td(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(ss(t,!1),t.strm.avail_out===0))return Cr}return t.insert=t.strstart<bi-1?t.strstart:bi-1,e===wd?(ss(t,!0),t.strm.avail_out===0?bf:Km):t.last_lit&&(ss(t,!1),t.strm.avail_out===0)?Cr:hb},kp=(t,e)=>{let i,n,r;for(;;){if(t.lookahead<cl){if(_f(t),t.lookahead<cl&&e===zf)return Cr;if(t.lookahead===0)break}if(i=0,t.lookahead>=bi&&(t.ins_h=Cd(t,t.ins_h,t.window[t.strstart+bi-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=bi-1,i!==0&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-cl&&(t.match_length=MB(t,i),t.match_length<=5&&(t.strategy===Cie||t.match_length===bi&&t.strstart-t.match_start>4096)&&(t.match_length=bi-1)),t.prev_length>=bi&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-bi,n=Td(t,t.strstart-1-t.prev_match,t.prev_length-bi),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=r&&(t.ins_h=Cd(t,t.ins_h,t.window[t.strstart+bi-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=bi-1,t.strstart++,n&&(ss(t,!1),t.strm.avail_out===0))return Cr}else if(t.match_available){if(n=Td(t,0,t.window[t.strstart-1]),n&&ss(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Cr}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Td(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<bi-1?t.strstart:bi-1,e===wd?(ss(t,!0),t.strm.avail_out===0?bf:Km):t.last_lit&&(ss(t,!1),t.strm.avail_out===0)?Cr:hb},Vie=(t,e)=>{let i,n,r,s;const a=t.window;for(;;){if(t.lookahead<=md){if(_f(t),t.lookahead<=md&&e===zf)return Cr;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=bi&&t.strstart>0&&(r=t.strstart-1,n=a[r],n===a[++r]&&n===a[++r]&&n===a[++r])){s=t.strstart+md;do;while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);t.match_length=md-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=bi?(i=Td(t,1,t.match_length-bi),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=Td(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(ss(t,!1),t.strm.avail_out===0))return Cr}return t.insert=0,e===wd?(ss(t,!0),t.strm.avail_out===0?bf:Km):t.last_lit&&(ss(t,!1),t.strm.avail_out===0)?Cr:hb},qie=(t,e)=>{let i;for(;;){if(t.lookahead===0&&(_f(t),t.lookahead===0)){if(e===zf)return Cr;break}if(t.match_length=0,i=Td(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(ss(t,!1),t.strm.avail_out===0))return Cr}return t.insert=0,e===wd?(ss(t,!0),t.strm.avail_out===0?bf:Km):t.last_lit&&(ss(t,!1),t.strm.avail_out===0)?Cr:hb};function Ul(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}const kg=[new Ul(0,0,0,0,Hie),new Ul(4,4,8,4,gw),new Ul(4,5,16,8,gw),new Ul(4,6,32,32,gw),new Ul(4,4,16,16,kp),new Ul(8,16,32,32,kp),new Ul(8,16,128,128,kp),new Ul(8,32,128,256,kp),new Ul(32,128,258,1024,kp),new Ul(32,258,258,4096,kp)],Yie=t=>{t.window_size=2*t.w_size,rd(t.head),t.max_lazy_match=kg[t.level].max_lazy,t.good_match=kg[t.level].good_length,t.nice_match=kg[t.level].nice_length,t.max_chain_length=kg[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=bi-1,t.match_available=0,t.ins_h=0};function Wie(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=dT,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Gie*2),this.dyn_dtree=new Uint16Array((2*Oie+1)*2),this.bl_tree=new Uint16Array((2*Nie+1)*2),rd(this.dyn_ltree),rd(this.dyn_dtree),rd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Uie+1),this.heap=new Uint16Array(2*lS+1),rd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*lS+1),rd(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const PB=t=>{if(!t||!t.state)return yd(t,Ao);t.total_in=t.total_out=0,t.data_type=Rie;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?hT:Wh,t.adler=e.wrap===2?0:1,e.last_flush=zf,yie(e),jl},OB=t=>{const e=PB(t);return e===jl&&Yie(t.state),e},jie=(t,e)=>!t||!t.state||t.state.wrap!==2?Ao:(t.state.gzhead=e,jl),NB=(t,e,i,n,r,s)=>{if(!t)return Ao;let a=1;if(e===wie&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),r<1||r>Iie||i!==dT||n<8||n>15||e<0||e>9||s<0||s>kie)return yd(t,Ao);n===8&&(n=9);const o=new Wie;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+bi-1)/bi),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=i,OB(t)},zie=(t,e)=>NB(t,e,dT,Die,xie,Aie),Xie=(t,e)=>{let i,n;if(!t||!t.state||e>rP||e<0)return t?yd(t,Ao):Ao;const r=t.state;if(!t.output||!t.input&&t.avail_in!==0||r.status===Sg&&e!==wd)return yd(t,t.avail_out===0?yw:Ao);r.strm=t;const s=r.last_flush;if(r.last_flush=e,r.status===hT)if(r.wrap===2)t.adler=0,Di(r,31),Di(r,139),Di(r,8),r.gzhead?(Di(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Di(r,r.gzhead.time&255),Di(r,r.gzhead.time>>8&255),Di(r,r.gzhead.time>>16&255),Di(r,r.gzhead.time>>24&255),Di(r,r.level===9?2:r.strategy>=j_||r.level<2?4:0),Di(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Di(r,r.gzhead.extra.length&255),Di(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Ur(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=cS):(Di(r,0),Di(r,0),Di(r,0),Di(r,0),Di(r,0),Di(r,r.level===9?2:r.strategy>=j_||r.level<2?4:0),Di(r,Bie),r.status=Wh);else{let a=dT+(r.w_bits-8<<4)<<8,o=-1;r.strategy>=j_||r.level<2?o=0:r.level<6?o=1:r.level===6?o=2:o=3,a|=o<<6,r.strstart!==0&&(a|=Lie),a+=31-a%31,r.status=Wh,ng(r,a),r.strstart!==0&&(ng(r,t.adler>>>16),ng(r,t.adler&65535)),t.adler=1}if(r.status===cS)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Ur(t.adler,r.pending_buf,r.pending-i,i)),Yu(t),i=r.pending,r.pending===r.pending_buf_size));)Di(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=Ur(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=w0)}else r.status=w0;if(r.status===w0)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Ur(t.adler,r.pending_buf,r.pending-i,i)),Yu(t),i=r.pending,r.pending===r.pending_buf_size)){n=1;break}r.gzindex<r.gzhead.name.length?n=r.gzhead.name.charCodeAt(r.gzindex++)&255:n=0,Di(r,n)}while(n!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Ur(t.adler,r.pending_buf,r.pending-i,i)),n===0&&(r.gzindex=0,r.status=C0)}else r.status=C0;if(r.status===C0)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Ur(t.adler,r.pending_buf,r.pending-i,i)),Yu(t),i=r.pending,r.pending===r.pending_buf_size)){n=1;break}r.gzindex<r.gzhead.comment.length?n=r.gzhead.comment.charCodeAt(r.gzindex++)&255:n=0,Di(r,n)}while(n!==0);r.gzhead.hcrc&&r.pending>i&&(t.adler=Ur(t.adler,r.pending_buf,r.pending-i,i)),n===0&&(r.status=S0)}else r.status=S0;if(r.status===S0&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Yu(t),r.pending+2<=r.pending_buf_size&&(Di(r,t.adler&255),Di(r,t.adler>>8&255),t.adler=0,r.status=Wh)):r.status=Wh),r.pending!==0){if(Yu(t),t.avail_out===0)return r.last_flush=-1,jl}else if(t.avail_in===0&&aP(e)<=aP(s)&&e!==wd)return yd(t,yw);if(r.status===Sg&&t.avail_in!==0)return yd(t,yw);if(t.avail_in!==0||r.lookahead!==0||e!==zf&&r.status!==Sg){let a=r.strategy===j_?qie(r,e):r.strategy===Sie?Vie(r,e):kg[r.level].func(r,e);if((a===bf||a===Km)&&(r.status=Sg),a===Cr||a===bf)return t.avail_out===0&&(r.last_flush=-1),jl;if(a===hb&&(e===_ie?bie(r):e!==rP&&(gie(r,0,0,!1),e===Eie&&(rd(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Yu(t),t.avail_out===0))return r.last_flush=-1,jl}return e!==wd?jl:r.wrap<=0?sP:(r.wrap===2?(Di(r,t.adler&255),Di(r,t.adler>>8&255),Di(r,t.adler>>16&255),Di(r,t.adler>>24&255),Di(r,t.total_in&255),Di(r,t.total_in>>8&255),Di(r,t.total_in>>16&255),Di(r,t.total_in>>24&255)):(ng(r,t.adler>>>16),ng(r,t.adler&65535)),Yu(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?jl:sP)},Kie=t=>{if(!t||!t.state)return Ao;const e=t.state.status;return e!==hT&&e!==cS&&e!==w0&&e!==C0&&e!==S0&&e!==Wh&&e!==Sg?yd(t,Ao):(t.state=null,e===Wh?yd(t,Tie):jl)},Zie=(t,e)=>{let i=e.length;if(!t||!t.state)return Ao;const n=t.state,r=n.wrap;if(r===2||r===1&&n.status!==hT||n.lookahead)return Ao;if(r===1&&(t.adler=Tv(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){r===0&&(rd(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(e.subarray(i-n.w_size,i),0),e=c,i=n.w_size}const s=t.avail_in,a=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,_f(n);n.lookahead>=bi;){let c=n.strstart,d=n.lookahead-(bi-1);do n.ins_h=Cd(n,n.ins_h,n.window[c+bi-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--d);n.strstart=c,n.lookahead=bi-1,_f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=bi-1,n.match_available=0,t.next_in=a,t.input=o,t.avail_in=s,n.wrap=r,jl};var Qie=zie,Jie=NB,ene=OB,tne=PB,ine=jie,nne=Xie,rne=Kie,sne=Zie,ane="pako deflate (from Nodeca project)",zg={deflateInit:Qie,deflateInit2:Jie,deflateReset:ene,deflateResetKeep:tne,deflateSetHeader:ine,deflate:nne,deflateEnd:rne,deflateSetDictionary:sne,deflateInfo:ane};const one=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var lne=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const i=e.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const n in i)one(i,n)&&(t[n]=i[n])}}return t},cne=t=>{let e=0;for(let n=0,r=t.length;n<r;n++)e+=t[n].length;const i=new Uint8Array(e);for(let n=0,r=0,s=t.length;n<s;n++){let a=t[n];i.set(a,r),r+=a.length}return i},fT={assign:lne,flattenChunks:cne};let GB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{GB=!1}const wv=new Uint8Array(256);for(let t=0;t<256;t++)wv[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;wv[254]=wv[254]=1;var une=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,i,n,r,s,a=t.length,o=0;for(r=0;r<a;r++)i=t.charCodeAt(r),(i&64512)===55296&&r+1<a&&(n=t.charCodeAt(r+1),(n&64512)===56320&&(i=65536+(i-55296<<10)+(n-56320),r++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(o),s=0,r=0;s<o;r++)i=t.charCodeAt(r),(i&64512)===55296&&r+1<a&&(n=t.charCodeAt(r+1),(n&64512)===56320&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|i&63):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|i&63):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|i&63);return e};const dne=(t,e)=>{if(e<65534&&t.subarray&&GB)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let i="";for(let n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i};var hne=(t,e)=>{const i=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,r;const s=new Array(i*2);for(r=0,n=0;n<i;){let a=t[n++];if(a<128){s[r++]=a;continue}let o=wv[a];if(o>4){s[r++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<i;)a=a<<6|t[n++]&63,o--;if(o>1){s[r++]=65533;continue}a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|a&1023)}return dne(s,r)},fne=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let i=e-1;for(;i>=0&&(t[i]&192)===128;)i--;return i<0||i===0?e:i+wv[t[i]]>e?i:e},Cv={string2buf:une,buf2string:hne,utf8border:fne};function pne(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var UB=pne;const LB=Object.prototype.toString,{Z_NO_FLUSH:mne,Z_SYNC_FLUSH:yne,Z_FULL_FLUSH:gne,Z_FINISH:vne,Z_OK:lE,Z_STREAM_END:bne,Z_DEFAULT_COMPRESSION:_ne,Z_DEFAULT_STRATEGY:Ene,Z_DEFLATED:Tne}=jf;function fb(t){this.options=fT.assign({level:_ne,method:Tne,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ene},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new UB,this.strm.avail_out=0;let i=zg.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==lE)throw new Error(vf[i]);if(e.header&&zg.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=Cv.string2buf(e.dictionary):LB.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,i=zg.deflateSetDictionary(this.strm,n),i!==lE)throw new Error(vf[i]);this._dict_set=!0}}fb.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize;let r,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?vne:mne,typeof t=="string"?i.input=Cv.string2buf(t):LB.call(t)==="[object ArrayBuffer]"?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){if(i.avail_out===0&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),(s===yne||s===gne)&&i.avail_out<=6){this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;continue}if(r=zg.deflate(i,s),r===bne)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),r=zg.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===lE;if(i.avail_out===0){this.onData(i.output);continue}if(s>0&&i.next_out>0){this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;continue}if(i.avail_in===0)break}return!0};fb.prototype.onData=function(t){this.chunks.push(t)};fb.prototype.onEnd=function(t){t===lE&&(this.result=fT.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function wA(t,e){const i=new fb(e);if(i.push(t,!0),i.err)throw i.msg||vf[i.err];return i.result}function wne(t,e){return e=e||{},e.raw=!0,wA(t,e)}function Cne(t,e){return e=e||{},e.gzip=!0,wA(t,e)}var Sne=fb,kne=wA,Ane=wne,Rne=Cne,Ine=jf,Dne={Deflate:Sne,deflate:kne,deflateRaw:Ane,gzip:Rne,constants:Ine};const z_=30,xne=12;var Mne=function(e,i){let n,r,s,a,o,c,d,p,m,y,_,E,C,S,k,R,O,I,F,P,x,M,q,$;const B=e.state;n=e.next_in,q=e.input,r=n+(e.avail_in-5),s=e.next_out,$=e.output,a=s-(i-e.avail_out),o=s+(e.avail_out-257),c=B.dmax,d=B.wsize,p=B.whave,m=B.wnext,y=B.window,_=B.hold,E=B.bits,C=B.lencode,S=B.distcode,k=(1<<B.lenbits)-1,R=(1<<B.distbits)-1;e:do{E<15&&(_+=q[n++]<<E,E+=8,_+=q[n++]<<E,E+=8),O=C[_&k];t:for(;;){if(I=O>>>24,_>>>=I,E-=I,I=O>>>16&255,I===0)$[s++]=O&65535;else if(I&16){F=O&65535,I&=15,I&&(E<I&&(_+=q[n++]<<E,E+=8),F+=_&(1<<I)-1,_>>>=I,E-=I),E<15&&(_+=q[n++]<<E,E+=8,_+=q[n++]<<E,E+=8),O=S[_&R];i:for(;;){if(I=O>>>24,_>>>=I,E-=I,I=O>>>16&255,I&16){if(P=O&65535,I&=15,E<I&&(_+=q[n++]<<E,E+=8,E<I&&(_+=q[n++]<<E,E+=8)),P+=_&(1<<I)-1,P>c){e.msg="invalid distance too far back",B.mode=z_;break e}if(_>>>=I,E-=I,I=s-a,P>I){if(I=P-I,I>p&&B.sane){e.msg="invalid distance too far back",B.mode=z_;break e}if(x=0,M=y,m===0){if(x+=d-I,I<F){F-=I;do $[s++]=y[x++];while(--I);x=s-P,M=$}}else if(m<I){if(x+=d+m-I,I-=m,I<F){F-=I;do $[s++]=y[x++];while(--I);if(x=0,m<F){I=m,F-=I;do $[s++]=y[x++];while(--I);x=s-P,M=$}}}else if(x+=m-I,I<F){F-=I;do $[s++]=y[x++];while(--I);x=s-P,M=$}for(;F>2;)$[s++]=M[x++],$[s++]=M[x++],$[s++]=M[x++],F-=3;F&&($[s++]=M[x++],F>1&&($[s++]=M[x++]))}else{x=s-P;do $[s++]=$[x++],$[s++]=$[x++],$[s++]=$[x++],F-=3;while(F>2);F&&($[s++]=$[x++],F>1&&($[s++]=$[x++]))}}else if(I&64){e.msg="invalid distance code",B.mode=z_;break e}else{O=S[(O&65535)+(_&(1<<I)-1)];continue i}break}}else if(I&64)if(I&32){B.mode=xne;break e}else{e.msg="invalid literal/length code",B.mode=z_;break e}else{O=C[(O&65535)+(_&(1<<I)-1)];continue t}break}}while(n<r&&s<o);F=E>>3,n-=F,E-=F<<3,_&=(1<<E)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=s<o?257+(o-s):257-(s-o),B.hold=_,B.bits=E};const Ap=15,oP=852,lP=592,cP=0,vw=1,uP=2,Pne=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),One=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Nne=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Gne=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Une=(t,e,i,n,r,s,a,o)=>{const c=o.bits;let d=0,p=0,m=0,y=0,_=0,E=0,C=0,S=0,k=0,R=0,O,I,F,P,x,M=null,q=0,$;const B=new Uint16Array(Ap+1),j=new Uint16Array(Ap+1);let z=null,X=0,se,ue,ve;for(d=0;d<=Ap;d++)B[d]=0;for(p=0;p<n;p++)B[e[i+p]]++;for(_=c,y=Ap;y>=1&&B[y]===0;y--);if(_>y&&(_=y),y===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,o.bits=1,0;for(m=1;m<y&&B[m]===0;m++);for(_<m&&(_=m),S=1,d=1;d<=Ap;d++)if(S<<=1,S-=B[d],S<0)return-1;if(S>0&&(t===cP||y!==1))return-1;for(j[1]=0,d=1;d<Ap;d++)j[d+1]=j[d]+B[d];for(p=0;p<n;p++)e[i+p]!==0&&(a[j[e[i+p]]++]=p);if(t===cP?(M=z=a,$=19):t===vw?(M=Pne,q-=257,z=One,X-=257,$=256):(M=Nne,z=Gne,$=-1),R=0,p=0,d=m,x=s,E=_,C=0,F=-1,k=1<<_,P=k-1,t===vw&&k>oP||t===uP&&k>lP)return 1;for(;;){se=d-C,a[p]<$?(ue=0,ve=a[p]):a[p]>$?(ue=z[X+a[p]],ve=M[q+a[p]]):(ue=96,ve=0),O=1<<d-C,I=1<<E,m=I;do I-=O,r[x+(R>>C)+I]=se<<24|ue<<16|ve|0;while(I!==0);for(O=1<<d-1;R&O;)O>>=1;if(O!==0?(R&=O-1,R+=O):R=0,p++,--B[d]===0){if(d===y)break;d=e[i+a[p]]}if(d>_&&(R&P)!==F){for(C===0&&(C=_),x+=m,E=d-C,S=1<<E;E+C<y&&(S-=B[E+C],!(S<=0));)E++,S<<=1;if(k+=1<<E,t===vw&&k>oP||t===uP&&k>lP)return 1;F=R&P,r[F]=_<<24|E<<16|x-s|0}}return R!==0&&(r[x+R]=d-C<<24|64<<16|0),o.bits=_,0};var Xg=Une;const Lne=0,BB=1,FB=2,{Z_FINISH:dP,Z_BLOCK:Bne,Z_TREES:X_,Z_OK:Ef,Z_STREAM_END:Fne,Z_NEED_DICT:$ne,Z_STREAM_ERROR:Do,Z_DATA_ERROR:$B,Z_MEM_ERROR:HB,Z_BUF_ERROR:Hne,Z_DEFLATED:hP}=jf,VB=1,fP=2,pP=3,mP=4,yP=5,gP=6,vP=7,bP=8,_P=9,EP=10,cE=11,Oc=12,bw=13,TP=14,_w=15,wP=16,CP=17,SP=18,kP=19,K_=20,Z_=21,AP=22,RP=23,IP=24,DP=25,xP=26,Ew=27,MP=28,PP=29,_n=30,qB=31,Vne=32,qne=852,Yne=592,Wne=15,jne=Wne,OP=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function zne(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const YB=t=>{if(!t||!t.state)return Do;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=VB,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(qne),e.distcode=e.distdyn=new Int32Array(Yne),e.sane=1,e.back=-1,Ef},WB=t=>{if(!t||!t.state)return Do;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,YB(t)},jB=(t,e)=>{let i;if(!t||!t.state)return Do;const n=t.state;return e<0?(i=0,e=-e):(i=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?Do:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,WB(t))},zB=(t,e)=>{if(!t)return Do;const i=new zne;t.state=i,i.window=null;const n=jB(t,e);return n!==Ef&&(t.state=null),n},Xne=t=>zB(t,jne);let NP=!0,Tw,ww;const Kne=t=>{if(NP){Tw=new Int32Array(512),ww=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Xg(BB,t.lens,0,288,Tw,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Xg(FB,t.lens,0,32,ww,0,t.work,{bits:5}),NP=!1}t.lencode=Tw,t.lenbits=9,t.distcode=ww,t.distbits=5},XB=(t,e,i,n)=>{let r;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(i-s.wsize,i),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>n&&(r=n),s.window.set(e.subarray(i-n,i-n+r),s.wnext),n-=r,n?(s.window.set(e.subarray(i-n,i),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},Zne=(t,e)=>{let i,n,r,s,a,o,c,d,p,m,y,_,E,C,S=0,k,R,O,I,F,P,x,M;const q=new Uint8Array(4);let $,B;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Do;i=t.state,i.mode===Oc&&(i.mode=bw),a=t.next_out,r=t.output,c=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,d=i.hold,p=i.bits,m=o,y=c,M=Ef;e:for(;;)switch(i.mode){case VB:if(i.wrap===0){i.mode=bw;break}for(;p<16;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(i.wrap&2&&d===35615){i.check=0,q[0]=d&255,q[1]=d>>>8&255,i.check=Ur(i.check,q,2,0),d=0,p=0,i.mode=fP;break}if(i.flags=0,i.head&&(i.head.done=!1),!(i.wrap&1)||(((d&255)<<8)+(d>>8))%31){t.msg="incorrect header check",i.mode=_n;break}if((d&15)!==hP){t.msg="unknown compression method",i.mode=_n;break}if(d>>>=4,p-=4,x=(d&15)+8,i.wbits===0)i.wbits=x;else if(x>i.wbits){t.msg="invalid window size",i.mode=_n;break}i.dmax=1<<i.wbits,t.adler=i.check=1,i.mode=d&512?EP:Oc,d=0,p=0;break;case fP:for(;p<16;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(i.flags=d,(i.flags&255)!==hP){t.msg="unknown compression method",i.mode=_n;break}if(i.flags&57344){t.msg="unknown header flags set",i.mode=_n;break}i.head&&(i.head.text=d>>8&1),i.flags&512&&(q[0]=d&255,q[1]=d>>>8&255,i.check=Ur(i.check,q,2,0)),d=0,p=0,i.mode=pP;case pP:for(;p<32;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}i.head&&(i.head.time=d),i.flags&512&&(q[0]=d&255,q[1]=d>>>8&255,q[2]=d>>>16&255,q[3]=d>>>24&255,i.check=Ur(i.check,q,4,0)),d=0,p=0,i.mode=mP;case mP:for(;p<16;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}i.head&&(i.head.xflags=d&255,i.head.os=d>>8),i.flags&512&&(q[0]=d&255,q[1]=d>>>8&255,i.check=Ur(i.check,q,2,0)),d=0,p=0,i.mode=yP;case yP:if(i.flags&1024){for(;p<16;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}i.length=d,i.head&&(i.head.extra_len=d),i.flags&512&&(q[0]=d&255,q[1]=d>>>8&255,i.check=Ur(i.check,q,2,0)),d=0,p=0}else i.head&&(i.head.extra=null);i.mode=gP;case gP:if(i.flags&1024&&(_=i.length,_>o&&(_=o),_&&(i.head&&(x=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(n.subarray(s,s+_),x)),i.flags&512&&(i.check=Ur(i.check,n,_,s)),o-=_,s+=_,i.length-=_),i.length))break e;i.length=0,i.mode=vP;case vP:if(i.flags&2048){if(o===0)break e;_=0;do x=n[s+_++],i.head&&x&&i.length<65536&&(i.head.name+=String.fromCharCode(x));while(x&&_<o);if(i.flags&512&&(i.check=Ur(i.check,n,_,s)),o-=_,s+=_,x)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=bP;case bP:if(i.flags&4096){if(o===0)break e;_=0;do x=n[s+_++],i.head&&x&&i.length<65536&&(i.head.comment+=String.fromCharCode(x));while(x&&_<o);if(i.flags&512&&(i.check=Ur(i.check,n,_,s)),o-=_,s+=_,x)break e}else i.head&&(i.head.comment=null);i.mode=_P;case _P:if(i.flags&512){for(;p<16;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(d!==(i.check&65535)){t.msg="header crc mismatch",i.mode=_n;break}d=0,p=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=Oc;break;case EP:for(;p<32;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}t.adler=i.check=OP(d),d=0,p=0,i.mode=cE;case cE:if(i.havedict===0)return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,i.hold=d,i.bits=p,$ne;t.adler=i.check=1,i.mode=Oc;case Oc:if(e===Bne||e===X_)break e;case bw:if(i.last){d>>>=p&7,p-=p&7,i.mode=Ew;break}for(;p<3;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}switch(i.last=d&1,d>>>=1,p-=1,d&3){case 0:i.mode=TP;break;case 1:if(Kne(i),i.mode=K_,e===X_){d>>>=2,p-=2;break e}break;case 2:i.mode=CP;break;case 3:t.msg="invalid block type",i.mode=_n}d>>>=2,p-=2;break;case TP:for(d>>>=p&7,p-=p&7;p<32;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if((d&65535)!==(d>>>16^65535)){t.msg="invalid stored block lengths",i.mode=_n;break}if(i.length=d&65535,d=0,p=0,i.mode=_w,e===X_)break e;case _w:i.mode=wP;case wP:if(_=i.length,_){if(_>o&&(_=o),_>c&&(_=c),_===0)break e;r.set(n.subarray(s,s+_),a),o-=_,s+=_,c-=_,a+=_,i.length-=_;break}i.mode=Oc;break;case CP:for(;p<14;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(i.nlen=(d&31)+257,d>>>=5,p-=5,i.ndist=(d&31)+1,d>>>=5,p-=5,i.ncode=(d&15)+4,d>>>=4,p-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=_n;break}i.have=0,i.mode=SP;case SP:for(;i.have<i.ncode;){for(;p<3;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}i.lens[j[i.have++]]=d&7,d>>>=3,p-=3}for(;i.have<19;)i.lens[j[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,$={bits:i.lenbits},M=Xg(Lne,i.lens,0,19,i.lencode,0,i.work,$),i.lenbits=$.bits,M){t.msg="invalid code lengths set",i.mode=_n;break}i.have=0,i.mode=kP;case kP:for(;i.have<i.nlen+i.ndist;){for(;S=i.lencode[d&(1<<i.lenbits)-1],k=S>>>24,R=S>>>16&255,O=S&65535,!(k<=p);){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(O<16)d>>>=k,p-=k,i.lens[i.have++]=O;else{if(O===16){for(B=k+2;p<B;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(d>>>=k,p-=k,i.have===0){t.msg="invalid bit length repeat",i.mode=_n;break}x=i.lens[i.have-1],_=3+(d&3),d>>>=2,p-=2}else if(O===17){for(B=k+3;p<B;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}d>>>=k,p-=k,x=0,_=3+(d&7),d>>>=3,p-=3}else{for(B=k+7;p<B;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}d>>>=k,p-=k,x=0,_=11+(d&127),d>>>=7,p-=7}if(i.have+_>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=_n;break}for(;_--;)i.lens[i.have++]=x}}if(i.mode===_n)break;if(i.lens[256]===0){t.msg="invalid code -- missing end-of-block",i.mode=_n;break}if(i.lenbits=9,$={bits:i.lenbits},M=Xg(BB,i.lens,0,i.nlen,i.lencode,0,i.work,$),i.lenbits=$.bits,M){t.msg="invalid literal/lengths set",i.mode=_n;break}if(i.distbits=6,i.distcode=i.distdyn,$={bits:i.distbits},M=Xg(FB,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,$),i.distbits=$.bits,M){t.msg="invalid distances set",i.mode=_n;break}if(i.mode=K_,e===X_)break e;case K_:i.mode=Z_;case Z_:if(o>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,i.hold=d,i.bits=p,Mne(t,y),a=t.next_out,r=t.output,c=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,d=i.hold,p=i.bits,i.mode===Oc&&(i.back=-1);break}for(i.back=0;S=i.lencode[d&(1<<i.lenbits)-1],k=S>>>24,R=S>>>16&255,O=S&65535,!(k<=p);){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(R&&!(R&240)){for(I=k,F=R,P=O;S=i.lencode[P+((d&(1<<I+F)-1)>>I)],k=S>>>24,R=S>>>16&255,O=S&65535,!(I+k<=p);){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}d>>>=I,p-=I,i.back+=I}if(d>>>=k,p-=k,i.back+=k,i.length=O,R===0){i.mode=xP;break}if(R&32){i.back=-1,i.mode=Oc;break}if(R&64){t.msg="invalid literal/length code",i.mode=_n;break}i.extra=R&15,i.mode=AP;case AP:if(i.extra){for(B=i.extra;p<B;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,p-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=RP;case RP:for(;S=i.distcode[d&(1<<i.distbits)-1],k=S>>>24,R=S>>>16&255,O=S&65535,!(k<=p);){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(!(R&240)){for(I=k,F=R,P=O;S=i.distcode[P+((d&(1<<I+F)-1)>>I)],k=S>>>24,R=S>>>16&255,O=S&65535,!(I+k<=p);){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}d>>>=I,p-=I,i.back+=I}if(d>>>=k,p-=k,i.back+=k,R&64){t.msg="invalid distance code",i.mode=_n;break}i.offset=O,i.extra=R&15,i.mode=IP;case IP:if(i.extra){for(B=i.extra;p<B;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,p-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=_n;break}i.mode=DP;case DP:if(c===0)break e;if(_=y-c,i.offset>_){if(_=i.offset-_,_>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=_n;break}_>i.wnext?(_-=i.wnext,E=i.wsize-_):E=i.wnext-_,_>i.length&&(_=i.length),C=i.window}else C=r,E=a-i.offset,_=i.length;_>c&&(_=c),c-=_,i.length-=_;do r[a++]=C[E++];while(--_);i.length===0&&(i.mode=Z_);break;case xP:if(c===0)break e;r[a++]=i.length,c--,i.mode=Z_;break;case Ew:if(i.wrap){for(;p<32;){if(o===0)break e;o--,d|=n[s++]<<p,p+=8}if(y-=c,t.total_out+=y,i.total+=y,y&&(t.adler=i.check=i.flags?Ur(i.check,r,y,a-y):Tv(i.check,r,y,a-y)),y=c,(i.flags?d:OP(d))!==i.check){t.msg="incorrect data check",i.mode=_n;break}d=0,p=0}i.mode=MP;case MP:if(i.wrap&&i.flags){for(;p<32;){if(o===0)break e;o--,d+=n[s++]<<p,p+=8}if(d!==(i.total&4294967295)){t.msg="incorrect length check",i.mode=_n;break}d=0,p=0}i.mode=PP;case PP:M=Fne;break e;case _n:M=$B;break e;case qB:return HB;case Vne:default:return Do}return t.next_out=a,t.avail_out=c,t.next_in=s,t.avail_in=o,i.hold=d,i.bits=p,(i.wsize||y!==t.avail_out&&i.mode<_n&&(i.mode<Ew||e!==dP))&&XB(t,t.output,t.next_out,y-t.avail_out),m-=t.avail_in,y-=t.avail_out,t.total_in+=m,t.total_out+=y,i.total+=y,i.wrap&&y&&(t.adler=i.check=i.flags?Ur(i.check,r,y,t.next_out-y):Tv(i.check,r,y,t.next_out-y)),t.data_type=i.bits+(i.last?64:0)+(i.mode===Oc?128:0)+(i.mode===K_||i.mode===_w?256:0),(m===0&&y===0||e===dP)&&M===Ef&&(M=Hne),M},Qne=t=>{if(!t||!t.state)return Do;let e=t.state;return e.window&&(e.window=null),t.state=null,Ef},Jne=(t,e)=>{if(!t||!t.state)return Do;const i=t.state;return i.wrap&2?(i.head=e,e.done=!1,Ef):Do},ere=(t,e)=>{const i=e.length;let n,r,s;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==cE)?Do:n.mode===cE&&(r=1,r=Tv(r,e,i,0),r!==n.check)?$B:(s=XB(t,e,i,i),s?(n.mode=qB,HB):(n.havedict=1,Ef))};var tre=WB,ire=jB,nre=YB,rre=Xne,sre=zB,are=Zne,ore=Qne,lre=Jne,cre=ere,ure="pako inflate (from Nodeca project)",Fc={inflateReset:tre,inflateReset2:ire,inflateResetKeep:nre,inflateInit:rre,inflateInit2:sre,inflate:are,inflateEnd:ore,inflateGetHeader:lre,inflateSetDictionary:cre,inflateInfo:ure};function dre(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var hre=dre;const KB=Object.prototype.toString,{Z_NO_FLUSH:fre,Z_FINISH:pre,Z_OK:Sv,Z_STREAM_END:Cw,Z_NEED_DICT:Sw,Z_STREAM_ERROR:mre,Z_DATA_ERROR:GP,Z_MEM_ERROR:yre}=jf;function pb(t){this.options=fT.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new UB,this.strm.avail_out=0;let i=Fc.inflateInit2(this.strm,e.windowBits);if(i!==Sv)throw new Error(vf[i]);if(this.header=new hre,Fc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Cv.string2buf(e.dictionary):KB.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(i=Fc.inflateSetDictionary(this.strm,e.dictionary),i!==Sv)))throw new Error(vf[i])}pb.prototype.push=function(t,e){const i=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?pre:fre,KB.call(t)==="[object ArrayBuffer]"?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),s=Fc.inflate(i,a),s===Sw&&r&&(s=Fc.inflateSetDictionary(i,r),s===Sv?s=Fc.inflate(i,a):s===GP&&(s=Sw));i.avail_in>0&&s===Cw&&i.state.wrap>0&&t[i.next_in]!==0;)Fc.inflateReset(i),s=Fc.inflate(i,a);switch(s){case mre:case GP:case Sw:case yre:return this.onEnd(s),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(i.avail_out===0||s===Cw))if(this.options.to==="string"){let c=Cv.utf8border(i.output,i.next_out),d=i.next_out-c,p=Cv.buf2string(i.output,c);i.next_out=d,i.avail_out=n-d,d&&i.output.set(i.output.subarray(c,c+d),0),this.onData(p)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(!(s===Sv&&o===0)){if(s===Cw)return s=Fc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(i.avail_in===0)break}}return!0};pb.prototype.onData=function(t){this.chunks.push(t)};pb.prototype.onEnd=function(t){t===Sv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fT.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function CA(t,e){const i=new pb(e);if(i.push(t),i.err)throw i.msg||vf[i.err];return i.result}function gre(t,e){return e=e||{},e.raw=!0,CA(t,e)}var vre=pb,bre=CA,_re=gre,Ere=CA,Tre=jf,wre={Inflate:vre,inflate:bre,inflateRaw:_re,ungzip:Ere,constants:Tre};const{Deflate:Cre,deflate:Sre,deflateRaw:kre,gzip:Are}=Dne,{Inflate:Rre,inflate:Ire,inflateRaw:Dre,ungzip:xre}=wre;var Mre=Cre,Pre=Sre,Ore=kre,Nre=Are,Gre=Rre,Ure=Ire,Lre=Dre,Bre=xre,Fre=jf,uS={Deflate:Mre,deflate:Pre,deflateRaw:Ore,gzip:Nre,Inflate:Gre,inflate:Ure,inflateRaw:Lre,ungzip:Bre,constants:Fre};const Wu={serialize(t){const e=JSON.stringify(t,this.jsonConverter);return this.encodeText(e,"savefile")},jsonConverter(t,e){return e===1/0?"Infinity":e instanceof Set?Array.from(e.keys()):e},deserialize(t){if(typeof t=="string")try{const e=this.decodeText(t,"savefile");return JSON.parse(e,(i,n)=>n===1/0?"Infinity":n)}catch{return}},encoder:new TextEncoder,decoder:new TextDecoder,startingString:{savefile:"AntimatterDimensionsSavefileFormat","automator script":"AntimatterDimensionsAutomatorScriptFormat","automator data":"AntimatterDimensionsAutomatorDataFormat","glyph filter":"AntimatterDimensionsGlyphFilterFormat"},endingString:{savefile:"EndOfSavefile","automator script":"EndOfAutomatorScript","automator data":"EndOfAutomatorData","glyph filter":"EndOfGlyphFilter"},version:"AAB",steps:[{encode:t=>Wu.encoder.encode(t),decode:t=>Wu.decoder.decode(t)},{encode:t=>uS.deflate(t),decode:t=>uS.inflate(t)},{encode:t=>Array.from(t).map(e=>String.fromCharCode(e)).join(""),decode:t=>Uint8Array.from(Array.from(t).map(e=>e.charCodeAt(0)))},{encode:t=>btoa(t),decode:t=>atob(t)},{encode:t=>t.replace(/=+$/gu,"").replace(/0/gu,"0a").replace(/\+/gu,"0b").replace(/\//gu,"0c"),decode:t=>t.replace(/0b/gu,"+").replace(/0c/gu,"/").replace(/0a/gu,"0")},{encode:(t,e)=>t+Wu.endingString[e],decode:(t,e)=>t.slice(0,t.length-Wu.endingString[e].length),condition:t=>t>="AAB"}],getSteps(t,e){return this.steps.filter(i=>!i.condition||i.condition(e)).concat({encode:i=>`${Wu.startingString[t]+Wu.version}${i}`,decode:i=>i.slice(Wu.startingString[t].length+3)})},encodeText(t,e){return this.getSteps(e,this.version).reduce((i,n)=>n.encode(i,e),t)},decodeText(t,e){if(t.startsWith(this.startingString[e])){const i=this.startingString[e].length,n=t.slice(i,i+3);return this.getSteps(e,n).reduceRight((r,s)=>s.decode(r,e),t)}return atob(t)}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dS=function(t,e){return dS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},dS(t,e)};function Nn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dS(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}function SA(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}var Ta={isInfinite:function(e){return e.gte(di.MAX_VALUE)},exponentCommas:{show:!0,min:1e5,max:1e9},exponentDefaultPlaces:3};function $re(t,e){return e===0?t.slice(-3):t.slice(-3*(e+1),-3*e)}function Hre(t){return Array.from(Array(Math.ceil(t.length/3))).map(function(e,i){return $re(t,i)}).reverse().join(",")}function kA(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\w+$/g,Hre),e.join(".")}function Vre(t){var e=t.exponent%3;return di.fromMantissaExponent_noNormalize(t.mantissa*Math.pow(10,e),t.exponent-e)}var UP=["K","M","B","T","Qa","Qt","Sx","Sp","Oc","No"],qre=[["","U","D","T","Qa","Qt","Sx","Sp","O","N"],["","Dc","Vg","Tg","Qd","Qi","Se","St","Og","Nn"],["","Ce","Dn","Tc","Qe","Qu","Sc","Si","Oe","Ne"]],Yre=["","MI-","MC-","NA-","PC-","FM-","AT-","ZP-"];function ZB(t){var e=t-1;if(e===-1)return"";if(e<UP.length)return UP[e];for(var i=[],n=e;n>0;)i.push(qre[i.length%3][n%10]),n=Math.floor(n/10);for(;i.length%3!==0;)i.push("");for(var r="",s=i.length/3-1;s>=0;s--)r+=i.slice(s*3,s*3+3).join("")+Yre[s];return r.replace(/-[A-Z]{2}-/g,"-").replace(/U([A-Z]{2}-)/g,"$1").replace(/-$/,"")}function QB(t){return t<Ta.exponentCommas.min}function JB(t){return Ta.exponentCommas.show&&t<Ta.exponentCommas.max}function Wre(t){return QB(t)||JB(t)}function Zm(t,e,i,n,r,s,a){return s===void 0&&(s="e"),a===void 0&&(a=!1),function(o,c,d){var p=Math.pow(i,n),m=Math.floor(o.log(p))*n;a&&(m=Math.max(m,0));var y=o.div(di.pow(i,m)).toNumber();if(!(1<=y&&y<p)){var _=Math.floor(Math.log(y)/Math.log(p));y/=Math.pow(p,_),m+=n*_}var E=t(y,c);if(E===t(p,c)&&(E=t(1,c),m+=n),m===0)return E;var C=e(m,d);return r&&!Wre(m)&&(E=""),"".concat(E).concat(s).concat(C)}}function Qm(t,e){return t.toFixed(Math.max(0,e))}function jre(t,e){return function(i,n){for(var r=Math.round(i*Math.pow(t,Math.max(0,n))),s=[];r>0||s.length===0;)s.push(e[r%t]),r=Math.floor(r/t);var a=s.reverse().join("");return n>0&&(a=a.padStart(n+1,"0"),a="".concat(a.slice(0,-n),".").concat(a.slice(-n))),a}}var Zn=function(){function t(){}return t.prototype.format=function(e,i,n,r){if(i===void 0&&(i=0),n===void 0&&(n=0),r===void 0&&(r=i),typeof e=="number"&&!Number.isFinite(e))return this.infinite;var s=di.fromValue_noAlloc(e);if(s.exponent<-300)return s.sign()<0?this.formatVerySmallNegativeDecimal(s.abs(),n):this.formatVerySmallDecimal(s,n);if(s.exponent<3){var a=s.toNumber();return a<0?this.formatNegativeUnder1000(Math.abs(a),n):this.formatUnder1000(a,n)}return Ta.isInfinite(s.abs())?s.sign()<0?this.negativeInfinite:this.infinite:s.sign()<0?this.formatNegativeDecimal(s.abs(),i,r):this.formatDecimal(s,i,r)},Object.defineProperty(t.prototype,"negativeInfinite",{get:function(){return"-".concat(this.infinite)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"infinite",{get:function(){return"Infinite"},enumerable:!1,configurable:!0}),t.prototype.formatVerySmallNegativeDecimal=function(e,i){return"-".concat(this.formatVerySmallDecimal(e,i))},t.prototype.formatVerySmallDecimal=function(e,i){return this.formatUnder1000(e.toNumber(),i)},t.prototype.formatNegativeUnder1000=function(e,i){return"-".concat(this.formatUnder1000(e,i))},t.prototype.formatUnder1000=function(e,i){return e.toFixed(i)},t.prototype.formatNegativeDecimal=function(e,i,n){return"-".concat(this.formatDecimal(e,i,n))},t.prototype.formatExponent=function(e,i,n,r){return i===void 0&&(i=Ta.exponentDefaultPlaces),n===void 0&&(n=function(a,o){return a.toString()}),r===void 0&&(r=Math.max(2,i)),QB(e)?n(e,Math.max(i,1)):JB(e)?kA(n(e,0)):this.formatDecimal(new di(e),r,r)},t}(),eF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Scientific"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i,n,r){return Zm(Qm,this.formatExponent.bind(this),10,1,!1)(i,n,r)},e}(Zn),tF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Engineering"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i,n,r){return Zm(Qm,this.formatExponent.bind(this),10,3,!1)(i,n,r)},e}(Zn),AA=function(t){Nn(e,t);function e(i,n,r){n===void 0&&(n=""),r===void 0&&(r="");var s=this;if(i.length<2)throw new Error("The supplied letter sequence must contain at least 2 letters");return s=t.call(this)||this,s.letters=i,s.mantissaExponentSeparator=n,s.separator=r,s}return Object.defineProperty(e.prototype,"name",{get:function(){return"Custom"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i,n){var r=Vre(i),s=r.mantissa.toFixed(n);return s+this.mantissaExponentSeparator+this.transcribe(r.exponent).join(this.separator)},e.prototype.transcribe=function(i){var n=i/3,r=this.letters.length;if(n<=r)return[this.letters[n-1]];for(var s=[];n>r;){var a=n%r,o=(a===0?r:a)-1;s.push(this.letters[o]),n=(n-a)/r,a===0&&n--}return s.push(this.letters[n-1]),s.reverse()},e}(tF),zre="abcdefghijklmnopqrstuvwxyz",iF=function(t){Nn(e,t);function e(){return t.call(this,zre)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Letters"},enumerable:!1,configurable:!0}),e}(AA),Xre=["😠","🎂","🎄","💀","🍆","👪","🌈","💯","🍦","🎃","💋","😂","🌙","⛔","🐙","💩","❓","☢","🙈","👍","☂","✌","⚠","❌","😋","⚡"],Kre=function(t){Nn(e,t);function e(){return t.call(this,Xre)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Emoji"},enumerable:!1,configurable:!0}),e}(AA),pT=function(t){Nn(e,t);function e(){var i=t!==null&&t.apply(this,arguments)||this;return i.name="Standard",i}return e.prototype.formatDecimal=function(i,n,r){return Zm(Qm,ZB,1e3,1,!1," ",!0)(i,n,r)},e}(Zn),Zre=new pT,Qre=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Mixed scientific"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i,n,r){return i.exponent<33?Zre.formatDecimal(i,n,r):Zm(Qm,this.formatExponent.bind(this),10,1,!1)(i,n,r)},e}(Zn),Jre=new pT,ese=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Mixed engineering"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i,n,r){return i.exponent<33?Jre.formatDecimal(i,n,r):Zm(Qm,this.formatExponent.bind(this),10,3,!1)(i,n,r)},e}(Zn),nF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Logarithm"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i,n,r){var s=i.log10();return"e".concat(this.formatExponent(s,n,function(a,o){return a.toFixed(o)},r))},e}(Zn),rF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Brackets"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i){for(var n=[")","[","{","]","(","}"],r=Math.LN10/Math.log(6)*i.log10(),s=Math.floor(r),a=r-s,o=Math.floor(a*36),c="";s>=6;){var d=s%6;s-=d,s/=6,c=n[d]+c}return c="e".concat(n[s]).concat(c,"."),c+=n[Math.floor(o/6)],c+=n[o%6],c},e}(Zn),tse=Math.log10(Number.MAX_VALUE),sF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Infinity"},enumerable:!1,configurable:!0}),e.prototype.formatDecimal=function(i,n){var r=i.log10(),s=r/tse,a=s<1e3?4:3,o=s.toFixed(Math.max(a,n));return Ta.exponentCommas.show?"".concat(kA(o),"∞"):"".concat(o,"∞")},e}(Zn),ise=[[1e6,"M̄"],[9e5,"C̄M̄"],[5e5,"D̄"],[4e5,"C̄D̄"],[1e5,"C̄"],[9e4,"X̄C̄"],[5e4,"L̄"],[4e4,"X̄L̄"],[1e4,"X̄"],[9e3,"ⅯX̄"],[5e3,"V̄"],[4e3,"ⅯV̄"],[1e3,"Ⅿ"],[900,"ⅭⅯ"],[500,"Ⅾ"],[400,"ⅭⅮ"],[100,"Ⅽ"],[90,"ⅩⅭ"],[50,"Ⅼ"],[40,"ⅩⅬ"],[10,"Ⅹ"],[9,"ⅠⅩ"],[5,"Ⅴ"],[4,"ⅠⅤ"],[1,"Ⅰ"]],nse=["","·",":","∴","∷","⁙"],hS=4e6,rse=Math.log10(hS),aF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Roman"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return"Infinitus"},enumerable:!1,configurable:!0}),e.prototype.formatUnder1000=function(i){return this.romanize(i)},e.prototype.formatDecimal=function(i){if(i.lt(hS))return this.romanize(i.toNumber());var n=i.log10(),r=n/rse,s=Math.pow(hS,r-Math.floor(r));return"".concat(this.romanize(s),"↑").concat(this.formatDecimal(new di(r)))},e.prototype.romanize=function(i){for(var n="",r=0,s=ise;r<s.length;r++)for(var a=s[r],o=a[0],c=a[1];o<=i;)n+=c,i-=o;var d=Math.round(Math.floor(i*10)*1.2);return d===0?n===""?"nulla":n:(d>5&&(d-=6,n+="Ｓ"),n+=nse[d],n)},e}(Zn),kw="⠀⠁⠂⠃⠄⠅⠆⠇⠈⠉⠊⠋⠌⠍⠎⠏⠐⠑⠒⠓⠔⠕⠖⠗⠘⠙⠚⠛⠜⠝⠞⠟⠠⠡⠢⠣⠤⠥⠦⠧⠨⠩⠪⠫⠬⠭⠮⠯⠰⠱⠲⠳⠴⠵⠶⠷⠸⠹⠺⠻⠼⠽⠾⠿⡀⡁⡂⡃⡄⡅⡆⡇⡈⡉⡊⡋⡌⡍⡎⡏⡐⡑⡒⡓⡔⡕⡖⡗⡘⡙⡚⡛⡜⡝⡞⡟⡠⡡⡢⡣⡤⡥⡦⡧⡨⡩⡪⡫⡬⡭⡮⡯⡰⡱⡲⡳⡴⡵⡶⡷⡸⡹⡺⡻⡼⡽⡾⡿⢀⢁⢂⢃⢄⢅⢆⢇⢈⢉⢊⢋⢌⢍⢎⢏⢐⢑⢒⢓⢔⢕⢖⢗⢘⢙⢚⢛⢜⢝⢞⢟⢠⢡⢢⢣⢤⢥⢦⢧⢨⢩⢪⢫⢬⢭⢮⢯⢰⢱⢲⢳⢴⢵⢶⢷⢸⢹⢺⢻⢼⢽⢾⢿⣀⣁⣂⣃⣄⣅⣆⣇⣈⣉⣊⣋⣌⣍⣎⣏⣐⣑⣒⣓⣔⣕⣖⣗⣘⣙⣚⣛⣜⣝⣞⣟⣠⣡⣢⣣⣤⣥⣦⣧⣨⣩⣪⣫⣬⣭⣮⣯⣰⣱⣲⣳⣴⣵⣶⣷⣸⣹⣺⣻⣼⣽⣾⣿",oF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Dots"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return"⣿⠀⣿"},enumerable:!1,configurable:!0}),e.prototype.formatUnder1000=function(i){return this.dotify(i*254)},e.prototype.formatDecimal=function(i){if(i.lt(163870639980315e-7))return this.dotify(i.toNumber()*254);var n=i.log(254),r=Math.floor(n-2),s=Math.pow(254,n-r);return"".concat(this.dotify(r),"⣿").concat(this.dotify(s*254))},e.prototype.dotify=function(i,n){n===void 0&&(n=!1);var r=Math.round(i);return!n&&r<254?kw[r+1]:r<64516?kw[Math.floor(r/254)+1]+kw[r%254+1]:this.dotify(Math.floor(r/64516))+this.dotify(r%64516,!0)},e}(Zn),LP=["̍","̶","͓","̿","҉","̰","̚","̸","͚","̷"],sse=["H","E"," ","C","O","M","E","S"];function ase(t){return t[Math.floor(Math.random()*t.length)]}var lF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Zalgo"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return sse.map(function(n){return n+ase(LP)}).join("")},enumerable:!1,configurable:!0}),e.prototype.formatUnder1000=function(i){return this.heComes(new di(i))},e.prototype.formatDecimal=function(i){return this.heComes(i)},e.prototype.heComes=function(i){for(var n=i.plus(1).log10()/66666*1e3,r=Number(n.toFixed(2)),s=Math.floor(Math.abs(Math.pow(2,30)*(n-r))),a=Array.from(kA(r)),o=Array.from(s.toString()+n.toFixed(0)),c=0;c<o.length;c++){var d=parseInt(o[c],10),p=37*c%a.length;a[p]+=LP[d]}return a.join("")},e}(Zn),Aw={positive:0,negative:1},cF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Hex"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"negativeInfinite",{get:function(){return"00000000"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return"FFFFFFFF"},enumerable:!1,configurable:!0}),e.prototype.formatVerySmallNegativeDecimal=function(i){return this.formatDecimal(i.negate())},e.prototype.formatVerySmallDecimal=function(i){return this.formatDecimal(i)},e.prototype.formatNegativeUnder1000=function(i){return this.formatDecimal(new di(-i))},e.prototype.formatUnder1000=function(i){return this.formatDecimal(new di(i))},e.prototype.formatNegativeDecimal=function(i){return this.formatDecimal(i.negate())},e.prototype.formatDecimal=function(i){return this.rawValue(i,32).toString(16).toUpperCase().padStart(8,"0")},e.prototype.modifiedLogarithm=function(i){var n=Math.floor(di.log2(i)),r=di.pow(2,n),s=di.div(i,r).toNumber()-1;return n+s},e.prototype.isFinite=function(i){return typeof i=="number"?isFinite(i):isFinite(i.e)&&isFinite(i.mantissa)},e.prototype.rawValue=function(i,n){for(var r=i,s=[],a=0;a<n&&this.isFinite(r);a++)di.lt(r,0)?(s.push(Aw.negative),r=-this.modifiedLogarithm(di.times(r,-1))):(s.push(Aw.positive),r=this.modifiedLogarithm(r));var o=parseInt(s.map(function(c){return c===Aw.positive?1:0}).join("").padEnd(n,"0"),2);return o!==Math.pow(2,n)-1&&(r>0||r===0&&o%2===1)&&(o+=1),o},e}(Zn),Or=[[0,"pL",0],[61611520,"minim",0],[61611520*60,"dram",1],[61611520*60*8,"ounce",2],[61611520*60*8*4,"gill",2],[61611520*60*8*4*2,"cup",3],[61611520*60*8*4*2*2,"pint",4],[61611520*60*8*4*2*2*2,"quart",4],[61611520*60*8*4*2*2*2*4,"gallon",4],[61611520*60*8*4*2*2*2*4*4.5,"pin",3],[61611520*60*8*4*2*2*2*4*9,"firkin",3],[61611520*60*8*4*2*2*2*4*18,"kilderkin",4],[61611520*60*8*4*2*2*2*4*36,"barrel",4],[61611520*60*8*4*2*2*2*4*54,"hogshead",5],[61611520*60*8*4*2*2*2*4*72,"puncheon",6],[61611520*60*8*4*2*2*2*4*108,"butt",7],[61611520*60*8*4*2*2*2*4*216,"tun",7]],ju=Or[1],BP=["minute ","tiny ","petite ","small ","modest ","medium ","generous ","large ","great ","grand ","huge ","gigantic ","immense ","colossal ","vast ","galactic ","cosmic ","infinite ","eternal "],ose=new Set("aeiouAEIOU"),RA=10*Or[Or.length-1][0],lse=Math.log10(RA),FP=Math.log10(RA/ju[0]),uF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Imperial"},enumerable:!1,configurable:!0}),e.prototype.formatUnder1000=function(i){return this.formatDecimal(new di(i))},e.prototype.formatDecimal=function(i){if(i.lt(RA))return this.convertToVolume(i.toNumber(),BP[0]);for(var n=i.log10()-lse,r=1;n>FP;)r++,n/=FP;return this.convertToVolume(Math.pow(10,n)*ju[0],BP[r])},e.prototype.convertToVolume=function(i,n){var r=this.findVolumeUnit(i);if(r===0)return this.formatMetric(i);var s=this.checkSmallUnits(n,i,r);if(s!==void 0)return s;var a=Or[r],o=Math.floor(i/a[0]),c=i-o*a[0];if(r<Or.length-1){var d=this.checkAlmost(n,i,0,r+1);if(d!==void 0)return d}var p=this.checkAlmost(n,c,o,r);if(p!==void 0)return p;if(c<Or[r-a[2]][0])return this.pluralOrArticle(o,n+a[1]);for(var m=Math.floor(c/Or[r-1][0]),y=r-1,_=c-m*Or[r-1][0],E=r-2;E>0&&E>r-a[2];--E){var C=Or[E],S=Math.floor(c/C[0]);if(S>9&&E!==1)break;var k=c-S*C[0];k<.99*_&&(m=S,y=E,_=k)}return this.bigAndSmall(n,o,a,m,Or[y])},e.prototype.formatMetric=function(i){return i<1e3?"".concat(i<10||i===Math.round(i)?i.toFixed(2):i.toFixed(0),"pL"):i<1e6?"".concat((i/1e3).toPrecision(4),"nL"):"".concat((i/1e6).toPrecision(4),"μL")},e.prototype.checkSmallUnits=function(i,n,r){var s=Or[r];if(r<=3&&n+9.5*ju[0]>Or[r+1][0])return this.almostOrShortOf(n,i,1,Or[r+1],ju);if(r===1){var a=Math.round(n*10/s[0]);if(a===10)return this.addArticle(i+s[1]);var o=a<100?1:0;return"".concat((a/10).toFixed(o)," ").concat(i).concat(s[1],"s")}if(r===2){var c=Math.floor(n/s[0]),d=n-c*s[0];if(d>50.5*ju[0])return this.almostOrShortOf(n,i,c+1,s,ju);var p=Math.round(d/ju[0]);return this.bigAndSmall(i,c,s,p,ju)}},e.prototype.findVolumeUnit=function(i){for(var n=0,r=Or.length,s=0;r-n>1;)s=Math.floor((n+r)/2),Or[s][0]>i?r=s:n=s;return n},e.prototype.checkAlmost=function(i,n,r,s){var a=Or[s];if(n+Or[s-a[2]][0]>=a[0])return this.almost(i,r+1,a);var o=Or[s+1-a[2]];if(n+o[0]>=a[0])return this.shortOf(i,r+1,a,1,o)},e.prototype.bigAndSmall=function(i,n,r,s,a){var o=this.pluralOrArticle(n,i+r[1]);return s===0?o:"".concat(o," and ").concat(this.pluralOrArticle(s,a[1]))},e.prototype.almost=function(i,n,r){return"almost ".concat(this.pluralOrArticle(n,i+r[1]))},e.prototype.almostOrShortOf=function(i,n,r,s,a){var o=Math.round((r*s[0]-i)/a[0]);return o===0?this.almost(n,r,s):this.shortOf(n,r,s,o,a)},e.prototype.shortOf=function(i,n,r,s,a){return"".concat(this.pluralOrArticle(s,a[1])," short of ").concat(this.pluralOrArticle(n,i+r[1]))},e.prototype.pluralOrArticle=function(i,n){return i===1?this.addArticle(n):"".concat(i," ").concat(n,"s")},e.prototype.addArticle=function(i){return(ose.has(i[0])?"an ":"a ")+i},e}(Zn),cse=["🕛","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚"],use=Math.log10(12),dF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Clock"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return"🕛🕡"},enumerable:!1,configurable:!0}),e.prototype.formatUnder1000=function(i){return this.clockwise(new di(i))},e.prototype.formatDecimal=function(i){return this.clockwise(i)},e.prototype.clockwise=function(i){if(i.lt(12))return this.hour(i.toNumber());var n=i.log10()/use,r=Math.floor(n);if(n<301){var s=(Math.pow(12,n-r+1)-12)/11;if(r<13)return this.hour(r-1)+this.hour(s);r-=13;var a="";return r>=144&&(a=this.hour(0),r-=144),a+this.hour(r/12)+this.hour(r%12)+this.hour(s)}r-=301;for(var o=1;r>=1728;)r=(r-1728)/12,++o;return this.hour(o)+this.hour(r/144)+this.hour(r%144/12)+this.hour(r%12)},e.prototype.hour=function(i){return cse[Math.max(Math.min(Math.floor(i),11),0)]},e}(Zn),rl=10006,dse=new di(rl),hse=Math.log10(rl),sf=[],fS=new Array(rl).fill(!1),hF=Math.ceil(Math.sqrt(rl));for(var tl=2;tl<hF;tl++)if(!fS[tl]){sf.push(tl);for(var Rw=tl;Rw<=rl;Rw+=tl)fS[Rw]=!0}for(var tl=hF;tl<rl;tl++)fS[tl]||sf.push(tl);var pS=sf.length-1,fse=sf[pS],Iw=["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","¹⁰","¹¹","¹²","¹³"],fF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Prime"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return"Primefinity?"},enumerable:!1,configurable:!0}),e.prototype.formatUnder1000=function(i){return this.primify(new di(i))},e.prototype.formatDecimal=function(i){return this.primify(i)},e.prototype.primify=function(i){if(i.lte(dse)){var n=Math.floor(i.toNumber());return n===0?"0":n===1?"1":this.formatFromList(this.primesFromInt(n))}var r=i.log10()/hse,s=Math.pow(rl,r/Math.ceil(r));if(r<=rl)return this.formatBaseExp(s,r);var a=Math.log10(r)/Math.log10(rl),o=Math.ceil(a);r=Math.pow(rl,a/o),s=Math.pow(rl,r/Math.ceil(r));var c=this.primesFromInt(o),d=c.length===1?Iw[c[0]]:"^(".concat(this.formatFromList(c),")");return this.formatBaseExp(s,r)+d},e.prototype.formatBaseExp=function(i,n){var r=this.formatFromList(this.primesFromInt(Math.floor(i))),s=this.formatFromList(this.primesFromInt(Math.ceil(n)));return"(".concat(r,")^(").concat(s,")")},e.prototype.formatFromList=function(i){for(var n=[],r=0,s=0,a=0;a<i.length;a++)i[a]===r?s++:(r>0&&(s>1?n.push("".concat(r).concat(Iw[s])):n.push(r)),r=i[a],s=1),a===i.length-1&&(s>1?n.push("".concat(i[a]).concat(Iw[s])):n.push(i[a]));return n.join("×")},e.prototype.findGreatestLtePrimeIndex=function(i){if(i>=fse)return pS;for(var n=0,r=pS;r!==n+1;){var s=Math.floor((r+n)/2),a=sf[s];if(a===i)return s;i<a?r=s:n=s}return n},e.prototype.primesFromInt=function(i){for(var n=[],r=i;r!==1;){var s=this.findGreatestLtePrimeIndex(r),a=sf[s];if(a===r){n.push(r);break}for(var o=r/2,c=this.findGreatestLtePrimeIndex(o),d=void 0;d===void 0;){var p=sf[c--];r%p===0&&(d=p)}r/=d,n.push(d)}return n.reverse()},e}(Zn),rg=["","","","","","","",""],pse=["","","","","","","",""],mse=Math.log(8),pF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Bar"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"negativeInfinite",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.formatVerySmallNegativeDecimal=function(i){return this.flipBars(this.formatDecimal(i))},e.prototype.formatVerySmallDecimal=function(i){return this.formatDecimal(i)},e.prototype.formatNegativeUnder1000=function(i){return this.flipBars(this.formatDecimal(new di(i)))},e.prototype.formatUnder1000=function(i){return this.formatDecimal(new di(i))},e.prototype.formatNegativeDecimal=function(i){return this.flipBars(this.formatDecimal(i))},e.prototype.formatDecimal=function(i){if(i.eq(0))return"0";if(i.lessThan(1)&&i.greaterThan(0))return"/".concat(this.formatDecimal(di.div(1,i)));for(var n=Math.LN10/mse*i.log10(),r=Math.floor(n),s=n-r,a=Math.floor(s*64),o=[rg[a%8],rg[Math.floor(a/8)]];r>=8;){var c=r%8;r=(r-c)/8,o.push(rg[c])}return o.push(rg[r]),o.join("")},e.prototype.flipBars=function(i){for(var n=[],r=0,s=i;r<s.length;r++){var a=s[r];n.push(pse[rg.indexOf(a)])}return n.join("")},e}(Zn),Dw="世使侍勢十史嗜士始室實屍市恃拭拾施是時氏濕獅矢石視試詩誓識逝適釋食",mF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Shi"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return this.shi(di.NUMBER_MAX_VALUE)},enumerable:!1,configurable:!0}),e.prototype.formatUnder1000=function(i){return this.shi(new di(i))},e.prototype.formatDecimal=function(i){return this.shi(i)},e.prototype.getShiCharacter=function(i){return Dw[Math.floor(i)%Dw.length]},e.prototype.shi=function(i){for(var n=Math.pow(i.plus(1).log10()*1e3,.08),r="",s=0;s<3;s++)r+=this.getShiCharacter(n*Math.pow(Dw.length,s));return r},e}(Zn),xw,zu=23,yse="",gse=(xw=yse.codePointAt(0))!==null&&xw!==void 0?xw:65,$P="",Mw="",Ag=[];for(var Pw=0;Pw<zu;Pw++){var vse=String.fromCharCode(gse+Pw);Ag.push(vse)}var bse=Math.log10(3),yF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Blobs"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return"".concat($P)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"negativeInfinite",{get:function(){return"".concat(Mw).concat($P)},enumerable:!1,configurable:!0}),e.prototype.formatNegativeUnder1000=function(i){return"".concat(Mw).concat(this.blobify(new di(i-1)))},e.prototype.formatNegativeDecimal=function(i){return"".concat(Mw).concat(this.blobify(i.minus(1)))},e.prototype.formatUnder1000=function(i){return this.blobify(new di(i))},e.prototype.formatDecimal=function(i){return this.blobify(i)},e.prototype.blobify=function(i){var n=this.reduceNumber(i.abs());return n<zu?Ag[Math.floor(n)]:Math.floor(n/zu)<zu+1?Ag[Math.floor(n/zu)-1]+Ag[Math.floor(n%zu)]:this.blobify(di.floor(n/zu-1))+Ag[Math.floor(n%zu)]},e.prototype.reduceNumber=function(i){return i.lte(1e3)?i.toNumber():(Math.log10(i.log10())-bse)/Math.log10(1.0002)+1e3},e}(Zn),gF=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"Blind"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"negativeInfinite",{get:function(){return" "},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"infinite",{get:function(){return" "},enumerable:!1,configurable:!0}),e.prototype.formatVerySmallNegativeDecimal=function(){return" "},e.prototype.formatVerySmallDecimal=function(){return" "},e.prototype.formatNegativeUnder1000=function(){return" "},e.prototype.formatUnder1000=function(){return" "},e.prototype.formatNegativeDecimal=function(){return" "},e.prototype.formatDecimal=function(){return" "},e}(Zn),HP=[new eF,new iF,new pT,new nF,new rF,new sF,new aF,new oF,new lF,new cF,new uF,new dF,new fF,new pF,new mF,new yF,new gF],_se=function(t){Nn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"ALL"},enumerable:!1,configurable:!0}),e.prototype.formatNegativeUnder1000=function(i,n){return this.formatDecimal(new di(-i),n)},e.prototype.formatUnder1000=function(i,n){return this.formatDecimal(new di(i),n)},e.prototype.formatNegativeDecimal=function(i,n){return this.formatDecimal(new di(-i),n)},e.prototype.formatDecimal=function(i,n){var r=Math.floor(Math.log2(i.abs().plus(2).log2())),s=HP[r%HP.length];return s.format(i,n,n)},e}(Zn);const Ese=Object.freeze(Object.defineProperty({__proto__:null,AllNotation:_se,BarNotation:pF,BlindNotation:gF,BlobsNotation:yF,BracketsNotation:rF,ClockNotation:dF,CustomNotation:AA,DotsNotation:oF,EmojiNotation:Kre,EngineeringNotation:tF,HexNotation:cF,ImperialNotation:uF,InfinityNotation:sF,LettersNotation:iF,LogarithmNotation:nF,MixedEngineeringNotation:ese,MixedScientificNotation:Qre,Notation:Zn,PrimeNotation:fF,RomanNotation:aF,ScientificNotation:eF,Settings:Ta,ShiNotation:mF,StandardNotation:pT,ZalgoNotation:lF,abbreviateStandard:ZB,formatMantissa:jre,formatMantissaBaseTen:Qm,formatMantissaWithExponent:Zm},Symbol.toStringTag,{value:"Module"})),Ue={firstRealityMigration:13,patches:{1:t=>{for(let e=0;e<t.autobuyers.length;e++)t.autobuyers[e]%1!==0&&(t.infinityPoints=t.infinityPoints.plus(t.autobuyers[e].cost-1));t.autobuyers=[1,2,3,4,5,6,7,8,9,10,11,12]},2:t=>{t.dimensionMultDecrease!==10&&(t.dimensionMultDecrease===9&&(t.dimensionMultDecrease=10,t.dimensionMultDecreaseCost=1e8,t.infinityPoints=t.infinityPoints.plus(1e8)),t.dimensionMultDecrease===8&&(t.dimensionMultDecrease=10,t.dimensionMultDecreaseCost=1e8,t.infinityPoints=t.infinityPoints.plus(21e8)),t.dimensionMultDecrease===7&&(t.dimensionMultDecrease=10,t.dimensionMultDecreaseCost=1e8,t.infinityPoints=t.infinityPoints.plus(421e8)))},5:t=>{t.newsArray=[]},9:t=>{const e=[];t.achievements.delete("r22")&&e.push("r35"),t.achievements.delete("r35")&&e.push("r76"),t.achievements.delete("r41")&&e.push("r22"),t.achievements.delete("r76")&&e.push("r41");for(const i of e)t.achievements.add(i);t.replicanti.intervalCost=t.replicanti.intervalCost.dividedBy(1e20)},9.5:t=>{t.timestudy.studies.includes(191)&&(t.timestudy.theorem=t.timestudy.theorem.plus(100))},10:t=>{if(t.timestudy.studies.includes(72))for(let e=4;e<8;e++)t[`infinityDimension${e}`].amount=Decimal.div(t[`infinityDimension${e}`].amount,Sacrifice.totalBoost.pow(.02))},12:t=>{const e=[null,1,5,100,1e3],i=[null,3,9,27,81];if(t.timeDimension1)for(let n=1;n<5;n++)new Decimal("1e300").lt(t[`timeDimension${n}`].cost)&&(t[`timeDimension${n}`].cost=Decimal.pow(i[n]*2.2,t[`timeDimension${n}`].bought).times(e[n]))},12.1:t=>{for(const e of t.achievements)if(e.includes("s")&&e.length<=3){t.achievements.splice(t.achievements.indexOf("r36"),1);break}},13:t=>{t.realTimePlayed=t.totalTimePlayed,t.thisReality=t.totalTimePlayed,t.thisInfinityRealTime=t.thisInfinityTime*100,t.thisEternityRealTime=t.thisEternity*100,t.thisRealityRealTime=t.thisReality*100,t.thisInfinityLastBuyTime=t.thisInfinityTime*100;for(let e=0;e<10;e++)t.lastTenEternities[e][2]=t.lastTenEternities[e][0],t.lastTenRuns[e][2]=t.lastTenRuns[e][0];t.options.newUI=!1,window.uiChoiceModalInterval=setInterval(()=>{GameUI.initialized&&(Modal.uiChoice.show(),clearInterval(window.uiChoiceModalInterval))},1e3),Ue.normalizeTimespans(t),Ue.convertAutobuyerMode(t),Ue.fixChallengeIds(t),Ue.adjustMultCosts(t),Ue.convertAchivementsToNumbers(t),Ue.adjustGameCreatedTime(t),Ue.moveSavedStudyTrees(t),Ue.convertEPMult(t),Ue.moveChallengeInfo(t),Ue.infinitiedConversion(t),Ue.adjustWhy(t),Ue.removeAchPow(t),Ue.adjustSacrificeConfirmation(t),Ue.migrateNotation(t),Ue.fixAutobuyers(t),Ue.removeAutoIPProperties(t),Ue.adjustAchievementVars(t),Ue.uniformDimensions(t),Ue.removeEternityChallGoal(t),Ue.removeTickspeed(t),Ue.removePostC3Reward(t),Ue.renameMoney(t),Ue.moveAutobuyers(t),Ue.convertEternityCountToDecimal(t),Ue.renameDimboosts(t),Ue.migrateConfirmations(t),Ue.removeOtherTickspeedProps(t),Ue.renameNewsOption(t),Ue.removeDimensionCosts(t),Ue.changeC8Handling(t),Ue.convertAchievementsToBits(t),Ue.setNoInfinitiesOrEternitiesThisReality(t),Ue.setTutorialState(t),Ue.migrateLastTenRuns(t),Ue.migrateIPGen(t),Ue.renameCloudVariable(t),Ue.standardizeUncompletedTimes(t),Ue.makeRecords(t),Ue.deleteOldRecords(t),Ue.migrateAutobuyers(t),Ue.migratePlayerVars(t),Ue.consolidateAuto(t),Ue.convertTimeTheoremPurchases(t),Ue.deleteDimboostBulk(t),Ue.deleteFloatingTextOption(t),Ue.refactorDoubleIPRebuyable(t),Ue.infMultNameConversion(t),Ue.convertNews(t),Ue.etercreqConversion(t),Ue.moveTS33(t),Ue.addBestPrestigeCurrency(t),Ue.migrateTheme(t)},14:t=>{Ue.reworkBHPulsing(t),t.reality.autoSort!==0&&t.reality.autoSort++},15:t=>{for(let e=0;e<10;e++){if(t.records.lastTenInfinities){const i=t.records.lastTenInfinities[e];t.records.recentInfinities[e]=[i[0]??Number.MAX_VALUE,Number(i[3]??Number.MAX_VALUE),new Decimal(i[1]??1),new Decimal(i[2]??1),""]}if(t.records.lastTenEternities){const i=t.records.lastTenEternities[e];t.records.recentEternities[e]=[i[0]??Number.MAX_VALUE,Number(i[3]??Number.MAX_VALUE),new Decimal(i[1]??1),new Decimal(i[2]??1),"",new Decimal(0)]}if(t.records.lastTenRealities){const i=t.records.lastTenRealities[e];t.records.recentRealities[e]=[i[0]??Number.MAX_VALUE,Number(i[3]??Number.MAX_VALUE),new Decimal(i[1]??1),i[2]??1,"",0,0]}}if(delete t.records.lastTenInfinities,delete t.records.lastTenEternities,delete t.records.lastTenRealities,delete t.options.showLastTenResourceGain,t.news.seen){let e=0;for(const i of Object.values(t.news.seen))for(const n of i)e+=countValuesFromBitmask(n);t.news.totalSeen=Math.max(t.news.totalSeen,e)}},16:t=>{t.options.perkLayout=t.options.fixedPerkStartingPos?0:1,delete t.options.fixedPerkStartingPos,t.reality.initialSeed=t.reality.seed,t.reality.initialSeed===0&&(t.reality.initialSeed=1);const e=Array.repeat(0,26);for(const i of GameDatabase.speedrunMilestones)e[i.id]=t.speedrun.records[i.key];for(t.speedrun.records=e,t.speedrun.seedSelection=SPEEDRUN_SEED_STATE.UNKNOWN,delete t.speedrun.milestones;t.reality.glyphs.sets.length<7;)t.reality.glyphs.sets.push({name:"",glyphs:[]})},17:t=>{const e=t.options.currentMultiplierSubtab??0;t.options.multiplierTab.currTab=e+(e>5?1:0),delete t.options.currentMultiplierSubtab},18:t=>{t.reality.automator.constantSortOrder=Object.keys(t.reality.automator.constants)},19:t=>{delete t.options.confirmations.resetCelestial},20:t=>{var o;const e=t.celestials.effarig;t.reality.glyphs.filter={select:(e==null?void 0:e.mode)??0,trash:(e==null?void 0:e.glyphTrashMode)??0,simple:(e==null?void 0:e.simpleEffectCount)??0};const i={},n=Object.values(GameDatabase.reality.glyphEffects);for(const c of ALCHEMY_BASIC_GLYPH_TYPES){const d=(o=e.glyphScoreSettings)==null?void 0:o.types[c],p=n.filter(m=>m.glyphTypes.includes(c)).sort((m,y)=>m.bitmaskIndex-y.bitmaskIndex);if(i[c]={rarity:(d==null?void 0:d.rarityThreshold)??0,score:(d==null?void 0:d.scoreThreshold)??0,effectCount:(d==null?void 0:d.effectCount)??0},i[c].specifiedMask=0,i[c].effectScores=[],!!d)for(const m of p)m&&(i[c].specifiedMask|=d.effectChoices[m.id]?1<<m.bitmaskIndex:0,i[c].effectScores.push(d.effectScores[m.id]))}t.reality.glyphs.filter.types=i,delete t.celestials.effarig.glyphScoreSettings,delete t.celestials.effarig.glyphTrashMode;const r=c=>{const d=[20,21,22].map(y=>1<<y).sum(),p=[20,21,22].map(y=>(c&1<<y)!==0);p.push(p.shift());let m=0;for(let y=20;y<=22;y++)p[y-20]&&(m|=1<<y);return c&~d|m},s=t.reality.glyphs.active.concat(t.reality.glyphs.inventory);for(const c of s)c.effects=r(c.effects);const a=["RMSet","RMminSet","glyphLevelSet","bestEPSet","speedSet","iMCapSet","laitelaSet"];for(const c of a){const d=t.records.bestReality[c];for(const p of d)p.effects=r(p.effects)}t.options.glyphBG=t.options.lightGlyphs?1:2,delete t.options.lightGlyphs},21:t=>{for(let e=1;e<=12;e++)t.eternityChalls[`eterc${e}`]>0&&(t.reality.unlockedEC|=1<<e);t.reality.maxRM=new Decimal(t.reality.realityMachines)},22:t=>{t.options.perkLayout>2&&(t.options.perkLayout+=3),t.options.statTabResources=t.options.showRecentRate?1:0,delete t.options.showRecentRate;for(let i=0;i<t.records.recentRealities.length;i++)t.records.recentRealities[i].push(0);t.options.themeClassic===void 0&&(t.options.themeClassic="Normal"),t.options.themeModern===void 0&&(t.options.themeModern="Normal");const e=Math.floor(Date.now()*Math.random()+1);t.reality.seed===1&&(t.reality.seed=e),t.reality.initialSeed===1&&(t.reality.initialSeed=e)},23:t=>{const e=i=>{const n=[20,21,22].map(a=>1<<a).sum(),r=[20,21,22].map(a=>(i&1<<a)!==0);r.push(r.shift());let s=0;for(let a=20;a<=22;a++)r[a-20]&&(s|=1<<a);return i&~n|s};for(const i of t.reality.glyphs.sets)for(const n of i.glyphs)n.effects=e(n.effects)},24:t=>{const e=Object.keys(t.reality.automator.constants);e.length!==t.reality.automator.constantSortOrder.length&&(t.reality.automator.constantSortOrder=[...e])},25:t=>{t.achievementBits[13]&32&&!t.reality.perks.has(107)&&t.reality.perks.add(107),t.celestials.pelle.doomed&&(t.dilation.rebuyables[3]=0)}},normalizeTimespans(t){t.realTimePlayed*=100,t.totalTimePlayed*=100,t.thisInfinityTime*=100,t.thisEternity*=100,t.thisReality*=100,t.bestInfinityTime=t.bestInfinityTime===9999999999?999999999999:t.bestInfinityTime*100,t.bestEternity=t.bestEternity===9999999999?999999999999:t.bestEternity*100;for(let e=0;e<10;e++)t.lastTenEternities[e][0]*=100,t.lastTenRuns[e][0]*=100,t.lastTenEternities[e][2]*=100,t.lastTenRuns[e][2]*=100;t.challengeTimes&&(t.challengeTimes=t.challengeTimes.map(e=>e*100)),t.infchallengeTimes&&(t.infchallengeTimes=t.infchallengeTimes.map(e=>e*100))},convertAutobuyerMode(t){for(let i=0;i<8;i++){const n=t.autobuyers[i];n%1!==0&&(n.target<10?n.target=AUTOBUYER_MODE.BUY_SINGLE:n.target=AUTOBUYER_MODE.BUY_10)}const e=t.autobuyers[8];e%1!==0&&(e.target<10?e.target=AUTOBUYER_MODE.BUY_SINGLE:e.target=AUTOBUYER_MODE.BUY_MAX)},fixChallengeIds(t){let e=!1;function i(n){if(!n.startsWith("challenge"))return n;e=!0;const r=parseInt(n.substr(9),10);return`challenge${GameDatabase.challenges.normal.find(a=>a.legacyId===r).id}`}t.currentChallenge=i(t.currentChallenge),t.challenges=t.challenges.map(i),e&&t.challengeTimes&&(t.challengeTimes=GameDatabase.challenges.normal.slice(1).map(n=>t.challengeTimes[n.legacyId-2]))},adjustMultCosts(t){t.tickSpeedMultDecreaseCost!==void 0&&(t.infinityRebuyables[0]=Math.round(Math.log(t.tickSpeedMultDecreaseCost/3e6)/Math.log(5))),t.dimensionMultDecreaseCost!==void 0&&(t.infinityRebuyables[1]=Math.round(Math.log(t.dimensionMultDecreaseCost/1e8)/Math.log(5e3))),delete t.tickSpeedMultDecrease,delete t.tickSpeedMultDecreaseCost,delete t.dimensionMultDecrease,delete t.dimensionMultDecreaseCost},convertAchivementsToNumbers(t){if(t.achievements.length>0&&t.achievements.every(i=>typeof i=="number"))return;const e=t.achievements;t.achievements=new Set,t.secretAchievements=new Set;for(const i of e){const n=GameDatabase.achievements.normal.find(s=>s.name===i);if(n!==void 0){t.achievements.add(n.id);continue}const r=parseInt(i.slice(1),10);if(isNaN(r))throw new Error(`Could not parse achievement id ${i}`);if(i.startsWith("r")){if(GameDatabase.achievements.normal.find(s=>s.id===r)===void 0)throw new Error(`Unrecognized achievement ${i}`);t.achievements.add(r)}else if(i.startsWith("s")){if(GameDatabase.achievements.secret.find(s=>s.id===r)===void 0)throw new Error(`Unrecognized secret achievement ${r}`);t.secretAchievements.add(r)}}},adjustGameCreatedTime(t){t.gameCreatedTime=t.lastUpdate-t.realTimePlayed},moveSavedStudyTrees(t){for(let e=1;e<=3;++e){const i=localStorage.getItem(`studyTree${e}`);i&&(t.timestudy.presets[e-1].studies=i)}},convertEPMult(t){if(t.epmult===void 0)return;const e=new Decimal(t.epmult);if(delete t.epmultCost,delete t.epmult,e.lte(1)){t.epmultUpgrades=0;return}t.epmultUpgrades=e.log(5)},moveChallengeInfo(t){function e(i){if(i.startsWith("challenge"))return{type:"normal",id:parseInt(i.slice(9),10)};if(i.startsWith("postc"))return{type:"infinity",id:parseInt(i.slice(5),10)};if(i!=="")throw new Error(`Unrecognized challenge ID ${i}`);return null}if(t.challengeTimes){for(let i=0;i<t.challengeTimes.length;++i)t.challenge.normal.bestTimes[i]=Math.min(t.challenge.normal.bestTimes[i],t.challengeTimes[i]);delete t.challengeTimes}if(t.infchallengeTimes){for(let i=0;i<t.infchallengeTimes.length;++i)t.challenge.infinity.bestTimes[i]=Math.min(t.challenge.infinity.bestTimes[i],t.infchallengeTimes[i]);delete t.infchallengeTimes}if(t.currentChallenge!==void 0){const i=e(t.currentChallenge);delete t.currentChallenge,i&&(t.challenge[i.type].current=i.id)}if(t.challenges){for(const i of t.challenges){const n=e(i);t.challenge[n.type].completedBits|=1<<n.id}delete t.challenges}if(t.currentEternityChall!==void 0){const i=t.currentEternityChall;if(delete t.currentEternityChall,i.startsWith("eterc"))t.challenge.eternity.current=parseInt(i.slice(5),10);else if(i!=="")throw new Error(`Unrecognized eternity challenge ${i}`)}t.eternityChallUnlocked!==void 0&&(t.challenge.eternity.unlocked=t.eternityChallUnlocked,delete t.eternityChallUnlocked),delete t.challengeTarget},adjustWhy(t){t.requirementChecks.permanent.singleTickspeed=t.why??0,delete t.why},adjustAchievementVars(t){t.requirementChecks.eternity.onlyAD1=t.dead,delete t.dead,t.requirementChecks.eternity.onlyAD8=t.dimlife,delete t.dimlife,t.requirementChecks.reality.noAM=!1,t.requirementChecks.eternity.noAD1=!1,t.requirementChecks.infinity.noAD8=!1,t.requirementChecks.eternity.noRG=t.replicanti.gal===0,(t.timestudy.theorem.gt(0)||t.timestudy.studies.length>0||t.challenge.eternity.unlocked!==0)&&(t.requirementChecks.reality.noPurchasedTT=!1),t.sacrificed.gt(0)&&(t.requirementChecks.infinity.noSacrifice=!1),t.requirementChecks.permanent.emojiGalaxies=t.spreadingCancer,delete t.spreadingCancer},removeAchPow(t){delete t.achPow},adjustSacrificeConfirmation(t){t.options.sacrificeConfirmation!==void 0&&(t.options.confirmations.sacrifice=t.options.sacrificeConfirmation,delete t.options.sacrificeConfirmation)},migrateNotation(t){const e=t.options.notation;e===void 0&&(t.options.notation="Standard");const i={Mixed:"Mixed scientific",Default:"Brackets",Emojis:"Cancer"};i[e]!==void 0&&(t.options.notation=i[e])},fixAutobuyers(t){for(let e=0;e<12;e++)t.autobuyers[e]%1!==0&&t.autobuyers[e].target%1!==0&&(t.autobuyers[e].target=AUTOBUYER_MODE.BUY_SINGLE),t.autobuyers[e]%1!==0&&(t.autobuyers[e].bulk===void 0||isNaN(t.autobuyers[e].bulk)||t.autobuyers[e].bulk===null)&&(t.autobuyers[e].bulk=1);typeof t.autobuyers[9]!="number"&&typeof t.autobuyers[9].bulk!="number"&&(t.autobuyers[9].bulk=1),t.autobuyers[11]%1!==0&&t.autobuyers[11].priority!==void 0&&t.autobuyers[11].priority!==null&&t.autobuyers[11].priority!=="undefined"&&(t.autobuyers[11].priority=new Decimal(t.autobuyers[11].priority))},removeAutoIPProperties(t){delete t.autoIP,delete t.autoTime},removeEternityChallGoal(t){delete t.eternityChallGoal},removeTickspeed(t){delete t.tickspeed,t.tickSpeedCost=new Decimal(1e3),t.tickspeedMultiplier=new Decimal(10)},removeOtherTickspeedProps(t){delete t.tickSpeedCost,delete t.tickspeedMultiplier},renameNewsOption(t){t.options.news.enabled=!t.options.newsHidden,delete t.options.newsHidden},removeDimensionCosts(t){for(const e of t.dimensions.antimatter)delete e.cost,delete e.costMultiplier},renameTickspeedPurchaseBumps(t){t.chall9TickspeedPurchaseBumps!==void 0&&(t.chall9TickspeedCostBumps=t.chall9TickspeedPurchaseBumps,delete t.chall9TickspeedPurchaseBumps)},removePostC3Reward(t){delete t.postC3Reward},renameMoney(t){t.antimatter=new Decimal(t.money),t.totalAntimatter=new Decimal(t.totalmoney),delete t.money,delete t.totalmoney},uniformDimensions(t){for(let e=1;e<=8;e++){const i=[null,"first","second","third","fourth","fifth","sixth","seventh","eight"][e],n={cost:`${i}Cost`,amount:`${i}Amount`,bought:`${i}Bought`,pow:`${i}Pow`},r=t.dimensions.antimatter[e-1];r.cost=new Decimal(t[n.cost]),r.amount=new Decimal(t[n.amount]),r.bought=t[n.bought],t.costmultipliers&&(r.costMultiplier=new Decimal(t.costMultipliers[e-1])),delete t[n.cost],delete t[n.amount],delete t[n.bought],delete t[n.pow]}if(delete t.costMultipliers,t.infinityDimension1){for(let e=1;e<=8;e++){const i=t.dimensions.infinity[e-1],n=`infinityDimension${e}`,r=t[n];i.cost=new Decimal(r.cost),i.amount=new Decimal(r.amount),i.bought=r.bought,i.baseAmount=r.baseAmount,i.isUnlocked=t.infDimensionsUnlocked[e-1],delete t[n]}delete t.infDimensionsUnlocked}if(t.timeDimension1)for(let e=1;e<=8;e++){const i=t.dimensions.time[e-1],n=`timeDimension${e}`,r=t[n];r!==void 0&&(i.cost=new Decimal(r.cost),i.amount=new Decimal(r.amount),i.bought=r.bought,delete t[n])}},moveAutobuyers(t){t.autobuyers[11]%1!==0&&t.autobuyers[11].priority!==void 0&&t.autobuyers[11].priority!==null&&t.autobuyers[11].priority!=="undefined"&&(t.autobuyers[11].priority=new Decimal(t.autobuyers[11].priority));for(let e=0;e<8;e++){const i=t.autobuyers[e];if(i%1===0)continue;const n=t.auto.antimatterDims.all[e];n.cost=i.cost,n.interval=i.interval,n.bulk=i.bulk,n.mode=i.target,n.priority=i.priority,n.isActive=i.isOn,n.lastTick=t.realTimePlayed}if(t.autobuyers[8]%1!==0){const e=t.autobuyers[8],i=t.auto.tickspeed;i.cost=e.cost,i.interval=e.interval,i.mode=e.target,i.priority=e.priority,i.isActive=e.isOn,i.lastTick=t.realTimePlayed}if(t.autobuyers[9]%1!==0){const e=t.autobuyers[9],i=t.auto.dimBoost;i.cost=e.cost,i.interval=e.interval,i.maxDimBoosts=e.priority,i.galaxies=t.overXGalaxies,i.bulk=e.bulk,i.buyMaxInterval=e.bulk,i.isActive=e.isOn,i.lastTick=t.realTimePlayed}if(delete t.overXGalaxies,t.autobuyers[10]%1!==0){const e=t.autobuyers[10],i=t.auto.galaxy;i.cost=e.cost,i.interval=e.interval,i.maxGalaxies=e.priority,i.buyMaxInterval=e.bulk,i.buyMax=e.bulk>0,i.isActive=e.isOn,i.lastTick=t.realTimePlayed}if(t.autobuyers[11]%1!==0){const e=t.autobuyers[11],i=t.auto.bigCrunch;i.cost=e.cost,i.interval=e.interval,i.mode=["amount","time","relative"].indexOf(t.autoCrunchMode);const n=new Decimal(e.priority);switch(t.autoCrunchMode){case"amount":i.amount=n;break;case"time":i.time=n.lt(Decimal.NUMBER_MAX_VALUE)?n.toNumber():i.time;break;case"relative":i.xHighest=n;break}i.isActive=e.isOn,i.lastTick=t.realTimePlayed}if(delete t.autoCrunchMode,delete t.autobuyers,t.autoSacrifice&&t.autoSacrifice%1!==0){const e=t.autoSacrifice,i=t.auto.sacrifice;i.multiplier=new Decimal(e.priority),i.isActive=e.isOn}if(delete t.autoSacrifice,t.eternityBuyer!==void 0){const e=t.eternityBuyer,i=t.auto.eternity;t.autoEternityMode===void 0&&(i.time=Number(e.limit)),i.isActive=e.isOn}delete t.eternityBuyer},convertNews(t){t.newsArray===void 0?t.newsArray=[]:t.newsArray=t.newsArray.map(n=>typeof n=="number"?`a${n}`:n);const e=new Set(t.newsArray);t.news={},t.news.seen={},t.news.specialTickerData={uselessNewsClicks:0,paperclips:0,newsQueuePosition:1e3,eiffelTowerChapter:0};const i=NewsHandler.BITS_PER_MASK;for(const n of e){const r=n.match(/([a-z]+)(\d+)/u),s=r[1],a=parseInt(r[2],10);for(t.news.seen[s]||(t.news.seen[s]=[]);i*t.news.seen[s].length<a;)t.news.seen[s].push(0);t.news.seen[s][Math.floor(a/i)]|=1<<a%i}t.news.totalSeen=NewsHandler.uniqueTickersSeen,delete t.newsArray},convertEternityCountToDecimal(t){t.eternities=new Decimal(t.eternities),t.reality.partEternitied=new Decimal(t.reality.partEternitied)},renameDimboosts(t){t.dimensionBoosts=t.resets,delete t.resets},migrateConfirmations(t){t.options.confirmations.challenges=!t.options.challConf,delete t.options.challConf,t.options.confirmations.eternity=t.options.eternityconfirm,delete t.options.eternityconfirm,delete t.tickDecrease},changeC8Handling(t){t.chall8TotalSacrifice=Decimal.pow(t.chall11Pow,2),delete t.chall11Pow},convertAchievementsToBits(t){const e={"4,3":"6,4","6,4":"7,7","7,7":"4,3","10,1":"11,7","11,7":"10,1","11,3":"12,4","12,4":"11,3"},i=(n,r,s)=>{for(const a of r){let o=Math.floor(a/10),c=a%10;!s&&[o,c].join(",")in e&&([o,c]=e[[o,c].join(",")].split(",")),n[o-1]|=1<<c-1}!s&&(t.infinityUpgrades.size>=16||t.eternities.gt(0)||t.realities>0)?n[3]|=1:n[3]&=-2,s&&(n[2]&=-129)};t.achievementBits=Array.repeat(0,15),i(t.achievementBits,t.achievements,!1),delete t.achievements,t.secretAchievementBits=Array.repeat(0,4),i(t.secretAchievementBits,t.secretAchievements,!0),delete t.secretAchievements},setNoInfinitiesOrEternitiesThisReality(t){t.requirementChecks.reality.noInfinities=t.infinities.eq(0)&&t.eternities.eq(0),t.requirementChecks.reality.noEternities=t.eternities.eq(0)},setTutorialState(t){t.infinities.gt(0)||t.eternities.gt(0)||t.realities>0||t.galaxies>0?t.tutorialState=4:t.dimensionBoosts>0&&(t.tutorialState=TUTORIAL_STATE.GALAXY)},migrateLastTenRuns(t){t.lastTenRuns=t.lastTenRuns.map(e=>[e[0],e[1],new Decimal(e[3]),new Decimal(e[2]).toNumber()]),t.lastTenEternities=t.lastTenEternities.map(e=>[e[0],e[1],new Decimal(1),new Decimal(e[2]).toNumber()])},migrateIPGen(t){t.infinityRebuyables[2]=t.offlineProd/5,delete t.offlineProd,delete t.offlineProdCost},renameCloudVariable(t){t.options.cloudEnabled=t.options.cloud,delete t.options.cloud},standardizeUncompletedTimes(t){t.bestInfinityTime===999999999999&&(t.bestInfinityTime=Number.MAX_VALUE),t.bestInfinityRealTime===999999999999&&(t.bestInfinityRealTime=Number.MAX_VALUE),t.bestEternity===999999999999&&(t.bestEternity=Number.MAX_VALUE);for(let e=0;e<t.challenge.normal.bestTimes.length;e++)t.challenge.normal.bestTimes[e]===26784e5&&(t.challenge.normal.bestTimes[e]=Number.MAX_VALUE);for(let e=0;e<t.challenge.infinity.bestTimes.length;e++)t.challenge.infinity.bestTimes[e]===26784e5&&(t.challenge.infinity.bestTimes[e]=Number.MAX_VALUE);for(let e=0;e<10;e++)t.lastTenRuns[e][0]===26784e5&&(t.lastTenRuns[e][0]=Number.MAX_VALUE),t.lastTenRuns[e][3]===26784e3&&(t.lastTenRuns[e][3]=Number.MAX_VALUE),t.lastTenEternities[e][0]===26784e5&&(t.lastTenEternities[e][0]=Number.MAX_VALUE),t.lastTenEternities[e][3]===26784e3&&(t.lastTenEternities[e][3]=Number.MAX_VALUE)},makeRecords(t){t.records.gameCreatedTime=t.gameCreatedTime,t.records.totalTimePlayed=t.totalTimePlayed,t.records.realTimePlayed=t.realTimePlayed,t.records.totalAntimatter=new Decimal(t.totalAntimatter),t.records.lastTenInfinities=t.lastTenRuns,t.records.lastTenEternities=t.lastTenEternities;for(let e=0;e<10;e++)t.records.lastTenInfinities[e][1]=new Decimal(t.lastTenRuns[e][1]),t.records.lastTenEternities[e][1]=new Decimal(t.lastTenEternities[e][1]);t.records.thisInfinity.time=t.thisInfinityTime,t.records.thisInfinity.realTime=t.thisInfinityTime,t.records.bestInfinity.time=t.bestInfinityTime,t.records.thisEternity.time=t.thisEternity,t.records.thisEternity.realTime=t.thisEternity,t.records.bestEternity.time=t.bestEternity,t.records.thisReality.time=t.thisReality,t.records.thisReality.realTime=t.thisReality},deleteOldRecords(t){delete t.gameCreatedTime,delete t.totalTimePlayed,delete t.realTimePlayed,delete t.totalAntimatter,delete t.lastTenRuns,delete t.lastTenEternities,delete t.thisInfinityTime,delete t.bestInfinityTime,delete t.thisEternity,delete t.bestEternity,delete t.thisReality},migrateAutobuyers(t){t.auto.autobuyerOn=t.options.autobuyerOn,delete t.options.bulkOn,delete t.options.autobuyerOn},migratePlayerVars(t){t.replicanti.boughtGalaxyCap=t.replicanti.gal,t.dilation.totalTachyonGalaxies=t.dilation.freeGalaxies,delete t.replicanti.gal,delete t.dilation.freeGalaxies},consolidateAuto(t){for(let e=0;e<8;e++)t.auto.infinityDims.all[e].isActive=t.infDimBuyers[e];for(let e=0;e<3;e++)t.auto.replicantiUpgrades.all[e].isActive=t.replicanti.auto[e];t.auto.replicantiGalaxies.isActive=t.replicanti.galaxybuyer,t.auto.ipMultBuyer.isActive=t.infMultBuyer,delete t.infDimBuyers,delete t.auto.infDimTimer,delete t.replicanti.galaxybuyer,delete t.replicanti.auto,delete t.auto.repUpgradeTimer,delete t.infMultBuyer},convertTimeTheoremPurchases(t){t.timestudy.amBought=new Decimal(t.timestudy.amcost).exponent/2e4-1,t.timestudy.ipBought=new Decimal(t.timestudy.ipcost).exponent/100,t.timestudy.epBought=Math.round(new Decimal(t.timestudy.epcost).log2()),delete t.timestudy.amcost,delete t.timestudy.ipcost,delete t.timestudy.epcost},infinitiedConversion(t){t.infinities=new Decimal(t.infinitied),t.infinitiesBanked=new Decimal(t.infinitiedBank),delete t.infinitied,delete t.infinitiedBank},deleteDimboostBulk(t){delete t.auto.dimBoost.bulk,t.infinityUpgrades.delete("bulkBoost")&&t.infinityUpgrades.add("autobuyMaxDimboosts")},removePriority(t){const e=t.auto.antimatterDims.all??t.auto.antimatterDims;for(let i=0;i<8;i++)delete e[i].priority;delete t.auto.tickspeed.priority},deleteFloatingTextOption(t){delete t.options.animations.floatingText},refactorDoubleIPRebuyable(t){const e=new Decimal(t.infMult).log2();delete t.infMult,t.infMult=Math.round(e),delete t.infMultCost},deletePostChallUnlocked(t){delete t.postChallUnlocked},infMultNameConversion(t){t.IPMultPurchases=t.infMult,delete t.infMult},etercreqConversion(t){t.etercreq&&(t.challenge.eternity.requirementBits|=1<<t.etercreq),delete t.etercreq},moveTS33(t){t.timestudy.studies.includes(33)&&!t.timestudy.studies.includes(22)&&(t.timestudy.studies.splice(t.timestudy.studies.indexOf(33),1),t.timestudy.theorem=new Decimal(t.timestudy.theorem).plus(2))},addBestPrestigeCurrency(t){t.records.thisReality.maxEP=t.eternityPoints,t.records.bestReality.bestEP=t.eternityPoints,t.records.thisEternity.maxIP=t.infinityPoints,t.records.thisReality.maxIP=t.infinityPoints},migrateTheme(t){t.options.themeClassic=t.options.theme===void 0?"Normal":t.options.theme,delete t.options.themes,delete t.options.secretThemeKey},reworkBHPulsing(t){delete t.celestials.enslaved.storedFraction},prePatch(t){t.totalAntimatter=t.totalAntimatter||t.totalmoney||t.money,t.thisEternity=t.thisEternity||t.totalTimePlayed,t.version=t.version||0},patch(t,e){this.prePatch(t);const i=Yf([Player.defaultStart,t]),n=Object.keys(this.patches).map(parseFloat).sort();let r;for(;(r=n.find(s=>i.version<s&&s<e))!==void 0;){const s=this.patches[r];s(i),i.version=r}return i},patchPreReality(t){return this.patch(t,this.firstRealityMigration)},patchPostReality(t){return this.patch(t,Object.keys(Ue.patches).map(e=>Number(e)).max()+1)}};function VP(t){let e=0;for(const i of t)e|=1<<i;return e}const Ow={patches:[t=>{Ue.normalizeTimespans(t),t.bestReality=t.bestReality===9999999999?999999999999:t.bestReality*100;for(let e=0;e<10;e++)t.lastTenRealities[e][0]*=100},t=>{t.reality.glyphs.last=""},t=>{t.secretUnlocks.themes=[]},t=>{t.wormhole.power*=36},t=>{t.reality.rebuyables={1:0,2:0,3:0,4:0,5:0};for(let e=1;e<6;e++)t.reality.upg.includes(e)&&(t.reality.rebuyables[e]=1,t.reality.upg.splice(t.reality.upg.indexOf(e),1))},t=>{t.reality.tdbuyer={on:!1,threshhold:1},t.reality.epmultbuyer={on:!1,threshhold:1}},t=>{t.reality.perks=new Set},t=>{t.reality.pp=0},t=>{t.reality.pp=t.realities},t=>{t.reality.pp>0&&(t.reality.pp-=1,t.reality.perks.add(0))},t=>{t.secretUnlocks.dragging=0},t=>{for(let e=0;e<t.reality.glyphs.active.length;e++){const i=t.reality.glyphs.active[e];i.effects.autochall!==void 0&&(delete i.effects.autochall,i.effects.buy10=1+Math.pow(i.level*i.strength,.8)/10)}for(let e=0;e<t.reality.glyphs.inventory.length;e++){const i=t.reality.glyphs.inventory[e];i.effects.autochall!==void 0&&(delete i.effects.autochall,i.effects.buy10=1+Math.pow(i.level*i.strength,.8)/10)}},t=>{t.reality.upgReqs.push(!1,!1,!1,!1,!1)},t=>{t.reality.realityMachines=new Decimal(t.reality.realityMachines)},t=>{t.reality.glyphs.sac={power:0,infinity:0,time:0,replication:0,dilation:0,effarig:0}},t=>{t.wormhole.pause=!1},t=>{t.wormholePause=!1,t.wormhole[0]===void 0&&(t.wormhole=[t.wormhole,{speed:60*6,power:90,duration:7,phase:0,active:!1,unlocked:!1},{speed:6*6,power:45,duration:4,phase:0,active:!1,unlocked:!1}])},t=>{t.reality.upg.includes(20)&&(t.wormhole[1].unlocked=!0)},t=>{t.reality.upgReqs.push(!1,!1,!1,!1,!1)},t=>{t.reality.tdbuyer=void 0,t.reality.tdbuyers=[!1,!1,!1,!1,!1,!1,!1,!1],t.reality.epmultbuyer=!1},t=>{["rm","glyph","either","both"].includes(t.autoRealityMode)||(t.autoRealityMode="rm")},Ue.convertAutobuyerMode,t=>{for(const e in t.celestials.effarig.glyphWeights)t.celestials.effarig.glyphWeights[e]*=100},t=>{for(const e in t.celestials.effarig.glyphWeights)t.celestials.effarig.glyphWeights[e]=25},t=>{},Ue.fixChallengeIds,Ue.adjustMultCosts,t=>{const e=t.celestials.effarig;t.celestials.effarig=t.celestials.teresa,t.celestials.teresa=e;for(const i in t.reality.glyphs.active){const n=t.reality.glyphs.active[i];n.type==="teresa"&&(n.type="effarig")}for(const i in t.reality.glyphs.inventory){const n=t.reality.glyphs.inventory[i];n.type==="teresa"&&(n.type="effarig")}},t=>{function e(i,n,r,s,a=null){t.celestials[i][r]!==void 0?(t.celestials[n][r]===void 0?t.celestials[n][r]=t.celestials[i][r]:a&&(t.celestials[n][r]=a(t.celestials[i][r],t.celestials[n][r])),delete t.celestials[i][r]):t.celestials[n][r]===void 0&&(t.celestials[n][r]=s)}e("teresa","effarig","glyphWeights",{ep:25,repl:25,dt:25,eternities:25}),e("teresa","effarig","autoGlyphSac",{mode:AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,types:GlyphTypes.list.mapToObject(i=>i.id,i=>({rarityThreshold:0,scoreThreshold:0,effectScores:i.effects.mapToObject(n=>n.id,()=>0)}))}),e("teresa","effarig","autoGlyphPick",{mode:AUTO_GLYPH_REJECT.SACRIFICE}),e("teresa","effarig","relicShards",0,Math.max),e("effarig","teresa","quoteIdx",0),e("effarig","teresa","bestRunAM",0,Decimal.max),e("effarig","teresa","rmStore",0,Math.max),e("effarig","teresa","glyphLevelMult",1,Math.max),e("effarig","teresa","rmMult",1,Math.max),e("effarig","teresa","dtBulk",1,Math.max),delete t.celestials.effarig.typePriorityOrder,delete t.celestials.teresa.typePriorityOrder,e("teresa","effarig","glyphScoreSettings",{mode:AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,simpleEffectCount:0,types:GlyphTypes.list.mapToObject(i=>i.id,i=>({rarityThreshold:0,scoreThreshold:0,effectCount:0,effectChoices:i.effects.mapToObject(n=>n.id,()=>!1),effectScores:i.effects.mapToObject(n=>n.id,()=>0)}))}),e("effarig","teresa","bestAMSet",[])},t=>{t.blackHole=t.wormhole,t.blackHolePause=t.wormholePause,delete t.wormhole,delete t.wormholePause},t=>{for(let e=0;e<t.blackHole.length;e++)t.blackHole[e].id=e,t.blackHole[e].intervalUpgrades=Math.round(Math.log(t.blackHole[e].speed/(3600/Math.pow(10,e)))/Math.log(.8)),t.blackHole[e].powerUpgrades=Math.round(Math.log(t.blackHole[e].power/(180/Math.pow(2,e)))/Math.log(1.35)),t.blackHole[e].durationUpgrades=Math.round(Math.log(t.blackHole[e].duration/(10-e*3))/Math.log(1.3)),delete t.blackHole[e].speed,delete t.blackHole[e].power,delete t.blackHole[e].duration},()=>{},Ue.convertAchivementsToNumbers,Ue.adjustGameCreatedTime,Ue.moveSavedStudyTrees,t=>{t.celestials.teresa.rmStore>Teresa.rmStoreMax&&(t.reality.realityMachines=t.reality.realityMachines.plus(t.celestials.teresa.rmStore-Teresa.rmStoreMax),t.celestials.teresa.rmStore=Teresa.rmStoreMax),t.reality.upg&&(t.reality.upgradeBits=VP(t.reality.upg),delete t.reality.upg),t.reality.upgradeBits&1<<25||(t.realityBuyer.isOn=!1);for(let e=0;e<t.reality.glyphs.active.length;e++){const i=t.reality.glyphs.active[e];i.type==="power"&&i.effects.mult!==void 0&&(i.effects.mult=new Decimal(i.effects.mult))}for(let e=0;e<t.reality.glyphs.inventory.length;e++){const i=t.reality.glyphs.inventory[e];i.type==="power"&&i.effects.mult!==void 0&&(i.effects.mult=new Decimal(i.effects.mult))}},Ue.convertEPMult,Ue.moveChallengeInfo,Ue.adjustWhy,Ue.adjustThemes,Ue.removeAchPow,Ue.adjustSacrificeConfirmation,Ue.migrateNotation,Ue.fixAutobuyers,Ue.removeAutoIPProperties,t=>{t.lastTenRealities=t.lastTenRealities.map(e=>[e[0],e[1],e[3],e[2]])},t=>{t.achievements.delete(157),t.achievements.delete(156),t.achievements.delete(155),t.achievements.delete(153),Ue.adjustWhy(t),Ue.adjustAchievementVars(t)},Ue.uniformDimensions,Ue.removeEternityChallGoal,t=>{delete t.blackHole.pop()},t=>{const e=t.reality.glyphs.active.concat(t.reality.glyphs.inventory);for(let i=0;i<e.length;i++)e[i].id=i},t=>{},t=>{Ue.removeTickspeed(t),Ue.removePostC3Reward(t)},t=>{const e=t.reality.glyphs.active.concat(t.reality.glyphs.inventory);for(const i of e){let n=0;for(const r of orderedEffectList){const s=separateEffectKey(r);i.type===s[0]&&i.effects[s[1]]!==void 0&&(n+=1<<GlyphEffects[r].bitmaskIndex)}i.effects=n}},t=>{const e=t.celestials.ra.pets;for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const n=e[i],r=n.exp+1e4*(Math.pow(1.12,n.level-1)-1)/.12;n.level=1,n.exp=Math.clampMin(r,0)}t.celestials.ra.unlocks=[]},t=>{const e=t.celestials.ra.pets;for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const n=e[i];let r=n.exp;for(let s=1;s<n.level;s++){const a=Math.floor(s/5),o=2.5*a*(a+1)+s%5*(a+1);r+=Math.floor(1e4*Math.pow(1.12,o-1))}n.level=1,n.exp=Math.clampMin(r,0)}t.celestials.ra.unlocks=[]},Ue.renameMoney,t=>{Ue.moveAutobuyers(t);const e=t.realityBuyer,i=t.auto.reality;i.mode=["rm","glyph","either","both"].indexOf(t.autoRealityMode),i.rm=e.rm,i.glyph=e.glyph,i.isActive=e.isOn;const n=t.auto.eternity;n.mode=["amount","time","relative"].indexOf(t.autoEternityMode);const r=new Decimal(e.limit);switch(t.autoEternityMode){case"amount":n.amount=r;break;case"time":n.time=r.lt(Decimal.NUMBER_MAX_VALUE)?r.toNumber():n.time;break;case"relative":n.xLast=r;break}delete t.realityBuyer,delete t.autoRealityMode,delete t.autoEternityMode},Ue.convertNews,Ue.convertEternityCountToDecimal,Ue.renameDimboosts,t=>{t.auto.reality.mode=0,t.auto.reality.isActive=!1},t=>{t.celestials.teresa.perkShop=[Math.floor(Math.log(t.celestials.teresa.glyphLevelMult)/Math.log(1.05)),Math.floor(Math.log(t.celestials.teresa.rmMult)/Math.log(2)),Math.floor(Math.log(t.celestials.teresa.dtBulk)/Math.log(2)),0],delete t.celestials.teresa.glyphLevelMult,delete t.celestials.teresa.rmMult,delete t.celestials.teresa.dtBulk},Ue.migrateConfirmations,Ue.removeOtherTickspeedProps,t=>{delete t.resets,delete t.tickDecrease},Ue.renameNewsOption,Ue.removeDimensionCosts,Ue.renameTickspeedPurchaseBumps,t=>{const e=i=>i===void 0?0:VP(i);t.celestials.teresa.unlockBits=e(t.celestials.teresa.unlocks),delete t.celestials.teresa.unlocks,t.celestials.effarig.unlockBits=e(t.celestials.effarig.unlocks),delete t.celestials.effarig.unlocks,t.celestials.v.unlockBits=e(t.celestials.v.unlocks),delete t.celestials.v.unlocks,t.celestials.ra.unlockBits=e(t.celestials.ra.unlocks),delete t.celestials.ra.unlocks,t.celestials.laitela.unlockBits=e(t.celestials.laitela.unlocks),delete t.celestials.laitela.unlocks},t=>{t.reality.seed=Math.floor(Math.abs(t.reality.seed))%4294967295},t=>{t.auto.sacrifice.multiplier=new Decimal(t.auto.sacrifice.multiplier)},Ue.changeC8Handling,t=>{for(;t.celestials.teresa.perkShop.length<5;)t.celestials.teresa.perkShop.push(0)},t=>{delete t.secretUnlocks.fixed},t=>{delete t.celestials.effarig.quoteIdx,delete t.celestials.enslaved.quoteIdx},t=>{const e=t.celestials.teresa.perkShop[4],i=t.celestials.teresa.perkShop[3];t.celestials.teresa.perkShop[3]=e,t.celestials.teresa.perkShop[4]=i},Ue.convertAchievementsToBits,t=>{for(const e of t.dimensions.antimatter)delete e.power;for(const e of t.dimensions.infinity)delete e.power;for(const e of t.dimensions.time)delete e.power},t=>{const i=t.reality.glyphs.active.concat(t.reality.glyphs.inventory);for(const n of i)n.type==="cursed"&&(n.effects=15)},t=>{t.options.showHintText.alchemy=t.options.showAlchemyResources,delete t.options.showAlchemyResources},t=>{const e=t.celestials.effarig.autoGlyphSac.types,i=GlyphTypes.list.filter(n=>generatedTypes.includes(n.id)).mapToObject(n=>n.id,n=>({rarityThreshold:0,scoreThreshold:0,effectCount:0,effectChoices:n.effects.mapToObject(r=>r.id,()=>!1),effectScores:n.effects.mapToObject(r=>r.id,()=>0)}));for(const n of generatedTypes){i[n].rarityThreshold=e[n].rarityThreshold,i[n].scoreThreshold=e[n].scoreThreshold;for(const r of Object.keys(i[n].effectScores))i[n].effectScores[r]=e[n].effectScores[r]}t.celestials.effarig.autoGlyphSac.types=i},t=>{t.reality.glyphs.inventorySize+=10},t=>{t.celestials.v.unlockBits=0,V.updateTotalRunUnlocks(),V.checkForUnlocks()},t=>{t.celestials.v.unlockBits=0,V.updateTotalRunUnlocks(),V.checkForUnlocks()},t=>{t.reality.autoAchieve=!t.reality.disableAutoAchieve,delete t.reality.disableAutoAchieve,delete t.newEC10Test},t=>{t.celestials.ra.unlockBits=0,Ra.checkForUnlocks()},t=>{t.celestials.v.runRecords[0]=-10},t=>{delete t.celestials.v.cursedThisRun},t=>{t.celestials.ra.unlockBits=0,Ra.checkForUnlocks()},t=>{Object.assign(t.celestials.effarig.glyphScoreSettings,t.celestials.effarig.autoGlyphSac),t.celestials.effarig.glyphTrashMode=0,delete t.celestials.effarig.autoGlyphSac,delete t.celestials.effarig.autoGlyphPick},t=>{delete t.reality.glyphs.inventorySize;for(const e of t.reality.glyphs.inventory)e.idx>=10&&(e.idx+=10)},t=>{t.onlyEighthDimensions=t.onlyEighthDimensons,delete t.onlyEighthDimensons},t=>{for(const e of Ra.pets.all)e.level=Math.clampMax(e.level,25);if(delete t.celestials.ra.compression,Ra.unlocks.allGamespeedGlyphs.canBeApplied){const e=t.reality.glyphs.active.concat(t.reality.glyphs.inventory);for(const i of e)Glyphs.applyGamespeed(i)}},t=>{for(let e=0;e<t.celestials.ra.alchemy.length;e++)t.celestials.ra.alchemy[e].amount=Math.clampMax(t.celestials.ra.alchemy[e].amount,Ra.alchemyResourceCap)},t=>{delete t.celestials.laitela.maxAmGained;for(const e of t.celestials.laitela.dimensions)e.powerDMUpgrades=e.powerUpgrades,e.powerDEUpgrades=0,delete e.chanceUpgrades,delete e.powerUpgrades;t.celestials.laitela.darkMatterMult=Number(t.celestials.laitela.higgs)+1,delete t.celestials.laitela.anomalies},t=>{delete t.achPow,delete t.interval,delete t.tickThreshold,delete t.celestials.enslaved.maxQuotes,delete t.celestials.v.quoteIdx,delete t.celestials.ra.quoteIdx},t=>{t.celestials.enslaved.totalDimCapIncrease=0,t.celestials.enslaved.tesseracts=0},t=>{delete t.auto.galaxy.buyMax},t=>{delete t.reality.glyphs.sac.cursed,Achievement(153).lock(),Achievement(157).lock()},t=>{t.celestials.v.ppSpent&&(t.reality.pp+=t.celestials.v.ppSpent,delete t.celestials.v.ppSpent)},t=>{t.thisEternityMaxAM=new Decimal(0)},t=>{Ue.migrateLastTenRuns(t),t.lastTenRealities=t.lastTenRealities.map(e=>[e[0],e[1],1,Number(e[2]),e[3]]),Ue.migrateIPGen(t)},t=>{t.noReplicantiGalaxies=t.reality.upgReqChecks[0],delete t.reality.upgReqChecks},t=>{t.bestGlyphStrength=t.reality.glyphs.active.concat(t.reality.glyphs.inventory).map(e=>e.strength).max()},t=>{t.options.showHintText.glyphEffectDots=t.options.showGlyphEffectDots,delete t.options.showGlyphEffectDots,Ue.renameCloudVariable(t)},t=>{const e=new Set([...t.reality.perks].filter(n=>n<20||n>25)),i=t.reality.perks.size-e.size;t.reality.pp+=i,t.reality.perks=e,i>0&&Modal.message.show("Some of your perks (glyph perks) were removed. The perk points you spent on them have been refunded.")},t=>{delete t.reality.glyphs.last},t=>{t.reality.secondGaussian===null&&(t.reality.secondGaussian=1e6)},t=>{delete t.celestials.laitela.reachedSingularityCapLimit,delete t.celestials.laitela.secondsSinceCappedTime,delete t.celestials.laitela.singularityAutoCapLimit,delete t.celestials.laitela.singularityTime,delete t.celestials.laitela.autoAnnihilationTimer,delete t.celestials.laitela.annihilated,delete t.celestials.laitela.secondsSinceReachedSingularity,t.celestials.laitela.darkMatterMult=Math.clampMin(t.celestials.laitela.darkMatterMult,1),t.celestials.laitela.dimensions.forEach(e=>e.ascensionCount=0)},t=>{const e=t.reality.glyphs.active.concat(t.reality.glyphs.inventory).filter(i=>i.type!=="companion");for(const i of e)i.strength=Math.ceil(i.strength*400)/400},t=>{if(t.dimensions.normal!==void 0){for(let e=0;e<t.dimensions.normal.length;e++){const i=t.dimensions.normal[e];t.dimensions.antimatter[e].bought=i.bought,t.dimensions.antimatter[e].costBumps=i.costBumps,t.dimensions.antimatter[e].amount=new Decimal(i.amount)}delete t.dimensions.normal}},t=>{t.options.news.enabled===void 0&&(t.options.news={enabled:t.options.news,repeatBuffer:40,AIChance:0,speed:1})},t=>{delete t.options.confirmations.glyphTrash},t=>{Ue.standardizeUncompletedTimes(t),t.bestReality===999999999999&&(t.bestReality=Number.MAX_VALUE),t.bestRealityRealTime===999999999999&&(t.bestRealityRealTime=Number.MAX_VALUE);for(let e=0;e<10;e++)t.lastTenRealities[e][0]===26784e5&&(t.lastTenRealities[e][0]=Number.MAX_VALUE),t.lastTenRealities[e][3]===26784e3&&(t.lastTenRealities[e][3]=Number.MAX_VALUE)},t=>{for(const e of Object.values(t.reality.automator.scripts))e.content=e.content.replace(/^([ \t]*)(wait|if|while|until)([\t ]+)(completions)/igmu,"$1$2$3pending $4")},t=>{t.celestials.ra.unlockBits&=~(1<<29)},t=>{t.records.gameCreatedTime=t.gameCreatedTime,t.records.totalTimePlayed=t.totalTimePlayed,t.records.realTimePlayed=t.realTimePlayed,t.records.totalAntimatter=new Decimal(t.totalAntimatter);for(let e=0;e<10;e++)t.records.lastTenInfinities[e][0]=t.lastTenRuns[e][0],t.records.lastTenEternities[e][0]=t.lastTenEternities[e][0],t.records.lastTenRealities[e][0]=t.lastTenRealities[e][0];t.options.showLastTenInfinitiesGainPerTime=t.options.showLastTenRunsGainPerTime,delete t.options.showLastTenRunsGainPerTime,t.records.thisInfinity.time=t.thisInfinityTime,t.records.thisInfinity.realTime=t.thisInfinityRealTime,t.records.thisInfinity.lastBuyTime=t.thisInfinityLastBuyTime,t.records.thisInfinity.maxAM=new Decimal(t.thisInfinityMaxAM),t.records.thisInfinity.bestIPmin=new Decimal(t.bestIPminThisInfinity),t.records.bestInfinity.time=t.bestInfinityTime,t.records.bestInfinity.realTime=t.bestInfinityRealTime,t.records.bestInfinity.bestIPminEternity=new Decimal(t.bestIPminThisEternity),t.records.bestInfinity.bestIPminReality=new Decimal(t.bestEPThisReality),t.records.thisEternity.time=t.thisEternity,t.records.thisEternity.realTime=t.thisEternityRealTime,t.records.thisEternity.maxAM=new Decimal(t.thisEternityMaxAM),t.records.thisEternity.maxIP=new Decimal(t.thisEternityMaxIP),t.records.thisEternity.bestIPMsWithoutMaxAll=new Decimal(t.bestIpPerMsWithoutMaxAll),t.records.thisEternity.bestEPmin=new Decimal(t.bestEPminThisEternity),t.records.thisEternity.bestInfinitiesPerMs=new Decimal(t.bestInfinitiesPerMs),t.records.bestEternity.time=t.bestEternity,t.records.bestEternity.bestEPminReality=new Decimal(t.bestEPminThisReality),t.records.thisReality.time=t.thisReality,t.records.thisReality.realTime=t.thisRealityRealTime,t.records.thisReality.bestEternitiesPerMs=new Decimal(t.bestEternitiesPerMs),t.records.bestReality.RMmin=new Decimal(t.bestRMmin),t.records.bestReality.RMminSet=t.bestRMminSet,t.records.bestReality.glyphLevel=t.bestGlyphLevel,t.records.bestReality.glyphStrength=t.bestGlyphStrength,t.records.bestReality.glyphLevelSet=t.bestGlyphLevelSet,t.records.bestReality.bestEP=new Decimal(t.bestEP),t.records.bestReality.bestEPSet=t.bestEPSet,t.records.bestReality.time=t.bestReality,t.records.bestReality.realTime=t.bestRealityRealTime,t.records.bestReality.speedSet=t.bestSpeedSet,delete t.gameCreatedTime,delete t.totalTimePlayed,delete t.realTimePlayed,delete t.totalAntimatter,delete t.lastTenRuns,delete t.lastTenEternities,delete t.lastTenRealities,delete t.thisInfinityTime,delete t.thisInfinityRealTime,delete t.thisInfinityLastBuyTime,delete t.thisInfinityMaxAM,delete t.bestIPminThisInfinity,delete t.bestInfinityTime,delete t.bestInfinityRealTime,delete t.bestIPminThisEternity,delete t.thisEternity,delete t.thisEternityRealTime,delete t.thisEternityMaxAM,delete t.thisEternityMaxIP,delete t.bestIpPerMsWithoutMaxAll,delete t.bestEPminThisEternity,delete t.bestInfinitiesPerMs,delete t.bestIPminThisEternity,delete t.bestEternity,delete t.bestEPminThisReality,delete t.thisReality,delete t.thisRealityRealTime,delete t.bestEternitiesPerMs,delete t.bestEPThisReality,delete t.bestRMmin,delete t.bestRMminSet,delete t.bestGlyphLevel,delete t.bestGlyphStrength,delete t.bestGlyphLevelSet,delete t.bestEP,delete t.bestEPSet,delete t.bestReality,delete t.bestRealityRealTime,delete t.bestSpeedSet},t=>{t.replicanti.boughtGalaxyCap=t.replicanti.gal,t.reality.perkPoints=t.reality.pp,t.celestials.teresa.pouredAmount=t.celestials.teresa.rmStore,t.celestials.laitela.darkMatter=new Decimal(t.celestials.laitela.matter),t.celestials.laitela.maxDarkMatter=new Decimal(t.celestials.laitela.maxMatter),t.celestials.ra.pets.teresa.memories=t.celestials.ra.pets.teresa.exp,t.celestials.ra.pets.effarig.memories=t.celestials.ra.pets.effarig.exp,t.celestials.ra.pets.enslaved.memories=t.celestials.ra.pets.enslaved.exp,t.celestials.ra.pets.v.memories=t.celestials.ra.pets.v.exp,t.achievementChecks={noSacrifices:t.noSacrifices,onlyEighthDimensions:t.onlyEighthDimensions,onlyFirstDimensions:t.onlyFirstDimensions,noEighthDimensions:t.noEighthDimensions,noFirstDimensions:t.noFirstDimensions,noAntimatterProduced:t.noAntimatterProduced,noTriadStudies:t.noTriadStudies,noTheoremPurchases:t.noTheoremPurchases,noInfinitiesThisReality:t.noInfinitiesThisReality,noEternitiesThisReality:t.noEternitiesThisReality,noReplicantiGalaxies:t.noReplicantiGalaxies,maxID1ThisReality:new Decimal(1),continuumThisReality:!0},t.dilation.baseTachyonGalaxies=t.dilation.baseFreeGalaxies,t.dilation.totalTachyonGalaxies=t.dilation.freeGalaxies,delete t.replicanti.gal,delete t.reality.pp,delete t.celestials.teresa.rmStore,delete t.celestials.laitela.matter,delete t.celestials.laitela.maxMatter,delete t.celestials.ra.pets.teresa.exp,delete t.celestials.ra.pets.effarig.exp,delete t.celestials.ra.pets.enslaved.exp,delete t.celestials.ra.pets.v.exp,delete t.noSacrifices,delete t.onlyEighthDimensions,delete t.onlyFirstDimensions,delete t.noEighthDimensions,delete t.noFirstDimensions,delete t.noAntimatterProduced,delete t.noTriadStudies,delete t.noTheoremPurchases,delete t.noInfinitiesThisReality,delete t.noEternitiesThisReality,delete t.noReplicantiGalaxies,delete t.dilation.baseFreeGalaxies,delete t.dilation.freeGalaxies},t=>{t.auto.infinityDims=Array.range(0,8).map(()=>({lastTick:0}));for(let e=0;e<8;e++)t.auto.infinityDims[e].isActive=t.infDimBuyers[e];t.auto.timeDims=Array.range(0,8).map(()=>({lastTick:0}));for(let e=0;e<8;e++)t.auto.timeDims[e].isActive=t.reality.tdbuyers[e];t.auto.replicantiUpgrades=Array.range(0,3).map(()=>({lastTick:0}));for(let e=0;e<3;e++)t.auto.replicantiUpgrades[e].isActive=t.replicanti.auto[e];t.dilation.auto===void 0&&(t.dilation.auto=[!0,!0,!0]),t.auto.dilationUpgrades=Array.range(0,3).map(()=>({lastTick:0}));for(let e=0;e<3;e++)t.auto.dilationUpgrades[e].isActive=t.dilation.auto[e];t.auto.blackHolePower=Array.range(0,2).map(()=>({lastTick:0}));for(let e=0;e<2;e++)t.auto.blackHolePower[e].isActive=t.blackHole[e].autoPower;t.reality.rebuyablesAuto===void 0&&(t.reality.rebuyablesAuto=[!0,!0,!0,!0,!0]),t.auto.realityUpgrades=Array.range(0,5).map(()=>({lastTick:0}));for(let e=0;e<5;e++)t.auto.realityUpgrades[e].isActive=t.reality.rebuyablesAuto[e];t.auto.antimatterDims===void 0&&(t.auto.antimatterDims=t.auto.dimensions),t.auto.replicantiGalaxies.isActive=t.replicanti.galaxybuyer,t.auto.ipMultBuyer.isActive=t.infMultBuyer,t.auto.epMultBuyer.isActive=t.reality.epmultbuyer,t.auto.timeTheorems.isActive=t.ttbuyer,t.auto.bigCrunch.xCurrent=t.auto.bigCrunch.xLast,t.auto.eternity.xCurrent=t.auto.eternity.xLast,t.auto.bulkOn=t.options.bulkOn,t.auto.autobuyerOn=t.options.autobuyerOn,t.auto.disableContinuum=t.options.disableContinuum,delete t.auto.dimensions,delete t.infDimBuyers,delete t.auto.infDimTimer,delete t.reality.tdbuyers,delete t.auto.timeDimTimer,delete t.replicanti.galaxybuyer,delete t.replicanti.auto,delete t.auto.repUpgradeTimer,delete t.ttbuyer,delete t.auto.ttTimer,delete t.dilation.auto,delete t.auto.dilUpgradeTimer,delete t.blackHole[0].autoPower,delete t.blackHole[1].autoPower,delete t.reality.rebuyablesAuto,delete t.reality.epmultbuyer,delete t.infMultBuyer,delete t.auto.bigCrunch.xLast,delete t.auto.eternity.xLast,delete t.options.bulkOn,delete t.options.autobuyerOn,delete t.options.disableContinuum},Ue.convertTimeTheoremPurchases,Ue.infinitiedConversion,t=>{delete t.saveOverThresholdFlag,delete t.saveOverThresholdFlagModalDisplayed},t=>{Autobuyer.reality.isUnlocked||(t.auto.reality.isActive=!1)},t=>{t.reality.perks.has(64)&&(t.reality.perks.delete(64),t.reality.perkPoints++);let e=0;for(let i=0;i<=t.reality.upgReqs.length;i++)t.reality.upgReqs[i]&&(e|=1<<i);t.reality.upgReqs=e},t=>{t.reality.perks.has(11)&&(t.reality.perks.delete(11),t.reality.perkPoints++),t.reality.perks.has(10)&&Perk.startAM.onPurchased()},t=>{t.achievementChecks.maxStudiesThisReality=t.timestudy.studies.length,t.celestials.teresa.lastRepeatedMachines=new Decimal(t.celestials.teresa.lastRepeatedRM),delete t.celestials.teresa.lastRepeatedRM},t=>{let e=1,i=1;const n={};for(const r of Object.keys(t.reality.automator.scripts))n[e]=t.reality.automator.scripts[r],n[e].id=e,r===t.reality.automator.state.editorScript&&(i=e),e++;t.reality.automator.scripts=n,t.reality.automator.state.editorScript=i,delete t.reality.automator.lastID},Ue.deleteDimboostBulk,Ue.removePriority,t=>{t.reality.realityMachines=t.reality.realityMachines.floor()},Ue.deleteFloatingTextOption,t=>{t.reality.perks.has(206)&&(t.reality.perks.delete(206),t.reality.perkPoints++)},t=>{t.records.thisEternity.maxIP=new Decimal(t.infinityPoints),t.auto.bigCrunch.xHighest=t.auto.bigCrunch.xCurrent,t.auto.eternity.xHighest=t.auto.eternity.xCurrent,delete t.auto.bigCrunch.xCurrent,delete t.auto.eternity.xCurrent},t=>{t.achievementChecks.continuumThisReality=!!t.achievementChecks.continuumThisReality},t=>{t.secretUnlocks.spreadingCancer=t.spreadingCancer,delete t.spreadingCancer},t=>{delete t.celestials.enslaved.totalDimCapIncrease},t=>{for(const e of t.reality.glyphs.undo)for(const i of["thisInfinityTime","thisInfinityRealTime","thisEternityTime","thisEternityRealTime"])i in e||(e[i]=1e3)},t=>{const e=t.achievementChecks;if(t.requirementChecks={infinity:{maxAll:t.usedMaxAll,noSacrifice:e.noSacrifices,noAD8:e.noEighthDimensions},eternity:{onlyAD1:e.onlyFirstDimensions,onlyAD8:e.onlyEighthDimensions,noAD1:e.noFirstDimensions,noRG:e.noEighthDimensions},reality:{noAM:e.noAntimatterProduced,noTriads:e.noTriadStudies,noPurchasedTT:e.noTheoremPurchases,noInfinities:e.noInfinitiesThisReality,noEternities:e.noEternitiesThisReality,noContinuum:!e.continuumThisReality,maxID1:new Decimal(e.maxID1ThisReality),maxStudies:e.maxStudiesThisReality,maxGlyphs:t.celestials.v.maxGlyphsThisRun,slowestBH:t.minNegativeBlackHoleThisReality},permanent:{cancerGalaxies:t.secretUnlocks.spreadingCancer,singleTickspeed:t.secretUnlocks.why,perkTreeDragging:t.secretUnlocks.dragging}},delete t.usedMaxAll,delete t.secretUnlocks.spreadingCancer,delete t.secretUnlocks.why,delete t.secretUnlocks.dragging,delete t.achievementChecks,delete t.minNegativeBlackHoleThisReality,delete t.celestials.v.maxGlyphsThisRun,Array.isArray(t.news)){const i=t.news;delete t.news,t.news={},t.news.seen={};for(const n of i)NewsHandler.addSeenNews(n);t.news.totalSeen=NewsHandler.uniqueTickersSeen}t.news.specialTickerData={uselessNewsClicks:t.secretUnlocks.uselessNewsClicks,paperclips:t.secretUnlocks.paperclips,newsQueuePosition:t.secretUnlocks.newsQueuePosition,eiffelTowerChapter:t.secretUnlocks.eiffelTowerChapter},delete t.secretUnlocks.uselessNewsClicks,delete t.secretUnlocks.paperclips,delete t.secretUnlocks.newsQueuePosition,delete t.secretUnlocks.eiffelTowerChapter},Ue.refactorDoubleIPRebuyable,t=>{t.requirementChecks.reality.slowestBH===0&&(t.requirementChecks.reality.slowestBH=1)},t=>{t.auto.eternity.amount.lt(.01)&&(t.auto.eternity.amount=new Decimal(0))},t=>{t.options.hiddenSubtabBits=Array.repeat(0,11),t.options.lastOpenSubtab=Array.repeat(0,11)},t=>{const e=[{name:"power",id:ALCHEMY_RESOURCE.POWER},{name:"infinity",id:ALCHEMY_RESOURCE.INFINITY},{name:"time",id:ALCHEMY_RESOURCE.TIME},{name:"replication",id:ALCHEMY_RESOURCE.REPLICATION},{name:"dilation",id:ALCHEMY_RESOURCE.DILATION},{name:"effarig",id:ALCHEMY_RESOURCE.EFFARIG}];for(const i of e)t.celestials.ra.highestRefinementValue[i.name]=t.celestials.ra.alchemy[i.id].amount},Ue.deletePostChallUnlocked,t=>{t.reality.perks.has(63)&&(t.reality.perks.delete(63),t.reality.perkPoints++),t.reality.perks.has(107)&&(t.reality.perks.delete(107),t.reality.perkPoints++),delete t.auto.timeTheorems.lastTick},t=>{t.realities>5&&t.realities<50&&(t.reality.automator.state.mode=1,t.reality.automator.state.stack=[],t.reality.automator.state.repeat=!1,t.reality.automator.state.forceRestart=!1)},t=>{for(const e of t.celestials.ra.alchemy)e.amount=Math.clampMax(e.amount,25e3)},t=>{const e=new RegExp("T(\\d)","gu");t.timestudy.presets.forEach(i=>i.studies=i.studies.replaceAll(e,"30$1"));for(const i of Object.values(t.reality.automator.scripts))i.content=i.content.replaceAll(e,"30$1");t.celestials.v.triadStudies!==void 0&&(t.timestudy.studies=t.timestudy.studies.concat(t.celestials.v.triadStudies.map(i=>i+300)),delete t.celestials.v.triadStudies)},t=>{delete t.options.confirmations.harshAutoClean},t=>{t.celestials.laitela.singularitySorting={displayResource:t.options.showCondenseToMilestone?1:0,sortResource:0,showCompleted:0,sortOrder:0},delete t.options.showCondenseToMilestone},()=>{},t=>{t.reality.glyphs.sets=t.reality.glyphs.sets.map(e=>({glyphs:e,name:""}))},t=>{for(;!Array.isArray(t.reality.glyphs.sets[0].glyphs);)t.reality.glyphs.sets=t.reality.glyphs.sets.map(e=>e.glyphs)},t=>{t.celestials.pelle.rifts.chaos.fill=new Decimal(t.celestials.pelle.rifts.chaos.fill).toNumber(),delete t.celestials.pelle.compact,t.celestials.pelle.collapsed={upgrades:!1,rifts:!1,galaxies:!1},t.celestials.pelle.galaxyGenerator.unlocked=t.celestials.pelle.galaxyGenerator.generatedGalaxies>0},t=>{t.celestials.pelle.doomed&&(t.achievementBits[17]|=1),t.celestials.pelle.upgrades.has(4)&&(t.achievementBits[17]|=2),t.celestials.pelle.doomed&&t.challenge.infinity.completedBits===510&&(t.achievementBits[17]|=4),t.timestudy.studies.compact().includes(181)&&(t.achievementBits[17]|=32)},t=>{t.achievementBits[16]|=(t.achievementBits[16]&16)<<3,t.achievementBits[16]&=-17,t.achievementBits[16]|=(t.achievementBits[16]&4)<<2,t.achievementBits[16]&=-5},t=>{t.achievementBits[17]&=-33,t.timestudy.studies.compact().includes(181)&&t.celestials.pelle.doomed&&(t.achievementBits[17]|=32)},t=>{t.celestials.pelle.doomed&&t.challenge.infinity.completedBits&32?t.achievementBits[17]|=4:t.achievementBits[17]&=-5},t=>{t.celestials.pelle.collapsed=t.celestials.collapsed,t.celestials.pelle.showBought=t.celestials.showBought,delete t.celestials.collapsed,delete t.celestials.showBought},Ue.infMultNameConversion,t=>{t.celestials.pelle.collapsed===void 0&&(t.celestials.pelle.collapsed={upgrades:!1,rifts:!1,galaxies:!1})},t=>{const e=t.celestials.laitela;e.automation&&(t.auto.darkMatterDims.isActive=e.automation.dimensions,t.auto.ascension.isActive=e.automation.ascension,t.auto.annihilation.isActive=e.automation.singularity,t.auto.singularity.isActive=e.automation.annihilation,delete t.celestials.laitela.automation.dimensions,delete t.celestials.laitela.automation.ascension,delete t.celestials.laitela.automation.singularity,delete t.celestials.laitela.automation.annihilation),t.auto.darkMatterDims.lastTick=e.darkAutobuyerTimer,t.auto.ascension.lastTick=e.darkAutobuyerTimer,t.auto.annihilation.multiplier=e.autoAnnihilationSetting,delete t.celestials.laitela.darkAutobuyerTimer,delete t.celestials.laitela.darkAutobuyerTimer,delete t.celestials.laitela.autoAnnihilationSetting},Ue.etercreqConversion,t=>{delete t.options.confirmations.reality},t=>{const e=t.celestials.pelle.upgrades.has(19),i=t.celestials.pelle.upgrades.has(18);t.celestials.pelle.upgrades.delete(18),t.celestials.pelle.upgrades.delete(19),e&&t.celestials.pelle.upgrades.add(18),i&&t.celestials.pelle.upgrades.add(19)},t=>{delete t.auto.bulkOn},t=>{t.requirementChecks.permanent.emojiGalaxies=t.requirementChecks.permanent.cancerGalaxies,delete t.requirementChecks.permanent.cancerGalaxies},t=>{delete t.celestials.effarig.unlocksBits,delete t.celestials.ra.unlocksBits},t=>{for(const e of Object.values(t.reality.automator.scripts))e.id=parseInt(e.id,10)},t=>{t.secretUnlocks.themes.delete("S4Cancer"),t.secretUnlocks.themes.add("S4Design")},t=>{t.reality.automator.state.editorScript=Number(t.reality.automator.state.editorScript),t.reality.automator.state.topLevelScript=Number(t.reality.automator.state.topLevelScript)},t=>{t.celestials.pelle.upgrades.delete(20)&&t.celestials.pelle.upgrades.add(21),t.celestials.pelle.upgrades.delete(19)&&t.celestials.pelle.upgrades.add(20);const e=t.celestials.pelle.upgrades.delete(18);for(let i=17;i>=10;i--)t.celestials.pelle.upgrades.delete(i)&&t.celestials.pelle.upgrades.add(i+2);for(let i=9;i>=7;i--)t.celestials.pelle.upgrades.delete(i)&&t.celestials.pelle.upgrades.add(i+1);e&&t.celestials.pelle.upgrades.add(7)},t=>{const e=t.celestials,i=n=>n.toBitmask()>>1;e.teresa.quotes&&(t.celestials.teresa.quoteBits=i(e.teresa.quotes)),e.effarig.quotes&&(t.celestials.effarig.quoteBits=i(e.effarig.quotes)),e.enslaved.quotes&&(t.celestials.enslaved.quoteBits=i(e.enslaved.quotes)),e.v.quotes&&(t.celestials.v.quoteBits=i(e.v.quotes)),e.ra.quotes&&(t.celestials.ra.quoteBits=i(e.ra.quotes)),e.laitela.quotes&&(t.celestials.laitela.quoteBits=i(e.laitela.quotes)),e.pelle.quotes&&(t.celestials.pelle.quoteBits=i(e.pelle.quotes)),delete t.celestials.teresa.quotes,delete t.celestials.effarig.quotes,delete t.celestials.enslaved.quotes,delete t.celestials.v.quotes,delete t.celestials.ra.quotes,delete t.celestials.laitela.quotes,delete t.celestials.pelle.quotes},t=>{t.celestials.pelle.rifts.famine&&(t.celestials.pelle.rifts.vacuum={...t.celestials.pelle.rifts.famine,fill:new Decimal(t.celestials.pelle.rifts.famine.fill)},delete t.celestials.pelle.rifts.famine),t.celestials.pelle.rifts.pestilence&&(t.celestials.pelle.rifts.decay={...t.celestials.pelle.rifts.pestilence,fill:new Decimal(t.celestials.pelle.rifts.pestilence.fill)},delete t.celestials.pelle.rifts.pestilence),t.celestials.pelle.rifts.war&&(t.celestials.pelle.rifts.recursion={...t.celestials.pelle.rifts.war,fill:new Decimal(t.celestials.pelle.rifts.war.fill)},delete t.celestials.pelle.rifts.war),t.celestials.pelle.rifts.death&&(t.celestials.pelle.rifts.paradox={...t.celestials.pelle.rifts.death,fill:new Decimal(t.celestials.pelle.rifts.death.fill)},delete t.celestials.pelle.rifts.death)},t=>{delete t.newGame},Ue.moveTS33,t=>{const e=["antimatterDims","infinityDims","timeDims","replicantiUpgrades","dilationUpgrades","blackHolePower","realityUpgrades","imaginaryUpgrades"];for(const i of e){if(t.auto[i].all!==void 0)continue;const n=t.auto[i];delete t.auto[i],t.auto[i]={all:n,isActive:!0}}},t=>{t.celestials.ra.petWithRemembrance=t.celestials.ra.petWithRecollection,delete t.celestials.ra.petWithRecollection},t=>{for(const n of Object.keys(t.reality.automator.scripts)){const r=t.reality.automator.scripts[n].content.split(`
`);for(let s=0;s<r.length;s++){let a=r[s];a=a.replace(/^\s*tt.*$/ui,""),a=a.replace(/studies( nowait)? (?!respec|load|nowait respec|nowait load)(\S.+)$/ui,"studies$1 purchase $2"),a=a.replace(/studies( nowait)? load preset ([1-6])/ui,"studies$1 load id $2"),a=a.replace(/studies( nowait)? load preset (\S+)/ui,"studies$1 load name $2"),a=a.replace(/x current/ui,"x highest");const o=a.match(/define (\S*)\s*=\s*(\S.*)$/ui);o&&(t.reality.automator.constants[o[1]]=o[2],a=""),r[s]=a}t.reality.automator.scripts[n].content=r.join(`
`)}const e={},i=Object.keys(t.reality.automator.scripts);for(let n=1;n<=i.length;n++)e[n]=t.reality.automator.scripts[i[n-1]],e[n].id=n;t.reality.automator.scripts=e},t=>{delete t.celestials.pelle.armageddonDuration,delete t.celestials.pelle.maxAMThisArmageddon,delete t.options.sidebarMinimized,delete t.options.chart,delete t.devMode},t=>{const e=t.achievementBits[10]&4,i=t.achievementBits[11]&8;e?t.achievementBits[11]|=8:t.achievementBits[11]&=-9,i?t.achievementBits[10]|=4:t.achievementBits[10]&=-5},t=>{t.options.newUI?t.options.themeModern=t.options.theme??t.options.themeModern:t.options.themeClassic=t.options.theme??t.options.themeClassic,delete t.options.theme,BlackHole(1).isUnlocked&&(t.records.timePlayedAtBHUnlock=t.records.totalTimePlayed)},t=>{t.IAP.enabled=!t.IAP.disabled;const e=["totalSTD","spentSTD","exportSTD","IPPurchases","EPPurchases","RMPurchases","dimPurchases","allDimPurchases","replicantiPurchases","dilatedTimePurchases","disabled"];for(const i of e)delete t.IAP[i]},t=>{const e=t.reality.glyphs.active.concat(t.reality.glyphs.inventory);for(const i of e)i.symbol==="key266b"&&(i.symbol=void 0,i.color=void 0,i.cosmetic="music"),i.type==="companion"&&(i.color=void 0)},t=>{t.options.lightGlyphs=!t.options.forceDarkGlyphs,delete t.options.forceDarkGlyphs}],patch(t){t.options.testVersion=t.options.testVersion||0;for(let e=t.options.testVersion;e<this.patches.length;e++){const i=this.patches[e];i(t)}this.setLatestTestVersion(t)},setLatestTestVersion(t){t.options.testVersion=this.patches.length}},Gr={ONLINE:0,OFFLINE:1,RESERVE:2},Lh=[{id:1,type:Gr.ONLINE,intervalStr:()=>`${formatInt(2)} seconds`,interval:2},{id:2,type:Gr.ONLINE,intervalStr:()=>`${formatInt(15)} seconds`,interval:15},{id:3,type:Gr.ONLINE,intervalStr:()=>`${formatInt(1)} minute`,interval:60},{id:4,type:Gr.ONLINE,intervalStr:()=>`${formatInt(90)} seconds`,interval:90},{id:5,type:Gr.ONLINE,intervalStr:()=>`${formatInt(5)} minutes`,interval:5*60},{id:6,type:Gr.ONLINE,intervalStr:()=>`${formatInt(20)} minutes`,interval:20*60},{id:7,type:Gr.ONLINE,intervalStr:()=>`${formatInt(1)} hour`,interval:3600},{id:8,type:Gr.OFFLINE,intervalStr:()=>`${formatInt(10)} minutes`,interval:10*60},{id:9,type:Gr.OFFLINE,intervalStr:()=>`${formatInt(1)} hour`,interval:3600},{id:10,type:Gr.OFFLINE,intervalStr:()=>`${formatInt(5)} hours`,interval:5*3600},{id:11,type:Gr.RESERVE}],Rg={currentSlot:0,saves:{0:void 0,1:void 0,2:void 0},saved:0,lastSaveTime:Date.now(),lastCloudSave:Date.now(),offlineEnabled:void 0,offlineTicks:void 0,lastUpdateOnLoad:0,lastBackupTimes:[],oldBackupTimer:0,ignoreBackupTimer:!0,maxOfflineTicks(t,e=this.offlineTicks){const i=Math.clampMax(Math.floor(t/33),1e6);return Math.clampMax(e,i)},get localStorageKey(){return"dimensionTestSave"},backupDataKey(t,e){return`backupTestSave-${t}-${e}`},backupTimeKey(t){return`backupTestTimes-${t}`},load(){const t=localStorage.getItem(this.localStorageKey),e=GameSaveSerializer.deserialize(t);this.loadRoot(e),Achievements.updateSteamStatus()},loadRoot(t){if(t===void 0){this.currentSlot=0,this.loadPlayerObject(Player.defaultStart);return}if(t.saves===void 0){this.saves={0:t,1:void 0,2:void 0},this.currentSlot=0,this.loadPlayerObject(t),this.loadBackupTimes(),this.backupOfflineSlots(),this.save(!0);return}this.saves=t.saves,this.currentSlot=t.current,this.loadPlayerObject(this.saves[this.currentSlot]),this.loadBackupTimes(),this.backupOfflineSlots()},loadSlot(t){this.currentSlot=t,this.save(!0),this.loadPlayerObject(this.saves[t]??Player.defaultStart),this.loadBackupTimes(),this.backupOfflineSlots(),Tabs.all.find(e=>e.id===player.options.lastOpenTab).show(!1),Modal.hideAll(),Cloud.resetTempState(),GameUI.notify.info("Game loaded"),Achievements.updateSteamStatus()},import(t){var i;if(tryImportSecret(t)||Theme.tryUnlock(t))return;const e=GameSaveSerializer.deserialize(t);if(this.checkPlayerObject(e)!==""){Modal.message.show("Could not load the save (format unrecognized or invalid).");return}this.oldBackupTimer=player.backupTimer,Modal.hideAll(),Quote.clearAll(),AutomatorBackend.clearEditor(),this.loadPlayerObject(e),GlyphAppearanceHandler.clearInvalidCosmetics(),(i=player.speedrun)!=null&&i.isActive&&Speedrun.setSegmented(!0),this.save(!0),Cloud.resetTempState(),this.resetBackupTimer(),Tab.options.subtabs[0].show(),GameUI.notify.info("Game imported"),Achievements.updateSteamStatus()},importAsFile(){if(GameEnd.creditsEverClosed)return;const e=new FileReader().readAsText(file);this.import(e)},overwriteSlot(t,e){this.saves[t]=e,t===this.currentSlot&&this.loadPlayerObject(e),this.save(!0)},checkPlayerObject(t){if(t==null)return"Save decoding failed (invalid format)";if(t.money===void 0&&t.antimatter===void 0)return"Save does not have antimatter property";const e=[];function i(n,r){let s=!1;for(const a in n){const o=n[a];let c;switch(typeof o){case"object":c=i(o,`${r}.${a}`),s=s||c;break;case"number":c=Number.isNaN(o),s=s||c,c&&e.push(`${r}.${a}`);break;case"string":c=o==="NaN",s=s||c,c&&e.push(`${r}.${a}`);break}}return s}return i(t,"player"),e.length===0?"":`${quantify("NaN player property",e.length)} found:
      ${e.join(", ")}`},canSave(t=!1){const e=GlyphSelection.active,i=ui.$viewModel.modal.progressBar!==void 0&&!t;return!(GameEnd.endState>=END_STATE_MARKERS.SAVE_DISABLED&&!GameEnd.removeAdditionalEnd||GameEnd.endState>=END_STATE_MARKERS.INTERACTIVITY_DISABLED)&&!(e||i)},save(t=!0,e=!1){if(!this.canSave())return;this.lastSaveTime=Date.now(),GameIntervals.save.restart(),e&&++this.saved>99&&SecretAchievement(12).unlock();const i={current:this.currentSlot,saves:this.saves};localStorage.setItem(this.localStorageKey,GameSaveSerializer.serialize(i)),t||GameUI.notify.info("Game saved")},saveToBackupCore(t,e){localStorage.setItem(this.backupDataKey(this.currentSlot,t),GameSaveSerializer.serialize(player)),this.lastBackupTimes[t]={backupTimer:e,date:Date.now()},localStorage.setItem(this.backupTimeKey(this.currentSlot),GameSaveSerializer.serialize(this.lastBackupTimes))},saveToBackup(t,e){if(!this.canSave(!0))return;const i=Pelle.isDoomed?.6:.35;if(t<=4&&Math.random()<=i){Rg.loadPlayerObject(this.loadFromBackup(t));for(let n=1;n<t;n++)this.saveToBackupCore(n,e);GameUI.notify.info("Successfully loaded and saved backups")}else this.saveToBackupCore(t,e)},loadFromBackup(t){const e=localStorage.getItem(this.backupDataKey(this.currentSlot,t));return GameSaveSerializer.deserialize(e)},backupOfflineSlots(){const e=Date.now()-this.lastUpdateOnLoad,i=Lh.filter(n=>n.type===Gr.OFFLINE).sort((n,r)=>r.interval-n.interval);for(const n of i)if(e>1e3*n.interval){this.saveToBackup(n.id,player.backupTimer);break}},backupOnlineSlots(t){const e=player.backupTimer;for(const i of t)this.saveToBackup(i,e)},loadBackupTimes(){this.lastBackupTimes=GameSaveSerializer.deserialize(localStorage.getItem(this.backupTimeKey(this.currentSlot))),this.lastBackupTimes||(this.lastBackupTimes={});for(const t of Lh){const e=t.id;this.lastBackupTimes[e]||(this.lastBackupTimes[e]={backupTimer:0,date:0})}},tryOnlineBackups(){var e;const t=[];for(const i of Lh.filter(n=>n.type===Gr.ONLINE)){const n=i.id,r=player.backupTimer-(((e=this.lastBackupTimes[n])==null?void 0:e.backupTimer)??0);1e3*i.interval-r<=800&&t.push(n)}this.backupOnlineSlots(t)},resetBackupTimer(){const t=Object.values(this.lastBackupTimes).map(e=>e&&e.backupTimer).max();player.backupTimer=Math.max(this.oldBackupTimer,player.backupTimer,t)},saveToReserveSlot(){const t=Lh.find(e=>e.type===Gr.RESERVE).id;this.saveToBackup(t,player.backupTimer)},export(){copyToClipboard(this.exportModifiedSave()),GameUI.notify.info("Exported current savefile to your clipboard")},get exportDateString(){const t=new Date,e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return`${e}-${i}-${n}`},exportAsFile(){if(!this.canSave())return;player.options.exportedFileCount++,this.save(!0);const t=player.options.saveFileName?` - ${player.options.saveFileName},`:"",e=this.exportModifiedSave();qP(`AD Save, Slot ${Rg.currentSlot+1}${t} #${player.options.exportedFileCount} (${this.exportDateString}).txt`,e),GameUI.notify.info("Successfully downloaded current save file to your computer")},exportBackupsAsFile(){player.options.exportedFileCount++;const t={};for(const e of Lh.map(i=>i.id)){const i=this.loadFromBackup(e);i&&(t[e]=i)}t.time=GameSaveSerializer.deserialize(localStorage.getItem(this.backupTimeKey(this.currentSlot))),qP(`AD Save Backups, Slot ${Rg.currentSlot+1} #${player.options.exportedFileCount} (${this.exportDateString}).txt`,GameSaveSerializer.serialize(t)),GameUI.notify.info("Successfully downloaded save file backups to your computer")},importBackupsFromFile(t){const e=GameSaveSerializer.deserialize(t);localStorage.setItem(this.backupTimeKey(this.currentSlot),GameSaveSerializer.serialize(e.time));for(const i of Object.keys(e)){if(i==="time")continue;const n=Number(i),r=this.backupDataKey(this.currentSlot,n);localStorage.setItem(r,GameSaveSerializer.serialize(e[i])),this.backupTimeData[n]={backupTimer:e.time[n].backupTimer,date:e.time[n].date}}this.resetBackupTimer(),GameUI.notify.info("Successfully imported save file backups from file")},exportModifiedSave(){const t=player.speedrun.isSegmented;Speedrun.setSegmented(!0);const e=GameSaveSerializer.serialize(player);return Speedrun.setSegmented(t),e},hardReset(){this.loadPlayerObject(Player.defaultStart),this.save(!0),Tab.dimensions.antimatter.show(),Cloud.resetTempState()},loadPlayerObject(t){this.saved=0;const e=this.checkPlayerObject(t);if(t===Player.defaultStart||e!=="")e!==""&&console.log(`Savefile was invalid and has been reset - ${e}`),player=Yf([{},Player.defaultStart]),player.records.gameCreatedTime=Date.now(),player.lastUpdate=Date.now(),Ow.setLatestTestVersion(player);else{const r=t.version<Ue.firstRealityMigration;player=Ue.patchPreReality(t),r&&(Ow.setLatestTestVersion(player),EventHub.dispatch(GAME_EVENT.SAVE_CONVERTED_FROM_PREVIOUS_VERSION)),player.options.testVersion!==void 0&&Ow.patch(player),player=Ue.patchPostReality(player)}this.saves[this.currentSlot]=player,this.lastUpdateOnLoad=player.lastUpdate,guardFromNaNValues(player),ui.view.news=player.options.news.enabled,ui.view.newUI=player.options.newUI,ui.view.tutorialState=player.tutorialState,ui.view.tutorialActive=player.tutorialActive,ECTimeStudyState.invalidateCachedRequirements(),recalculateAllGlyphs(),checkPerkValidity(),V.updateTotalRunUnlocks(),Enslaved.boostReality=!1,GameEnd.additionalEnd=0,Theme.set(Theme.currentName()),Glyphs.unseen=[],Glyphs.unequipped=[],Notations.find(player.options.notation).setAsCurrent(!0),Ta.exponentCommas.min=10**player.options.notationDigits.comma,Ta.exponentCommas.max=10**player.options.notationDigits.notation,EventHub.dispatch(GAME_EVENT.GAME_LOAD),AutomatorBackend.initializeFromSave(),Lazy.invalidateAll();const i=Date.now()-player.lastUpdate;if((this.offlineEnabled??player.options.offlineProgress)&&!Speedrun.isPausedAtStart()){let r=i;player.speedrun.offlineTimeUsed+=r,r>5*60*1e3&&player.celestials.enslaved.autoStoreReal&&(r=Enslaved.autoStoreRealTime(r)),r>1e4?simulateTime(r/1e3,!1,r<50*1e3):this.postLoadStuff()}else Speedrun.isPausedAtStart()||Achievement(35).tryUnlock(),player.lastUpdate=Date.now(),this.postLoadStuff();i>1e3*86400*14&&(["S4","S9"].includes(Theme.current().name)&&Theme.set("Normal"),setTimeout(()=>{Notations.current.isPainful&&Notation.mixedScientific.setAsCurrent()},2500),setTimeout(()=>Modal.catchup.show(i),5e3))},postLoadStuff(){GameIntervals.restart(),Rg.ignoreBackupTimer=!1,Enslaved.nextTickDiff=player.options.updateRate,player.celestials.enslaved.storedReal>24*60*60*1e3&&SecretAchievement(46).unlock(),GameUI.update();for(const t of AlchemyResources.all)t.before=t.amount}};function qP(t,e){const i=document.createElement("a");if(i.setAttribute("href",`data:text/plain;charset=utf-8,${encodeURIComponent(e)}`),i.setAttribute("download",t),document.createEvent){const n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),i.dispatchEvent(n)}else i.click()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt=function(t,e){if(!t)throw Jm(e)},Jm=function(t){return new Error("Firebase Database ("+vF.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[i++]=r:r<2048?(e[i++]=r>>6|192,e[i++]=r&63|128):(r&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023),e[i++]=r>>18|240,e[i++]=r>>12&63|128,e[i++]=r>>6&63|128,e[i++]=r&63|128):(e[i++]=r>>12|224,e[i++]=r>>6&63|128,e[i++]=r&63|128)}return e},Tse=function(t){const e=[];let i=0,n=0;for(;i<t.length;){const r=t[i++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[i++];e[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[i++],a=t[i++],o=t[i++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[i++],a=t[i++];e[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},IA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,p=s>>2,m=(s&3)<<4|o>>4;let y=(o&15)<<2|d>>6,_=d&63;c||(_=64,a||(y=64)),n.push(i[p],i[m],i[y],i[_])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Tse(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<t.length;){const s=i[t.charAt(r++)],o=r<t.length?i[t.charAt(r)]:0;++r;const d=r<t.length?i[t.charAt(r)]:64;++r;const m=r<t.length?i[t.charAt(r)]:64;if(++r,s==null||o==null||d==null||m==null)throw Error();const y=s<<2|o>>4;if(n.push(y),d!==64){const _=o<<4&240|d>>2;if(n.push(_),m!==64){const E=d<<6&192|m;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},wse=function(t){const e=bF(t);return IA.encodeByteArray(e,!0)},mS=function(t){try{return IA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cse(t){return _F(void 0,t)}function _F(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const i in e)!e.hasOwnProperty(i)||!Sse(i)||(t[i]=_F(t[i],e[i]));return t}function Sse(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,n)=>{i?this.reject(i):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ks())}function kse(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ase(){const t=ks();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TF(){return vF.NODE_ADMIN===!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rse="FirebaseError";class ey extends Error{constructor(e,i,n){super(i),this.code=e,this.customData=n,this.name=Rse,Object.setPrototypeOf(this,ey.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mb.prototype.create)}}class mb{constructor(e,i,n){this.service=e,this.serviceName=i,this.errors=n}create(e,...i){const n=i[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Ise(s,n):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new ey(r,o,n)}}function Ise(t,e){return t.replace(Dse,(i,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const Dse=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t){return JSON.parse(t)}function $r(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=function(t){let e={},i={},n={},r="";try{const s=t.split(".");e=kv(mS(s[0])||""),i=kv(mS(s[1])||""),r=s[2],n=i.d||{},delete i.d}catch{}return{header:e,claims:i,data:n,signature:r}},xse=function(t){const e=wF(t),i=e.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},Mse=function(t){const e=wF(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Am(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function yS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uE(t,e,i){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e.call(i,t[r],r,t));return n}function CF(t,e){if(t===e)return!0;const i=Object.keys(t),n=Object.keys(e);for(const r of i){if(!n.includes(r))return!1;const s=t[r],a=e[r];if(YP(s)&&YP(a)){if(!CF(s,a))return!1}else if(s!==a)return!1}for(const r of n)if(!i.includes(r))return!1;return!0}function YP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){const e=[];for(const[i,n]of Object.entries(t))Array.isArray(n)?n.forEach(r=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ig(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[r,s]=n.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Dg(t){const e=t.indexOf("?");if(!e)return"";const i=t.indexOf("#",e);return t.substring(e,i>0?i:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pse{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,i){i||(i=0);const n=this.W_;if(typeof e=="string")for(let m=0;m<16;m++)n[m]=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),i+=4;else for(let m=0;m<16;m++)n[m]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i+=4;for(let m=16;m<80;m++){const y=n[m-3]^n[m-8]^n[m-14]^n[m-16];n[m]=(y<<1|y>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],a=this.chain_[2],o=this.chain_[3],c=this.chain_[4],d,p;for(let m=0;m<80;m++){m<40?m<20?(d=o^s&(a^o),p=1518500249):(d=s^a^o,p=1859775393):m<60?(d=s&a|o&(s|a),p=2400959708):(d=s^a^o,p=3395469782);const y=(r<<5|r>>>27)+d+c+p+n[m]&4294967295;c=o,o=a,a=(s<<30|s>>>2)&4294967295,s=r,r=y}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+o&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,i){if(e==null)return;i===void 0&&(i=e.length);const n=i-this.blockSize;let r=0;const s=this.buf_;let a=this.inbuf_;for(;r<i;){if(a===0)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<i;)if(s[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}else for(;r<i;)if(s[a]=e[r],++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=i}digest(){const e=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=i&255,i/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[n]=this.chain_[r]>>s&255,++n;return e}}function Ose(t,e){const i=new Nse(t,e);return i.subscribe.bind(i)}class Nse{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,n){let r;if(e===void 0&&i===void 0&&n===void 0)throw new Error("Missing Observer.");Gse(e,["next","error","complete"])?r=e:r={next:e,error:i,complete:n},r.next===void 0&&(r.next=Nw),r.error===void 0&&(r.error=Nw),r.complete===void 0&&(r.complete=Nw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gse(t,e){if(typeof t!="object"||t===null)return!1;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}function Nw(){}function MA(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Use=function(t){const e=[];let i=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r>=55296&&r<=56319){const s=r-55296;n++,nt(n<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(n)-56320;r=65536+(s<<10)+a}r<128?e[i++]=r:r<2048?(e[i++]=r>>6|192,e[i++]=r&63|128):r<65536?(e[i++]=r>>12|224,e[i++]=r>>6&63|128,e[i++]=r&63|128):(e[i++]=r>>18|240,e[i++]=r>>12&63|128,e[i++]=r>>6&63|128,e[i++]=r&63|128)}return e},mT=function(t){let e=0;for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);n<128?e++:n<2048?e+=2:n>=55296&&n<=56319?(e+=4,i++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){return t&&t._delegate?t._delegate:t}class Av{constructor(e,i,n){this.name=e,this.instanceFactory=i,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ji;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ji||(Ji={}));const Lse={debug:Ji.DEBUG,verbose:Ji.VERBOSE,info:Ji.INFO,warn:Ji.WARN,error:Ji.ERROR,silent:Ji.SILENT},Bse=Ji.INFO,Fse={[Ji.DEBUG]:"log",[Ji.VERBOSE]:"log",[Ji.INFO]:"info",[Ji.WARN]:"warn",[Ji.ERROR]:"error"},$se=(t,e,...i)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),r=Fse[e];if(r)console[r](`[${n}]  ${t.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class PA{constructor(e){this.name=e,this._logLevel=Bse,this._logHandler=$se,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ji))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Lse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ji.DEBUG,...e),this._logHandler(this,Ji.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ji.VERBOSE,...e),this._logHandler(this,Ji.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ji.INFO,...e),this._logHandler(this,Ji.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ji.WARN,...e),this._logHandler(this,Ji.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ji.ERROR,...e),this._logHandler(this,Ji.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(Vse(i)){const n=i.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(i=>i).join(" ")}}function Vse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gS="@firebase/app",WP="0.7.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new PA("@firebase/app"),qse="@firebase/app-compat",Yse="@firebase/analytics-compat",Wse="@firebase/analytics",jse="@firebase/app-check-compat",zse="@firebase/app-check",Xse="@firebase/auth",Kse="@firebase/auth-compat",Zse="@firebase/database",Qse="@firebase/database-compat",Jse="@firebase/functions",eae="@firebase/functions-compat",tae="@firebase/installations",iae="@firebase/installations-compat",nae="@firebase/messaging",rae="@firebase/messaging-compat",sae="@firebase/performance",aae="@firebase/performance-compat",oae="@firebase/remote-config",lae="@firebase/remote-config-compat",cae="@firebase/storage",uae="@firebase/storage-compat",dae="@firebase/firestore",hae="@firebase/firestore-compat",fae="firebase",pae="9.6.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mae="[DEFAULT]",yae={[gS]:"fire-core",[qse]:"fire-core-compat",[Wse]:"fire-analytics",[Yse]:"fire-analytics-compat",[zse]:"fire-app-check",[jse]:"fire-app-check-compat",[Xse]:"fire-auth",[Kse]:"fire-auth-compat",[Zse]:"fire-rtdb",[Qse]:"fire-rtdb-compat",[Jse]:"fire-fn",[eae]:"fire-fn-compat",[tae]:"fire-iid",[iae]:"fire-iid-compat",[nae]:"fire-fcm",[rae]:"fire-fcm-compat",[sae]:"fire-perf",[aae]:"fire-perf-compat",[oae]:"fire-rc",[lae]:"fire-rc-compat",[cae]:"fire-gcs",[uae]:"fire-gcs-compat",[dae]:"fire-fst",[hae]:"fire-fst-compat","fire-js":"fire-js",[fae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new Map,jP=new Map;function gae(t,e){try{t.container.addComponent(e)}catch(i){OA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,i)}}function Rv(t){const e=t.name;if(jP.has(e))return OA.debug(`There were multiple attempts to register component ${e}.`),!1;jP.set(e,t);for(const i of SF.values())gae(i,t);return!0}function kF(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vae={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."},bae=new mb("app","Firebase",vae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=pae;function _ae(t=mae){const e=SF.get(t);if(!e)throw bae.create("no-app",{appName:t});return e}function Sd(t,e,i){var n;let r=(n=yae[t])!==null&&n!==void 0?n:t;i&&(r+=`-${i}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),OA.warn(o.join(" "));return}Rv(new Av(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eae(t){Rv(new Av("platform-logger",e=>new Hse(e),"PRIVATE")),Sd(gS,WP,t),Sd(gS,WP,"esm2017"),Sd("fire-js","")}Eae("");function AF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tae=AF,RF=new mb("auth","Firebase",AF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=new PA("@firebase/auth");function k0(t,...e){zP.logLevel<=Ji.ERROR&&zP.error(`Auth (${yb}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t,...e){throw NA(t,...e)}function sc(t,...e){return NA(t,...e)}function IF(t,e,i){const n=Object.assign(Object.assign({},Tae()),{[e]:i});return new mb("auth","Firebase",n).create(e,{appName:t.name})}function wae(t,e,i){const n=i;if(!(e instanceof n))throw n.name!==e.constructor.name&&xo(t,"argument-error"),IF(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function NA(t,...e){if(typeof t!="string"){const i=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(i,...n)}return RF.create(t,...e)}function Lt(t,e,...i){if(!t)throw NA(e,...i)}function jc(t){const e="INTERNAL ASSERTION FAILED: "+t;throw k0(e),new Error(e)}function iu(t,e){t||jc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new Map;function zc(t){iu(t instanceof Function,"Expected a class definition");let e=XP.get(t);return e?(iu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XP.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cae(t,e){const i=kF(t,"auth");if(i.isInitialized()){const r=i.getImmediate(),s=i.getOptions();if(CF(s,e??{}))return r;xo(r,"already-initialized")}return i.initialize({options:e})}function Sae(t,e){const i=(e==null?void 0:e.persistence)||[],n=(Array.isArray(i)?i:[i]).map(zc);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kae(){return KP()==="http:"||KP()==="https:"}function KP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aae(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kae()||kse()||"connection"in navigator)?navigator.onLine:!0}function Rae(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,i){this.shortDelay=e,this.longDelay=i,iu(i>e,"Short delay should be less than long delay!"),this.isMobile=xA()||EF()}get(){return Aae()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){iu(t.emulator,"Emulator should always be set here");const{url:i}=t.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{static initialize(e,i,n){this.fetchImpl=e,i&&(this.headersImpl=i),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;jc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;jc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;jc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dae=new gb(3e4,6e4);function vb(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bb(t,e,i,n,r={}){return xF(t,r,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=ty(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),DF.fetch()(MF(t,t.config.apiHost,i,o),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function xF(t,e,i){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},Iae),e);try{const r=new xae(t),s=await Promise.race([i(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Gw(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,d]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gw(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Gw(t,"email-already-in-use",a);const p=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw IF(t,p,d);xo(t,p)}}catch(r){if(r instanceof ey)throw r;xo(t,"network-request-failed")}}async function _b(t,e,i,n,r={}){const s=await bb(t,e,i,n,r);return"mfaPendingCredential"in s&&xo(t,"multi-factor-auth-required",{_serverResponse:s}),s}function MF(t,e,i,n){const r=`${e}${i}?${n}`;return t.config.emulator?GA(t.config,r):`${t.config.apiScheme}://${r}`}class xae{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,n)=>{this.timer=setTimeout(()=>n(sc(this.auth,"network-request-failed")),Dae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gw(t,e,i){const n={appName:t.name};i.email&&(n.email=i.email),i.phoneNumber&&(n.phoneNumber=i.phoneNumber);const r=sc(t,e,n);return r.customData._tokenResponse=i,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mae(t,e){return bb(t,"POST","/v1/accounts:delete",e)}async function Pae(t,e){return bb(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Oae(t,e=!1){const i=gl(t),n=await i.getIdToken(e),r=UA(n);Lt(r&&r.exp&&r.auth_time&&r.iat,i.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:n,authTime:Kg(Uw(r.auth_time)),issuedAtTime:Kg(Uw(r.iat)),expirationTime:Kg(Uw(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Uw(t){return Number(t)*1e3}function UA(t){const[e,i,n]=t.split(".");if(e===void 0||i===void 0||n===void 0)return k0("JWT malformed, contained fewer than 3 sections"),null;try{const r=mS(i);return r?JSON.parse(r):(k0("Failed to decode base64 JWT payload"),null)}catch(r){return k0("Caught error parsing JWT payload as JSON",r),null}}function Nae(t){const e=UA(t);return Lt(e,"internal-error"),Lt(typeof e.exp<"u","internal-error"),Lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iv(t,e,i=!1){if(i)return e;try{return await e}catch(n){throw n instanceof ey&&Gae(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Gae({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var i;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kg(this.lastLoginAt),this.creationTime=Kg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(t){var e;const i=t.auth,n=await t.getIdToken(),r=await Iv(t,Pae(i,{idToken:n}));Lt(r==null?void 0:r.users.length,i,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Fae(s.providerUserInfo):[],o=Bae(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),p=c?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new PF(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function Lae(t){const e=gl(t);await dE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Bae(t,e){return[...t.filter(n=>!e.some(r=>r.providerId===n.providerId)),...e]}function Fae(t){return t.map(e=>{var{providerId:i}=e,n=SA(e,["providerId"]);return{providerId:i,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $ae(t,e){const i=await xF(t,{},async()=>{const n=ty({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=MF(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",DF.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Lt(e.idToken,"internal-error"),Lt(typeof e.idToken<"u","internal-error"),Lt(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nae(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}async getToken(e,i=!1){return Lt(!this.accessToken||this.refreshToken,e,"user-token-expired"),!i&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:n,refreshToken:r,expiresIn:s}=await $ae(e,i);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,i,n){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,i){const{refreshToken:n,accessToken:r,expirationTime:s}=i,a=new Dv;return n&&(Lt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),r&&(Lt(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(Lt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dv,this.toJSON())}_performRefresh(){return jc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t,e){Lt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class af{constructor(e){var{uid:i,auth:n,stsTokenManager:r}=e,s=SA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new PF(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const i=await Iv(this,this.stsTokenManager.getToken(this.auth,e));return Lt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return Oae(this,e)}reload(){return Lae(this)}_assign(e){this!==e&&(Lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>Object.assign({},i)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new af(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),i&&await dE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Iv(this,Mae(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){var n,r,s,a,o,c,d,p;const m=(n=i.displayName)!==null&&n!==void 0?n:void 0,y=(r=i.email)!==null&&r!==void 0?r:void 0,_=(s=i.phoneNumber)!==null&&s!==void 0?s:void 0,E=(a=i.photoURL)!==null&&a!==void 0?a:void 0,C=(o=i.tenantId)!==null&&o!==void 0?o:void 0,S=(c=i._redirectEventId)!==null&&c!==void 0?c:void 0,k=(d=i.createdAt)!==null&&d!==void 0?d:void 0,R=(p=i.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:O,emailVerified:I,isAnonymous:F,providerData:P,stsTokenManager:x}=i;Lt(O&&x,e,"internal-error");const M=Dv.fromJSON(this.name,x);Lt(typeof O=="string",e,"internal-error"),Fu(m,e.name),Fu(y,e.name),Lt(typeof I=="boolean",e,"internal-error"),Lt(typeof F=="boolean",e,"internal-error"),Fu(_,e.name),Fu(E,e.name),Fu(C,e.name),Fu(S,e.name),Fu(k,e.name),Fu(R,e.name);const q=new af({uid:O,auth:e,email:y,emailVerified:I,displayName:m,isAnonymous:F,photoURL:E,phoneNumber:_,tenantId:C,stsTokenManager:M,createdAt:k,lastLoginAt:R});return P&&Array.isArray(P)&&(q.providerData=P.map($=>Object.assign({},$))),S&&(q._redirectEventId=S),q}static async _fromIdTokenResponse(e,i,n=!1){const r=new Dv;r.updateFromServerResponse(i);const s=new af({uid:i.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await dE(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}OF.type="NONE";const ZP=OF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t,e,i){return`firebase:${t}:${e}:${i}`}class om{constructor(e,i,n){this.persistence=e,this.auth=i,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=A0(this.userKey,r.apiKey,s),this.fullPersistenceKey=A0("persistence",r.apiKey,s),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?af._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,n="authUser"){if(!i.length)return new om(zc(ZP),e,n);const r=(await Promise.all(i.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||zc(ZP);const a=A0(n,e.config.apiKey,e.name);let o=null;for(const d of i)try{const p=await d._get(a);if(p){const m=af._fromJSON(e,p);d!==s&&(o=m),s=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new om(s,e,n):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(i.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new om(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BF(e))return"Blackberry";if(FF(e))return"Webos";if(LA(e))return"Safari";if((e.includes("chrome/")||GF(e))&&!e.includes("edge/"))return"Chrome";if(LF(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(i);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function NF(t=ks()){return/firefox\//i.test(t)}function LA(t=ks()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GF(t=ks()){return/crios\//i.test(t)}function UF(t=ks()){return/iemobile/i.test(t)}function LF(t=ks()){return/android/i.test(t)}function BF(t=ks()){return/blackberry/i.test(t)}function FF(t=ks()){return/webos/i.test(t)}function yT(t=ks()){return/iphone|ipad|ipod/i.test(t)}function Hae(t=ks()){var e;return yT(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Vae(){return Ase()&&document.documentMode===10}function $F(t=ks()){return yT(t)||LF(t)||FF(t)||BF(t)||/windows phone/i.test(t)||UF(t)}function qae(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t,e=[]){let i;switch(t){case"Browser":i=QP(ks());break;case"Worker":i=`${QP(ks())}-${t}`;break;default:i=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${yb}/${n}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yae{constructor(e,i){this.app=e,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new JP(this),this.idTokenSubscription=new JP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RF,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=zc(i)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await om.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var i;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,s=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===s)&&(a!=null&&a.user)&&(n=a.user)}return n?n._redirectEventId?(Lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await dE(e)}catch(i){if(i.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rae()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const i=e?gl(e):null;return i&&Lt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&Lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(zc(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mb("auth","Firebase",e())}onAuthStateChanged(e,i,n){return this.registerStateListener(this.authStateSubscription,e,i,n)}onIdTokenChanged(e,i,n){return this.registerStateListener(this.idTokenSubscription,e,i,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,i){const n=await this.getOrInitRedirectPersistenceManager(i);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&zc(e)||this._popupRedirectResolver;Lt(i,this,"argument-error"),this.redirectPersistenceManager=await om.create(this,[zc(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var i,n;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(i=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,n,r){if(this._deleted)return()=>{};const s=typeof i=="function"?i:i.next.bind(i),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Lt(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof i=="function"?e.addObserver(i,n,r):e.addObserver(i)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function Eb(t){return gl(t)}class JP{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ose(i=>this.observer=i)}get next(){return Lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return jc("not implemented")}_getIdTokenResponse(e){return jc("not implemented")}_linkToIdToken(e,i){return jc("not implemented")}_getReauthenticationResolver(e){return jc("not implemented")}}async function Wae(t,e){return bb(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jae(t,e){return _b(t,"POST","/v1/accounts:signInWithPassword",vb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zae(t,e){return _b(t,"POST","/v1/accounts:signInWithEmailLink",vb(t,e))}async function Xae(t,e){return _b(t,"POST","/v1/accounts:signInWithEmailLink",vb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv extends BA{constructor(e,i,n,r=null){super("password",n),this._email=e,this._password=i,this._tenantId=r}static _fromEmailAndPassword(e,i){return new xv(e,i,"password")}static _fromEmailAndCode(e,i,n=null){return new xv(e,i,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return jae(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return zae(e,{email:this._email,oobCode:this._password});default:xo(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":return Wae(e,{idToken:i,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Xae(e,{idToken:i,email:this._email,oobCode:this._password});default:xo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lm(t,e){return _b(t,"POST","/v1/accounts:signInWithIdp",vb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kae="http://localhost";class Tf extends BA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new Tf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):xo("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:r}=i,s=SA(i,["providerId","signInMethod"]);if(!n||!r)return null;const a=new Tf(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const i=this.buildRequest();return lm(e,i)}_linkToIdToken(e,i){const n=this.buildRequest();return n.idToken=i,lm(e,n)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,lm(e,i)}buildRequest(){const e={requestUri:Kae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=ty(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zae(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qae(t){const e=Ig(Dg(t)).link,i=e?Ig(Dg(e)).deep_link_id:null,n=Ig(Dg(t)).deep_link_id;return(n?Ig(Dg(n)).link:null)||n||i||e||t}class FA{constructor(e){var i,n,r,s,a,o;const c=Ig(Dg(e)),d=(i=c.apiKey)!==null&&i!==void 0?i:null,p=(n=c.oobCode)!==null&&n!==void 0?n:null,m=Zae((r=c.mode)!==null&&r!==void 0?r:null);Lt(d&&p&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const i=Qae(e);try{return new FA(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.providerId=iy.PROVIDER_ID}static credential(e,i){return xv._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){const n=FA.parseLink(i);return Lt(n,"argument-error"),xv._fromEmailAndCode(e,n.code,n.tenantId)}}iy.PROVIDER_ID="password";iy.EMAIL_PASSWORD_SIGN_IN_METHOD="password";iy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends $A{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Tb{constructor(){super("facebook.com")}static credential(e){return Tf._fromParams({providerId:sd.PROVIDER_ID,signInMethod:sd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sd.credentialFromTaggedObject(e)}static credentialFromError(e){return sd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sd.credential(e.oauthAccessToken)}catch{return null}}}sd.FACEBOOK_SIGN_IN_METHOD="facebook.com";sd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad extends Tb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return Tf._fromParams({providerId:ad.PROVIDER_ID,signInMethod:ad.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return ad.credentialFromTaggedObject(e)}static credentialFromError(e){return ad.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:n}=e;if(!i&&!n)return null;try{return ad.credential(i,n)}catch{return null}}}ad.GOOGLE_SIGN_IN_METHOD="google.com";ad.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od extends Tb{constructor(){super("github.com")}static credential(e){return Tf._fromParams({providerId:od.PROVIDER_ID,signInMethod:od.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return od.credentialFromTaggedObject(e)}static credentialFromError(e){return od.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return od.credential(e.oauthAccessToken)}catch{return null}}}od.GITHUB_SIGN_IN_METHOD="github.com";od.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends Tb{constructor(){super("twitter.com")}static credential(e,i){return Tf._fromParams({providerId:ld.PROVIDER_ID,signInMethod:ld.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return ld.credentialFromTaggedObject(e)}static credentialFromError(e){return ld.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:n}=e;if(!i||!n)return null;try{return ld.credential(i,n)}catch{return null}}}ld.TWITTER_SIGN_IN_METHOD="twitter.com";ld.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jae(t,e){return _b(t,"POST","/v1/accounts:signUp",vb(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,n,r=!1){const s=await af._fromIdTokenResponse(e,n,r),a=eO(n);return new wf({user:s,providerId:a,_tokenResponse:n,operationType:i})}static async _forOperation(e,i,n){await e._updateTokensIfNecessary(n,!0);const r=eO(n);return new wf({user:e,providerId:r,_tokenResponse:n,operationType:i})}}function eO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends ey{constructor(e,i,n,r){var s;super(i.code,i.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,hE.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:i.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,i,n,r){return new hE(e,i,n,r)}}function VF(t,e,i,n){return(e==="reauthenticate"?i._getReauthenticationResolver(t):i._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hE._fromErrorAndOperation(t,s,e,n):s})}async function eoe(t,e,i=!1){const n=await Iv(t,e._linkToIdToken(t.auth,await t.getIdToken()),i);return wf._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function toe(t,e,i=!1){const{auth:n}=t,r="reauthenticate";try{const s=await Iv(t,VF(n,r,e,t),i);Lt(s.idToken,n,"internal-error");const a=UA(s.idToken);Lt(a,n,"internal-error");const{sub:o}=a;return Lt(t.uid===o,n,"user-mismatch"),wf._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xo(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e,i=!1){const n="signIn",r=await VF(t,n,e),s=await wf._fromIdTokenResponse(t,n,r);return i||await t._updateCurrentUser(s.user),s}async function ioe(t,e){return qF(Eb(t),e)}async function noe(t,e,i){const n=Eb(t),r=await Jae(n,{returnSecureToken:!0,email:e,password:i}),s=await wf._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}function roe(t,e,i){return ioe(gl(t),iy.credential(e,i))}function soe(t){return gl(t).signOut()}const fE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(fE,"1"),this.storage.removeItem(fE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aoe(){const t=ks();return LA(t)||yT(t)}const ooe=1e3,loe=10;class WF extends YF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=aoe()&&qae(),this.fallbackToPolling=$F(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const n=this.storage.getItem(i),r=this.localCache[i];n!==r&&e(i,r,n)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const n=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!i)return}const r=()=>{const a=this.storage.getItem(n);!i&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);Vae()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,loe):r()}notifyListeners(e,i){this.localCache[e]=i;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:n}),!0)})},ooe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}WF.type="LOCAL";const coe=WF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF extends YF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}jF.type="SESSION";const zF=jF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uoe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(r=>r.isListeningto(e));if(i)return i;const n=new gT(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:n,eventType:r,data:s}=i.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;i.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(a).map(async d=>d(i.origin,s)),c=await uoe(o);i.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:c})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t="",e=10){let i="";for(let n=0;n<e;n++)i+=Math.floor(Math.random()*10);return t+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class doe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,n=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const d=HA("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(m){const y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(y.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:i},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(){return window}function hoe(t){ac().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(){return typeof ac().WorkerGlobalScope<"u"&&typeof ac().importScripts=="function"}async function foe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function poe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function moe(){return XF()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="firebaseLocalStorageDb",yoe=1,pE="firebaseLocalStorage",ZF="fbase_key";class wb{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function vT(t,e){return t.transaction([pE],e?"readwrite":"readonly").objectStore(pE)}function goe(){const t=indexedDB.deleteDatabase(KF);return new wb(t).toPromise()}function bS(){const t=indexedDB.open(KF,yoe);return new Promise((e,i)=>{t.addEventListener("error",()=>{i(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(pE,{keyPath:ZF})}catch(r){i(r)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(pE)?e(n):(n.close(),await goe(),e(await bS()))})})}async function tO(t,e,i){const n=vT(t,!0).put({[ZF]:e,value:i});return new wb(n).toPromise()}async function voe(t,e){const i=vT(t,!1).get(e),n=await new wb(i).toPromise();return n===void 0?null:n.value}function iO(t,e){const i=vT(t,!0).delete(e);return new wb(i).toPromise()}const boe=800,_oe=3;class QF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bS(),this.db)}async _withRetries(e){let i=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(i++>_oe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XF()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gT._getInstance(moe()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await foe(),!this.activeServiceWorker)return;this.sender=new doe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((i=n[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||poe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bS();return await tO(e,fE,"1"),await iO(e,fE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(n=>tO(n,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(n=>voe(n,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>iO(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=vT(r,!1).getAll();return new wb(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),i.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),i.push(r));return i}notifyListeners(e,i){this.localCache[e]=i;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),boe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QF.type="LOCAL";const Eoe=QF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Toe(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function woe(t){return new Promise((e,i)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=r=>{const s=sc("internal-error");s.customData=r,i(s)},n.type="text/javascript",n.charset="UTF-8",Toe().appendChild(n)})}function Coe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new gb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t,e){return e?zc(e):(Lt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA extends BA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lm(e,this._buildIdpRequest())}_linkToIdToken(e,i){return lm(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return lm(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function Soe(t){return qF(t.auth,new VA(t),t.bypassAuthState)}function koe(t){const{auth:e,user:i}=t;return Lt(i,e,"internal-error"),toe(i,new VA(t),t.bypassAuthState)}async function Aoe(t){const{auth:e,user:i}=t;return Lt(i,e,"internal-error"),eoe(i,new VA(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,i,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:n,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:i,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Soe;case"linkViaPopup":case"linkViaRedirect":return Aoe;case"reauthViaPopup":case"reauthViaRedirect":return koe;default:xo(this.auth,"internal-error")}}resolve(e){iu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){iu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Roe=new gb(2e3,1e4);async function Ioe(t,e,i){const n=Eb(t);wae(t,e,$A);const r=JF(n,i);return new jh(n,"signInViaPopup",e,r).executeNotNull()}class jh extends e${constructor(e,i,n,r,s){super(e,i,r,s),this.provider=n,this.authWindow=null,this.pollId=null,jh.currentPopupAction&&jh.currentPopupAction.cancel(),jh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Lt(e,this.auth,"internal-error"),e}async onExecution(){iu(this.filter.length===1,"Popup operations only handle one event");const e=HA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(sc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jh.currentPopupAction=null}pollUserCancellation(){const e=()=>{var i,n;if(!((n=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sc(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Roe.get())};e()}}jh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Doe="pendingRedirect",Lw=new Map;class xoe extends e${constructor(e,i,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,n),this.eventId=null}async execute(){let e=Lw.get(this.auth._key());if(!e){try{const n=await Moe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(i){e=()=>Promise.reject(i)}Lw.set(this.auth._key(),e)}return this.bypassAuthState||Lw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Moe(t,e){const i=Ooe(e),n=Poe(t);if(!await n._isAvailable())return!1;const r=await n._get(i)==="true";return await n._remove(i),r}function Poe(t){return zc(t._redirectPersistence)}function Ooe(t){return A0(Doe,t.config.apiKey,t.name)}async function Noe(t,e,i=!1){const n=Eb(t),r=JF(n,e),a=await new xoe(n,r,i).execute();return a&&!i&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Goe=10*60*1e3;class Uoe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(i=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Loe(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){var n;if(e.error&&!t$(e)){const r=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";i.onError(sc(this.auth,r))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const n=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Goe&&this.cachedEventUids.clear(),this.cachedEventUids.has(nO(e))}saveEventToCache(e){this.cachedEventUids.add(nO(e)),this.lastProcessedEventTime=Date.now()}}function nO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function t$({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Loe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t$(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Boe(t,e={}){return bb(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Foe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$oe=/^https?/;async function Hoe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Boe(t);for(const i of e)try{if(Voe(i))return}catch{}xo(t,"unauthorized-domain")}function Voe(t){const e=vS(),{protocol:i,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?i==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&a.hostname===n}if(!$oe.test(i))return!1;if(Foe.test(t))return n===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qoe=new gb(3e4,6e4);function rO(){const t=ac().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let i=0;i<t.CP.length;i++)t.CP[i]=null}}function Yoe(t){return new Promise((e,i)=>{var n,r,s;function a(){rO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rO(),i(sc(t,"network-request-failed"))},timeout:qoe.get()})}if(!((r=(n=ac().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ac().gapi)===null||s===void 0)&&s.load)a();else{const o=Coe("iframefcb");return ac()[o]=()=>{gapi.load?a():i(sc(t,"network-request-failed"))},woe(`https://apis.google.com/js/api.js?onload=${o}`).catch(c=>i(c))}}).catch(e=>{throw R0=null,e})}let R0=null;function Woe(t){return R0=R0||Yoe(t),R0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const joe=new gb(5e3,15e3),zoe="__/auth/iframe",Xoe="emulator/auth/iframe",Koe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zoe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qoe(t){const e=t.config;Lt(e.authDomain,t,"auth-domain-config-required");const i=e.emulator?GA(e,Xoe):`https://${t.config.authDomain}/${zoe}`,n={apiKey:e.apiKey,appName:t.name,v:yb},r=Zoe.get(t.config.apiHost);r&&(n.eid=r);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${i}?${ty(n).slice(1)}`}async function Joe(t){const e=await Woe(t),i=ac().gapi;return Lt(i,t,"internal-error"),e.open({where:document.body,url:Qoe(t),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Koe,dontclear:!0},n=>new Promise(async(r,s)=>{await n.restyle({setHideOnLeave:!1});const a=sc(t,"network-request-failed"),o=ac().setTimeout(()=>{s(a)},joe.get());function c(){ac().clearTimeout(o),r(n)}n.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ele={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tle=500,ile=600,nle="_blank",rle="http://localhost";class sO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sle(t,e,i,n=tle,r=ile){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c=Object.assign(Object.assign({},ele),{width:n.toString(),height:r.toString(),top:s,left:a}),d=ks().toLowerCase();i&&(o=GF(d)?nle:i),NF(d)&&(e=e||rle,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[_,E])=>`${y}${_}=${E},`,"");if(Hae(d)&&o!=="_self")return ale(e||"",o),new sO(null);const m=window.open(e||"",o,p);Lt(m,t,"popup-blocked");try{m.focus()}catch{}return new sO(m)}function ale(t,e){const i=document.createElement("a");i.href=t,i.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ole="__/auth/handler",lle="emulator/auth/handler";function aO(t,e,i,n,r,s){Lt(t.config.authDomain,t,"auth-domain-config-required"),Lt(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:i,redirectUrl:n,v:yb,eventId:r};if(e instanceof $A){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",yS(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))a[c]=d}if(e instanceof Tb){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(a.scopes=c.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];return`${cle(t)}?${ty(o).slice(1)}`}function cle({config:t}){return t.emulator?GA(t,lle):`https://${t.authDomain}/${ole}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="webStorageSupport";class ule{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zF,this._completeRedirectFn=Noe}async _openPopup(e,i,n,r){var s;iu((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=aO(e,i,n,vS(),r);return sle(e,a,HA())}async _openRedirect(e,i,n,r){return await this._originValidation(e),hoe(aO(e,i,n,vS(),r)),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:r,promise:s}=this.eventManagers[i];return r?Promise.resolve(r):(iu(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[i]={promise:n},n.catch(()=>{delete this.eventManagers[i]}),n}async initAndGetManager(e){const i=await Joe(e),n=new Uoe(e);return i.register("authEvent",r=>(Lt(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=i,n}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(Bw,{type:Bw},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Bw];a!==void 0&&i(!!a),xo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=Hoe(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return $F()||LA()||yT()}}const dle=ule;var oO="@firebase/auth",lO="0.19.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(n=>{var r;e(((r=n)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fle(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function ple(t){Rv(new Av("auth",(e,{options:i})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=n.options;return(a=>{Lt(r&&!r.includes(":"),"invalid-api-key",{appName:a.name}),Lt(!(s!=null&&s.includes(":")),"argument-error",{appName:a.name});const o={apiKey:r,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HF(t)},c=new Yae(a,o);return Sae(c,i),c})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,n)=>{e.getProvider("auth-internal").initialize()})),Rv(new Av("auth-internal",e=>{const i=Eb(e.getProvider("auth").getImmediate());return(n=>new hle(n))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sd(oO,lO,fle(t)),Sd(oO,lO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mle(t=_ae()){const e=kF(t,"auth");return e.isInitialized()?e.getImmediate():Cae(t,{popupRedirectResolver:dle,persistence:[Eoe,coe,zF]})}ple("Browser");var yle={};const cO="@firebase/database",uO="0.12.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i$="";function gle(t){i$=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vle{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$r(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:kv(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ble{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return uu(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vle(e)}}catch{}return new ble},zh=n$("localStorage"),_le=n$("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=new PA("@firebase/database"),Ele=function(){let t=1;return function(){return t++}}(),r$=function(t){const e=Use(t),i=new Pse;i.update(e);const n=i.digest();return IA.encodeByteArray(n)},Cb=function(...t){let e="";for(let i=0;i<t.length;i++){const n=t[i];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?e+=Cb.apply(null,n):typeof n=="object"?e+=$r(n):e+=n,e+=" "}return e};let Zg=null,dO=!0;const Tle=function(t,e){nt(!e,"Can't turn on custom loggers persistently."),cm.logLevel=Ji.VERBOSE,Zg=cm.log.bind(cm)},Ts=function(...t){if(dO===!0&&(dO=!1,Zg===null&&_le.get("logging_enabled")===!0&&Tle()),Zg){const e=Cb.apply(null,t);Zg(e)}},Sb=function(t){return function(...e){Ts(t,...e)}},_S=function(...t){const e="FIREBASE INTERNAL ERROR: "+Cb(...t);cm.error(e)},Cf=function(...t){const e=`FIREBASE FATAL ERROR: ${Cb(...t)}`;throw cm.error(e),new Error(e)},_a=function(...t){const e="FIREBASE WARNING: "+Cb(...t);cm.warn(e)},wle=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_a("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},s$=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Cle=function(t){if(document.readyState==="complete")t();else{let e=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Rm="[MIN_NAME]",Sf="[MAX_NAME]",ny=function(t,e){if(t===e)return 0;if(t===Rm||e===Sf)return-1;if(e===Rm||t===Sf)return 1;{const i=hO(t),n=hO(e);return i!==null?n!==null?i-n===0?t.length-e.length:i-n:-1:n!==null?1:t<e?-1:1}},Sle=function(t,e){return t===e?0:t<e?-1:1},sg=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+$r(e))},qA=function(t){if(typeof t!="object"||t===null)return $r(t);const e=[];for(const n in t)e.push(n);e.sort();let i="{";for(let n=0;n<e.length;n++)n!==0&&(i+=","),i+=$r(e[n]),i+=":",i+=qA(t[e[n]]);return i+="}",i},a$=function(t,e){const i=t.length;if(i<=e)return[t];const n=[];for(let r=0;r<i;r+=e)r+e>i?n.push(t.substring(r,i)):n.push(t.substring(r,r+e));return n};function Mo(t,e){for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])}const o$=function(t){nt(!s$(t),"Invalid JSON number");const e=11,i=52,n=(1<<e-1)-1;let r,s,a,o,c;t===0?(s=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),n),s=o+n,a=Math.round(t*Math.pow(2,i-o)-Math.pow(2,i))):(s=0,a=Math.round(t/Math.pow(2,1-n-i))));const d=[];for(c=i;c;c-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();const p=d.join("");let m="";for(c=0;c<64;c+=8){let y=parseInt(p.substr(c,8),2).toString(16);y.length===1&&(y="0"+y),m=m+y}return m.toLowerCase()},kle=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ale=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Rle=new RegExp("^-?(0*)\\d{1,10}$"),Ile=-2147483648,Dle=2147483647,hO=function(t){if(Rle.test(t)){const e=Number(t);if(e>=Ile&&e<=Dle)return e}return null},ry=function(t){try{t()}catch(e){setTimeout(()=>{const i=e.stack||"";throw _a("Exception was thrown by user callback.",i),e},Math.floor(0))}},xle=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qg=function(t,e){const i=setTimeout(t,e);return typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mle{constructor(e,i){this.appName_=e,this.appCheckProvider=i,this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(n=>this.appCheck=n)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((i,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){_a(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ple{constructor(e,i,n){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(Ts("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,n):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_a(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="5",l$="v",c$="s",u$="r",d$="f",h$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,f$="ls",Ole="p",ES="ac",p$="websocket",m$="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nle{constructor(e,i,n,r,s=!1,a="",o=!1){this.secure=i,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zh.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}}function Gle(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function y$(t,e,i){nt(typeof e=="string","typeof type must == string"),nt(typeof i=="object","typeof params must == object");let n;if(e===p$)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===m$)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Gle(t)&&(i.ns=t.namespace);const r=[];return Mo(i,(s,a)=>{r.push(s+"="+a)}),n+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ule{constructor(){this.counters_={}}incrementCounter(e,i=1){uu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return Cse(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw={},$w={};function WA(t){const e=t.toString();return Fw[e]||(Fw[e]=new Ule),Fw[e]}function Lle(t,e){const i=t.toString();return $w[i]||($w[i]=e()),$w[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ble{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&ry(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="start",Fle="close",$le="pLPCommand",Hle="pRTLPCB",g$="id",v$="pw",b$="ser",Vle="cb",qle="seg",Yle="ts",Wle="d",jle="dframe",_$=1870,E$=30,zle=_$-E$,Xle=25e3,Kle=3e4;class Zp{constructor(e,i,n,r,s,a,o){this.connId=e,this.repoInfo=i,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Sb(e),this.stats_=WA(i),this.urlFn=c=>(this.appCheckToken&&(c[ES]=this.appCheckToken),y$(i,m$,c))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new Ble(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Kle)),Cle(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jA((...s)=>{const[a,o,c,d,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===fO)this.id=o,this.password=c;else if(a===Fle)o?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(o,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,o]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,o)},()=>{this.onClosed_()},this.urlFn);const n={};n[fO]="t",n[b$]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[Vle]=this.scriptTagHolder.uniqueCallbackIdentifier),n[l$]=YA,this.transportSessionId&&(n[c$]=this.transportSessionId),this.lastSessionId&&(n[f$]=this.lastSessionId),this.applicationId&&(n[Ole]=this.applicationId),this.appCheckToken&&(n[ES]=this.appCheckToken),typeof location<"u"&&location.hostname&&h$.test(location.hostname)&&(n[u$]=d$);const r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zp.forceAllow_=!0}static forceDisallow(){Zp.forceDisallow_=!0}static isAvailable(){return Zp.forceAllow_?!0:!Zp.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!kle()&&!Ale()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=$r(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=wse(i),r=a$(n,zle);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,i){this.myDisconnFrame=document.createElement("iframe");const n={};n[jle]="t",n[g$]=e,n[v$]=i,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=$r(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class jA{constructor(e,i,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Ele(),window[$le+this.uniqueCallbackIdentifier]=e,window[Hle+this.uniqueCallbackIdentifier]=i,this.myIFrame=jA.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(o){Ts("frame writing exception"),o.stack&&Ts(o.stack),Ts(o)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ts("No IE domain setting required")}catch{const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[g$]=this.myID,e[v$]=this.myPW,e[b$]=this.currentSerial;let i=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+E$+n.length<=_$;){const a=this.pendingSegs.shift();n=n+"&"+qle+r+"="+a.seg+"&"+Yle+r+"="+a.ts+"&"+Wle+r+"="+a.d,r++}return i=i+n,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,n){this.pendingSegs.push({seg:e,ts:i,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const n=()=>{this.outstandingRequests.delete(i),this.newRequest_()},r=setTimeout(n,Math.floor(Xle)),s=()=>{clearTimeout(r),n()};this.addTag(e,s)}addTag(e,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),i())},n.onerror=()=>{Ts("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zle=16384,Qle=45e3;let mE=null;typeof MozWebSocket<"u"?mE=MozWebSocket:typeof WebSocket<"u"&&(mE=WebSocket);class sl{constructor(e,i,n,r,s,a,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Sb(this.connId),this.stats_=WA(i),this.connURL=sl.connectionURL_(i,a,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,n,r){const s={};return s[l$]=YA,typeof location<"u"&&location.hostname&&h$.test(location.hostname)&&(s[u$]=d$),i&&(s[c$]=i),n&&(s[f$]=n),r&&(s[ES]=r),y$(e,p$,s)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zh.set("previous_websocket_failure",!0);try{if(!TF()){const n={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new mE(this.connURL,[],n)}}catch(n){this.log_("Error instantiating WebSocket.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const r=n.message||n.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){sl.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(i);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&mE!==null&&!sl.forceDisallow_}static previouslyFailed(){return zh.isInMemoryStorage||zh.get("previous_websocket_failure")===!0}markConnectionHealthy(){zh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const n=kv(i);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(nt(this.frames===null,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const n=this.extractFrameCount_(i);n!==null&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const i=$r(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=a$(i,Zle);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Qle))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}sl.responsesRequiredToBeHealthy=2;sl.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Zp,sl]}initTransports_(e){const i=sl&&sl.isAvailable();let n=i&&!sl.previouslyFailed();if(e.webSocketOnly&&(i||_a("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[sl];else{const r=this.transports_=[];for(const s of zA.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jle=6e4,ece=5e3,tce=10*1024,ice=100*1024,Hw="t",pO="d",nce="s",mO="r",rce="e",yO="o",gO="a",vO="n",bO="p",sce="h";class ace{constructor(e,i,n,r,s,a,o,c,d,p){this.id=e,this.repoInfo_=i,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=o,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Sb("c:"+this.id+":"),this.transportManager_=new zA(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Qg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ice?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>tce?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){const i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Hw in e){const i=e[Hw];i===gO?this.upgradeIfSecondaryHealthy_():i===mO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===yO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=sg("t",e),n=sg("d",e);if(i==="c")this.onSecondaryControl_(n);else if(i==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:gO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=sg("t",e),n=sg("d",e);i==="c"?this.onControl_(n):i==="d"&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=sg(Hw,e);if(pO in e){const n=e[pO];if(i===sce)this.onHandshake_(n);else if(i===vO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===nce?this.onConnectionShutdown_(n):i===mO?this.onReset_(n):i===rce?_S("Server Error: "+n):i===yO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_S("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),YA!==n&&_a("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,n),Qg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Jle))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ece))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bO,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${put(e,i,n,r){}merge(e,i,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,n){}onDisconnectMerge(e,i,n){}onDisconnectCancel(e,i){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e){this.allowedEvents_=e,this.listeners_={},nt(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,i)}}on(e,i,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:n});const r=this.getInitialEvent(e);r&&i.apply(n,r)}off(e,i,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===i&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(e){nt(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends w${constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xA()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yE}getInitialEvent(e){return nt(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=32,EO=768;class tn{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}}function Li(){return new tn("")}function mi(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ud(t){return t.pieces_.length-t.pieceNum_}function mn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new tn(t.pieces_,e)}function C$(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function oce(t){let e="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)t.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[i])));return e||"/"}function S$(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function k$(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)e.push(t.pieces_[i]);return new tn(e,0)}function Sr(t,e){const i=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)i.push(t.pieces_[n]);if(e instanceof tn)for(let n=e.pieceNum_;n<e.pieces_.length;n++)i.push(e.pieces_[n]);else{const n=e.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&i.push(n[r])}return new tn(i,0)}function _i(t){return t.pieceNum_>=t.pieces_.length}function eo(t,e){const i=mi(t),n=mi(e);if(i===null)return e;if(i===n)return eo(mn(t),mn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function XA(t,e){if(Ud(t)!==Ud(e))return!1;for(let i=t.pieceNum_,n=e.pieceNum_;i<=t.pieces_.length;i++,n++)if(t.pieces_[i]!==e.pieces_[n])return!1;return!0}function ol(t,e){let i=t.pieceNum_,n=e.pieceNum_;if(Ud(t)>Ud(e))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==e.pieces_[n])return!1;++i,++n}return!0}class lce{constructor(e,i){this.errorPrefix_=i,this.parts_=S$(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=mT(this.parts_[n]);A$(this)}}function cce(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=mT(e),A$(t)}function uce(t){const e=t.parts_.pop();t.byteLength_-=mT(e),t.parts_.length>0&&(t.byteLength_-=1)}function A$(t){if(t.byteLength_>EO)throw new Error(t.errorPrefix_+"has a key path longer than "+EO+" bytes ("+t.byteLength_+").");if(t.parts_.length>_O)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_O+") or object contains a cycle "+Ph(t))}function Ph(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends w${constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const n=!document[e];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new KA}getInitialEvent(e){return nt(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=1e3,dce=60*5*1e3,hce=3*1e3,TO=30*1e3,fce=1.3,pce=3e4,mce="server_kill",wO=3;class eu extends T${constructor(e,i,n,r,s,a,o,c){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=o,this.authOverride_=c,this.id=eu.nextPersistentConnectionId_++,this.log_=Sb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ag,this.maxReconnectDelay_=dce,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!TF())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");KA.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&yE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,n){const r=++this.requestNumber_,s={r,a:e,b:i};this.log_($r(s)),nt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const i=new DA,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:a=>{const o=a.d;a.s==="ok"?(this.onDataUpdate_(n.p,o,!1,null),i.resolve(o)):i.reject(o)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const a=this.outstandingGets_[s];a===void 0||r!==a||(delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),i.reject(new Error("Client is offline.")))},hce),this.connected_&&this.sendGet_(s),i.promise}listen(e,i,n,r){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),nt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),nt(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:i,query:e,tag:n};this.listens.get(a).set(s,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(n)})}sendListen_(e){const i=e.query,n=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+n+" for "+r);const s={p:n},a="q";e.tag&&(s.q=i._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,o=>{const c=o.d,d=o.s;eu.warnOnListenWarnings_(c,i),(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",o),d!=="ok"&&this.removeListen_(n,r),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&uu(e,"w")){const n=Am(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();_a(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Mse(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=TO)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=xse(e)?"auth":"gauth",n={cred:e};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(i,n,r=>{const s=r.s,a=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,n=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,n)})}unlisten(e,i){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),nt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,i)}sendUnlisten_(e,i,n,r){this.log_("Unlisten on "+e+" for "+i);const s={p:e},a="n";r&&(s.q=n,s.t=r),this.sendRequest(a,s)}onDisconnectPut(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:n})}onDisconnectMerge(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:n})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,n,r){const s={p:i,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,i,n,r){this.putInternal("p",e,i,n,r)}merge(e,i,n,r){this.putInternal("m",e,i,n,r)}putInternal(e,i,n,r,s){this.initConnection_();const a={p:i,d:n};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,n,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,n=>{if(n.s!=="ok"){const s=n.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$r(e));const i=e.r,n=this.requestCBHash_[i];n&&(delete this.requestCBHash_[i],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):_S("Unrecognized action received from server: "+$r(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){nt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ag,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ag,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pce&&(this.reconnectDelay_=ag),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fce)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+eu.nextConnectionId_++,s=this.lastSessionId;let a=!1,o=null;const c=function(){o?o.close():(a=!0,n())},d=function(m){nt(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(m)};this.realtime_={close:c,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[m,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Ts("getToken() completed but was canceled"):(Ts("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,o=new ace(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,n,_=>{_a(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(mce)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&_a(m),c())}}}interrupt(e){Ts("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ts("Resuming connection for reason: "+e),delete this.interruptReasons_[e],yS(this.interruptReasons_)&&(this.reconnectDelay_=ag,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let n;i?n=i.map(s=>qA(s)).join("$"):n="default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,i){const n=new tn(e).toString();let r;if(this.listens.has(n)){const s=this.listens.get(n);r=s.get(i),s.delete(i),s.size===0&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,i){Ts("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=wO&&(this.reconnectDelay_=TO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Ts("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=wO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+i$.replace(/\./g,"-")]=1,xA()?e["framework.cordova"]=1:EF()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=yE.getInstance().currentlyOnline();return yS(this.interruptReasons_)&&e}}eu.nextPersistentConnectionId_=0;eu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new si(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const n=new si(Rm,e),r=new si(Rm,i);return this.compare(n,r)!==0}minPost(){return si.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q_;class R$ extends bT{static get __EMPTY_NODE(){return Q_}static set __EMPTY_NODE(e){Q_=e}compare(e,i){return ny(e.name,i.name)}isDefinedOn(e){throw Jm("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return si.MIN}maxPost(){return new si(Sf,Q_)}makePost(e,i){return nt(typeof e=="string","KeyIndex indexValue must always be a string."),new si(e,Q_)}toString(){return".key"}}const um=new R$;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,i,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=i?n(e.key,i):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Br{constructor(e,i,n,r,s){this.key=e,this.value=i,this.color=n??Br.RED,this.left=r??ba.EMPTY_NODE,this.right=s??ba.EMPTY_NODE}copy(e,i,n,r,s){return new Br(e??this.key,i??this.value,n??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let r=this;const s=n(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,i,n),null):s===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,i,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ba.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let n,r;if(n=this,i(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,i),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),i(e,n.key)===0){if(n.right.isEmpty())return ba.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,i))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Br.RED=!0;Br.BLACK=!1;class yce{copy(e,i,n,r,s){return this}insert(e,i,n){return new Br(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ba{constructor(e,i=ba.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new ba(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,Br.BLACK,null,null))}remove(e){return new ba(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Br.BLACK,null,null))}get(e){let i,n=this.root_;for(;!n.isEmpty();){if(i=this.comparator_(e,n.key),i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}getPredecessorKey(e){let i,n=this.root_,r=null;for(;!n.isEmpty();)if(i=this.comparator_(e,n.key),i===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else i<0?n=n.left:i>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new J_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new J_(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new J_(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new J_(this.root_,null,this.comparator_,!0,e)}}ba.EMPTY_NODE=new yce;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gce(t,e){return ny(t.name,e.name)}function ZA(t,e){return ny(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TS;function vce(t){TS=t}const I$=function(t){return typeof t=="number"?"number:"+o$(t):"string:"+t},D$=function(t){if(t.isLeafNode()){const e=t.val();nt(typeof e=="string"||typeof e=="number"||typeof e=="object"&&uu(e,".sv"),"Priority must be a string or number.")}else nt(t===TS||t.isEmpty(),"priority of unexpected type.");nt(t===TS||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CO;class Lr{constructor(e,i=Lr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,nt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),D$(this.priorityNode_)}static set __childrenNodeConstructor(e){CO=e}static get __childrenNodeConstructor(){return CO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Lr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Lr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _i(e)?this:mi(e)===".priority"?this.priorityNode_:Lr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:Lr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const n=mi(e);return n===null?i:i.isEmpty()&&n!==".priority"?this:(nt(n!==".priority"||Ud(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,Lr.__childrenNodeConstructor.EMPTY_NODE.updateChild(mn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+I$(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",i==="number"?e+=o$(this.value_):e+=this.value_,this.lazyHash_=r$(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Lr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Lr.__childrenNodeConstructor?-1:(nt(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,n=typeof this.value_,r=Lr.VALUE_TYPE_ORDER.indexOf(i),s=Lr.VALUE_TYPE_ORDER.indexOf(n);return nt(r>=0,"Unknown leaf type: "+i),nt(s>=0,"Unknown leaf type: "+n),r===s?n==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Lr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$,M$;function bce(t){x$=t}function _ce(t){M$=t}class Ece extends bT{compare(e,i){const n=e.node.getPriority(),r=i.node.getPriority(),s=n.compareTo(r);return s===0?ny(e.name,i.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return si.MIN}maxPost(){return new si(Sf,new Lr("[PRIORITY-POST]",M$))}makePost(e,i){const n=x$(e);return new si(i,new Lr("[PRIORITY-POST]",n))}toString(){return".priority"}}const Kn=new Ece;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tce=Math.log(2);class wce{constructor(e){const i=s=>parseInt(Math.log(s)/Tce,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;const r=n(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gE=function(t,e,i,n){t.sort(e);const r=function(c,d){const p=d-c;let m,y;if(p===0)return null;if(p===1)return m=t[c],y=i?i(m):m,new Br(y,m.node,Br.BLACK,null,null);{const _=parseInt(p/2,10)+c,E=r(c,_),C=r(_+1,d);return m=t[_],y=i?i(m):m,new Br(y,m.node,Br.BLACK,E,C)}},s=function(c){let d=null,p=null,m=t.length;const y=function(E,C){const S=m-E,k=m;m-=E;const R=r(S+1,k),O=t[S],I=i?i(O):O;_(new Br(I,O.node,C,null,R))},_=function(E){d?(d.left=E,d=E):(p=E,d=E)};for(let E=0;E<c.count;++E){const C=c.nextBitIsOne(),S=Math.pow(2,c.count-(E+1));C?y(S,Br.BLACK):(y(S,Br.BLACK),y(S,Br.RED))}return p},a=new wce(t.length),o=s(a);return new ba(n||e,o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vw;const Rp={};class Xc{constructor(e,i){this.indexes_=e,this.indexSet_=i}static get Default(){return nt(Rp&&Kn,"ChildrenNode.ts has not been loaded"),Vw=Vw||new Xc({".priority":Rp},{".priority":Kn}),Vw}get(e){const i=Am(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof ba?i:null}hasIndex(e){return uu(this.indexSet_,e.toString())}addIndex(e,i){nt(e!==um,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const s=i.getIterator(si.Wrap);let a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=s.getNext();let o;r?o=gE(n,e.getCompare()):o=Rp;const c=e.toString(),d=Object.assign({},this.indexSet_);d[c]=e;const p=Object.assign({},this.indexes_);return p[c]=o,new Xc(p,d)}addToIndexes(e,i){const n=uE(this.indexes_,(r,s)=>{const a=Am(this.indexSet_,s);if(nt(a,"Missing index implementation for "+s),r===Rp)if(a.isDefinedOn(e.node)){const o=[],c=i.getIterator(si.Wrap);let d=c.getNext();for(;d;)d.name!==e.name&&o.push(d),d=c.getNext();return o.push(e),gE(o,a.getCompare())}else return Rp;else{const o=i.get(e.name);let c=r;return o&&(c=c.remove(new si(e.name,o))),c.insert(e,e.node)}});return new Xc(n,this.indexSet_)}removeFromIndexes(e,i){const n=uE(this.indexes_,r=>{if(r===Rp)return r;{const s=i.get(e.name);return s?r.remove(new si(e.name,s)):r}});return new Xc(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og;class Mt{constructor(e,i,n){this.children_=e,this.priorityNode_=i,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&D$(this.priorityNode_),this.children_.isEmpty()&&nt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return og||(og=new Mt(new ba(ZA),null,Xc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||og}updatePriority(e){return this.children_.isEmpty()?this:new Mt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const i=this.children_.get(e);return i===null?og:i}}getChild(e){const i=mi(e);return i===null?this:this.getImmediateChild(i).getChild(mn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(nt(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{const n=new si(e,i);let r,s;i.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,i),s=this.indexMap_.addToIndexes(n,this.children_));const a=r.isEmpty()?og:this.priorityNode_;return new Mt(r,a,s)}}updateChild(e,i){const n=mi(e);if(n===null)return i;{nt(mi(e)!==".priority"||Ud(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(mn(e),i);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let n=0,r=0,s=!0;if(this.forEachChild(Kn,(a,o)=>{i[a]=o.val(e),n++,s&&Mt.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):s=!1}),!e&&s&&r<2*n){const a=[];for(const o in i)a[o]=i[o];return a}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+I$(this.getPriority().val())+":"),this.forEachChild(Kn,(i,n)=>{const r=n.hash();r!==""&&(e+=":"+i+":"+r)}),this.lazyHash_=e===""?"":r$(e)}return this.lazyHash_}getPredecessorChildName(e,i,n){const r=this.resolveIndex_(n);if(r){const s=r.getPredecessorKey(new si(e,i));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new si(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new si(i,this.children_.get(i)):null}forEachChild(e,i){const n=this.resolveIndex_(e);return n?n.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,si.Wrap);let s=r.peek();for(;s!=null&&i.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,si.Wrap);let s=r.peek();for(;s!=null&&i.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===kb?-1:0}withIndex(e){if(e===um||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new Mt(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===um||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const n=this.getIterator(Kn),r=i.getIterator(Kn);let s=n.getNext(),a=r.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=n.getNext(),a=r.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===um?null:this.indexMap_.get(e.toString())}}Mt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Cce extends Mt{constructor(){super(new ba(ZA),Mt.EMPTY_NODE,Xc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Mt.EMPTY_NODE}isEmpty(){return!1}}const kb=new Cce;Object.defineProperties(si,{MIN:{value:new si(Rm,Mt.EMPTY_NODE)},MAX:{value:new si(Sf,kb)}});R$.__EMPTY_NODE=Mt.EMPTY_NODE;Lr.__childrenNodeConstructor=Mt;vce(kb);_ce(kb);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sce=!0;function Fr(t,e=null){if(t===null)return Mt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),nt(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const i=t;return new Lr(i,Fr(e))}if(!(t instanceof Array)&&Sce){const i=[];let n=!1;if(Mo(t,(a,o)=>{if(a.substring(0,1)!=="."){const c=Fr(o);c.isEmpty()||(n=n||!c.getPriority().isEmpty(),i.push(new si(a,c)))}}),i.length===0)return Mt.EMPTY_NODE;const s=gE(i,gce,a=>a.name,ZA);if(n){const a=gE(i,Kn.getCompare());return new Mt(s,Fr(e),new Xc({".priority":a},{".priority":Kn}))}else return new Mt(s,Fr(e),Xc.Default)}else{let i=Mt.EMPTY_NODE;return Mo(t,(n,r)=>{if(uu(t,n)&&n.substring(0,1)!=="."){const s=Fr(r);(s.isLeafNode()||!s.isEmpty())&&(i=i.updateImmediateChild(n,s))}}),i.updatePriority(Fr(e))}}bce(Fr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kce extends bT{constructor(e){super(),this.indexPath_=e,nt(!_i(e)&&mi(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const n=this.extractChild(e.node),r=this.extractChild(i.node),s=n.compareTo(r);return s===0?ny(e.name,i.name):s}makePost(e,i){const n=Fr(e),r=Mt.EMPTY_NODE.updateChild(this.indexPath_,n);return new si(i,r)}maxPost(){const e=Mt.EMPTY_NODE.updateChild(this.indexPath_,kb);return new si(Sf,e)}toString(){return S$(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ace extends bT{compare(e,i){const n=e.node.compareTo(i.node);return n===0?ny(e.name,i.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return si.MIN}maxPost(){return si.MAX}makePost(e,i){const n=Fr(e);return new si(i,n)}toString(){return".value"}}const Rce=new Ace;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ice(t){return{type:"value",snapshotNode:t}}function Mv(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Pv(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ov(t,e,i){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:i}}function Dce(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.index_=e}updateChild(e,i,n,r,s,a){nt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(i);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()||(a!=null&&(n.isEmpty()?e.hasChild(i)?a.trackChildChange(Pv(i,o)):nt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Mv(i,n)):a.trackChildChange(Ov(i,n,o))),e.isLeafNode()&&n.isEmpty())?e:e.updateImmediateChild(i,n).withIndex(this.index_)}updateFullNode(e,i,n){return n!=null&&(e.isLeafNode()||e.forEachChild(Kn,(r,s)=>{i.hasChild(r)||n.trackChildChange(Pv(r,s))}),i.isLeafNode()||i.forEachChild(Kn,(r,s)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(s)||n.trackChildChange(Ov(r,s,a))}else n.trackChildChange(Mv(r,s))})),i.withIndex(this.index_)}updatePriority(e,i){return e.isEmpty()?Mt.EMPTY_NODE:e.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.indexedFilter_=new QA(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Nv.getStartPost_(e),this.endPost_=Nv.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,i,n,r,s,a){return this.matches(new si(i,n))||(n=Mt.EMPTY_NODE),this.indexedFilter_.updateChild(e,i,n,r,s,a)}updateFullNode(e,i,n){i.isLeafNode()&&(i=Mt.EMPTY_NODE);let r=i.withIndex(this.index_);r=r.updatePriority(Mt.EMPTY_NODE);const s=this;return i.forEachChild(Kn,(a,o)=>{s.matches(new si(a,o))||(r=r.updateImmediateChild(a,Mt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const i=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),i)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const i=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),i)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xce{constructor(e){this.rangedFilter_=new Nv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,i,n,r,s,a){return this.rangedFilter_.matches(new si(i,n))||(n=Mt.EMPTY_NODE),e.getImmediateChild(i).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,i,n,r,s,a):this.fullLimitUpdateChild_(e,i,n,s,a)}updateFullNode(e,i,n){let r;if(i.isLeafNode()||i.isEmpty())r=Mt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){r=Mt.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const o=s.getNext();let c;if(this.reverse_?c=this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:c=this.index_.compare(o,this.rangedFilter_.getEndPost())<=0,c)r=r.updateImmediateChild(o.name,o.node),a++;else break}}else{r=i.withIndex(this.index_),r=r.updatePriority(Mt.EMPTY_NODE);let s,a,o,c;if(this.reverse_){c=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),a=this.rangedFilter_.getStartPost();const m=this.index_.getCompare();o=(y,_)=>m(_,y)}else c=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),a=this.rangedFilter_.getEndPost(),o=this.index_.getCompare();let d=0,p=!1;for(;c.hasNext();){const m=c.getNext();!p&&o(s,m)<=0&&(p=!0),p&&d<this.limit_&&o(m,a)<=0?d++:r=r.updateImmediateChild(m.name,Mt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,i,n,r,s){let a;if(this.reverse_){const m=this.index_.getCompare();a=(y,_)=>m(_,y)}else a=this.index_.getCompare();const o=e;nt(o.numChildren()===this.limit_,"");const c=new si(i,n),d=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),p=this.rangedFilter_.matches(c);if(o.hasChild(i)){const m=o.getImmediateChild(i);let y=r.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===i||o.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);const _=y==null?1:a(y,c);if(p&&!n.isEmpty()&&_>=0)return s!=null&&s.trackChildChange(Ov(i,n,m)),o.updateImmediateChild(i,n);{s!=null&&s.trackChildChange(Pv(i,m));const C=o.updateImmediateChild(i,Mt.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(s!=null&&s.trackChildChange(Mv(y.name,y.node)),C.updateImmediateChild(y.name,y.node)):C}}else return n.isEmpty()?e:p&&a(d,c)>=0?(s!=null&&(s.trackChildChange(Pv(d.name,d.node)),s.trackChildChange(Mv(i,n))),o.updateImmediateChild(i,n).updateImmediateChild(d.name,Mt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return nt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return nt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rm}hasEnd(){return this.endSet_}getIndexEndValue(){return nt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return nt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return nt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){const e=new JA;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Mce(t){return t.loadsAllData()?new QA(t.getIndex()):t.hasLimit()?new xce(t):new Nv(t)}function SO(t){const e={};if(t.isDefault())return e;let i;return t.index_===Kn?i="$priority":t.index_===Rce?i="$value":t.index_===um?i="$key":(nt(t.index_ instanceof kce,"Unrecognized index type!"),i=t.index_.toString()),e.orderBy=$r(i),t.startSet_&&(e.startAt=$r(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+$r(t.indexStartName_))),t.endSet_&&(e.endAt=$r(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+$r(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function kO(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let i=t.viewFrom_;i===""&&(t.isViewFromLeft()?i="l":i="r"),e.vf=i}return t.index_!==Kn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE extends T${constructor(e,i,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Sb("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(nt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,i,n,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=vE.getListenId_(e,n),o={};this.listens_[a]=o;const c=SO(e._queryParams);this.restRequest_(s+".json",c,(d,p)=>{let m=p;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,n),Am(this.listens_,a)===o){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",r(y,null)}})}unlisten(e,i){const n=vE.getListenId_(e,i);delete this.listens_[n]}get(e){const i=SO(e._queryParams),n=e._path.toString(),r=new DA;return this.restRequest_(n+".json",i,(s,a)=>{let o=a;s===404&&(o=null,s=null),s===null?(this.onDataUpdate_(n,o,!1,null),r.resolve(o)):r.reject(new Error(o))}),r.promise}refreshAuthToken(e){}restRequest_(e,i={},n){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(i.auth=r.accessToken),s&&s.token&&(i.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ty(i);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&o.readyState===4){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let c=null;if(o.status>=200&&o.status<300){try{c=kv(o.responseText)}catch{_a("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,c)}else o.status!==401&&o.status!==404&&_a("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pce{constructor(){this.rootNode_=Mt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(){return{value:null,children:new Map}}function P$(t,e,i){if(_i(e))t.value=i,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,i);else{const n=mi(e);t.children.has(n)||t.children.set(n,bE());const r=t.children.get(n);e=mn(e),P$(r,e,i)}}function wS(t,e,i){t.value!==null?i(e,t.value):Oce(t,(n,r)=>{const s=new tn(e.toString()+"/"+n);wS(r,s,i)})}function Oce(t,e){t.children.forEach((i,n)=>{e(n,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nce{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i=Object.assign({},e);return this.last_&&Mo(this.last_,(n,r)=>{i[n]=i[n]-r}),this.last_=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=10*1e3,Gce=30*1e3,Uce=5*60*1e3;class Lce{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new Nce(e);const n=AO+(Gce-AO)*Math.random();Qg(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),i={};let n=!1;Mo(e,(r,s)=>{s>0&&uu(this.statsToReport_,r)&&(i[r]=s,n=!0)}),n&&this.server_.reportStats(i),Qg(this.reportStats_.bind(this),Math.floor(Math.random()*2*Uce))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ec||(ec={}));function O$(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function N$(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function G$(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,i,n){this.path=e,this.affectedTree=i,this.revert=n,this.type=ec.ACK_USER_WRITE,this.source=O$()}operationForChild(e){if(_i(this.path)){if(this.affectedTree.value!=null)return nt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new tn(e));return new _E(Li(),i,this.revert)}}else return nt(mi(this.path)===e,"operationForChild called for unrelated child."),new _E(mn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,i,n){this.source=e,this.path=i,this.snap=n,this.type=ec.OVERWRITE}operationForChild(e){return _i(this.path)?new kf(this.source,Li(),this.snap.getImmediateChild(e)):new kf(this.source,mn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,i,n){this.source=e,this.path=i,this.children=n,this.type=ec.MERGE}operationForChild(e){if(_i(this.path)){const i=this.children.subtree(new tn(e));return i.isEmpty()?null:i.value?new kf(this.source,Li(),i.value):new Gv(this.source,Li(),i)}else return nt(mi(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gv(this.source,mn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,i,n){this.node_=e,this.fullyInitialized_=i,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_i(e))return this.isFullyInitialized()&&!this.filtered_;const i=mi(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bce{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Fce(t,e,i,n){const r=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(Dce(a.childName,a.snapshotNode))}),lg(t,r,"child_removed",e,n,i),lg(t,r,"child_added",e,n,i),lg(t,r,"child_moved",s,n,i),lg(t,r,"child_changed",e,n,i),lg(t,r,"value",e,n,i),r}function lg(t,e,i,n,r,s){const a=n.filter(o=>o.type===i);a.sort((o,c)=>Hce(t,o,c)),a.forEach(o=>{const c=$ce(t,o,s);r.forEach(d=>{d.respondsTo(o.type)&&e.push(d.createEvent(c,t.query_))})})}function $ce(t,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Hce(t,e,i){if(e.childName==null||i.childName==null)throw Jm("Should only compare child_ events.");const n=new si(e.childName,e.snapshotNode),r=new si(i.childName,i.snapshotNode);return t.index_.compare(n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t,e){return{eventCache:t,serverCache:e}}function Jg(t,e,i,n){return _T(new Ld(e,i,n),t.serverCache)}function U$(t,e,i,n){return _T(t.eventCache,new Ld(e,i,n))}function EE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Af(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qw;const Vce=()=>(qw||(qw=new ba(Sle)),qw);class pn{constructor(e,i=Vce()){this.value=e,this.children=i}static fromObject(e){let i=new pn(null);return Mo(e,(n,r)=>{i=i.set(new tn(n),r)}),i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:Li(),value:this.value};if(_i(e))return null;{const n=mi(e),r=this.children.get(n);if(r!==null){const s=r.findRootMostMatchingPathAndValue(mn(e),i);return s!=null?{path:Sr(new tn(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_i(e))return this;{const i=mi(e),n=this.children.get(i);return n!==null?n.subtree(mn(e)):new pn(null)}}set(e,i){if(_i(e))return new pn(i,this.children);{const n=mi(e),s=(this.children.get(n)||new pn(null)).set(mn(e),i),a=this.children.insert(n,s);return new pn(this.value,a)}}remove(e){if(_i(e))return this.children.isEmpty()?new pn(null):new pn(null,this.children);{const i=mi(e),n=this.children.get(i);if(n){const r=n.remove(mn(e));let s;return r.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,r),this.value===null&&s.isEmpty()?new pn(null):new pn(this.value,s)}else return this}}get(e){if(_i(e))return this.value;{const i=mi(e),n=this.children.get(i);return n?n.get(mn(e)):null}}setTree(e,i){if(_i(e))return i;{const n=mi(e),s=(this.children.get(n)||new pn(null)).setTree(mn(e),i);let a;return s.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,s),new pn(this.value,a)}}fold(e){return this.fold_(Li(),e)}fold_(e,i){const n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(Sr(e,r),i)}),i(e,this.value,n)}findOnPath(e,i){return this.findOnPath_(e,Li(),i)}findOnPath_(e,i,n){const r=this.value?n(i,this.value):!1;if(r)return r;if(_i(e))return null;{const s=mi(e),a=this.children.get(s);return a?a.findOnPath_(mn(e),Sr(i,s),n):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,Li(),i)}foreachOnPath_(e,i,n){if(_i(e))return this;{this.value&&n(i,this.value);const r=mi(e),s=this.children.get(r);return s?s.foreachOnPath_(mn(e),Sr(i,r),n):new pn(null)}}foreach(e){this.foreach_(Li(),e)}foreach_(e,i){this.children.inorderTraversal((n,r)=>{r.foreach_(Sr(e,n),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,n)=>{n.value&&e(i,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.writeTree_=e}static empty(){return new ul(new pn(null))}}function ev(t,e,i){if(_i(e))return new ul(new pn(i));{const n=t.writeTree_.findRootMostValueAndPath(e);if(n!=null){const r=n.path;let s=n.value;const a=eo(r,e);return s=s.updateChild(a,i),new ul(t.writeTree_.set(r,s))}else{const r=new pn(i),s=t.writeTree_.setTree(e,r);return new ul(s)}}}function RO(t,e,i){let n=t;return Mo(i,(r,s)=>{n=ev(n,Sr(e,r),s)}),n}function IO(t,e){if(_i(e))return ul.empty();{const i=t.writeTree_.setTree(e,new pn(null));return new ul(i)}}function CS(t,e){return Xf(t,e)!=null}function Xf(t,e){const i=t.writeTree_.findRootMostValueAndPath(e);return i!=null?t.writeTree_.get(i.path).getChild(eo(i.path,e)):null}function DO(t){const e=[],i=t.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Kn,(n,r)=>{e.push(new si(n,r))}):t.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&e.push(new si(n,r.value))}),e}function kd(t,e){if(_i(e))return t;{const i=Xf(t,e);return i!=null?new ul(new pn(i)):new ul(t.writeTree_.subtree(e))}}function SS(t){return t.writeTree_.isEmpty()}function Im(t,e){return L$(Li(),t.writeTree_,e)}function L$(t,e,i){if(e.value!=null)return i.updateChild(t,e.value);{let n=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(nt(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):i=L$(Sr(t,r),s,i)}),!i.getChild(t).isEmpty()&&n!==null&&(i=i.updateChild(Sr(t,".priority"),n)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t,e){return H$(e,t)}function qce(t,e,i,n,r){nt(n>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:i,writeId:n,visible:r}),r&&(t.visibleWrites=ev(t.visibleWrites,e,i)),t.lastWriteId=n}function Yce(t,e){for(let i=0;i<t.allWrites.length;i++){const n=t.allWrites[i];if(n.writeId===e)return n}return null}function Wce(t,e){const i=t.allWrites.findIndex(o=>o.writeId===e);nt(i>=0,"removeWrite called with nonexistent writeId.");const n=t.allWrites[i];t.allWrites.splice(i,1);let r=n.visible,s=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const o=t.allWrites[a];o.visible&&(a>=i&&jce(o,n.path)?r=!1:ol(n.path,o.path)&&(s=!0)),a--}if(r){if(s)return zce(t),!0;if(n.snap)t.visibleWrites=IO(t.visibleWrites,n.path);else{const o=n.children;Mo(o,c=>{t.visibleWrites=IO(t.visibleWrites,Sr(n.path,c))})}return!0}else return!1}function jce(t,e){if(t.snap)return ol(t.path,e);for(const i in t.children)if(t.children.hasOwnProperty(i)&&ol(Sr(t.path,i),e))return!0;return!1}function zce(t){t.visibleWrites=B$(t.allWrites,Xce,Li()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Xce(t){return t.visible}function B$(t,e,i){let n=ul.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const a=s.path;let o;if(s.snap)ol(i,a)?(o=eo(i,a),n=ev(n,o,s.snap)):ol(a,i)&&(o=eo(a,i),n=ev(n,Li(),s.snap.getChild(o)));else if(s.children){if(ol(i,a))o=eo(i,a),n=RO(n,o,s.children);else if(ol(a,i))if(o=eo(a,i),_i(o))n=RO(n,Li(),s.children);else{const c=Am(s.children,mi(o));if(c){const d=c.getChild(mn(o));n=ev(n,Li(),d)}}}else throw Jm("WriteRecord should have .snap or .children")}}return n}function F$(t,e,i,n,r){if(!n&&!r){const s=Xf(t.visibleWrites,e);if(s!=null)return s;{const a=kd(t.visibleWrites,e);if(SS(a))return i;if(i==null&&!CS(a,Li()))return null;{const o=i||Mt.EMPTY_NODE;return Im(a,o)}}}else{const s=kd(t.visibleWrites,e);if(!r&&SS(s))return i;if(!r&&i==null&&!CS(s,Li()))return null;{const a=function(d){return(d.visible||r)&&(!n||!~n.indexOf(d.writeId))&&(ol(d.path,e)||ol(e,d.path))},o=B$(t.allWrites,a,e),c=i||Mt.EMPTY_NODE;return Im(o,c)}}}function Kce(t,e,i){let n=Mt.EMPTY_NODE;const r=Xf(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Kn,(s,a)=>{n=n.updateImmediateChild(s,a)}),n;if(i){const s=kd(t.visibleWrites,e);return i.forEachChild(Kn,(a,o)=>{const c=Im(kd(s,new tn(a)),o);n=n.updateImmediateChild(a,c)}),DO(s).forEach(a=>{n=n.updateImmediateChild(a.name,a.node)}),n}else{const s=kd(t.visibleWrites,e);return DO(s).forEach(a=>{n=n.updateImmediateChild(a.name,a.node)}),n}}function Zce(t,e,i,n,r){nt(n||r,"Either existingEventSnap or existingServerSnap must exist");const s=Sr(e,i);if(CS(t.visibleWrites,s))return null;{const a=kd(t.visibleWrites,s);return SS(a)?r.getChild(i):Im(a,r.getChild(i))}}function Qce(t,e,i,n){const r=Sr(e,i),s=Xf(t.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(i)){const a=kd(t.visibleWrites,r);return Im(a,n.getNode().getImmediateChild(i))}else return null}function Jce(t,e){return Xf(t.visibleWrites,e)}function eue(t,e,i,n,r,s,a){let o;const c=kd(t.visibleWrites,e),d=Xf(c,Li());if(d!=null)o=d;else if(i!=null)o=Im(c,i);else return[];if(o=o.withIndex(a),!o.isEmpty()&&!o.isLeafNode()){const p=[],m=a.getCompare(),y=s?o.getReverseIteratorFrom(n,a):o.getIteratorFrom(n,a);let _=y.getNext();for(;_&&p.length<r;)m(_,n)!==0&&p.push(_),_=y.getNext();return p}else return[]}function tue(){return{visibleWrites:ul.empty(),allWrites:[],lastWriteId:-1}}function TE(t,e,i,n){return F$(t.writeTree,t.treePath,e,i,n)}function tR(t,e){return Kce(t.writeTree,t.treePath,e)}function xO(t,e,i,n){return Zce(t.writeTree,t.treePath,e,i,n)}function wE(t,e){return Jce(t.writeTree,Sr(t.treePath,e))}function iue(t,e,i,n,r,s){return eue(t.writeTree,t.treePath,e,i,n,r,s)}function iR(t,e,i){return Qce(t.writeTree,t.treePath,e,i)}function $$(t,e){return H$(Sr(t.treePath,e),t.writeTree)}function H$(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nue{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,n=e.childName;nt(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),nt(n!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const s=r.type;if(i==="child_added"&&s==="child_removed")this.changeMap.set(n,Ov(n,e.snapshotNode,r.snapshotNode));else if(i==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(i==="child_removed"&&s==="child_changed")this.changeMap.set(n,Pv(n,r.oldSnap));else if(i==="child_changed"&&s==="child_added")this.changeMap.set(n,Mv(n,e.snapshotNode));else if(i==="child_changed"&&s==="child_changed")this.changeMap.set(n,Ov(n,e.snapshotNode,r.oldSnap));else throw Jm("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rue{getCompleteChild(e){return null}getChildAfterChild(e,i,n){return null}}const V$=new rue;class nR{constructor(e,i,n=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=n}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const n=this.optCompleteServerCache_!=null?new Ld(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return iR(this.writes_,e,n)}}getChildAfterChild(e,i,n){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Af(this.viewCache_),s=iue(this.writes_,r,i,1,n,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sue(t){return{filter:t}}function aue(t,e){nt(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),nt(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oue(t,e,i,n,r){const s=new nue;let a,o;if(i.type===ec.OVERWRITE){const d=i;d.source.fromUser?a=kS(t,e,d.path,d.snap,n,r,s):(nt(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered()&&!_i(d.path),a=CE(t,e,d.path,d.snap,n,r,o,s))}else if(i.type===ec.MERGE){const d=i;d.source.fromUser?a=cue(t,e,d.path,d.children,n,r,s):(nt(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered(),a=AS(t,e,d.path,d.children,n,r,o,s))}else if(i.type===ec.ACK_USER_WRITE){const d=i;d.revert?a=hue(t,e,d.path,n,r,s):a=uue(t,e,d.path,d.affectedTree,n,r,s)}else if(i.type===ec.LISTEN_COMPLETE)a=due(t,e,i.path,n,s);else throw Jm("Unknown operation type: "+i.type);const c=s.getChanges();return lue(e,a,c),{viewCache:a,changes:c}}function lue(t,e,i){const n=e.eventCache;if(n.isFullyInitialized()){const r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=EE(t);(i.length>0||!t.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&i.push(Ice(EE(e)))}}function q$(t,e,i,n,r,s){const a=e.eventCache;if(wE(n,i)!=null)return e;{let o,c;if(_i(i))if(nt(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Af(e),p=d instanceof Mt?d:Mt.EMPTY_NODE,m=tR(n,p);o=t.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const d=TE(n,Af(e));o=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const d=mi(i);if(d===".priority"){nt(Ud(i)===1,"Can't have a priority with additional path components");const p=a.getNode();c=e.serverCache.getNode();const m=xO(n,i,p,c);m!=null?o=t.filter.updatePriority(p,m):o=a.getNode()}else{const p=mn(i);let m;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();const y=xO(n,i,a.getNode(),c);y!=null?m=a.getNode().getImmediateChild(d).updateChild(p,y):m=a.getNode().getImmediateChild(d)}else m=iR(n,d,e.serverCache);m!=null?o=t.filter.updateChild(a.getNode(),d,m,p,r,s):o=a.getNode()}}return Jg(e,o,a.isFullyInitialized()||_i(i),t.filter.filtersNodes())}}function CE(t,e,i,n,r,s,a,o){const c=e.serverCache;let d;const p=a?t.filter:t.filter.getIndexedFilter();if(_i(i))d=p.updateFullNode(c.getNode(),n,null);else if(p.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(i,n);d=p.updateFullNode(c.getNode(),_,null)}else{const _=mi(i);if(!c.isCompleteForPath(i)&&Ud(i)>1)return e;const E=mn(i),S=c.getNode().getImmediateChild(_).updateChild(E,n);_===".priority"?d=p.updatePriority(c.getNode(),S):d=p.updateChild(c.getNode(),_,S,E,V$,null)}const m=U$(e,d,c.isFullyInitialized()||_i(i),p.filtersNodes()),y=new nR(r,m,s);return q$(t,m,i,r,y,o)}function kS(t,e,i,n,r,s,a){const o=e.eventCache;let c,d;const p=new nR(r,e,s);if(_i(i))d=t.filter.updateFullNode(e.eventCache.getNode(),n,a),c=Jg(e,d,!0,t.filter.filtersNodes());else{const m=mi(i);if(m===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),n),c=Jg(e,d,o.isFullyInitialized(),o.isFiltered());else{const y=mn(i),_=o.getNode().getImmediateChild(m);let E;if(_i(y))E=n;else{const C=p.getCompleteChild(m);C!=null?C$(y)===".priority"&&C.getChild(k$(y)).isEmpty()?E=C:E=C.updateChild(y,n):E=Mt.EMPTY_NODE}if(_.equals(E))c=e;else{const C=t.filter.updateChild(o.getNode(),m,E,y,p,a);c=Jg(e,C,o.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function MO(t,e){return t.eventCache.isCompleteForChild(e)}function cue(t,e,i,n,r,s,a){let o=e;return n.foreach((c,d)=>{const p=Sr(i,c);MO(e,mi(p))&&(o=kS(t,o,p,d,r,s,a))}),n.foreach((c,d)=>{const p=Sr(i,c);MO(e,mi(p))||(o=kS(t,o,p,d,r,s,a))}),o}function PO(t,e,i){return i.foreach((n,r)=>{e=e.updateChild(n,r)}),e}function AS(t,e,i,n,r,s,a,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,d;_i(i)?d=n:d=new pn(null).setTree(i,n);const p=e.serverCache.getNode();return d.children.inorderTraversal((m,y)=>{if(p.hasChild(m)){const _=e.serverCache.getNode().getImmediateChild(m),E=PO(t,_,y);c=CE(t,c,new tn(m),E,r,s,a,o)}}),d.children.inorderTraversal((m,y)=>{const _=!e.serverCache.isCompleteForChild(m)&&y.value===void 0;if(!p.hasChild(m)&&!_){const E=e.serverCache.getNode().getImmediateChild(m),C=PO(t,E,y);c=CE(t,c,new tn(m),C,r,s,a,o)}}),c}function uue(t,e,i,n,r,s,a){if(wE(r,i)!=null)return e;const o=e.serverCache.isFiltered(),c=e.serverCache;if(n.value!=null){if(_i(i)&&c.isFullyInitialized()||c.isCompleteForPath(i))return CE(t,e,i,c.getNode().getChild(i),r,s,o,a);if(_i(i)){let d=new pn(null);return c.getNode().forEachChild(um,(p,m)=>{d=d.set(new tn(p),m)}),AS(t,e,i,d,r,s,o,a)}else return e}else{let d=new pn(null);return n.foreach((p,m)=>{const y=Sr(i,p);c.isCompleteForPath(y)&&(d=d.set(p,c.getNode().getChild(y)))}),AS(t,e,i,d,r,s,o,a)}}function due(t,e,i,n,r){const s=e.serverCache,a=U$(e,s.getNode(),s.isFullyInitialized()||_i(i),s.isFiltered());return q$(t,a,i,n,V$,r)}function hue(t,e,i,n,r,s){let a;if(wE(n,i)!=null)return e;{const o=new nR(n,e,r),c=e.eventCache.getNode();let d;if(_i(i)||mi(i)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=TE(n,Af(e));else{const m=e.serverCache.getNode();nt(m instanceof Mt,"serverChildren would be complete if leaf node"),p=tR(n,m)}p=p,d=t.filter.updateFullNode(c,p,s)}else{const p=mi(i);let m=iR(n,p,e.serverCache);m==null&&e.serverCache.isCompleteForChild(p)&&(m=c.getImmediateChild(p)),m!=null?d=t.filter.updateChild(c,p,m,mn(i),o,s):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(c,p,Mt.EMPTY_NODE,mn(i),o,s):d=c,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=TE(n,Af(e)),a.isLeafNode()&&(d=t.filter.updateFullNode(d,a,s)))}return a=e.serverCache.isFullyInitialized()||wE(n,Li())!=null,Jg(e,d,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fue{constructor(e,i){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new QA(n.getIndex()),s=Mce(n);this.processor_=sue(s);const a=i.serverCache,o=i.eventCache,c=r.updateFullNode(Mt.EMPTY_NODE,a.getNode(),null),d=s.updateFullNode(Mt.EMPTY_NODE,o.getNode(),null),p=new Ld(c,a.isFullyInitialized(),r.filtersNodes()),m=new Ld(d,o.isFullyInitialized(),s.filtersNodes());this.viewCache_=_T(m,p),this.eventGenerator_=new Bce(this.query_)}get query(){return this.query_}}function pue(t){return EE(t.viewCache_)}function mue(t,e){const i=Af(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!_i(e)&&!i.getImmediateChild(mi(e)).isEmpty())?i.getChild(e):null}function OO(t,e,i,n){e.type===ec.MERGE&&e.source.queryId!==null&&(nt(Af(t.viewCache_),"We should always have a full cache before handling merges"),nt(EE(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=oue(t.processor_,r,e,i,n);return aue(t.processor_,s.viewCache),nt(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,yue(t,s.changes,s.viewCache.eventCache.getNode())}function yue(t,e,i,n){const r=t.eventRegistrations_;return Fce(t.eventGenerator_,e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NO;class gue{constructor(){this.views=new Map}}function vue(t){nt(!NO,"__referenceConstructor has already been defined"),NO=t}function rR(t,e,i,n){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return nt(s!=null,"SyncTree gave us an op for an invalid query."),OO(s,e,i,n)}else{let s=[];for(const a of t.views.values())s=s.concat(OO(a,e,i,n));return s}}function bue(t,e,i,n,r){const s=e._queryIdentifier,a=t.views.get(s);if(!a){let o=TE(i,r?n:null),c=!1;o?c=!0:n instanceof Mt?(o=tR(i,n),c=!1):(o=Mt.EMPTY_NODE,c=!1);const d=_T(new Ld(o,c,!1),new Ld(n,r,!1));return new fue(e,d)}return a}function Uv(t,e){let i=null;for(const n of t.views.values())i=i||mue(n,e);return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GO;function _ue(t){nt(!GO,"__referenceConstructor has already been defined"),GO=t}class UO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pn(null),this.pendingWriteTree_=tue(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Y$(t,e,i,n,r){return qce(t.pendingWriteTree_,e,i,n,r),r?ET(t,new kf(O$(),e,i)):[]}function Xh(t,e,i=!1){const n=Yce(t.pendingWriteTree_,e);if(Wce(t.pendingWriteTree_,e)){let s=new pn(null);return n.snap!=null?s=s.set(Li(),!0):Mo(n.children,a=>{s=s.set(new tn(a),!0)}),ET(t,new _E(n.path,s,i))}else return[]}function Ab(t,e,i){return ET(t,new kf(N$(),e,i))}function Eue(t,e,i){const n=pn.fromObject(i);return ET(t,new Gv(N$(),e,n))}function Tue(t,e,i,n){const r=z$(t,n);if(r!=null){const s=X$(r),a=s.path,o=s.queryId,c=eo(a,e),d=new kf(G$(o),c,i);return K$(t,a,d)}else return[]}function wue(t,e,i,n){const r=z$(t,n);if(r){const s=X$(r),a=s.path,o=s.queryId,c=eo(a,e),d=pn.fromObject(i),p=new Gv(G$(o),c,d);return K$(t,a,p)}else return[]}function sR(t,e,i){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,o)=>{const c=eo(a,e),d=Uv(o,c);if(d)return d});return F$(r,e,s,i,!0)}function Cue(t,e){const i=e._path;let n=null;t.syncPointTree_.foreachOnPath(i,(d,p)=>{const m=eo(d,i);n=n||Uv(p,m)});let r=t.syncPointTree_.get(i);r?n=n||Uv(r,Li()):(r=new gue,t.syncPointTree_=t.syncPointTree_.set(i,r));const s=n!=null,a=s?new Ld(n,!0,!1):null,o=eR(t.pendingWriteTree_,e._path),c=bue(r,e,o,s?a.getNode():Mt.EMPTY_NODE,s);return pue(c)}function ET(t,e){return W$(e,t.syncPointTree_,null,eR(t.pendingWriteTree_,Li()))}function W$(t,e,i,n){if(_i(t.path))return j$(t,e,i,n);{const r=e.get(Li());i==null&&r!=null&&(i=Uv(r,Li()));let s=[];const a=mi(t.path),o=t.operationForChild(a),c=e.children.get(a);if(c&&o){const d=i?i.getImmediateChild(a):null,p=$$(n,a);s=s.concat(W$(o,c,d,p))}return r&&(s=s.concat(rR(r,t,n,i))),s}}function j$(t,e,i,n){const r=e.get(Li());i==null&&r!=null&&(i=Uv(r,Li()));let s=[];return e.children.inorderTraversal((a,o)=>{const c=i?i.getImmediateChild(a):null,d=$$(n,a),p=t.operationForChild(a);p&&(s=s.concat(j$(p,o,c,d)))}),r&&(s=s.concat(rR(r,t,n,i))),s}function z$(t,e){return t.tagToQueryMap.get(e)}function X$(t){const e=t.indexOf("$");return nt(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new tn(t.substr(0,e))}}function K$(t,e,i){const n=t.syncPointTree_.get(e);nt(n,"Missing sync point for query tag that we're tracking");const r=eR(t.pendingWriteTree_,e);return rR(n,i,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new aR(i)}node(){return this.node_}}class oR{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=Sr(this.path_,e);return new oR(this.syncTree_,i)}node(){return sR(this.syncTree_,this.path_)}}const Sue=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},LO=function(t,e,i){if(!t||typeof t!="object")return t;if(nt(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return kue(t[".sv"],e,i);if(typeof t[".sv"]=="object")return Aue(t[".sv"],e);nt(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},kue=function(t,e,i){switch(t){case"timestamp":return i.timestamp;default:nt(!1,"Unexpected server value: "+t)}},Aue=function(t,e,i){t.hasOwnProperty("increment")||nt(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const n=t.increment;typeof n!="number"&&nt(!1,"Unexpected increment value: "+n);const r=e.node();if(nt(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;const a=r.getValue();return typeof a!="number"?n:a+n},Rue=function(t,e,i,n){return lR(e,new oR(i,t),n)},Z$=function(t,e,i){return lR(t,new aR(e),i)};function lR(t,e,i){const n=t.getPriority().val(),r=LO(n,e.getImmediateChild(".priority"),i);let s;if(t.isLeafNode()){const a=t,o=LO(a.getValue(),e,i);return o!==a.getValue()||r!==a.getPriority().val()?new Lr(o,Fr(r)):t}else{const a=t;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new Lr(r))),a.forEachChild(Kn,(o,c)=>{const d=lR(c,e.getImmediateChild(o),i);d!==c&&(s=s.updateImmediateChild(o,d))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e="",i=null,n={children:{},childCount:0}){this.name=e,this.parent=i,this.node=n}}function uR(t,e){let i=e instanceof tn?e:new tn(e),n=t,r=mi(i);for(;r!==null;){const s=Am(n.node.children,r)||{children:{},childCount:0};n=new cR(r,n,s),i=mn(i),r=mi(i)}return n}function sy(t){return t.node.value}function Q$(t,e){t.node.value=e,RS(t)}function J$(t){return t.node.childCount>0}function Iue(t){return sy(t)===void 0&&!J$(t)}function TT(t,e){Mo(t.node.children,(i,n)=>{e(new cR(i,t,n))})}function e3(t,e,i,n){i&&!n&&e(t),TT(t,r=>{e3(r,e,!0,n)}),i&&n&&e(t)}function Due(t,e,i){let n=t.parent;for(;n!==null;){if(e(n))return!0;n=n.parent}return!1}function Rb(t){return new tn(t.parent===null?t.name:Rb(t.parent)+"/"+t.name)}function RS(t){t.parent!==null&&xue(t.parent,t.name,t)}function xue(t,e,i){const n=Iue(i),r=uu(t.node.children,e);n&&r?(delete t.node.children[e],t.node.childCount--,RS(t)):!n&&!r&&(t.node.children[e]=i.node,t.node.childCount++,RS(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mue=/[\[\].#$\/\u0000-\u001F\u007F]/,Pue=/[\[\].#$\u0000-\u001F\u007F]/,Yw=10*1024*1024,t3=function(t){return typeof t=="string"&&t.length!==0&&!Mue.test(t)},i3=function(t){return typeof t=="string"&&t.length!==0&&!Pue.test(t)},Oue=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),i3(t)},Nue=function(t,e,i,n){dR(MA(t,"value"),e,i)},dR=function(t,e,i){const n=i instanceof tn?new lce(i,t):i;if(e===void 0)throw new Error(t+"contains undefined "+Ph(n));if(typeof e=="function")throw new Error(t+"contains a function "+Ph(n)+" with contents = "+e.toString());if(s$(e))throw new Error(t+"contains "+e.toString()+" "+Ph(n));if(typeof e=="string"&&e.length>Yw/3&&mT(e)>Yw)throw new Error(t+"contains a string greater than "+Yw+" utf8 bytes "+Ph(n)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Mo(e,(a,o)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!t3(a)))throw new Error(t+" contains an invalid key ("+a+") "+Ph(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);cce(n,a),dR(t,o,n),uce(n)}),r&&s)throw new Error(t+' contains ".value" child '+Ph(n)+" in addition to actual children.")}},n3=function(t,e,i,n){if(!i3(i))throw new Error(MA(t,e)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Gue=function(t,e,i,n){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),n3(t,e,i)},Uue=function(t,e){if(mi(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Lue=function(t,e){const i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!t3(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!Oue(i))throw new Error(MA(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hR(t,e){let i=null;for(let n=0;n<e.length;n++){const r=e[n],s=r.getPath();i!==null&&!XA(s,i.path)&&(t.eventLists_.push(i),i=null),i===null&&(i={events:[],path:s}),i.events.push(r)}i&&t.eventLists_.push(i)}function Fue(t,e,i){hR(t,i),r3(t,n=>XA(n,e))}function nu(t,e,i){hR(t,i),r3(t,n=>ol(n,e)||ol(e,n))}function r3(t,e){t.recursionDepth_++;let i=!0;for(let n=0;n<t.eventLists_.length;n++){const r=t.eventLists_[n];if(r){const s=r.path;e(s)?($ue(t.eventLists_[n]),t.eventLists_[n]=null):i=!1}}i&&(t.eventLists_=[]),t.recursionDepth_--}function $ue(t){for(let e=0;e<t.events.length;e++){const i=t.events[e];if(i!==null){t.events[e]=null;const n=i.getEventRunner();Zg&&Ts("event: "+i.toString()),ry(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hue="repo_interrupt",que=25;class Yue{constructor(e,i,n,r){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bE(),this.transactionQueueTree_=new cR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Wue(t,e,i){if(t.stats_=WA(t.repoInfo_),t.forceRestClient_||xle())t.server_=new vE(t.repoInfo_,(n,r,s,a)=>{BO(t,n,r,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>FO(t,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$r(i)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new eu(t.repoInfo_,e,(n,r,s,a)=>{BO(t,n,r,s,a)},n=>{FO(t,n)},n=>{zue(t,n)},t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=Lle(t.repoInfo_,()=>new Lce(t.stats_,t.server_)),t.infoData_=new Pce,t.infoSyncTree_=new UO({startListening:(n,r,s,a)=>{let o=[];const c=t.infoData_.getNode(n._path);return c.isEmpty()||(o=Ab(t.infoSyncTree_,n._path,c),setTimeout(()=>{a("ok")},0)),o},stopListening:()=>{}}),pR(t,"connected",!1),t.serverSyncTree_=new UO({startListening:(n,r,s,a)=>(t.server_.listen(n,s,r,(o,c)=>{const d=a(o,c);nu(t.eventQueue_,n._path,d)}),[]),stopListening:(n,r)=>{t.server_.unlisten(n,r)}})}function jue(t){const i=t.infoData_.getNode(new tn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function fR(t){return Sue({timestamp:jue(t)})}function BO(t,e,i,n,r){t.dataUpdateCount++;const s=new tn(e);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,i):i;let a=[];if(r)if(n){const c=uE(i,d=>Fr(d));a=wue(t.serverSyncTree_,s,c,r)}else{const c=Fr(i);a=Tue(t.serverSyncTree_,s,c,r)}else if(n){const c=uE(i,d=>Fr(d));a=Eue(t.serverSyncTree_,s,c)}else{const c=Fr(i);a=Ab(t.serverSyncTree_,s,c)}let o=s;a.length>0&&(o=CT(t,s)),nu(t.eventQueue_,o,a)}function FO(t,e){pR(t,"connected",e),e===!1&&Zue(t)}function zue(t,e){Mo(e,(i,n)=>{pR(t,i,n)})}function pR(t,e,i){const n=new tn("/.info/"+e),r=Fr(i);t.infoData_.updateSnapshot(n,r);const s=Ab(t.infoSyncTree_,n,r);nu(t.eventQueue_,n,s)}function s3(t){return t.nextWriteId_++}function Xue(t,e){const i=Cue(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(n=>{const r=Fr(n).withIndex(e._queryParams.getIndex()),s=Ab(t.serverSyncTree_,e._path,r);return Fue(t.eventQueue_,e._path,s),Promise.resolve(r)},n=>(wT(t,"get for query "+$r(e)+" failed: "+n),Promise.reject(new Error(n))))}function Kue(t,e,i,n,r){wT(t,"set",{path:e.toString(),value:i,priority:n});const s=fR(t),a=Fr(i,n),o=sR(t.serverSyncTree_,e),c=Z$(a,o,s),d=s3(t),p=Y$(t.serverSyncTree_,e,c,d,!0);hR(t.eventQueue_,p),t.server_.put(e.toString(),a.val(!0),(y,_)=>{const E=y==="ok";E||_a("set at "+e+" failed: "+y);const C=Xh(t.serverSyncTree_,d,!E);nu(t.eventQueue_,e,C),Jue(t,r,y,_)});const m=u3(t,e);CT(t,m),nu(t.eventQueue_,m,[])}function Zue(t){wT(t,"onDisconnectEvents");const e=fR(t),i=bE();wS(t.onDisconnect_,Li(),(r,s)=>{const a=Rue(r,s,t.serverSyncTree_,e);P$(i,r,a)});let n=[];wS(i,Li(),(r,s)=>{n=n.concat(Ab(t.serverSyncTree_,r,s));const a=u3(t,r);CT(t,a)}),t.onDisconnect_=bE(),nu(t.eventQueue_,Li(),n)}function Que(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Hue)}function wT(t,...e){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),Ts(i,...e)}function Jue(t,e,i,n){e&&ry(()=>{if(i==="ok")e(null);else{const r=(i||"error").toUpperCase();let s=r;n&&(s+=": "+n);const a=new Error(s);a.code=r,e(a)}})}function a3(t,e,i){return sR(t.serverSyncTree_,e,i)||Mt.EMPTY_NODE}function mR(t,e=t.transactionQueueTree_){if(e||ST(t,e),sy(e)){const i=l3(t,e);nt(i.length>0,"Sending zero length transaction queue"),i.every(r=>r.status===0)&&ede(t,Rb(e),i)}else J$(e)&&TT(e,i=>{mR(t,i)})}function ede(t,e,i){const n=i.map(d=>d.currentWriteId),r=a3(t,e,n);let s=r;const a=r.hash();for(let d=0;d<i.length;d++){const p=i[d];nt(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const m=eo(e,p.path);s=s.updateChild(m,p.currentOutputSnapshotRaw)}const o=s.val(!0),c=e;t.server_.put(c.toString(),o,d=>{wT(t,"transaction put response",{path:c.toString(),status:d});let p=[];if(d==="ok"){const m=[];for(let y=0;y<i.length;y++)i[y].status=2,p=p.concat(Xh(t.serverSyncTree_,i[y].currentWriteId)),i[y].onComplete&&m.push(()=>i[y].onComplete(null,!0,i[y].currentOutputSnapshotResolved)),i[y].unwatcher();ST(t,uR(t.transactionQueueTree_,e)),mR(t,t.transactionQueueTree_),nu(t.eventQueue_,e,p);for(let y=0;y<m.length;y++)ry(m[y])}else{if(d==="datastale")for(let m=0;m<i.length;m++)i[m].status===3?i[m].status=4:i[m].status=0;else{_a("transaction at "+c.toString()+" failed: "+d);for(let m=0;m<i.length;m++)i[m].status=4,i[m].abortReason=d}CT(t,e)}},a)}function CT(t,e){const i=o3(t,e),n=Rb(i),r=l3(t,i);return tde(t,r,n),n}function tde(t,e,i){if(e.length===0)return;const n=[];let r=[];const a=e.filter(o=>o.status===0).map(o=>o.currentWriteId);for(let o=0;o<e.length;o++){const c=e[o],d=eo(i,c.path);let p=!1,m;if(nt(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)p=!0,m=c.abortReason,r=r.concat(Xh(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=que)p=!0,m="maxretry",r=r.concat(Xh(t.serverSyncTree_,c.currentWriteId,!0));else{const y=a3(t,c.path,a);c.currentInputSnapshot=y;const _=e[o].update(y.val());if(_!==void 0){dR("transaction failed: Data returned ",_,c.path);let E=Fr(_);typeof _=="object"&&_!=null&&uu(_,".priority")||(E=E.updatePriority(y.getPriority()));const S=c.currentWriteId,k=fR(t),R=Z$(E,y,k);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=R,c.currentWriteId=s3(t),a.splice(a.indexOf(S),1),r=r.concat(Y$(t.serverSyncTree_,c.path,R,c.currentWriteId,c.applyLocally)),r=r.concat(Xh(t.serverSyncTree_,S,!0))}else p=!0,m="nodata",r=r.concat(Xh(t.serverSyncTree_,c.currentWriteId,!0))}nu(t.eventQueue_,i,r),r=[],p&&(e[o].status=2,function(y){setTimeout(y,Math.floor(0))}(e[o].unwatcher),e[o].onComplete&&(m==="nodata"?n.push(()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot)):n.push(()=>e[o].onComplete(new Error(m),!1,null))))}ST(t,t.transactionQueueTree_);for(let o=0;o<n.length;o++)ry(n[o]);mR(t,t.transactionQueueTree_)}function o3(t,e){let i,n=t.transactionQueueTree_;for(i=mi(e);i!==null&&sy(n)===void 0;)n=uR(n,i),e=mn(e),i=mi(e);return n}function l3(t,e){const i=[];return c3(t,e,i),i.sort((n,r)=>n.order-r.order),i}function c3(t,e,i){const n=sy(e);if(n)for(let r=0;r<n.length;r++)i.push(n[r]);TT(e,r=>{c3(t,r,i)})}function ST(t,e){const i=sy(e);if(i){let n=0;for(let r=0;r<i.length;r++)i[r].status!==2&&(i[n]=i[r],n++);i.length=n,Q$(e,i.length>0?i:void 0)}TT(e,n=>{ST(t,n)})}function u3(t,e){const i=Rb(o3(t,e)),n=uR(t.transactionQueueTree_,e);return Due(n,r=>{Ww(t,r)}),Ww(t,n),e3(n,r=>{Ww(t,r)}),i}function Ww(t,e){const i=sy(e);if(i){const n=[];let r=[],s=-1;for(let a=0;a<i.length;a++)i[a].status===3||(i[a].status===1?(nt(s===a-1,"All SENT items should be at beginning of queue."),s=a,i[a].status=3,i[a].abortReason="set"):(nt(i[a].status===0,"Unexpected transaction status in abort"),i[a].unwatcher(),r=r.concat(Xh(t.serverSyncTree_,i[a].currentWriteId,!0)),i[a].onComplete&&n.push(i[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Q$(e,void 0):i.length=s+1,nu(t.eventQueue_,Rb(e),r);for(let a=0;a<n.length;a++)ry(n[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ide(t){let e="";const i=t.split("/");for(let n=0;n<i.length;n++)if(i[n].length>0){let r=i[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function nde(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const i of t.split("&")){if(i.length===0)continue;const n=i.split("=");n.length===2?e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):_a(`Invalid query segment '${i}' in query '${t}'`)}return e}const $O=function(t,e){const i=rde(t),n=i.namespace;i.domain==="firebase.com"&&Cf(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&i.domain!=="localhost"&&Cf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||wle();const r=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new Nle(i.host,i.secure,n,e,r,"",n!==i.subdomain),path:new tn(i.pathString)}},rde=function(t){let e="",i="",n="",r="",s="",a=!0,o="https",c=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(o=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let m=t.indexOf("?");m===-1&&(m=t.length),e=t.substring(0,Math.min(p,m)),p<m&&(r=ide(t.substring(p,m)));const y=nde(t.substring(Math.min(t.length,m)));d=e.indexOf(":"),d>=0?(a=o==="https"||o==="wss",c=parseInt(e.substring(d+1),10)):d=e.length;const _=e.slice(0,d);if(_.toLowerCase()==="localhost")i="localhost";else if(_.split(".").length<=2)i=_;else{const E=e.indexOf(".");n=e.substring(0,E).toLowerCase(),i=e.substring(E+1),s=n}"ns"in y&&(s=y.ns)}return{host:e,port:c,domain:i,subdomain:n,secure:a,scheme:o,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,i,n,r){this._repo=e,this._path=i,this._queryParams=n,this._orderByCalled=r}get key(){return _i(this._path)?null:C$(this._path)}get ref(){return new Wd(this._repo,this._path)}get _queryIdentifier(){const e=kO(this._queryParams),i=qA(e);return i==="{}"?"default":i}get _queryObject(){return kO(this._queryParams)}isEqual(e){if(e=gl(e),!(e instanceof yR))return!1;const i=this._repo===e._repo,n=XA(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return i&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+oce(this._path)}}class Wd extends yR{constructor(e,i){super(e,i,new JA,!1)}get parent(){const e=k$(this._path);return e===null?null:new Wd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class SE{constructor(e,i,n){this._node=e,this.ref=i,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const i=new tn(e),n=IS(this.ref,e);return new SE(this._node.getChild(i),n,Kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>e(new SE(r,IS(this.ref,n),Kn)))}hasChild(e){const i=new tn(e);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jw(t,e){return t=gl(t),t._checkNotDeleted("ref"),e!==void 0?IS(t._root,e):t._root}function IS(t,e){return t=gl(t),mi(t._path)===null?Gue("child","path",e):n3("child","path",e),new Wd(t._repo,Sr(t._path,e))}function sde(t,e){t=gl(t),Uue("set",t._path),Nue("set",e,t._path);const i=new DA;return Kue(t._repo,t._path,e,null,i.wrapCallback(()=>{})),i.promise}function HO(t){return t=gl(t),Xue(t._repo,t).then(e=>new SE(e,new Wd(t._repo,t._path),t._queryParams.getIndex()))}vue(Wd);_ue(Wd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ade="FIREBASE_DATABASE_EMULATOR_HOST",DS={};let ode=!1;function lde(t,e,i,n,r){let s=n||t.options.databaseURL;s===void 0&&(t.options.projectId||Cf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ts("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=$O(s,r),o=a.repoInfo,c;typeof process<"u"&&(c=yle[ade]),c?(s=`http://${c}?ns=${o.namespace}`,a=$O(s,r),o=a.repoInfo):a.repoInfo.secure;const d=new Ple(t.name,t.options,e);Lue("Invalid Firebase Database URL",a),_i(a.path)||Cf("Database URL must point to the root of a Firebase Database (not including a child path).");const p=ude(o,t,d,new Mle(t.name,i));return new dde(p,t)}function cde(t,e){const i=DS[e];(!i||i[t.key]!==t)&&Cf(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Que(t),delete i[t.key]}function ude(t,e,i,n){let r=DS[e.name];r||(r={},DS[e.name]=r);let s=r[t.toURLString()];return s&&Cf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Yue(t,ode,i,n),r[t.toURLString()]=s,s}class dde{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Wue(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wd(this._repo,Li())),this._rootInternal}_delete(){return this._rootInternal!==null&&(cde(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Cf("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hde(t){gle(yb),Rv(new Av("database",(e,{instanceIdentifier:i})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return lde(n,r,s,i)},"PUBLIC").setMultipleInstances(!0)),Sd(cO,uO,t),Sd(cO,uO,"esm2017")}eu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};eu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};hde();var fde="firebase",pde="9.6.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sd(fde,pde,"app");const xg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function VO(t){return xg.indexOf(t.charAt(t.length-1))===64?t.substring(0,t.length-1):t}function mde(t,e){t=VO(t),t=VO(t);const i=parseInt(t.length/4*3,10);let n,r,s,a,o,c,d,p,m=0,y=0;for(n=new Uint8Array(i),t=t.replace(/[^A-Za-z0-9+/=]/gu,""),m=0;m<i;m+=3)o=xg.indexOf(t.charAt(y++)),c=xg.indexOf(t.charAt(y++)),d=xg.indexOf(t.charAt(y++)),p=xg.indexOf(t.charAt(y++)),r=o<<2|c>>4,s=(c&15)<<4|d>>2,a=(d&3)<<6|p,n[m]=r,d!==64&&(n[m+1]=s),p!==64&&(n[m+2]=a);return n}const yde={apiKey:null,authDomain:null,databaseURL:null,projectId:null,storageBucket:null,messagingSenderId:null,appId:null};class gde extends yn{get id(){return this.config.id}get name(){return this.config.name}get suggestedResource(){return typeof this.config.suggestedResource=="function"?this.config.suggestedResource():this.config.suggestedResource}}const Lv=gde.createAccessor(GameDatabase.progressStages);Lv.all=GameDatabase.progressStages;class vde extends yn{get requiredStage(){return this.config.requiredStage}get name(){return this.config.name}get description(){return typeof this.config.description=="function"?this.config.description():this.config.description}}const d3=mapGameDataToObject(GameDatabase.catchupResources,t=>new vde(t)),Bv={getProgressStage(t){const e=Lv.all;for(let i=e.length-1;i>=0;i--)if(e[i].hasReached(t))return e[i];throw Error("No valid progress stage found")},getCompositeProgress(t){if(!t)return 0;const e=this.getProgressStage(t);return e.id+Math.clampMax(e.subProgressValue(t),1)},compareSaveProgress(t,e){const i=this.getCompositeProgress(t)-this.getCompositeProgress(e);return i>.05?-1:i<-.05?1:0},compareSaveTimes(t,e){var n,r;return!t||!e?0:((n=t.records)==null?void 0:n.realTimePlayed)-((r=e.records)==null?void 0:r.realTimePlayed)>=0?-1:1}},bde=Object.freeze(Object.defineProperty({__proto__:null,CatchupResources:d3,GameProgress:Lv,ProgressChecker:Bv},Symbol.toStringTag,{value:"Module"})),_de=yde.apiKey!==null,kE={provider:null,auth:null,db:null,user:null,lastCloudHash:null,get isAvailable(){return _de},resetTempState(){this.lastCloudHash=null,GameStorage.lastCloudSave=Date.now(),GameIntervals.checkCloudSave.restart()},get loggedIn(){return this.user!==null},async login(){if(this.isAvailable)try{await Ioe(this.auth,this.provider),ShopPurchaseData.syncSTD(),player.options.hideGoogleName?GameUI.notify.success("Successfully logged in to Google Account"):GameUI.notify.success(`Successfully logged in as ${this.user.displayName}`),ShopPurchaseData.isIAPEnabled&&Speedrun.setSTDUse(!0)}catch{GameUI.notify.error("Google Account login failed")}},async loginWithSteam(t,e,i){if(!this.isAvailable)return;if(this.loggedIn){kE.user.displayName=i;return}const n=`${t}@ad.com`,r=e;let s;if(await roe(this.auth,n,r).catch(()=>noe(this.auth,n,r)).catch(a=>s=a),s!==void 0){console.log(`Firebase Login Error: ${s}`);return}kE.user.displayName=i},async loadMobile(){if(!this.user)return;const t=await HO(jw(this.db,`users/${this.user.id}/player`));if(t.exists){const e=t.val(),i=mde(e.replace(/-/gu,"+").replace(/_/gu,"/"));uS.ungzip(i,{to:"string"})}},compareSaves(t,e,i){try{return{farther:Bv.compareSaveProgress(t,e),older:Bv.compareSaveTimes(t,e),differentName:(t==null?void 0:t.options.saveFileName)!==(e==null?void 0:e.options.saveFileName),hashMismatch:this.lastCloudHash&&this.lastCloudHash!==i}}catch{return null}},async saveCheck(t=!1){if(!this.isAvailable)return;const e=GameStorage.currentSlot,i=await this.load();if(i===null)this.save();else{const n=ff.sha512_256(GameSaveSerializer.serialize(i));this.lastCloudHash||(this.lastCloudHash=n);const r=GameStorage.saves[e],s=this.compareSaves(i,r,n),a=()=>this.save();if(!s){Modal.addCloudConflict(e,s,i,r,a),Modal.cloudInvalidData.show({isSaving:!0});return}const c=i&&r&&s&&(s.older===-1||s.farther===-1||s.differentName||s.hashMismatch);t||c&&player.options.showCloudModal?(Modal.addCloudConflict(e,s,i,r,a),Modal.cloudSaveConflict.show()):(!c||player.options.forceCloudOverwrite)&&a()}},save(){if(!this.user||GlyphSelection.active||ui.$viewModel.modal.progressBar!==void 0)return;player.options.syncSaveIntervals&&GameStorage.save();const t=GameSaveSerializer.serialize(GameStorage.saves[GameStorage.currentSlot]);this.lastCloudHash=ff.sha512_256(t),GameStorage.lastCloudSave=Date.now(),GameIntervals.checkCloudSave.restart();const e=GameStorage.currentSlot;this.writeToCloudDB(e,t),player.options.hideGoogleName?GameUI.notify.info(`Game saved (slot ${e+1}) to cloud`):GameUI.notify.info(`Game saved (slot ${e+1}) to cloud as user ${this.user.displayName}`)},async loadCheck(){if(!this.isAvailable)return;const t=await this.load();if(t===null)player.options.hideGoogleName?GameUI.notify.info("No cloud save for current Google Account"):GameUI.notify.info(`No cloud save for user ${this.user.displayName}`);else{const e=t,i=GameStorage.currentSlot,n=GameStorage.saves[i],r=this.compareSaves(e,n),s=()=>{GameStorage.overwriteSlot(i,e),player.options.hideGoogleName?GameUI.notify.info(`Cloud save (slot ${i+1}) loaded`):GameUI.notify.info(`Cloud save (slot ${i+1}) loaded for user ${this.user.displayName}`)};if(!r){Modal.addCloudConflict(i,r,e,n,s),Modal.cloudInvalidData.show({isSaving:!1});return}e&&n&&(r.older===1||r.farther!==-1||r.differentName)?(Modal.addCloudConflict(i,r,e,n,s),Modal.cloudLoadConflict.show()):s()}},async load(){let t=await this.readFromCloudDB(GameStorage.currentSlot);return t.exists()||(await this.separateSaveSlots(),t=await this.readFromCloudDB(GameStorage.currentSlot),t.exists())?GameSaveSerializer.deserialize(t.val()):null},async separateSaveSlots(){const t=await this.readFromCloudDB(null);if(!t.exists())return;const e=GameSaveSerializer.deserialize(t.val());if(e)for(const i of Object.keys(e.saves)){const n=GameSaveSerializer.serialize(e.saves[i]);await this.writeToCloudDB(Number(i),n)}},readFromCloudDB(t){const e=t===null?"":`/${t}`;return HO(jw(this.db,`users/${this.user.id}/web${e}`))},writeToCloudDB(t,e){const i=t===null?"":`/${t}`;return sde(jw(this.db,`users/${this.user.id}/web${i}`),e)},logout(){this.isAvailable&&(soe(this.auth),ShopPurchaseData.clearLocalSTD())},init(){this.isAvailable&&mle().onAuthStateChanged(t=>{t?(this.user={id:t.uid,displayName:t.displayName,email:t.email},ShopPurchaseData.syncSTD()):this.user=null})}},Wi=function(){const t=Ese,e=n=>{const r=new n;return r.setAsCurrent=()=>{player.options.notation=r.name,ui.notationName=r.name},r},i=n=>(n.isPainful=!0,n);return{scientific:e(t.ScientificNotation),engineering:e(t.EngineeringNotation),letters:e(t.LettersNotation),standard:i(e(t.StandardNotation)),emoji:i(e(t.EmojiNotation)),mixedScientific:e(t.MixedScientificNotation),mixedEngineering:e(t.MixedEngineeringNotation),logarithm:e(t.LogarithmNotation),brackets:i(e(t.BracketsNotation)),infinity:e(t.InfinityNotation),roman:i(e(t.RomanNotation)),dots:i(e(t.DotsNotation)),zalgo:i(e(t.ZalgoNotation)),hex:i(e(t.HexNotation)),imperial:i(e(t.ImperialNotation)),clock:i(e(t.ClockNotation)),prime:i(e(t.PrimeNotation)),bar:i(e(t.BarNotation)),shi:i(e(t.ShiNotation)),blind:i(e(t.BlindNotation)),blobs:i(e(t.BlobsNotation)),all:i(e(t.AllNotation))}}();Wi.emoji.setAsCurrent=(t=!1)=>{player.options.notation=Wi.emoji.name,ui.notationName=Wi.emoji.name,t||GameUI.notify.success("😂😂😂")};const h3={all:[Wi.scientific,Wi.engineering,Wi.letters,Wi.standard,Wi.emoji,Wi.mixedScientific,Wi.mixedEngineering,Wi.logarithm,Wi.brackets,Wi.infinity,Wi.roman,Wi.dots,Wi.zalgo,Wi.hex,Wi.imperial,Wi.clock,Wi.prime,Wi.bar,Wi.shi,Wi.blind,Wi.blobs,Wi.all],find:t=>{const e=h3.all.find(i=>i.name===t);return e===void 0?Wi.mixedScientific:e},get current(){return GameUI.initialized?ui.notation:Wi.mixedScientific}};Ta.isInfinite=t=>ui.formatPreBreak&&t.gte(Decimal.NUMBER_MAX_VALUE);EventHub.logic.on(GAME_EVENT.GAME_TICK_AFTER,()=>{ui.formatPreBreak=!PlayerProgress.hasBroken()||NormalChallenge.isRunning&&!Enslaved.isRunning});const Ju={DIM1:0,DIM2:1,TICKSPEED:2,DIMBOOST:3,GALAXY:4,AUTOMATOR:5},Ede=[{id:Ju.DIM1,condition:()=>!0},{id:Ju.DIM2,condition:()=>Currency.antimatter.gte(100)},{id:Ju.TICKSPEED,condition:()=>AntimatterDimension(2).bought>0},{id:Ju.DIMBOOST,condition:()=>AntimatterDimension(4).amount.gte(20)},{id:Ju.GALAXY,condition:()=>AntimatterDimension(8).amount.gte(80)},{id:Ju.AUTOMATOR,condition:()=>Player.automatorUnlocked}],Tde={isActive(t){return player.records.fullGameCompletions===0&&ui.view.tutorialState===t&&ui.view.tutorialActive},emphasizeH2P(){const t=player.tutorialState>Ju.DIMBOOST||player.dimensionBoosts>0;return player.records.fullGameCompletions===0&&!t},turnOffEffect(t){t===player.tutorialState&&(player.tutorialActive=!1,ui.view.tutorialActive=!1,this.tutorialLoop())},moveOn(t){t===player.tutorialState&&(player.tutorialState++,ui.view.tutorialState++,player.tutorialActive=!0,ui.view.tutorialActive=!0)},tutorialLoop(){const t=Ede.find(e=>e.id===player.tutorialState+1);t&&t.condition()&&this.moveOn(player.tutorialState)}},wde={startNewGame(){GameEnd.creditsClosed=!1,GameEnd.creditsEverClosed=!1,player.isGameEnd=!1,player.celestials.pelle.doomed=!1;const t=player.speedrun;if(t.isActive){player.speedrun.previousRuns[player.records.fullGameCompletions+1]={isSegmented:t.isSegmented,usedSTD:t.usedSTD,startDate:t.startDate,name:t.name,offlineTimeUsed:t.offlineTimeUsed,records:[...t.records],achievementTimes:JSON.parse(JSON.stringify(t.achievementTimes)),seedSelection:t.seedSelection,initialSeed:t.initialSeed};const e=Object.keys(t.previousRuns).map(i=>Number(i));e.length>100&&(player.speedrun.previousRuns[e.min()]=void 0)}player.records.fullGameCompletions++,GlyphAppearanceHandler.unlockSet(),this.restartWithCarryover(),GameEnd.removeAdditionalEnd=!0,GameEnd.additionalEnd=15,setTimeout(()=>GameStorage.save(),1e4)},restartWithCarryover(){const t=JSON.stringify(player.options),e=player.secretUnlocks,i=JSON.stringify(player.secretAchievementBits),n=JSON.stringify(player.reality.automator.constants),r=JSON.stringify(player.reality.automator.constantSortOrder),s=JSON.stringify(player.reality.automator.scripts),a=player.records.fullGameCompletions,o=player.records.previousRunRealTime+player.records.realTimePlayed,c=JSON.stringify(player.reality.glyphs.cosmetics),d=JSON.stringify(player.speedrun.previousRuns),p=player.speedrun.isUnlocked,m=JSON.stringify(player.timestudy.presets),y=JSON.stringify(Glyphs.allGlyphs.filter(_=>_.type==="companion"));Modal.hideAll(),Quote.clearAll(),GameStorage.hardReset(),player.options=JSON.parse(t),player.options.confirmations.glyphSelection=!0,player.secretUnlocks=e,player.secretAchievementBits=JSON.parse(i),player.reality.automator.constants=JSON.parse(n),player.reality.automator.constantSortOrder=JSON.parse(r),player.reality.automator.scripts=JSON.parse(s),player.records.fullGameCompletions=a,player.records.previousRunRealTime=o,ui.view.newUI=player.options.newUI,ui.view.news=player.options.news.enabled,player.reality.glyphs.cosmetics=JSON.parse(c),player.speedrun.previousRuns=JSON.parse(d),player.speedrun.isUnlocked=p,player.timestudy.presets=JSON.parse(m),JSON.parse(y).forEach(_=>{Glyphs.addToInventory(_)}),Themes.find(Theme.currentName()).set(),Notations.all.find(_=>_.name===player.options.notation).setAsCurrent(),Ta.exponentCommas.min=10**player.options.notationDigits.comma,Ta.exponentCommas.max=10**player.options.notationDigits.notation,player.lastUpdate=Date.now()}},f3={addToQueue(t){ui.view.quotes.queue.push(t),ui.view.quotes.current||this.advanceQueue()},advanceQueue(){ui.view.quotes.current=ui.view.quotes.queue.shift()},showHistory(t){ui.view.quotes.history=t},clearQueue(){ui.view.quotes.queue=[],ui.view.quotes.current=void 0},clearHistory(){ui.view.quotes.history=void 0},clearAll(){this.clearQueue(),this.clearHistory()},get isOpen(){return ui.view.quotes.current!==void 0},get isHistoryOpen(){return ui.view.quotes.history!==void 0}};function Cde(t){const e=t.map(s=>s[1]).sum(),i=Date.now()/1e3%e,n=t[0][1]/2;let r=0;for(let s=0;s<t.length;s++){const a=t[(s+t.length-1)%t.length],o=t[s],c=t[(s+1)%t.length],d=i-r,p=d-o[1];if(p>0){r+=o[1];continue}if(d<=n){const m=.5*d/n;return[[a[0],.5-m],[o[0],.5+m]]}if(-p<=n){const m=.5*p/n;return[[o[0],.5-m],[c[0],.5+m]]}return[[o[0],1]]}throw new Error("Could not blend celestial fractions in Quote modal")}class Sde{constructor(e,i){this._parent=i,this._showCelestialName=e.showCelestialName??!0,this._celestialArray=e.background?()=>Cde(e.background):[[i.celestial,1]];const n=/\$(\d+)/gu;this._line=typeof e=="string"?e:()=>e.text.replaceAll(n,(r,s)=>Xn.wordCycle(e[s]))}get line(){return typeof this._line=="function"?this._line():this._line}get celestials(){return typeof this._celestialArray=="function"?this._celestialArray():this._celestialArray}get celestialSymbols(){return this.celestials.map(e=>Celestials[e[0]].symbol)}get showCelestialName(){return this._showCelestialName}get celestialName(){return Celestials[this._parent.celestial].displayName}}class Rh extends Vd{constructor(e,i){super(e),this._celestial=i,this._lines=e.lines.map(n=>new Sde(n,this))}get bits(){return player.celestials[this._celestial].quoteBits}set bits(e){player.celestials[this._celestial].quoteBits=e}get requirement(){var e,i;return(i=(e=this.config).requirement)==null?void 0:i.call(e)}get celestial(){return this._celestial}line(e){return this._lines[e]}get totalLines(){return this._lines.length}show(){this.unlock()}onUnlock(){this.present()}present(){f3.addToQueue(this)}}const jd={teresa:mapGameDataToObject(GameDatabase.celestials.quotes.teresa,t=>new Rh(t,"teresa")),effarig:mapGameDataToObject(GameDatabase.celestials.quotes.effarig,t=>new Rh(t,"effarig")),enslaved:mapGameDataToObject(GameDatabase.celestials.quotes.enslaved,t=>new Rh(t,"enslaved")),v:mapGameDataToObject(GameDatabase.celestials.quotes.v,t=>new Rh(t,"v")),ra:mapGameDataToObject(GameDatabase.celestials.quotes.ra,t=>new Rh(t,"ra")),laitela:mapGameDataToObject(GameDatabase.celestials.quotes.laitela,t=>new Rh(t,"laitela")),pelle:mapGameDataToObject(GameDatabase.celestials.quotes.pelle,t=>new Rh(t,"pelle"))},Rf={timePoured:0,lastUnlock:"effarig",pouredAmountCap:1e24,displayName:"Teresa",possessiveName:"Teresa's",get isUnlocked(){return Achievement(147).isUnlocked},pourRM(t){if(this.pouredAmount>=Rf.pouredAmountCap)return;this.timePoured+=t;const e=Currency.realityMachines.value,i=Math.min((this.pouredAmount+1e6)*.01*Math.pow(this.timePoured,2),e.toNumber());this.pouredAmount+=Math.min(i,Rf.pouredAmountCap-this.pouredAmount),Currency.realityMachines.subtract(i),this.checkForUnlocks()},checkForUnlocks(){for(const t of p3.all)t.unlock()},initializeRun(){clearCelestialRuns(),player.celestials.teresa.run=!0},rewardMultiplier(t){return Decimal.max(Decimal.pow(t.plus(1).log10()/15e7,12),1).toNumber()},get pouredAmount(){return player.celestials.teresa.pouredAmount},set pouredAmount(t){player.celestials.teresa.pouredAmount=t},get fill(){return Math.min(Math.log10(this.pouredAmount)/24,1)},get possibleFill(){return Math.min(Currency.realityMachines.value.plus(this.pouredAmount).log10()/24,1)},get rmMultiplier(){return Math.max(250*Math.pow(this.pouredAmount/1e24,.1),1)},get runRewardMultiplier(){return this.rewardMultiplier(player.celestials.teresa.bestRunAM)},get isRunning(){return player.celestials.teresa.run},get runCompleted(){return player.celestials.teresa.bestRunAM.gt(1)},quotes:jd.teresa,symbol:"Ϟ"};class kde extends su{constructor(e){super(e),this.costCap=e.costCap}get currency(){return Currency.perkPoints}get boughtAmount(){return player.celestials.teresa.perkShop[this.id]}set boughtAmount(e){player.celestials.teresa.perkShop[this.id]=e}get isCapped(){return this.cost===this.costCap(this.bought)}get isAvailableForPurchase(){const e=this.config.otherReq?this.config.otherReq():!0;return this.cost<=this.currency.value&&e}onPurchased(){if(this.id===0&&GameCache.staticGlyphWeights.invalidate(),this.id===1&&Autobuyer.reality.bumpAmount(2),this.id===4&&!Pelle.isDoomed&&(GameCache.glyphInventorySpace.value===0?(Currency.perkPoints.add(1),GameUI.notify.error("You have no empty inventory space!")):(Glyphs.addToInventory(GlyphGenerator.musicGlyph()),GameUI.notify.success("Created a Music Glyph"))),this.id===5&&!Pelle.isDoomed){const e=GameCache.glyphInventorySpace.value;for(let i=0;i<e;i++)Glyphs.addToInventory(GlyphGenerator.musicGlyph());GameUI.notify.success(`Created ${quantifyInt("Music Glyph",e)}`)}}}class Ade extends Vd{get bits(){return player.celestials.teresa.unlockBits}set bits(e){player.celestials.teresa.unlockBits=e}get price(){return this.config.price}get pelleDisabled(){return Pelle.isDoomed&&this.config.isDisabledInDoomed}get isEffectActive(){return!this.pelleDisabled}get canBeUnlocked(){return!this.isUnlocked&&Rf.pouredAmount>=this.price}get description(){return typeof this.config.description=="function"?this.config.description():this.config.description}onUnlock(){var e,i;(i=(e=this.config).onUnlock)==null||i.call(e)}}const p3=mapGameDataToObject(no.celestials.teresa.unlocks,t=>new Ade(t)),Rde=mapGameDataToObject(no.celestials.perkShop,t=>new kde(t));EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.teresa.isOpen&&Rf.quotes.initial.show()});EventHub.logic.on(GAME_EVENT.GAME_LOAD,()=>Rf.checkForUnlocks());const $s={INFINITY:1,ETERNITY:2,REALITY:3,COMPLETED:4},Bd={displayName:"Effarig",possessiveName:"Effarig's",initializeRun(){clearCelestialRuns(),player.celestials.effarig.run=!0,recalculateAllGlyphs(),Tab.reality.glyphs.show(!1)},get isRunning(){return player.celestials.effarig.run},get currentStage(){return I0.infinity.isUnlocked?I0.eternity.isUnlocked?I0.reality.isUnlocked?$s.COMPLETED:$s.REALITY:$s.ETERNITY:$s.INFINITY},get currentStageName(){switch(this.currentStage){case $s.INFINITY:return"Infinity";case $s.ETERNITY:return"Eternity";case $s.REALITY:default:return"Reality"}},get eternityCap(){return this.isRunning&&this.currentStage===$s.ETERNITY?L.E50:void 0},get glyphLevelCap(){switch(this.currentStage){case $s.INFINITY:return 100;case $s.ETERNITY:return 1500;case $s.REALITY:default:return 2e3}},get glyphEffectAmount(){const t=Glyphs.activeWithoutCompanion.filter(i=>generatedTypes.includes(i.type)).reduce((i,n)=>i|n.effects,0),e=Glyphs.activeWithoutCompanion.filter(i=>!generatedTypes.includes(i.type)).reduce((i,n)=>i|n.effects,0);return countValuesFromBitmask(t)+countValuesFromBitmask(e)},get shardsGained(){return TeresaUnlocks.effarig.canBeApplied?Math.floor(Math.pow(Currency.eternityPoints.exponent/7500,this.glyphEffectAmount))*AlchemyResource.effarig.effectValue:0},get maxRarityBoost(){return 5*Math.log10(Math.log10(Currency.relicShards.value+10))},nerfFactor(t){let e;switch(this.currentStage){case $s.INFINITY:e=1500;break;case $s.ETERNITY:e=29.29;break;case $s.REALITY:default:e=25;break}return 3*(1-e/(e+Math.sqrt(t.pLog10())))},get tickDilation(){return .7+.1*this.nerfFactor(Currency.timeShards.value)},get multDilation(){return .25+.25*this.nerfFactor(Currency.infinityPower.value)},get tickspeed(){const t=3+Tickspeed.baseValue.reciprocal().log10();return Decimal.pow10(Math.pow(t,this.tickDilation)).reciprocal()},multiplier(t){const e=new Decimal(t).pLog10();return Decimal.pow10(Math.pow(e,this.multDilation))},get bonusRG(){return Math.floor(replicantiCap().pLog10()/LOG10_MAX_VALUE-1)},quotes:jd.effarig,symbol:"Ϙ"};class Ide extends Vd{get bits(){return player.celestials.effarig.unlockBits}set bits(e){player.celestials.effarig.unlockBits=e}get cost(){return this.config.cost}get isEffectActive(){return!Pelle.isDisabled("effarig")}purchase(){var e,i;this.isUnlocked||!Currency.relicShards.purchase(this.cost)||(this.unlock(),(i=(e=this.config).onPurchased)==null||i.call(e))}}const I0=mapGameDataToObject(no.celestials.effarig.unlocks,t=>new Ide(t));EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.effarig.isOpen&&Bd.quotes.initial.show()});EventHub.logic.on(GAME_EVENT.BIG_CRUNCH_BEFORE,()=>{Bd.isRunning&&Bd.quotes.completeInfinity.show()});EventHub.logic.on(GAME_EVENT.ETERNITY_RESET_BEFORE,()=>{Bd.isRunning&&Bd.quotes.completeEternity.show()});const xS={FREE_TICKSPEED_SOFTCAP:{id:0,price:TimeSpan.fromYears(1e35).totalMilliseconds,secondaryRequirement:()=>!0,description:()=>`Increase the softcap to Tickspeed upgrades from Time Dimensions by ${formatInt(1e5)}`},RUN:{id:1,price:TimeSpan.fromYears(1e40).totalMilliseconds,secondaryRequirement(){const t=player.records.bestReality.glyphLevel>=5e3,e=strengthToRarity(player.records.bestReality.glyphStrength)>=100;return t&&e},description(){const t=player.records.bestReality.glyphLevel>=5e3,e=strengthToRarity(player.records.bestReality.glyphStrength)>=100;return`Unlock The Nameless Ones' Reality (requires ${t?"[✓]":"[✗]"} a level
      ${formatInt(5e3)} Glyph and ${e?"[✓]":"[✗]"} a ${formatRarity(100)} rarity Glyph)`}}},fa={displayName:"The Nameless Ones",possessiveName:"The Nameless Ones'",boostReality:!1,BROKEN_CHALLENGES:[2,3,4,5,7,8,10,11,12],nextTickDiff:50,isReleaseTick:!1,autoReleaseTick:0,autoReleaseSpeed:0,timeCap:1e300,glyphLevelMin:5e3,currentBlackHoleStoreAmountPerMs:0,tachyonNerf:.3,toggleStoreBlackHole(){this.canModifyGameTimeStorage&&(player.celestials.enslaved.isStoring=!player.celestials.enslaved.isStoring,player.celestials.enslaved.isStoringReal=!1)},toggleStoreReal(){!this.canModifyRealTimeStorage&&!this.isStoredRealTimeCapped||(player.celestials.enslaved.isStoringReal=!player.celestials.enslaved.isStoringReal,player.celestials.enslaved.isStoring=!1)},toggleAutoStoreReal(){this.canModifyRealTimeStorage&&(player.celestials.enslaved.autoStoreReal=!player.celestials.enslaved.autoStoreReal)},get canModifyGameTimeStorage(){return fa.isUnlocked&&!Pelle.isDoomed&&!BlackHoles.arePaused&&!EternityChallenge(12).isRunning&&!fa.isRunning&&!Laitela.isRunning},get canModifyRealTimeStorage(){return fa.isUnlocked&&!Pelle.isDoomed},get isStoredRealTimeCapped(){return player.celestials.enslaved.storedReal<this.storedRealTimeCap},get isStoringGameTime(){return this.canModifyGameTimeStorage&&(this.isAutoReleasing||player.celestials.enslaved.isStoring)},get isStoringRealTime(){return this.canModifyRealTimeStorage&&player.celestials.enslaved.isStoringReal},get storedRealTimeEfficiency(){return .7},get storedRealTimeCap(){const t=Ra.unlocks.improvedStoredTime.effects.realTimeCap.effectOrDefault(0);return 1e3*3600*8+t},get isAutoReleasing(){return player.celestials.enslaved.isAutoReleasing&&!BlackHoles.areNegative&&!Pelle.isDisabled("blackhole")},storeRealTime(){if(Pelle.isDoomed)return;const t=Date.now(),e=Math.max(t-player.lastUpdate,0),i=this.storedRealTimeEfficiency,n=this.storedRealTimeCap;player.celestials.enslaved.storedReal+=e*i,player.celestials.enslaved.storedReal>n&&(player.celestials.enslaved.isStoringReal=!1,player.celestials.enslaved.storedReal=n),player.celestials.enslaved.storedReal>24*60*60*1e3&&SecretAchievement(46).unlock(),player.lastUpdate=t},autoStoreRealTime(t){const e=this.storedRealTimeCap-player.celestials.enslaved.storedReal,i=Math.min(t,Math.max(0,e/this.storedRealTimeEfficiency));return player.celestials.enslaved.storedReal+=i*this.storedRealTimeEfficiency,player.lastUpdate+=i,t-i},canRelease(t){return!fa.isStoringRealTime&&!EternityChallenge(12).isRunning&&!Laitela.isRunning&&!(fa.isRunning&&t)&&!Pelle.isDoomed},useStoredTime(t){if(!this.canRelease(t))return;const e=player.requirementChecks.reality.slowestBH<=1e-300;if(ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&e){t||ImaginaryUpgrade(24).tryShowWarningModal("discharge your Black Hole");return}player.requirementChecks.reality.slowestBH=1;let i=player.celestials.enslaved.stored;fa.isRunning&&(i=fa.storedTimeInsideEnslaved(i),Time.thisReality.totalYears+TimeSpan.fromMilliseconds(i).totalYears>1&&D0.storedTime.giveProgress()),t&&(i*=.01),this.nextTickDiff=Math.clampMax(i,this.timeCap),this.isReleaseTick=!0;const n=i/50;player.celestials.ra.peakGamespeed=Math.max(player.celestials.ra.peakGamespeed,n),this.autoReleaseSpeed=i/player.options.updateRate/5,player.celestials.enslaved.stored*=t?.99:0},has(t){return player.celestials.enslaved.unlocks.includes(t.id)},canBuy(t){return player.celestials.enslaved.stored>=t.price&&t.secondaryRequirement()&&!this.has(t)},buyUnlock(t){return this.canBuy(t)?(t.id===xS.RUN.id&&this.quotes.unlockRun.show(),player.celestials.enslaved.stored-=t.price,player.celestials.enslaved.unlocks.push(t.id),!0):!1},initializeRun(){clearCelestialRuns(),player.celestials.enslaved.run=!0,player.celestials.enslaved.hasSecretStudy=!1,this.feltEternity=!1,AutomatorData.recalculateErrors(),AutomatorBackend.state.mode===AUTOMATOR_MODE.RUN&&AutomatorData.currentErrors().length&&(AutomatorBackend.stop(),GameUI.notify.error("This Reality forbids Black Holes! (Automator stopped)")),this.quotes.startRun.show()},get isRunning(){return player.celestials.enslaved.run},completeRun(){player.celestials.enslaved.completed=!0,this.quotes.completeReality.show()},get isCompleted(){return player.celestials.enslaved.completed},get canTickHintTimer(){return!D0.hintsUnlocked.hasProgress&&fa.has(xS.RUN)&&!fa.isCompleted},get isUnlocked(){return EffarigUnlock.eternity.isUnlocked},get realityBoostRatio(){return Math.max(1,Math.floor(player.celestials.enslaved.storedReal/Math.max(1e3,Time.thisRealityRealTime.totalMilliseconds)))},get canAmplify(){return this.realityBoostRatio>1&&!Pelle.isDoomed&&!isInCelestialReality()},storedTimeInsideEnslaved(t){return t<=1e3?t:Math.pow(10,Math.pow(Math.log10(t/1e3),.55))*1e3},feelEternity(){this.feltEternity?Modal.message.show(`You have already exposed this crack in the Reality. Time in this Eternity is being multiplied
        by your Eternity count, up to a maximum of ${formatX(1e66)}.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER},1):(D0.feelEternity.giveProgress(),this.feltEternity=!0,Modal.message.show(`Time in this Eternity will be multiplied by your Eternity count,
        up to a maximum of ${formatX(1e66)}.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER},1))},get feltEternity(){return player.celestials.enslaved.feltEternity},set feltEternity(t){player.celestials.enslaved.feltEternity=t},get nextHintCost(){return TimeSpan.fromYears(1e40*Math.pow(3,this.hintCostIncreases)).totalMilliseconds},get hintCostIncreases(){const t=player.celestials.enslaved.zeroHintTime-Date.now();return Math.clampMin(t/TimeSpan.fromDays(1).totalMilliseconds,0)},spendTimeForHint(){return player.celestials.enslaved.stored<this.nextHintCost?!1:(player.celestials.enslaved.stored-=this.nextHintCost,fa.hintCostIncreases===0?player.celestials.enslaved.zeroHintTime=Date.now()+TimeSpan.fromDays(1).totalMilliseconds:player.celestials.enslaved.zeroHintTime+=TimeSpan.fromDays(1).totalMilliseconds,!0)},quotes:jd.enslaved,symbol:""};class Dde extends Vd{get bits(){return player.celestials.enslaved.hintBits}set bits(e){player.celestials.enslaved.hintBits=e}get hasProgress(){return!!(player.celestials.enslaved.progressBits&1<<this.id)}get hasHint(){return this.hasProgress||this.isUnlocked}get hintInfo(){return this.config.hint}get completedInfo(){return typeof this.config.condition=="function"?this.config.condition():this.config.condition}giveProgress(){this.hasHint&&!this.hasProgress&&(player.celestials.enslaved.zeroHintTime-=Math.log(2)/Math.log(3)*TimeSpan.fromDays(1).totalMilliseconds,GameUI.notify.success("You found a crack in The Nameless Ones' Reality!",1e4)),player.celestials.enslaved.progressBits|=1<<this.id}}const D0=mapGameDataToObject(no.celestials.enslaved.progress,t=>new Dde(t)),m3={get bought(){return player.celestials.enslaved.tesseracts},get extra(){return this.bought*(SingularityMilestone.tesseractMultFromSingularities.effectOrDefault(1)-1)},get effectiveCount(){return this.bought+this.extra},buyTesseract(){this.canBuyTesseract&&(GameEnd.creditsEverClosed||player.celestials.enslaved.tesseracts++)},BASE_COSTS:[2,4,6,12,48,288,2304,23040,276480,3870720,61931520,1114767360],costs(t){return t>=this.BASE_COSTS.length?Decimal.pow10(Number.MAX_VALUE):Decimal.pow10(1e7*this.BASE_COSTS[Math.floor(t)])},get nextCost(){return this.costs(this.bought)},get canBuyTesseract(){return fa.isCompleted&&Currency.infinityPoints.gte(m3.nextCost)},capIncrease(t=this.bought){const e=t*SingularityMilestone.tesseractMultFromSingularities.effectOrDefault(1);return(e<1?0:25e4*Math.pow(2,e))*(AlchemyResource.boundless.effectValue+1)},get nextTesseractIncrease(){return this.capIncrease(this.bought+1)-this.capIncrease(this.bought)}};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.enslaved.isOpen&&fa.quotes.initial.show()});const xde={officialFixedSeed:69420,unlock(){player.speedrun.isUnlocked||(Modal.message.show(`You have unlocked Speedrun Mode! This allows you to start a new save file with some slight
      changes which can be helpful if you're trying to complete the game as quickly as possible. The option to
      start a Speedrun Save is now available in the Options tab, under Saving. Choosing to start a Speedrun Save
      will provide you with another modal with more in-depth information.`,{},3),player.speedrun.isUnlocked=!0)},canModifySeed(){return player.realities<1},modifySeed(t,e){player.speedrun.seedSelection=t;let i;switch(t){case SPEEDRUN_SEED_STATE.FIXED:player.reality.initialSeed=this.officialFixedSeed,player.speedrun.initialSeed=this.officialFixedSeed;return;case SPEEDRUN_SEED_STATE.RANDOM:i=Math.floor(1e13*Math.random()),player.reality.initialSeed=i,player.speedrun.initialSeed=i;return;case SPEEDRUN_SEED_STATE.PLAYER:player.reality.initialSeed=e,player.speedrun.initialSeed=e;return;default:throw new Error("Unrecognized speedrun seed setting option")}},seedModeText(t){const e=t??player.speedrun;switch(e.seedSelection){case SPEEDRUN_SEED_STATE.UNKNOWN:return"No seed data (old save)";case SPEEDRUN_SEED_STATE.FIXED:return`Official fixed seed (${e.initialSeed})`;case SPEEDRUN_SEED_STATE.RANDOM:return`Random seed (${e.initialSeed})`;case SPEEDRUN_SEED_STATE.PLAYER:return`Player seed (${e.initialSeed})`;default:throw new Error("Unrecognized speedrun seed option in seedModeText")}},generateName(t){if(t.trim()===""){const e=Math.floor(9999999*Math.random())+1;return`AD Player #${"0".repeat(6-Math.floor(Math.log10(e)))}${e}`}return t.length>40?`${t.slice(0,37)}...`:t},prepareSave(t){NG.restartWithCarryover(),player.speedrun.isUnlocked=!0,player.speedrun.isActive=!0,this.modifySeed(SPEEDRUN_SEED_STATE.FIXED),player.speedrun.name=t;for(const e of Object.keys(player.options.confirmations))player.options.confirmations[e]=!1;player.options.confirmations.glyphSelection=!0;for(const e of Object.keys(player.options.animations))typeof player.options.animations[e]=="boolean"&&(player.options.animations[e]=!1);Achievement(22).unlock(),Achievement(35).unlock(),Achievement(76).unlock(),player.speedrun.offlineTimeUsed=0,GameStorage.save()},startTimer(){if(player.speedrun.hasStarted)return;player.speedrun.hasStarted=!0,player.speedrun.startDate=Date.now(),player.lastUpdate=Date.now();let t=0;for(const e of ShopPurchase.all)e.config.instantPurchase||(t+=e.purchases*e.cost);this.setSTDUse(ShopPurchaseData.isIAPEnabled&&t>0)},isPausedAtStart(){return player.speedrun.isActive&&!player.speedrun.hasStarted},setSegmented(t){this.isPausedAtStart()||(player.speedrun.isSegmented=t)},setSTDUse(t){this.isPausedAtStart()||ShopPurchaseData.spentSTD===0||(player.speedrun.usedSTD=t)},mostRecentMilestone(){const t=player.speedrun.records.max();return t===0?0:player.speedrun.records.indexOf(t)}};class Mde extends yn{constructor(e){super(e),this.registerEvents(e.checkEvent,i=>this.tryComplete(i))}get name(){return this.config.name}get isReached(){return player.speedrun.records[this.config.id]!==0}tryComplete(e){this.config.checkRequirement(e)&&this.complete()}complete(){this.isReached||!player.speedrun.isActive||(player.speedrun.records[this.config.id]=Math.round(player.records.realTimePlayed),GameUI.notify.success(`Speedrun Milestone Reached: ${this.name}`))}}const Ib=mapGameDataToObject(no.speedrunMilestones,t=>new Mde(t));class Pde extends yn{get completions(){const e=player.celestials.v.runUnlocks[this.id];return e===void 0?0:e}get conditionBaseValue(){const e=this.config.values[this.completions];return e===void 0?this.config.values[this.completions-1]:e}get canBeReduced(){return this.completions<this.config.values.length&&this.completions!==0&&new Decimal(this.reduction).neq(this.config.maxShardReduction(this.conditionBaseValue))}get isReduced(){return player.celestials.v.goalReductionSteps[this.id]===0?!1:cd.shardReduction.canBeApplied&&this.reduction>0}get reductionCost(){const e=this.config.reductionStepSize?this.config.reductionStepSize:1;return this.config.isHard?(Math.pow(1.15,e)-1)/.15*zl.nextHardReductionCost(player.celestials.v.goalReductionSteps[this.id]):e*zl.nextNormalReductionCost()}get tiersReduced(){return player.celestials.v.goalReductionSteps[this.id]/100}get reduction(){const e=this.conditionBaseValue;return Math.clamp(this.config.shardReduction(this.tiersReduced),0,this.config.maxShardReduction(e))}get conditionValue(){let e=this.conditionBaseValue;return this.isReduced&&(e-=this.reduction),e}get formattedDescription(){return this.config.description(this.conditionValue)}set completions(e){player.celestials.v.runUnlocks[this.id]=e}tryComplete(){const e=player.celestials.v,i=this.config.currentValue();for(this.config.condition()&&Decimal.gte(i,e.runRecords[this.id])&&(e.runRecords[this.id]=i,e.runGlyphs[this.id]=Glyphs.copyForRecords(Glyphs.active.filter(n=>n!==null)));this.completions<this.config.values.length&&Decimal.gte(e.runRecords[this.id],this.conditionValue);)if(!(!zl.isFlipped&&this.config.isHard)){this.completions++,GameUI.notify.success(`You have unlocked V-Achievement
        '${this.config.name}' tier ${formatInt(this.completions)}`),zl.updateTotalRunUnlocks();for(const n of zl.quotes.all)n.requirement&&n.show()}}}class Ode extends Vd{get bits(){return player.celestials.v.unlockBits}set bits(e){player.celestials.v.unlockBits=e}get pelleDisabled(){return Pelle.isDoomed&&this!==cd.vAchievementUnlock}get isEffectActive(){return this.isUnlocked&&!this.pelleDisabled}get description(){return typeof this.config.description=="function"?this.config.description():this.config.description}get rewardText(){return typeof this.config.reward=="function"?this.config.reward():this.config.reward}get canBeUnlocked(){return this.config.requirement()&&!this.isUnlocked}get formattedEffect(){return!this.config.effect||!this.config.format?"":this.config.format(this.effectValue)}onUnlock(){GameUI.notify.success(this.description)}}const y3=Pde.createAccessor(no.celestials.v.runUnlocks),g3={all:y3.index.compact()},cd=mapGameDataToObject(no.celestials.v.unlocks,t=>new Ode(t)),zl={displayName:"V",possessiveName:"V's",spaceTheorems:0,checkForUnlocks(){for(const t of cd.all)t!==cd.vAchievementUnlock&&t.unlock();if(this.isRunning){for(const t of g3.all)t.tryComplete();this.spaceTheorems>=36&&Ib.complete36VAchievement.tryComplete()}cd.raUnlock.canBeApplied&&!Ra.unlocks.autoTP.canBeApplied&&Ra.checkForUnlocks()},get canUnlockCelestial(){return cd.vAchievementUnlock.canBeUnlocked},unlockCelestial(){player.celestials.v.unlockBits|=1<<cd.vAchievementUnlock.id,GameUI.notify.success("You have unlocked V, The Celestial Of Achievements!",1e4),zl.quotes.unlock.show()},initializeRun(){clearCelestialRuns(),player.celestials.v.run=!0,this.quotes.realityEnter.show()},updateTotalRunUnlocks(){let t=0;for(let e=0;e<player.celestials.v.runUnlocks.length;e++)e<6?t+=player.celestials.v.runUnlocks[e]:t+=player.celestials.v.runUnlocks[e]*2;this.spaceTheorems=t},reset(){player.celestials.v={unlockBits:0,run:!1,quotes:[],runUnlocks:[0,0,0,0,0,0,0,0,0],goalReductionSteps:[0,0,0,0,0,0,0,0,0],STSpent:0,runGlyphs:[[],[],[],[],[],[],[],[],[]],runRecords:[-10,0,0,0,0,0,0,0,0]},this.spaceTheorems=0},get availableST(){return zl.spaceTheorems-player.celestials.v.STSpent},get isRunning(){return player.celestials.v.run},get isFlipped(){return Ra.unlocks.unlockHardV.isUnlocked},get isFullyCompleted(){return this.spaceTheorems>=66},nextNormalReductionCost(){return 1e3},nextHardReductionCost(t){return 1e3*Math.pow(1.15,t)},quotes:jd.v,symbol:"⌬"};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.v.isOpen&&zl.quotes.initial.show()});class Nde extends Vd{get bits(){return player.celestials.ra.unlockBits}set bits(e){player.celestials.ra.unlockBits=e}get disabledByPelle(){return Pelle.isDoomed&&this.config.disabledByPelle}get isEffectActive(){return this.isUnlocked&&!this.disabledByPelle}get requirementText(){const e=this.pet.name;return this.level===1?`Unlock ${e}`:`Get ${e} to level ${this.level}`}get reward(){return typeof this.config.reward=="function"?this.config.reward():this.config.reward}get displayIcon(){return this.disabledByPelle?'<span class="fas fa-ban"></span>':this.config.displayIcon}get pet(){return ci.pets[this.config.pet]}get level(){return this.config.level}get canBeUnlocked(){return this.pet.level>=this.level&&!this.isUnlocked}onUnlock(){var e,i;(i=(e=this.config).onUnlock)==null||i.call(e)}}const Gde=mapGameDataToObject(GameDatabase.celestials.ra.unlocks,t=>new Nde(t));class Ude extends yn{get data(){return player.celestials.ra.pets[this.id]}get name(){return this.config.name}get chunkGain(){return this.config.chunkGain}get memoryGain(){return this.config.memoryGain}get color(){return this.config.color}get requiredUnlock(){var e,i;return(i=(e=this.config).requiredUnlock)==null?void 0:i.call(e)}get rawMemoryChunksPerSecond(){return this.config.rawMemoryChunksPerSecond()}get memoryProductionMultiplier(){return this.config.memoryProductionMultiplier()}get isUnlocked(){return this.requiredUnlock===void 0||this.requiredUnlock.isUnlocked}get isCapped(){return this.level>=ci.levelCap}get level(){return this.isUnlocked?this.data.level:0}set level(e){this.data.level=e}get memories(){return this.data.memories}set memories(e){this.data.memories=e}get memoryChunks(){return this.data.memoryChunks}set memoryChunks(e){this.data.memoryChunks=e}get requiredMemories(){return ci.requiredMemoriesForLevel(this.level)}get memoryChunksPerSecond(){if(!this.canGetMemoryChunks)return 0;let e=this.rawMemoryChunksPerSecond*this.chunkUpgradeCurrentMult*Effects.product(ci.unlocks.continuousTTBoost.effects.memoryChunks,GlyphSacrifice.reality);return this.hasRemembrance?e*=ci.remembrance.multiplier:ci.petWithRemembrance&&(e*=ci.remembrance.nerf),e}get canGetMemoryChunks(){return this.isUnlocked&&ci.isRunning}get hasRemembrance(){return ci.petWithRemembrance===this.name}get memoryUpgradeCurrentMult(){return Math.pow(1.3,this.data.memoryUpgrades)}get chunkUpgradeCurrentMult(){return Math.pow(1.5,this.data.chunkUpgrades)}get memoryUpgradeCost(){return 1e3*Math.pow(5,this.data.memoryUpgrades)}get chunkUpgradeCost(){return 5e3*Math.pow(25,this.data.chunkUpgrades)}get canBuyMemoryUpgrade(){return this.memoryUpgradeCost<=this.memories}get canBuyChunkUpgrade(){return this.chunkUpgradeCost<=this.memories}get memoryUpgradeCapped(){return this.memoryUpgradeCost>=.5*ci.requiredMemoriesForLevel(ci.levelCap-1)}get chunkUpgradeCapped(){return this.chunkUpgradeCost>=.5*ci.requiredMemoriesForLevel(ci.levelCap-1)}purchaseMemoryUpgrade(){!this.canBuyMemoryUpgrade||this.memoryUpgradeCapped||(this.memories-=this.memoryUpgradeCost,this.data.memoryUpgrades++)}purchaseChunkUpgrade(){!this.canBuyChunkUpgrade||this.chunkUpgradeCapped||(this.memories-=this.chunkUpgradeCost,this.data.chunkUpgrades++)}levelUp(){this.memories<this.requiredMemories||(this.memories-=this.requiredMemories,this.level++,ci.checkForUnlocks())}get unlocks(){return ci.unlocks.all.filter(e=>e.pet===this).sort((e,i)=>e.level-i.level)}tick(e,i){const n=e/1e3,r=i?n*this.memoryChunksPerSecond:0,s=n*(this.memoryChunks+r/2)*ci.productionPerMemoryChunk*this.memoryUpgradeCurrentMult;this.memoryChunks+=r,this.memories+=s}reset(){this.data.level=1,this.data.memories=0,this.data.memoryChunks=0,this.data.memoryUpgrades=0,this.data.chunkUpgrades=0}}const Lde=mapGameDataToObject(GameDatabase.celestials.ra.pets,t=>new Ude(t)),ci={displayName:"Ra",possessiveName:"Ra's",unlocks:Gde,pets:Lde,remembrance:{multiplier:5,nerf:.5,requiredLevels:20,get isUnlocked(){return ci.totalPetLevel>=this.requiredLevels}},reset(){const t=player.celestials.ra;t.unlockBits=0,t.run=!1,t.charged=new Set,t.disCharge=!1,t.peakGamespeed=1;for(const e of ci.pets.all)e.reset()},memoryTick(t,e){if(this.isUnlocked)for(const i of ci.pets.all)i.tick(t,e)},get productionPerMemoryChunk(){let t=Effects.product(ci.unlocks.continuousTTBoost.effects.memories,Achievement(168));for(const e of ci.pets.all)e.isUnlocked&&(t*=e.memoryProductionMultiplier);return t},get memoryBoostResources(){const t=[];for(const e of ci.pets.all)e.memoryProductionMultiplier!==1&&t.push(e.memoryGain);return Achievement(168).isUnlocked&&t.push("Achievement 168"),ci.unlocks.continuousTTBoost.canBeApplied&&t.push("current TT"),t.length===1?`${t[0]}`:t.length===2?`${t[0]} and ${t[1]}`:`${t.slice(0,-1).join(", ")}, and ${t[t.length-1]}`},requiredMemoriesForLevel(t){if(t>=ci.levelCap)return 1/0;const e=t+Math.pow(t,2)/10,i=Math.pow(1.5,Math.max(0,t-15));return Math.floor(Math.pow(e,5.52)*i*1e6)},timeToGoalString(t,e){const i=Enslaved.isStoringRealTime?0:ci.productionPerMemoryChunk*t.memoryUpgradeCurrentMult*t.memoryChunksPerSecond/2,n=ci.productionPerMemoryChunk*t.memoryUpgradeCurrentMult*t.memoryChunks,r=-e,s=i===0?-r/n:(Math.sqrt(Math.pow(n,2)-4*i*r)-n)/(2*i);return Number.isFinite(s)?`in ${TimeSpan.fromSeconds(s).toStringShort()}`:""},get totalPetLevel(){return this.pets.all.map(t=>t.isUnlocked?t.level:0).sum()},get levelCap(){return 25},get maxTotalPetLevel(){return this.levelCap*this.pets.all.length},checkForUnlocks(){if(VUnlocks.raUnlock.canBeApplied){for(const t of ci.unlocks.all)t.unlock();ci.checkForQuotes()}},checkForQuotes(){for(const t of ci.quotes.all)t.requirement&&t.show()},initializeRun(){clearCelestialRuns(),player.celestials.ra.run=!0,this.quotes.realityEnter.show()},toggleMode(){player.celestials.ra.activeMode=!player.celestials.ra.activeMode},get isUnlocked(){return V.spaceTheorems>=36},get isRunning(){return player.celestials.ra.run},get totalCharges(){return ci.unlocks.chargedInfinityUpgrades.effectOrDefault(0)},get chargesLeft(){return this.totalCharges-player.celestials.ra.charged.size},get canBuyTriad(){return ci.unlocks.unlockHardV.canBeApplied},get petWithRemembrance(){return player.celestials.ra.petWithRemembrance},set petWithRemembrance(t){player.celestials.ra.petWithRemembrance=t},updateAlchemyFlow(t){const e=1e3/t;for(const i of AlchemyResources.all)i.ema.addValue((i.amount-i.before)*e),i.before=i.amount},applyAlchemyReactions(t){if(!ci.unlocks.effarigUnlock.canBeApplied)return;const e=AlchemyReactions.all.compact().sort((i,n)=>n.priority-i.priority);for(const i of e)i.combineReagents();this.updateAlchemyFlow(t)},get alchemyResourceCap(){return 25e3},get momentumValue(){const t=TimeSpan.fromMilliseconds(player.celestials.ra.momentumTime).totalHours;return Math.clampMax(1+.005*t,AlchemyResource.momentum.effectValue)},quotes:jd.ra,symbol:"<i class='fas fa-sun'></i>"},Bde={get additionThreshold(){return 1e36},get empowermentThreshold(){return 1e43},get boostingThreshold(){return 1e60},getSacrificePower(t){if(Pelle.isDisabled("alteration"))return 0;const e=player.reality.glyphs.sac[t];if(e===void 0)throw new Error("Unknown sacrifice type");return e},get isUnlocked(){return Pelle.isDisabled("alteration")?!1:ci.unlocks.alteredGlyphs.canBeApplied},isAdded(t){return this.isUnlocked&&this.getSacrificePower(t)>=this.additionThreshold},isEmpowered(t){return this.isUnlocked&&this.getSacrificePower(t)>=this.empowermentThreshold},isBoosted(t){return this.isUnlocked&&this.getSacrificePower(t)>=this.boostingThreshold},sacrificeBoost(t){const e=Math.clampMax(this.getSacrificePower(t),GlyphSacrificeHandler.maxSacrificeForEffects);return Math.log10(Math.clampMin(e/this.boostingThreshold,1))/2},baseAdditionColor(t=Theme.current().isDark()){return t?"#CCCCCC":"black"},baseEmpowermentColor(t=Theme.current().isDark()){return t?"#EEEE30":"#C6C610"},baseBoostColor(t=Theme.current().isDark()){return t?"#60DDDD":"#28BDBD"},getAdditionColor(t){const e=CosmeticGlyphTypes[t].currentColor.bg==="black";return this.isAdded(t)?this.baseAdditionColor(e):void 0},getEmpowermentColor(t){const e=CosmeticGlyphTypes[t].currentColor.bg==="black";return this.isEmpowered(t)?this.baseEmpowermentColor(e):void 0},getBoostColor(t){const e=CosmeticGlyphTypes[t].currentColor.bg==="black";return this.isBoosted(t)?this.baseBoostColor(e):void 0}};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.ra.isOpen&&ci.quotes.unlock.show()});class v3 extends yn{constructor(e){super(e),this.ema=new ExponentialMovingAverage(.01,10,100,.01),this._before=0}get name(){return this.config.name}get symbol(){return this.config.symbol}get description(){return this.config.description}get isBaseResource(){return this.config.isBaseResource===!0}get data(){return player.celestials.ra.alchemy[this.id]}get amount(){return this.data.amount}set amount(e){this.data.amount=e}get before(){return this._before}set before(e){this._before=e}get flow(){return this.ema.average}get fillFraction(){return Math.clamp(this.amount/this.cap,0,1)}get unlockedWith(){return Ra.pets.effarig}get unlockedAt(){return this.config.unlockedAt}get isUnlocked(){return this.unlockedWith.level>=this.unlockedAt}get lockText(){return`${this.unlockedWith.name} Level ${formatInt(this.unlockedAt)}`}get isCustomEffect(){return!0}get effectValue(){return V.isRunning&&this.config.id===14?0:this.config.effect(Pelle.isDisabled("alchemy")?0:this.amount)}get reaction(){return b3.all[this.id]}get cap(){throw new NotImplementedError}get capped(){return this.amount>=this.cap}}class Fde extends v3{constructor(e){super(e),this._name=e.name.toLowerCase()}get highestRefinementValue(){return player.celestials.ra.highestRefinementValue[this._name]}set highestRefinementValue(e){player.celestials.ra.highestRefinementValue[this._name]=Math.max(this.highestRefinementValue,e)}get cap(){return Math.clampMax(Ra.alchemyResourceCap,this.highestRefinementValue)}}class $de extends v3{get cap(){const e=this.reaction.reagents.map(i=>i.resource.cap);return Math.min(...e)}}class Hde{constructor(e,i){this._product=e,this._reagents=i}get product(){return this._product}get reagents(){return this._reagents}get reactionYield(){if(!this._product.isUnlocked||this._reagents.some(n=>!n.resource.isUnlocked))return 0;const e=(this._reagents.map(n=>n.resource.amount).min()-this._product.amount)/100,i=this._reagents.map(n=>n.resource.amount/n.cost).min();return Math.min(i,Math.max(e,1))}get actualYield(){const e=this.baseProduction*this.reactionYield*this.reactionEfficiency,i=this._product.amount,n=i+e;let r=this.reactionYield;for(const s of this._reagents){const a=s.resource.amount,o=s.resource.amount-this.reactionYield*s.cost,c=a-i,d=o-n;r=Math.min(r,this.reactionYield*c/(c-d))}return Math.clampMin(r,0)}get priority(){let e=Glyphs.levelCap;for(const i of this._reagents){const n=i.resource.amount-i.cost*this.actualYield;e=Math.min(e,n)}return e}get isActive(){return this._product.data.reaction}set isActive(e){this._product.data.reaction=e}get isReality(){return this._product.id===ALCHEMY_RESOURCE.REALITY}get baseProduction(){return this.isReality?1:5}get reactionEfficiency(){return this.isReality?1:Fv.synergism.effectValue}get reactionProduction(){return this.baseProduction*this.reactionEfficiency}combineReagents(){if(!this.isActive||this.reactionYield===0)return;const e=Fv.unpredictability.effectValue,i=1+poissonDistribution(e/(1-e)),n=this._product.cap;for(let r=0;r<i;r++){const s=this.actualYield;for(const o of this._reagents)o.resource.amount-=s*o.cost;const a=Math.clampMin(s*this.reactionProduction,.05);this._product.amount=Math.clampMax(this._product.amount+a,n)}}}const Fv=mapGameDataToObject(GameDatabase.celestials.alchemy.resources,t=>t.isBaseResource?new Fde(t):new $de(t)),MS={all:Fv.all,base:Fv.all.filter(t=>t.isBaseResource)},b3=function(){function t(e){return e.config.reagents.map(i=>({resource:MS.all.find(n=>n.id===i.resource),cost:i.amount}))}return{all:MS.all.map(e=>e.isBaseResource?null:new Hde(e,t(e)))}}();class kT{constructor(e,i){this._tier=i,this._getData=e;const n=[null,"First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth"];this._displayName=n[i];const r=[null,"1st","2nd","3rd","4th","5th","6th","7th","8th"];this._shortDisplayName=r[i]}get tier(){return this._tier}get displayName(){return this._displayName}get shortDisplayName(){return this._shortDisplayName}get data(){return this._getData()[this.tier-1]}get amount(){return this.data.amount}set amount(e){this.data.amount=e}get bought(){return this.data.bought}set bought(e){this.data.bought=e}get productionPerSecond(){throw new NotImplementedError}get productionPerRealSecond(){return this.productionPerSecond.times(getGameSpeedupForDisplay())}productionForDiff(e){return this.productionPerSecond.times(e/1e3)}produceCurrency(e,i){e.add(this.productionForDiff(i))}produceDimensions(e,i){e.amount=e.amount.plus(this.productionForDiff(i))}static get dimensionCount(){return 8}static createAccessor(){const e=Array.range(1,this.dimensionCount).map(n=>new this(n));e.unshift(null);const i=n=>e[n];return i.index=e,i}}const Vde=5,qde=10,Yde=[1.65,1.6,1.55,1.5],Wde=10,jde=10,zde=10,zw=.92,_3=500,E3=500,Xde=1200;class T3 extends kT{constructor(e){super(()=>player.celestials.laitela.dimensions,e)}get productionPerSecond(){return this.powerDE*1e3/this.interval}get unlockUpgrade(){return ImaginaryUpgrade(this.tier+14)}get isUnlocked(){return this.unlockUpgrade.isBought}get ascensions(){return this.data.ascensionCount}get intervalPurchaseCap(){return 10}get rawInterval(){const e=zw;return 1e3*Math.pow(4,this.tier-1)*Math.pow(e,this.data.intervalUpgrades)*Math.pow(SingularityMilestone.ascensionIntervalScaling.effectOrDefault(1200),this.ascensions)*SingularityMilestone.darkDimensionIntervalReduction.effectOrDefault(1)}get interval(){return Math.clampMin(this.intervalPurchaseCap,this.rawInterval)}get commonDarkMult(){return L.D1.timesEffectsOf(SingularityMilestone.darkFromTesseracts,SingularityMilestone.darkFromGlyphLevel,SingularityMilestone.darkFromTheorems,SingularityMilestone.darkFromDM4,SingularityMilestone.darkFromGamespeed,SingularityMilestone.darkFromDilatedTime)}get powerDMPerAscension(){return _3+SingularityMilestone.improvedAscensionDM.effectOrDefault(0)}get powerDM(){return this.isUnlocked?new Decimal(1+2*Math.pow(1.15,this.data.powerDMUpgrades)).times(Laitela.realityReward).times(Laitela.darkMatterMult).times(this.commonDarkMult).times(Math.pow(this.powerDMPerAscension,this.ascensions)).timesEffectsOf(SingularityMilestone.darkMatterMult,SingularityMilestone.multFromInfinitied).dividedBy(Math.pow(1e4,Math.pow(this.tier-1,.5))):new Decimal(0)}get powerDE(){if(!this.isUnlocked||Pelle.isDoomed)return 0;const e=Math.pow(15,this.tier-1),i=Laitela.isFullyDestabilized?8:1;return new Decimal((1+this.data.powerDEUpgrades*.1)*Math.pow(1.005,this.data.powerDEUpgrades)*e/1e3).times(this.commonDarkMult).times(Math.pow(E3,this.ascensions)).timesEffectsOf(SingularityMilestone.darkEnergyMult,SingularityMilestone.realityDEMultiplier,SingularityMilestone.multFromInfinitied).toNumber()*i}get intervalAfterAscension(){const e=Decimal.affordGeometricSeries(Currency.darkMatter.value,this.rawIntervalCost,this.intervalCostIncrease,0).toNumber();return Math.clampMin(this.intervalPurchaseCap,SingularityMilestone.ascensionIntervalScaling.effectOrDefault(1200)*this.rawInterval*Math.pow(zw,e))}get adjustedStartingCost(){return 10*Math.pow(Xde,[null,0,2,5,13][this.tier])*SingularityMilestone.darkDimensionCostReduction.effectOrDefault(1)}get rawIntervalCost(){return Decimal.pow(this.intervalCostIncrease,this.data.intervalUpgrades).times(this.adjustedStartingCost).times(Wde)}get intervalCost(){return this.rawIntervalCost.floor()}get intervalCostIncrease(){return Math.pow(Vde,SingularityMilestone.intervalCostScalingReduction.effectOrDefault(1))}get rawPowerDMCost(){return Decimal.pow(this.powerDMCostIncrease,this.data.powerDMUpgrades).times(this.adjustedStartingCost).times(jde)}get powerDMCost(){return this.rawPowerDMCost.floor()}get powerDMCostIncrease(){return qde}get rawPowerDECost(){return Decimal.pow(this.powerDECostIncrease,this.data.powerDEUpgrades).times(this.adjustedStartingCost).times(zde)}get powerDECost(){return this.rawPowerDECost.floor()}get powerDECostIncrease(){return Yde[this.tier-1]}get timeSinceLastUpdate(){return this.data.timeSinceLastUpdate}set timeSinceLastUpdate(e){this.data.timeSinceLastUpdate=e}get canBuyInterval(){return Currency.darkMatter.gte(this.intervalCost)&&this.interval>this.intervalPurchaseCap}get canBuyPowerDM(){return Currency.darkMatter.gte(this.powerDMCost)}get canBuyPowerDE(){return Currency.darkMatter.gte(this.powerDECost)}get maxIntervalPurchases(){return Math.ceil(Math.log(this.intervalPurchaseCap/this.interval)/Math.log(zw))}buyManyInterval(e){if(e>this.maxIntervalPurchases)return!1;const i=this.rawIntervalCost.times(Decimal.pow(this.intervalCostIncrease,e).minus(1)).div(this.intervalCostIncrease-1).floor();return Currency.darkMatter.purchase(i)?(this.data.intervalUpgrades+=e,!0):!1}buyManyPowerDM(e){const i=this.rawPowerDMCost.times(Decimal.pow(this.powerDMCostIncrease,e).minus(1)).div(this.powerDMCostIncrease-1).floor();return Currency.darkMatter.purchase(i)?(this.data.powerDMUpgrades+=e,!0):!1}buyManyPowerDE(e){const i=this.rawPowerDECost.times(Decimal.pow(this.powerDECostIncrease,e).minus(1)).div(this.powerDECostIncrease-1).floor();return Currency.darkMatter.purchase(i)?(this.data.powerDEUpgrades+=e,!0):!1}buyInterval(){return this.buyManyInterval(1)}buyPowerDM(){return this.buyManyPowerDM(1)}buyPowerDE(){return this.buyManyPowerDE(1)}ascend(){if(!(this.interval>this.intervalPurchaseCap))for(this.data.ascensionCount++;this.buyInterval(););}static get dimensionCount(){return 4}reset(){this.data.amount=L.D1,this.data.intervalUpgrades=0,this.data.powerDMUpgrades=0,this.data.powerDEUpgrades=0,this.data.timeSinceLastUpdate=0,this.data.ascensionCount=0}}const Oh=T3.createAccessor(),AE={all:Oh.index.compact(),tick(t){if(Laitela.isUnlocked){for(let e=4;e>=1;e--){const i=Oh(e);if(i.isUnlocked&&(i.timeSinceLastUpdate+=t,i.interval<i.timeSinceLastUpdate)){const n=Math.floor(i.timeSinceLastUpdate/i.interval),r=i.amount.times(n).times(i.powerDM);e===1?Currency.darkMatter.add(r):Oh(e-1).amount=Oh(e-1).amount.plus(r),Currency.darkEnergy.add(n*i.powerDE),i.timeSinceLastUpdate-=i.interval*n}}SingularityMilestone.dim4Generation.canBeApplied&&Laitela.annihilationUnlocked&&(Oh(4).amount=Oh(4).amount.plus(SingularityMilestone.dim4Generation.effectValue*t/1e3))}},reset(){for(const t of AE.all)t.reset();Currency.darkMatter.reset()}},Ad={displayName:"Lai'tela",possessiveName:"Lai'tela's",get celestial(){return player.celestials.laitela},get isUnlocked(){return ImaginaryUpgrade(15).isBought},initializeRun(){clearCelestialRuns(),this.celestial.run=!0},get isRunning(){return this.celestial.run},get difficultyTier(){return player.celestials.laitela.difficultyTier},set difficultyTier(t){player.celestials.laitela.difficultyTier=t},get maxAllowedDimension(){return 8-this.difficultyTier},get isFullyDestabilized(){return Ad.maxAllowedDimension===0},get continuumUnlocked(){return ImaginaryUpgrade(15).isBought&&!Pelle.isDisabled("continuum")},get continuumActive(){return this.continuumUnlocked&&!player.auto.disableContinuum&&!Pelle.isDisabled("continuum")},setContinuum(t){player.auto.disableContinuum=!t,player.auto.disableContinuum||(player.requirementChecks.reality.noContinuum=!1)},get matterExtraPurchaseFactor(){return 1+.5*Math.pow(Decimal.pLog10(Currency.darkMatter.max)/50,.4)*(1+SingularityMilestone.continuumMult.effectOrDefault(0))},get realityReward(){return Math.clampMin(Math.pow(100,this.difficultyTier)*Math.pow(360/player.celestials.laitela.fastestCompletion,2),1)},get entropyGainPerSecond(){return Math.clamp(Math.pow(Currency.antimatter.value.add(1).log10()/1e11,2),0,100)/200},get darkMatterMultGain(){return Decimal.pow(Currency.darkMatter.value.dividedBy(this.annihilationDMRequirement).plus(1).log10(),1.5).toNumber()*ImaginaryUpgrade(21).effectOrDefault(1)},get darkMatterMult(){return this.celestial.darkMatterMult},get darkMatterMultRatio(){return(this.celestial.darkMatterMult+this.darkMatterMultGain)/this.celestial.darkMatterMult},get annihilationUnlocked(){return ImaginaryUpgrade(19).isBought},get annihilationDMRequirement(){return 1e60},get canAnnihilate(){return Ad.annihilationUnlocked&&Currency.darkMatter.gte(this.annihilationDMRequirement)},annihilate(t){return!t&&!this.canAnnihilate?!1:(this.celestial.darkMatterMult+=this.darkMatterMultGain,AE.reset(),Ad.quotes.annihilation.show(),Achievement(176).unlock(),!0)},maxAllDMDimensions(t){const i=AE.all.filter(s=>s.isUnlocked&&s.tier<=t).map(s=>[[s.rawIntervalCost,s.intervalCostIncrease,s.maxIntervalPurchases,a=>s.buyManyInterval(a)],[s.rawPowerDMCost,s.powerDMCostIncrease,1/0,a=>s.buyManyPowerDM(a)],[s.rawPowerDECost,s.powerDECostIncrease,1/0,a=>s.buyManyPowerDE(a)]]).flat(1),n=function(s,a){s[3](a),s[0]=s[0].times(Decimal.pow(s[1],a)),s[2]-=a},r=Currency.darkMatter.value;for(const s of i){const a=Math.clamp(Math.floor(r.times(.02).div(s[0]).log(s[1])),0,s[2]);n(s,a)}for(;i.some(s=>s[0].lte(r)&&s[2]>0);){const s=i.filter(a=>a[2]>0).sort((a,o)=>a[0].minus(o[0]).sign())[0];n(s,1)}},reset(){this.annihilate(!0),this.celestial.darkMatterMult=1,Currency.darkMatter.max=L.D1,Currency.darkMatter.reset(),Currency.singularities.reset(),this.celestial.fastestCompletion=3600,this.celestial.difficultyTier=0,this.celestial.singularityCapIncreases=0},quotes:jd.laitela,symbol:"ᛝ"};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{Tab.celestials.laitela.isOpen&&Ad.quotes.unlock.show()});class Kde extends yn{constructor(e){const i=e.effect,n=Yf([{},e]);n.effect=()=>i(this.completions),super(n),this._rawEffect=i}get start(){return this.config.start}get repeat(){return this.config.repeat}get limit(){return this.config.limit}get isUnique(){return this.repeat===0}get isUnlocked(){return Currency.singularities.gte(this.start)}get increaseThreshold(){return this.config.increaseThreshold}nerfCompletions(e){const i=this.increaseThreshold;return!i||e<i?e:i+(e-i)/3}unnerfCompletions(e){const i=this.increaseThreshold;return!i||e<i?e:i+(e-i)*3}get previousGoal(){return this.isUnique?1:this.isUnlocked?this.start*Math.pow(this.repeat,this.unnerfCompletions(this.completions)-1):0}get nextGoal(){return this.isUnique?this.start:this.start*Math.pow(this.repeat,this.unnerfCompletions(this.completions+1)-1)}get rawCompletions(){return this.isUnique?this.isUnlocked?1:0:this.isUnlocked?1+(Math.log(Currency.singularities.value)-Math.log(this.start))/Math.log(this.repeat):0}get completions(){return Math.min(Math.floor(this.nerfCompletions(this.rawCompletions)),this.limit)}get remainingSingularities(){return this.nextGoal-Currency.singularities.value}get progressToNext(){const e=(Currency.singularities.value-this.previousGoal)/this.nextGoal;return formatPercents(Math.clampMax(e,1))}get isMaxed(){return this.isUnique&&this.isUnlocked||this.completions>=this.limit}get effectDisplay(){return Number.isFinite(this.effectValue)?this.config.effectFormat(this.effectValue):"N/A"}get nextEffectDisplay(){return this.config.effectFormat(this._rawEffect(this.completions+1))}get description(){return this.config.description}get canBeApplied(){return this.isUnlocked&&!Pelle.isDisabled("singularity")}}const tv=mapGameDataToObject(GameDatabase.celestials.singularityMilestones,t=>new Kde(t)),$v={all:tv.all,lastNotified:player.celestials.laitela.lastCheckedMilestones,get sorted(){return this.all.sort((t,e)=>t.remainingSingularities-e.remainingSingularities)},sortedForCompletions(t){const e=player.celestials.laitela.singularitySorting;let i;switch(e.sortResource){case SINGULARITY_MILESTONE_SORT.SINGULARITIES_TO_NEXT:i=a=>a.isMaxed?1+Math.log10(a.isUnique?a.nextGoal:a.previousGoal)/1e3:Math.log10(a.remainingSingularities)/100;break;case SINGULARITY_MILESTONE_SORT.CURRENT_COMPLETIONS:i=a=>{const o=Math.clampMin(a.previousGoal,1),c=Math.clamp(Math.log(Currency.singularities.value/o)/Math.log(a.nextGoal/o),0,1);return(a.completions+c)/20};break;case SINGULARITY_MILESTONE_SORT.PERCENT_COMPLETIONS:i=a=>{const o=Number.isFinite(a.limit)?a.limit:100,c=Math.log(Currency.singularities.value/a.previousGoal)/Math.log(a.nextGoal/a.previousGoal);return Math.clampMax((a.completions+c)/o,1)+(Number.isFinite(a.limit)?0:1)};break;case SINGULARITY_MILESTONE_SORT.FINAL_COMPLETION:i=a=>{const o=Number.isFinite(a.limit)?a.limit:50;return Math.log10(a.config.start*Math.pow(a.config.repeat,o-1))/100};break;case SINGULARITY_MILESTONE_SORT.MOST_RECENT:i=a=>a.isUnlocked?Math.log10(a.isUnique?a.nextGoal:a.previousGoal)/100:1+Math.log10(a.start)/1e3;break;default:throw new Error("Unrecognized Singularity Milestone sorting option (order)")}let n;switch(e.showCompleted){case COMPLETED_MILESTONES.FIRST:n=10;break;case COMPLETED_MILESTONES.LAST:n=-10;break;case COMPLETED_MILESTONES.IGNORED:n=0;break;default:throw new Error("Unrecognized Singularity Milestone sorting option (completed milestones)")}const r=a=>a.previousGoal>player.celestials.laitela.lastCheckedMilestones&&t?20:0,s=a=>(a.isMaxed?n:0)+(e.sortOrder?i(a):-i(a))+r(a);return this.sorted.sort((a,o)=>s(o)-s(a))},get nextMilestoneGroup(){return this.sortedForCompletions(!1).filter(t=>!t.isMaxed).slice(0,6)},get unseenMilestones(){const t=player.celestials.laitela;return qO.filter(e=>e>t.lastCheckedMilestones&&Currency.singularities.gte(e))},get unnotifiedMilestones(){return qO.filter(t=>t>this.lastNotified&&Currency.singularities.gte(t))}},qO=function(){return $v.all.map(t=>Array.range(0,Math.min(50,t.limit)).filter(e=>!t.increaseThreshold||e<=t.increaseThreshold||e>t.increaseThreshold&&(e-t.increaseThreshold)%3===2).map(e=>t.start*Math.pow(t.repeat,e))).flat(1/0).filter(t=>t<1e100).sort((t,e)=>t-e)}(),Zde={get cap(){return 200*Math.pow(10,player.celestials.laitela.singularityCapIncreases)},get gainPerCapIncrease(){return tv.improvedSingularityCap.effectOrDefault(11)},get singularitiesGained(){return Math.floor(Math.pow(this.gainPerCapIncrease,player.celestials.laitela.singularityCapIncreases)*tv.singularityMult.effectOrDefault(1)*(1+ImaginaryUpgrade(10).effectOrDefault(0)))},get timePerCondense(){return this.cap/Currency.darkEnergy.productionPerSecond},get timeUntilCap(){return(this.cap-Currency.darkEnergy.value)/Currency.darkEnergy.productionPerSecond},get timeDelayFromAuto(){return this.timePerCondense*(tv.autoCondense.effectOrDefault(1/0)-1)},get capIsReached(){return Currency.darkEnergy.gte(this.cap)},increaseCap(){player.celestials.laitela.singularityCapIncreases>=50||player.celestials.laitela.singularityCapIncreases++},decreaseCap(){player.celestials.laitela.singularityCapIncreases!==0&&player.celestials.laitela.singularityCapIncreases--},perform(){if(!(!this.capIsReached||Pelle.isDoomed)){EventHub.dispatch(GAME_EVENT.SINGULARITY_RESET_BEFORE),Currency.darkEnergy.reset(),Currency.singularities.add(this.singularitiesGained);for(const t of Laitela.quotes.all)t.requirement&&t.show();EventHub.dispatch(GAME_EVENT.SINGULARITY_RESET_AFTER)}}};EventHub.logic.on(GAME_EVENT.GAME_LOAD,()=>$v.lastNotified=Currency.singularities.value);EventHub.logic.on(GAME_EVENT.SINGULARITY_RESET_AFTER,()=>{const t=$v.unnotifiedMilestones.length;t!==0&&(t===1?GameUI.notify.blackHole("You reached a Singularity milestone!"):GameUI.notify.blackHole(`You reached ${formatInt(t)} Singularity milestones!`),$v.lastNotified=Currency.singularities.value)});const Lp={chars:{0:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈́","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],1:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],2:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͏","͜","͝","͞","͟","͠","͢","̸","̷","͡","҉"]},random(t,e){if(t==1)return 0;const i=66669*e%981/997;return t?Math.floor(i*t+1)-1:i},generate(t,e=0){const i=t.split("");let n=i.reduce((r,s)=>r+s.charCodeAt(0),0);return i.map(r=>{if(r==" ")return r;for(let s=0;s<e;s++){const a=Lp.random(3,n++);Lp.random(10,n++)/10>=.5&&(r+=Lp.chars[a][Lp.random(Lp.chars[a].length,n++)])}return r}).join("")}},Qde=Lp.generate,YO={achievements:()=>({}),IPMults:()=>({}),EPMults:()=>({}),galaxies:()=>({}),InfinitiedMults:()=>({}),infinitiedGen:()=>({}),eternityGain:()=>({}),eternityMults:()=>({}),studies:()=>({}),EPgen:()=>({}),autoec:()=>({}),replicantiIntervalMult:()=>({}),tpMults:()=>({}),glyphs:()=>!PelleRifts.vacuum.milestones[0].canBeApplied,V:()=>({}),singularity:()=>({}),continuum:()=>({}),alchemy:()=>({}),achievementMult:()=>({}),blackhole:()=>({}),effarig:()=>({}),imaginaryUpgrades:()=>({}),glyphsac:()=>({}),antimatterDimAutobuyer1:()=>is.antimatterDimAutobuyers1,antimatterDimAutobuyer2:()=>is.antimatterDimAutobuyers1,antimatterDimAutobuyer3:()=>is.antimatterDimAutobuyers1,antimatterDimAutobuyer4:()=>is.antimatterDimAutobuyers1,antimatterDimAutobuyer5:()=>is.antimatterDimAutobuyers2,antimatterDimAutobuyer6:()=>is.antimatterDimAutobuyers2,antimatterDimAutobuyer7:()=>is.antimatterDimAutobuyers2,antimatterDimAutobuyer8:()=>is.antimatterDimAutobuyers2,tickspeedAutobuyer:()=>is.tickspeedAutobuyer,dimBoostAutobuyer:()=>is.dimBoostAutobuyer,galaxyAutobuyer:()=>is.galaxyAutobuyer,timeTheoremAutobuyer:()=>({}),rupg10:()=>({}),dtMults:()=>({}),chargedInfinityUpgrades:()=>({}),alteration:()=>({}),timeTheorems:()=>({})},Cs={symbol:"♅",possessiveName:"Pelle's",initializeRun(){if(this.isDoomed){Cs.armageddon(!0);return}if(Glyphs.harshAutoClean(),!Glyphs.unequipAll()){Modal.hideAll(),Modal.message.show(`Dooming your Reality will unequip your Glyphs. Some of your
        Glyphs could not be unequipped due to lack of inventory space.`,1);return}if(Glyphs.harshAutoClean(),Glyphs.freeInventorySpace<5){Modal.hideAll(),Modal.message.show(`You must have enough empty unprotected Glyph slots for
        ${formatInt(5)} additional Glyphs in order to Doom your Reality.`,1);return}for(const n of BASIC_GLYPH_TYPES)Glyphs.addToInventory(GlyphGenerator.doomedGlyph(n));Glyphs.refreshActive(),player.options.confirmations.glyphReplace=!0,player.reality.automator.state.repeat=!1,player.reality.automator.state.forceRestart=!1,BlackHoles.arePaused&&BlackHoles.togglePause(),player.celestials.pelle.doomed=!0,Cs.armageddon(!1),respecTimeStudies(!0),ri.infinityPoints.reset(),player.IPMultPurchases=0,Autobuyer.bigCrunch.mode=AUTO_CRUNCH_MODE.AMOUNT,disChargeAll(),clearCelestialRuns(),player.auto.antimatterDims.isActive=!0,player.buyUntil10=!0,player.records.realTimeDoomed=0;for(const n of AlchemyResources.all)n.amount=0;AutomatorBackend.stop();const t=-2&1<<GameDatabase.tabs.find(n=>n.key==="shop").id;player.options.hiddenTabBits&=t;const e=["statistics","achievements","reality","celestials"],i=GameDatabase.tabs.filter(n=>e.includes(n.key)).map(n=>n.id);for(let n=0;n<GameDatabase.tabs.length;n++)player.options.hiddenSubtabBits[n]&=i.includes(n)?-1:0;Cs.quotes.initial.show(),GameStorage.save(!0)},get displayName(){return Date.now()%4e3>500?"Pelle":Xn.randomCrossWords("Pelle")},get isUnlocked(){return ImaginaryUpgrade(25).isBought},isDisabled(t){if(!this.isDoomed)return!1;if(!t)return!0;if(!YO[t])return console.error(`Mechanic ${t} isn't present in the disabledMechanicUnlocks!`),!0;const e=YO[t]();return typeof e=="boolean"?e:!e.canBeApplied},get canArmageddon(){return this.remnantsGain>=1},armageddon(t){!this.canArmageddon&&t||(EventHub.dispatch(GAME_EVENT.ARMAGEDDON_BEFORE,t),t&&(this.cel.remnants+=this.remnantsGain),finishProcessReality({reset:!0,armageddon:!0}),disChargeAll(),player.celestials.enslaved.isStoringReal=!1,player.celestials.enslaved.autoStoreReal=!1,PelleStrikes.dilation.hasStrike&&(player.dilation.active=!0),EventHub.dispatch(GAME_EVENT.ARMAGEDDON_AFTER,t))},gameLoop(t){this.isDoomed&&(ri.realityShards.add(this.realityShardGainPerSecond.times(t).div(1e3)),PelleRifts.all.forEach(e=>e.fill(t)))},get cel(){return player.celestials.pelle},get isDoomed(){return this.cel.doomed},get disabledAchievements(){return[164,156,143,142,141,137,134,133,132,131,126,125,118,117,116,113,111,104,103,95,93,92,91,87,85,78,76,74,65,55,54,37]},get uselessInfinityUpgrades(){return["passiveGen","ipMult","infinitiedGeneration"]},get uselessTimeStudies(){return[32,33,41,51,61,62,121,122,123,141,142,143,192,213]},get disabledRUPGs(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,19,20,22,23,24]},get uselessPerks(){return[10,12,13,14,15,16,17,30,40,41,42,43,44,45,46,51,52,53,60,61,62,80,81,82,83,100,103,104,105,106,201,202,203,204]},get specialGlyphEffect(){const t=this.isDoomed&&PelleRifts.chaos.milestones[1].canBeApplied,e=this.getSpecialGlyphEffectDescription(this.activeGlyphType),i=n=>t&&this.activeGlyphType===n;return{isUnlocked:t,description:e,infinity:i("infinity")&&player.challenge.eternity.current<=8?ri.infinityPoints.value.plus(1).pow(.2):L.D1,time:i("time")?ri.eternityPoints.value.plus(1).pow(.3):L.D1,replication:i("replication")?10**53**PelleRifts.vacuum.percentage:1,dilation:i("dilation")?Decimal.pow(player.dilation.totalTachyonGalaxies,1.5).max(1):L.D1,power:i("power")?1.02:1,companion:i("companion")?1.34:1,isScaling:()=>["infinity","time","replication","dilation"].includes(this.activeGlyphType)}},getSpecialGlyphEffectDescription(t){switch(t){case"infinity":return`Infinity Point gain ${player.challenge.eternity.current<=8?formatX(ri.infinityPoints.value.plus(1).pow(.2),2):formatX(L.D1,2)} (based on current IP)`;case"time":return`Eternity Point gain ${formatX(ri.eternityPoints.value.plus(1).pow(.3),2)}
          (based on current EP)`;case"replication":return`Replication speed ${formatX(10**53**PelleRifts.vacuum.percentage,2)}         (based on ${Xn.wordCycle(PelleRifts.vacuum.name)})`;case"dilation":return`Dilated Time gain ${formatX(Decimal.pow(player.dilation.totalTachyonGalaxies,1.5).max(1),2)}
          (based on Tachyon Galaxies)`;case"power":return`Galaxies are ${formatPercents(.02)} stronger`;case"companion":return`You feel ${formatPercents(.34)} better`;case void 0:return"No Glyph equipped!";default:return"You cannot equip this Glyph while Doomed!"}},get remnantRequirementForDilation(){return 38e6},get canDilateInPelle(){return this.cel.remnants>=this.remnantRequirementForDilation},resetResourcesForDilation(){this.cel.records.totalAntimatter=new Decimal("1e180000"),this.cel.records.totalInfinityPoints=new Decimal("1e60000"),ri.eternityPoints.reset(),this.cel.records.totalEternityPoints=new Decimal("1e1050")},get remnantsGain(){let t=this.cel.records.totalAntimatter.plus(1).log10(),e=this.cel.records.totalInfinityPoints.plus(1).log10(),i=this.cel.records.totalEternityPoints.plus(1).log10();PelleStrikes.dilation.hasStrike&&(t*=500,e*=10,i*=5);const n=((Math.log10(t+2)+Math.log10(e+2)+Math.log10(i+2))/1.64)**7.5;return n<1?n:Math.floor(n-this.cel.remnants)},realityShardGain(t){return Decimal.pow(10,t**(1/7.5)*4).minus(1).div(1e3)},get realityShardGainPerSecond(){return this.realityShardGain(this.cel.remnants)},get nextRealityShardGain(){return this.realityShardGain(this.remnantsGain+this.cel.remnants)},get riftDrainPercent(){return .03},get glyphMaxLevel(){return is.glyphLevels.effectValue},get glyphStrength(){return 1},antimatterDimensionMult(t){return Decimal.pow(10,Math.log10(t+1)+t**5.1/1e3+4**t/1e19)},get activeGlyphType(){var t;return(t=Glyphs.active.filter(Boolean)[0])==null?void 0:t.type},get hasGalaxyGenerator(){return player.celestials.pelle.galaxyGenerator.unlocked},transitionText(t,e,i=0){const n=Math.round((t.length*(1-i)+e.length*i)*1e8)/1e8,r=n*(1-i);let s=r,a="";for(let o=0;o<n;o++)if(o>=s){const c=Math.floor(o*(e.length/n));a+=e[c],s+=r}else{const c=Math.floor(o*(t.length/n));a+=t[c]}return Qde(a,Math.floor(i**2*7))},endTabNames:"End Is Nigh Destruction Is Imminent Help Us Good Bye Forever".split(" "),quotes:jd.pelle};EventHub.logic.on(GAME_EVENT.ARMAGEDDON_AFTER,()=>{ri.remnants.gte(1)&&Cs.quotes.arm.show()});EventHub.logic.on(GAME_EVENT.PELLE_STRIKE_UNLOCKED,()=>{PelleStrikes.infinity.hasStrike&&Cs.quotes.strike1.show(),PelleStrikes.powerGalaxies.hasStrike&&Cs.quotes.strike2.show(),PelleStrikes.eternity.hasStrike&&Cs.quotes.strike3.show(),PelleStrikes.ECs.hasStrike&&Cs.quotes.strike4.show(),PelleStrikes.dilation.hasStrike&&Cs.quotes.strike5.show()});class w3 extends su{get currency(){return ri.realityShards}get boughtAmount(){return player.celestials.pelle.rebuyables[this.id]}set boughtAmount(e){player.celestials.pelle.rebuyables[this.id]=e}get isCapped(){return this.boughtAmount>=this.config.cap}get isCustomEffect(){return!0}get effectValue(){return this.config.effect(this.boughtAmount)}onPurchased(){this.id==="glyphLevels"&&EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)}}class C3 extends Gf{get set(){return player.celestials.pelle.upgrades}get currency(){return ri.realityShards}get description(){return this.config.description}get cost(){return this.config.cost}get isAvailableForPurchase(){return Cs.isDoomed}}const is=mapGameDataToObject(GameDatabase.celestials.pelle.upgrades,t=>t.rebuyable?new w3(t):new C3(t));is.rebuyables=is.all.filter(t=>t.isRebuyable);is.singles=is.all.filter(t=>!t.isRebuyable).sort((t,e)=>t.cost-e.cost);class Jde extends Vd{get bits(){return player.celestials.pelle.progressBits}set bits(e){player.celestials.pelle.progressBits=e}get hasStrike(){return this.isUnlocked}get canBeUnlocked(){return Pelle.isDoomed&&!this.hasStrike}get requirement(){const e=this.config.requirementDescription;return typeof e=="function"?e():e}get penalty(){const e=this.config.penaltyDescription;return typeof e=="function"?e():e}reward(){return this.config.rewardDescription()}get rift(){return this.config.rift()}trigger(){this.unlock()}onUnlock(){GameUI.notify.strike(`You encountered a Pelle Strike: ${this.requirement}`),player.celestials.pelle.collapsed.rifts=!1,this.id===5&&Pelle.resetResourcesForDilation(),Tab.celestials.pelle.show(),EventHub.dispatch(GAME_EVENT.PELLE_STRIKE_UNLOCKED)}}const ehe=mapGameDataToObject(GameDatabase.celestials.pelle.strikes,t=>new Jde(t));class the extends yn{constructor(e){super(e),this.lastChecked=!1}get requirement(){return this.config.requirement}get resource(){return this.config.resource}checkMilestoneState(){var e,i;this.lastChecked!==this.isUnlocked&&((i=(e=this.config).onStateChange)==null||i.call(e)),this.lastChecked=this.isUnlocked}get isUnlocked(){return this.resource==="decay"&&Za.chaos.milestones[0].isEffectActive?!0:this.requirement<=Za[this.resource].percentage}get isEffectActive(){return this.isUnlocked}get description(){const e=this.config.description;return typeof e=="function"?e():e}get formattedEffect(){return this.canBeApplied?this.config.formatEffect(this.effectValue):!1}}class ihe extends yn{constructor(e){super(e),this._milestones=this.config.milestones.map(i=>new the(i))}get fillCurrency(){return this.config.currency()}get strike(){return this.config.strike()}get canBeApplied(){return this.strike.hasStrike}get name(){return this.config.name}get reducedTo(){return this.rift.reducedTo}set reducedTo(e){this.rift.reducedTo=e}get rift(){return player.celestials.pelle.rifts[this.config.key]}get totalFill(){return this.rift.fill}set totalFill(e){this.rift.fill=e}get isActive(){return this.rift.active}get realPercentage(){return this.config.percentage(this.totalFill)}get spentPercentage(){return this.rift.percentageSpent||0}get percentage(){return this.reducedTo>1?this.reducedTo:this.config.spendable?Math.min(this.config.percentage(this.totalFill)-this.spentPercentage,this.reducedTo):Math.min(this.realPercentage,this.reducedTo)}get milestones(){return this._milestones}get description(){return this.config.description}get drainResource(){return this.config.drainResource}get effects(){var n,r;const e=this.config.baseEffect(this.effectValue),i=((r=(n=this.config).additionalEffects)==null?void 0:r.call(n).map(s=>s.formattedEffect))??[];return[e,...i]}get isCustomEffect(){return!0}get effectValue(){return this.config.effect(this.config.percentageToFill(this.percentage))}get maxValue(){return this.config.percentageToFill(1+this.spentPercentage)}get isMaxed(){return this.percentage>=1}get galaxyGeneratorText(){return this.config.galaxyGeneratorText}toggle(){const e=Za.all.filter(i=>i.isActive).length;!this.isActive&&e===2?GameUI.notify.error("You can only have 2 rifts active at the same time!"):this.rift.active=!this.rift.active}checkMilestoneStates(){this.milestones.forEach(e=>e.checkMilestoneState())}fill(e){if(this.isActive&&this.isMaxed){this.rift.active=!1;return}if(!(!this.isActive||this.isMaxed)){if(this.fillCurrency.value instanceof Decimal){if(this.fillCurrency.value.lte(1))return;const i=this.fillCurrency.value.times((1-Pelle.riftDrainPercent)**(e/1e3)),n=this.fillCurrency.value.minus(i);this.fillCurrency.value=this.fillCurrency.value.minus(n).max(1),this.totalFill=this.totalFill.plus(n).min(this.maxValue)}else{const i=this.fillCurrency.value*(1-Pelle.riftDrainPercent)**(e/1e3),n=this.fillCurrency.value-i;this.fillCurrency.value=Math.max(this.fillCurrency.value-n,0),this.totalFill=Math.clampMax(this.totalFill+n,this.maxValue)}Za.vacuum.milestones[0].canBeApplied&&Glyphs.refreshActive(),this.checkMilestoneStates()}}}const Za=mapGameDataToObject(GameDatabase.celestials.pelle.rifts,t=>new ihe(t));Za.totalMilestones=()=>Za.all.flatMap(t=>t.milestones).countWhere(t=>t.canBeApplied);const nhe={hasReturnedGlyphSlot:!1,get generationCaps(){return Za.all.map(t=>({rift:t.config.key,cap:t.config.galaxyGeneratorThreshold})).sort((t,e)=>t.cap-e.cap)},get spentGalaxies(){return player.celestials.pelle.galaxyGenerator.spentGalaxies},get generatedGalaxies(){return player.celestials.pelle.galaxyGenerator.generatedGalaxies},get galaxies(){return this.generatedGalaxies-this.spentGalaxies},get gainPerSecond(){return Pelle.hasGalaxyGenerator?new Decimal(Bp.additive.effectValue).timesEffectsOf(Bp.multiplicative,Bp.antimatterMult,Bp.IPMult,Bp.EPMult).toNumber():0},get capObj(){return this.generationCaps[player.celestials.pelle.galaxyGenerator.phase]},get generationCap(){return this.capObj?this.capObj.cap:1/0},get capRift(){var t;return Za[(t=this.capObj)==null?void 0:t.rift]},get isCapped(){return this.generationCap===this.generatedGalaxies},get sacrificeActive(){return player.celestials.pelle.galaxyGenerator.sacrificeActive},startSacrifice(){player.celestials.pelle.collapsed.rifts=!1,player.celestials.pelle.galaxyGenerator.sacrificeActive=!0},loop(t){if(this.isCapped&&Pelle.quotes.galaxyGeneratorRifts.show(),this.sacrificeActive){if(this.capRift.reducedTo=Math.max(this.capRift.reducedTo-.03*t/1e3,0),this.capRift.reducedTo===0){player.celestials.pelle.galaxyGenerator.sacrificeActive=!1,player.celestials.pelle.galaxyGenerator.phase++;const e=player.celestials.pelle.galaxyGenerator.phase;e===1?Pelle.quotes.galaxyGeneratorPhase1.show():e===4&&Pelle.quotes.galaxyGeneratorPhase4.show(),this.capObj||Pelle.quotes.end.show()}Za.all.forEach(e=>e.checkMilestoneStates()),!Za.vacuum.milestones[0].canBeApplied&&Glyphs.active.filter(e=>e).length>0&&(Glyphs.unequipAll(player.options.respecIntoProtected&&Glyphs.findFreeIndex(!0)===-1),Glyphs.refreshActive())}player.celestials.pelle.galaxyGenerator.generatedGalaxies+=this.gainPerSecond*t/1e3,player.celestials.pelle.galaxyGenerator.generatedGalaxies=Math.min(player.celestials.pelle.galaxyGenerator.generatedGalaxies,this.generationCap),this.capRift||(Za.all.forEach(e=>e.reducedTo=Math.min(e.reducedTo+.03*t/1e3,2)),Za.vacuum.milestones[0].canBeApplied&&!this.hasReturnedGlyphSlot&&(Glyphs.refreshActive(),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),this.hasReturnedGlyphSlot=!0))}};class S3 extends su{get currency(){return this.config.currency()}get boughtAmount(){return player.celestials.pelle.rebuyables[this.id]}set boughtAmount(e){player.celestials.pelle.rebuyables[this.id]=e}get isCustomEffect(){return!0}get effectValue(){return this.config.effect(this.boughtAmount)}}const Bp=mapGameDataToObject(GameDatabase.celestials.pelle.galaxyGeneratorUpgrades,t=>new S3(t)),k3={GAME_END:1,TAB_START_HIDE:1.5,INTERACTIVITY_DISABLED:2.5,FADE_AWAY:2.5,SAVE_DISABLED:4,END_NUMBERS:4.2,CREDITS_START:4.5,SHOW_NEW_GAME:13.5,SPECTATE_GAME:13.9,SONG_END:13.7,CREDITS_END:14.5},rhe={get endState(){return this.removeAdditionalEnd?this.additionalEnd:Math.max((Math.log10(player.celestials.pelle.records.totalAntimatter.plus(1).log10()+1)-8.7)/(Math.log10(9e15)-8.7)+this.additionalEnd,0)},_additionalEnd:0,get additionalEnd(){return player.isGameEnd||this.removeAdditionalEnd?this._additionalEnd:0},set additionalEnd(t){this._additionalEnd=player.isGameEnd||this.removeAdditionalEnd?t:0},removeAdditionalEnd:!1,creditsClosed:!1,creditsEverClosed:!1,gameLoop(t){this.removeAdditionalEnd&&(this.additionalEnd-=Math.min(t/200,.5),this.additionalEnd<4&&(this.additionalEnd=0,this.removeAdditionalEnd=!1)),!this.removeAdditionalEnd&&this.endState>=k3.GAME_END&&ui.$viewModel.modal.progressBar===void 0&&(player.isGameEnd=!0,this.additionalEnd+=Math.min(t/1e3/20,.1))}},she={teresa:Rf,effarig:Bd,enslaved:fa,v:zl,ra:ci,laitela:Ad,pelle:Cs};GameDatabase.celestials.descriptions=[{name:"Teresa",effects(){return`Glyph Time Theorem generation is disabled.
      You gain less Infinity Points and Eternity Points (x^${format(.55,2,2)}).`}},{name:"Effarig",effects(){return`All Dimension multipliers, game speed, and tickspeed are severely lowered, like Dilation.
      Infinity Power reduces the production and game speed penalties and Time Shards reduce the tickspeed penalty.
      Glyph levels are temporarily capped to ${formatInt(Bd.glyphLevelCap)}, rarity is unaffected.`},description(){return"You will exit Effarig's Reality when you complete a Layer of it for the first time."}},{name:"The Nameless Ones",effects(){return`Glyph levels are boosted to a minimum of ${formatInt(5e3)}.
      Infinity, Time, and 8th Antimatter Dimension purchases are limited to ${formatInt(1)} each.
      Antimatter Dimension multipliers are always Dilated (the Glyph effect still only applies in actual Dilation).
      Time Study 192 (uncapped Replicanti) is locked.
      The Black Hole is disabled.
      Tachyon Particle production and Dilated Time production are severely reduced.
      Time Theorem generation from Dilation Glyphs is disabled.
      Certain challenge goals are increased.
      Stored game time is discharged at a reduced effectiveness (exponent^${format(.55,2,2)}).`}},{name:"V",effects(){const t=`All Dimension multipliers, Eternity Point gain, Infinity Point gain, and Dilated Time gain      per second are square-rooted. 
      The Replicanti interval is squared.`;return ci.unlocks.unlockGlyphAlchemy.canBeApplied?t+`
      The Exponential Glyph Alchemy effect is disabled.`:t}},{name:"Ra",effects(){return`You only have ${formatInt(4)} Dimension Boosts and can not gain any more.
      The Tickspeed purchase multiplier is fixed at ${formatX(1.1245,0,3)}.`}},{name:"Lai'tela",effects(){let t;const e=8-Ad.difficultyTier;switch(e){case 0:t="all Dimensions";break;case 1:t="2nd and higher Dimensions";break;case 2:t="3rd and higher Dimensions";break;case 7:t="8th Dimensions";break;default:t=`${e+1}th and higher Dimensions`;break}const i=e===8?"":`Production from ${t} is disabled.`;return`Infinity Point and Eternity Point gain are Dilated.
      Game speed is reduced to ${formatInt(1)} and gradually comes back over ${formatInt(10)} minutes.
      Black Hole storing, discharging, pulsing, and inversion are all disabled.
      ${i}`},description(){return`Antimatter generates entropy inside of this Reality.      At ${formatPercents(1)} entropy, the Reality becomes destabilized      and you gain a reward based on how quickly you reached ${formatPercents(1)}.
      Destabilizing the Reality in less than ${formatInt(30)} seconds makes it become significantly more difficult,      in exchange for giving a much stronger reward.      Doing this ${formatInt(8)} times will also give a ${formatX(8)} to Dark Energy gain.`}}];const ahe={name:"ModalCloseButton",components:{PrimaryButton:yt}};var ohe=function(){var e=this,i=e._self._c;return i("PrimaryButton",{staticClass:"o-primary-btn--modal-close c-modal__close-btn",on:{click:e.emitClick}},[e._v(" × ")])},lhe=[],che=K(ahe,ohe,lhe,!1,null,null);const ay=che.exports,uhe={name:"ModalConfirmationCheck",props:{option:{type:String,required:!0}},data(){return{setting:!0}},computed:{confirmation(){return ConfirmationTypes[this.option]},confirmationClass(){return{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":!this.setting}},tooltipText(){return`${this.setting?"Disable":"Reenable"} the ${this.confirmation.name} confirmation`}},created(){this.setting=this.confirmation.option},methods:{toggle(){this.setting=!this.setting,this.confirmation.option=this.setting}}};var dhe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal__confirmation-toggle",on:{click:e.toggle}},[i("div",{class:e.confirmationClass},[e.setting?e._e():i("span",{staticClass:"fas fa-check"}),i("div",{staticClass:"c-modal__confirmation-toggle__tooltip"},[e._v(" "+e._s(e.tooltipText)+" ")])]),i("span",{staticClass:"c-modal__confirmation-toggle__text"},[e._v(" Don't show this message again ")])])},hhe=[],fhe=K(uhe,dhe,hhe,!1,null,null);const phe=fhe.exports,mhe={name:"ModalWrapperChoice",components:{PrimaryButton:yt,ModalConfirmationCheck:phe,ModalCloseButton:ay},props:{cancelClass:{type:String,required:!1,default:"o-primary-btn--width-medium c-modal-message__okay-btn"},confirmClass:{type:String,required:!1,default:"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn"},showCancel:{type:Boolean,required:!1,default:!0},showConfirm:{type:Boolean,required:!1,default:!0},option:{type:String,required:!1,default:void 0},confirmFn:{type:Function,required:!1,default:void 0},cancelFn:{type:Function,required:!1,default:void 0}},created(){this.on$(GAME_EVENT.ENTER_PRESSED,this.doConfirm)},methods:{doConfirm(){this.confirmFn?this.confirmFn():(this.$emit("confirm"),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL))},doCancel(){this.cancelFn?this.cancelFn():(this.$emit("cancel"),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL))},closeModal(){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}};var yhe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal-message l-modal-content--centered"},[i("span",{staticClass:"c-modal__header"},[i("ModalCloseButton",{on:{click:e.closeModal}}),e.$slots.header?i("span",{staticClass:"c-modal__title"},[e._t("header")],2):e._e()],1),e._t("default"),e.option?i("ModalConfirmationCheck",{attrs:{option:e.option}}):e._e(),i("div",{staticClass:"l-modal-buttons"},[e.showCancel?i("PrimaryButton",{class:e.cancelClass,on:{click:e.doCancel}},[e._t("cancel-text",function(){return[e._v(" Cancel ")]})],2):e._e(),e._t("extra-buttons"),e.showConfirm?i("PrimaryButton",{class:e.confirmClass,on:{click:e.doConfirm}},[e._t("confirm-text",function(){return[e._v(" Confirm ")]})],2):e._e()],2)],2)},ghe=[],vhe=K(mhe,yhe,ghe,!1,null,"59023ed2");const Vt=vhe.exports,bhe={name:"CloudInvalidDataModal",components:{ModalWrapperChoice:Vt},props:{isSaving:{type:Boolean,required:!0}},computed:{conflict(){return this.$viewModel.modal.cloudConflict},overwriteText(){return this.isSaving?"Overwrite Cloud Save":"Load save from Cloud"}},methods:{ignore(){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)},overwrite(){var t,e;(e=(t=this.conflict).onAccept)==null||e.call(t),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}};var _he=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{staticClass:"c-modal-options__large",attrs:{"cancel-class":"c-modal-message__okay-btn","confirm-class":"c-modal-message__okay-btn c-modal__confirm-btn","cancel-fn":e.overwrite},on:{confirm:function(n){return e.ignore()}},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Could not compare with Cloud Save ")]},proxy:!0},{key:"cancel-text",fn:function(){return[e._v(" "+e._s(e.overwriteText)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Do not overwrite ")]},proxy:!0}])},[e._v(" While attempting to compare your saves, the game was unable to properly process the data in your Cloud save. This is most likely due to the Cloud save being very outdated, using a data format from a much older version of the game. "),i("br"),i("br"),e.isSaving?i("span",[e._v(' It is probably safe to overwrite your Cloud save. You can click "Cloud load" and force the save to be loaded if you would like to attempt to convert it to a valid save format that you can use. ')]):i("span",[e._v(" You can try to load your data from the Cloud if desired. The game will attempt to load in your Cloud data by converting its format, but this may not work and in the worst case may require you to reset this save slot in order for the game to work again. ")]),i("br"),e._v(" Note: This modal will show up regardless of your settings, because this issue will continue to prevent the 10-minute autosave until it is resolved. ")])},Ehe=[],The=K(bhe,_he,Ehe,!1,null,null);const whe=The.exports,Che={name:"SaveInfoEntry",props:{saveId:{type:Number,required:!1,default:0},saveData:{type:Object,required:!0},otherData:{type:Object,required:!0},showName:{type:Boolean,required:!1,default:!0},saveType:{type:String,required:!0}},computed:{timePlayed(){return`Time Played: ${TimeSpan.fromMilliseconds(this.saveData.realTimePlayed).toString()}`},antimatter(){return this.compareLayeredValues(["pelleAM","totalAntimatter"],["Total Doomed Antimatter:","Total Antimatter:"],[format,format],"")},prestigeCount(){return this.compareLayeredValues(["remnants","realities","eternities","infinities"],["Remnants:","Realities:","Eternities:","Infinities:"],[format,this.formatSmall,this.formatSmall,this.formatSmall],"(No prestige layers reached yet.)")},prestigeResource(){return this.compareLayeredValues(["realityShards","imaginaryMachines","realityMachines","eternityPoints","infinityPoints"],["Reality Shards:","Reality Machines:","Reality Machines:","Eternity Points:","Infinity Points:"],[format,t=>formatMachines(this.saveData.realityMachines,t),format,format,format],"")},extraProgressIndicator(){return this.compareLayeredValues(["pelleLore","bestLevel","dilatedTime"],["Your Reality is Doomed.","Best Glyph Level:","Dilated Time:"],[()=>"",formatInt,format],"")},name(){return this.saveData.saveName}},methods:{formatSmall(t){return Decimal.gt(t,1e4)?format(t,2):formatInt(t)},compareLayeredValues(t,e,i,n){let r,s;for(let p=0;p<t.length;p++){const m=t[p];if(!(Decimal.eq(this.saveData[m],0)&&Decimal.eq(this.otherData[m],0)))if(Decimal.eq(this.saveData[m],this.otherData[m])){r=!0,s=0;break}else if(Decimal.neq(this.saveData[m],0)&&Decimal.neq(this.otherData[m],0)){r=!0,s=Decimal.gt(this.saveData[m],this.otherData[m])?1:-1;break}else{r=!1,s=Decimal.gt(this.saveData[m],0)?1:-1;break}}let a=n,o="";for(let p=0;p<t.length;p++){const m=t[p];if(Decimal.gt(this.saveData[m],0)){a=e[p],o=i[p](this.saveData[m],2);break}}if(s===0)return`${a} ${o}`;const d=`<span style="color:#${(p=>getComputedStyle(document.body).getPropertyValue(`--color-${p}`).split("#")[1])(s===1?"good":"infinity")}">`;return r?`${a} ${d}${o}</span>`:`${d}${a} ${o}</span>`}}};var She=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-modal-options__save-record"},[i("h3",[e._v(e._s(e.saveType)+" "),e.saveId?i("span",[e._v("(Slot #"+e._s(e.saveId+1)+"):")]):e._e()]),e.showName?i("span",[e.name?i("span",[e._v(" Save Name: "+e._s(e.name)+" ")]):i("span",[e._v(" Unnamed Save ")]),i("br")]):e._e(),e._v(" "+e._s(e.timePlayed)+" "),i("br"),i("span",{domProps:{innerHTML:e._s(e.antimatter)}}),i("span",{domProps:{innerHTML:e._s(e.prestigeCount)}}),i("span",{domProps:{innerHTML:e._s(e.prestigeResource)}}),i("span",{domProps:{innerHTML:e._s(e.extraProgressIndicator)}}),i("br"),e._t("default")],2)},khe=[],Ahe=K(Che,She,khe,!1,null,null);const A3=Ahe.exports,Rhe={name:"CloudLoadConflictModal",components:{ModalWrapperChoice:Vt,SaveInfoEntry:A3},computed:{conflict(){return this.$viewModel.modal.cloudConflict},older(){return this.conflict.saveComparison.older===1},farther(){return this.conflict.saveComparison.farther===1},hasDifferentName(){return this.conflict.cloud.saveName!==this.conflict.local.saveName},suggestionText(){const t='style="color: var(--color-good)"',e='style="color: var(--color-bad)"',i=["Loading this Cloud save "],n=this.conflict.cloud.compositeProgress,r=this.conflict.local.compositeProgress,s=this.farther&&Math.abs(n-r)>.15;return i.push(s?`<b ${e}>would cause your local save to lose significant progress</b>`:`<b ${t}>is probably safe</b>`),this.hasDifferentName&&i.push(`<br>${s?"Additionally":"However"}, the Cloud save
          <b ${e}>may be a save from a different device</b>.`),(s||this.hasDifferentName)&&i.push(`<br><b ${e}>Are you sure you wish to overwrite your local save?</b>`),i.join("")}},methods:{confirm(){var t,e;(e=(t=this.conflict).onAccept)==null||e.call(t),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}};var Ihe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{staticClass:"c-modal-options__large",attrs:{"cancel-class":"c-modal-message__okay-btn","confirm-class":"c-modal-message__okay-btn c-modal__confirm-btn","confirm-fn":e.confirm},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Load Game from Cloud ")]},proxy:!0},{key:"cancel-text",fn:function(){return[e._v(" Keep Local Save ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Overwrite Local with Cloud Save ")]},proxy:!0}])},[e.hasDifferentName?i("span",[e._v(" Your Local and Cloud Saves have "),i("b",[e._v("different names")]),e._v(". ")]):e.older?i("span",[e._v(" Loading from the Cloud would "),i("b",[e._v("load a save with less playtime")]),e._v(". ")]):e.farther?i("span",[e._v(" Loading from the Cloud would "),i("b",[e._v("cause you to lose progress")]),e._v(". ")]):i("span",[e._v(" Your Local Save and Cloud Save "),i("b",[e._v("appear to have similar amounts of progress")]),e._v(". ")]),e._v(" Please select the save you want to load. "),i("br"),i("br"),i("SaveInfoEntry",{attrs:{"save-data":e.conflict.local,"other-data":e.conflict.cloud,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":"Local Save"}}),i("SaveInfoEntry",{attrs:{"save-data":e.conflict.cloud,"other-data":e.conflict.local,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":"Cloud Save"}}),i("span",{domProps:{innerHTML:e._s(e.suggestionText)}})],1)},Dhe=[],xhe=K(Rhe,Ihe,Dhe,!1,null,null);const Mhe=xhe.exports,Phe={name:"CloudSaveConflictModal",components:{ModalWrapperChoice:Vt,SaveInfoEntry:A3},computed:{conflict(){return this.$viewModel.modal.cloudConflict},older(){return this.conflict.saveComparison.older===-1},farther(){return this.conflict.saveComparison.farther===-1},hasDifferentName(){return this.conflict.cloud.saveName!==this.conflict.local.saveName},wrongHash(){return this.conflict.saveComparison.hashMismatch},suggestionText(){const t='style="color: var(--color-good)"',e='style="color: var(--color-infinity)"',i=["Saving to the Cloud "],n=this.conflict.cloud.compositeProgress,r=this.conflict.local.compositeProgress,s=this.farther&&Math.abs(n-r)>.15;return i.push(s?`<b ${e}>would overwrite a save with significantly more progress</b>`:`<b ${t}>is probably safe</b>`),(this.hasDifferentName||this.wrongHash)&&i.push(` ${s?"Additionally":"However"}, you may be overwriting a 
          <b ${e}>save from a different device</b>.`),(s||this.hasDifferentName||this.wrongHash)&&i.push(`<br><b ${e}>Are you sure you wish to overwrite the Cloud save?</b>`),i.join("")},noOverwriteInfo(){return"Save conflicts will keep occurring without overwriting."},overwriteInfo(){return`If another device is also saving to the cloud on this Google Account at the same time,
        this modal may appear repeatedly.`}},methods:{doNotSave(){player.options.cloudEnabled=!1,EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)},overwrite(){var t,e;(e=(t=this.conflict).onAccept)==null||e.call(t),EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}};var Ohe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{staticClass:"c-modal-options__large",attrs:{"cancel-class":"c-modal-message__okay-btn","confirm-class":"c-modal-message__okay-btn c-modal__confirm-btn","cancel-fn":e.overwrite},on:{confirm:function(n){return e.doNotSave()}},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Save Game to Cloud ")]},proxy:!0},{key:"cancel-text",fn:function(){return[e._v(" Overwrite Cloud Save ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Do not overwrite ")]},proxy:!0}])},[e.wrongHash?i("span",[e._v(" Your Cloud Save has been "),i("b",[e._v("changed by a different device")]),e._v(" since you last saved to the Cloud this session. ")]):e.hasDifferentName?i("span",[e._v(" Your Local and Cloud Saves have "),i("b",[e._v("different names")]),e._v(". ")]):e.older?i("span",[e._v(" Saving to the Cloud would "),i("b",[e._v("overwrite an older save")]),e._v(". ")]):e.farther?i("span",[e._v(" Saving to the Cloud would "),i("b",[e._v("overwrite a save with more progress")]),e._v(". ")]):i("span",[e._v(" Your Local Save and Cloud Save "),i("b",[e._v("appear to have similar amounts of progress")]),e._v(". ")]),i("br"),i("SaveInfoEntry",{attrs:{"save-data":e.conflict.local,"other-data":e.conflict.cloud,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":"Local Save"}}),i("SaveInfoEntry",{attrs:{"save-data":e.conflict.cloud,"other-data":e.conflict.local,"save-id":e.conflict.saveId,"show-name":e.hasDifferentName,"save-type":"Cloud Save"}}),i("span",{domProps:{innerHTML:e._s(e.suggestionText)}}),i("br"),i("span",[e._v(" Not overwriting will turn off Cloud saving and you will need to manually turn it back on again if you want to use it. "),i("span",{attrs:{"ach-tooltip":e.noOverwriteInfo}},[i("i",{staticClass:"fas fa-question-circle"})])]),i("span",[e._v(" Overwriting will force a save to the Cloud in this particular instance; in most cases this should prevent this modal from reappearing afterwards. "),i("span",{attrs:{"ach-tooltip":e.overwriteInfo}},[i("i",{staticClass:"fas fa-question-circle"})])])],1)},Nhe=[],Ghe=K(Phe,Ohe,Nhe,!1,null,null);const Uhe=Ghe.exports,Lhe={name:"EternityChallengeStartModal",components:{ModalWrapperChoice:Vt},props:{id:{type:Number,required:!0}},computed:{challenge(){return EternityChallenge(this.id)},challengeIsCompleted(){return this.challenge.isFullyCompleted},message(){return`You will Eternity (if possible) and start a new Eternity within the Challenge, with all the
        Challenge-specific restrictions and modifiers active.
        To complete the Challenge${this.challengeIsCompleted?"":" and gain its reward"},
        you must reach the Challenge goal of
        ${format(this.challenge.currentGoal)} Infinity Points. You can complete Eternity Challenges up to
        ${formatInt(5)} times, with increasing goals and bonuses.`},entranceLabel(){return`You are about to enter Eternity Challenge ${this.id}`},reward(){let t=this.challenge._config.reward.description;return typeof t=="function"&&(t=t()),`The reward for completing this challenge is: ${t}`},condition(){let t=this.challenge._config.description;return typeof t=="function"&&(t=t()),`Inside this Eternity Challenge, ${t}`}},created(){this.on$(GAME_EVENT.ETERNITY_RESET_AFTER,this.emitClose),this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.emitClose)},methods:{handleYesClick(){this.challenge.start(!0),EventHub.ui.offAll(this)}}};var Bhe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"challenges"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.entranceLabel)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Begin ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" "),i("br"),i("br"),e._v(" "+e._s(e.condition)+" ")]),e.challengeIsCompleted?e._e():i("div",{staticClass:"c-modal-message__text"},[i("br"),e._v(" "+e._s(e.reward)+" ")])])},Fhe=[],$he=K(Lhe,Bhe,Fhe,!1,null,null);const Hhe=$he.exports,Vhe={name:"InfinityChallengeStartModal",components:{ModalWrapperChoice:Vt},props:{id:{type:Number,required:!0}},computed:{challenge(){return InfinityChallenge(this.id)},challengeIsCompleted(){return this.challenge.isCompleted},message(){return`You will Big Crunch (if possible) and start a new Infinity within the Challenge with all the
        Challenge-specific restrictions and modifiers active.
        To complete the Challenge${this.challengeIsCompleted?"":" and gain its reward"},
        you must reach the Challenge goal of
        ${format(InfinityChallenge(this.id).goal)} Antimatter.
        You do not start with any Dimension Boosts or Galaxies, regardless of upgrades.`},entranceLabel(){return`You are about to enter Infinity Challenge ${this.id}`},reward(){let t=this.challenge._config.reward.description;return typeof t=="function"&&(t=t()),`The reward for completing this challenge is: ${t}`},condition(){let t=this.challenge._config.description;return typeof t=="function"&&(t=t()),`Inside this Infinity Challenge, ${t}`}},created(){this.on$(GAME_EVENT.ETERNITY_RESET_AFTER,this.emitClose),this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.emitClose)},methods:{handleYesClick(){this.challenge.start()}}};var qhe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"challenges"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.entranceLabel)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Begin ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" "),i("br"),i("br"),e._v(" "+e._s(e.condition)+" ")]),e.challengeIsCompleted?e._e():i("div",{staticClass:"c-modal-message__text"},[i("br"),e._v(" "+e._s(e.reward)+" ")])])},Yhe=[],Whe=K(Vhe,qhe,Yhe,!1,null,null);const jhe=Whe.exports,zhe={name:"MessageModal",components:{PrimaryButton:yt,ModalCloseButton:ay},data(){return{message:""}},computed:{modal(){return this.$viewModel.modal.current},isThemeS12(){return this.$viewModel.theme==="S12"}},created(){this.on$(GAME_EVENT.ENTER_PRESSED,this.handleClick)},methods:{update(){var t;this.message=(t=this.modal)==null?void 0:t.message},handleClick(){var t,e;(e=(t=this.modal).callback)==null||e.call(t),this.emitClose(),EventHub.ui.offAll(this)}}};var Xhe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal-message l-modal-content--centered"},[e.modal.closeButton?i("ModalCloseButton",{class:e.isThemeS12?"c-modal__close-btn":"c-modal__close-btn--tiny",on:{click:e.emitClose}}):e.isThemeS12?i("ModalCloseButton",{staticClass:"c-modal__close-btn c-modal__close-btn--disabled"}):e._e(),i("div",{staticClass:"c-modal-message__text",domProps:{innerHTML:e._s(e.message)}}),i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn",on:{click:e.handleClick}},[e._v(" Okay ")]),e.isThemeS12?i("div",{staticClass:"c-modal__title"},[e._v(" Message ")]):e._e()],1)},Khe=[],Zhe=K(zhe,Xhe,Khe,!1,null,null);const Qhe=Zhe.exports,Jhe={name:"NormalChallengeStartModal",components:{ModalWrapperChoice:Vt},props:{id:{type:Number,required:!0}},computed:{challenge(){return NormalChallenge(this.id)},challengeIsCompleted(){return this.challenge.isCompleted},message(){return`You will Big Crunch (if possible) and start a new Infinity within the Challenge with all the
        Challenge-specific restrictions and modifiers active.
        To complete the Challenge${this.challengeIsCompleted?"":" and gain its reward"},
        you must reach Infinity again.
        You do not start with any Dimension Boosts or Galaxies, regardless of upgrades.`},entranceLabel(){return`You are about to enter Challenge ${this.id}`},reward(){return`The reward for completing this challenge is: ${this.challenge._config.reward}`},condition(){let t=this.challenge._config.description;return typeof t=="function"&&(t=t()),`Inside this Challenge, ${t}`}},created(){this.on$(GAME_EVENT.ETERNITY_RESET_AFTER,this.emitClose),this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.emitClose)},methods:{handleYesClick(){this.challenge.start()}}};var efe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"challenges"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.entranceLabel)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Begin ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" "),i("br"),i("br"),e._v(" "+e._s(e.condition)+" ")]),e.challengeIsCompleted?e._e():i("div",{staticClass:"c-modal-message__text"},[i("br"),e._v(" "+e._s(e.reward)+" ")])])},tfe=[],ife=K(Jhe,efe,tfe,!1,null,null);const nfe=ife.exports,rfe={name:"AntimatterGalaxyModal",components:{ModalWrapperChoice:Vt},props:{bulk:{type:Boolean,required:!0}},data(){return{newGalaxies:0,keepAntimatter:!1,perkANRBought:!1,keepDimBoost:!1}},computed:{topLabel(){return this.bulk?`You are about to purchase ${quantifyInt("Antimatter Galaxy",this.newGalaxies)}`:"You are about to purchase an Antimatter Galaxy"},message(){const t=[];Pelle.isDoomed&&t.push("Antimatter","Antimatter Dimensions","Tickspeed"),this.perkANRBought||t.push("Antimatter Dimensions","Tickspeed"),this.keepDimBoost||t.push("Dimension Boosts"),!this.keepAntimatter&&!this.perkANRBought&&t.push("Antimatter");const e=makeEnumeration(t);let i="";InfinityChallenge(3).isRunning?i=`Infinity Challenge ${InfinityChallenge(3).id}`:Ra.isRunning&&(i=`${Ra.displayName}'s Reality`);const n=i===""?"you will receive a small boost to Tickspeed Upgrades.":`you will not receive a boost to Tickspeed Upgrades, because you are in ${i}.`,r=e===""?`This will reset nothing, and ${n}`:`This will reset your ${e}. However, ${n}`;return this.bulk?`Are you sure you want to purchase
      ${quantifyInt("Antimatter Galaxy",this.newGalaxies)}? ${r}`:`Are you sure you want to purchase an Antimatter Galaxy? ${r}`}},created(){this.on$(GAME_EVENT.DIMBOOST_AFTER,()=>BreakInfinityUpgrade.autobuyMaxDimboosts.isBought?void 0:this.emitClose())},methods:{update(){if(this.bulk){const t=Galaxy.requirement,e=AntimatterDimension(t.tier);bulkBuyBinarySearch(e.totalAmount,{costFunction:n=>Galaxy.requirementAt(n).amount,cumulative:!1},player.galaxies)&&(this.newGalaxies=Galaxy.buyableGalaxies(Math.round(e.totalAmount.toNumber()))-player.galaxies)}this.keepAntimatter=Achievement(111).isUnlocked,this.perkANRBought=Perk.antimatterNoReset.canBeApplied,this.keepDimBoost=Achievement(143).isUnlocked&&!Pelle.isDoomed||PelleUpgrade.galaxyNoResetDimboost.canBeApplied},handleYesClick(){requestGalaxyReset(this.bulk),EventHub.ui.offAll(this)}}};var sfe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"antimatterGalaxy"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")])])},afe=[],ofe=K(rfe,sfe,afe,!1,null,null);const lfe=ofe.exports,cfe={name:"ArmageddonModal",components:{ModalWrapperChoice:Vt},data(){return{isDoomed:!1,remnantsGain:0,realityShardGain:new Decimal(0),nextRealityShardGain:new Decimal(0),canArmageddon:!1}},computed:{topLabel(){return this.isDoomed?"You are about to perform an Armageddon reset":"You are about to Doom your Reality"},message(){const t=Currency.remnants.eq(0)?`which will produce ${format(this.nextRealityShardGain,2,2)} Reality Shards/s`:`which will increase your Reality Shards gain from ${format(this.realityShardGain,2,2)}/s
          to ${format(this.nextRealityShardGain,2,2)}/s`;return`Armageddon will start a new Doomed Reality. You will gain
      ${quantify("Remnant",this.remnantsGain,2,0)} ${t}`}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.remnantsGain=Pelle.remnantsGain,this.realityShardGain.copyFrom(Pelle.realityShardGainPerSecond),this.nextRealityShardGain.copyFrom(Pelle.nextRealityShardGain),this.canArmageddon=Pelle.canArmageddon},handleYesClick(){Pelle.initializeRun()}}};var ufe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:e.isDoomed?"armageddon":void 0},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0}])},[e.isDoomed?i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")]):i("div",{staticClass:"c-modal-message__text"},[e._v(" Dooming your Reality will reset everything except Challenge records, Celestial progress and anything under the General and Reality header on the Statistics tab. You will not gain any rewards from your progress in your current Reality. Dooming your Reality will also purge most of your unprotected Glyphs and disable certain game mechanics. "),i("br"),i("br"),e._v(" Are you sure you want to do this? ")])])},dfe=[],hfe=K(cfe,ufe,dfe,!1,null,null);const ffe=hfe.exports,pfe={name:"ResetModal",components:{ModalWrapperChoice:Vt},props:{header:{type:String,required:!0},message:{type:String,required:!0},gainedResources:{type:String,required:!0},startingResources:{type:String,required:!1,default:void 0},confirmOption:{type:String,required:!1,default:void 0},confirmFn:{type:Function,required:!0},alternateText:{type:String,required:!1,default:void 0},alternateCondition:{type:Boolean,required:!1,default:!1}}};var mfe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:e.confirmOption},on:{confirm:e.confirmFn},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.header)+" ")]},proxy:!0}])},[e.alternateCondition?i("div",[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.alternateText)+" ")])]):i("div",[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" "),i("br")]),i("br"),i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.gainedResources)+" ")]),i("br"),e.startingResources?i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.startingResources)+" ")]):e._e()])])},yfe=[],gfe=K(pfe,mfe,yfe,!1,null,null);const R3=gfe.exports,vfe={name:"BigCrunchModal",components:{ResetModal:R3},data(){return{gainedInfinities:new Decimal,gainedInfinityPoints:new Decimal,startingBoosts:0,startingAM:10,willStartWithGalaxy:!1}},computed:{isFirstInfinity(){return!PlayerProgress.infinityUnlocked()},message(){return`Upon Infinity, all Dimensions, Dimension Boosts, and Antimatter Galaxies are reset. ${this.isFirstInfinity?this.firstInfinityInfo:""}`},firstInfinityInfo(){return`In return, you gain an Infinity Point (IP). This allows you to buy multiple upgrades that you can
        find in the Infinity tab. You will also gain one Infinity, which is the stat shown in the Statistics tab.`},ipGainInfo(){return`You will gain ${quantify("Infinity",this.gainedInfinities,2,0)}
        and ${quantify("Infinity Point",this.gainedInfinityPoints,2,0)}.`},startingResources(){const t=[];return this.startingAM.gte(10)&&t.push(`${quantify("Antimatter",this.startingAM,2,1)}`),this.startingBoosts>0&&t.push(`${quantify("Dimension Boost",this.startingBoosts)}`),this.willStartWithGalaxy&&t.push(`${quantify("Galaxy",1)}`),`You will start your next Infinity with ${makeEnumeration(t)}.`}},methods:{update(){this.gainedInfinities=gainedInfinities().round(),this.gainedInfinityPoints=gainedInfinityPoints().round(),this.startingBoosts=DimBoost.startingDimensionBoosts,this.startingAM=Currency.antimatter.startingValue,this.willStartWithGalaxy=InfinityUpgrade.skipResetGalaxy.isBought},handleYesClick(){bigCrunchResetRequest(),EventHub.ui.offAll(this),this.isFirstInfinity&&setTimeout(()=>Modal.message.show(`This animation will occur after every manually-triggered Infinity. If
          you would like to disable it, there is a setting to do so in the Options tab. This can be done for any
          visual animation effect in the game after seeing it for the first time.`,{},3),2e3)}}};var bfe=function(){var e=this,i=e._self._c;return i("ResetModal",{attrs:{header:"You are about to Infinity",message:e.message,"gained-resources":e.ipGainInfo,"starting-resources":e.startingResources,"confirm-fn":e.handleYesClick,"alternate-condition":e.isFirstInfinity,"alternate-text":e.message,"confirm-option":e.isFirstInfinity?void 0:"bigCrunch"}})},_fe=[],Efe=K(vfe,bfe,_fe,!1,null,null);const Tfe=Efe.exports,wfe={name:"DimensionBoostModal",components:{ModalWrapperChoice:Vt},props:{bulk:{type:Boolean,required:!0}},computed:{topLabel(){return"You are about to do a Dimension Boost Reset"},message(){return`This will ${Perk.antimatterNoReset.canBeApplied||Achievement(111).canBeApplied||PelleUpgrade.dimBoostResetsNothing.isBought?`not actually reset anything due to an upgrade you have which prevents Antimatter and Antimatter Dimensions
          from being reset in this situation. You will still gain the multiplier from the Boost, as usual.`:"reset your Antimatter and Antimatter Dimensions. Are you sure you want to do this?"}`}},methods:{handleYesClick(){requestDimensionBoost(this.bulk),EventHub.ui.offAll(this)}}};var Cfe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"dimensionBoost"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")])])},Sfe=[],kfe=K(wfe,Cfe,Sfe,!1,null,null);const Afe=kfe.exports,Rfe={name:"EnterCelestialsRaPet",props:{petId:{type:Number,required:!0}},data(){return{isUnlocked:!1}},computed:{pet(){return Ra.pets.all[this.petId]},name(){return this.pet.name},color(){return`color: ${this.pet.color}`},gainText(){const t=this.pet.id==="enslaved",e=t?"gain":"gains",i=t?"have":"has";return this.pet.level===25?`${i} regained all Memories`:`${e} Memory Chunks based on ${this.chunkGain}`},chunkGain(){return this.pet.chunkGain}},methods:{update(){this.isUnlocked=this.pet.isUnlocked}}};var Ife=function(){var e=this,i=e._self._c;return e.isUnlocked?i("span",{style:e.color},[e._v(" "+e._s(e.name)+" "+e._s(e.gainText)+". "),i("br")]):e._e()},Dfe=[],xfe=K(Rfe,Ife,Dfe,!1,null,null);const Mfe=xfe.exports,Pfe={name:"EnterCelestialsModal",components:{ModalWrapperChoice:Vt,EnterCelestialsRaPet:Mfe},props:{number:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{laitelaFastest:3600,teresaBestAM:new Decimal,teresaRunMult:0,effarigDone:!1,effarigLayer:"",enslavedDone:!1,laitelaTime:""}},computed:{effects(){return GameDatabase.celestials.descriptions[this.number].effects().split(`
`)},description(){const t=GameDatabase.celestials.descriptions[this.number].description;return t?t():""},topLabel(){return`${this.name} Reality`},message(){return`Perform a Reality reset and enter ${this.name} Reality, in which:`},extraLine(){switch(this.number){case 0:return this.teresaBestAM.eq(1)?`You have not unlocked the reward for Teresa's Reality yet. Unlocking the reward requires
              purchasing the Reality study and completing the Reality for the first time.`:`Your highest Teresa completion was for ${format(this.teresaBestAM,2,2)} antimatter,
              gaining you a ${formatX(this.teresaRunMult,2)} multiplier to Glyph Sacrifice power.`;case 1:return this.effarigDone?"Effarig is completed!":`You are currently on the ${this.effarigLayer} Layer.`;case 2:return this.enslavedDone?"Have... we... not helped enough...":"We... can help... Let us... help...";case 3:return"";case 4:return`Within Ra's Reality, some resources will generate Memory Chunks
          for Celestial Memories based on their amounts:`;case 5:return this.laitelaFastest>=300?"You have not completed Lai'tela at this tier.":`Your fastest completion on this tier is ${this.laitelaTime}.`;case 6:return"";default:throw new Error("Attempted to start an Unknown Celestial in Celestial Modal Confirmation.")}}},methods:{update(){this.teresaBestAM.copyFrom(player.celestials.teresa.bestRunAM),this.teresaRunMult=Teresa.runRewardMultiplier;const t=Effarig.currentStage;this.effarigDone=t===EFFARIG_STAGES.COMPLETED,this.effarigLayer=[null,"Infinity","Eternity","Reality"][t],this.enslavedDone=Enslaved.isCompleted,this.laitelaFastest=player.celestials.laitela.fastestCompletion,this.laitelaTime=TimeSpan.fromSeconds(this.laitelaFastest).toStringShort()},handleYesClick(){switch(beginProcessReality(getRealityProps(!0)),this.number){case 0:return Teresa.initializeRun();case 1:return Effarig.initializeRun();case 2:return Enslaved.initializeRun();case 3:return V.initializeRun();case 4:return Ra.initializeRun();case 5:return Laitela.initializeRun();case 6:throw new Error("Attempted to start Pelle through EnterCelestialsModal instead of ArmageddonModal");default:throw new Error("Attempted to start an Unknown Celestial in Celestial Modal Confirmation.")}}}};var Ofe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Begin ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" "),i("br"),i("br"),i("div",{staticClass:"c-modal-celestial__run-effects"},e._l(e.effects,function(n,r){return i("div",{key:r,staticClass:"c-modal-celestial__run-effects__line"},[n.trim()?i("b",[e._v("•")]):e._e(),i("b",[e._v(" ")]),e._v(" "+e._s(n)+" ")])}),0),e.description?i("div",{staticClass:"reality-description"},[i("br"),i("br"),e._v(" "+e._s(e.description)+" ")]):e._e(),i("br"),i("br"),i("div",[e._v(" "+e._s(e.extraLine)+" ")]),e.number===4?i("span",e._l(4,function(n){return i("EnterCelestialsRaPet",{key:n,attrs:{"pet-id":n-1}})}),1):e._e()])])},Nfe=[],Gfe=K(Pfe,Ofe,Nfe,!1,null,"7eed0e8e");const Ufe=Gfe.exports,vl={isDisplaying:!1,displayForce(t,e){document.body.style.animation=`${t} ${e}s 1`,this.isDisplaying=!0,setTimeout(()=>{document.body.style.animation="",this.isDisplaying=!1},e*1e3)},display(t,e){this.isDisplaying||this.displayForce(t,e)}},Lfe={name:"EnterDilationModal",components:{ModalWrapperChoice:Vt},computed:{message(){return`Dilating time will start a new Eternity, and all Dimension multiplier's exponents and
        tickspeed multiplier's exponent will be reduced to ${formatPow(.75,2,2)}. If you can Eternity while Dilated,
        your Tachyon Particles will be increased to a value based on your highest antimatter and any Tachyon Particle
        multipliers you have.`},entranceLabel(){return"You are about to enter Dilation"},EPSinceLabel(){return player.dilation.lastEP.eq(-1)?"This is your first Dilation":!isInCelestialReality()&&Ra.unlocks.unlockDilationStartingTP.canBeApplied?`You already have the maximum feasible amount of Tachyon Particles you can attain due to
          Teresa's Level ${formatInt(25)} reward.`:`You last completed Dilation at ${format(player.dilation.lastEP,2,2)} Eternity Points.`}},methods:{handleYesClick(){player.dilation.active||(player.options.animations.dilation&&!vl.isDisplaying?animateAndDilate():(startDilatedEternity(),Pelle.isDoomed&&PelleStrikes.dilation.trigger()))}}};var Bfe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"dilation"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.entranceLabel)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Enter ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.EPSinceLabel)+" "),i("br"),i("br"),e._v(" "+e._s(e.message)+" ")])])},Ffe=[],$fe=K(Lfe,Bfe,Ffe,!1,null,null);const Hfe=$fe.exports,Vfe={name:"EternityModal",components:{ResetModal:R3},data(){return{exitingEC:!1,startingIP:new Decimal,gainedEternityPoints:new Decimal,gainedEternities:new Decimal}},computed:{message(){return PlayerProgress.eternityUnlocked()?`Eternity will reset everything except Achievements, Challenge records, and anything under the General header
          on the Statistics tab.`:`Eternity will reset everything except Achievements, Challenge records, and anything under the General header
          on the Statistics tab. You will also gain an Eternity Point and unlock various upgrades.`},gainedEPOnEternity(){return`You will gain ${quantify("Eternity",this.gainedEternities,2)} 
      and ${quantify("Eternity Point",this.gainedEternityPoints,2)} on Eternity.`},startWithIP(){return this.startingIP.gt(0)?`You will start your next Eternity with ${quantify("Infinity Point",this.startingIP,2)}.`:""},eternityChallenge(){const t=EternityChallenge.current;if(t.isFullyCompleted)return`Eternity Challenge ${t.id} is already fully completed.`;if(!Perk.studyECBulk.isBought)return`You will gain one completion of Eternity Challenge ${t.id}.`;const e=t.gainedCompletionStatus.gainedCompletions;return`You will gain ${quantifyInt("completion",e)} for Eternity Challenge ${t.id}.`}},methods:{update(){this.exitingEC=EternityChallenge.isRunning,this.startingIP=Currency.infinityPoints.startingValue,this.gainedEternityPoints=gainedEternityPoints(),this.gainedEternities=gainedEternities()},handleYesClick(){animateAndEternity(),EventHub.ui.offAll(this)}}};var qfe=function(){var e=this,i=e._self._c;return i("ResetModal",{attrs:{header:e.exitingEC?"Complete Eternity Challenge":"You are about to Eternity",message:e.message,"gained-resources":e.gainedEPOnEternity,"starting-resources":e.startWithIP,"confirm-fn":e.handleYesClick,"alternate-condition":e.exitingEC,"alternate-text":e.exitingEC?e.eternityChallenge:void 0,"confirm-option":"eternity"}})},Yfe=[],Wfe=K(Vfe,qfe,Yfe,!1,null,null);const jfe=Wfe.exports,zfe={name:"ExitChallengeModal",components:{ModalWrapperChoice:Vt},props:{challengeName:{type:String,required:!0},normalName:{type:String,required:!0},hasHigherLayers:{type:Boolean,required:!0},exitFn:{type:Function,required:!0}},computed:{isCelestial(){return this.challengeName.match("Reality")},isRestarting(){return this.isCelestial?player.options.retryCelestial:player.options.retryChallenge}},methods:{handleYesClick(){this.exitFn(),EventHub.ui.offAll(this)}}};var Xfe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"exitChallenge"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to "+e._s(e.isRestarting?"restart":"exit")+" "+e._s(e.challengeName)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" "+e._s(e.isRestarting?"Restart":"Exit")+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e.isRestarting?i("span",[e._v(" You will immediately re-enter "+e._s(e.challengeName)+" again after confirming this modal. ")]):i("span",[e._v(" This will place you back into a regular "+e._s(e.normalName)+" without any restrictions. ")]),e.hasHigherLayers?i("span",[e._v(" Other effects coming from higher-layer restrictions will still continue to apply. ")]):e._e()])])},Kfe=[],Zfe=K(zfe,Xfe,Kfe,!1,null,null);const Qfe=Zfe.exports,Jfe={name:"ExitDilationModal",components:{ModalWrapperChoice:Vt},data(){return{tachyonGain:new Decimal(0),isDoomed:!1}},computed:{gainText(){return this.tachyonGain.lte(0)?"not gain anything":`gain ${quantify("Tachyon Particle",this.tachyonGain,2,1)}`},isInEC(){return Player.anyChallenge instanceof EternityChallengeState},confirmText(){return this.isDoomed?"Okay":"Exit"}},methods:{update(){player.dilation.active||this.emitClose(),this.tachyonGain.copyFrom(getTachyonGain(!0)),this.isDoomed=Pelle.isDoomed},handleYesClick(){if(!player.dilation.active)return;player.options.animations.dilation&&!vl.isDisplaying?animateAndUndilate():eternity(!1,!1,{switchingDilation:!0})}}};var epe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"dilation"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e.isDoomed?i("span",[e._v(" You cannot exit Dilation while Doomed ")]):i("span",[e._v(" You are about to exit Dilation ")])]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" "+e._s(e.confirmText)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e.isDoomed?i("span",[e._v(" Dilation is permanent. You will "+e._s(e.gainText)+" and reset your current Eternity. ")]):i("span",[e._v(" If you exit Dilation now, you will "+e._s(e.gainText)+". ")]),e.isInEC?i("div",[e._v(" You will also exit your current Eternity Challenge as well. ")]):e._e(),i("br"),e._v(" Are you sure you want to proceed? ")])])},tpe=[],ipe=K(Jfe,epe,tpe,!1,null,null);const npe=ipe.exports,rpe={name:"HardResetModal",components:{ModalWrapperChoice:Vt},data(){return{input:""}},computed:{willHardReset(){return this.input==="Shrek is love, Shrek is life"},hasExtraNG(){return player.records.fullGameCompletions>0},hasSpeedrun(){return player.speedrun.isUnlocked}},destroyed(){this.willHardReset&&SecretAchievement(38).unlock()},methods:{hardReset(){this.willHardReset&&GameStorage.hardReset(),this.input=""}}};var spe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{"show-cancel":!e.willHardReset,"show-confirm":e.willHardReset,"confirm-class":"o-primary-btn--width-medium c-modal__confirm-btn c-modal-hard-reset-btn"},on:{confirm:e.hardReset},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" HARD RESET ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" HARD RESET ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Please confirm your desire to hard reset this save slot. "),i("span",{staticClass:"c-modal-hard-reset-danger"},[e._v("Deleting your save will not unlock anything secret.")]),e._v(' Type in "Shrek is love, Shrek is life" to confirm. '),i("div",{staticClass:"c-modal-hard-reset-danger"},[e._v(" THIS WILL WIPE YOUR SAVE. "),e.hasExtraNG?i("span",[i("br"),e._v(" This will also remove any Glyph cosmetics you have unlocked from completing the game! ")]):e._e(),e.hasSpeedrun?i("span",[i("br"),e._v(' You will lose the ability to do a Speedrun. To restart your run, use the "Start Speedrun" button instead. ')]):e._e()])]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"input",staticClass:"c-modal-input c-modal-hard-reset__input",attrs:{type:"text"},domProps:{value:e.input},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)},input:function(n){n.target.composing||(e.input=n.target.value)}}}),i("div",{staticClass:"c-modal-hard-reset-info"},[e.willHardReset?i("div",{staticClass:"c-modal-hard-reset-danger"},[e._v(" Phrase confirmed - continuing will irreversibly delete your save! ")]):i("div",[e._v(" Type in the correct phrase to hard reset. ")])])])},ape=[],ope=K(rpe,spe,ape,!1,null,null);const lpe=ope.exports,cpe={name:"GlyphTooltipEffect",props:{effect:{type:String,required:!0},value:{type:[Number,Object],required:!0}},computed:{effectConfig(){return GlyphEffects[this.effect]},boostColor(){return this.effectConfig.alterationType!==void 0&&this.effectConfig.alterationType!==ALTERATION_TYPE.ADDITION?this.effectConfig.alteredColor():void 0},additionColor(){return this.effectConfig.alterationType===ALTERATION_TYPE.ADDITION?this.effectConfig.alteredColor():void 0},effectStringTemplate(){return this.effectConfig.singleDesc},primaryEffectText(){const t=this.effectConfig.formatSingleEffect(this.value);return this.boostColor?`⯅${t}`:t},secondaryEffectText(){const t=this.effectConfig.formatSingleSecondaryEffect(this.effectConfig.conversion(this.value));return this.boostColor?`⯅${t}`:t},textSplits(){const t=this.effectStringTemplate.split("{value}"),e=t[1]?t[1].split("{value2}"):"";return e.length!==1?[t[0]].concat(e):t},hasValue(){return this.effectStringTemplate.includes("{value}")},hasSecondaryValue(){return this.textSplits[2]!==void 0},isPelleDisabled(){return this.effectConfig.isDisabledByDoomed},convertedParts(){const t=[];for(const e of this.textSplits)t.push(this.convertToHTML(e));return t},valueStyle(){return this.boostColor?{color:this.boostColor,"text-shadow":`0 0 0.4rem ${this.boostColor}`}:{color:"#76EE76"}},textShadowColor(){return GlyphAppearanceHandler.getBaseColor(!0)}},methods:{convertToHTML(t){return t.replace(`
`,"<br>").replace("]","</span>").replace("[",`<span style="${GlyphAppearanceHandler.isLightBG?"":"text-shadow: white 0 0 0.6rem;"}
            font-weight: bold;">`)}}};var upe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-glyph-tooltip__effect",class:{"o-pelle-disabled":e.isPelleDisabled}},[i("span",{domProps:{innerHTML:e._s(e.convertedParts[0])}}),e.hasValue?i("span",{style:e.valueStyle},[e._v(e._s(e.primaryEffectText))]):e._e(),i("span",{domProps:{innerHTML:e._s(e.convertedParts[1])}}),e.hasSecondaryValue?i("span",{style:e.valueStyle},[e._v(e._s(e.secondaryEffectText))]):e._e(),e.hasSecondaryValue?i("span",{domProps:{innerHTML:e._s(e.convertedParts[2])}}):e._e()])},dpe=[],hpe=K(cpe,upe,dpe,!1,null,null);const fpe=hpe.exports,ppe={name:"GlyphTooltip",components:{GlyphTooltipEffect:fpe},props:{type:{type:String,required:!0},strength:{type:Number,required:!0},level:{type:Number,required:!0},effects:{type:Number,required:!0},id:{type:Number,required:!1,default:0},sacrificeReward:{type:Number,required:!1,default:0},refineReward:{type:Number,required:!1,default:0},uncappedRefineReward:{type:Number,required:!1,default:0},currentAction:{type:String,required:!0},scoreMode:{type:Number,required:!0},showDeletionText:{type:Boolean,required:!1,default:!0},displayLevel:{type:Number,required:!1,default:0},changeWatcher:{type:Number,required:!0}},data(){return{showChaosText:!1,chaosDescription:""}},computed:{onTouchDevice(){return GameUI.touchDevice},effectiveLevel(){return this.displayLevel?this.displayLevel:this.level},sortedEffects(){return getGlyphEffectValuesFromBitmask(this.effects,this.effectiveLevel,this.strength,this.type).filter(t=>GlyphEffects[t.id].isGenerated===generatedTypes.includes(this.type))},rarityInfo(){return getRarity(this.strength)},baseColor(){return CosmeticGlyphTypes[this.type].currentColor.bg},textColor(){return this.baseColor==="black"?"white":"black"},mainBorderColor(){return GlyphAppearanceHandler.getBorderColor(this.type)},descriptionStyle(){const t=GlyphAppearanceHandler.getRarityColor(this.strength,this.type),e=GlyphAppearanceHandler.isLightBG?"white":"black";return{color:this.type==="cursed"?e:t,animation:this.type==="reality"?"a-reality-glyph-name-cycle 10s infinite":void 0}},description(){const t=`${this.type.capitalize()}`;switch(this.type){case"companion":return"Companion Glyph";case"cursed":return"Cursed Glyph";case"reality":return`Pure Glyph of ${t}`;default:return`${this.rarityInfo.name} Glyph of ${t}`}},isLevelCapped(){return this.displayLevel&&this.displayLevel<this.level},isLevelBoosted(){return this.displayLevel&&this.displayLevel>this.level},rarityText(){if(!GlyphTypes[this.type].hasRarity)return"";const t=Pelle.isDoomed?Pelle.glyphStrength:this.strength;return`| Rarity:
        <span style="color: ${this.descriptionStyle.color}">${formatRarity(strengthToRarity(t))}</span>`},levelText(){if(this.type==="companion")return"";const t=this.isLevelCapped?"<i class='fas fa-sort-down'></i>":this.isLevelBoosted?"<i class='fas fa-sort-up'></i>":"";return`Level: <span style="color: ${this.isLevelCapped?"#ff4444":this.isLevelBoosted?"#44FF44":void 0}">
              ${t}${formatInt(this.effectiveLevel)}${t}
              </span>`},eventHandlers(){return GameUI.touchDevice?{touchstart:this.touchStart,dragstart:this.dragStart,dragEnd:this.dragEnd}:{}},glyphTooltipStyle(){const t=this.type==="cursed"?this.textColor:GlyphAppearanceHandler.getBorderColor(this.type);return{"pointer-events":this.onTouchDevice?void 0:"none","border-color":t,"box-shadow":`0 0 0.5rem ${t}, 0 0 0.5rem ${t} inset`,animation:this.type==="reality"?"a-reality-glyph-tooltip-cycle 10s infinite":void 0,color:this.textColor,background:this.baseColor}},glyphHeaderStyle(){const t=this.type==="cursed",e=this.type==="reality";let i=GlyphAppearanceHandler.getRarityColor(this.strength,this.type);return t&&(i=this.textColor),this.type==="companion"&&(i=GlyphAppearanceHandler.getBorderColor(this.type)),{"border-color":i,"box-shadow":`0 0 0.5rem 0.1rem ${i}, 0 0 0.8rem ${i} inset`,animation:e?"a-reality-glyph-tooltip-header-cycle 10s infinite":void 0,color:this.textColor,background:this.baseColor}}},watch:{changeWatcher(){this.$recompute("sortedEffects")}},mounted(){document.body.appendChild(this.$el)},destroyed(){try{document.body.removeChild(this.$el)}catch{}},methods:{update(){this.showChaosText=Pelle.specialGlyphEffect.isUnlocked,this.showChaosText&&(this.chaosDescription=Pelle.getSpecialGlyphEffectDescription(this.type))},touchStart(){this.$parent.$emit("tooltip-touched")},dragStart(t){t.preventDefault(),t.stopPropagation()},dragEnd(t){t.preventDefault(),t.stopPropagation()},removeGlyph(){GlyphSacrificeHandler.removeGlyph(Glyphs.findById(this.id),!1)},getFontColor(){return Theme.current().isDark()?"#cccccc":"black"},sacrificeText(){if(this.type==="companion"||this.type==="cursed")return"";const t=`${format(this.sacrificeReward,2,2)}`;return`<span style="font-weight: ${this.currentAction==="sacrifice"?"bold":""};">
              Sacrifice: ${t}
              </span>`},refineText(){if(this.type==="companion"||this.type==="cursed"||this.type==="reality"||!AlchemyResource[this.type].isUnlocked)return"";let t=`${format(this.uncappedRefineReward,2,2)} ${GLYPH_SYMBOLS[this.type]}`;return this.uncappedRefineReward!==this.refineReward&&(t+=` (Actual value due to cap: ${format(this.refineReward,2,2)} ${GLYPH_SYMBOLS[this.type]})`),`<span style="font-weight: ${this.currentAction==="refine"?"bold":""};">
              Refine: ${t}
              </span>`},scoreText(){return this.type==="companion"||this.type==="cursed"||this.type==="reality"||![AUTO_GLYPH_SCORE.SPECIFIED_EFFECT,AUTO_GLYPH_SCORE.EFFECT_SCORE].includes(this.scoreMode)?"":`Score: ${format(AutoGlyphProcessor.filterValue(this.$parent.glyph),1,1)}`}}};var mpe=function(){var e=this,i=e._self._c;return i("div",e._g({staticClass:"l-glyph-tooltip c-glyph-tooltip",style:e.glyphTooltipStyle},e.eventHandlers),[i("div",{staticClass:"c-glyph-tooltip__header",style:e.glyphHeaderStyle},[i("span",{staticClass:"c-glyph-tooltip__description",style:e.descriptionStyle,domProps:{innerHTML:e._s(e.description)}}),i("span",{staticClass:"l-glyph-tooltip__info"},[i("span",{domProps:{innerHTML:e._s(e.levelText)}}),i("span",{domProps:{innerHTML:e._s(e.rarityText)}})]),e.showDeletionText?i("span",[i("span",e._g({staticClass:"c-glyph-tooltip__sacrifice"},e.onTouchDevice?{click:e.removeGlyph}:{}),[i("span",{domProps:{innerHTML:e._s(e.sacrificeText())}}),e.sacrificeText()&&e.refineText()?i("span",[e._v(" | ")]):e._e(),i("span",{domProps:{innerHTML:e._s(e.refineText())}})])]):e._e(),i("span",{staticClass:"c-glyph-tooltip__sacrifice"},[e._v(e._s(e.scoreText()))])]),i("div",{staticClass:"l-glyph-tooltip__effects"},[e._l(e.sortedEffects,function(n){return i("GlyphTooltipEffect",{key:n.id+e.changeWatcher,attrs:{effect:n.id,value:n.value}})}),e.showChaosText?i("div",{staticClass:"pelle-current-glyph-effects c-glyph-tooltip__effect"},[e._v(" "+e._s(e.chaosDescription)+" ")]):e._e()],2)])},ype=[],gpe=K(ppe,mpe,ype,!1,null,"c320f820");const vpe=gpe.exports,Xw={common:[],uncommon:[{lineType:"linear",angles:[45],colorSplit:[14,16,84,86]}],rare:[{lineType:"linear",angles:[45,135],colorSplit:[14,16,84,86]}],epic:[{lineType:"linear",angles:[45,135],colorSplit:[12,14,16,18,82,84,86,88]}],legendary:[{lineType:"bump",colorSplit:[15,25]}],mythical:[{lineType:"bump",colorSplit:[15,25]},{lineType:"linear",angles:[45,135],colorSplit:[10,13,87,90]}],transcendent:[{lineType:"bump",colorSplit:[15,35]},{lineType:"linear",angles:[45,135],colorSplit:[10,12,14,16,84,86,88,90]}],celestial:[{lineType:"bump",colorSplit:[15,35]},{lineType:"radial",colorSplit:[65,85]}],cursed:[{lineType:"spike",center:[40,40],angles:[305,325]},{lineType:"spike",center:[60,40],angles:[35,55]},{lineType:"spike",center:[60,60],angles:[125,145]},{lineType:"spike",center:[40,60],angles:[215,235]}],companion:[{lineType:"companion"}]};function bpe(t,e,i,n){let r,s,a,o,c=!1;const d=[],p=[];switch(t.lineType){case"linear":r=[0,...t.colorSplit,100],s=m=>n?50+.7*(m-50):m;for(const m of t.angles){for(let y=0;y<r.length-1;y++)d.push(`${c?e:"transparent"} ${s(r[y])}% ${s(r[y+1])}%`),c=!c;p.push(`repeating-linear-gradient(${m}deg, ${d.join(",")})`)}return p.join(",");case"bump":o=i.type==="effarig"?`${e}60`:e,a=["50% -25%","50% 125%","-25% 50%","125% 50%"],s=m=>n?m:.9*m;for(let m=0;m<4;m++)d.push(`radial-gradient(at ${a[m]}, transparent, ${o} ${s(t.colorSplit[0])}%,
          transparent ${s(t.colorSplit[1])}%)`);return d.join(",");case"radial":r=[50,...t.colorSplit,100],s=m=>n?.9*m:100-(100-m)/2;for(const m of r)d.push(`${c?e:"transparent"} ${s(m)}%`),c=!c;return`radial-gradient(${d.join(",")})`;case"spike":return d.push(`transparent ${t.angles[0]-5}deg`),d.push(`${e}b0 ${t.angles[0]+5}deg`),d.push(`${e}b0 ${t.angles[1]-5}deg`),d.push(`transparent ${t.angles[1]+5}deg`),`conic-gradient(from 0deg at ${t.center[0]}% ${t.center[1]}%, ${d.join(",")})`;case"companion":r=[0,30,330,360],o=[e,"transparent","transparent",e];for(let m=0;m<4;m++)d.push(`${o[m]} ${r[m]}deg`);p.push(`conic-gradient(${d.join(",")})`),a=["125% 125%","-25% 125%"],s=m=>n?.9*(m+10):m;for(let m=0;m<2;m++)p.push(`radial-gradient(at ${a[m]}, transparent, ${e} ${s(30)}%,
          transparent ${s(50)}%)`);return p.join(",");default:throw new Error("Unrecognized glyph border data")}}const _pe={name:"GlyphComponent",components:{GlyphTooltip:vpe},props:{glyph:{type:Object,required:!0},isInModal:{type:Boolean,required:!1,default:!1},isNew:{type:Boolean,required:!1,default:!1},isUnequipped:{type:Boolean,required:!1,default:!1},showSacrifice:{type:Boolean,required:!1,default:!1},ignoreModifiedLevel:{type:Boolean,required:!1,default:!1},realityGlyphBoost:{type:Number,required:!1,default:0},isInventoryGlyph:{type:Boolean,required:!1,default:!1},isActiveGlyph:{type:Boolean,required:!1,default:!1},size:{type:String,required:!1,default:"5rem"},glowBlur:{type:String,required:!1,default:"1rem"},glowSpread:{type:String,required:!1,default:"0.2rem"},bottomPadding:{type:String,required:!1,default:"0.3rem"},textProportion:{type:Number,required:!1,default:.5},circular:{type:Boolean,required:!1,default:!1},draggable:{type:Boolean,required:!1,default:!1},flipTooltip:{type:Boolean,required:!1,default:!1}},data(){return{componentID:UIID.next(),isDragging:!1,suppressTooltip:!1,isTouched:!1,tooltipEnabled:!1,sacrificeReward:0,uncappedRefineReward:0,refineReward:0,displayLevel:0,tooltipLoaded:!1,logTotalSacrifice:0,realityColor:""}},computed:{hasTooltip(){return!!this.glyph.effects},typeConfig(){return GlyphTypes[this.glyph.type]},cosmeticConfig(){return CosmeticGlyphTypes[this.glyph.cosmetic??this.glyph.type]},isBlobHeart(){return this.$viewModel.theme==="S11"&&this.glyph.type==="companion"},symbol(){const t=this.glyph.symbol;return this.isBlobHeart?"":t||(this.$viewModel.theme==="S4"&&!this.glyph.cosmetic?CANCER_GLYPH_SYMBOLS[this.glyph.type]:this.cosmeticConfig.currentSymbol.symbol)},symbolBlur(){return this.isBlobHeart?!1:this.glyph.symbol?!GlyphAppearanceHandler.unblurredSymbols.includes(this.symbol):this.cosmeticConfig.currentSymbol.blur},zIndexStyle(){return{"z-index":this.isInModal?7:6}},colorObj(){let t;this.glyph.color&&(t=GlyphAppearanceHandler.getColorProps(this.glyph.color)),this.glyph.cosmetic&&(this.glyph.cosmetic===this.glyph.type?t=this.glyph.type==="cursed"?GlyphAppearanceHandler.getBaseColor(!0):this.cosmeticConfig.currentColor:t=this.cosmeticConfig.currentColor);let e;return this.isRealityGlyph&&this.realityColor?e=this.realityColor:e=this.cosmeticConfig.ignoreRarityColor?GlyphAppearanceHandler.getBorderColor(this.glyph.type):GlyphAppearanceHandler.getRarityColor(this.glyph.strength,this.glyph.type),{border:(t==null?void 0:t.border)??GlyphAppearanceHandler.getBorderColor(this.glyph.type),symbol:(t==null?void 0:t.border)??e,bg:(t==null?void 0:t.bg)??this.cosmeticConfig.currentColor.bg}},symbolColor(){return player.options.swapGlyphColors?this.colorObj.border:this.colorObj.symbol},borderColor(){return player.options.swapGlyphColors?this.colorObj.symbol:this.colorObj.border},bgColor(){return this.colorObj.bg},overStyle(){return{width:this.size,height:this.size,position:"absolute","background-color":"rgba(0, 0, 0, 0)","box-shadow":`0 0 ${this.glowBlur} calc(${this.glowSpread} + 0.1rem) ${this.borderColor} inset`,"border-radius":this.circular?"50%":"0"}},outerStyle(){return{width:this.size,height:this.size,"background-color":this.borderColor,"box-shadow":`0 0 ${this.glowBlur} ${this.glowSpread} ${this.borderColor}`,"border-radius":this.circular?"50%":"0","-webkit-user-drag":this.draggable?"":"none"}},innerStyle(){const t=this.symbolColor;return{width:`calc(${this.size} - 0.2rem)`,height:`calc(${this.size} - 0.2rem)`,"font-size":`calc( ${this.size} * ${this.textProportion} )`,color:t,"text-shadow":this.symbolBlur?`-0.04em 0.04em 0.08em ${t}`:void 0,"border-radius":this.circular?"50%":"0","padding-bottom":this.bottomPadding,background:this.bgColor}},mouseEventHandlers(){const t=this.hasTooltip?{mouseenter:this.mouseEnter,"&mousemove":this.mouseMove,mouseleave:this.mouseLeave,mousedown:this.mouseDown,touchstart:this.touchStart,touchend:this.touchEnd}:{};return(this.hasTooltip||this.draggable)&&(t.touchmove=this.touchMove),t},isCurrentTooltip(){return this.$viewModel.tabs.reality.currentGlyphTooltip===this.componentID},tooltipDirectionClass(){let t=this.$viewModel.tabs.reality.glyphTooltipDirection;switch(this.flipTooltip&&(t+=1),t){case-1:return"l-glyph-tooltip--down-left";case 0:return"l-glyph-tooltip--down-right";case 1:return"l-glyph-tooltip--up-left";case 2:return"l-glyph-tooltip--up-right";default:return""}},glyphEffects(){let t=0;switch(this.glyph.type){case"time":case"cursed":case"companion":t=0;break;case"dilation":case"reality":t=4;break;case"replication":t=8;break;case"infinity":t=12;break;case"power":t=16;break;case"effarig":t=20;break;default:throw new Error(`Unrecognized glyph type "${this.glyph.type}" in glyph effect icons`)}const e=[];let i=this.glyph.effects>>t;for(let n=0;i>0;n++)(i&1)===1&&e.push(n),i>>=1;return e},isRealityGlyph(){return this.glyph.type==="reality"},isCursedGlyph(){return this.glyph.type==="cursed"},isCompanionGlyph(){return this.glyph.type==="companion"},showGlyphEffectDots(){return player.options.showHintText.glyphEffectDots},displayedInfo(){const t=["companion","cursed"];if(!this.isInventoryGlyph||t.includes(this.glyph.type))return null;const e=player.options.showHintText;if(e.glyphInfoType===Sm.types.NONE||!e.showGlyphInfoByDefault&&!this.$viewModel.shiftDown)return null;const i=Sm.types;switch(e.glyphInfoType){case i.LEVEL:return this.updateDisplayLevel(),formatInt(this.displayLevel===0?this.glyph.level:this.displayLevel);case i.RARITY:return formatRarity(strengthToRarity(Pelle.isDoomed?Pelle.glyphStrength:this.glyph.strength));case i.SAC_VALUE:return format(this.sacrificeReward,2,2);case i.FILTER_SCORE:return format(AutoGlyphProcessor.filterValue(this.glyph),1,1);case i.CURRENT_REFINE:return`${format(this.refineReward,2,2)} ${this.symbol}`;case i.MAX_REFINE:return`${format(this.uncappedRefineReward,2,2)} ${this.symbol}`;default:throw new Error("Unrecognized Glyph info type in info text")}},showBorders(){return player.options.glyphBorders}},watch:{logTotalSacrifice(){this.tooltipLoaded=!1,this.isCurrentTooltip&&this.showTooltip()}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute("typeConfig"),this.$recompute("cosmeticConfig"),this.$recompute("innerStyle"),this.$recompute("overrideColor"),this.$recompute("showGlyphEffectDots"),this.$recompute("displayedInfo"),this.$recompute("showBorders")}),this.on$("tooltip-touched",()=>this.hideTooltip()),this.on$(GAME_EVENT.TAB_CHANGED,()=>this.hideTooltip()),setTimeout(()=>this.tooltipEnabled=!0,10)},beforeDestroy(){this.isCurrentTooltip&&this.hideTooltip(),this.$viewModel.draggingUIID===this.componentID&&(this.$viewModel.draggingUIID=-1)},methods:{update(){this.logTotalSacrifice=GameCache.logTotalGlyphSacrifice.value,this.realityColor=player.reality.glyphs.cosmetics.colorMap.reality?null:GlyphAppearanceHandler.realityColor,this.sacrificeReward=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph),this.uncappedRefineReward=ALCHEMY_BASIC_GLYPH_TYPES.includes(this.glyph.type)?GlyphSacrificeHandler.glyphRawRefinementGain(this.glyph):0,this.refineReward=ALCHEMY_BASIC_GLYPH_TYPES.includes(this.glyph.type)?GlyphSacrificeHandler.glyphRefinementGain(this.glyph):0,this.tooltipLoaded&&this.updateDisplayLevel()},updateDisplayLevel(){if(this.ignoreModifiedLevel){this.displayLevel=0;return}this.isActiveGlyph?this.displayLevel=getAdjustedGlyphLevel(this.glyph):this.isInventoryGlyph?this.displayLevel=getAdjustedGlyphLevel(this.glyph,0):this.displayLevel=this.glyph.level+(BASIC_GLYPH_TYPES.includes(this.glyph.type)?this.realityGlyphBoost:0)},hideTooltip(){this.tooltipLoaded=!1,this.$viewModel.tabs.reality.mouseoverGlyphInfo.type="",this.$viewModel.tabs.reality.mouseoverGlyphInfo.inInventory=!1,this.$viewModel.tabs.reality.currentGlyphTooltip=-1},showTooltip(){if(!this.tooltipEnabled)return;Glyphs.removeVisualFlag("unseen",this.glyph),Glyphs.removeVisualFlag("unequipped",this.glyph),this.tooltipLoaded=!0,this.$viewModel.tabs.reality.mouseoverGlyphInfo.inInventory=!this.circular;const t=this.$viewModel.tabs.reality.mouseoverGlyphInfo;t.type=this.glyph.type,t.sacrificeValue=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph),t.refineValue=GlyphSacrificeHandler.glyphRawRefinementGain(this.glyph),this.$viewModel.tabs.reality.currentGlyphTooltip=this.componentID,AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.SACRIFICE||AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE_TO_CAP&&this.refineReward===0?this.currentAction="sacrifice":this.currentAction="refine",this.scoreMode=AutoGlyphProcessor.scoreMode},moveTooltipTo(t,e){if(!this.$refs.tooltip)return;const i=this.$refs.tooltip.$el;if(i){const n=document.body.getBoundingClientRect();i.style.left=`${t-n.left}px`,i.style.top=`${e-n.top}px`,this.$viewModel.tabs.reality.glyphTooltipDirection===1?e-i.offsetHeight<=0&&e+i.offsetHeight<n.height&&(this.$viewModel.tabs.reality.glyphTooltipDirection=-1):e+i.offsetHeight>=n.height&&(this.$viewModel.tabs.reality.glyphTooltipDirection=1)}},mouseEnter(t){this.$viewModel.draggingUIID===-1&&(this.moveTooltipTo(t.clientX,t.clientY),this.showTooltip())},mouseLeave(){this.isCurrentTooltip&&this.hideTooltip()},mouseDown(){this.isTouched||this.hideTooltip()},mouseMove(t){this.isTouched||this.moveTooltipTo(t.clientX,t.clientY)},dragStart(t){this.hideTooltip(),this.isDragging=!0,this.suppressTooltip=!0,t.dataTransfer.setData(GLYPH_MIME_TYPE,this.glyph.id.toString()),t.dataTransfer.dropEffect="move";const e=this.$refs.over.getBoundingClientRect();t.dataTransfer.setDragImage(this.$refs.over,t.clientX-e.left,t.clientY-e.top),this.$viewModel.draggingUIID=this.componentID;const i=this.$viewModel.tabs.reality.draggingGlyphInfo;i.id=this.glyph.id,i.type=this.glyph.type,i.sacrificeValue=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph)},dragEnd(){this.isDragging=!1,this.suppressTooltip=!1,this.$viewModel.scrollWindow=0;const t=this.$viewModel.tabs.reality.draggingGlyphInfo;t.id=-1,t.type="",this.$viewModel.draggingUIID===this.componentID&&(this.$viewModel.draggingUIID=-1)},drag(t){if(t.screenX===0&&t.screenY===0){this.$viewModel.scrollWindow=0;return}const e=100;t.clientY<e?this.$viewModel.scrollWindow=-1+.9*t.clientY/e:t.clientY>window.innerHeight-e?this.$viewModel.scrollWindow=1-.9*(window.innerHeight-t.clientY)/e:this.$viewModel.scrollWindow=0},touchStart(){this.isTouched=!0},touchEnd(t){this.isCurrentTooltip?(t.preventDefault(),this.hideTooltip()):this.suppressTooltip||(t.preventDefault(),this.showTooltip(),this.moveTooltipTo(t.changedTouches[0].clientX,t.changedTouches[0].clientY)),this.suppressTooltip=!1,this.isTouched=!1},touchMove(t){const e=t.changedTouches[0],i=this.$refs.over.getBoundingClientRect();(e.clientX<i.left||e.clientY<i.top||e.clientX>i.left+i.width||e.clientY>i.top+i.height)&&(this.suppressTooltip=!0),this.isDragging&&this.drag(e)},effectIconPos(t){const e=this.glyph.type==="effarig"?Math.PI/4*(t+1):Math.PI/2*(t+.5),i=.28*this.size.replace("rem",""),n=-i*Math.sin(e),r=i*(Math.cos(e)+.15);return{dx:n,dy:r}},glyphEffectDots(t){if(["companion","cursed"].includes(this.glyph.type))return{};const e=this.effectIconPos(t);return{position:"absolute",width:"0.3rem",height:"0.3rem","border-radius":"50%",background:this.symbolColor,transform:`translate(${e.dx-.15*.3}rem, ${e.dy-.15*.3}rem)`,opacity:Theme.current().name==="S9"?0:.8}},glyphBorderStyle(){if(!this.showBorders)return null;let t;this.isCursedGlyph?t=Xw.cursed:this.isCompanionGlyph?t=Xw.companion:t=Xw[getRarity(this.glyph.strength).name.toLowerCase()];const e=t.map(i=>bpe(i,this.borderColor,this.glyph,this.circular));return{position:"absolute",left:"2%",width:"96%",height:"96%","border-radius":this.circular?"50%":"0",background:e.filter(i=>i).join(",")}}}};var Epe=function(){var e=this,i=e._self._c;return i("div",e._g({class:["l-glyph-component",{"c-glyph-component--dragging":e.isDragging}],style:e.outerStyle,attrs:{draggable:e.draggable}},e.draggable?{dragstart:e.dragStart,dragend:e.dragEnd,drag:e.drag}:{}),[i("div",{ref:"glyph",class:["l-glyph-component","c-glyph-component"],style:e.innerStyle},[e._v(" "+e._s(e.symbol)+" "),e.$viewModel.shiftDown||e.showGlyphEffectDots?e._l(e.glyphEffects,function(n){return i("div",{key:n,style:e.glyphEffectDots(n)})}):e._e()],2),i("div",{style:e.glyphBorderStyle()}),e.hasTooltip&&e.tooltipLoaded?i("GlyphTooltip",e._b({directives:[{name:"show",rawName:"v-show",value:e.isCurrentTooltip,expression:"isCurrentTooltip"}],ref:"tooltip",class:e.tooltipDirectionClass,style:e.zIndexStyle,attrs:{"sacrifice-reward":e.sacrificeReward,"refine-reward":e.refineReward,"uncapped-refine-reward":e.uncappedRefineReward,"current-action":e.currentAction,"score-mode":e.scoreMode,"show-deletion-text":e.showSacrifice,"display-level":e.displayLevel,component:e.componentID,"change-watcher":e.logTotalSacrifice}},"GlyphTooltip",e.glyph,!1)):e._e(),e.isNew?i("div",{staticClass:"l-corner-icon l-new-glyph"},[e._v(" New! ")]):e.isUnequipped?i("div",{staticClass:"l-corner-icon l-unequipped-glyph fas fa-arrow-up-from-bracket"}):e._e(),e.displayedInfo?i("div",{staticClass:"l-glyph-info"},[e._v(" "+e._s(e.displayedInfo)+" ")]):e._e(),i("div",e._g({ref:"over",style:e.overStyle,on:{click:[function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.$emit("shiftClicked",e.glyph.id)},function(n){return!n.ctrlKey||!n.shiftKey||n.altKey||n.metaKey?null:e.$emit("ctrlShiftClicked",e.glyph.id)},function(n){return!n.metaKey||!n.shiftKey||n.ctrlKey||n.altKey?null:e.$emit("ctrlShiftClicked",e.glyph.id)},function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.$emit("clicked",e.glyph.id)}]}},e.mouseEventHandlers))],1)},Tpe=[],wpe=K(_pe,Epe,Tpe,!1,null,"4cde4479");const du=wpe.exports,Cpe={name:"RealityModal",components:{PrimaryButton:yt,ModalWrapperChoice:Vt,GlyphComponent:du},data(){return{firstReality:!1,hasSpace:!0,hasChoice:!1,hasFilter:!1,glyphs:[],bestLevel:0,levelDifference:0,selectedGlyph:void 0,canRefresh:!1,level:0,simRealities:0,realityMachines:new Decimal,shardsGained:0,effarigUnlocked:!1,willAutoPurge:!1}},computed:{firstRealityText(){return`Reality will reset everything except Challenge records and anything under the General header on the
        Statistics tab. The first ${formatInt(13)} rows of Achievements are also reset,
        but you will automatically get one Achievement back every
        ${timeDisplayNoDecimals(30*6e4)}. You will also gain Reality Machines based on your Eternity Points, a
        Glyph with a level based on your Eternity Points, Replicanti, and Dilated Time, a Perk Point to spend
        on quality of life upgrades, and unlock various upgrades.`},canSacrifice(){return RealityUpgrade(19).isEffectActive},warnText(){return this.hasChoice?this.hasFilter&&this.selectedGlyph===void 0?"If you do not choose a Glyph, one will be automatically selected using your Glyph filter.":this.selectedGlyph===void 0?"You must select a Glyph in order to continue.":null:`You currently only have a single option for new Glyphs every
          Reality. You can unlock the ability to choose from multiple Glyphs by canceling out of this modal and
          purchasing the START Perk.`},gained(){const t=[];return t.push(`${quantifyInt("Reality",this.simRealities)}`),t.push(`${quantifyInt("Perk Point",this.simRealities)}`),t.push(`${quantify("Reality Machine",this.realityMachines,2)}`),this.effarigUnlocked&&t.push(`${quantify("Relic Shard",this.shardsGained,2)}`),`You will gain ${makeEnumeration(t)}`},levelStats(){return`You will get a level ${formatInt(this.level)} Glyph on Reality, which is
        ${this.level===this.bestLevel?"equal to":`
        ${quantifyInt("level",this.levelDifference)}
        ${this.level>this.bestLevel?"higher":"lower"} than`} your best.`},confirmationToDisable(){return ConfirmationTypes.glyphSelection.isUnlocked()?"glyphSelection":void 0},canConfirm(){return this.firstReality||this.selectedGlyph!==void 0||this.hasFilter}},created(){this.getGlyphs(),GlyphSelection.realityProps=getRealityProps(!1,!1)},methods:{update(){this.firstReality=player.realities===0,this.hasChoice=Perk.firstPerk.isEffectActive,this.effarigUnlocked=TeresaUnlocks.effarig.canBeApplied,this.hasFilter=EffarigUnlock.glyphFilter.isUnlocked,this.level=gainedGlyphLevel().actualLevel,this.simRealities=1+simulatedRealityCount(!1),this.hasSpace=GameCache.glyphInventorySpace.value>=this.simRealities;const t=MachineHandler.gainedRealityMachines.times(this.simRealities);if(this.realityMachines.copyFrom(t.clampMax(MachineHandler.distanceToRMCap)),this.shardsGained=Effarig.shardsGained*(simulatedRealityCount(!1)+1),this.willAutoPurge=player.reality.autoAutoClean,!this.firstReality){for(let e=0;e<this.glyphs.length;++e){const i=this.glyphs[e],n=GlyphSelection.glyphList(GlyphSelection.choiceCount,gainedGlyphLevel(),{isChoosingGlyph:!1})[e];i.level!==n.level&&(i.level=n.level,i.effects=n.effects)}this.bestLevel=player.records.bestReality.glyphLevel,this.levelDifference=Math.abs(this.bestLevel-this.level)}},glyphClass(t){return{"l-modal-glyph-selection__glyph":!0,"l-modal-glyph-selection__glyph--selected":this.selectedGlyph===t}},getGlyphs(){this.canRefresh=!0,this.glyphs=GlyphSelection.upcomingGlyphs},select(t){this.selectedGlyph=t},confirmModal(t){this.canConfirm&&(t&&this.emitClose(),startManualReality(t,this.selectedGlyph))}}};var Spe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:e.confirmationToDisable,"show-confirm":e.canConfirm},on:{confirm:function(n){return e.confirmModal(!1)}},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to Reality ")]},proxy:!0},e.canSacrifice&&e.canConfirm?{key:"extra-buttons",fn:function(){return[i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn",on:{click:function(n){return e.confirmModal(!0)}}},[e._v(" Sacrifice ")])]},proxy:!0}:null],null,!0)},[e.firstReality?i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.firstRealityText)+" ")]):e._e(),i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.gained)+" ")]),e.firstReality?e._e():i("div",{staticClass:"l-glyph-selection__row"},e._l(e.glyphs,function(n,r){return i("GlyphComponent",{key:r,class:e.glyphClass(r),attrs:{glyph:n,"is-in-modal":!0,"ignore-modified-level":!0,"show-sacrifice":e.canSacrifice},nativeOn:{click:function(s){return e.select(r)}}})}),1),e.firstReality?e._e():i("div",[e._v(" "+e._s(e.levelStats)+" "),i("br"),i("b",{staticClass:"o-warning"},[e._v(" "+e._s(e.warnText)+" ")])]),e.simRealities>1?i("div",[i("br"),e._v(" After choosing this Glyph the game will simulate the rest of your Realities, "),i("br"),e._v(" automatically choosing another "+e._s(e.quantifyInt("Glyph",e.simRealities-1))+" based on your Glyph filter settings. ")]):e._e(),e.willAutoPurge?i("div",[i("br"),e._v(" Auto-purge is currently enabled; your selected Glyph "),i("br"),e._v(" may not appear in your inventory after it triggers. ")]):e._e(),e.hasSpace?e._e():i("div",{staticClass:"o-warning"},[e.simRealities>1?i("span",[e._v(" You will be simulating more Realities than you have open inventory space for; this may result in some Glyphs being Sacrificed. ")]):i("span",[e._v(" You do not have any free inventory space - your selected Glyph will be automatically "+e._s(e.canSacrifice?"Sacrificed":"deleted")+"! ")])]),e.confirmationToDisable?i("div",[i("br"),e._v(" You can force this modal to appear (even if disabled) by Shift-clicking the Reality button. ")]):e._e()])},kpe=[],Ape=K(Cpe,Spe,kpe,!1,null,"75adc00a");const Rpe=Ape.exports,Ipe={name:"ReplicantiGalaxyModal",components:{ModalWrapperChoice:Vt},data(){return{replicanti:new Decimal,divideReplicanti:!1,canBeBought:0}},computed:{topLabel(){return`You are about to purchase ${quantifyInt("Replicanti Galaxy",this.canBeBought)}`},message(){return`A Replicanti Galaxy boosts Tickspeed the same way an Antimatter Galaxy does. However, it does not
        increase the cost of Antimatter Galaxies, nor is it affected by multipliers to Antimatter Galaxies specifically.
        It will ${this.divideReplicanti?`divide your Replicanti by ${format(Number.MAX_VALUE,2,2)} for each Replicanti Galaxy purchased
          (${format(this.replicanti,2,2)} to
          ${format(this.replicanti.divide(Decimal.NUMBER_MAX_VALUE.pow(this.canBeBought)),2,2)})`:`reset your Replicanti to ${formatInt(1)}`}.`}},methods:{update(){this.replicanti.copyFrom(player.replicanti.amount),this.divideReplicanti=Achievement(126).isUnlocked,this.canBeBought=Replicanti.galaxies.gain,this.replicanti.lt(Number.MAX_VALUE)&&this.emitClose()},handleYesClick(){replicantiGalaxy(!1)}}};var Dpe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"replicantiGalaxy"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")])])},xpe=[],Mpe=K(Ipe,Dpe,xpe,!1,null,null);const Ppe=Mpe.exports,Ope={name:"ResetRealityModal",components:{ModalWrapperChoice:Vt},data(){return{isDoomed:!1,canReality:!1}},computed:{resetTerm(){return this.isDoomed?"Armageddon":"Reality"}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.canReality=isRealityAvailable()},handleYesClick(){beginProcessReality(getRealityProps(!0)),EventHub.ui.offAll(this)}}};var Npe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"resetReality"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to reset your "+e._s(e.resetTerm)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Reset ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" This will reset you to the start of your "+e._s(e.resetTerm)+", giving you no rewards from your progress in your current "+e._s(e.resetTerm)+". "),i("br"),i("br"),e._v(" Are you sure you want to do this? "),e.canReality?i("div",{staticClass:"c-has-rewards"},[i("br"),e._v(' You can currently complete a Reality for all its normal rewards, which you will not receive if you Reset here. To get rewards, use the "Make a new Reality" button. ')]):e._e(),i("br")])])},Gpe=[],Upe=K(Ope,Npe,Gpe,!1,null,"4d996ee1");const Lpe=Upe.exports,Bpe={name:"PrimaryToggleButton",components:{PrimaryButton:yt},props:{label:{type:String,required:!1,default:""},on:{type:String,required:!1,default:"ON"},off:{type:String,required:!1,default:"OFF"},value:{type:Boolean,required:!0}},computed:{displayText(){return`${this.label} ${this.value?this.on:this.off}`.trim()}}};var Fpe=function(){var e=this,i=e._self._c;return i("PrimaryButton",e._b({on:{click:function(n){return e.emitInput(!e.value)}}},"PrimaryButton",e.$attrs,!1),[e._v(" "+e._s(e.displayText)+" ")])},$pe=[],Hpe=K(Bpe,Fpe,$pe,!1,null,null);const cn=Hpe.exports,Vpe={name:"ModalOptionsToggleButton",components:{PrimaryToggleButton:cn},props:{value:{type:Boolean,required:!1,default:!1},text:{type:String,required:!0}},computed:{styleObject(){return{"background-color":this.value?"var(--color-good)":"var(--color-gh-purple)"}}}};var qpe=function(){var e=this,i=e._self._c;return i("PrimaryToggleButton",{staticClass:"o-primary-btn--modal-option",style:e.styleObject,attrs:{value:e.value,label:e.text},on:{input:e.emitInput}})},Ype=[],Wpe=K(Vpe,qpe,Ype,!1,null,null);const oy=Wpe.exports,jpe={name:"ModalWrapper",components:{ModalCloseButton:ay},methods:{closeModal(){EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}};var zpe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal__inner"},[i("div",{staticClass:"c-modal__header"},[i("ModalCloseButton",{on:{click:e.closeModal}}),e.$slots.header?i("span",{staticClass:"c-modal__title"},[e._t("header")],2):e._e()],1),e._t("default")],2)},Xpe=[],Kpe=K(jpe,zpe,Xpe,!1,null,"dd0f3bed");const As=Kpe.exports,Zpe={name:"ModalWrapperOptions",components:{ModalWrapper:As}};var Qpe=function(){var e=this,i=e._self._c;return i("ModalWrapper",{staticClass:"c-modal-options l-modal-options",scopedSlots:e._u([{key:"header",fn:function(){return[e._t("header")]},proxy:!0}],null,!0)},[e._t("default")],2)},Jpe=[],eme=K(Zpe,Qpe,Jpe,!1,null,null);const hu=eme.exports,tme={name:"PlusMinusButton",props:{type:{type:String,required:!0}},computed:{iconClass(){return`fas fa-${this.type}`}}};var ime=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"repeating-click",rawName:"v-repeating-click",value:{delay:500},expression:"{ delay: 500 }"}],staticClass:"c-ad-slider__button",on:{firstclick:function(n){return e.$emit("click")},repeatclick:function(n){return e.$emit("click")}}},[i("div",{class:e.iconClass})])},nme=[],rme=K(tme,ime,nme,!1,null,"ffb6ef41");const sme=rme.exports,ame=function(){const t=typeof window>"u"?1:window.devicePixelRatio||1;return e=>Math.round(e*t)/t}(),ome={name:"SliderComponent",components:{PlusMinusButton:sme},props:{width:{type:String,default:"auto"},height:{type:String,default:"6px"},data:{type:Array,default:null},dotSize:{type:[String,Number],default:"16px"},dotWidth:{type:String,required:!1},dotHeight:{type:String,required:!1},min:{type:Number,default:0},max:{type:Number,default:100},interval:{type:Number,default:1},show:{type:Boolean,default:!0},disabled:{type:[Boolean,Array],default:!1},piecewise:{type:Boolean,default:!1},tooltip:{type:[String,Boolean],default:"always"},eventType:{type:String,default:"auto"},direction:{type:String,default:"horizontal"},reverse:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},speed:{type:Number,default:.5},realTime:{type:Boolean,default:!1},stopPropagation:{type:Boolean,default:!1},value:{type:[String,Number,Array,Object],default:0},piecewiseLabel:{type:Boolean,default:!1},debug:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},minRange:{type:Number},maxRange:{type:Number},processDraggable:{type:Boolean,default:!1},useKeyboard:{type:Boolean,default:!1},actionsKeyboard:{type:Array,default(){return[t=>t-1,t=>t+1]}},piecewiseFilter:{type:Function},tooltipMerge:{type:Boolean,default:!0},startAnimation:{type:Boolean,default:!1},enableCross:{type:Boolean,default:!0},valueInDot:{type:Boolean,default:!1},plusMinusButtons:{type:Boolean,default:!1},sliderStyle:[Array,Object,Function],focusStyle:[Array,Object,Function],tooltipDir:[Array,String],xformatter:[String,Function],mergeFormatter:[String,Function],piecewiseStyle:Object,disabledStyle:Object,piecewiseActiveStyle:Object,processStyle:Object,processClass:String,bgStyle:Object,bgClass:String,tooltipStyle:[Array,Object,Function],disabledDotStyle:[Array,Object,Function],labelStyle:Object,labelActiveStyle:Object,dotClass:[String,Array]},data(){return{flag:!1,dragFlag:!1,crossFlag:!1,keydownFlag:null,focusFlag:!1,processFlag:!1,processSign:null,size:0,fixedValue:0,focusSlider:0,currentValue:0,currentSlider:0,isComponentExists:!0,isMounted:!1,dotAxialSizePx:1}},computed:{tooltipFormatHelper(){return this.mergeFormatter?this.mergeFormatting(this.val[0],this.val[1]):this.xformatter?this.val[0]===this.val[1]?this.formatting(this.val[0]):`${this.formatting(this.val[0])}-${this.formatting(this.val[1])}`:this.val[0]===this.val[1]?this.val[0]:`${this.val[0]}-${this.val[1]}`},dotWidthVal(){return this.dotWidth||this.dotSize},dotHeightVal(){return this.dotHeight||this.dotSize},flowDirection(){return`l-ad-slider--${this.direction+(this.reverse?"-reverse":"")}`},tooltipMergedPosition(){if(!this.isMounted)return{};const t=this.tooltipDirection[0];if(this.$refs.dot0){const e={};return e[t]=`-${this.dotAxialSizePx/2-this.size/2+9}px`,e.left="50%",e}},tooltipDirection(){const t=this.tooltipDir||(this.direction==="vertical"?"left":"top");return Array.isArray(t)?this.isRange?t:t[1]:this.isRange?[t,t]:t},tooltipStatus(){return this.tooltip==="hover"&&this.flag?"ad-slider-always":this.tooltip?`ad-slider-${this.tooltip}`:""},tooltipClass(){return[`ad-slider-tooltip-${this.tooltipDirection}`,"ad-slider-tooltip"]},disabledArray(){return Array.isArray(this.disabled)?this.disabled:[this.disabled,this.disabled]},boolDisabled(){return this.disabledArray.every(t=>t===!0)},isDisabled(){return this.eventType==="none"?!0:this.boolDisabled},disabledClass(){return this.boolDisabled?"l-ad-slider--disabled":""},stateClass(){return{"ad-slider-state-process-drag":this.processFlag,"ad-slider-state-drag":this.flag&&!this.processFlag&&!this.keydownFlag,"ad-slider-state-focus":this.focusFlag}},isRange(){return Array.isArray(this.value)},slider(){return this.isRange?[this.$refs.dot0,this.$refs.dot1]:[this.$refs.dot0]},minimum(){return this.data?0:this.min},val:{get(){return this.data?this.isRange?[this.data[this.currentValue[0]],this.data[this.currentValue[1]]]:this.data[this.currentValue]:this.currentValue},set(t){if(this.data)if(this.isRange){const e=this.data.indexOf(t[0]),i=this.data.indexOf(t[1]);e>-1&&i>-1&&(this.currentValue=[e,i])}else{const e=this.data.indexOf(t);e>-1&&(this.currentValue=e)}else this.currentValue=t}},currentIndex(){return this.isRange?this.data?this.currentValue:[this.getIndexByValue(this.currentValue[0]),this.getIndexByValue(this.currentValue[1])]:this.getIndexByValue(this.currentValue)},indexRange(){return this.isRange?this.currentIndex:[0,this.currentIndex]},maximum(){return this.data?this.data.length-1:this.max},multiple(){const t=`${this.interval}`.split(".")[1];return t?Math.pow(10,t.length):1},spacing(){return this.data?1:this.interval},total(){return this.data?this.data.length-1:(Math.floor((this.maximum-this.minimum)*this.multiple)%(this.interval*this.multiple)!==0&&this.printError("Prop[interval] is illegal, Please make sure that the interval can be divisible"),(this.maximum-this.minimum)/this.interval)},usableSize(){return this.size-this.dotAxialSizePx},gap(){return this.usableSize/this.total},position(){return this.isRange?[(this.currentValue[0]-this.minimum)/this.spacing*this.gap+this.dotAxialSizePx/2,(this.currentValue[1]-this.minimum)/this.spacing*this.gap+this.dotAxialSizePx/2]:(this.currentValue-this.minimum)/this.spacing*this.gap+this.dotAxialSizePx/2},isFixed(){return this.fixed||this.minRange},limit(){return this.isRange?this.isFixed?[[this.dotAxialSizePx/2,this.dotAxialSizePx/2+(this.total-this.fixedValue)*this.gap],[this.fixedValue*this.gap+this.dotAxialSizePx/2,this.size-this.dotAxialSizePx/2]]:[[this.dotAxialSizePx/2,this.position[1]],[this.position[0],this.size-this.dotAxialSizePx/2]]:[this.dotAxialSizePx/2,this.size-this.dotAxialSizePx/2]},valueLimit(){return this.isRange?this.isFixed?[[this.minimum,this.maximum-this.fixedValue*(this.spacing*this.multiple)/this.multiple],[this.minimum+this.fixedValue*(this.spacing*this.multiple)/this.multiple,this.maximum]]:[[this.minimum,this.currentValue[1]],[this.currentValue[0],this.maximum]]:[this.minimum,this.maximum]},idleSlider(){return this.currentSlider===0?1:0},wrapStyles(){const t=this.direction==="vertical"?{height:this.height}:{width:this.width};return this.plusMinusButtons&&(t[this.direction==="vertical"?"margin-top":"margin-right"]="0.5rem",t[this.direction==="vertical"?"margin-bottom":"margin-left"]="0.5rem"),t},sliderStyles(){return Array.isArray(this.sliderStyle)?this.isRange?this.sliderStyle:this.sliderStyle[1]:typeof this.sliderStyle=="function"?this.sliderStyle(this.val,this.currentIndex):this.isRange?[this.sliderStyle,this.sliderStyle]:this.sliderStyle},focusStyles(){return Array.isArray(this.focusStyle)?this.isRange?this.focusStyle:this.focusStyle[1]:typeof this.focusStyle=="function"?this.focusStyle(this.val,this.currentIndex):this.isRange?[this.focusStyle,this.focusStyle]:this.focusStyle},disabledDotStyles(){const t=this.disabledDotStyle;if(Array.isArray(t))return t;if(typeof t=="function"){const e=t(this.val,this.currentIndex);return Array.isArray(e)?e:[e,e]}return t?[t,t]:[{backgroundColor:"#ccc"},{backgroundColor:"#ccc"}]},tooltipStyles(){return Array.isArray(this.tooltipStyle)?this.isRange?this.tooltipStyle:this.tooltipStyle[1]:typeof this.tooltipStyle=="function"?this.tooltipStyle(this.val,this.currentIndex):this.isRange?[this.tooltipStyle,this.tooltipStyle]:this.tooltipStyle},elemStyles(){return this.direction==="vertical"?{width:this.width,height:"100%",position:"relative"}:{height:this.height,position:"relative"}},draggableStyle(){return{cursor:this.boolDisabled?"default":"pointer"}},dotStyles(){const t={width:this.dotWidthVal,height:this.dotHeightVal,position:"absolute"};return this.direction==="vertical"?t.left="50%":t.top="50%",t},piecewiseDotStyle(){return{width:this.width,height:this.height}},piecewiseDotWrap(){if(!this.piecewise&&!this.piecewiseLabel)return!1;const t=[];for(let e=0;e<=this.total;e++){const i=this.direction==="vertical"?{bottom:`${this.gap*e-this.usableSize/2}px`,left:0}:{left:`${this.gap*e-this.usableSize/2}px`,top:0},n=this.reverse?this.total-e:e,r=this.data?this.data[n]:this.spacing*n+this.min;this.piecewiseFilter&&!this.piecewiseFilter({index:n,label:r})||t.push({style:i,index:n,label:this.xformatter?this.formatting(r):r})}return t}},watch:{value(t){this.flag||this.setValue(t,!0)},max(t){if(t<this.min)return this.printError("The maximum value can not be less than the minimum value.");const e=this.limitValue(this.val);this.setValue(e),this.refresh()},min(t){if(t>this.max)return this.printError("The minimum value can not be greater than the maximum value.");const e=this.limitValue(this.val);this.setValue(e),this.refresh()},show(t){t&&!this.size&&this.$nextTick(()=>{this.refresh()})},fixed(){this.computedFixedValue()},minRange(){this.computedFixedValue()},reverse(){this.$refs.process.style.cssText="",this.refresh()}},mounted(){if(this.isComponentExists=!0,typeof window>"u"||typeof document>"u")return this.printError("window or document is undefined, can not be initialization.");this.$nextTick(()=>{this.isComponentExists&&(this.getStaticData(),this.setValue(this.limitValue(this.value),!0,this.startAnimation?this.speed:0),this.bindEvents(),this.isRange&&this.tooltipMerge&&!this.startAnimation&&this.$nextTick(()=>{this.handleOverlapTooltip()}))}),this.isMounted=!0},beforeDestroy(){this.isComponentExists=!1,this.unbindEvents()},methods:{bindEvents(){document.addEventListener("touchmove",this.moving,{passive:!1}),document.addEventListener("touchend",this.moveEnd,{passive:!1}),document.addEventListener("mousedown",this.blurSlider),document.addEventListener("mousemove",this.moving),document.addEventListener("mouseup",this.moveEnd),document.addEventListener("mouseleave",this.moveEnd),document.addEventListener("keydown",this.handleKeydown),document.addEventListener("keyup",this.handleKeyup),window.addEventListener("resize",this.refresh),this.isRange&&this.tooltipMerge&&(this.$refs.dot0.addEventListener("transitionend",this.handleOverlapTooltip),this.$refs.dot1.addEventListener("transitionend",this.handleOverlapTooltip))},unbindEvents(){document.removeEventListener("touchmove",this.moving),document.removeEventListener("touchend",this.moveEnd),document.removeEventListener("mousedown",this.blurSlider),document.removeEventListener("mousemove",this.moving),document.removeEventListener("mouseup",this.moveEnd),document.removeEventListener("mouseleave",this.moveEnd),document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("keyup",this.handleKeyup),window.removeEventListener("resize",this.refresh),this.isRange&&this.tooltipMerge&&(this.$refs.dot0.removeEventListener("transitionend",this.handleOverlapTooltip),this.$refs.dot1.removeEventListener("transitionend",this.handleOverlapTooltip))},handleKeydown(t){if(!this.useKeyboard||!this.focusFlag)return!1;switch(t.keyCode){case 37:case 40:t.preventDefault(),this.keydownFlag=!0,this.flag=!0,this.changeFocusSlider(this.actionsKeyboard[0]);break;case 38:case 39:t.preventDefault(),this.keydownFlag=!0,this.flag=!0,this.changeFocusSlider(this.actionsKeyboard[1]);break}},handleKeyup(){this.keydownFlag&&(this.keydownFlag=!1,this.flag=!1)},changeFocusSlider(t){if(this.isRange){let e=this.currentIndex.map((i,n)=>{if(n===this.focusSlider||this.fixed){const r=t(i),s=this.fixed?this.valueLimit[n]:[0,this.total];if(r<=s[1]&&r>=s[0])return r}return i});e[0]>e[1]&&(this.focusSlider=this.focusSlider===0?1:0,e=e.reverse()),this.setIndex(e)}else this.setIndex(t(this.currentIndex))},blurSlider(t){const e=this.isRange?this.$refs[`dot${this.focusSlider}`]:this.$refs.dot;if(!e||e===t.target||e.contains(t.target))return!1;this.focusFlag=!1},formatting(t){return typeof this.xformatter=="string"?this.xformatter.replace(/\{value\}/u,t):this.xformatter(t)},mergeFormatting(t,e){return typeof this.mergeFormatter=="string"?this.mergeFormatter.replace(/\{(value1|value2)\}/gu,(i,n)=>n==="value1"?t:e):this.mergeFormatter(t,e)},getPos(t){this.realTime&&this.getStaticData();const e=this.$refs.elem.getBoundingClientRect();return this.direction==="vertical"?this.reverse?t.clientY-e.top:this.size-(t.clientY-e.top):this.reverse?this.size-(t.clientX-e.left):t.clientX-e.left},processClick(t){this.fixed&&t.stopPropagation()},wrapClick(t){if(this.isDisabled||!this.clickable||this.processFlag||this.dragFlag)return!1;const e=this.getPos(t);if(this.isRange){if(this.disabledArray.every(i=>i===!1))this.currentSlider=e>(this.position[1]-this.position[0])/2+this.position[0]?1:0;else if(this.disabledArray[0]){if(e<this.position[0])return!1;this.currentSlider=1}else if(this.disabledArray[1]){if(e>this.position[1])return!1;this.currentSlider=0}}if(this.disabledArray[this.currentSlider])return!1;if(this.setValueOnPos(e),this.isRange&&this.tooltipMerge){const i=setInterval(()=>this.handleOverlapTooltip(),16.7);setTimeout(()=>window.clearInterval(i),this.speed*1e3)}},moveStart(t,e=0,i){if(this.disabledArray[e])return!1;if(this.stopPropagation&&t.stopPropagation(),this.isRange){if(this.currentSlider=e,i){if(!this.processDraggable)return!1;this.processFlag=!0,this.processSign={pos:this.position,start:this.getPos(t.targetTouches&&t.targetTouches[0]?t.targetTouches[0]:t)}}!this.enableCross&&this.val[0]===this.val[1]&&(this.crossFlag=!0)}!i&&this.useKeyboard&&(this.focusFlag=!0,this.focusSlider=e),this.flag=!0,this.$emit("drag-start",this)},moving(t){if(this.stopPropagation&&t.stopPropagation(),!this.flag)return!1;t.preventDefault(),t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),this.processFlag?(this.currentSlider=0,this.setValueOnPos(this.processSign.pos[0]+this.getPos(t)-this.processSign.start,!0),this.currentSlider=1,this.setValueOnPos(this.processSign.pos[1]+this.getPos(t)-this.processSign.start,!0)):(this.dragFlag=!0,this.setValueOnPos(this.getPos(t),!0)),this.isRange&&this.tooltipMerge&&this.handleOverlapTooltip()},moveEnd(t){if(this.stopPropagation&&t.stopPropagation(),this.flag)this.$emit("drag-end",this),this.lazy&&this.isDiff(this.val,this.value)&&this.syncValue();else return!1;this.flag=!1,window.setTimeout(()=>{this.crossFlag=!1,this.dragFlag=!1,this.processFlag=!1},0),this.setPosition()},setValueOnPos(t,e){const i=this.isRange?this.limit[this.currentSlider]:this.limit,n=this.isRange?this.valueLimit[this.currentSlider]:this.valueLimit,r=Math.round((t-this.dotAxialSizePx/2)/this.gap);if(t>=i[0]&&t<=i[1]){const s=this.getValueByIndex(r);this.setTransform(t),this.setCurrentValue(s,e),this.isRange&&(this.fixed||this.isLessRange(t,r))&&(this.setTransform(t+this.fixedValue*this.gap*(this.currentSlider===0?1:-1),!0),this.setCurrentValue((s*this.multiple+this.fixedValue*this.spacing*this.multiple*(this.currentSlider===0?1:-1))/this.multiple,e,!0))}else{const s=t<i[0]?0:1,a=s===0?1:0;this.setTransform(i[s]),this.setCurrentValue(n[s]),this.isRange&&(this.fixed||this.isLessRange(t,r))?(this.setTransform(this.limit[this.idleSlider][s],!0),this.setCurrentValue(this.valueLimit[this.idleSlider][s],e,!0)):this.isRange&&(this.enableCross||this.crossFlag)&&!this.isFixed&&!this.disabledArray[s]&&this.currentSlider===a&&(this.focusSlider=s,this.currentSlider=s)}this.crossFlag=!1},isLessRange(t,e){if(!this.isRange||!this.minRange&&!this.maxRange)return!1;const i=this.currentSlider===0?this.currentIndex[1]-e:e-this.currentIndex[0];return this.minRange&&i<=this.minRange?(this.fixedValue=this.minRange,!0):this.maxRange&&i>=this.maxRange?(this.fixedValue=this.maxRange,!0):(this.computedFixedValue(),!1)},isDiff(t,e){return Object.prototype.toString.call(t)!==Object.prototype.toString.call(e)?!0:Array.isArray(t)&&t.length===e.length?t.some((i,n)=>i!==e[n]):t!==e},setCurrentValue(t,e,i){const n=i?this.idleSlider:this.currentSlider;if(t<this.minimum||t>this.maximum)return!1;this.isRange?this.isDiff(this.currentValue[n],t)&&(this.currentValue.splice(n,1,t),(!this.lazy||!this.flag)&&this.syncValue()):this.isDiff(this.currentValue,t)&&(this.currentValue=t,(!this.lazy||!this.flag)&&this.syncValue()),e||this.setPosition()},getValueByIndex(t){return(this.spacing*this.multiple*t+this.minimum*this.multiple)/this.multiple},getIndexByValue(t){return Math.round((t-this.minimum)*this.multiple)/(this.spacing*this.multiple)},setIndex(t){if(Array.isArray(t)&&this.isRange){let e;this.data?e=[this.data[t[0]],this.data[t[1]]]:e=[this.getValueByIndex(t[0]),this.getValueByIndex(t[1])],this.setValue(e)}else t=this.getValueByIndex(t),this.isRange&&(this.currentSlider=t>(this.currentValue[1]-this.currentValue[0])/2+this.currentValue[0]?1:0),this.setCurrentValue(t)},increment(t){if(this.boolDisabled)return;const e=this.getValue()+t*this.interval;e>this.max||e<this.min||this.setValue(e)},setValue(t,e,i){if(this.isDiff(this.val,t)){const n=this.limitValue(t);this.val=this.isRange?n.concat():n,this.computedFixedValue(),this.syncValue(e)}this.$nextTick(()=>this.setPosition(i))},computedFixedValue(){if(!this.isFixed)return this.fixedValue=0,!1;this.fixedValue=Math.max(this.fixed?this.currentIndex[1]-this.currentIndex[0]:0,this.minRange||0)},setPosition(t){this.flag||this.setTransitionTime(t===void 0?this.speed:t),this.isRange?(this.setTransform(this.position[0],this.currentSlider===1),this.setTransform(this.position[1],this.currentSlider===0)):this.setTransform(this.position),this.flag||this.setTransitionTime(0)},setTransform(t,e){const i=e?this.idleSlider:this.currentSlider,n=ame((this.direction==="vertical"?this.dotAxialSizePx/2-t:t-this.dotAxialSizePx/2)*(this.reverse?-1:1)),r=this.direction==="vertical"?`translate(-50%, ${n}px)`:`translate(${n}px, -50%)`,s=this.fixed?`${this.fixedValue*this.gap}px`:`${i===0?this.position[1]-t:t-this.position[0]}px`,a=this.fixed?`${i===0?t:t-this.fixedValue*this.gap}px`:`${i===0?t:this.position[0]}px`;this.slider[i].style.transform=r,this.slider[i].style.WebkitTransform=r,this.slider[i].style.msTransform=r,this.isRange?this.direction==="vertical"?(this.$refs.process.style.height=s,this.$refs.process.style[this.reverse?"top":"bottom"]=a):(this.$refs.process.style.width=s,this.$refs.process.style[this.reverse?"right":"left"]=a):this.direction==="vertical"?(this.$refs.process.style.height=`${t}px`,this.$refs.process.style[this.reverse?"top":"bottom"]=0):(this.$refs.process.style.width=`${t}px`,this.$refs.process.style[this.reverse?"right":"left"]=0)},setTransitionTime(t){t||this.$refs.process.offsetWidth;for(let e=0;e<this.slider.length;e++)this.slider[e].style.transitionDuration=`${t}s`,this.slider[e].style.WebkitTransitionDuration=`${t}s`;this.isRange?(this.$refs.process.style.transitionDuration=`${t}s`,this.$refs.process.style.WebkitTransitionDuration=`${t}s`):(this.$refs.process.style.transitionDuration=`${t}s`,this.$refs.process.style.WebkitTransitionDuration=`${t}s`)},limitValue(t){if(this.data)return t;const e=i=>i<this.min?(this.printError(`The value of the slider is ${t}, the minimum value is ${this.min}, the value of this slider can not be less than the minimum value`),this.min):i>this.max?(this.printError(`The value of the slider is ${t}, the maximum value is ${this.max}, the value of this slider can not be greater than the maximum value`),this.max):i;return this.isRange?t.map(i=>e(i)):e(t)},isActive(t){return t>=this.indexRange[0]&&t<=this.indexRange[1]},syncValue(t){const e=this.isRange?this.val.concat():this.val;this.$emit("input",e),this.keydownFlag&&this.$emit("on-keypress",e),t||this.$emit("callback",e)},getValue(){return this.val},getIndex(){return this.currentIndex},getStaticData(){this.$refs.elem&&(this.size=this.direction==="vertical"?this.$refs.elem.offsetHeight:this.$refs.elem.offsetWidth,this.dotAxialSizePx=this.direction==="vertical"?this.$refs.dot0.clientHeight:this.$refs.dot0.clientWidth)},refresh(){this.$refs.elem&&(this.getStaticData(),this.computedFixedValue(),this.setPosition(0))},printError(t){this.debug&&console.error(`[VueSlider error]: ${t}`)},handleOverlapTooltip(){const t=this.tooltipDirection[0]===this.tooltipDirection[1];if(this.isRange&&t){const e=this.reverse?this.$refs.tooltip1:this.$refs.tooltip0,i=this.reverse?this.$refs.tooltip0:this.$refs.tooltip1,n=e.getBoundingClientRect(),r=i.getBoundingClientRect(),s=n.right,a=r.left,o=n.top,c=r.top+r.height,d=this.direction==="horizontal"&&s>a,p=this.direction==="vertical"&&c>o;d||p?this.handleDisplayMergedTooltip(!0):this.handleDisplayMergedTooltip(!1)}},handleDisplayMergedTooltip(t){const e=this.$refs.tooltip0,i=this.$refs.tooltip1,n=this.$refs.process.getElementsByClassName("vue-merged-tooltip")[0];t?(e.style.visibility="hidden",i.style.visibility="hidden",n.style.visibility="visible"):(e.style.visibility="visible",i.style.visibility="visible",n.style.visibility="hidden")},dotContents(){return Notations.current.name==="Blind"||Theme.current().name==="S9"?"":this.valueInDot?Math.round(this.getValue()):""}}};var lme=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],class:["l-ad-slider",e.flowDirection,e.disabledClass,{"l-ad-slider--has-label":e.piecewiseLabel}]},[e.plusMinusButtons?i("PlusMinusButton",{attrs:{type:"minus"},on:{click:function(n){return e.increment(-1)}}}):e._e(),i("div",{ref:"wrap",class:["l-ad-slider__wrap",e.stateClass],style:[e.wrapStyles,e.boolDisabled?e.disabledStyle:null],on:{click:e.wrapClick}},[i("div",{ref:"elem",class:["l-ad-slider__bg","c-ad-slider__bg",e.bgClass],style:[e.elemStyles,e.bgStyle,e.draggableStyle],attrs:{"aria-hidden":"true"},on:{mousedown:function(n){return e.moveStart(n,0,!0)},touchstart:function(n){return e.moveStart(n,0,!0)}}},[e.isRange?[i("div",{key:"dot0",ref:"dot0",class:[e.tooltipStatus,"l-ad-slider__dot","c-ad-slider__dot",{"l-ad-slider__dot--focus":e.focusFlag&&e.focusSlider===0,"l-ad-slider__dot--dragging":e.flag&&e.currentSlider===0,"l-ad-slider__dot--disabled":!e.boolDisabled&&e.disabledArray[0]}],style:e.dotStyles,on:{mousedown:e.moveStart,touchstart:e.moveStart}},[i("div",{class:["l-ad-slider__dot-handle","c-ad-slider__dot-handle",e.dotClass],style:[!e.boolDisabled&&e.disabledArray[0]?e.disabledDotStyles[0]:null,e.sliderStyles[0],e.focusFlag&&e.focusSlider===0?e.focusStyles[0]:null]}),i("div",{ref:"tooltip0",class:["ad-slider-tooltip-"+e.tooltipDirection[0],"ad-slider-tooltip-wrap"]},[i("span",{staticClass:"ad-slider-tooltip",style:e.tooltipStyles[0]},[e._v(e._s(e.xformatter?e.formatting(e.val[0]):e.val[0]))])])]),i("div",{key:"dot1",ref:"dot1",class:[e.tooltipStatus,"l-ad-slider__dot","c-ad-slider__dot",{"l-ad-slider__dot--focus":e.focusFlag&&e.focusSlider===1,"l-ad-slider__dot--dragging":e.flag&&e.currentSlider===1,"l-ad-slider__dot--disabled":!e.boolDisabled&&e.disabledArray[1]}],style:e.dotStyles,on:{mousedown:function(n){return e.moveStart(n,1)},touchstart:function(n){return e.moveStart(n,1)}}},[i("div",{class:["l-ad-slider__dot-handle","c-ad-slider__dot-handle",e.dotClass],style:[!e.boolDisabled&&e.disabledArray[1]?e.disabledDotStyles[1]:null,e.sliderStyles[1],e.focusFlag&&e.focusSlider===1?e.focusStyles[1]:null]}),i("div",{ref:"tooltip1",class:["ad-slider-tooltip-"+e.tooltipDirection[1],"ad-slider-tooltip-wrap"]},[i("span",{staticClass:"ad-slider-tooltip",style:e.tooltipStyles[1]},[e._v(e._s(e.xformatter?e.formatting(e.val[1]):e.val[1]))])])])]:[i("div",{key:"dot0",ref:"dot0",class:[e.tooltipStatus,"l-ad-slider__dot","c-ad-slider__dot",{"l-ad-slider__dot--focus":e.focusFlag&&e.focusSlider===0,"l-ad-slider__dot--dragging":e.flag&&e.currentSlider===0}],style:e.dotStyles,on:{mousedown:e.moveStart,touchstart:e.moveStart}},[i("div",{class:["l-ad-slider__dot-handle","c-ad-slider__dot-handle",e.dotClass],style:[e.sliderStyles,e.focusFlag&&e.focusSlider===0?e.focusStyles:null]},[e._v(" "+e._s(e.dotContents(0))+" ")]),i("div",{class:["ad-slider-tooltip-"+e.tooltipDirection,"ad-slider-tooltip-wrap"]},[i("span",{staticClass:"ad-slider-tooltip",style:e.tooltipStyles},[e._v(e._s(e.xformatter?e.formatting(e.val):e.val))])])])],i("ul",{staticClass:"ad-slider-piecewise"},e._l(e.piecewiseDotWrap,function(n,r){return i("li",{key:r,staticClass:"ad-slider-piecewise-item",style:[e.piecewiseDotStyle,n.style]},[e.piecewise?i("span",{staticClass:"ad-slider-piecewise-dot",style:[e.piecewiseStyle,e.isActive(n.index)?e.piecewiseActiveStyle:null]}):e._e(),e.piecewiseLabel?i("span",{staticClass:"ad-slider-piecewise-label",style:[e.labelStyle,e.isActive(n.index)?e.labelActiveStyle:null]},[e._v(" "+e._s(n.label)+" ")]):e._e()])}),0),i("div",{ref:"process",class:["l-ad-slider__process","c-ad-slider__process",{"ad-slider-process-draggable":e.isRange&&e.processDraggable},e.processClass],style:[e.elemStyles,e.bgStyle,e.draggableStyle],on:{click:e.processClick}},[i("div",{ref:"mergedTooltip",class:["vue-merged-tooltip","ad-slider-tooltip-"+e.tooltipDirection[0],"ad-slider-tooltip-wrap"],style:e.tooltipMergedPosition},[i("span",{staticClass:"ad-slider-tooltip",style:e.tooltipStyles},[e._v(" "+e._s(e.tooltipFormatHelper)+" ")])])])],2)]),e.plusMinusButtons?i("PlusMinusButton",{attrs:{type:"plus"},on:{click:function(n){return e.increment(1)}}}):e._e()],1)},cme=[],ume=K(ome,lme,cme,!1,null,null);const fu=ume.exports,dme={name:"AnimationOptionsModal",components:{ModalOptionsToggleButton:oy,ModalWrapperOptions:hu,SliderComponent:fu},data(){return{infinityUnlocked:!1,eternityUnlocked:!1,dilationUnlocked:!1,tachyonsUnlocked:!1,realityUnlocked:!1,animatedThemeUnlocked:!1,bigCrunch:!1,eternity:!1,dilation:!1,tachyonParticles:!1,reality:!1,background:!1,blobSnowflakes:16,isS11Active:!1,isBlackHoleUnlocked:!1,blobHole:!1,isS11Unlocked:!1}},computed:{sliderProps(){return{min:1,max:500,interval:1,width:"100%",tooltip:!1}},fullCompletion(){return player.records.fullGameCompletions>0}},watch:{bigCrunch(t){player.options.animations.bigCrunch=t},eternity(t){player.options.animations.eternity=t},dilation(t){player.options.animations.dilation=t},tachyonParticles(t){player.options.animations.tachyonParticles=t},reality(t){player.options.animations.reality=t},background(t){player.options.animations.background=t},blobSnowflakes(t){player.options.animations.blobSnowflakes=parseInt(t,10)},blobHole(t){player.options.animations.blobHole=t}},methods:{update(){const t=PlayerProgress.current;this.infinityUnlocked=this.fullCompletion||t.isInfinityUnlocked,this.eternityUnlocked=this.fullCompletion||t.isEternityUnlocked,this.realityUnlocked=this.fullCompletion||t.isRealityUnlocked,this.dilationUnlocked=this.realityUnlocked||Achievement(136).canBeApplied,this.tachyonsUnlocked=this.realityUnlocked||Currency.tachyonParticles.gt(0),this.animatedThemeUnlocked=Theme.animatedThemeUnlocked,this.isS11Active=Theme.currentName()==="S11",this.isS11Unlocked=Themes.available().map(i=>i.name).includes("S11"),this.isBlackHoleUnlocked=BlackHoles.areUnlocked;const e=player.options.animations;this.bigCrunch=e.bigCrunch,this.eternity=e.eternity,this.dilation=e.dilation,this.tachyonParticles=e.tachyonParticles,this.reality=e.reality,this.background=e.background,this.blobSnowflakes=e.blobSnowflakes,this.blobHole=e.blobHole},adjustSliderValue(t){this.blobSnowflakes=t,player.options.blobSnowflakes=this.blobSnowflakes}}};var hme=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{staticClass:"c-modal-options__large",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Animation Options ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-options__button-container"},[e.infinityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Big Crunch:"},model:{value:e.bigCrunch,callback:function(n){e.bigCrunch=n},expression:"bigCrunch"}}):e._e(),e.eternityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Eternity:"},model:{value:e.eternity,callback:function(n){e.eternity=n},expression:"eternity"}}):e._e(),e.dilationUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Dilation:"},model:{value:e.dilation,callback:function(n){e.dilation=n},expression:"dilation"}}):e._e(),e.tachyonsUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Tachyon particles:"},model:{value:e.tachyonParticles,callback:function(n){e.tachyonParticles=n},expression:"tachyonParticles"}}):e._e(),e.realityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Reality:"},model:{value:e.reality,callback:function(n){e.reality=n},expression:"reality"}}):e._e(),e.isS11Unlocked&&e.isBlackHoleUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Always use Blobhole:"},model:{value:e.blobHole,callback:function(n){e.blobHole=n},expression:"blobHole"}}):e._e(),e.isS11Active?i("div",[e.animatedThemeUnlocked?i("ModalOptionsToggleButton",{attrs:{onclick:"Themes.find(Theme.currentName()).set();",text:"Blobsnow:"},model:{value:e.background,callback:function(n){e.background=n},expression:"background"}}):e._e()],1):i("div",[e.animatedThemeUnlocked?i("ModalOptionsToggleButton",{attrs:{onclick:"Themes.find(Theme.currentName()).set();",text:"Background:"},model:{value:e.background,callback:function(n){e.background=n},expression:"background"}}):e._e()],1),e.isS11Active?i("div",{staticClass:"c-blobflake-slider o-primary-btn o-primary-btn--modal-option o-primary-btn--slider"},[i("b",[e._v(e._s(e.quantifyInt("Blobflake",parseInt(e.blobSnowflakes))))]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.blobSnowflakes},on:{input:function(n){return e.adjustSliderValue(n)}}},"SliderComponent",e.sliderProps,!1))],1):e._e()],1)])},fme=[],pme=K(dme,hme,fme,!1,null,"b02b39ed");const mme=pme.exports,yme={name:"AwayProgressOptionsEntry",components:{ModalOptionsToggleButton:oy},props:{name:{type:String,required:!0}},data(){return{setting:!1,isVisible:!1}},computed:{type(){return AwayProgressTypes.all[this.name]},text(){return`${this.type.formatName}:`}},watch:{setting(t){this.type.option=t}},methods:{update(){const t=this.type;this.setting=t.option,this.isVisible=t.isUnlocked()}}};var gme=function(){var e=this,i=e._self._c;return e.isVisible?i("ModalOptionsToggleButton",{attrs:{text:e.text},model:{value:e.setting,callback:function(n){e.setting=n},expression:"setting"}}):e._e()},vme=[],bme=K(yme,gme,vme,!1,null,null);const _me=bme.exports,Eme={name:"AwayProgressOptionsModal",components:{AwayProgressOptionsEntry:_me,ModalWrapperOptions:hu},computed:{all(){return AwayProgressTypes.showOption}}};var Tme=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{staticClass:"l-wrapper",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Away Progress Options ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-options__button-container"},e._l(e.all,function(n){return i("AwayProgressOptionsEntry",{key:n,attrs:{name:n}})}),1),e._v(" Note: Selected resources will only show if they've increased. ")])},wme=[],Cme=K(Eme,Tme,wme,!1,null,"e790f04e");const Sme=Cme.exports,kme={name:"BackupEntry",components:{PrimaryButton:yt},props:{slotData:{type:Object,required:!0}},data(){return{currTime:0}},computed:{save(){return GameStorage.loadFromBackup(this.slotData.id)},progressStr(){if(!this.save)return"(Empty)";const t=[this.save.celestials.pelle.realityShards,this.save.reality.iMCap,this.save.reality.realityMachines,this.save.eternityPoints,this.save.infinityPoints,this.save.antimatter],e=["Reality Shards","Imaginary Machine Cap","Reality Machines","Eternity Points","Infinity Points","Antimatter"];for(let i=0;i<t.length;i++){const n=new Decimal(t[i]);if(n.gt(0))return`${e[i]}: ${formatPostBreak(n,2)}`}return"No resources"},slotType(){var e,i;const t=(i=(e=this.slotData).intervalStr)==null?void 0:i.call(e);switch(this.slotData.type){case Gr.ONLINE:return`Saves every ${t} online`;case Gr.OFFLINE:return`Saves after ${t} offline`;case Gr.RESERVE:return"Pre-loading save";default:throw new Error("Unrecognized backup save type")}},lastSaved(){var e;const t=((e=GameStorage.lastBackupTimes[this.slotData.id])==null?void 0:e.date)??0;return t?`Last saved: ${TimeSpan.fromMilliseconds(this.currTime-t)} ago`:"Slot not currently in use"}},methods:{update(){this.currTime=Date.now()},load(){if(!this.save)return;Modal.hide();const t=this.save;GameStorage.saveToReserveSlot(),GameStorage.ignoreBackupTimer=!0,GameStorage.offlineEnabled=player.options.loadBackupWithoutOffline?!1:void 0,GameStorage.oldBackupTimer=player.backupTimer,GameStorage.loadPlayerObject(t),GameUI.notify.info(`Game loaded from backup slot #${this.slotData.id}`),GameStorage.loadBackupTimes(),GameStorage.ignoreBackupTimer=!1,GameStorage.offlineEnabled=void 0,GameStorage.resetBackupTimer(),GameStorage.save(!0)}}};var Ame=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-bordered-entry"},[i("h3",[e._v("Slot #"+e._s(e.slotData.id)+":")]),i("span",[e._v(e._s(e.progressStr))]),i("span",[e._v(" "+e._s(e.slotType)+" ")]),i("span",{staticClass:"c-fixed-height"},[e._v(e._s(e.lastSaved))]),i("PrimaryButton",{staticClass:"o-primary-btn--width-medium",class:{"o-primary-btn--disabled":!e.save},on:{click:function(n){return e.load()}}},[e._v(" Load ")])],1)},Rme=[],Ime=K(kme,Ame,Rme,!1,null,"72d3802e");const Dme=Ime.exports,xme={name:"BackupWindowModal",components:{ModalWrapper:As,BackupEntry:Dme,PrimaryButton:yt},data(){return{nextSave:0,ignoreOffline:!1}},computed:{backupSlots:()=>Lh,deleteText:()=>"clearing your browser cookies"},watch:{ignoreOffline(t){player.options.loadBackupWithoutOffline=t}},methods:{update(){this.nextSave=Object.values(GameStorage.lastBackupTimes).map(t=>t&&t.backupTimer).sum(),this.ignoreOffline=player.options.loadBackupWithoutOffline},offlineOptionClass(){return{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":this.ignoreOffline}},toggleOffline(){this.ignoreOffline=!this.ignoreOffline},importAsFile(t){if(t.target.files.length===0)return;const e=new FileReader;e.onload=function(){GameStorage.importBackupsFromFile(e.result)},e.readAsText(t.target.files[0])}}};var Mme=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Automatic Backup Saves ")]},proxy:!0}])},[i("div",{staticClass:"c-info c-modal--short"},[e._v(" The game makes automatic backups based on time you have spent online or offline. Timers for online backups only run when the game is open, and offline backups only save to the slot with the longest applicable timer. Additionally, your current save is saved into the last slot any time a backup from here is loaded. "),i("div",{staticClass:"c-modal__confirmation-toggle",on:{click:e.toggleOffline}},[i("div",{class:e.offlineOptionClass()},[e.ignoreOffline?i("span",{staticClass:"fas fa-check"}):e._e()]),i("span",{staticClass:"c-modal__confirmation-toggle__text"},[e._v(" Load with offline progress disabled ")])]),i("div",{staticClass:"c-entry-container"},e._l(e.backupSlots,function(n){return i("BackupEntry",{key:e.nextSave+n.id,staticClass:"l-backup-entry",attrs:{"slot-data":n}})}),1),e._v(" These backups are still stored in the same place as your game save and can still be lost if you do anything external to the game which would delete your save itself, such as "+e._s(e.deleteText)+". You can import/export all backups at once as files, using these buttons: "),i("div",{staticClass:"c-backup-file-ops"},[i("PrimaryButton",{staticClass:"o-btn-file-ops",attrs:{onclick:"GameStorage.exportBackupsAsFile()"}},[e._v(" Export as file ")]),i("PrimaryButton",{staticClass:"o-btn-file-ops"},[i("input",{staticClass:"c-file-import",attrs:{type:"file",accept:".txt"},on:{change:e.importAsFile}}),i("label",{attrs:{for:"file"}},[e._v("Import from file")])])],1),e._v(" Each of your three save slots has its own separate set of backups. ")])])},Pme=[],Ome=K(xme,Mme,Pme,!1,null,"440dd19e");const Nme=Ome.exports,Gme={name:"ConfirmationOptionsEntry",components:{ModalOptionsToggleButton:oy},props:{index:{type:Number,required:!0}},data(){return{isUnlocked:!1,option:!1}},computed:{entry(){return ConfirmationTypes.index[this.index]},name(){return`${this.entry.name}:`},styleObject(){return{"background-color":this.option?"var(--color-good)":"var(--color-gh-purple)"}}},watch:{option(t){this.entry.option=t}},created(){this.option=this.entry.option},methods:{update(){const t=this.entry;this.isUnlocked=t.isUnlocked()}}};var Ume=function(){var e=this,i=e._self._c;return e.isUnlocked?i("ModalOptionsToggleButton",{style:e.styleObject,attrs:{text:e.name},model:{value:e.option,callback:function(n){e.option=n},expression:"option"}}):e._e()},Lme=[],Bme=K(Gme,Ume,Lme,!1,null,null);const Fme=Bme.exports,$me={name:"ConfirmationOptionsModal",components:{ModalWrapperOptions:hu,ConfirmationOptionsEntry:Fme},computed:{count(){return ConfirmationTypes.index.length},noConfirmations(){return ConfirmationTypes.index.every(t=>!t.isUnlocked())}}};var Hme=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{staticClass:"c-modal-options__large",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Confirmation Options ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-options__button-container"},[e.noConfirmations?i("span",[e._v(" You do not have anything that requires confirmation, but if you did it would appear here. ")]):e._e(),e._l(e.count,function(n){return i("ConfirmationOptionsEntry",{key:n,attrs:{index:n-1}})})],2)])},Vme=[],qme=K($me,Hme,Vme,!1,null,null);const Yme=qme.exports,Wme={name:"CosmeticSetDropdown",computed:{lockedSets(){return GlyphAppearanceHandler.lockedSets.map(t=>GameDatabase.reality.glyphCosmeticSets[t])}},methods:{select(t){GlyphAppearanceHandler.setInModal=t,this.$parent.openRequest=!1}}};var jme=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-select-theme"},[i("div",{staticClass:"l-select-theme__inner"},e._l(e.lockedSets,function(n){return i("div",{key:n.id,staticClass:"o-primary-btn l-select-theme__item c-select-theme__item",on:{click:function(r){return e.select(n)}}},[e._v(" "+e._s(n.name)+" ")])}),0)])},zme=[],Xme=K(Wme,jme,zme,!1,null,null);const Kme=Xme.exports,Zme={name:"CosmeticSetChoiceModal",components:{ModalWrapperChoice:Vt,ExpandingControlBox:fc,CosmeticSetDropdown:Kme,GlyphComponent:du},data(){return{initialSet:"",currentSet:""}},computed:{lockedSets(){return GlyphAppearanceHandler.lockedSets},cosmeticTypes(){return CosmeticGlyphTypes.list.filter(t=>t.isCosmetic&&t.isUnlocked).map(t=>t.id)},setName(){var t;return((t=this.currentSet)==null?void 0:t.name)??"None Selected"},setContents(){const t=[];return this.symbols&&t.push(quantify("symbol",this.symbols.length,0,0,e=>e)),this.colors&&t.push(quantify("color scheme",this.colors.length,0,0,e=>e)),t.join(" and ")},symbols(){return this.currentSet.symbol},colors(){return this.currentSet.color},glyphIconProps(){return{size:"3rem","glow-blur":"0.3rem","glow-spread":"0.1rem","text-proportion":.66}}},created(){this.initialSet=GlyphAppearanceHandler.chosenFromModal,GlyphAppearanceHandler.setInModal=this.initialSet},methods:{update(){this.currentSet=GlyphAppearanceHandler.setInModal},chooseSet(){GlyphAppearanceHandler.chosenFromModal=this.currentSet},cancelSet(){GlyphAppearanceHandler.chosenFromModal=this.initialSet,this.emitClose()},fakeGlyph(t){return{type:"power",strength:1,color:t}}}};var Qme=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{"cancel-fn":e.cancelSet},on:{confirm:e.chooseSet},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Choose a Glyph Cosmetic Set ")]},proxy:!0}])},[i("div",{staticClass:"c-center"},[i("ExpandingControlBox",{staticClass:"o-primary-btn c-dropdown-btn",scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"c-dropdown-header"},[e._v(" ▼ Available Sets ▼ "),i("br"),e._v(" "+e._s(e.setName)+" ")])]},proxy:!0},{key:"dropdown",fn:function(){return[i("CosmeticSetDropdown")]},proxy:!0}])}),e.currentSet?i("div",[e._v(' The "'+e._s(e.currentSet.name)+'" Set contains the following '+e._s(e.setContents)+": "),i("br"),e._l(e.symbols,function(n){return i("span",{key:n,staticClass:"o-single-symbol"},[e._v(" "+e._s(n)+" ")])}),i("br"),e._l(e.colors,function(n){return i("span",{key:n,staticClass:"o-single-glyph"},[i("GlyphComponent",e._b({attrs:{glyph:e.fakeGlyph(n)}},"GlyphComponent",e.glyphIconProps,!1))],1)})],2):e._e()],1)])},Jme=[],eye=K(Zme,Qme,Jme,!1,null,"34186476");const tye=eye.exports,iye={name:"GlyphCustomizationSlidingWindow",props:{type:{type:String,required:!0},isSymbol:{type:Boolean,required:!0},options:{type:Array,required:!0},glyphId:{type:Number,required:!1,default:-1}},data(){return{isActive:!1,selected:"",leftmostIndex:0,realityColor:"",darkKeySwap:!1}},computed:{isSingleGlyph(){return this.glyphId!==-1},attrString(){return this.isSymbol?"symbol":"color"},typeObject(){return CosmeticGlyphTypes},defaultOption(){if(this.realityColor)return this.realityColor;const t=this.typeObject[this.type],e=`${this.isSingleGlyph?"current":"default"}${this.attrString.capitalize()}`;return this.isSymbol?t[e].symbol:t[e].border},canScroll(){return this.options.length>this.windowSize},windowSize(){return 17}},created(){this.updateSelected()},methods:{update(){if(this.isSingleGlyph){const t=Glyphs.findById(this.glyphId);this.isActive=!t.cosmetic}else this.isActive=player.reality.glyphs.cosmetics.active;this.type==="reality"&&!this.isSymbol&&(this.realityColor=GlyphAppearanceHandler.realityColor),this.darkKeySwap=player.options.glyphBG},select(t){if(!(!this.isSingleGlyph&&!this.isActive)){if(this.isSingleGlyph){const e=Glyphs.findById(this.glyphId);e[this.attrString]=t,this.active||(e.cosmetic=void 0)}else player.reality.glyphs.cosmetics[`${this.attrString}Map`][this.type]=t;this.updateSelected(),EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}},updateSelected(){if(this.isSingleGlyph){const t=Glyphs.findById(this.glyphId);this.selected=t[this.attrString]}else this.selected=this.isSymbol?this.typeObject[this.type].currentSymbol.symbol:this.typeObject[this.type].currentColor.str},containerClassObject(){return{"c-all-options":!0,"o-option--inactive":!this.isActive}},defaultOptionClassObject(){const t=this.isSingleGlyph?void 0:this.defaultOption;return{"o-symbol":this.isSymbol,"o-color":!this.isSymbol,"o-clickable":this.isActive,"o-option--inactive":this.isSymbol&&t!==this.selected}},optionClassObject(t){return{"o-symbol":this.isSymbol,"o-color":!this.isSymbol,"o-clickable":this.isActive,"o-option--inactive":this.isSymbol&&t!==this.selected}},boxStyle(t){if(this.isSymbol||!t)return{};const e=GlyphAppearanceHandler.getColorProps(t);return{background:e.bg,color:this.invertBW(e.bg),"box-shadow":`0 0 0.4rem 0.1rem ${e.border}`}},windowStyle(){return{transform:`translate(${2-2.5*this.leftmostIndex}rem)`,"transition-duration":"0.3s"}},leftClass(){return{"o-arrow o-arrow--left":!0,"o-arrow--disabled":this.leftmostIndex===0||!this.canScroll}},rightClass(){return{"o-arrow o-arrow--right":!0,"o-arrow--disabled":this.leftmostIndex===this.options.length-this.windowSize||!this.canScroll}},slideWindow(t){this.canScroll&&(this.leftmostIndex=Math.clamp(this.leftmostIndex+t,0,this.options.length-this.windowSize))},optionChar(t){return this.isSymbol?t:t===this.selected||!this.selected&&t===this.defaultOption?"✓":""},invertBW(t){return t==="black"?"white":"black"}}};var nye=function(){var e=this,i=e._self._c;return i("div",[e.options.length>0?i("div",{class:e.containerClassObject()},[i("div",{staticClass:"o-default-option"},[i("div",{key:"default"+e.darkKeySwap,class:e.defaultOptionClassObject(),style:e.boxStyle(e.defaultOption),on:{click:function(n){return e.select(void 0)}}},[e._v(" "+e._s(e.optionChar(e.defaultOption))+" ")])]),i("div",{staticClass:"c-extra-options"},[i("div",{class:e.leftClass(),on:{click:function(n){return e.slideWindow(-5)}}},[e._v(" ⇐ ")]),i("div",{class:e.rightClass(),on:{click:function(n){return e.slideWindow(5)}}},[e._v(" ⇒ ")]),i("div",{staticClass:"c-sliding-window",style:e.windowStyle()},e._l(e.options,function(n){return i("div",{key:n[0]+n[1]},[i("div",{staticClass:"c-single-set"},e._l(n,function(r){return i("div",{key:r,class:e.optionClassObject(r),style:e.boxStyle(r),on:{click:function(s){return e.select(r)}}},[e._v(" "+e._s(e.optionChar(r))+" ")])}),0)])}),0)])]):i("div",{staticClass:"c-no-options"},[e._v(" You have no custom options for changing Glyph "+e._s(e.attrString)+"s. ")])])},rye=[],sye=K(iye,nye,rye,!1,null,"1a61af7a");const aye=sye.exports,oye={name:"GlyphCustomizationSingleType",components:{GlyphCustomizationSlidingWindow:aye},props:{type:{type:String,required:!0},glyphId:{type:Number,required:!1,default:-1}},computed:{name(){return this.type.capitalize()},symbols(){return GlyphAppearanceHandler.availableSymbols},colors(){return GlyphAppearanceHandler.availableColors}}};var lye=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-glyph-customization-entry"},[e.glyphId===-1?i("span",{staticClass:"c-name"},[e._v(" Appearance Options for "+e._s(e.name)+" Glyphs ")]):e._e(),e.type==="companion"?i("div",[e._v(" Companion Glyphs cannot have their symbol modified. ")]):i("GlyphCustomizationSlidingWindow",{attrs:{type:e.type,"is-symbol":!0,options:e.symbols,"glyph-id":e.glyphId}}),i("GlyphCustomizationSlidingWindow",{attrs:{type:e.type,"is-symbol":!1,options:e.colors,"glyph-id":e.glyphId}})],1)},cye=[],uye=K(oye,lye,cye,!1,null,"c4a4cd4e");const I3=uye.exports,dye={name:"GlyphCustomization",components:{GlyphCustomizationSingleType:I3,PrimaryButton:yt,PrimaryToggleButton:cn,GlyphComponent:du},data(){return{enabled:!1,defaultKeySwap:!1,selectedIndex:0}},computed:{cosmeticTypes(){const t=CosmeticGlyphTypes.list.filter(i=>i.canCustomize).map(i=>i.id).slice(5);return["power","infinity","replication","time","dilation"].concat(t)},glyphIconProps(){return{size:"2.5rem","glow-blur":"0.3rem","glow-spread":"0.1rem","text-proportion":.7}},hasCustomSets(){return GlyphAppearanceHandler.unlockedSets.length>0},hasSpecialTypes(){return GlyphAppearanceHandler.availableTypes.length>0}},watch:{enabled(t){player.reality.glyphs.cosmetics.active=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}},methods:{update(){this.enabled=player.reality.glyphs.cosmetics.active,this.defaultKeySwap=!0},resetAll(){const t=player.reality.glyphs.cosmetics;t.symbolMap={},t.colorMap={},this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},resetSingle(){const t=player.reality.glyphs.cosmetics,e=this.cosmeticTypes[this.selectedIndex];t.symbolMap[e]=void 0,t.colorMap[e]=void 0,this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},fakeGlyph(t){let e="power";return t==="reality"&&(e="reality"),t==="cursed"&&(e="cursed"),{type:e,strength:1,cosmetic:t}},typeClass(t){return{"c-single-type":!0,"o-disabled-cosmetics":!this.enabled,"c-type-current":this.selectedIndex===t,"c-type-other":this.selectedIndex!==t}},resetIndividual(){for(const t of Glyphs.allGlyphs)t.fixedCosmetic||(t.cosmetic=void 0);this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}}};var hye=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-glyph-customization-group"},[i("b",[e._v("Custom Glyph Appearance")]),i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{on:"Enabled",off:"Disabled"},model:{value:e.enabled,callback:function(n){e.enabled=n},expression:"enabled"}}),i("br"),e.hasCustomSets?i("div",[e._v(" Reset Appearances to Default: "),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",class:{"o-primary-btn--disabled":!e.enabled},on:{click:e.resetAll}},[e._v(" All Types ")]),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",class:{"o-primary-btn--disabled":!e.enabled},on:{click:e.resetSingle}},[e._v(" This Type ")]),i("br"),i("i",[e._v("This will not reset any individually-modified Glyphs.")]),i("br"),i("br"),e._v(" Glyph Type: "),i("br"),i("div",{staticClass:"c-type-selection"},e._l(e.cosmeticTypes,function(n,r){return i("div",{key:n,class:e.typeClass(r),on:{click:function(s){e.selectedIndex=r}}},[i("GlyphComponent",e._b({directives:[{name:"tooltip",rawName:"v-tooltip",value:n.capitalize(),expression:"type.capitalize()"}],attrs:{glyph:e.fakeGlyph(n)}},"GlyphComponent",e.glyphIconProps,!1))],1)}),0),i("GlyphCustomizationSingleType",{key:e.selectedIndex+e.enabled+e.defaultKeySwap,attrs:{type:e.cosmeticTypes[e.selectedIndex]}}),e._v(" Note: Some options may cause very poor color contrast or readability on certain themes with certain Glyph types. ")],1):i("div",[e._v(" You currently have no available options for changing the default appearance of your Glyphs. To unlock some, visit the Shop Tab or beat the game. "),i("br"),i("br"),e.hasSpecialTypes?i("span",[e._v(" Enabling this setting will allow you to change individual Glyphs to special cosmetic types you have unlocked. ")]):i("span",[e._v(" Enabling or disabling this option will currently do nothing. ")])]),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.resetIndividual}},[e._v(" Reset all individual Glyph cosmetics ")])],1)},fye=[],pye=K(dye,hye,fye,!1,null,"41369ecd");const mye=pye.exports,yye={name:"GlyphDisplayOptionsModal",components:{ExpandingControlBox:fc,ModalOptionsToggleButton:oy,ModalWrapperOptions:hu,SelectGlyphInfoDropdown:bee,GlyphCustomization:mye},data(){return{newGlyphs:!1,showUnequippedGlyphIcon:!1,glyphEffectDots:!1,glyphBG:0,glyphInfoType:0,showGlyphInfoByDefault:!1,glyphBorders:!1,highContrastRarity:!1,swapGlyphColors:!1}},computed:{infoLabel(){return Sm.labels[this.glyphInfoType]},glyphBGStr(){switch(this.glyphBG){case GLYPH_BG_SETTING.AUTO:return"Auto";case GLYPH_BG_SETTING.LIGHT:return"Light";case GLYPH_BG_SETTING.DARK:return"Dark";default:throw new Error("Unrecognized Glyph BG setting")}}},watch:{newGlyphs(t){player.options.showNewGlyphIcon=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},showUnequippedGlyphIcon(t){player.options.showUnequippedGlyphIcon=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},glyphEffectDots(t){player.options.showHintText.glyphEffectDots=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},showGlyphInfoByDefault(t){player.options.showHintText.showGlyphInfoByDefault=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},glyphBorders(t){player.options.glyphBorders=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},highContrastRarity(t){player.options.highContrastRarity=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)},swapGlyphColors(t){player.options.swapGlyphColors=t,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}},methods:{update(){const t=player.options;this.newGlyphs=t.showNewGlyphIcon,this.showUnequippedGlyphIcon=t.showUnequippedGlyphIcon,this.glyphEffectDots=t.showHintText.glyphEffectDots,this.glyphBG=player.options.glyphBG,this.glyphInfoType=t.showHintText.glyphInfoType,this.showGlyphInfoByDefault=t.showHintText.showGlyphInfoByDefault,this.glyphBorders=t.glyphBorders,this.highContrastRarity=t.highContrastRarity,this.swapGlyphColors=t.swapGlyphColors},noEffectStyle(){return this.glyphInfoType!==0?null:{"background-color":"var(--color-disabled)"}},cycleBG(){player.options.glyphBG=(player.options.glyphBG+1)%Object.keys(GLYPH_BG_SETTING).length,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE)}}};var gye=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{staticClass:"c-modal-options__glyph",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Glyph Display Options ")]},proxy:!0}])},[i("div",{staticClass:"c-glyph-visual-options c-modal--short"},[i("div",{staticClass:"c-modal-options__button-container"},[i("ModalOptionsToggleButton",{attrs:{text:"New Glyph identifier:"},model:{value:e.newGlyphs,callback:function(n){e.newGlyphs=n},expression:"newGlyphs"}}),i("ModalOptionsToggleButton",{attrs:{text:"Unequipped Glyph identifier:"},model:{value:e.showUnequippedGlyphIcon,callback:function(n){e.showUnequippedGlyphIcon=n},expression:"showUnequippedGlyphIcon"}}),i("ModalOptionsToggleButton",{attrs:{text:"Always show Glyph effect dots:"},model:{value:e.glyphEffectDots,callback:function(n){e.glyphEffectDots=n},expression:"glyphEffectDots"}}),i("ModalOptionsToggleButton",{attrs:{text:"Fancy Glyph borders:"},model:{value:e.glyphBorders,callback:function(n){e.glyphBorders=n},expression:"glyphBorders"}}),i("button",{staticClass:"o-primary-btn o-primary-btn--modal-option",on:{click:function(n){return e.cycleBG()}}},[e._v(" Glyph BG color: "+e._s(e.glyphBGStr)+" ")]),i("ModalOptionsToggleButton",{style:e.noEffectStyle(),attrs:{text:"Always show Glyph Info:"},model:{value:e.showGlyphInfoByDefault,callback:function(n){e.showGlyphInfoByDefault=n},expression:"showGlyphInfoByDefault"}}),i("ModalOptionsToggleButton",{attrs:{text:"High-contrast rarity colors:"},model:{value:e.highContrastRarity,callback:function(n){e.highContrastRarity=n},expression:"highContrastRarity"}}),i("ModalOptionsToggleButton",{attrs:{text:"Swap border and symbol colors:"},model:{value:e.swapGlyphColors,callback:function(n){e.swapGlyphColors=n},expression:"swapGlyphColors"}}),i("ExpandingControlBox",{staticClass:"o-primary-btn c-dropdown-btn",scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"c-dropdown-header"},[e._v(" ▼ Additional Glyph Info: ▼ "),i("br"),e._v(" "+e._s(e.infoLabel)+" ")])]},proxy:!0},{key:"dropdown",fn:function(){return[i("SelectGlyphInfoDropdown")]},proxy:!0}])})],1),i("GlyphCustomization")],1)])},vye=[],bye=K(yye,gye,vye,!1,null,"7b22458d");const _ye=bye.exports,Eye={name:"HiddenSubtabsButton",props:{subtab:{type:Object,required:!0},tab:{type:Object,required:!0},changeEnabled:{type:Boolean,required:!0}},data(){return{hidable:!1,hidden:!1}},computed:{isCurrentSubtab(){return this.tab.id===Tabs.current.id&&this.subtab.id===Tabs.current._currentSubtab.id},classObject(){return{"c-hide-modal-tab-button":!0,"c-hide-modal-button--active":!this.hidden,"c-hide-modal-button--inactive":this.hidden,"c-hide-modal-button--always-visible":!this.hidable||this.isCurrentSubtab,[`c-hide-modal-tab-button--${this.tab.key}`]:!this.isCurrentSubtab}},isModernUI(){return this.$viewModel.newUI}},methods:{update(){this.hidable=this.subtab.hidable,this.hidden=this.subtab.isHidden&&this.hidable},toggleVisibility(){this.changeEnabled&&this.subtab.toggleVisibility()}}};var Tye=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.hidable?e.isCurrentSubtab?"You cannot hide the tab you are on":"":"Options tabs cannot be hidden",expression:"hidable ? isCurrentSubtab ? 'You cannot hide the tab you are on' : '' : 'Options tabs cannot be hidden'"}],class:e.classObject,on:{click:e.toggleVisibility}},[i("div",{staticClass:"l-hide-modal-button"},[e.isModernUI?i("div",{staticClass:"l-hide-modal-button__subtab-icon",domProps:{innerHTML:e._s(e.subtab.symbol)}}):e._e(),i("div",{staticClass:"l-hide-modal-button__subtab-name"},[e._v(" "+e._s(e.subtab.name)+" ")])])])},wye=[],Cye=K(Eye,Tye,wye,!1,null,"20575b99");const Sye=Cye.exports,kye={name:"HiddenTabGroup",components:{HiddenSubtabsButton:Sye},props:{tab:{type:Object,required:!0},changeEnabled:{type:Boolean,required:!0}},data(){return{isVisible:!1,isHidable:!1,isHidden:!1,unlockedSubtabs:[]}},computed:{tabName(){return this.tab.name},subtabs(){return this.tab.subtabs},isCurrentTab(){return this.tab.id===Tabs.current.id},alwaysVisible(){return!this.isHidable||this.isCurrentTab},rowClass(){return{"c-hide-modal-all-subtab-container":!0,"l-hide-modal-subtab-container":!0,"c-hidden-tabs-background__visible":!this.isHidden,"c-hidden-tabs-background__hidden":this.isHidden,"c-hidden-tabs-background__always-visible":this.alwaysVisible}},rowVisibleIndicatorClass(){return{"c-indicator-icon":!0,fas:!0,"fa-check":!this.isHidden,"fa-times":this.isHidden,"fa-exclamation":this.alwaysVisible}},rowVisibleIndicatorTooltip(){return this.isHidden?"Click to unhide tab":this.alwaysVisible?"This tab cannot be hidden":"Click to hide tab"}},methods:{update(){const t=this.tab;this.isVisible=t.isUnlocked,this.isHidable=t.hidable,this.isHidden=t.isHidden&&this.isHidable,this.unlockedSubtabs=this.subtabs.filter(e=>e.isUnlocked)},toggleVisibility(){if(this.changeEnabled)if(this.tab.isHidden&&this.unlockedSubtabs.every(t=>t.isHidden)){for(const t of this.unlockedSubtabs)t.toggleVisibility();this.tab.unhideTab()}else this.tab.toggleVisibility()}}};var Aye=function(){var e=this,i=e._self._c;return e.isVisible?i("div",{class:e.rowClass,on:{click:function(n){return n.target!==n.currentTarget?null:e.toggleVisibility.apply(null,arguments)}}},[e._l(e.unlockedSubtabs,function(n,r){return i("HiddenSubtabsButton",{key:r,attrs:{subtab:n,tab:e.tab,"change-enabled":e.changeEnabled}})}),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.rowVisibleIndicatorTooltip,expression:"rowVisibleIndicatorTooltip"}],class:e.rowVisibleIndicatorClass,on:{click:e.toggleVisibility}})],2):e._e()},Rye=[],Iye=K(kye,Aye,Rye,!1,null,"96b0e91b");const Dye=Iye.exports,xye={name:"HiddenTabsModal",components:{HiddenTabGroup:Dye,ModalWrapperOptions:hu,PrimaryButton:yt},data(){return{isEnslaved:!1,isAlmostEnd:!1}},computed:{tabs:()=>Tabs.currentUIFormat},methods:{update(){this.isEnslaved=Enslaved.isRunning,this.isAlmostEnd=Pelle.hasGalaxyGenerator},showAllTabs(){for(const t of this.tabs){t.unhideTab();for(const e of t.subtabs)e.unhideTab()}}}};var Mye=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{staticClass:"l-wrapper",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Modify Visible Tabs ")]},proxy:!0}])},[i("div",{staticClass:"c-modal--short"},[e._v(" Click a button to toggle showing a tab on/off. "),i("br"),e._v(" Some tabs cannot be hidden, and you cannot hide your current tab. "),i("br"),e._v(" Unhiding a tab in which all subtabs are hidden will also unhide all subtabs, and hiding all subtabs will also hide the tab. "),i("br"),e.isAlmostEnd?i("div",[e._v(" You cannot hide your tabs after unlocking the Galaxy Generator. ")]):e._e(),e.isEnslaved?i("div",[i("br"),i("i",[e._v("You must... see everywhere...")]),i("br"),e._v(" (You cannot hide your tabs within this Reality) ")]):e._e(),i("PrimaryButton",{on:{click:e.showAllTabs}},[e._v(" Show all tabs ")]),e._l(e.tabs,function(n,r){return i("HiddenTabGroup",{key:r,staticClass:"l-hide-modal-tab-container",attrs:{tab:n,"change-enabled":!e.isEnslaved&&!e.isAlmostEnd}})})],2)])},Pye=[],Oye=K(xye,Mye,Pye,!1,null,"c64a42ef");const Nye=Oye.exports,Gye={name:"HotkeysModal",components:{ModalWrapper:As},data(){return{updateIndicies:[],visible:[],timeStudyUnlocked:!1,glyphSacUnlocked:!1,isElectron:!1}},computed:{moreShiftKeyInfo(){const t=[];this.timeStudyUnlocked&&(t.push("while buying Time Studies to buy all up until that point"),t.push("to save Time Study Trees")),this.glyphSacUnlocked&&t.push("to purge Glyphs");const e=makeEnumeration(t);return e===""?"":`You can hold Shift ${e}.`},hotkeyCount(){return shortcuts.length},shortcutNames(){return shortcuts.map(t=>t.name)},shortcutKeys(){return shortcuts.map(t=>t.keys.map(e=>this.format(e)))}},created(){for(let t=0;t<this.hotkeyCount;t++){const e=shortcuts[t].visible;typeof e=="function"?this.updateIndicies.push(t):this.visible[t]=e}},methods:{update(){for(const e of this.updateIndicies)this.$set(this.visible,e,shortcuts[e].visible());const t=PlayerProgress.current;this.timeStudyUnlocked=t.isEternityUnlocked,this.glyphSacUnlocked=RealityUpgrade(19).isBought;try{this.isElectron=ElectronRuntime.isActive}catch{this.isElectron=!1}},format(t){switch(t){case"mod":return"CTRL/⌘";default:return t.toUpperCase()}}}};var Uye=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Hotkey List ")]},proxy:!0}])},[i("span",{staticClass:"c-modal-hotkeys l-modal-hotkeys"},[i("div",{staticClass:"l-modal-hotkeys__column"},[i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Buy 1 Dimension")]),i("kbd",[e._v("SHIFT")]),i("kbd",[e._v("1")]),e._v("-"),i("kbd",[e._v("SHIFT")]),i("kbd",[e._v("8")])]),i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Buy 10 Dimensions")]),i("kbd",[e._v("1")]),e._v("-"),i("kbd",[e._v("8")])]),e._l(e.hotkeyCount,function(n){return i("div",{key:n},[e.visible[n-1]?i("span",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v(e._s(e.shortcutNames[n-1]))]),e._l(e.shortcutKeys[n-1],function(r,s){return i("kbd",{key:s},[e._v(" "+e._s(r)+" ")])})],2):e._e()])})],2),i("div",{staticClass:"l-modal-hotkeys__column l-modal-hotkeys__column--right"},[i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Modifier Key")]),i("kbd",[e._v("SHIFT")])]),i("span",{staticClass:"c-modal-hotkeys__shift-description"},[e._v(" Shift is a modifier key that shows additional information on certain things and adjusts the function of certain buttons. "),i("br"),e._v(" "+e._s(e.moreShiftKeyInfo)+" ")]),i("br"),i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Autobuyer Controls")]),i("kbd",[e._v("ALT")])]),i("span",{staticClass:"c-modal-hotkeys__shift-description"},[e._v(" Alt is a modifier key that, when pressed in conjunction with any key that has a corresponding autobuyer, will toggle said autobuyer. "),i("br"),e._v(" When pressing both Alt and Shift, you can toggle buying singles or buying max for the Antimatter Dimension and Tickspeed Autobuyers instead. ")]),i("br"),i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Tab Movement")]),i("div",[i("kbd",[e._v("←")]),i("kbd",[e._v("↓")]),i("kbd",[e._v("↑")]),i("kbd",[e._v("→")])])]),i("span",{staticClass:"c-modal-hotkeys__shift-description"},[e._v(" Using the Arrow Keys will cycle you through the game's pages. The Up and Down arrows cycle you through tabs, and the Left and Right arrows cycle you through that tab's subtabs. ")]),i("br"),i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Numpad Support")])]),i("span",{staticClass:"c-modal-hotkeys__shift-description"},[e._v(" Due to technical reasons, pressing a numpad key will purchase 10 of a Dimension if possible, but pressing a numpad key with "),i("kbd",[e._v("SHIFT")]),e._v(" will not buy a single Dimension. It may instead, depending on your device, cause the page to scroll or change game tabs. "),i("kbd",[e._v("ALT")]),e._v(" will still work as expected. ")]),e.isElectron?[i("br"),i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Window Zoom")]),i("kbd",[e._v("-")]),i("kbd",[e._v("0")]),i("kbd",[e._v("+")])]),i("span",{staticClass:"c-modal-hotkeys__shift-description"},[e._v(" To adjust zoom level, hold "),i("kbd",[e._v("ctrl")]),e._v(" and press either "),i("kbd",[e._v("-")]),e._v(" or "),i("kbd",[e._v("+")]),e._v(" to decrease or increase zoom. "),i("kbd",[e._v("ctrl")]),i("kbd",[e._v("0")]),e._v(" will reset zoom to 100%. ")]),i("br"),i("div",{staticClass:"l-modal-hotkeys-row"},[i("span",{staticClass:"c-modal-hotkeys-row__name l-modal-hotkeys-row__name"},[e._v("Fullscreen")]),i("kbd",[e._v("F10")])]),i("span",{staticClass:"c-modal-hotkeys__shift-description"},[e._v(" To enter or exit fullscreen, press "),i("kbd",[e._v("F10")]),e._v(". ")])]:e._e()],2)])])},Lye=[],Bye=K(Gye,Uye,Lye,!1,null,"65010ad3");const Fye=Bye.exports,$ye={name:"InfoDisplayOptionsModal",components:{ModalOptionsToggleButton:oy,ModalWrapperOptions:hu},data(){return{infinityUnlocked:!1,eternityUnlocked:!1,realityUnlocked:!1,alchemyUnlocked:!1,showPercentage:!1,achievements:!1,achievementUnlockStates:!1,challenges:!1,studies:!1,glyphEffectDots:!1,realityUpgrades:!1,perks:!1,alchemy:!1}},computed:{fullCompletion(){return player.records.fullGameCompletions>0}},watch:{showPercentage(t){player.options.showHintText.showPercentage=t},achievements(t){player.options.showHintText.achievements=t},achievementUnlockStates(t){player.options.showHintText.achievementUnlockStates=t},challenges(t){player.options.showHintText.challenges=t},studies(t){player.options.showHintText.studies=t},glyphEffectDots(t){player.options.showHintText.glyphEffectDots=t},realityUpgrades(t){player.options.showHintText.realityUpgrades=t},perks(t){player.options.showHintText.perks=t},alchemy(t){player.options.showHintText.alchemy=t}},methods:{update(){const t=PlayerProgress.current;this.infinityUnlocked=this.fullCompletion||t.isInfinityUnlocked,this.eternityUnlocked=this.fullCompletion||t.isEternityUnlocked,this.realityUnlocked=this.fullCompletion||t.isRealityUnlocked,this.alchemyUnlocked=this.fullCompletion||Ra.unlocks.effarigUnlock.canBeApplied;const e=player.options.showHintText;this.showPercentage=e.showPercentage,this.achievements=e.achievements,this.achievementUnlockStates=e.achievementUnlockStates,this.challenges=e.challenges,this.studies=e.studies,this.glyphEffectDots=e.glyphEffectDots,this.realityUpgrades=e.realityUpgrades,this.perks=e.perks,this.alchemy=e.alchemy}}};var Hye=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{staticClass:"c-modal-options__large",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Info Display Options ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-options__button-container"},[i("ModalOptionsToggleButton",{attrs:{text:"Show % gain:"},model:{value:e.showPercentage,callback:function(n){e.showPercentage=n},expression:"showPercentage"}}),i("ModalOptionsToggleButton",{attrs:{text:"Achievement IDs:"},model:{value:e.achievements,callback:function(n){e.achievements=n},expression:"achievements"}}),i("ModalOptionsToggleButton",{attrs:{text:"Achievement unlock state indicators:"},model:{value:e.achievementUnlockStates,callback:function(n){e.achievementUnlockStates=n},expression:"achievementUnlockStates"}}),e.infinityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Challenge IDs:"},model:{value:e.challenges,callback:function(n){e.challenges=n},expression:"challenges"}}):e._e(),e.eternityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Time Study IDs:"},model:{value:e.studies,callback:function(n){e.studies=n},expression:"studies"}}):e._e(),e.realityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Glyph effect dots:"},model:{value:e.glyphEffectDots,callback:function(n){e.glyphEffectDots=n},expression:"glyphEffectDots"}}):e._e(),e.realityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Reality Upgrade names:"},model:{value:e.realityUpgrades,callback:function(n){e.realityUpgrades=n},expression:"realityUpgrades"}}):e._e(),e.realityUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Perk IDs:"},model:{value:e.perks,callback:function(n){e.perks=n},expression:"perks"}}):e._e(),e.alchemyUnlocked?i("ModalOptionsToggleButton",{attrs:{text:"Alchemy resource amounts:"},model:{value:e.alchemy,callback:function(n){e.alchemy=n},expression:"alchemy"}}):e._e()],1),e._v(" Note: All types of additional info above will always display when holding shift. ")])},Vye=[],qye=K($ye,Hye,Vye,!1,null,null);const Yye=qye.exports,Wye={name:"NewsOptionsModal",components:{ModalOptionsToggleButton:oy,ModalWrapperOptions:hu,PrimaryButton:yt,SliderComponent:fu},data(){return{enabled:!1,repeatBuffer:40,AIChance:0,speed:1,includeAnimated:!1,counter:0}},computed:{newsOnOffLabel(){return`News: ${this.enabled?"On":"Off"}`},sliderPropsRepeatBuffer(){return{min:0,max:80,interval:1,width:"98%",tooltip:!1}},sliderPropsAIChance(){return{min:0,max:1,interval:.01,width:"98%",tooltip:!1}},sliderPropsSpeed(){return{min:.5,max:2,interval:.01,width:"98%",tooltip:!1}}},watch:{type(t){this.bad()},repeatBuffer(t){this.bad()},AIChance(t){this.bad()},speed(t){this.bad()},includeAnimated(t){this.bad()}},methods:{update(){const t=player.options.news;this.enabled=t.enabled,this.repeatBuffer=t.repeatBuffer,this.AIChance=t.AIChance,this.speed=t.speed,this.includeAnimated=t.includeAnimated},bad(){this.counter++,this.counter>=2&&(SecretAchievement(33).unlock(),GameUI.notify.error("We're sorry but you cannot modify your advertising settings."))},adjustSliderValueRepeatBuffer(t){this.bad()},adjustSliderValueAIChance(t){this.bad()},adjustSliderValueSpeed(t){this.bad()}}};var jye=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" News Options ")]},proxy:!0}])},[i("PrimaryButton",{staticClass:"o-primary-btn o-primary-btn--option-wide",attrs:{onclick:"GameOptions.toggleNews()"}},[e._v(" "+e._s(e.newsOnOffLabel)+" ")]),i("div",{staticClass:"o-primary-btn o-primary-btn--option-wide o-primary-btn--slider"},[i("b",[e._v(e._s(e.formatInt(parseInt(e.repeatBuffer)))+" message repeat buffer")]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.repeatBuffer},on:{input:function(n){return e.adjustSliderValueRepeatBuffer(n)}}},"SliderComponent",e.sliderPropsRepeatBuffer,!1))],1),i("div",{staticClass:"o-primary-btn o-primary-btn--option-wide o-primary-btn--slider"},[i("b",[e._v(e._s(e.formatPercents(parseFloat(e.AIChance)))+" AI messages")]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.AIChance},on:{input:function(n){return e.adjustSliderValueAIChance(n)}}},"SliderComponent",e.sliderPropsAIChance,!1))],1),i("div",{staticClass:"o-primary-btn o-primary-btn--option-wide o-primary-btn--slider"},[i("b",[e._v(e._s(e.formatPercents(parseFloat(e.speed)))+" scroll speed")]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.speed},on:{input:function(n){return e.adjustSliderValueSpeed(n)}}},"SliderComponent",e.sliderPropsSpeed,!1))],1),i("ModalOptionsToggleButton",{staticClass:"o-primary-btn o-primary-btn--option-wide",attrs:{text:"Animation Effects:"},model:{value:e.includeAnimated,callback:function(n){e.includeAnimated=n},expression:"includeAnimated"}})],1)},zye=[],Xye=K(Wye,jye,zye,!1,null,null);const Kye=Xye.exports,Zye={name:"NotationModal",components:{ModalWrapper:As,SliderComponent:fu},data(){return{commaDigits:0,notationDigits:0}},computed:{sampleNums(){const t="123456789012345",e=[];for(let i=4;i<16;i++)e.push(Decimal.pow10(t.substring(0,i)));return e},sliderProps(){return{min:3,max:15,interval:1,width:"100%",tooltip:!1}}},watch:{commaDigits(t){player.options.notationDigits.comma=t,Ta.exponentCommas.min=10**t},notationDigits(t){player.options.notationDigits.notation=t,Ta.exponentCommas.max=10**t}},created(){const t=player.options.notationDigits;this.commaDigits=t.comma,this.notationDigits=t.notation},methods:{update(){const t=player.options.notationDigits;this.commaDigits=t.comma,this.notationDigits=t.notation},adjustSliderComma(t){this.commaDigits=t,player.options.notationDigits.comma=t,t>this.notationDigits&&this.adjustSliderNotation(t)},adjustSliderNotation(t){this.notationDigits=t,player.options.notationDigits.notation=t,t<this.commaDigits&&this.adjustSliderComma(t)}}};var Qye=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Exponent Notation Settings ")]},proxy:!0}])},[e._v(" You can adjust what your numbers look like when very large. With small values, the exponent will be directly displayed with no additional formatting. Larger values will have commas inserted into the exponent for clarity, and the largest values will apply notation formatting to the exponent in order to shorten it. You can adjust the two thresholds between these regions below: "),i("br"),i("br"),i("div",{staticClass:"c-single-slider"},[i("b",{staticClass:"o-digit-text"},[e._v("Minimum for commas in exponent: "+e._s(e.formatInt(e.commaDigits))+" digits")]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider o-slider",attrs:{value:e.commaDigits},on:{input:function(n){return e.adjustSliderComma(n)}}},"SliderComponent",e.sliderProps,!1))],1),i("div",{staticClass:"c-single-slider"},[i("b",{staticClass:"o-digit-text"},[e._v("Minimum for notation in exponent: "+e._s(e.formatInt(e.notationDigits))+" digits")]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider o-slider",attrs:{value:e.notationDigits},on:{input:function(n){return e.adjustSliderNotation(n)}}},"SliderComponent",e.sliderProps,!1))],1),i("br"),e._v(" Sample numbers for exponent formatting: "),i("div",{staticClass:"c-sample-numbers"},e._l(e.sampleNums,function(n,r){return i("span",{key:r,staticClass:"o-single-number"},[e._v(" "+e._s(e.formatPostBreak(n))+" ")])}),0),i("br"),e._v(" Note: The interface is generally optimized for Scientific notation with settings of "+e._s(e.formatInt(5))+" and "+e._s(e.formatInt(9))+" digits. Some text may look odd or overflow out of boxes if you differ significantly from these values. Additionally, these settings might not cause any visual changes when using certain notations. ")])},Jye=[],ege=K(Zye,Qye,Jye,!1,null,"435704f1");const tge=ege.exports,ige={name:"PreferredTreeModal",components:{ModalWrapperChoice:Vt},data(){return{dimensionPath:null,pacePath:null}},computed:{dimensionOptions(){return{Antimatter:TIME_STUDY_PATH.ANTIMATTER_DIM,Infinity:TIME_STUDY_PATH.INFINITY_DIM,Time:TIME_STUDY_PATH.TIME_DIM}},paceOptions(){return{Active:TIME_STUDY_PATH.ACTIVE,Passive:TIME_STUDY_PATH.PASSIVE,Idle:TIME_STUDY_PATH.IDLE}},usePriority(){return TimeStudy.preferredPaths.dimension.usePriority}},created(){this.dimensionPath=[...TimeStudy.preferredPaths.dimension.path],this.pacePath=TimeStudy.preferredPaths.pace.path},methods:{isPreferred(t){return this.paceOptions[t]===this.pacePath||this.dimensionPath.indexOf(this.dimensionOptions[t])+1},select(t){this.dimensionOptions[t]&&((!this.usePriority||this.dimensionPath.length>1)&&this.dimensionPath.shift(),this.dimensionPath.includes(this.dimensionOptions[t])||this.dimensionPath.push(this.dimensionOptions[t])),this.paceOptions[t]&&(this.pacePath=this.paceOptions[t])},confirmPrefs(){TimeStudy.preferredPaths.dimension.path=this.dimensionPath,TimeStudy.preferredPaths.pace.path=this.pacePath},classList(t){const e=this.isPreferred(t);return["o-time-study-selection-btn",`o-time-study-${{Antimatter:"antimatter-dim",Infinity:"infinity-dim",Time:"time-dim",Active:"active",Passive:"passive",Idle:"idle"}[t]}--${e?"bought":"available"}`,`o-time-study--${e?"bought":"available"}`]}}};var nge=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.confirmPrefs}},[i("h2",[e._v("Dimension Split Preference")]),i("div",{staticClass:"l-modal-split-preferences"},e._l(e.dimensionOptions,function(n,r){return i("button",{key:r,class:e.classList(r),on:{click:function(s){return e.select(r)}}},[e.isPreferred(r)?i("div",{staticClass:"l-dim-path-priority o-dim-path-priority"},[e._v(" "+e._s(e.isPreferred(r))+" ")]):e._e(),i("div",[e._v(" "+e._s(r)+" ")])])}),0),i("br"),i("h2",[e._v("Pace Split Preference")]),i("div",{staticClass:"l-modal-split-preferences"},e._l(e.paceOptions,function(n,r){return i("button",{key:r,class:e.classList(r),on:{click:function(s){return e.select(r)}}},[i("div",[e._v(" "+e._s(r)+" ")])])}),0)])},rge=[],sge=K(ige,nge,rge,!1,null,null);const age=sge.exports,oge={name:"SingleGlyphAppearanceModal",components:{ModalWrapperOptions:hu,GlyphCustomizationSingleType:I3,PrimaryButton:yt},props:{glyphId:{type:Number,required:!0}},data(){return{defaultKeySwap:!1}},computed:{glyphType(){return Glyphs.findById(this.glyphId).type},cosmeticTypes(){return GlyphAppearanceHandler.availableTypes},glyph(){return Glyphs.findById(this.glyphId)}},created(){EventHub.logic.on(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute("glyph"),this.defaultKeySwap||this.emitClose()})},methods:{update(){this.defaultKeySwap=!0},setType(t){t&&this.glyph.fixedCosmetic||(this.glyph.color=void 0,this.glyph.symbol=void 0,this.glyph.fixedCosmetic?this.glyph.cosmetic=this.glyph.fixedCosmetic:this.glyph.cosmetic=t,this.defaultKeySwap=!1,EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE))},cosmeticTypeClass(t){return{"o-primary-btn--subtab-option":!0,"o-active-type":t===this.glyph.cosmetic}}}};var lge=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{staticClass:"c-modal-options__large",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Modifying Single Glyph Appearance ")]},proxy:!0}])},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:function(n){return e.setType(void 0)}}},[e._v(" Reset this Glyph's appearance ")]),i("GlyphCustomizationSingleType",{key:e.defaultKeySwap,attrs:{type:e.glyphType,"glyph-id":e.glyphId}}),e.cosmeticTypes&&e.glyph.fixedCosmetic?i("div",[e._v(" This Glyph's Cosmetic Type cannot be changed! ")]):e.cosmeticTypes?i("div",{staticClass:"c-special-type"},[e._v(" Apply Special Cosmetic Type: "),e._l(e.cosmeticTypes,function(n){return i("PrimaryButton",{key:n,class:e.cosmeticTypeClass(n),on:{click:function(r){return e.setType(n)}}},[e._v(" "+e._s(n.capitalize())+" ")])})],2):e._e()],1)},cge=[],uge=K(oge,lge,cge,!1,null,"1bb2fab0");const dge=uge.exports,hge={name:"DeleteCompanionGlyphModal",components:{PrimaryButton:yt},data(){return{messageIndex:0}},computed:{message(){switch(this.messageIndex){case 0:return"Are you sure you want to get rid of your Companion Glyph?";case 1:return"You will not receive any cake.";case 2:return"This is permanent! You will not get another Companion Glyph!";case 3:return`You deleted your faithful Companion Glyph more quickly than any
                        other test subject on record. Congratulations.`;default:return"Invalid message index"}}},methods:{handleLeftButtonClick(){this.messageIndex<2?this.handleYesClick():this.handleNoClick()},handleRightButtonClick(){this.messageIndex>=2?this.handleYesClick():this.handleNoClick()},handleYesClick(){this.messageIndex++,this.messageIndex===3&&this.deleteCompanion()},handleNoClick(){this.messageIndex=0,this.emitClose()},deleteCompanion(){const t=player.reality.glyphs.inventory.filter(e=>e.type==="companion")[0];Glyphs.removeFromInventory(t)}}};var fge=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal-message l-modal-content--centered"},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")]),e.messageIndex<3?i("div",[i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn",on:{click:e.handleLeftButtonClick}},[e._v(" "+e._s(e.messageIndex<2?"Delete":"Cancel")+" ")]),i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn",on:{click:e.handleRightButtonClick}},[e._v(" "+e._s(e.messageIndex>=2?"Delete":"Cancel")+" ")])],1):i("div",[i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn",on:{click:e.handleNoClick}},[e._v(" Thank you ")])],1)])},pge=[],mge=K(hge,fge,pge,!1,null,null);const yge=mge.exports,gge={name:"DeleteGlyphModal",components:{ModalWrapperChoice:Vt},props:{idx:{type:Number,required:!0}},data(){return{confirmedDelete:!1}},computed:{glyph(){return Glyphs.findByInventoryIndex(this.idx)}},methods:{update(){const t=Glyphs.findByInventoryIndex(this.idx);this.glyph!==t&&!this.confirmedDelete&&(this.emitClose(),Modal.message.show("The selected Glyph changed position or was otherwise changed!"))},handleYesClick(){this.confirmedDelete=!0,Glyphs.removeFromInventory(this.glyph)}}};var vge=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to delete a Glyph ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Deleting a Glyph will remove the Glyph from your inventory! "),i("div",{staticClass:"c-modal-hard-reset-danger"},[e._v(" There is no benefit in deleting a Glyph before you have unlocked Glyph Sacrifice! ")])])])},bge=[],_ge=K(gge,vge,bge,!1,null,null);const Ege=_ge.exports,Tge={name:"PurgeAllRejectedGlyphsModal",components:{ModalWrapperChoice:Vt},data(){return{isRefining:!1}},computed:{refiningOrSacrificing(){return this.isRefining?"Refine":"Sacrifice"},topLabel(){return`You are about to ${this.refiningOrSacrificing} all rejected Glyphs`},message(){const t=AutoGlyphProcessor.hasNegativeEffectScore()?` Note that some of your Effect Filter scores are negative, which may cause you to lose some Glyphs
          you normally want to keep.`:"";return`Are you sure you want to ${this.refiningOrSacrificing} all rejected Glyphs? This will remove
        all Glyphs that would be rejected by your current Glyph Filter settings.${t}`},extraMessage(){return this.glyphsDeleted===0?"This will remove no Glyphs.":this.glyphsDeleted===this.glyphsTotal?"This will remove all your Glyphs.":`This process will remove ${this.glyphsDeleted}/${this.glyphsTotal} Glyphs.`},glyphsTotal(){return Glyphs.inventory.filter(t=>t!==null).length},glyphsDeleted(){return Glyphs.deleteAllRejected(!1)}},methods:{update(){this.isRefining=GlyphSacrificeHandler.isRefining},handleYesClick(){Glyphs.deleteAllRejected(!0)}}};var wge=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"sacrificeAll"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")]),i("br"),i("div",{staticClass:"c-modal-hard-reset-danger"},[e._v(" "+e._s(e.extraMessage)+" ")])])},Cge=[],Sge=K(Tge,wge,Cge,!1,null,null);const kge=Sge.exports,Age={name:"PurgeAllUnprotectedGlyphsModal",components:{ModalWrapperChoice:Vt},data(){return{isRefining:!1,isSacrificing:!1}},computed:{refiningSacrificingOrDeleting(){return this.isRefining?"Refine":this.isSacrificing?"Sacrifice":"delete"},topLabel(){return`You are about to ${this.refiningSacrificingOrDeleting} all unprotected Glyphs`},message(){return`Are you sure you want to ${this.refiningSacrificingOrDeleting} all unprotected Glyphs
        in your inventory?`},extraMessage(){return this.glyphsDeleted===0?`This will ${this.refiningSacrificingOrDeleting} no Glyphs.`:this.glyphsDeleted===this.glyphsTotal?`This will ${this.refiningSacrificingOrDeleting} all your Glyphs.`:`This will ${this.refiningSacrificingOrDeleting} 
        ${formatInt(this.glyphsDeleted)}/${formatInt(this.glyphsTotal)} of your Glyphs.`},glyphsTotal(){return Glyphs.inventory.filter(t=>t!==null).length},glyphsDeleted(){return Glyphs.autoClean(0,!1)}},methods:{update(){this.isRefining=GlyphSacrificeHandler.isRefining,this.isSacrificing=GlyphSacrificeHandler.canSacrifice},handleYesClick(){Glyphs.deleteAllUnprotected()}}};var Rge=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"sacrificeAll"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")]),i("br"),i("div",{staticClass:"c-modal-hard-reset-danger"},[e._v(" "+e._s(e.extraMessage)+" ")])])},Ige=[],Dge=K(Age,Rge,Ige,!1,null,null);const xge=Dge.exports,Mge={name:"PurgeGlyphModal",components:{ModalWrapperChoice:Vt},props:{harsh:{type:Boolean,required:!0}},computed:{threshold(){return this.harsh?1:5},extraMessage(){return this.glyphsDeleted===0?"This will Purge no Glyphs.":this.glyphsDeleted===this.glyphsTotal?"This will Purge all your Glyphs.":`${this.harsh?"Harsh Purging":"Purging"} will delete
        ${formatInt(this.glyphsDeleted)}/${formatInt(this.glyphsTotal)}
      of your Glyphs.`},explanation(){return this.harsh?`Harsh Purging deletes Glyphs that are strictly worse than any other Glyph in your
        inventory. For example, if a Glyph has all the same effects as another Glyph, but the values
        of ALL of the effects are worse, then it will be deleted.`:`Purging deletes Glyphs that are strictly worse than other Glyphs, while keeping enough to equip a full
        set with those effects. This behaves like Harsh Purge, except that regular Purge will not delete any given
        Glyph unless it finds five Glyphs which are better (instead of only one).`},topLabel(){return`You are about to ${this.harsh?"Harsh Purge":"Purge"} your Glyphs`},glyphsTotal(){return Glyphs.inventory.filter(t=>t!==null).length},glyphsDeleted(){return Glyphs.autoClean(this.threshold,!1)}},methods:{handleYesClick(){Glyphs.autoClean(this.threshold,!0)}}};var Pge=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"autoClean"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.topLabel)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" This could delete Glyphs in your inventory that are good enough that you might want to use them later. Purging will Purge Glyphs based on your Purge mode. Are you sure you want to do this? "),i("br"),i("br"),e._v(" "+e._s(e.explanation)+" ")]),i("br"),i("div",{staticClass:"c-modal-hard-reset-danger"},[e._v(" "+e._s(e.extraMessage)+" ")])])},Oge=[],Nge=K(Mge,Pge,Oge,!1,null,null);const Gge=Nge.exports,Uge={name:"RefineGlyphModal",components:{ModalWrapperChoice:Vt},props:{idx:{type:Number,required:!0}},data(){return{resourceAmount:0,resourceUnlocked:!1,gain:0,after:0,cap:0,confirmedRefine:!1}},computed:{glyph(){return Glyphs.findByInventoryIndex(this.idx)},resource(){return GlyphSacrificeHandler.glyphAlchemyResource(this.glyph)},resourceName(){return this.resource.name}},methods:{update(){const t=this.resource;this.resourceAmount=t.amount,this.resourceUnlocked=t.isUnlocked,this.gain=GlyphSacrificeHandler.glyphRefinementGain(this.glyph),this.cap=GlyphSacrificeHandler.glyphEffectiveCap(this.glyph),this.after=this.resourceAmount+this.gain;const e=Glyphs.findByInventoryIndex(this.idx);this.glyph!==e&&!this.confirmedRefine&&(this.emitClose(),Modal.message.show("The selected Glyph changed position or was otherwise changed!"))},handleYesClick(){this.confirmedRefine=!0,GlyphSacrificeHandler.refineGlyph(this.glyph)}}};var Lge=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"glyphRefine"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to refine a Glyph ")]},proxy:!0}])},[e.resourceUnlocked?i("div",{staticClass:"c-modal-message__text"},[e._v(" Refining a Glyph will remove the Glyph from your inventory, and in return, you will increase your "+e._s(e.resourceName)+" Alchemy resource from "+e._s(e.format(e.resourceAmount,2,2))+" to "+e._s(e.format(e.after,2,2))+". This Glyph can raise your "+e._s(e.resourceName)+" resource to at most "+e._s(e.format(e.cap,2,2))+". ")]):i("div",{staticClass:"c-modal-message__text"},[e._v(" You cannot gain any "+e._s(e.resourceName)+" alchemy resource because you have not unlocked this Glyph's resource yet. You can still refine it anyway, but nothing will happen. Consider sacrificing the Glyph instead. ")])])},Bge=[],Fge=K(Uge,Lge,Bge,!1,null,null);const $ge=Fge.exports,Hge={name:"SacrificeGlyphModal",components:{ModalWrapperChoice:Vt},props:{idx:{type:Number,required:!0}},data(){return{currentGlyphSacrifice:0,gain:0,confirmedSacrifice:!1}},computed:{glyph(){return Glyphs.findByInventoryIndex(this.idx)},message(){return`Do you really want to sacrifice this Glyph? Your total power of sacrificed ${this.glyph.type}
      Glyphs will increase from ${format(this.currentGlyphSacrifice,2,2)} to
      ${format(this.currentGlyphSacrifice+this.gain,2,2)}.`}},methods:{update(){this.currentGlyphSacrifice=player.reality.glyphs.sac[this.glyph.type],this.gain=GlyphSacrificeHandler.glyphSacrificeGain(this.glyph);const t=Glyphs.findByInventoryIndex(this.idx);this.glyph!==t&&!this.confirmedSacrifice&&(this.emitClose(),Modal.message.show("The selected Glyph changed position or was otherwise changed!"))},handleYesClick(){this.confirmedSacrifice=!0,GlyphSacrificeHandler.sacrificeGlyph(this.glyph,!0)}}};var Vge=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"glyphSacrifice"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to sacrifice a Glyph ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")])])},qge=[],Yge=K(Hge,Vge,qge,!1,null,null);const Wge=Yge.exports,jge={name:"AutobuyerIntervalLabel",props:{autobuyer:{type:Object,required:!1,default:null},intervalIn:{type:Number,required:!1,default:null},bulkIn:{type:Number,required:!1,default:null}},data(){return{interval:0,bulk:0,isShowingBulk:!1}},computed:{intervalText(){return this.interval<player.options.updateRate&&this.autobuyer.name!=="Infinity"?"Instant":`${format(TimeSpan.fromMilliseconds(this.interval).totalSeconds,2,2)} seconds`},bulkText(){return`Current bulk: ${Number.isFinite(this.bulk)?formatX(this.bulk,2):"Unlimited"}`}},methods:{update(){const t=this.autobuyer;this.interval=(this.intervalIn||(t==null?void 0:t.interval))??0,this.bulk=this.bulkIn??(t.hasUnlimitedBulk?1/0:t.bulk),this.isShowingBulk=this.bulk!==0&&Number.isFinite(this.bulk)}}};var zge=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-autobuyer-box__small-text"},[e._v(" Current interval: "+e._s(e.intervalText)+" "),e.isShowingBulk?i("span",[i("br"),e._v(" "+e._s(e.bulkText)+" ")]):e._e()])},Xge=[],Kge=K(jge,zge,Xge,!1,null,"0aa2fc23");const AT=Kge.exports,Zge={name:"AutobuyerBox",components:{AutobuyerIntervalLabel:AT},props:{autobuyer:{type:Object,required:!0},name:{type:String,required:!0},showInterval:{type:Boolean,required:!1,default:!1},isModal:{type:Boolean,required:!1,default:!1}},data(){return{isUnlocked:!1,isActive:!1,globalToggle:!1,canBeBought:!1,isUnlockable:!1,antimatterCost:new Decimal,isBought:!1,antimatter:new Decimal,currMode:0,nextValue:0,nextTime:0}},computed:{autobuyerBuyBoxClass(){return{"c-autobuyer-buy-box":!0,"o-primary-btn":!0,"o-primary-btn--enabled":this.isUnlockable,"o-primary-btn--disabled":!this.isUnlockable}},autobuyerBoxRowClass(){return{"c-autobuyer-box-row":!0,"c-autobuyer-box-row__modal":this.isModal}},autobuyerToggleClass(){return this.globalToggle?this.isActive?"fas fa-check":"fas fa-times":this.isActive?"fas fa-pause":"fas fa-times"},autobuyerStateClass(){return this.globalToggle?{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label-modal":this.isModal,"o-autobuyer-toggle-checkbox__label--active":this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":!this.globalToggle}:{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label-modal":this.isModal,"o-autobuyer-toggle-checkbox__label--active-paused":this.isActive,"o-autobuyer-toggle-checkbox__label--deactive-paused":!this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":!this.globalToggle}},showEternity(){return PlayerProgress.eternityUnlocked()?"this Eternity":""},isShowingStateInfo(){return this.isActive&&["Infinity","Eternity"].includes(this.autobuyer.name)&&this.currMode!==0},extraInfo(){switch(this.currMode){case AUTO_ETERNITY_MODE.TIME:return this.nextTime>0?`Will trigger in ${TimeSpan.fromSeconds(this.nextTime).toStringShort()}`:"Will trigger ASAP";case AUTO_ETERNITY_MODE.X_HIGHEST:default:return`Will trigger at ${format(this.nextValue,2)} ${this.autobuyer.name==="Infinity"?"IP":"EP"}`}}},watch:{isActive(t){this.autobuyer.isActive=t}},methods:{update(){const t=this.autobuyer;this.isUnlocked=t.isUnlocked,this.isActive=t.isActive,this.globalToggle=player.auto.autobuyersOn,this.canBeBought=t.canBeBought,this.isUnlockable=t.canUnlockSlowVersion,this.antimatterCost=t.antimatterCost,this.isBought=t.isBought,this.antimatter.copyFrom(player.records.thisEternity.maxAM),this.currMode=t.mode,this.isShowingStateInfo&&(this.nextValue=new Decimal(t.highestPrevPrestige).times(t.xHighest),this.nextTime=t.timeToNextTick)},toggle(){this.isActive=!this.isActive},purchase(){this.autobuyer.purchase(),TabNotification.newAutobuyer.clearTrigger(),GameCache.cheapestAntimatterAutobuyer.invalidate()}}};var Qge=function(){var e=this,i=e._self._c;return e.isUnlocked||e.isBought?i("div",{class:e.autobuyerBoxRowClass},[i("div",{staticClass:"l-autobuyer-box__header"},[e._v(" "+e._s(e.name)+" "),e.showInterval?i("AutobuyerIntervalLabel",{attrs:{autobuyer:e.autobuyer}}):e._e(),e.isShowingStateInfo?i("div",[e._v(" "+e._s(e.extraInfo)+" ")]):e._e()],1),i("div",{staticClass:"c-autobuyer-box-row__intervalSlot"},[e._t("intervalSlot")],2),i("div",{staticClass:"c-autobuyer-box-row__toggleSlot"},[e._t("toggleSlot")],2),i("div",{staticClass:"c-autobuyer-box-row__checkboxSlot"},[e._t("checkboxSlot")],2),i("div",{staticClass:"c-autobuyer-box-row__optionSlot"},[e._t("optionSlot")],2),i("div",{staticClass:"l-autobuyer-box__footer",on:{click:e.toggle}},[i("label",{class:e.autobuyerStateClass},[i("span",{class:e.autobuyerToggleClass})]),i("input",{attrs:{disabled:!e.globalToggle,name:e.name,type:"checkbox"},domProps:{checked:e.isActive&&e.globalToggle}})])]):e.canBeBought?i("div",{class:e.autobuyerBuyBoxClass,on:{click:e.purchase}},[e._v(" "+e._s(e.name)+" "),i("br"),e._v(" Requirement: "+e._s(e.format(e.antimatterCost))+" Total Antimatter "+e._s(e.showEternity)+" ")]):e._e()},Jge=[],eve=K(Zge,Qge,Jge,!1,null,"bc92c868");const Kf=eve.exports,tve={name:"AutobuyerDropdownEntry",props:{autobuyer:{type:Object,required:!0},modes:{type:Array,required:!0},modeNameFn:{type:Function,required:!0}},data(){return{mode:0}},methods:{update(){this.mode=this.autobuyer.mode},changeMode(t){this.autobuyer.mode=t,this.mode=t,this.$parent.openRequest=!1}}};var ive=function(){var e=this,i=e._self._c;return i("div",e._l(e.modes,function(n){return i("div",{key:n,staticClass:"o-primary-btn c-autobuyer-box__mode-select l-autobuyer-choice",attrs:{value:n},on:{click:function(r){return e.changeMode(n)}}},[e._v(" "+e._s(e.modeNameFn(n))+" ")])}),0)},nve=[],rve=K(tve,ive,nve,!1,null,"d403e6e5");const gR=rve.exports,sve={name:"AutobuyerIntervalButton",props:{autobuyer:{type:Object,required:!0}},data(){return{cost:0,isMaxed:!1,isUpgradeable:!1,isAffordable:!1}},computed:{classObject(){return{"o-autobuyer-btn":!0,"l-autobuyer-box__button":!0,"o-autobuyer-btn--unavailable":!this.isAffordable}}},methods:{update(){this.cost=this.autobuyer.cost,this.isMaxed=this.autobuyer.hasMaxedInterval,this.isUpgradeable=this.autobuyer.canBeUpgraded,this.isAffordable=Currency.infinityPoints.gte(this.cost)},upgradeInterval(){this.autobuyer.upgradeInterval()}}};var ave=function(){var e=this,i=e._self._c;return!e.isMaxed&&e.isUpgradeable?i("button",{class:e.classObject,on:{click:e.upgradeInterval}},[e._v(" "+e._s(e.formatPercents(.4))+" smaller interval "),i("br"),e._v(" Cost: "+e._s(e.format(e.cost,2))+" IP ")]):e.isMaxed?e._e():i("button",{staticClass:"o-autobuyer-btn l-autobuyer-box__button o-autobuyer-btn--unavailable"},[e._v(" Complete the challenge to upgrade interval ")])},ove=[],lve=K(sve,ave,ove,!1,null,"ecc839cf");const Db=lve.exports,cve={name:"BigCrunchAutobuyerBox",components:{AutobuyerBox:Kf,AutobuyerIntervalButton:Db,AutobuyerInput:Ym,ExpandingControlBox:fc,AutobuyerDropdownEntry:gR},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{isDoomed:!1,postBreak:!1,hasMaxedInterval:!1,mode:AUTO_CRUNCH_MODE.AMOUNT,hasAdditionalModes:!1,increaseWithMult:!0}},computed:{autobuyer:()=>Autobuyer.bigCrunch,modes:()=>[AUTO_CRUNCH_MODE.AMOUNT,AUTO_CRUNCH_MODE.TIME,AUTO_CRUNCH_MODE.X_HIGHEST],amountMode:()=>AUTO_ETERNITY_MODE.AMOUNT},watch:{increaseWithMult(t){this.autobuyer.increaseWithMult=t}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.postBreak=player.break,this.hasMaxedInterval=this.autobuyer.hasMaxedInterval,this.mode=this.autobuyer.mode,this.hasAdditionalModes=this.autobuyer.hasAdditionalModes,this.increaseWithMult=this.autobuyer.increaseWithMult},modeProps(t){switch(t){case AUTO_CRUNCH_MODE.AMOUNT:return{title:"Big Crunch at X IP",input:{property:"amount",type:"decimal"}};case AUTO_CRUNCH_MODE.TIME:return{title:"Seconds between Crunches",input:{property:"time",type:"float"}};case AUTO_CRUNCH_MODE.X_HIGHEST:return{title:"X times highest IP",input:{property:"xHighest",type:"decimal"}}}throw new Error("Unknown Auto Crunch mode")},modeName(t){return this.modeProps(t).title}}};var uve=function(){var e=this,i=e._self._c;return i("AutobuyerBox",{attrs:{autobuyer:e.autobuyer,"show-interval":!e.postBreak,"is-modal":e.isModal,name:"Automatic Big Crunch"},scopedSlots:e._u([e.hasMaxedInterval?e.postBreak?{key:"intervalSlot",fn:function(){return[e.hasAdditionalModes?i("ExpandingControlBox",{attrs:{"auto-close":!0},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"o-primary-btn c-autobuyer-box__mode-select c-autobuyer-box__mode-select-header"},[e._v(" ▼ Current Setting: ▼ "),i("br"),e._v(" "+e._s(e.modeName(e.mode))+" ")])]},proxy:!0},{key:"dropdown",fn:function(){return[i("AutobuyerDropdownEntry",{attrs:{autobuyer:e.autobuyer,modes:e.modes,"mode-name-fn":e.modeName}})]},proxy:!0}],null,!1,2761615181)}):i("span",[e._v(" "+e._s(e.modeProps(e.mode).title)+": ")])]},proxy:!0}:null:{key:"intervalSlot",fn:function(){return[i("AutobuyerIntervalButton",{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},e.postBreak?{key:"toggleSlot",fn:function(){return[i("AutobuyerInput",e._b({key:e.mode,attrs:{autobuyer:e.autobuyer}},"AutobuyerInput",e.modeProps(e.mode).input,!1))]},proxy:!0}:null,e.postBreak&&e.mode===e.amountMode?{key:"checkboxSlot",fn:function(){return[i("label",{staticClass:"o-autobuyer-toggle-checkbox o-clickable"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.increaseWithMult,expression:"increaseWithMult"}],staticClass:"o-clickable",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.increaseWithMult)?e._i(e.increaseWithMult,null)>-1:e.increaseWithMult},on:{change:function(n){var r=e.increaseWithMult,s=n.target,a=!!s.checked;if(Array.isArray(r)){var o=null,c=e._i(r,o);s.checked?c<0&&(e.increaseWithMult=r.concat([o])):c>-1&&(e.increaseWithMult=r.slice(0,c).concat(r.slice(c+1)))}else e.increaseWithMult=a}}}),e._v(" Dynamic amount ")])]},proxy:!0}:null],null,!0)})},dve=[],hve=K(cve,uve,dve,!1,null,"1d502c00");const D3=hve.exports,fve={name:"DimensionBoostAutobuyerBox",components:{AutobuyerBox:Kf,AutobuyerIntervalButton:Db,AutobuyerInput:Ym},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{hasMaxedInterval:!1,limitDimBoosts:!1,limitUntilGalaxies:!1,isBuyMaxUnlocked:!1}},computed:{autobuyer:()=>Autobuyer.dimboost},watch:{limitDimBoosts(t){this.autobuyer.limitDimBoosts=t},limitUntilGalaxies(t){this.autobuyer.limitUntilGalaxies=t}},methods:{update(){const t=this.autobuyer;this.hasMaxedInterval=t.hasMaxedInterval,this.isBuyMaxUnlocked=t.isBuyMaxUnlocked,this.limitDimBoosts=t.limitDimBoosts,this.limitUntilGalaxies=t.limitUntilGalaxies}}};var pve=function(){var e=this,i=e._self._c;return i("AutobuyerBox",{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,"show-interval":!e.isBuyMaxUnlocked,name:"Automatic Dimension Boosts"},scopedSlots:e._u([e.hasMaxedInterval?e.isBuyMaxUnlocked?{key:"intervalSlot",fn:function(){return[i("div",{staticClass:"c-autobuyer-box__small-text"},[i("br"),e._v(" Activates every X seconds: ")]),i("AutobuyerInput",{attrs:{autobuyer:e.autobuyer,type:"float",property:"buyMaxInterval"}})]},proxy:!0}:null:{key:"intervalSlot",fn:function(){return[i("AutobuyerIntervalButton",{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},e.isBuyMaxUnlocked?null:{key:"checkboxSlot",fn:function(){return[i("label",{staticClass:"o-autobuyer-toggle-checkbox c-autobuyer-box__small-text l-top-margin o-clickable"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.limitDimBoosts,expression:"limitDimBoosts"}],staticClass:"o-clickable",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.limitDimBoosts)?e._i(e.limitDimBoosts,null)>-1:e.limitDimBoosts},on:{change:function(n){var r=e.limitDimBoosts,s=n.target,a=!!s.checked;if(Array.isArray(r)){var o=null,c=e._i(r,o);s.checked?c<0&&(e.limitDimBoosts=r.concat([o])):c>-1&&(e.limitDimBoosts=r.slice(0,c).concat(r.slice(c+1)))}else e.limitDimBoosts=a}}}),e._v(" Limit Dimension Boosts to: ")]),i("AutobuyerInput",{attrs:{autobuyer:e.autobuyer,type:"int",property:"maxDimBoosts"}})]},proxy:!0},{key:"toggleSlot",fn:function(){return[i("label",{staticClass:"o-autobuyer-toggle-checkbox c-autobuyer-box__small-text l-autobuyer-text-area o-clickable"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.limitUntilGalaxies,expression:"limitUntilGalaxies"}],staticClass:"o-clickable",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.limitUntilGalaxies)?e._i(e.limitUntilGalaxies,null)>-1:e.limitUntilGalaxies},on:{change:function(n){var r=e.limitUntilGalaxies,s=n.target,a=!!s.checked;if(Array.isArray(r)){var o=null,c=e._i(r,o);s.checked?c<0&&(e.limitUntilGalaxies=r.concat([o])):c>-1&&(e.limitUntilGalaxies=r.slice(0,c).concat(r.slice(c+1)))}else e.limitUntilGalaxies=a}}}),e.isBuyMaxUnlocked?i("span",[e._v(" Only Dimboost to unlock new"),i("br"),e._v(" Dimensions until X Galaxies: ")]):i("span",[e._v(" Galaxies required to always"),i("br"),e._v(" Dimboost, ignoring the limit: ")])]),i("AutobuyerInput",{attrs:{autobuyer:e.autobuyer,type:"int",property:"galaxies"}})]},proxy:!0}],null,!0)})},mve=[],yve=K(fve,pve,mve,!1,null,"8dfc06a3");const x3=yve.exports,gve={name:"EternityAutobuyerBox",components:{AutobuyerBox:Kf,AutobuyerInput:Ym,ExpandingControlBox:fc,AutobuyerDropdownEntry:gR},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{isDoomed:!1,mode:AUTO_ETERNITY_MODE.AMOUNT,hasAdditionalModes:!1,increaseWithMult:!0}},computed:{autobuyer:()=>Autobuyer.eternity,modes:()=>[AUTO_ETERNITY_MODE.AMOUNT,AUTO_ETERNITY_MODE.TIME,AUTO_ETERNITY_MODE.X_HIGHEST],amountMode:()=>AUTO_ETERNITY_MODE.AMOUNT},watch:{increaseWithMult(t){this.autobuyer.increaseWithMult=t}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.mode=this.autobuyer.mode,this.hasAdditionalModes=this.autobuyer.hasAdditionalModes,this.increaseWithMult=this.autobuyer.increaseWithMult},modeProps(t){switch(t){case AUTO_ETERNITY_MODE.AMOUNT:return{title:"Eternity at X EP",input:{property:"amount",type:"decimal"}};case AUTO_ETERNITY_MODE.TIME:return{title:"Seconds between Eternities",input:{property:"time",type:"float"}};case AUTO_ETERNITY_MODE.X_HIGHEST:return{title:"X times highest EP",input:{property:"xHighest",type:"decimal"}}}throw new Error("Unknown Auto Eternity mode")},modeName(t){return this.modeProps(t).title}}};var vve=function(){var e=this,i=e._self._c;return i("AutobuyerBox",{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,name:"Automatic Eternity"},scopedSlots:e._u([{key:"intervalSlot",fn:function(){return[e.hasAdditionalModes?i("ExpandingControlBox",{attrs:{"auto-close":!0},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"o-primary-btn c-autobuyer-box__mode-select c-autobuyer-box__mode-select-header"},[e._v(" ▼ Current Setting: ▼ "),i("br"),e._v(" "+e._s(e.modeName(e.mode))+" ")])]},proxy:!0},{key:"dropdown",fn:function(){return[i("AutobuyerDropdownEntry",{attrs:{autobuyer:e.autobuyer,modes:e.modes,"mode-name-fn":e.modeName}})]},proxy:!0}],null,!1,2761615181)}):i("span",[e._v(e._s(e.modeProps(e.mode).title)+":")])]},proxy:!0},{key:"toggleSlot",fn:function(){return[i("AutobuyerInput",e._b({key:e.mode,attrs:{autobuyer:e.autobuyer}},"AutobuyerInput",e.modeProps(e.mode).input,!1))]},proxy:!0},e.mode===e.amountMode?{key:"checkboxSlot",fn:function(){return[i("label",{staticClass:"o-autobuyer-toggle-checkbox o-clickable"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.increaseWithMult,expression:"increaseWithMult"}],staticClass:"o-clickable",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.increaseWithMult)?e._i(e.increaseWithMult,null)>-1:e.increaseWithMult},on:{change:function(n){var r=e.increaseWithMult,s=n.target,a=!!s.checked;if(Array.isArray(r)){var o=null,c=e._i(r,o);s.checked?c<0&&(e.increaseWithMult=r.concat([o])):c>-1&&(e.increaseWithMult=r.slice(0,c).concat(r.slice(c+1)))}else e.increaseWithMult=a}}}),e._v(" Dynamic amount ")])]},proxy:!0}:null],null,!0)})},bve=[],_ve=K(gve,vve,bve,!1,null,"a6d6d074");const M3=_ve.exports,Eve={name:"GalaxyAutobuyerBox",components:{AutobuyerBox:Kf,AutobuyerIntervalButton:Db,AutobuyerInput:Ym},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{hasMaxedInterval:!1,limitGalaxies:!1,isBuyMaxUnlocked:!1,buyMax:!1}},computed:{autobuyer:()=>Autobuyer.galaxy,limitGalaxiesSlot(){return this.hasMaxedInterval&&!this.isBuyMaxUnlocked?"intervalSlot":"toggleSlot"}},watch:{limitGalaxies(t){this.autobuyer.limitGalaxies=t}},methods:{update(){this.hasMaxedInterval=this.autobuyer.hasMaxedInterval,this.isBuyMaxUnlocked=this.autobuyer.isBuyMaxUnlocked,this.limitGalaxies=this.autobuyer.limitGalaxies}}};var Tve=function(){var e=this,i=e._self._c;return i("AutobuyerBox",{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,name:"Automatic Antimatter Galaxies","show-interval":!e.isBuyMaxUnlocked},scopedSlots:e._u([e.hasMaxedInterval?e.isBuyMaxUnlocked?{key:"intervalSlot",fn:function(){return[i("div",{staticClass:"c-autobuyer-box__small-text"},[e._v(" Activates every X seconds: ")]),i("AutobuyerInput",{attrs:{autobuyer:e.autobuyer,type:"float",property:"buyMaxInterval"}})]},proxy:!0}:null:{key:"intervalSlot",fn:function(){return[i("AutobuyerIntervalButton",{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},{key:e.limitGalaxiesSlot,fn:function(){return[i("label",{staticClass:"o-autobuyer-toggle-checkbox c-autobuyer-box__small-text o-clickable"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.limitGalaxies,expression:"limitGalaxies"}],staticClass:"o-clickable",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.limitGalaxies)?e._i(e.limitGalaxies,null)>-1:e.limitGalaxies},on:{change:function(n){var r=e.limitGalaxies,s=n.target,a=!!s.checked;if(Array.isArray(r)){var o=null,c=e._i(r,o);s.checked?c<0&&(e.limitGalaxies=r.concat([o])):c>-1&&(e.limitGalaxies=r.slice(0,c).concat(r.slice(c+1)))}else e.limitGalaxies=a}}}),e._v(" Limit Antimatter Galaxies to: ")]),i("AutobuyerInput",{attrs:{autobuyer:e.autobuyer,type:"int",property:"maxGalaxies"}})]},proxy:!0}],null,!0)})},wve=[],Cve=K(Eve,Tve,wve,!1,null,"44660f09");const P3=Cve.exports,Sve={name:"RealityAutobuyerBox",components:{AutobuyerBox:Kf,AutobuyerInput:Ym,ExpandingControlBox:fc,AutobuyerDropdownEntry:gR},props:{isModal:{type:Boolean,required:!1,default:!1}},data(){return{mode:AUTO_REALITY_MODE.RM,levelCap:0,isOverCap:!1,hasAlternateInputs:!1}},computed:{autobuyer:()=>Autobuyer.reality,hasRelicMode:()=>TeresaUnlocks.effarig.canBeApplied,modes(){const t=[AUTO_REALITY_MODE.RM,AUTO_REALITY_MODE.GLYPH,AUTO_REALITY_MODE.EITHER,AUTO_REALITY_MODE.BOTH,AUTO_REALITY_MODE.TIME];return this.hasRelicMode&&t.push(AUTO_REALITY_MODE.RELIC_SHARD),t}},methods:{update(){this.mode=this.autobuyer.mode,this.levelCap=Glyphs.levelCap,this.isOverCap=this.autobuyer.glyph>this.levelCap,this.hasAlternateInputs=Autobuyer.reality.mode>AUTO_REALITY_MODE.BOTH},modeName(t){switch(t){case AUTO_REALITY_MODE.RM:return"Reality Machines";case AUTO_REALITY_MODE.GLYPH:return"Glyph level";case AUTO_REALITY_MODE.EITHER:return"RM OR Level";case AUTO_REALITY_MODE.BOTH:return"RM AND Level";case AUTO_REALITY_MODE.TIME:return"Real-time seconds";case AUTO_REALITY_MODE.RELIC_SHARD:return"Relic Shards"}throw new Error("Unknown Auto Reality mode")}}};var kve=function(){var e=this,i=e._self._c;return i("AutobuyerBox",{attrs:{autobuyer:e.autobuyer,"is-modal":e.isModal,name:"Automatic Reality"},scopedSlots:e._u([{key:"intervalSlot",fn:function(){return[i("ExpandingControlBox",{attrs:{"auto-close":!0},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"o-primary-btn c-autobuyer-box__mode-select c-autobuyer-box__mode-select-header"},[e._v(" ▼ Current Setting: ▼ "),i("br"),e._v(" "+e._s(e.modeName(e.mode))+" ")])]},proxy:!0},{key:"dropdown",fn:function(){return[i("AutobuyerDropdownEntry",{attrs:{autobuyer:e.autobuyer,modes:e.modes,"mode-name-fn":e.modeName}})]},proxy:!0}])})]},proxy:!0},{key:"toggleSlot",fn:function(){return[e.hasAlternateInputs?i("div",[e._v(" Target Time (seconds): ")]):i("div",[e._v(" Target Reality Machines: ")]),i("AutobuyerInput",{attrs:{autobuyer:e.autobuyer,type:e.hasAlternateInputs?"float":"decimal",property:e.hasAlternateInputs?"time":"rm"}})]},proxy:!0},{key:"checkboxSlot",fn:function(){return[e.hasAlternateInputs&&e.hasRelicMode?i("div",[e._v(" Target Relic Shards: ")]):i("div",[e._v(" Target Glyph level: ")]),i("AutobuyerInput",{attrs:{autobuyer:e.autobuyer,type:e.hasAlternateInputs&&e.hasRelicMode?"decimal":"int",property:e.hasAlternateInputs&&e.hasRelicMode?"shard":"glyph"}}),e.isOverCap?i("div",[e._v(" Autobuyer will trigger at the Glyph level cap of "+e._s(e.formatInt(e.levelCap))+". ")]):e._e()]},proxy:!0}])})},Ave=[],Rve=K(Sve,kve,Ave,!1,null,"fe3f1ee5");const O3=Rve.exports,Ive={name:"AutobuyerEditModal",components:{BigCrunchAutobuyerBox:D3,DimensionBoostAutobuyerBox:x3,EternityAutobuyerBox:M3,GalaxyAutobuyerBox:P3,ModalWrapper:As,RealityAutobuyerBox:O3},computed:{header(){return"Edit Autobuyers"},message(){return Autobuyers.hasAutobuyersForEditModal?"Using this modal, you can edit various values inside your autobuyers.":"You currently have no autobuyers which could be shown here."}}};var Dve=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.header)+" ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text-fit"},[i("span",[e._v(" "+e._s(e.message)+" ")])]),i("RealityAutobuyerBox",{staticClass:"c-reality-pos",attrs:{"is-modal":""}}),i("EternityAutobuyerBox",{staticClass:"c-eternity-pos",attrs:{"is-modal":""}}),i("BigCrunchAutobuyerBox",{staticClass:"c-infinity-pos",attrs:{"is-modal":""}}),i("GalaxyAutobuyerBox",{attrs:{"is-modal":""}}),i("DimensionBoostAutobuyerBox",{attrs:{"is-modal":""}})],1)},xve=[],Mve=K(Ive,Dve,xve,!1,null,"b811f720");const Pve=Mve.exports,Ove={name:"AutomatorScriptTemplate",components:{ModalWrapper:As},props:{warnings:{type:Function,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},inputs:{type:Array,required:!0}},data(){return{templateInputs:{},buttonTextStrings:[],invalidInputCount:0,templateProps:null,currentPreset:"",isBlock:!1}},computed:{presets:()=>player.timestudy.presets,params:()=>GameDatabase.reality.automator.templates.paramTypes,validWarnings(){var t;return this.invalidInputCount===0?this.warnings().concat((t=this.templateScript)==null?void 0:t.warnings):this.warnings()},templateScript(){return this.invalidInputCount!==0?null:new ScriptTemplate(this.templateProps,this.name)}},created(){for(const t of this.inputs){const e=this.paramTypeObject(t.type).boolDisplay;e?(this.$set(this.templateInputs,t.name,!1),this.buttonTextStrings[t.name]=e[1]):(this.$set(this.templateInputs,t.name,""),this.invalidInputCount++)}},methods:{update(){this.isBlock=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK},paramTypeObject(t){return this.params.find(e=>e.name===t)},isValid(t){const e=this.paramTypeObject(t.type);return e.isValidString?e.isValidString(this.templateInputs[t.name]):!0},validityClass(t){return t.name==="treeStudies"&&this.currentPreset!==""?"c-automator-template-textbox--preset":this.isValid(t)?void 0:"c-automator-template-textbox--invalid"},loadPreset(t,e){this.templateInputs.treeStudies=t?`NAME ${t}`:`ID ${e}`,this.updateTemplateProps()},loadCurrent(){this.templateInputs.treeStudies=GameCache.currentStudyTree.value.exportString,this.updateTemplateProps()},updateTemplateProps(){this.templateProps={},this.invalidInputCount=0;for(const i of this.inputs){const n=this.paramTypeObject(i.type),r=s=>n.map?n.map(s):s;this.templateProps[i.name]=r(this.templateInputs[i.name]),this.isValid(i)||this.invalidInputCount++}const t=this.templateProps.treeStudies.match(/^NAME (.{1,4})$/u),e=this.templateProps.treeStudies.match(/^ID (\d)$/u);if(t){const i=t?t[1]:"";this.currentPreset=this.presets.find(n=>n.name===i).name}else if(e){const i=e?e[1]:"";this.currentPreset=this.presets.some((n,r)=>r===i-1)?i:""}this.templateProps.treePreset=this.currentPreset===""?null:this.currentPreset},updateButton(t){this.templateInputs[t.name]=!this.templateInputs[t.name];const e=this.paramTypeObject(t.type).boolDisplay;this.buttonTextStrings[t.name]=e[this.templateInputs[t.name]?0:1],this.updateTemplateProps()},copyAndClose(){if(this.isBlock){const t={name:`Template: ${this.name}`,blocks:cv(this.templateScript.script).blocks};AutomatorData.blockTemplates.push(t),GameUI.notify.info("Custom template block created")}else copyToClipboard(this.templateScript.script),GameUI.notify.info("Template copied to clipboard");this.emitClose()}}};var Nve=function(){var e=this,i=e._self._c;return i("ModalWrapper",{staticClass:"c-automator-template-container",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.name)+" Template ")]},proxy:!0}])},[i("div",{staticClass:"c-automator-template-description"},[e._v(" "+e._s(e.description)+" ")]),i("div",{staticClass:"c-automator-template-inputs"},[i("b",[e._v("Required Information:")]),i("br"),e._v(" Use a preset Study Tree: "),e._l(e.presets,function(n,r){return i("button",{key:n.name,staticClass:"o-primary-btn o-load-preset-button-margin",on:{click:function(s){return e.loadPreset(n.name,r+1)}}},[e._v(" "+e._s(n.name?n.name:r+1)+" ")])}),i("button",{staticClass:"o-primary-btn o-load-preset-button-margin",on:{click:e.loadCurrent}},[i("i",[e._v("Current Tree")])]),e._l(e.inputs,function(n){return i("div",{key:n.name,staticClass:"c-automator-template-entry"},[e._v(" "+e._s(n.prompt)+": "),e.paramTypeObject(n.type).boolDisplay?i("span",[i("button",{staticClass:"o-primary-btn",on:{click:function(r){return e.updateButton(n)}}},[e._v(" "+e._s(e.buttonTextStrings[n.name])+" ")])]):i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.templateInputs[n.name],expression:"templateInputs[input.name]"}],ref:"templateInputs[input.name]",refInFor:!0,staticClass:"c-automator-template-textbox",class:e.validityClass(n),attrs:{type:"text"},domProps:{value:e.templateInputs[n.name]},on:{input:[function(r){r.target.composing||e.$set(e.templateInputs,n.name,r.target.value)},e.updateTemplateProps]}})])])})],2),i("div",{staticClass:"c-automator-template-warnings"},[i("b",[e._v("Possible things to consider:")]),e.validWarnings.length!==0?i("div",e._l(e.validWarnings,function(n){return i("div",{key:n,staticClass:"c-automator-template-entry"},[e._v(" "+e._s(n)+" ")])}),0):i("div",[e._v(" (If something seems wrong with the template inputs, it will show up here) ")]),i("br"),i("br")]),e.invalidInputCount===0?i("button",{staticClass:"o-primary-btn",on:{click:e.copyAndClose}},[e._v(" "+e._s(e.isBlock?"Create custom template block":"Copy this template to your clipboard")+" and close this modal ")]):i("button",{staticClass:"o-primary-btn o-primary-btn--disabled"},[e._v(" Cannot generate template (You have "+e._s(e.quantifyInt("invalid input",e.invalidInputCount))+") ")])])},Gve=[],Uve=K(Ove,Nve,Gve,!1,null,"a6742a9d");const Lve=Uve.exports,Bve={name:"AwayProgressEntry",props:{name:{type:String,required:!0},playerBefore:{type:Object,required:!0},playerAfter:{type:Object,required:!0}},data(){return{removed:!1}},computed:{item(){return AwayProgressTypes.all[this.name]},before(){return this.item.navigateTo(this.playerBefore)},after(){return this.item.navigateTo(this.playerAfter)},formatBefore(){return this.formatPseudo(this.before)},formatAfter(){return this.formatPseudo(this.after)},classObject(){return{[this.item.classObject]:!this.removed,"c-modal-away-progress__disabled":this.removed}},formattedName(){return this.item.formatName},increased(){if(this.formatAfter===this.formatBefore)return!1;const t=this.before,e=this.after;return e instanceof Decimal?e.gt(t):e>t},show(){if(!this.item.appearsInAwayModal)return!1;const t=this.increased&&this.item.option&&this.item.isUnlocked();return t&&this.$emit("something-happened"),t},isBlackHole(){return this.item.name.includes("BlackHole")},formatBlackHoleActivations(){const t=this.after-this.before;return quantifyInt("time",t)},isVeryLarge(){return this.isBlackHole?!1:Decimal.gt(this.before,Decimal.pow10(1e9))}},methods:{formatPseudo(t){if(t===void 0)return"";if(this.isVeryLarge)return formatInt(Math.floor(t.log10()));if(Decimal.lt(t,1e9)){const e=new Decimal(t);return formatInt(e.floor())}return format(t,2,2)},hideEntry(){this.removed=!this.removed,this.item.option=!this.item.option}}};var Fve=function(){var e=this,i=e._self._c;return e.show?i("div",{class:e.classObject,on:{click:e.hideEntry}},[e.isBlackHole?i("span",[e._v(" Your "),i("b",[e._v(e._s(e.formattedName))]),e._v(" activated "+e._s(e.formatBlackHoleActivations)+" ")]):i("span",[i("b",[e._v(e._s(e.formattedName))]),e.isVeryLarge?i("i",[e._v(" exponent")]):e._e(),e._v(" increased from "+e._s(e.formatBefore)+" to "+e._s(e.formatAfter)+" ")])]):e._e()},$ve=[],Hve=K(Bve,Fve,$ve,!1,null,"855a8127");const Vve=Hve.exports,qve={name:"AwayProgressModal",components:{AwayProgressEntry:Vve,ModalWrapper:As},props:{playerBefore:{type:Object,required:!0},playerAfter:{type:Object,required:!0},seconds:{type:Number,required:!0}},data(){return{somethingHappened:!1}},computed:{nothingHappened(){return Theme.current().name==="S9"},offlineStats(){return AwayProgressTypes.appearsInAwayModal},headerText(){const t=TimeSpan.fromSeconds(this.seconds).toString();return this.nothingHappened||!this.somethingHappened?`While you were away for ${t}... Nothing happened.`:`While you were away for ${t}: `}},mounted(){this.$nextTick(()=>{(this.nothingHappened||!this.somethingHappened)&&SecretAchievement(36).unlock()})}};var Yve=function(){var e=this,i=e._self._c;return i("ModalWrapper",{staticClass:"c-modal-away-progress"},[i("div",{staticClass:"c-modal-away-progress__header"},[e._v(" "+e._s(e.headerText)+" ")]),e.nothingHappened?e._e():i("div",{staticClass:"c-modal-away-progress__resources c-modal--short"},e._l(e.offlineStats,function(n){return i("AwayProgressEntry",{key:n,attrs:{name:n,"player-before":e.playerBefore,"player-after":e.playerAfter},on:{"something-happened":function(r){e.somethingHappened=!0}}})}),1),!e.nothingHappened&&e.somethingHappened?i("span",[e._v("Note: Click an entry to hide it in the future.")]):e._e()])},Wve=[],jve=K(qve,Yve,Wve,!1,null,"55856d6a");const zve=jve.exports,Xve={name:"BreakInfinityModal",components:{ModalWrapperChoice:Vt},computed:{message(){const t=formatPostBreak(Number.MAX_VALUE,2);return`Breaking Infinity will allow you to gain antimatter past ${t}${PlayerProgress.eternityUnlocked()?".":`, and allow you to read numbers past ${t}.`}
        Dimensions and Tickspeed Upgrades will scale in cost faster after ${t} antimatter.
        You will gain additional Infinity Points on Big Crunch based on antimatter produced over ${t}.        ${EternityMilestone.keepAutobuyers.isReached?"":`
It will also unlock Break Infinity Upgrades and max        all Normal Challenge Autobuyers.`}`.split(`
`)}},methods:{handleYesClick(){breakInfinity()}}};var Kve=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{"show-cancel":!1},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are Breaking Infinity ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Break ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},e._l(e.message,function(n,r){return i("span",{key:r},[e._v(" "+e._s(n)+" "),i("br")])}),0)])},Zve=[],Qve=K(Xve,Kve,Zve,!1,null,null);const Jve=Qve.exports,ebe={name:"CatchupEntry",props:{info:{type:Object,required:!0}},data(){return{focusedResourceId:-1,tabToOpen:String}},computed:{config(){return this.info.config},hasDedicatedH2p(){return this.config.openH2pEntry!==void 0}},methods:{isFocusedResource(t){if(this.focusedResourceId=t.id,this.focusedResourceId===-1)return!0;const e=GameDatabase.catchupResources[this.focusedResourceId].name;return e!==t.name?!0:this.tabToOpen=e},showHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(t=>t.alias===(this.hasDedicatedH2p?this.config.openH2pEntry:this.tabToOpen))[0],Modal.h2p.show()}}};var tbe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal-catchup-entry"},[i("span",{staticClass:"c-resource-name",attrs:{info:e.info,"is-focused":e.isFocusedResource(e.info)},on:{click:e.showHowTo}},[i("span",{staticClass:"c-underline"},[e._v(e._s(e.info.name))]),e._v(": "),i("i",{staticClass:"fas fa-question-circle"})]),e._v(" "+e._s(e.info.description)+" ")])},ibe=[],nbe=K(ebe,tbe,ibe,!1,null,"be7050ce");const rbe=nbe.exports,sbe={name:"CatchupGroup",components:{CatchupEntry:rbe},props:{group:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{collapsed:!0}},computed:{shownResources(){return d3.all.filter(t=>t.requiredStage===this.group)},dropDownIconClass(){return this.collapsed?"far fa-plus-square":"far fa-minus-square"}}};var abe=function(){var e=this,i=e._self._c;return e.shownResources.length!==0?i("div",[i("span",{staticClass:"o-catchup-group-title",on:{click:function(n){e.collapsed=!e.collapsed}}},[i("i",{class:e.dropDownIconClass}),e._v(" "+e._s(e.name)+" ")]),e.collapsed?e._e():i("div",e._l(e.shownResources,function(n,r){return i("CatchupEntry",{key:r,staticClass:"l-left",attrs:{info:n}})}),1)]):e._e()},obe=[],lbe=K(sbe,abe,obe,!1,null,"37bea5ca");const cbe=lbe.exports,ube={name:"CatchupModal",components:{CatchupGroup:cbe,PrimaryButton:yt},props:{diff:{type:Number,required:!0}},computed:{progressStage:()=>Bv.getProgressStage(player).id,suggestedResource(){return Lv(this.progressStage).suggestedResource},timeString(){return this.diff?`It has been ${TimeSpan.fromMilliseconds(this.diff).toString()} since you last loaded up the game.`:null},titleText(){return this.diff?"Content Catch-up":"Content Summary"}},methods:{stageName(t){return Lv(t).name}}};var dbe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal-away-progress"},[i("div",{staticClass:"c-modal-away-progress__header"},[e._v(" "+e._s(e.titleText)+" ")]),i("div",[e._v(" "+e._s(e.timeString)+" If you need a refresher, here is a quick summary of all the content you have unlocked so far from the beginning of the game, separated into different stages of progression. These are only very brief descriptions; you can check the related How To Play entries by clicking the contents title or "),i("i",{staticClass:"fas fa-question-circle"}),e._v(" icons to view more detailed information. ")]),i("div",{staticClass:"l-catchup-group-container",style:{height:`${Math.clamp(3*e.progressStage+5,15,35)}rem`}},e._l(e.progressStage,function(n){return i("CatchupGroup",{key:n,attrs:{group:n,name:e.stageName(n)}})}),1),i("span",{staticClass:"c-suggestion-text"},[e._v(" Based on your current progression, it will probably be useful to try to increase your "+e._s(e.suggestedResource)+". ")]),i("div",{staticClass:"l-confirm-padding"},[i("PrimaryButton",{on:{click:e.emitClose}},[e._v(" Confirm ")])],1)])},hbe=[],fbe=K(ube,dbe,hbe,!1,null,"3dbcb8a8");const pbe=fbe.exports,mbe={name:"ChangelogModal",components:{ModalCloseButton:ay},data(){return{entryId:0}},computed:{shownEntry:{get(){return GameDatabase.changelog[this.entryId]},set(t){this.entryId=t.id}},entries(){return GameDatabase.changelog}},methods:{setShownEntry(t){this.shownEntry=t,this.$refs.changelogBody.scrollTop=0},formatDate(t){return t.map(e=>Math.log10(e)>=2?e:`0${e}`.slice(-2)).join("-")}}};var ybe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-changelog-modal"},[i("ModalCloseButton",{on:{click:e.emitClose}}),e._m(0),i("div",{staticClass:"l-changelog-container"},[i("div",{staticClass:"l-changelog-search-tab"},[i("div",{staticClass:"l-changelog-tab-list"},e._l(e.entries,function(n){return i("div",{key:n.id,staticClass:"o-changelog-tab-button",class:{"o-changelog-tab-button--selected":n===e.shownEntry},on:{click:function(r){return e.setShownEntry(n)}}},[e._v(" "+e._s(e.formatDate(n.date))+" ")])}),0)]),i("div",{staticClass:"l-changelog-info"},[i("div",{staticClass:"c-changelog-body--title"},[e._v(" "+e._s(e.formatDate(e.shownEntry.date))),e.shownEntry.name?i("span",[e._v(': "'+e._s(e.shownEntry.name)+'" update')]):e._e()]),i("div",{ref:"changelogBody",staticClass:"l-changelog-body c-changelog-body",domProps:{innerHTML:e._s(e.shownEntry.info)}})])])],1)},gbe=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"l-changelog-header"},[e("div",{staticClass:"c-changelog-title"},[t._v(" Changelog ")])])}],vbe=K(mbe,ybe,gbe,!1,null,"f1e09227");const bbe=vbe.exports,_be={name:"ChangeNameModal",components:{ModalWrapperChoice:Vt},data(){return{input:"",actualName:""}},created(){this.input=player.speedrun.name,this.actualName=Speedrun.generateName(this.input)},mounted(){this.$refs.input.select()},methods:{updateName(){this.actualName=Speedrun.generateName(this.input)},confirmChange(){player.speedrun.name=this.actualName,this.emitClose()}}};var Ebe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.confirmChange},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Change your Speedrun Player Name ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Change Name ")]},proxy:!0}])},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"input",staticClass:"c-modal-input c-modal-import__input",attrs:{type:"text"},domProps:{value:e.input},on:{keyup:[e.updateName,function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.confirmChange.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)}],input:function(n){n.target.composing||(e.input=n.target.value)}}}),i("i",[e._v(" This can no longer be changed once the timer starts, and there is a limit of "+e._s(e.formatInt(40))+" characters. ")]),i("div",[e._v(" Your new name will be "+e._s(e.actualName)+" ")])])},Tbe=[],wbe=K(_be,Ebe,Tbe,!1,null,null);const Cbe=wbe.exports,Sbe={name:"ClearConstantsModal",components:{ModalWrapperChoice:Vt},data(){return{constantCount:0}},methods:{update(){this.constantCount=Object.keys(player.reality.automator.constants).length,this.constantCount===0&&this.emitClose()},deleteConstants(){player.reality.automator.constants={},player.reality.automator.constantSortOrder=[]}}};var kbe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.deleteConstants},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Deleting Automator Constants ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Delete All ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Are you sure you wish to delete all of your currently-defined automator constants? "),i("br"),i("span",{staticClass:"l-lost-text"},[e._v(" This will irreversibly delete "+e._s(e.quantify("constant",e.constantCount))+"! ")])])])},Abe=[],Rbe=K(Sbe,kbe,Abe,!1,null,"bafdefc1");const Ibe=Rbe.exports,Dbe={name:"CreditsDisplay",props:{isModal:{type:Boolean,required:!1,default:!1}},computed:{people(){return GameDatabase.credits.people},roles(){return GameDatabase.credits.roles},isS12EndDisplay(){return this.$viewModel.theme==="S12"&&!this.isModal}},methods:{relevantPeople(t){return this.people.filter(e=>typeof e.roles=="number"?e.roles===t:e.roles.includes(t)).sort((e,i)=>e.name.localeCompare(i.name))}}};var xbe=function(){var e=this,i=e._self._c;return i("div",{class:{"c-credits-s12-end":e.isS12EndDisplay}},[e.isModal?e._e():i("h1",{staticClass:"c-credits-header"},[e._v(" Antimatter Dimensions ")]),e._l(e.roles.count,function(n){return i("div",{key:n},[i("h2",{staticClass:"c-credits-section"},[e._v(" "+e._s(e.pluralize(e.roles[n],e.relevantPeople(n).length))+" ")]),i("div",{class:{"l-credits--bulk":e.relevantPeople(n).length>10}},e._l(e.relevantPeople(n),function(r){return i("div",{key:r.name,staticClass:"c-credit-entry"},[e._v(" "+e._s(r.name)+" "),r.name2?i("span",[e._v(" ("+e._s(r.name2)+") ")]):e._e()])}),0)])}),i("br"),i("br"),i("br"),i("br"),i("br"),i("br"),i("br"),i("br"),i("br"),i("h1",{staticClass:"c-credits-header"},[e._v(" Thank you so much for playing! ")])],2)},Mbe=[],Pbe=K(Dbe,xbe,Mbe,!1,null,"228701e0");const N3=Pbe.exports,Obe={name:"CreditsModal",components:{CreditsDisplay:N3,ModalWrapper:As}};var Nbe=function(){var e=this,i=e._self._c;return i("ModalWrapper",{staticClass:"l-credits-modal c-credits-modal",scopedSlots:e._u([{key:"header",fn:function(){return[i("h1",{staticClass:"c-game-header__antimatter"},[e._v(" Antimatter Dimensions ")])]},proxy:!0}])},[i("div",{staticClass:"c-credits-modal__body"},[i("CreditsDisplay",{attrs:{"is-modal":!0}})],1)])},Gbe=[],Ube=K(Obe,Nbe,Gbe,!1,null,"72b4ecfd");const Lbe=Ube.exports,Bbe={name:"DeleteAutomatorScriptModal",components:{ModalWrapperChoice:Vt},props:{scriptID:{type:[String,Number],required:!0}},methods:{handleYesClick(){const t=this.scriptID,e=AutomatorBackend.state.topLevelScript;AutomatorBackend.deleteScript(t);const i=Object.values(player.reality.automator.scripts).map(n=>({id:n.id,name:n.name}));AutomatorBackend.isOn&&e!==t?player.reality.automator.state.editorScript=e:player.reality.automator.state.editorScript=i[0].id,AutomatorData.clearUndoData(),EventHub.dispatch(GAME_EVENT.AUTOMATOR_SAVE_CHANGED)}}};var Fbe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Delete this script ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Delete ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Please confirm your desire to delete this Automator script. ")])])},$be=[],Hbe=K(Bbe,Fbe,$be,!1,null,null);const Vbe=Hbe.exports,qbe={name:"EnslavedHintsModal",components:{ModalWrapper:As,PrimaryButton:yt},data(){return{currentStored:0,nextHintCost:0,canGetHint:!1,shownEntries:[],realityHintsLeft:0,glyphHintsLeft:0,hints:0}},computed:{hintCost(){return`${quantify("year",TimeSpan.fromMilliseconds(this.nextHintCost).totalYears,2)}`},formattedStored(){return`${quantify("year",TimeSpan.fromMilliseconds(this.currentStored).totalYears,2)}`},hasProgress(t){return this.progressEntries.some(e=>e.id===t)},timeEstimate(){if(this.currentStored>=this.nextHintCost)return"";const t=1e3*(Enslaved.isStoringGameTime?Enslaved.currentBlackHoleStoreAmountPerMs:getGameSpeedupFactor()),e=this.currentStored/t,i=this.nextHintCost/t,n=(TimeSpan.fromYears(1e40).totalMilliseconds-this.currentStored)/t;if(TimeSpan.fromSeconds(n).totalDays>this.hints)return`${TimeSpan.fromSeconds(n).toStringShort(!0)}`;const r=Math.pow(3,1/86400),s=i*Math.log(r)*Math.pow(r,e),a=productLog(s)/Math.log(r)-e;return`${TimeSpan.fromSeconds(a).toStringShort(!0)}`}},methods:{update(){this.currentStored=player.celestials.enslaved.stored,this.nextHintCost=Enslaved.nextHintCost,this.canGetHint=this.currentStored>=this.nextHintCost,this.shownEntries=[],this.realityHintsLeft=EnslavedProgress.all.length;for(const e of EnslavedProgress.all)e.hasHint&&(this.shownEntries.push([!1,e]),this.realityHintsLeft--);const t=player.celestials.enslaved.glyphHintsGiven;for(let e=0;e<t;e++)this.shownEntries.push([!0,GameDatabase.celestials.enslaved.glyphHints[e]]);this.glyphHintsLeft=GameDatabase.celestials.enslaved.glyphHints.length-t,this.hints=Enslaved.hintCostIncreases},giveRealityHint(t){t<=0||!Enslaved.spendTimeForHint()||EnslavedProgress.all.filter(e=>!e.hasHint).randomElement().unlock()},giveGlyphHint(t){t<=0||!Enslaved.spendTimeForHint()||player.celestials.enslaved.glyphHintsGiven++}}};var Ybe=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Cracks in The Nameless Ones' Reality ")]},proxy:!0}])},[i("div",{staticClass:"c-enslaved-hint-modal c-modal--short"},[i("div",[e._v(" This Reality seems to be resisting your efforts to complete it. So far you have done the following: ")]),i("br"),e._l(e.shownEntries,function(n,r){return i("div",{key:r},[n[0]?i("div",[i("i",{staticClass:"fa-solid fa-shapes"}),e._v(" "),i("b",[e._v("Glyph hint:")]),i("br"),e._v(" "+e._s(n[1])+" ")]):i("div",[n[1].hasHint&&!n[1].hasProgress?i("span",[i("i",{staticClass:"c-icon-wrapper fas fa-question-circle"}),i("b",[e._v("You have not figured out what this hint means yet.")])]):i("span",[i("i",{staticClass:"c-icon-wrapper fa-solid fa-house-crack"}),i("b",[e._v("You have exposed a crack in the Reality:")])]),i("br"),e._v(" - "+e._s(n[1].hintInfo)+" "),i("br"),e._v(" - "+e._s(n[1].hasProgress?n[1].completedInfo:"?????")+" ")]),i("br")])}),e.realityHintsLeft+e.glyphHintsLeft>0?i("div",[e._v(" You can spend some time looking for some more cracks in the Reality, but every hint you spend Stored Time on will increase the Stored Time needed for the next by a factor of "+e._s(e.formatInt(3))+". This cost bump will gradually go away over "+e._s(e.formatInt(24))+" hours and figuring out what the hint means will immediately divide the cost by "+e._s(e.formatInt(2))+". The cost can't be reduced below "+e._s(e.format(1e40))+" years. "),i("br"),i("br"),e._v(" The next hint will cost "+e._s(e.hintCost)+" of Stored Time. You currently have "+e._s(e.formattedStored)+". "),e.currentStored<e.nextHintCost?i("span",[e._v(" You will reach this if you charge your Black Hole for "+e._s(e.timeEstimate)+". ")]):e._e(),i("br"),i("br"),i("PrimaryButton",{staticClass:"l-enslaved-hint-button",attrs:{enabled:e.realityHintsLeft>0&&e.canGetHint},on:{click:function(n){return e.giveRealityHint(e.realityHintsLeft)}}},[e._v(" Get a hint about the Reality itself ("+e._s(e.formatInt(e.realityHintsLeft))+" left) ")]),i("br"),i("PrimaryButton",{staticClass:"l-enslaved-hint-button",attrs:{enabled:e.glyphHintsLeft>0&&e.canGetHint},on:{click:function(n){return e.giveGlyphHint(e.glyphHintsLeft)}}},[e._v(" Get a hint on what Glyphs to use ("+e._s(e.formatInt(e.glyphHintsLeft))+" left) ")])],1):i("div",[i("b",[e._v("There are no more hints left!")])])],2)])},Wbe=[],jbe=K(qbe,Ybe,Wbe,!1,null,"32c2d85a");const zbe=jbe.exports,$u={companion:{adjective:"Huggable",noun:"Companion"},reality:{adjective:"Real",noun:"Reality"},music:{adjective:{high:"Melodic",mid:"Chordal",low:"Tuned"},noun:"Music"},effarig:{adjective:{both:"Meta",glyph:"Stable",rm:"Mechanical",none:"Fragmented"},noun:{both:"Effarig",glyph:"Stability",rm:"Mechanism",none:"Fragmentation"}},cursed:{adjective:{high:"Cursed",mid:"Hexed",low:"Jinxed"},noun:"Curse"},power:{adjective:{high:"Powerful",mid:"Mastered",low:"Potential"},noun:"Power"},infinity:{adjective:{high:"Infinite",mid:"Boundless",low:"Immense"},noun:"Infinity"},replication:{adjective:{high:"Replicated",mid:"Simulated",low:"Duplicated"},noun:"Replication"},time:{adjective:{high:"Temporal",mid:"Chronal",low:"Transient"},noun:"Time"},dilation:{adjective:{high:"Dilated",mid:"Attenuated",low:"Diluted"},noun:"Dilation"}},Xbe={name:"GlyphSetName",props:{glyphSet:{type:Array,required:!0},forceColor:{type:Boolean,required:!1,default:!1}},data(){return{isColored:!0,glyphTypeList:[{type:"power",perc:0,adjOrder:1},{type:"infinity",perc:0,adjOrder:1},{type:"replication",perc:0,adjOrder:1},{type:"time",perc:0,adjOrder:1},{type:"dilation",perc:0,adjOrder:1},{type:"effarig",perc:0,adjOrder:2},{type:"music",perc:0,adjOrder:3},{type:"reality",perc:0,adjOrder:4},{type:"companion",perc:0,adjOrder:5},{type:"cursed",perc:0,adjOrder:6}],sortedGlyphs:[],slotCount:0}},computed:{isDoomed:()=>Pelle.isDoomed,setName(){if(this.sortGlyphList(),this.sortedGlyphs.length===0)return"Void";if(this.sortedGlyphs.length===1)return this.singletonName;let t,e;this.sortedGlyphs.some(n=>n.adjOrder===1)?(t=this.sortedGlyphs.filter(n=>n.adjOrder!==1),e=this.basicTypePhrase):(t=[...this.sortedGlyphs],e=this.getNoun(t.pop()));const i=[];for(const n of t)i.push(this.getAdjective(n));return`${i.join(" ")} ${e}`},basicTypePhrase(){const t=this.sortedGlyphs.filter(e=>BASIC_GLYPH_TYPES.includes(e.type)&&e.perc!==0);switch(t.length){case 1:return $u[t[0].type].noun;case 2:return t[0].perc===t[1].perc?[this.getAdjective(t[0]),this.getAdjective(t[1]),"Mixture"].join(" "):`${this.getAdjective(t[1])} ${this.getNoun(t[0])}`;case 3:return t[0].perc>t[1].perc?[this.getAdjective(t[1]),this.getAdjective(t[2]),this.getNoun(t[0])].join(" "):t[0].perc===t[2].perc?"Mixed Irregularity":[this.getAdjective(t[0]),this.getAdjective(t[1]),this.getAdjective(t[2]),"Irregularity"].join(" ");case 4:return t[0].perc===t[1].perc?"Irregular Jumble":`${this.getAdjective(t[0])} Jumble`;case 5:return"Royal Flush";default:throw new Error("Unexpected glyph set configuration in GlyphSetName")}},singletonName(){if(this.sortedGlyphs[0].type==="effarig")return $u.effarig.noun[this.getEffarigProp()];const t=["reality","companion"];for(const n of t)if(this.sortedGlyphs[0].type===n)return $u[n].noun;const e=$u[this.sortedGlyphs[0].type].noun,i=this.sortedGlyphs[0].perc;return this.isDoomed?`Doomed ${e}`:i===100?`Full ${e}`:i>=75?`Strengthened ${e}`:i>=40?`Partial ${e}`:`Weak ${e}`},mainGlyphName(){if(this.sortedGlyphs.length===0)return{id:"none",currentColor:{border:"#888888"}};if(this.calculateGlyphPercent("cursed"))return CosmeticGlyphTypes.cursed;if(this.calculateGlyphPercent("companion"))return CosmeticGlyphTypes.companion;if(this.calculateGlyphPercent("reality"))return CosmeticGlyphTypes.reality;if(this.calculateGlyphPercent("music")>=50)return CosmeticGlyphTypes.music;const t=this.sortedGlyphs.filter(e=>e.adjOrder===1)[0];return(t==null?void 0:t.perc)>=50?CosmeticGlyphTypes[t.type]:this.calculateGlyphPercent("effarig")?CosmeticGlyphTypes.effarig:CosmeticGlyphTypes[t.type]},textColor(){return this.isDoomed&&this.glyphSet.length===1?"var(--color-pelle--base)":this.mainGlyphName.id==="cursed"?"var(--color-celestials)":this.mainGlyphName.id==="music"?CosmeticGlyphTypes.music.currentColor.border:this.sortedGlyphs.length>=3&&this.sortedGlyphs[0].perc<=30?"#C46200":this.mainGlyphName.currentColor.border},textStyle(){return this.$recompute("mainGlyphName"),!this.isColored&&!this.forceColor?{}:{color:this.textColor,"text-shadow":`-1px 1px 1px var(--color-text-base), 1px 1px 1px var(--color-text-base),
                        -1px -1px 1px var(--color-text-base), 1px -1px 1px var(--color-text-base),
                        0 0 3px ${this.textColor}`,animation:this.mainGlyphName.id==="reality"?"a-reality-glyph-description-cycle 10s infinite":void 0}}},created(){this.on$(GAME_EVENT.GLYPHS_CHANGED,this.sortGlyphList),this.sortGlyphList()},methods:{update(){this.isColored=player.options.glyphTextColors,this.slotCount=Math.max(Glyphs.activeSlotCount,this.glyphSet.length)},getEffarigProp(){const t=this.glyphSet.some(i=>getSingleGlyphEffectFromBitmask("effarigrm",i)),e=this.glyphSet.some(i=>getSingleGlyphEffectFromBitmask("effarigglyph",i));return t&&e?"both":t?"rm":e?"glyph":"none"},calculateGlyphPercent(t){const e=this.slotCount?100/this.slotCount:0;return t==="music"?this.glyphSet.filter(i=>Glyphs.isMusicGlyph(i)).length*e:this.glyphSet.filter(i=>i.type===t).length*e},sortGlyphList(){this.$recompute("textColor"),this.glyphTypeList.forEach(e=>e.perc=this.calculateGlyphPercent(e.type)),this.sortedGlyphs=this.glyphTypeList.filter(e=>e.perc!==0);const t=e=>100*e.adjOrder+e.perc+e.type.charCodeAt(0)/1e3;this.sortedGlyphs.sort((e,i)=>t(i)-t(e))},getAdjective(t){if(t.type==="effarig")return $u.effarig.adjective[this.getEffarigProp()];const e=n=>n>=60?"high":n>=40?"mid":"low",i=$u[t.type].adjective;return typeof i=="string"?i:i[e(t.perc)]},getNoun(t){return t.type==="effarig"?$u.effarig.noun[this.getEffarigProp()]:$u[t.type].noun}}};var Kbe=function(){var e=this,i=e._self._c;return i("div",[i("span",{staticClass:"c-current-glyph-effects__header",style:e.textStyle},[e._v(" "+e._s(e.setName)+" ")])])},Zbe=[],Qbe=K(Xbe,Kbe,Zbe,!1,null,null);const vR=Qbe.exports,Jbe={name:"GlyphSetPreview",components:{GlyphComponent:du,GlyphSetName:vR},props:{text:{type:String,required:!1,default:""},textHidden:{type:Boolean,required:!1,default:!1},glyphs:{type:Array,required:!0},ignoreModifiedLevel:{type:Boolean,required:!1,default:!1},flipTooltip:{type:Boolean,required:!1,default:!1},isInModal:{type:Boolean,required:!1,default:!1},showName:{type:Boolean,required:!1,default:!0},forceNameColor:{type:Boolean,required:!1,default:!0},showSacrifice:{type:Boolean,required:!1,default:!1},noneText:{type:String,required:!1,default:"(No Glyphs equipped)"},sort:{type:Boolean,required:!1,default:!0}},data(){return{realityGlyphBoost:0}},computed:{orderedGlyphs(){if(!this.sort)return this.glyphs;const t=["reality","effarig","power","infinity","replication","time","dilation","cursed","companion"],e=Glyphs.copyForRecords(this.glyphs);return e.sort((i,n)=>t.indexOf(i.type)-t.indexOf(n.type)),e}},watch:{glyphs(){this.$recompute("orderedGlyphs")}},methods:{update(){const t=this.glyphs.filter(e=>e.type==="reality")[0];this.realityGlyphBoost=t?GlyphEffects.realityglyphlevel.effect(t.level):0},showModal(){this.isInModal||Modal.glyphShowcasePanel.show({name:this.text,glyphSet:this.glyphs,closeEvent:GAME_EVENT.GLYPH_SET_SAVE_CHANGE,displaySacrifice:this.showSacrifice})},glyphHash(){return Glyphs.hash(this.glyphs)}}};var e_e=function(){var e=this,i=e._self._c;return i("div",[e.text&&!e.textHidden?i("span",[e._v(" "+e._s(e.text)+" "),i("br")]):e._e(),e.glyphs.length!==0?i("span",{class:{"l-glyph-set-preview":!e.isInModal},on:{click:e.showModal}},[e.showName?i("GlyphSetName",{key:e.glyphHash(),attrs:{"glyph-set":e.glyphs,"force-color":e.forceNameColor}}):e._e(),e._l(e.orderedGlyphs,function(n,r){return i("GlyphComponent",{key:r,staticClass:"l-preview",attrs:{glyph:n,"show-sacrifice":e.showSacrifice,draggable:!1,circular:!0,"ignore-modified-level":e.ignoreModifiedLevel,"reality-glyph-boost":e.realityGlyphBoost,"flip-tooltip":e.flipTooltip,"is-in-modal":e.isInModal,size:"3rem","text-proportion":.5,"glow-blur":"0.2rem","glow-spread":"0.1rem"}})})],2):i("span",[e.showName?i("GlyphSetName",{attrs:{"glyph-set":e.glyphs,"force-color":e.forceNameColor}}):e._e(),e._v(" "+e._s(e.noneText)+" ")],1)])},t_e=[],i_e=K(Jbe,e_e,t_e,!1,null,"1ead695a");const Zf=i_e.exports,n_e={name:"GlyphSetSaveDeleteModal",components:{ModalWrapperChoice:Vt,GlyphSetPreview:Zf},props:{glyphSetId:{type:Number,required:!0}},data(){return{glyphSet:[]}},methods:{update(){this.glyphSet=Glyphs.copyForRecords(player.reality.glyphs.sets[this.glyphSetId].glyphs)},handleYesClick(){player.reality.glyphs.sets[this.glyphSetId].glyphs=[],EventHub.dispatch(GAME_EVENT.GLYPH_SET_SAVE_CHANGE)}}};var r_e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"deleteGlyphSetSave"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Delete this Glyph Set ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Delete ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Please confirm your desire to delete this Glyph Set: "),i("GlyphSetPreview",{attrs:{"is-in-modal":!0,glyphs:e.glyphSet}}),e._v(" This will not affect your actual Glyphs, only the saved preset. ")],1)])},s_e=[],a_e=K(n_e,r_e,s_e,!1,null,null);const o_e=a_e.exports,l_e={name:"GlyphShowcasePanelEntry",components:{GlyphComponent:du},props:{idx:{type:Number,required:!0},glyph:{type:Object,required:!0},showLevel:{type:Boolean,required:!0},realityGlyphBoost:{type:Number,default:0},maxGlyphEffects:{type:Number,required:!0},showSacrifice:{type:Boolean,required:!0}},data(){return{canSacrifice:!1}},computed:{type(){return this.glyph.type},typeCapitalized(){return this.type.capitalize()},level(){return this.glyph.level},effectiveLevel(){return getAdjustedGlyphLevel(this.glyph,this.realityGlyphBoost,!0)},isLevelCapped(){return this.effectiveLevel&&this.effectiveLevel<this.level},isLevelBoosted(){return this.effectiveLevel&&this.effectiveLevel>this.level},levelText(){if(this.type==="companion")return"";const t=this.isLevelCapped?"<i class='fas fa-sort-down'></i>":this.isLevelBoosted?"<i class='fas fa-sort-up'></i>":"";return`<span style="color: ${this.isLevelCapped?"#ff4444":this.isLevelBoosted?"#44FF44":"var(--color-text);"}">
                  ${t}${formatInt(this.effectiveLevel)}${t}
                  </span>`},typeStyle(){return{color:GlyphAppearanceHandler.getBorderColor(this.type),"font-weight":"bold","text-shadow":this.type==="cursed"?"0.05rem 0.05rem var(--color-text)":void 0,animation:this.type==="reality"?"a-reality-glyph-description-cycle 10s infinite":void 0}},rarityStyle(){return{color:CosmeticGlyphTypes[this.glyph.type].ignoreRarityColor?GlyphAppearanceHandler.getBorderColor(this.type):getRarity(this.glyph.strength)[Theme.current().isDark()?"darkColor":"lightColor"],"font-weight":"bold"}},effectStyle(){return{"font-size":`${this.type==="effarig"?1:1.2}rem`,height:this.glyphEffectListHeight(this.maxGlyphEffects)}},glyphEffectList(){const t=GlyphEffects;return getGlyphEffectValuesFromBitmask(this.glyph.effects,this.effectiveLevel,this.glyph.strength,this.type).filter(n=>t[n.id].isGenerated===generatedTypes.includes(this.type)).map(n=>this.formatEffectString(t[n.id],n.value)).filter(n=>n!=="undefined")},rarityPercent(){return this.glyph.type==="companion"||this.glyph.type==="cursed"?"":formatRarity(strengthToRarity(this.glyph.strength))}},methods:{update(){this.canSacrifice=GlyphSacrificeHandler.canSacrifice},glyphEffectListHeight(t){return["3rem","6rem","8rem","11rem"][t-1]},formatEffectString(t,e){const i=t.shortDesc,n=t.formatSingleEffect?t.formatSingleEffect(e):t.formatEffect(e),r=t.conversion?t.formatSecondaryEffect(t.conversion(e)):"";return{text:`${i}`.replace("{value}",n).replace("{value2}",r),isPelleDisabled:t.isDisabledByDoomed}},clickGlyph(t){Glyphs.isMusicGlyph(t)&&new Audio(`audio/note${GLYPH_TYPES.indexOf(t.type)+1}.mp3`).play()}}};var c_e=function(){var e=this,i=e._self._c;return i("div",[i("div",{staticClass:"c-glyph-choice-icon"},[i("span",{style:e.typeStyle},[e._v(e._s(e.typeCapitalized))]),e.showLevel?i("div",{domProps:{innerHTML:e._s(e.levelText)}}):e._e(),i("GlyphComponent",{key:e.idx,staticClass:"c-glyph-component-container",attrs:{glyph:e.glyph,"show-sacrifice":e.showSacrifice&&e.canSacrifice,draggable:!1,circular:!0,"ignore-modified-level":!1,"reality-glyph-boost":e.realityGlyphBoost,"is-in-modal":!0,size:"4rem","text-proportion":.5,"glow-blur":"0.4rem","glow-spread":"0.1rem"},on:{clicked:function(n){return e.clickGlyph(e.glyph)}}}),i("div",{style:e.rarityStyle},[e._v(" "+e._s(e.rarityPercent)+" ")])],1),i("div",{staticClass:"c-glyph-choice-effect-list",style:e.effectStyle},e._l(e.glyphEffectList,function(n,r){return i("div",{key:r,class:{"o-pelle-disabled":n.isPelleDisabled}},[e._v(" "+e._s(n.text)+" ")])}),0)])},u_e=[],d_e=K(l_e,c_e,u_e,!1,null,"14c48465");const h_e=d_e.exports,f_e={name:"GlyphShowcasePanelModal",components:{GlyphSetName:vR,ModalWrapper:As,GlyphShowcasePanelEntry:h_e},props:{name:{type:String,required:!0},glyphSet:{type:Array,required:!0},isGlyphSelection:{type:Boolean,default:!1},showSetName:{type:Boolean,default:!0},displaySacrifice:{type:Boolean,default:!0}},data(){return{glyphs:[],gainedLevel:0,canSacrifice:!1,realityGlyphBoost:0}},computed:{maxGlyphEffects(){let t=1;for(const e of this.glyphs)t=Math.max(getGlyphEffectsFromBitmask(e.effects).filter(i=>i.isGenerated).length,t);return t},containerClass(){return{"c-glyph-choice-container":!0,"c-glyph-choice-container-single":this.glyphs.length===1}}},methods:{update(){this.glyphs=this.isGlyphSelection?GlyphSelection.glyphList(GlyphSelection.choiceCount,gainedGlyphLevel(),{isChoosingGlyph:!1}):this.glyphSet.filter(e=>e),this.sortGlyphs(),this.gainedLevel=gainedGlyphLevel().actualLevel;const t=this.glyphs.filter(e=>e.type==="reality")[0];this.realityGlyphBoost=t?GlyphEffects.realityglyphlevel.effect(t.level):0},sortGlyphs(){const t=["reality","effarig","power","infinity","replication","time","dilation","cursed","companion"];this.glyphs.sort((e,i)=>t.indexOf(e.type)-t.indexOf(i.type))}}};var p_e=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.name)+" ")]},proxy:!0}])},[e.isGlyphSelection?i("div",[e._v(" Projected Glyph Level: "+e._s(e.formatInt(e.gainedLevel))+" ")]):e._e(),e.showSetName?i("GlyphSetName",{attrs:{"glyph-set":e.glyphs,"force-color":!0}}):e._e(),i("div",{class:e.containerClass},e._l(e.glyphs,function(n,r){return i("GlyphShowcasePanelEntry",{key:r,staticClass:"c-glyph-choice-single-glyph",attrs:{idx:r,glyph:n,"show-level":!e.isGlyphSelection,"reality-glyph-boost":e.realityGlyphBoost,"max-glyph-effects":e.maxGlyphEffects,"show-sacrifice":e.displaySacrifice}})}),1)],1)},m_e=[],y_e=K(f_e,p_e,m_e,!1,null,"62233e1f");const g_e=y_e.exports,v_e={name:"H2PModal",components:{ModalCloseButton:ay},data(){return{tabId:0,searchValue:""}},computed:{activeTab:{get(){return GameDatabase.h2p.tabs[this.tabId]},set(t){this.tabId=t.id}},matchingTabs(){return GameDatabase.h2p.search(this.searchValue).filter(t=>t.tab.isUnlocked())},topThreshold(){return Math.min(this.matchingTabs[Math.min(this.matchingTabs.length-1,4)].relevance+.01,.5)}},created(){const t=GameDatabase.h2p.tabs.filter(r=>r.isUnlocked()),e=this.$viewModel.tab,i=`${e}/${this.$viewModel.subtab}`,n=t.find(r=>r.tab===i||r.tab===e);this.activeTab=ui.view.h2pForcedTab||n||t[0],ui.view.h2pForcedTab=void 0,Tutorial.emphasizeH2P()&&(this.activeTab=GameDatabase.h2p.tabs[0])},mounted(){this.$refs.input.select()},methods:{setActiveTab(t){this.activeTab=t,document.getElementById("h2p-body").scrollTop=0},isFirstIrrelevant(t){const e=this.matchingTabs,i=e[t],n=e[t-1];return t>0&&i.relevance>=this.topThreshold&&n.relevance<this.topThreshold}}};var b_e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-h2p-modal"},[i("ModalCloseButton",{on:{click:e.emitClose}}),e._m(0),i("div",{staticClass:"l-h2p-container"},[i("div",{staticClass:"l-h2p-search-tab"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchValue,expression:"searchValue"}],ref:"input",staticClass:"c-h2p-search-bar",attrs:{placeholder:"Type to search..."},domProps:{value:e.searchValue},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)},input:function(n){n.target.composing||(e.searchValue=n.target.value)}}}),i("div",{staticClass:"l-h2p-tab-list"},e._l(e.matchingTabs,function(n,r){return i("div",{key:n.tab.name,staticClass:"o-h2p-tab-button",class:{"o-h2p-tab-button--selected":n.tab===e.activeTab,"o-h2p-tab-button--relevant":n.relevance<e.topThreshold,"o-h2p-tab-button--first-irrelevant":e.isFirstIrrelevant(r)},on:{click:function(s){return e.setActiveTab(n.tab)}}},[e._v(" "+e._s(n.tab.alias)+" ")])}),0)]),i("div",{staticClass:"l-h2p-info"},[i("div",{staticClass:"c-h2p-body--title"},[e._v(" "+e._s(e.activeTab.name)+" ")]),i("div",{staticClass:"l-h2p-body c-h2p-body",attrs:{id:"h2p-body"},domProps:{innerHTML:e._s(e.activeTab.info())}})])])],1)},E_e=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"l-h2p-header"},[e("div",{staticClass:"c-h2p-title"},[t._v(" How To Play ")])])}],T_e=K(v_e,b_e,E_e,!1,null,"afef530a");const w_e=T_e.exports,C_e={name:"ImportAutomatorDataModal",components:{ModalWrapperChoice:Vt},data(){return{input:"",isValid:!1,hasExtraData:!1,scriptName:"",lineCount:0,scriptContent:"",hasErrors:!1,importedPresets:[],importedConstants:[],ignorePresets:!1,ignoreConstants:!1}},computed:{hasPresets(){var t;return(((t=this.importedPresets)==null?void 0:t.length)??0)!==0},hasConstants(){var t;return(((t=this.importedConstants)==null?void 0:t.length)??0)!==0},isImportingExtraData(){const t=this.willOverwriteConstant||this.constantCountAfterImport>this.currentConstants,e=this.importedPresets?!this.ignorePresets:!1,i=this.importedConstants?!this.ignoreConstants&&t:!1;return this.isValid&&this.hasExtraData&&(e||i)},currentPresets:()=>player.timestudy.presets,currentConstants:()=>Object.keys(player.reality.automator.constants),maxConstantCount(){return AutomatorData.MAX_ALLOWED_CONSTANT_COUNT},overwrittenPresetCount(){let t=0;for(const e of this.importedPresets){const i=this.currentPresets[e.id];!(i.name===""&&i.studies==="")&&(i.name!==e.name||i.studies!==e.studies)&&t++}return t},willOverwriteConstant(){if(!this.hasExtraData)return!1;const t=new Set;for(const e of this.currentConstants)t.add(e);for(const e of this.importedConstants)if(t.has(e.key)&&player.reality.automator.constants[e.key]!==e.value)return!0;return!1},constantCountAfterImport(){if(!this.hasExtraData)return this.currentConstants.length;const t=new Set;for(const e of this.currentConstants)t.add(e);for(const e of this.importedConstants)t.add(e.key);return t.size},extraConstants(){return this.constantCountAfterImport-this.maxConstantCount},presetButtonText(){return this.ignorePresets?"Will Ignore Presets":"Will Import Presets"},constantButtonText(){return this.ignoreConstants?"Will Ignore Constants":"Will Import Constants"}},mounted(){this.$refs.input.select()},methods:{update(){let t=AutomatorBackend.parseFullScriptData(this.input);if(t?this.hasExtraData=!0:(t=AutomatorBackend.parseScriptContents(this.input),this.hasExtraData=!1),!t){this.isValid=!1;return}this.scriptName=t.name,this.scriptContent=t.content,this.importedPresets=t.presets,this.importedConstants=t.constants,this.lineCount=this.scriptContent.split(`
`).length,this.hasErrors=KU(this.scriptContent),this.isValid=!0},importSave(){this.isValid&&(this.hasExtraData?AutomatorBackend.importFullScriptData(this.input,{presets:this.ignorePresets,constants:this.ignoreConstants}):AutomatorBackend.importScriptContents(this.input),this.emitClose())}}};var S_e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{"show-cancel":!e.isValid,"show-confirm":e.isValid},on:{confirm:e.importSave},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Import Automator Script Data ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Import ")]},proxy:!0}])},[e._v(" This will create a new Automator script at the end of your list. "),e.isImportingExtraData?i("span",[e._v("This will also import additional data related to the script.")]):e._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"input",staticClass:"c-modal-input c-modal-import__input",attrs:{type:"text"},domProps:{value:e.input},on:{keyup:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.importSave.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)}],input:function(n){n.target.composing||(e.input=n.target.value)}}}),e.isValid?i("div",[e._v(" Script name: "+e._s(e.scriptName)+" "),i("br"),e._v(" Line count: "+e._s(e.lineCount)+" "),e.hasPresets?i("div",[i("br"),e._v(" Study Presets: "),e._l(e.importedPresets,function(n,r){return i("span",{key:r,staticClass:"c-import-data-name"},[n.name?i("span",[e._v('"'+e._s(n.name)+'" (slot '+e._s(n.id+1)+")")]):i("span",[e._v("Preset slot #"+e._s(n.id+1))])])}),!e.ignorePresets&&e.overwrittenPresetCount>0?i("div",{staticClass:"l-has-errors"},[e._v(" "+e._s(e.formatInt(e.overwrittenPresetCount))+" of your existing presets will be overwritten by imported presets! ")]):e._e(),i("br"),i("button",{staticClass:"o-primary-btn",on:{click:function(n){e.ignorePresets=!e.ignorePresets}}},[e._v(" "+e._s(e.presetButtonText)+" ")])],2):e._e(),e.hasConstants?i("div",[i("br"),e._v(" Constants: "),e._l(e.importedConstants,function(n,r){return i("span",{key:r+10,staticClass:"c-import-data-name"},[e._v(' "'+e._s(n.key)+'" ')])}),!e.ignoreConstants&&(e.willOverwriteConstant||e.extraConstants>0)?i("div",{staticClass:"l-has-errors"},[e.willOverwriteConstant?i("span",[e._v("Some of your existing constants will be overwritten!")]):e._e(),e.willOverwriteConstant&&e.extraConstants>0?i("br"):e._e(),e.extraConstants>0?i("span",[e._v(" "+e._s(e.quantifyInt("constant",e.extraConstants))+" will not be imported due to the "+e._s(e.maxConstantCount)+" constant limit. ")]):e._e()]):e._e(),i("br"),i("button",{staticClass:"o-primary-btn",on:{click:function(n){e.ignoreConstants=!e.ignoreConstants}}},[e._v(" "+e._s(e.constantButtonText)+" ")])],2):e._e(),i("br"),e.hasErrors?i("div",{staticClass:"l-has-errors"},[e._v(" This script has errors which need to be fixed before it can be run! ")]):e._e(),e.hasErrors&&e.isImportingExtraData?i("div",[i("i",[e._v("Some errors may be fixed with the additional data being imported.")])]):e._e()]):e.input.length!==0?i("div",[e._v(" Invalid Automator data string ")]):e._e()])},k_e=[],A_e=K(C_e,S_e,k_e,!1,null,"72e8bdaa");const R_e=A_e.exports,I_e={name:"ImportFilterSingleType",props:{type:{type:String,required:!0},currSettings:{type:Object,required:!0},newSettings:{type:Object,required:!0}},computed:{settingsChanged(){return JSON.stringify(this.currSettings)!==JSON.stringify(this.newSettings)},symbol(){return GLYPH_SYMBOLS[this.type]},capitalized(){return`${this.type.charAt(0).toUpperCase()}${this.type.substring(1)}`},rarityStr(){return this.changedValue(this.currSettings.rarity,this.newSettings.rarity,t=>formatPercents(t/100))},effectStr(){return this.changedValue(this.currSettings.effectCount,this.newSettings.effectCount,formatInt)},scoreStr(){return this.changedValue(this.currSettings.score,this.newSettings.score,formatInt)},effectData(){const t=[];for(let e=0;e<this.currSettings.effectScores.length;e++){const i=AutoGlyphProcessor.bitmaskIndexOffset(this.type)+e;t.push({bitmaskIndex:i,oldReq:(this.currSettings.specifiedMask&1<<i)!==0,newReq:(this.newSettings.specifiedMask&1<<i)!==0,oldScore:this.currSettings.effectScores[e],newScore:this.newSettings.effectScores[e]})}return t}},methods:{changedValue(t,e,i){return t===e?i(t):`${i(t)}➜${i(e)}`},effectScoreStr(t){const e=(r,s)=>`${r?"✔":"✘"}${formatInt(s)}`,i=e(t.oldReq,t.oldScore),n=e(t.newReq,t.newScore);return t.oldScore===t.newScore?i:`${i}➜${n}`},topLevelClassObject(t){return{"o-cell":!0,"o-cell--changed":this.currSettings[t]!==this.newSettings[t]}},effectClassObject(t){return{"o-cell":!0,"o-cell--changed":t.oldReq!==t.newReq||t.oldScore!==t.newScore}},getEffectDesc(t){return GlyphEffects.all.find(e=>e.bitmaskIndex===t.bitmaskIndex&&e.isGenerated).genericDesc}}};var D_e=function(){var e=this,i=e._self._c;return i("div",[e._v(" "+e._s(e.symbol)+": "),e.settingsChanged?i("span",[i("span",{staticClass:"c-single-row"},[i("span",{staticClass:"c-rarity",class:e.topLevelClassObject("rarity"),attrs:{"ach-tooltip":"Setting for Rarity Threshold and Specified Effect"}},[e._v(" "+e._s(e.rarityStr)+" ")]),i("span",{staticClass:"c-effects-count",class:e.topLevelClassObject("effectCount"),attrs:{"ach-tooltip":"Number of effects in Specified Effect"}},[e._v(" Minimum Effects: "+e._s(e.effectStr)+" ")]),i("span",{staticClass:"c-target-score",class:e.topLevelClassObject("score"),attrs:{"ach-tooltip":"Threshold for Effect Score"}},[e._v(" Score: "+e._s(e.scoreStr)+" ")])]),i("br"),i("span",{staticClass:"c-single-row"},e._l(e.effectData.slice(0,4),function(n){return i("span",{key:n.bitmaskIndex,staticClass:"c-single-score",class:e.effectClassObject(n),attrs:{"ach-tooltip":e.getEffectDesc(n)}},[e._v(" "+e._s(e.effectScoreStr(n))+" ")])}),0),e.effectData.length>4?i("span",{staticClass:"c-single-row c-second-row"},[i("br"),e._l(e.effectData.slice(4),function(n){return i("span",{key:n.bitmaskIndex,staticClass:"c-single-score o-cell",class:e.effectClassObject(n),attrs:{"ach-tooltip":e.getEffectDesc(n)}},[e._v(" "+e._s(e.effectScoreStr(n))+" ")])})],2):e._e()]):i("span",[e._v(" (No changes) ")])])},x_e=[],M_e=K(I_e,D_e,x_e,!1,null,"a437bd0e");const P_e=M_e.exports,O_e={name:"ImportFilterModal",components:{ModalWrapperChoice:Vt,PrimaryButton:yt,ImportFilterSingleType:P_e},data(){return{currentSettings:{},input:""}},computed:{inputIsValid(){let t;try{return t=GameSaveSerializer.decodeText(this.input,"glyph filter"),t.length>0&&t.match(/^[0-9,.|/-]*$/u)!==null}catch{return!1}},parsedSettings(){if(!this.inputIsValid)return null;const e=GameSaveSerializer.decodeText(this.input,"glyph filter").split("|"),i={};let n=3;for(const r of ALCHEMY_BASIC_GLYPH_TYPES){if(!r)continue;const s=e[n].split(",");i[r]={rarity:Number(s[0]),score:Number(s[1]),effectCount:Number(s[2]),specifiedMask:Number(s[3]),effectScores:s[4].split("/").map(a=>Number(a))},n++}return{select:Number(e[0]),simple:Number(e[1]),trash:Number(e[2]),types:i}},selectStr(){return this.changedValue(this.parsedSettings.select,this.currentSettings.select,t=>AutoGlyphProcessor.filterModeName(t))},basicCountStr(){return this.changedValue(this.parsedSettings.simple,this.currentSettings.simple,formatInt)},trashStr(){return this.changedValue(this.parsedSettings.trash,this.currentSettings.trash,t=>AutoGlyphProcessor.trashModeDesc(t))},availableTypes(){return ALCHEMY_BASIC_GLYPH_TYPES.filter(t=>!GlyphTypes.locked.map(e=>e.id).includes(t))},settingTooltipText(){return`Mouseover each box for more details. ✔ and ✘ symbols denote an effect
        selected/unselected for Specified Effect mode.`}},mounted(){this.$refs.input.select()},methods:{update(){this.currentSettings=JSON.parse(JSON.stringify(player.reality.glyphs.filter))},changedValue(t,e,i){return t===e?"(No change)":`${i(t)} ➜ ${i(e)}`},importFilter(){this.parsedSettings!==null&&(this.emitClose(),player.reality.glyphs.filter=this.parsedSettings)}}};var N_e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{"show-cancel":!e.inputIsValid,"show-confirm":!1},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Import Glyph filter settings ")]},proxy:!0}])},[e._v(" Note: Importing Glyph filter options will overwrite settings "),i("br"),e._v(" in all filter modes, not just the currently-selected one. "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"input",staticClass:"c-modal-input c-modal-import__input",attrs:{type:"text"},domProps:{value:e.input},on:{keyup:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.importSave.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)}],input:function(n){n.target.composing||(e.input=n.target.value)}}}),i("div",{staticClass:"c-modal-import__save-info"},[e.input?e.inputIsValid?i("div",[i("b",[e._v("Selection mode:")]),e._v(" "+e._s(e.selectStr)+" "),i("br"),i("b",[e._v('Effect Count ("Number of Effects"):')]),e._v(" "+e._s(e.basicCountStr)+" "),i("br"),i("b",[e._v("Rejected Glyphs:")]),e._v(" "+e._s(e.trashStr)+" "),i("br"),i("u",[i("b",[e._v("Type-specific Settings")])]),e._v(" "),i("span",{attrs:{"ach-tooltip":e.settingTooltipText}},[i("i",{staticClass:"fas fa-question-circle"})]),i("br"),e._l(e.availableTypes,function(n){return i("ImportFilterSingleType",{key:n,staticClass:"c-single-type",attrs:{type:n,"curr-settings":e.currentSettings.types[n],"new-settings":e.parsedSettings.types[n]}})})],2):i("div",[e._v(" Not a valid Glyph filter string ")]):i("div")]),e.inputIsValid?i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn",on:{click:e.importFilter}},[e._v(" Import ")]):e._e()],1)},G_e=[],U_e=K(O_e,N_e,G_e,!1,null,"13743a53");const L_e=U_e.exports,Hu={IMPORTED:0,LOCAL:1,IGNORED:2},B_e={name:"ImportSaveModal",components:{ModalWrapperChoice:Vt,PrimaryButton:yt},data(){return{input:"",offlineImport:Hu.IMPORTED}},computed:{saveCheckString(){const t=GameSaveSerializer.deserialize(this.input),e=GameStorage.checkPlayerObject(t);return e.length>300?`${e.slice(0,297)}...`:e},player(){return this.saveCheckString===""?GameSaveSerializer.deserialize(this.input):void 0},progress(){return PlayerProgress.of(this.player)},fileName(){return this.player.options.saveFileName},antimatter(){return this.player.antimatter||this.player.money},infinities(){const t=this.player.infinitied?this.player.infinitied:this.player.infinities;return new Decimal(t)},hasInput(){return this.input!==""},inputIsValid(){return this.inputIsValidSave||this.inputIsSecret},inputIsValidSave(){return this.player!==void 0},inputIsSecret(){return isSecretImport(this.input)||Theme.isSecretTheme(this.input)},isFromFuture(){return this.player.lastUpdate>Date.now()},lastOpened(){const t=Date.now()-this.player.lastUpdate;return this.isFromFuture?`This save is from ${TimeSpan.fromMilliseconds(-t).toString()} in the future.`:`This save was last opened ${TimeSpan.fromMilliseconds(t).toString()} ago.`},offlineType(){switch(this.updateOfflineSettings(),this.offlineImport){case Hu.IMPORTED:return"Using imported save settings";case Hu.LOCAL:return"Using existing save settings";case Hu.IGNORED:return"Will not simulate offline time";default:throw new Error("Unrecognized offline progress setting for importing")}},offlineDetails(){if(this.offlineImport===Hu.IGNORED)return"Save will be imported without offline progress.";if(!GameStorage.offlineEnabled)return"This setting will not apply any offline progress after importing.";if(this.isFromFuture)return"Offline progress cannot be simulated due to an inconsistent system clock time.";const t=Date.now()-this.player.lastUpdate,e=GameStorage.maxOfflineTicks(t);return`After importing, will simulate ${formatInt(e)} ticks of duration
        ${TimeSpan.fromMilliseconds(t/e).toStringShort()} each.`},willLoseCosmetics(){var i,n;const t=player.reality.glyphs.cosmetics.unlockedFromNG,e=((n=(i=this.player.reality)==null?void 0:i.glyphs.cosmetics)==null?void 0:n.unlockedFromNG)??[];return t.filter(r=>!e.includes(r)).length>0},willLoseSpeedrun(){var t;return player.speedrun.isUnlocked&&!((t=this.player.speedrun)!=null&&t.isUnlocked)}},mounted(){this.$refs.input.select()},destroyed(){GameStorage.offlineEnabled=void 0,GameStorage.offlineTicks=void 0},methods:{changeOfflineSetting(){this.offlineImport=(this.offlineImport+1)%3},updateOfflineSettings(){switch(this.offlineImport){case Hu.IMPORTED:GameStorage.offlineEnabled=this.player.options.offlineProgress??!0,GameStorage.offlineTicks=this.player.options.offlineTicks??1e5;break;case Hu.LOCAL:GameStorage.offlineEnabled=player.options.offlineProgress,GameStorage.offlineTicks=player.options.offlineTicks;break;case Hu.IGNORED:GameStorage.offlineEnabled=!1;break}},importSave(){this.inputIsValid&&(this.emitClose(),GameStorage.import(this.input))}}};var F_e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{"show-cancel":!e.inputIsValid,"show-confirm":!1},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Input your save ")]},proxy:!0}])},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"input",staticClass:"c-modal-input c-modal-import__input",attrs:{type:"text"},domProps:{value:e.input},on:{keyup:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.importSave.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)}],input:function(n){n.target.composing||(e.input=n.target.value)}}}),i("div",{staticClass:"c-modal-import__save-info"},[e.inputIsSecret?i("div",[e._v(" ??? ")]):e.inputIsValidSave?[e.fileName?i("div",[e._v(" File name: "+e._s(e.fileName)+" ")]):e._e(),i("div",[e._v("Antimatter: "+e._s(e.formatPostBreak(e.antimatter,2,1)))]),e.progress.isInfinityUnlocked?i("div",[e._v(" Infinities: "+e._s(e.formatPostBreak(e.infinities,2))+" ")]):e._e(),e.progress.isEternityUnlocked?i("div",[e._v(" Eternities: "+e._s(e.formatPostBreak(e.player.eternities,2))+" ")]):e._e(),e.progress.isRealityUnlocked?i("div",[e._v(" Realities: "+e._s(e.formatPostBreak(e.player.realities,2))+" ")]):e._e(),e.progress.hasFullCompletion?i("div",[e._v(" Full game completions: "+e._s(e.formatInt(e.player.records.fullGameCompletions))+" ")]):e._e(),i("div",{staticClass:"c-modal-import__warning"},[e._v(" (Your current save file will be overwritten!) ")]),i("br"),i("div",[e._v(" "+e._s(e.lastOpened)+" "),i("div",{staticClass:"o-primary-btn",on:{click:e.changeOfflineSetting}},[e._v(" Offline Progress: "+e._s(e.offlineType)+" ")]),i("span",{domProps:{innerHTML:e._s(e.offlineDetails)}})])]:e.hasInput?i("div",[e._v(" Not a valid save: "),i("br"),e._v(" "+e._s(e.saveCheckString)+" ")]):e._e(),e.player?i("div",{staticClass:"c-modal-hard-reset-danger"},[e.willLoseCosmetics?i("div",[i("br"),e._v(" Glyph cosmetic sets from completing the game are tied to your save. "),i("br"),e._v(" Importing this save will cause you to lose some sets. ")]):e._e(),e.willLoseSpeedrun?i("div",[i("br"),e._v(" You will lose the ability to do a Speedrun, as this save does not have it unlocked. ")]):e._e()]):e._e()],2),e.inputIsValid?i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn",on:{click:e.importSave}},[e._v(" Import ")]):e._e()],1)},$_e=[],H_e=K(B_e,F_e,$_e,!1,null,null);const V_e=H_e.exports,q_e={name:"ImportTimeStudyConstants",components:{ModalWrapperChoice:Vt},data(){return{constantNames:[],willImport:[]}},computed:{presets:()=>player.timestudy.presets.filter(t=>t.studies!==""),names(){return this.presets.map((t,e)=>`TSPreset${e+1}__${t.name.replaceAll(/[^a-zA-Z_0-9]/gu,"_")}`)}},methods:{update(){this.constantNames=[...player.reality.automator.constantSortOrder],this.updateImportStatus()},importConstants(){for(let t=0;t<this.presets.length;t++)AutomatorBackend.modifyConstant(this.names[t],this.presets[t].studies)},hasConflict(t){return this.constantNames.includes(t)},updateImportStatus(){let t=AutomatorData.MAX_ALLOWED_CONSTANT_COUNT-this.constantNames.length;this.willImport=[];for(let e=0;e<this.names.length;e++)this.hasConflict(this.names[e])?this.willImport.push(!0):t>0?(this.willImport.push(!0),t--):this.willImport.push(!1)},missedImports(){return this.willImport.countWhere(t=>!t)},shortenString(t){return t.length<55?t:`${t.substring(0,12)}...${t.substring(t.length-40,t.length)}`}}};var Y_e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.importConstants},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Importing Time Study Presets as Constants ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Import All ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Confirming this modal will import all of your saved Time Study presets as new Automator constants. Below are all the valid presets which will be imported, with the beginning and end of their contained studies shown. Some names may be changed due to restrictions on constant name formatting. "),i("br"),i("br"),e._l(e.presets.length,function(n){return i("div",{key:n,class:{"l-not-imported":!e.willImport[n-1]}},[e._v(" Name: "+e._s(e.presets[n-1].name)+" ➜ "),i("b",[e._v(e._s(e.names[n-1]))]),i("br"),e._v(" "+e._s(e.shortenString(e.presets[n-1].studies))+" "),e.hasConflict(e.names[n-1])?i("span",{staticClass:"l-warn-text"},[i("br"),e._v(" This will overwrite an existing constant! ")]):e._e(),i("br"),i("br")])}),e.missedImports()>0?i("div",{staticClass:"l-warn-text"},[e._v(" "+e._s(e.quantify("preset",e.missedImports()))+" in this list cannot be imported due to the limit on constant count. ")]):e._e()],2)])},W_e=[],j_e=K(q_e,Y_e,W_e,!1,null,"ec06ca9d");const z_e=j_e.exports,X_e={name:"InformationModalButton",props:{name:{type:String,required:!0},icon:{type:String,required:!0},link:{type:String,required:!1,default:null},showModal:{type:String,required:!1,default:null}},methods:{openAssociatedModal(){Modal[this.showModal].show()},openLink(){uB(this.link)}}};var K_e=function(){var e=this,i=e._self._c;return i("span",{staticClass:"c-socials--icon__wrapper",attrs:{"ach-tooltip":e.name}},[e.link?i("a",{staticClass:"c-socials--icon",on:{click:e.openLink}},[i("i",{class:e.icon})]):i("a",{staticClass:"c-socials--icon",on:{click:e.openAssociatedModal}},[i("i",{class:e.icon})])])},Z_e=[],Q_e=K(X_e,K_e,Z_e,!1,null,"84edbd9e");const J_e=Q_e.exports,e0e={name:"InformationModal",components:{ModalCloseButton:ay,InformationModalButton:J_e}};var t0e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-information-modal c-information-modal"},[i("ModalCloseButton",{on:{click:e.emitClose}}),e._m(0),e._m(1),i("div",{staticClass:"l-socials"},[i("InformationModalButton",{attrs:{name:"GitHub repository",icon:"fa-brands fa-github",link:"https://github.com/IvarK/AntimatterDimensionsSourceCode"}}),i("InformationModalButton",{attrs:{name:"r/AntimatterDimensions",icon:"fa-brands fa-reddit-alien",link:"https://www.reddit.com/r/AntimatterDimensions/"}}),i("InformationModalButton",{attrs:{name:"Antimatter Dimensions Discord Server",icon:"fa-brands fa-discord",link:"https://discord.gg/ST9NaXa"}}),i("InformationModalButton",{attrs:{name:"Antimatter Dimensions on Google Play",icon:"fa-brands fa-google-play",link:"https://play.google.com/store/apps/details?id=kajfosz.antimatterdimensions"}}),i("InformationModalButton",{attrs:{name:"Antimatter Dimensions on Steam",icon:"fa-brands fa-steam",link:"https://store.steampowered.com/app/1399720/Antimatter_Dimensions/"}}),i("InformationModalButton",{attrs:{name:"Credits",icon:"fa-solid fa-users","show-modal":"credits"}}),i("InformationModalButton",{attrs:{name:"Game Changelog",icon:"fa-solid fa-file-lines","show-modal":"changelog"}})],1)],1)},i0e=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"l-h2p-header"},[e("div",{staticClass:"c-h2p-title"},[t._v(" About the game ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-info-body"},[t._v(" Antimatter Dimensions is an Idle Incremental game created by Finnish developer Hevipelle. Originating as a solo project in 2016, it was expanded upon by a large team of developers and testers from then on. "),e("br"),e("br"),t._v(' The game has unfolding gameplay and multiple prestige layers. The "How to Play" button contains useful information about progressing. ')])}],n0e=K(e0e,t0e,i0e,!1,null,"5326bdda");const r0e=n0e.exports,s0e={name:"LoadGameEntry",components:{PrimaryButton:yt},props:{saveId:{type:Number,required:!0}},data(){const t=GameStorage.saves[this.saveId];return{antimatter:new Decimal(t?t.antimatter||t.money:10),fileName:t?t.options.saveFileName:""}},computed:{isSelected(){return GameStorage.currentSlot===this.saveId}},methods:{load(){GameStorage.loadSlot(this.saveId)},formatAntimatter(t){return formatPostBreak(t,2,1)},update(){this.isSelected&&this.antimatter.copyFrom(Currency.antimatter)}}};var a0e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-modal-options__save-record"},[i("h3",[e._v("Save #"+e._s(e.saveId+1)+":"),e.isSelected?i("span",[e._v(" (selected)")]):e._e()]),e.fileName?i("span",[e._v("File name: "+e._s(e.fileName))]):e._e(),i("span",[e._v("Antimatter: "+e._s(e.formatAntimatter(e.antimatter)))]),i("PrimaryButton",{staticClass:"o-primary-btn--width-medium",on:{click:e.load}},[e._v(" Load ")])],1)},o0e=[],l0e=K(s0e,a0e,o0e,!1,null,null);const c0e=l0e.exports,u0e={name:"LoadGameModal",components:{ModalWrapperOptions:hu,LoadGameEntry:c0e}};var d0e=function(){var e=this,i=e._self._c;return i("ModalWrapperOptions",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Save Selection ")]},proxy:!0}])},e._l(3,function(n){return i("LoadGameEntry",{key:n,staticClass:"c-entry-border",attrs:{"save-id":n-1}})}),1)},h0e=[],f0e=K(u0e,d0e,h0e,!1,null,"4bf55aac");const p0e=f0e.exports,m0e={name:"ModifySeedModal",components:{ModalWrapper:As,PrimaryButton:yt},data(){return{mode:0,inputSeed:"",seedText:"",convertedInput:!1,seedValue:0}},computed:{choiceEnum:()=>SPEEDRUN_SEED_STATE,officialSeed:()=>Speedrun.officialFixedSeed},created(){this.seedValue=player.speedrun.initialSeed,this.inputSeed=`${player.speedrun.initialSeed}`,this.convertedInput=!1},methods:{update(){this.mode=player.speedrun.seedSelection,this.seedText=Speedrun.seedModeText()},handleSeedInput(){if(this.inputSeed.match(/^-?\d+$/gu)){const t=Number(this.inputSeed);this.seedValue=Math.abs(t)>9e15?this.hashStringToSeed(this.inputSeed):Number(this.inputSeed)}else this.seedValue=this.hashStringToSeed(this.inputSeed);this.convertedInput=this.seedValue!==Number(this.inputSeed),this.seedValue===0?this.setMode(this.choiceEnum.FIXED):this.setMode(this.choiceEnum.PLAYER,this.seedValue)},setMode(t,e){t===this.choiceEnum.PLAYER&&this.seedValue===0||Speedrun.modifySeed(t,parseInt(e,10))},buttonClass(t){return{"o-primary-btn--subtab-option":!0,"o-selected":t===this.mode}},hashStringToSeed(t){let i=-541069005,n=1087668619;for(let r=0,s;r<t.length;r++)s=t.charCodeAt(r),i=Math.imul(i^s,2654435761),n=Math.imul(n^s,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&n)+(i>>>0)}}};var y0e=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Modifying Glyph RNG Seed ")]},proxy:!0}])},[i("div",[e._v(" All Glyph options beyond the first Reality for an entire playthrough are randomly determined from the very beginning, based on the value of an initial seed number. The role of this seed is that it chooses a single, "),i("i",[e._v("particular")]),e._v(" set of Glyph options for your playthrough. If you or anyone else chooses the same seed in a different run, you will get the same options for Glyphs. "),i("br"),i("br"),e._v(" You can switch between these three options any point before you generate your first Glyph. "),i("br"),e._v(" Current Setting: "),i("b",[e._v(e._s(e.seedText))]),i("br"),i("br"),i("PrimaryButton",{class:e.buttonClass(e.choiceEnum.FIXED),on:{click:function(n){return e.setMode(e.choiceEnum.FIXED)}}},[e._v(" Official Preset Seed ")]),i("br"),e._v(" This is the default option which chooses the seed "),i("b",[e._v(e._s(e.officialSeed))]),e._v(". Anyone who chooses to not modify the seed at all will get these Glyph options. "),i("br"),i("br"),i("PrimaryButton",{class:e.buttonClass(e.choiceEnum.RANDOM),on:{click:function(n){return e.setMode(e.choiceEnum.RANDOM)}}},[e._v(" Randomized Seed ")]),i("br"),e._v(" This selects a completely randomized seed value, producing Glyph options which are very likely to be different from anyone else's playthrough unless they intentionally choose the same value. "),i("br"),i("br"),i("PrimaryButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.seedValue===0?"Input seed cannot be zero!":"",expression:"seedValue === 0 ? 'Input seed cannot be zero!' : ''"}],class:e.buttonClass(e.choiceEnum.PLAYER),on:{click:function(n){return e.setMode(e.choiceEnum.PLAYER,e.seedValue)}}},[e._v(" Player-selected Seed: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputSeed,expression:"inputSeed"}],ref:"inputSeed",staticClass:"c-modal-input",attrs:{type:"text"},domProps:{value:e.inputSeed},on:{input:[function(n){n.target.composing||(e.inputSeed=n.target.value)},function(n){return e.handleSeedInput()}]}}),i("br"),e._v(" This option sets your seed to the value you type into the text box. "),i("br"),e.seedValue!==0?i("span",[e._v(" Your current input will be "+e._s(e.convertedInput?"converted to":"used as")+" the number "),i("b",[e._v(e._s(e.seedValue))]),e._v(". ")]):i("span",[e._v(" Your current input "+e._s(e.convertedInput?"converts to":"is equal to")+" "),i("b",[e._v("0")]),e._v("; the seed will default to Official Preset. ")]),i("br"),e._v(" For technical reasons, this value must be must be non-zero to be accepted. ")],1)])},g0e=[],v0e=K(m0e,y0e,g0e,!1,null,"38f3fe3b");const b0e=v0e.exports,_0e={name:"PelleEffectsModal",components:{PrimaryButton:yt,ModalWrapper:As},computed:{nerfs(){return["Anything unlocked through a Pelle upgrade cannot be unlocked normally","All pre-Doomed IP and EP multipliers are disabled","IP generation based on fastest infinity speed is disabled","All pre-Doomed Replicanti speed multipliers are disabled",`Replicanti slows down more drastically above ${format(Number.MAX_VALUE,2)}`,"Most Eternity Challenges are harder",`All Galaxies are only ${formatPercents(.5)} as effective`,`Antimatter Dimension multiplier is divided by ${formatInt(10)}`,"Achievement multiplier and many achievement rewards are disabled","All Infinity and Eternity multipliers and generation are disabled","Black Holes are disabled",'Reality Upgrade "Temporal Transcendence" is disabled',"All rewards which increase your starting resources except Achievement 21 are disabled","All rewards which prevent resources from being reset are disabled","Perk rewards which reduce unlock costs have been disabled, excluding the ECR group","Automatic Infinity and Eternity Challenges are disabled","All Dimension and pre-Infinity Autobuyers are disabled until reacquired through Pelle","The Time Theorem Autobuyer is disabled","All Automation related to Time Dilation or later is disabled","Eternity Upgrade to Time Dimensions based on days played is based on this Armageddon time",`All pre-Doomed Dilated Time multipliers are disabled except the ${formatX(2)} buyable`,"All Tachyon Particle multipliers are disabled","All pre-Doomed Time Theorem generation effects are disabled except the Dilation upgrade","Glyph equipping is disabled until reacquired",`Glyph levels are lowered and rarity is set to ${formatPercents(0)}`,"Effects from Glyph Sacrifice, Alteration, and Alchemy are all disabled","You cannot enter any other Celestial Realities","Music Glyphs cannot be bought","All rewards from Effarig are disabled","All features related to storing time are disabled","All rewards from V are disabled",`The Teresa Level ${formatInt(1)} effect from Ra is disabled`,"Infinity Upgrades cannot be charged","Triad Studies and Space Theorems are disabled","Imaginary Upgrades are disabled excluding those relating to DMD's and Celestial unlocks","Continuum and Singularity rewards are disabled"]}}};var E0e=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" List of disabled and nerfed effects in Doomed ")]},proxy:!0}])},[i("div",{staticClass:"pelle-effects-container"},e._l(e.nerfs,function(n,r){return i("p",{key:r},[e._v(" "+e._s(n)+" ")])}),0),i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-message__okay-btn c-modal__confirm-btn",on:{click:e.emitClose}},[e._v(" Okay ")])],1)},T0e=[],w0e=K(_0e,E0e,T0e,!1,null,"f8109ebf");const C0e=w0e.exports,S0e={name:"RealityGlyphCreationModal",components:{ModalWrapper:As,PrimaryButton:yt},data(){return{isDoomed:!1,realityGlyphLevel:0,possibleEffects:[]}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.realityGlyphLevel=AlchemyResource.reality.effectValue;const t=GlyphEffects.all.filter(i=>i.glyphTypes.includes("reality")).sort((i,n)=>i.bitmaskIndex-n.bitmaskIndex),e=t.map(i=>i.bitmaskIndex).min();this.possibleEffects=t.map(i=>[realityGlyphEffectLevelThresholds[i.bitmaskIndex-e],i.id])},createRealityGlyph(){if(GameCache.glyphInventorySpace.value===0){Modal.message.show("No available inventory space; Sacrifice some Glyphs to free up space.",{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}Glyphs.addToInventory(GlyphGenerator.realityGlyph(this.realityGlyphLevel)),AlchemyResource.reality.amount=0,player.reality.glyphs.createdRealityGlyph=!0,this.emitClose()},formatGlyphEffect(t){if(this.realityGlyphLevel<t[0])return`(Requires Glyph level ${formatInt(t[0])})`;const e=GlyphEffects[t[1]],i=e.effect(this.realityGlyphLevel,rarityToStrength(100));return e.singleDesc.replace("{value}",e.formatEffect(i))}}};var k0e=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Reality Glyph Creation ")]},proxy:!0}])},[i("div",{staticClass:"c-reality-glyph-creation"},[i("div",[e._v(" Create a level "+e._s(e.formatInt(e.realityGlyphLevel))+" Reality Glyph. Rarity will always be "+e._s(e.formatPercents(1))+" and level scales on your current Reality Resource amount (which is all consumed). All other Alchemy Resources will be unaffected. Reality Glyphs have unique effects, some of which are only available with higher level Glyphs. Reality Glyphs can also be sacrificed to increase all Memory Chunk gain. Like Effarig Glyphs, you cannot equip more than one at the same time. ")]),i("div",{staticClass:"o-available-effects-container"},[i("div",{staticClass:"o-available-effects"},[e._v(" Available Effects: ")]),e._l(e.possibleEffects,function(n,r){return i("div",{key:r},[e._v(" "+e._s(e.formatGlyphEffect(n))+" ")])})],2),e.isDoomed?i("PrimaryButton",{attrs:{enabled:!1}},[e._v(" You cannot create Reality Glyphs while Doomed ")]):e.realityGlyphLevel!==0?i("PrimaryButton",{on:{click:e.createRealityGlyph}},[e._v(" Create a Reality Glyph! ")]):i("PrimaryButton",{attrs:{enabled:!1}},[e._v(" Reality Glyph level must be higher than "+e._s(e.formatInt(0))+" ")])],1)])},A0e=[],R0e=K(S0e,k0e,A0e,!1,null,"e98a9ddd");const I0e=R0e.exports,D0e={name:"ReplaceGlyphModal",components:{ModalWrapperChoice:Vt},props:{targetSlot:{type:Number,required:!0},inventoryIndex:{type:Number,required:!0}},data(){return{target:0,idx:0,isDoomed:!1}},computed:{resetTerm(){return this.isDoomed?"Armageddon":"Reality"}},methods:{update(){this.target=this.targetSlot,this.idx=this.inventoryIndex,this.glyph=Glyphs.findByInventoryIndex(this.idx),this.isDoomed=Pelle.isDoomed},handleYesClick(){Glyphs.swapIntoActive(this.glyph,this.targetSlot)}}};var x0e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"glyphReplace"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to replace a Glyph ")]},proxy:!0}])},[e._v(" Replacing a Glyph will restart this "+e._s(e.resetTerm)+". ")])},M0e=[],P0e=K(D0e,x0e,M0e,!1,null,null);const O0e=P0e.exports,RT=""+new URL("../images/std_coin.png",import.meta.url).href,N0e={name:"RespecIAPModal",components:{ModalWrapperChoice:Vt},methods:{returnedSTDCount(){let t=0;for(const e of ShopPurchase.all)e.config.instantPurchase||(t+=e.purchases*e.cost);return t},handleYesClick(){ShopPurchaseData.respecAll(),EventHub.ui.offAll(this)}}};var G0e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"respecIAP"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to respec your Shop Purchases ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Are you sure you want to respec your Shop Purchases? This will not cost anything and return the "+e._s(e.returnedSTDCount())+" "),i("img",{staticClass:"o-shop-button-button__img",attrs:{src:RT}}),e._v(" you spent on all purchases which give permanent multipliers. "),i("br"),i("br"),e._v(" Anything spent on offline progress and Glyph cosmetics will not be refunded. Glyph cosmetic sets are permanent and will not be lost or respeced once purchased. "),i("br"),i("br"),i("b",{staticClass:"o-warning"},[e._v("You will not be able to respec again unless you purchase more STD coins.")])])])},U0e=[],L0e=K(N0e,G0e,U0e,!1,null,"b15cbf59");const B0e=L0e.exports,F0e={name:"SacrificeModal",components:{ModalWrapperChoice:Vt},data(){return{currentMultiplier:new Decimal,nextMultiplier:new Decimal}},computed:{message(){return Achievement(118).isUnlocked&&!Pelle.isDoomed?`Dimensional Sacrifice will give you a boost to the 8th Antimatter Dimension based on the amount of
          1st Antimatter Dimensions you had at the time of Sacrificing.`:`Dimensional Sacrifice will remove all of your 1st through 7th Antimatter Dimensions
        (with the cost and multiplier unchanged), for a boost to the 8th Antimatter Dimension based on the total
        amount of 1st Antimatter Dimensions sacrificed. It will take time to regain production.`},multiplierText(){return`Multiplier is currently ${formatX(this.currentMultiplier,2,2)} and will increase to
        ${formatX(this.nextMultiplier,2,2)} on Dimensional Sacrifice.`}},methods:{update(){this.currentMultiplier.copyFrom(Sacrifice.totalBoost),this.nextMultiplier.copyFrom(Sacrifice.nextBoost.times(Sacrifice.totalBoost))},handleYesClick(){sacrificeReset()}}};var $0e=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"sacrifice"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Dimensional Sacrifice ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.message)+" ")]),i("br"),i("div",{staticClass:"c-modal-message__text"},[e._v(" "+e._s(e.multiplierText)+" "),i("br")])])},H0e=[],V0e=K(F0e,$0e,H0e,!1,null,null);const q0e=V0e.exports,Y0e={name:"SingularityMilestoneComponent",props:{milestone:{type:Object,required:!0},suppressGlow:{type:Boolean,default:!1}},data:()=>({isMaxed:!1,progressToNext:"",remainingSingularities:0,description:"",effectDisplay:"",isUnique:!1,nextEffectDisplay:"",start:0,completions:0,limit:0,milestoneMode:!1,singularitiesPerCondense:0,baseCondenseTime:0,currentCondenseTime:0,autoCondenseDelay:0,lastCheckedMilestones:0,autoSingActive:!1}),computed:{barStyle(){return{width:this.isMaxed?void 0:this.progressToNext}},barClass(){return{"c-laitela-milestone__progress":!0,"c-laitela-milestone-mask":!0,"c-laitela-milestone--completed":this.isMaxed}},containerClass(){return{"c-laitela-milestone":!0,"o-laitela-milestone--glow":!this.suppressGlow&&this.milestone.previousGoal>this.lastCheckedMilestones}},upgradeDirectionIcon(){switch(this.milestone.config.upgradeDirection){case Ci.SELF_BOOST:return"<b>ᛝ</b>";case Ci.BOOSTS_MAIN:return'<i class="fas fa-arrows-alt"></i>';case Ci.BOOSTS_LAITELA:return'<i class="fas fa-compress-arrows-alt"></i>';default:throw new Error("Unspecified Lai'tela upgrade direction in singularity milestone")}},maxCompletions(){return this.isUnique?1:this.limit},completionsDisplay(){const t=Number.isFinite(this.limit)?formatInt(this.maxCompletions):"∞";return`${formatInt(this.completions)}/${t} ${pluralize("completion",this.completions)}`},progressDisplay(){const t=this.remainingSingularities/this.singularitiesPerCondense;let e,i,n;switch(this.milestoneMode){case SINGULARITY_MILESTONE_RESOURCE.SINGULARITIES:return`In ${quantify("Singularity",this.remainingSingularities,2)}`;case SINGULARITY_MILESTONE_RESOURCE.CONDENSE_COUNT:return`Condense ${quantify("time",t,2,2)}`;case SINGULARITY_MILESTONE_RESOURCE.MANUAL_TIME:return e=Math.clampMin(0,this.currentCondenseTime),i=Math.ceil(t-1)*this.baseCondenseTime,`In ${TimeSpan.fromSeconds(e+i).toStringShort()} (manual)`;case SINGULARITY_MILESTONE_RESOURCE.AUTO_TIME:return e=Math.clampMin(0,this.currentCondenseTime+this.autoCondenseDelay),i=Math.ceil(t-1)*(this.baseCondenseTime+this.autoCondenseDelay),n=`In ${TimeSpan.fromSeconds(e+i).toStringShort()}`,this.autoSingActive?n:"Auto-Singularity is OFF";default:throw new Error("Unrecognized Singularity Milestone mode")}},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.autoSingActive=player.auto.singularity.isActive,this.isMaxed=this.milestone.isMaxed,this.progressToNext=this.milestone.progressToNext,this.remainingSingularities=this.milestone.remainingSingularities,this.description=this.milestone.description,this.effectDisplay=this.milestone.effectDisplay,this.isUnique=this.milestone.isUnique,!this.isUnique&&!this.isMaxed&&(this.nextEffectDisplay=this.milestone.nextEffectDisplay),this.completions=this.milestone.completions,this.limit=this.milestone.limit,this.milestoneMode=player.celestials.laitela.singularitySorting.displayResource,this.singularitiesPerCondense=Singularity.singularitiesGained,this.baseCondenseTime=Singularity.timePerCondense,this.currentCondenseTime=Singularity.timeUntilCap,this.autoCondenseDelay=Singularity.timeDelayFromAuto,this.lastCheckedMilestones=player.celestials.laitela.lastCheckedMilestones,this.isMetro=Theme.current().isMetro}}};var W0e=function(){var e=this,i=e._self._c;return i("div",{class:e.containerClass},[!e.isMetro&&!e.isMaxed?i("div",{staticClass:"c-laitela-milestone--bar-border-fix"}):e._e(),i("div",{class:e.barClass,style:e.barStyle}),i("span",{class:{"o-pelle-disabled":e.isDoomed}},[e.isMaxed?e._e():i("b",[e._v(" "+e._s(e.progressDisplay)+" ")]),i("p",[i("span",{domProps:{innerHTML:e._s(e.upgradeDirectionIcon)}}),e._v(" "+e._s(e.description)+" ")]),i("b",[e._v(" "+e._s(e.effectDisplay)+" "),!e.isUnique&&!e.isMaxed?i("span",[e._v("➜ "+e._s(e.nextEffectDisplay))]):e._e()]),i("div",{staticClass:"c-laitela-milestone__completions"},[e._v(" "+e._s(e.completionsDisplay)+" ")])])])},j0e=[],z0e=K(Y0e,W0e,j0e,!1,null,"f7732931");const G3=z0e.exports,X0e={name:"SingularityMilestonesModal",components:{SingularityMilestoneComponent:G3,ModalWrapper:As},data(){return{milestones:[],resourceVal:0,sortVal:0,completedVal:0,orderVal:0,milestoneGlow:!1}},computed:{resourceStr(){return["Singularity Count","Condense Count","Manual Time","Auto Time"][this.resourceVal]},sortStr(){return["Singularities needed","Current Completions","Progress to full completion","Final Singularities","Most Recent"][this.sortVal]},completedStr(){return["First","Last","Don't move"][this.completedVal]},orderStr(){return["Ascending","Descending"][this.orderVal]}},watch:{resourceVal(t){player.celestials.laitela.singularitySorting.displayResource=t},sortVal(t){player.celestials.laitela.singularitySorting.sortResource=t},completedVal(t){player.celestials.laitela.singularitySorting.showCompleted=t},orderVal(t){player.celestials.laitela.singularitySorting.sortOrder=t},milestoneGlow(t){player.celestials.laitela.milestoneGlow=t}},beforeDestroy(){player.celestials.laitela.lastCheckedMilestones=Currency.singularities.value},methods:{update(){this.milestones=SingularityMilestones.sortedForCompletions(!0);const t=player.celestials.laitela.singularitySorting;this.resourceVal=t.displayResource,this.sortVal=t.sortResource,this.completedVal=t.showCompleted,this.orderVal=t.sortOrder,this.milestoneGlow=player.celestials.laitela.milestoneGlow},cycleButton(t){const e=player.celestials.laitela.singularitySorting;let i;switch(t){case 0:i=Object.keys(SINGULARITY_MILESTONE_RESOURCE).length,e.displayResource=(e.displayResource+1)%i;break;case 1:i=Object.keys(SINGULARITY_MILESTONE_SORT).length,e.sortResource=(e.sortResource+1)%i;break;case 2:i=Object.keys(COMPLETED_MILESTONES).length,e.showCompleted=(e.showCompleted+1)%i;break;case 3:i=Object.keys(SORT_ORDER).length,e.sortOrder=(e.sortOrder+1)%i;break;default:throw new Error("Unrecognized Singularity milestone sorting button")}},glowOptionClass(){return{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":this.milestoneGlow}},toggleGlow(){this.milestoneGlow=!this.milestoneGlow}}};var K0e=function(){var e=this,i=e._self._c;return i("ModalWrapper",{scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Singularity Milestones ")]},proxy:!0}])},[i("div",{staticClass:"c-modal__confirmation-toggle",on:{click:e.toggleGlow}},[i("div",{class:e.glowOptionClass()},[e.milestoneGlow?i("span",{staticClass:"fas fa-check"}):e._e()]),i("span",{staticClass:"c-modal__confirmation-toggle__text"},[e._v(" Make button glow when new milestones have been reached ")])]),i("div",{staticClass:"l-singularity-milestone-modal-container-outer"},[i("div",{staticClass:"l-singularity-milestone-modal-container-inner"},e._l(e.milestones,function(n){return i("SingularityMilestoneComponent",{key:n.id,attrs:{milestone:n}})}),1)]),i("div",{staticClass:"l-singularity-milestone-sort-container"},[i("button",{staticClass:"c-singularity-milestone-modal-sort-button",on:{click:function(n){return e.cycleButton(0)}}},[e._v(" To Milestone: "),i("br"),e._v(" "+e._s(e.resourceStr)+" ")]),i("button",{staticClass:"c-singularity-milestone-modal-sort-button",on:{click:function(n){return e.cycleButton(1)}}},[e._v(" Sort by: "),i("br"),e._v(" "+e._s(e.sortStr)+" ")]),i("button",{staticClass:"c-singularity-milestone-modal-sort-button",on:{click:function(n){return e.cycleButton(2)}}},[e._v(" Completed Milestones: "),i("br"),e._v(" "+e._s(e.completedStr)+" ")]),i("button",{staticClass:"c-singularity-milestone-modal-sort-button",on:{click:function(n){return e.cycleButton(3)}}},[e._v(" Sort Order: "),i("br"),e._v(" "+e._s(e.orderStr)+" ")])])])},Z0e=[],Q0e=K(X0e,K0e,Z0e,!1,null,null);const J0e=Q0e.exports,eEe={name:"SpeedrunModeModal",components:{PrimaryButton:yt,ModalWrapperChoice:Vt},data(){return{onInfoPage:!0,name:"",confirmPhrase:""}},computed:{willStartRun(){return this.confirmPhrase==="Gotta Go Fast!"}},methods:{nextPage(){this.onInfoPage=!1},startRun(){this.willStartRun&&(this.emitClose(),Speedrun.prepareSave(Speedrun.generateName(this.name)))}}};var tEe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{"show-cancel":!e.onInfoPage&&!e.willStartRun,"show-confirm":!e.onInfoPage&&e.willStartRun,"confirm-class":"o-primary-btn--width-medium c-modal-hard-reset-btn c-modal__confirm-btn"},on:{confirm:e.startRun},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Entering Speedrun Mode ")]},proxy:!0},{key:"confirm",fn:function(){return[e._v(" Start Run! ")]},proxy:!0},{key:"cancel",fn:function(){return[e._v(" Cancel ")]},proxy:!0}])},[e.onInfoPage?i("div",{staticClass:"c-modal-message__text"},[e._v(" This will start a save with additional statistics tracking for when you reach certain points of the game. These will be visible in the bottom-right of the screen and on a dedicated subtab of Statistics. "),i("br"),i("br"),e._v(" Almost all animations and confirmations are disabled by default, but you can change any of these settings before you reach their required progression. When you begin the run, the game remains paused until your antimatter changes, allowing you to configure all your settings before starting. In order to avoid having to wait for a long time before actually starting an optimized run, a few achievements are given for free. "),i("br"),i("br"),i("i",[e._v(" There is no additional content in Speedrun Mode. ")]),i("br"),i("br"),i("PrimaryButton",{staticClass:"o-primary-btn--width-medium c-modal-hard-reset-btn c-modal__confirm-btn",on:{click:e.nextPage}},[e._v(" Continue ")])],1):i("div",{staticClass:"c-modal-message__text"},[e._v(" You can type in text below to name your speedrun save. This will have no effects on gameplay and only identifies this particular save as yours. If no name is given, a random name will be generated instead. This name can be changed by clicking your name in the speedrun info box, as long as the timer has not started yet. "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],ref:"name",staticClass:"c-modal-input c-modal-hard-reset__input",attrs:{type:"text"},domProps:{value:e.name},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)},input:function(n){n.target.composing||(e.name=n.target.value)}}}),i("br"),i("br"),e._v(" Speedrun saves can be imported and exported like regular saves. Importing a speedrun save will mark it as a Segmented run, as importing and exporting allows for optimization of individual segments of the game. Without importing, saves will remain as Single-segment runs. "),i("br"),i("br"),e._v(" You can modify the Glyph RNG seed in the Options tab before starting your run, if desired. "),i("br"),i("br"),i("div",{staticClass:"c-modal-hard-reset-danger"},[e._v(' Starting a speedrun will reset your save to the beginning of the game. Some things will remain, such as full-game completion stats, visual settings, automator scripts, and Glyph cosmetics, but otherwise it will be as if you had just finished the entire game and chose to restart at the credits screen. Type in "Gotta Go Fast!" below to confirm and (re)start the run. ')]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPhrase,expression:"confirmPhrase"}],ref:"confirmPhrase",staticClass:"c-modal-input c-modal-hard-reset__input",attrs:{type:"text"},domProps:{value:e.confirmPhrase},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)},input:function(n){n.target.composing||(e.confirmPhrase=n.target.value)}}})])])},iEe=[],nEe=K(eEe,tEe,iEe,!1,null,null);const rEe=nEe.exports,zn={interval:null,windowReference:null,hasCanceled:!1,init:()=>{player.IAP.checkoutSession.id&&zn.pollForPurchases()},buyMoreSTD:async t=>{player.IAP.checkoutSession={id:!0};let e;try{e=await fetch(`${STD_BACKEND_URL}/purchase`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,cloudID:Cloud.user.id})})}catch{GameUI.notify.error("Could not contact payment server!",1e4);return}const i=await e.json();zn.windowReference=window.open(i.url,"antimatterDimensionsPurchase","popup,width=500,height=500,left=100,top=100"),player.IAP.checkoutSession={id:i.id,amount:t},GameStorage.save(),zn.pollForPurchases()},pollForPurchases:()=>{const{id:t,amount:e}=player.IAP.checkoutSession;let i=0;window.onbeforeunload=async()=>{var n;zn.interval&&((n=zn.windowReference)==null||n.close(),await zn.cancelPurchase(!1))},zn.interval=setInterval(async()=>{var a,o,c;i++;let n;try{n=await fetch(`${STD_BACKEND_URL}/validate?sessionId=${t}`)}catch{GameUI.notify.error("Could not contact payment server!",1e4),zn.clearInterval();return}const{completed:r,failure:s}=await n.json();if(r&&((a=zn.windowReference)==null||a.close(),await ShopPurchaseData.syncSTD(),GameUI.notify.success(`Purchase of ${e} STDs was successful, thank you for your support! ❤️`,1e4),zn.clearInterval(),player.IAP.checkoutSession={id:!1},GameStorage.save(),Modal.hide()),s){(o=zn.windowReference)==null||o.close(),zn.clearInterval(),GameUI.notify.error("Purchase failed!",1e4),player.IAP.checkoutSession={id:!1},GameStorage.save();return}!r&&((c=zn.windowReference)!=null&&c.closed||i>=20*30)&&await zn.cancelPurchase(!0)},3e3)},async buyUpgrade(t,e){if(!Cloud.loggedIn)return!1;let i;try{i=await fetch(`${STD_BACKEND_URL}/upgrade`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Cloud.user.id,upgrade:t,extraData:{requestedSet:e,fullCompletions:player.records.fullGameCompletions}})})}catch{return GameUI.notify.error("Unable to spend STD coins on upgrade!",1e4),!1}const n=await i.json();return n.success?GameUI.notify.info(`Successfully spent ${n.amountSpent} STD coins`,1e4):GameUI.notify.error(n.error??"Unable to purchase upgrade",1e4),ShopPurchaseData.syncSTD(!1,n.data),n.success},async cancelPurchase(t){var e;if(!this.hasCanceled){(e=zn.windowReference)==null||e.close(),zn.clearInterval();try{await fetch(`${STD_BACKEND_URL}/expire`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:player.IAP.checkoutSession.id})})}catch{GameUI.notify.error("Could not contact payment server!",1e4)}t&&GameUI.notify.error("Purchase took too long to resolve!",1e4),player.IAP.checkoutSession={id:!1},GameStorage.save(),this.hasCanceled=!1}},clearInterval(){clearInterval(zn.interval),window.onbeforeunload=null}},sEe={name:"StdStoreRow",props:{amount:{type:Number,required:!0},cost:{type:Number,required:!0}},methods:{purchase(){zn.buyMoreSTD(this.amount,this.cost)}}};var aEe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-modal-store-btn-container"},[i("div",{staticClass:"o-modal-store-label"},[e._v(" "+e._s(e.amount)+" STDs ")]),i("button",{staticClass:"o-modal-store-btn",on:{click:e.purchase}},[e._v(" $"),i("span",[e._v(e._s(e.cost))])])])},oEe=[],lEe=K(sEe,aEe,oEe,!1,null,null);const cEe=lEe.exports,uEe={name:"StdStoreModal",components:{ModalWrapper:As,StdStoreRow:cEe},data(){return{macPurchaser:!1}},methods:{update(){this.macPurchaser=gf.hasPendingPurchaseConfirmations},macConfirm(){gf.validatePurchases()}}};var dEe=function(){var e=this,i=e._self._c;return i("ModalWrapper",{staticClass:"c-shop-modal",scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Support The Developer - coins ")]},proxy:!0}])},[e.macPurchaser?i("span",[i("button",{staticClass:"o-shop-button-button",on:{click:function(n){return e.macConfirm()}}},[e._v("Confirm Purchase to Receive STDs")]),i("br"),i("span",[e._v("(Required on Mac)")]),i("br")]):e._e(),i("div",{staticClass:"l-modal-store-content"},[i("img",{attrs:{src:RT}}),i("div",{staticClass:"c-modal-store-buttons"},[i("StdStoreRow",{attrs:{amount:30,cost:2.99}}),i("StdStoreRow",{attrs:{amount:60,cost:4.99}}),i("StdStoreRow",{attrs:{amount:140,cost:9.99}}),i("StdStoreRow",{attrs:{amount:300,cost:19.99}}),i("StdStoreRow",{attrs:{amount:1e3,cost:49.99}})],1)])])},hEe=[],fEe=K(uEe,dEe,hEe,!1,null,null);const pEe=fEe.exports,mEe={name:"StudyStringLine",props:{tree:{type:Object,required:!0},intoEmpty:{type:Boolean,required:!0}},computed:{importDestString(){return this.intoEmpty?"into an empty Tree":"with your current Tree"}},methods:{formatTheoremCost(t,e){const i=`${formatWithCommas(t)} TT`,n=`${formatWithCommas(e)} ST`;return e===0?i:`${i} + ${n}`}}};var yEe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-modal-import-tree__tree-info-line"},[e.tree.timeTheorems===0&&e.tree.spaceTheorems===0?i("div",[i("i",[e._v("Importing this "+e._s(e.importDestString)+" will not purchase any new Time Studies.")])]):i("div",[e._v(" Importing "+e._s(e.importDestString)+" will purchase: "),i("br"),e._v(" "+e._s(e.tree.newStudies)+" (Cost: "+e._s(e.formatTheoremCost(e.tree.timeTheorems,e.tree.spaceTheorems))+") ")]),i("br")])},gEe=[],vEe=K(mEe,yEe,gEe,!1,null,null);const bEe=vEe.exports,_Ee={name:"PseudoTimeStudyButton",props:{setup:{type:Object,required:!0},forceIsBought:{type:Number,default:1},isNewFromImport:{type:Boolean,default:!1}},data(){return{isUseless:!1,doomedRealityStudy:!1,isBought:!1}},computed:{study(){return this.setup.study},styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"o-pseudo-time-study":!0,"l-time-study":!0,"c-pelle-useless":this.isUseless,"c-pelle-useless--bought":this.isUseless&&this.isBought,"c-pelle-useless--unavailable":this.isUseless&&!this.isBought,"o-pseudo-time-study--small":this.setup.isSmall,"o-time-study--unavailable":!this.isBought&&!this.isUseless,"o-time-study--bought":this.isBought&&!this.isUseless,"o-time-study--new-import":this.isNewFromImport&&!this.isBought}},pathClass(){switch(this.study.type){case TIME_STUDY_TYPE.NORMAL:switch(this.setup.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return"o-time-study-antimatter-dim";case TIME_STUDY_PATH.INFINITY_DIM:return"o-time-study-infinity-dim";case TIME_STUDY_PATH.TIME_DIM:return"o-time-study-time-dim";case TIME_STUDY_PATH.ACTIVE:return"o-time-study-active";case TIME_STUDY_PATH.PASSIVE:return"o-time-study-passive";case TIME_STUDY_PATH.IDLE:return"o-time-study-idle";case TIME_STUDY_PATH.LIGHT:return"o-time-study-light";case TIME_STUDY_PATH.DARK:return"o-time-study-dark";default:return"o-time-study-normal"}case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return"o-time-study-eternity-challenge";case TIME_STUDY_TYPE.DILATION:return this.study.id===6?"o-time-study-reality":"o-time-study-dilation";case TIME_STUDY_TYPE.TRIAD:return"o-time-study-triad"}return""},studyClass(){return this.isUseless?"":`${this.pathClass}--${this.isBought?"bought":"unavailable"}`},studyString(){switch(this.study.type){case TIME_STUDY_TYPE.NORMAL:case TIME_STUDY_TYPE.TRIAD:return`${this.study.id}`;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return`EC${this.study.id}`}return""}},methods:{update(){const t=this.study;this.isUseless=Pelle.uselessTimeStudies.includes(this.study.id)&&Pelle.isDoomed,this.isBought=ed.getState(this.forceIsBought,t.isBought),this.doomedRealityStudy=t.type===TIME_STUDY_TYPE.DILATION&&t.id===6&&Pelle.isDoomed}}};var EEe=function(){var e=this,i=e._self._c;return i("button",{class:[e.classObject,e.studyClass],style:e.styleObject},[e._v(" "+e._s(e.studyString)+" ")])},TEe=[],wEe=K(_Ee,EEe,TEe,!1,null,"1c6b8fd0");const CEe=wEe.exports,SEe={name:"PseudoTimeStudyConnection",props:{setup:{type:Object,required:!0},forceIsBought:{type:Number,default:1}},data(){return{isOverridden:!1,isBought:!1}},computed:{classObject(){const t={"o-time-study-connection":!0,"o-time-study-connection--bought":this.isBought};let e;const i=this.setup.connection,n=i.from,r=i.to;function s(a){switch(a.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return"o-time-study-connection--antimatter-dim";case TIME_STUDY_PATH.INFINITY_DIM:return"o-time-study-connection--infinity-dim";case TIME_STUDY_PATH.TIME_DIM:return"o-time-study-connection--time-dim";case TIME_STUDY_PATH.ACTIVE:return"o-time-study-connection--active";case TIME_STUDY_PATH.PASSIVE:return"o-time-study-connection--passive";case TIME_STUDY_PATH.IDLE:return"o-time-study-connection--idle";default:return}}switch(r.type){case TIME_STUDY_TYPE.NORMAL:e=s(r)||s(n);break;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:e="o-time-study-connection--eternity-challenge";break;case TIME_STUDY_TYPE.DILATION:e="o-time-study-connection--dilation";break}return e!==void 0&&(t[e]=!0),t}},methods:{update(){this.isOverridden=this.setup.connection.isOverridden,this.isBought=ed.getState(this.forceIsBought,this.setup.isBought)},percents(t){return`${t*100}%`}}};var kEe=function(){var e=this,i=e._self._c;return e.isOverridden?e._e():i("line",{class:e.classObject,attrs:{x1:e.percents(e.setup.x1),y1:e.percents(e.setup.y1),x2:e.percents(e.setup.x2),y2:e.percents(e.setup.y2)}})},AEe=[],REe=K(SEe,kEe,AEe,!1,null,"bb903c76");const IEe=REe.exports,DEe={name:"TimeStudyConnection",props:{setup:{type:Object,required:!0}},data(){return{isOverridden:!1,isBought:!1}},computed:{classObject(){const t={"o-time-study-connection":!0,"o-time-study-connection--bought":this.isBought};let e;const i=this.setup.connection,n=i.from,r=i.to;function s(a){switch(a.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return"o-time-study-connection--antimatter-dim";case TIME_STUDY_PATH.INFINITY_DIM:return"o-time-study-connection--infinity-dim";case TIME_STUDY_PATH.TIME_DIM:return"o-time-study-connection--time-dim";case TIME_STUDY_PATH.ACTIVE:return"o-time-study-connection--active";case TIME_STUDY_PATH.PASSIVE:return"o-time-study-connection--passive";case TIME_STUDY_PATH.IDLE:return"o-time-study-connection--idle";default:return}}switch(r.type){case TIME_STUDY_TYPE.NORMAL:e=s(r)||s(n);break;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:e="o-time-study-connection--eternity-challenge";break;case TIME_STUDY_TYPE.DILATION:e="o-time-study-connection--dilation";break}return e!==void 0&&(t[e]=!0),t}},methods:{update(){this.isOverridden=this.setup.connection.isOverridden,this.isBought=this.setup.isBought},percents(t){return`${t*100}%`}}};class Kw{constructor(e){this.connection=e}get from(){return this.connection.from}get to(){return this.connection.to}setPosition(e,i,n){const r=e.find(a=>a.study===this.from),s=e.find(a=>a.study===this.to);this.x1=(r.left+r.width/2)/i,this.y1=(r.top+r.height/2)/n,this.x2=(s.left+s.width/2)/i,this.y2=(s.top+s.height/2)/n}get isBought(){return this.from.isBought&&this.to.isBought}}var xEe=function(){var e=this,i=e._self._c;return e.isOverridden?e._e():i("line",{class:e.classObject,attrs:{x1:e.percents(e.setup.x1),y1:e.percents(e.setup.y1),x2:e.percents(e.setup.x2),y2:e.percents(e.setup.y2)}})},MEe=[],PEe=K(DEe,xEe,MEe,!1,null,"bda72c86");const OEe=PEe.exports,NEe={name:"CostDisplay",props:{config:{type:Object,required:!1,default:void 0},br:{type:Boolean,required:!1},name:{type:String,required:!0},label:{type:String,default:"Cost:",required:!1}},data(){return{isVisible:!1,cost:0}},watch:{config:{immediate:!0,handler(t){this.updateFunction=()=>{};const e=t==null?void 0:t.cost;if(this.isVisible=e!==void 0,!this.isVisible)return;if(this.formatCost=t.formatCost??format,qp(e)){this.cost=e;return}if(nm(e)){this.cost=Decimal.fromDecimal(e);return}if(!z0(e))throw new Error(`CostDisplay config.cost has unsupported type "${typeof e}"`);const i=e();if(qp(i)){this.cost=i,this.updateFunction=()=>this.cost=e();return}if(nm(i)){this.cost=Decimal.fromDecimal(i),this.updateFunction=()=>this.cost.copyFrom(e());return}throw new Error(`CostDisplay config.cost is a function which returns unsupported type "${typeof i}"`)}}},beforeCreate(){this.updateFunction=()=>{}},methods:{update(){this.updateFunction()},quantify}};var GEe=function(){var e=this,i=e._self._c;return e.isVisible?i("span",[e.br?i("br"):e._e(),e._v(" "+e._s(e.label)+" "+e._s(e.quantify(e.name,e.cost,0,0,e.formatCost))+" ")]):e._e()},UEe=[],LEe=K(NEe,GEe,UEe,!1,null,null);const mc=LEe.exports,BEe={name:"TimeStudyButton",components:{CostDisplay:mc},props:{setup:{type:Object,required:!0},showCost:{type:Boolean,required:!1,default:!0},showStCost:{type:Boolean,required:!1,default:!1},specialClick:{type:Function,required:!1,default:null}},data(){return{isUseless:!1,isBought:!1,isAvailableForPurchase:!1,STCost:0,eternityChallengeRunning:!1,isCompleteEC:!1}},computed:{study(){return this.setup.study},styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"o-time-study":!this.isUseless,"l-time-study":!0,"c-pelle-useless":this.isUseless,"c-pelle-useless--bought":this.isUseless&&this.isBought,"c-pelle-useless--unavailable":this.isUseless&&!this.isAvailableForPurchase&&!this.isBought,"c-pelle-useless-available":this.isUseless&&!this.isAvailableForPurchase&&!this.isBought,"o-time-study--small":this.setup.isSmall,"o-time-study--unavailable":!this.isAvailableForPurchase&&!this.isBought&&!this.isUseless,"o-time-study--available":this.isAvailableForPurchase&&!this.isBought,"o-time-study--bought":this.isBought&&!this.isUseless}},pathClass(){switch(this.study.type){case TIME_STUDY_TYPE.NORMAL:switch(this.setup.path){case TIME_STUDY_PATH.ANTIMATTER_DIM:return"o-time-study-antimatter-dim";case TIME_STUDY_PATH.INFINITY_DIM:return"o-time-study-infinity-dim";case TIME_STUDY_PATH.TIME_DIM:return"o-time-study-time-dim";case TIME_STUDY_PATH.ACTIVE:return"o-time-study-active";case TIME_STUDY_PATH.PASSIVE:return"o-time-study-passive";case TIME_STUDY_PATH.IDLE:return"o-time-study-idle";case TIME_STUDY_PATH.LIGHT:return"o-time-study-light";case TIME_STUDY_PATH.DARK:return"o-time-study-dark";default:return"o-time-study-normal"}case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return"o-time-study-eternity-challenge";case TIME_STUDY_TYPE.DILATION:return this.study.id===6?"o-time-study-reality":"o-time-study-dilation";case TIME_STUDY_TYPE.TRIAD:return"o-time-study-triad"}return""},studyClass(){if(this.isUseless)return"";let t="";return!this.isAvailableForPurchase&&!this.isBought&&(t+=`${this.pathClass}--unavailable`),this.isAvailableForPurchase&&!this.isBought&&(t+=`${this.pathClass}--available`),this.isBought&&(t+=`${this.pathClass}--bought`),this.isCompleteEC&&(t+=` ${this.pathClass}--complete`),t},eternityChallengeAnim(){return this.eternityChallengeRunning?"o-time-study-eternity-challenge--running":""},config(){return{...this.study.config,formatCost:t=>t>=1e6?format(t):formatInt(t)}},showDefaultCostDisplay(){const t=this.showCost&&!this.showStCost||this.STCost===0;return!this.setup.isSmall&&!this.doomedRealityStudy&&t},isDisabledByEnslaved(){return this.study.id===192&&Enslaved.isRunning},customCostStr(){const t=this.setup.isSmall?`${formatInt(this.config.cost)} TT`:quantifyInt("Time Theorem",this.config.cost),e=this.setup.isSmall?`${formatInt(this.STCost)} ST`:quantifyInt("Space Theorem",this.STCost),i=[];return this.config.cost&&i.push(t),this.STCost&&this.showStCost&&i.push(e),i.join(" + ")},doomedRealityStudy(){return this.study.type===TIME_STUDY_TYPE.DILATION&&this.study.id===6&&Pelle.isDoomed}},methods:{update(){var e;const t=this.study;this.isUseless=Pelle.uselessTimeStudies.includes(this.study.id)&&Pelle.isDoomed,this.isBought=t.isBought,this.eternityChallengeRunning=t.type===TIME_STUDY_TYPE.ETERNITY_CHALLENGE&&((e=EternityChallenge.current)==null?void 0:e.id)===t.id,this.isBought||(this.isAvailableForPurchase=t.canBeBought&&t.isAffordable),this.STCost=this.study.STCost,this.isCompleteEC=this.study.type===TIME_STUDY_TYPE.ETERNITY_CHALLENGE&&EternityChallenge(this.study.id).remainingCompletions===0},handleClick(){this.specialClick===null||!this.study.isBought?this.study.purchase():this.specialClick()},shiftClick(){this.study.purchaseUntil&&this.study.purchaseUntil()}}};class Zw{constructor(e){this.study=e.study,this.row=e.row,this.column=e.column}setPosition(e){this.top=e.itemPosition(this.row);const i=e.rows[this.row];this.left=i.itemPosition(this.column,e),this.width=i.layout.itemWidth,this.height=i.layout.itemHeight}get path(){return this.study.path}}var FEe=function(){var e=this,i=e._self._c;return i("button",{class:[e.classObject,e.studyClass,e.eternityChallengeAnim],style:e.styleObject,on:{click:[function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.handleClick.apply(null,arguments)},function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.shiftClick.apply(null,arguments)}]}},[e._t("default"),e.showDefaultCostDisplay?i("CostDisplay",{attrs:{br:"",config:e.config,name:"Time Theorem"}}):!e.doomedRealityStudy&&!e.isDisabledByEnslaved?i("div",[e._v(" Cost: "+e._s(e.customCostStr)+" ")]):e._e()],2)},$Ee=[],HEe=K(BEe,FEe,$Ee,!1,null,"3b08bc14");const IT=HEe.exports;class WO{constructor(e,i,n){this.layout=e,this.items=i,this.isWide=n}get width(){const e=this.items.length,i=this.layout;return e*i.itemWidth+(e-1)*i.spacing}itemPosition(e,i){const n=this.layout;return(i.width-this.width)/2+e*n.itemWidth+e*n.spacing}}class jO{constructor(e){this.itemWidth=e.itemWidth,this.itemHeight=e.itemHeight,this.spacing=e.spacing}}class Dm{constructor(e,i=1){this.spacing=4*i;const n=new jO({itemWidth:18*i,itemHeight:10*i,spacing:3*i}),r=new jO({itemWidth:12*i,itemHeight:10*i,spacing:.6*i}),s=(...y)=>new WO(n,y),a=(...y)=>new WO(r,y,!0),o=y=>TimeStudy(y).isUnlocked?TimeStudy(y):null,c=y=>TimeStudy.eternityChallenge(y);this.rows=[s(null,o(11),null),s(o(21),o(22)),s(null,o(31),o(32),o(33))],e.alt62?this.rows.push(s(null,o(41),o(42),c(5)),s(o(51))):this.rows.push(s(o(41),o(42)),s(null,o(51),c(5))),this.rows.push(s(null,o(61),o(62)),s(o(71),o(72),o(73)),s(o(81),o(82),o(83)),s(o(91),o(92),o(93)),s(o(101),o(102),o(103)),s(c(7),o(111),null),s(o(121),o(122),o(123)),s(c(6),o(131),o(132),o(133),c(8)),s(o(141),o(142),o(143)),s(null,c(9),o(151),null,c(4)),s(o(161),o(162))),e.alt181?this.rows.push(s(null,o(171),c(2)),s(c(1),o(181),c(3))):this.rows.push(s(o(171)),s(c(1),c(2),c(3)),s(o(181))),this.rows.push(s(c(10)),s(o(191),o(192),o(193)),s(o(201)),s(o(211),o(212),o(213),o(214)),a(o(221),o(222),o(223),o(224),o(225),o(226),o(227),o(228))),e.triad&&!Pelle.isDoomed&&this.rows.push(s(o(301),o(302),o(303),o(304))),this.rows.push(s(o(231),o(232),o(233),o(234)),s(c(11),c(12)),s(TimeStudy.dilation),s(TimeStudy.timeDimension(5),TimeStudy.timeDimension(6)),s(TimeStudy.timeDimension(7),TimeStudy.timeDimension(8)),s(TimeStudy.reality)),this.studies=[];for(let y=0;y<this.rows.length;y++){const _=this.rows[y];for(let E=0;E<_.items.length;E++){const C=_.items[E];if(C===null)continue;const S=new Zw({study:C,row:y,column:E});_.isWide&&(S.isSmall=!0),this.studies.push(S)}}const d={};this.secretStudy=new Zw({study:d,row:0,column:0});const p={};this.enslavedStudy=new Zw({study:p,row:0,column:2}),this.connections=TimeStudy.allConnections.map(y=>new Kw(y)),this.secretStudyConnection=new Kw(new TimeStudyConnection(o(11),d)),this.enslavedStudyConnection=new Kw(new TimeStudyConnection(o(11),p)),this.width=this.rows.map(y=>y.width).max();const m=this.rows.map(y=>y.layout.itemHeight).sum();this.height=m+(this.rows.length-1)*this.spacing;for(const y of this.studies)y.setPosition(this);this.secretStudy.setPosition(this),this.enslavedStudy.setPosition(this);for(const y of this.connections)y.setPosition(this.studies,this.width,this.height);this.secretStudyConnection.setPosition(this.studies.concat(this.secretStudy),this.width,this.height),this.enslavedStudyConnection.setPosition(this.studies.concat(this.enslavedStudy),this.width,this.height)}itemPosition(e){const i=this.rows.slice(0,e);return i.map(r=>r.layout.itemHeight).sum()+i.length*this.spacing}static get current(){return{alt62:Perk.bypassEC5Lock.isBought,alt181:Perk.bypassEC1Lock.isBought&&Perk.bypassEC2Lock.isBought&&Perk.bypassEC3Lock.isBought,triad:Ra.canBuyTriad}}static create(e,i=1){this._instances===void 0&&(this._instances={});const n=new Dm(e,i);return this._instances[`${Object.keys(e).filter(r=>e[r]).join("")}__${i}`]=n,n}}const ed={notBought:0,unspecified:1,bought:2,getState(t,e){switch(t){case this.notBought:return!1;case this.unspecified:return e;case this.bought:return!0}return e}},VEe={name:"TimeStudiesTab",components:{PseudoTimeStudyButton:CEe,PseudoTimeStudyConnection:IEe},props:{disregardCurrentStudies:{type:Boolean,default:!1},newStudies:{required:!0,validator:t=>Array.isArray(t)||t===void 0},showPreview:{type:Boolean,default:!0}},data(){return{layoutType:{},vLevel:0,renderedStudyCount:0,isEnslaved:!1,delayTimer:0}},computed:{layout(){return Dm.create(this.layoutType,.15)},studies(){return this.layout.studies},connections(){return this.layout.connections},treeStyleObject(){return{width:`${this.layout.width}rem`,height:`${this.layout.height}rem`}},respecClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--respec-active":this.respec}}},watch:{vLevel(){this.$recompute("layout")}},methods:{update(){this.layoutType=Dm.current,this.vLevel=Ra.pets.v.level,this.isEnslaved=Enslaved.isRunning||Date.now()-this.delayTimer<1e3},studyComponent(t){switch(t.type){case TIME_STUDY_TYPE.NORMAL:return NormalTimeStudy;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return ECTimeStudy;case TIME_STUDY_TYPE.DILATION:return DilationTimeStudy;case TIME_STUDY_TYPE.TRIAD:return TriadTimeStudy}throw"Unknown Time Study type"},studyString(t){switch(t.type){case TIME_STUDY_TYPE.NORMAL:case TIME_STUDY_TYPE.TRIAD:return`${t.id}`;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return`EC${t.id}`}return"Dilation Study"},getStudyForceBoughtState(t){return this.disregardCurrentStudies?this.newStudies.includes(t)?ed.bought:ed.notBought:ed.unspecified},getConnectionForceBoughtState(t){return this.disregardCurrentStudies?this.newStudies.includes(this.studyString(t.connection.to))&&this.newStudies.includes(this.studyString(t.connection.from))?ed.bought:ed.notBought:ed.unspecified}}};var qEe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-study-string-preview__tree--wrapper"},[e.showPreview?i("div",{staticClass:"l-time-study-tree l-study-string-preview__tree",style:e.treeStyleObject},[e._l(e.studies,function(n){return i("PseudoTimeStudyButton",{key:n.study.type.toString()+n.study.id.toString(),attrs:{setup:n,"force-is-bought":e.getStudyForceBoughtState(e.studyString(n.study)),"is-new-from-import":!e.disregardCurrentStudies&&e.newStudies.includes(e.studyString(n.study))}})}),i("svg",{staticClass:"l-time-study-connection",style:e.treeStyleObject},e._l(e.connections,function(n,r){return i("PseudoTimeStudyConnection",{key:"connection"+r,attrs:{"force-is-bought":e.getConnectionForceBoughtState(n),setup:n}})}),1)],2):i("span",{staticClass:"c-unavailable-warning"},[e._v(" Preview Unavailable ")])])},YEe=[],WEe=K(VEe,qEe,YEe,!1,null,"9710776d");const jEe=WEe.exports,zEe={name:"StudyTreeInfo",props:{headerText:{type:String,required:!0},treeStatus:{type:Object,required:!0}}};var XEe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-tree-info"},[i("span",{staticClass:"l-tree-info-header",domProps:{innerHTML:e._s(e.headerText)}}),e.treeStatus.firstPaths?i("div",{staticClass:"l-modal-import-tree__tree-info-line"},[e._v(" Dimension Split: "+e._s(e.treeStatus.firstPaths)+" ")]):e._e(),e.treeStatus.secondPaths?i("div",{staticClass:"l-modal-import-tree__tree-info-line"},[e._v(" Pace Split: "+e._s(e.treeStatus.secondPaths)+" ")]):e._e(),e.treeStatus.ec>0?i("div",{staticClass:"l-modal-import-tree__tree-info-line"},[e._v(" Eternity Challenge: "+e._s(e.treeStatus.ec)+" "+e._s(e.treeStatus.startEC?"(will start)":"")+" ")]):e._e()])},KEe=[],ZEe=K(zEe,XEe,KEe,!1,null,"98fa4662");const QEe=ZEe.exports;let Qw="";const JEe={name:"StudyStringModal",components:{ModalWrapperChoice:Vt,StudyStringLine:bEe,PrimaryButton:yt,StudyStringPreview:jEe,StudyTreeInfo:QEe},props:{id:{type:Number,required:!0},deleting:{type:Boolean,required:!1,default:!1}},data(){return{input:"",name:"",respecAndLoad:!1,canEternity:!1}},computed:{isImporting(){return this.id===-1},importedTree(){if(!this.inputIsValidTree)return{};const t=new TimeStudyTree(this.truncatedInput),e=t.purchasedStudies.map(i=>this.studyString(i));return{timeTheorems:t.spentTheorems[0],spaceTheorems:t.spentTheorems[1],newStudies:makeEnumeration(e),newStudiesArray:e,invalidStudies:t.invalidStudies,firstPaths:makeEnumeration(t.dimensionPaths),secondPaths:makeEnumeration(t.pacePaths),ec:t.ec,startEC:t.startEC,hasInfo:makeEnumeration(t.dimensionPaths)||t.ec>0}},combinedTree(){if(!this.inputIsValidTree)return{};const t=GameCache.currentStudyTree.value,e=this.combinedTreeObject,i=e.purchasedStudies.filter(o=>!t.purchasedStudies.includes(o)).map(o=>this.studyString(o)),n=TimeStudyTree.getECFromString(this.truncatedInput),r=e.startEC,s=[0,n].includes(player.challenge.eternity.current),a=e.ec!==n;return{timeTheorems:e.spentTheorems[0]-t.spentTheorems[0],spaceTheorems:e.spentTheorems[1]-t.spentTheorems[1],newStudies:makeEnumeration(i),newStudiesArray:i,firstPaths:makeEnumeration(e.dimensionPaths),secondPaths:makeEnumeration(e.pacePaths),ec:e.ec,startEC:r&&s&&!a,hasInfo:makeEnumeration(e.dimensionPaths)||e.ec>0}},combinedTreeObject(){const t=new TimeStudyTree;return t.attemptBuyArray(TimeStudyTree.currentStudies,!1),t.attemptBuyArray(t.parseStudyImport(this.truncatedInput),!0),t},modalTitle(){return this.deleting?`Deleting Study Preset "${this.name}"`:this.isImporting?"Input your tree":`Editing Study Preset "${this.name}"`},invalidMessage(){if(!this.inputIsValidTree||this.importedTree.invalidStudies.length===0)return null;let t=`#${this.truncatedInput}#`;t.length>300&&(t=`${t.slice(0,297)}...`);for(const e of this.importedTree.invalidStudies){const i=`${e}`.match(/(EC)?(\d+)/u),n=parseInt(i[2],10);switch(i[1]){case"EC":t=t.replaceAll(new RegExp(`\\|(${n})`,"gu"),'|<span style="color: var(--color-bad);">$1</span>');break;default:t=t.replaceAll(new RegExp(`(\\D)(${n})(\\D)`,"gu"),'$1<span style="color: var(--color-bad);">$2</span>$3');break}}return`Your import string has invalid study IDs: ${t.replaceAll("#","").replaceAll(",",", ")}
        <br><br>`},truncatedInput(){return TimeStudyTree.truncateInput(this.input)},hasInput(){return this.truncatedInput!==""},inputIsValid(){return this.inputIsValidTree||this.inputIsSecret},inputIsValidTree(){return TimeStudyTree.isValidImportString(this.truncatedInput)},inputIsSecret(){return["08b819f253b684773e876df530f95dcb85d2fb052046fa16ec321c65f3330608","bb450c2a3869bae412ed0b4304dc229521fc69f0fdcc95b3b61460aaf5658fc4"].includes(ff.sha512_256(this.input.toLowerCase()))},confirmText(){return this.deleting?"Delete":this.isImporting?"Import":"Save"}},watch:{input(t){Qw=t}},created(){const t=player.timestudy.presets[this.id];this.input=t?t.studies:Qw,this.name=t?t.name:""},mounted(){this.$refs.input.select()},methods:{update(){this.canEternity=Player.canEternity},confirm(){if(this.deleting)this.deletePreset();else if(this.isImporting){if(this.respecAndLoad&&Player.canEternity){player.respec=!0;const t=new TimeStudyTree(this.truncatedInput);animateAndEternity(()=>TimeStudyTree.commitToGameState(t.purchasedStudies,!1,t.startEC));return}this.importTree()}else this.savePreset()},convertInputShorthands(){this.input=TimeStudyTree.formatStudyList(this.input)},importTree(){this.inputIsValid&&(this.inputIsSecret&&SecretAchievement(37).unlock(),Qw="",this.emitClose(),TimeStudyTree.commitToGameState(this.combinedTreeObject.purchasedStudies,!1,this.combinedTree.startEC))},savePreset(){this.inputIsValid&&(player.timestudy.presets[this.id].studies=this.input,GameUI.notify.eternity(`Study Tree ${this.name} successfully edited.`),this.emitClose())},deletePreset(){const t=player.timestudy.presets[this.id].name,e=t?`Study preset "${t}"`:"Study preset";player.timestudy.presets[this.id].studies="",player.timestudy.presets[this.id].name="",GameUI.notify.eternity(`${e} deleted from slot ${this.id+1}`)},studyString(t){return t instanceof ECTimeStudyState?`EC${t.id}`:`${t.id}`}}};var eTe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{staticClass:"c-modal-import-tree",attrs:{"show-cancel":!e.inputIsValid,"show-confirm":e.inputIsValid},on:{confirm:e.confirm},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.modalTitle)+" ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" "+e._s(e.confirmText)+" ")]},proxy:!0}])},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],ref:"input",staticClass:"c-modal-input c-modal-import-tree__input",class:{"l-delete-input":e.deleting},attrs:{type:"text",maxlength:"1500",disabled:e.deleting},domProps:{value:e.input},on:{keyup:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.confirm.apply(null,arguments)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.emitClose.apply(null,arguments)}],input:function(n){n.target.composing||(e.input=n.target.value)}}}),i("div",{staticClass:"c-two-column"},[i("div",{staticClass:"c-study-info l-modal-import-tree__tree-info"},[e.inputIsSecret?i("div",[e._v(" ??? ")]):e.inputIsValidTree?[e.invalidMessage?i("div",{staticClass:"l-modal-import-tree__tree-info-line",domProps:{innerHTML:e._s(e.invalidMessage)}}):e._e(),e.isImporting?i("StudyStringLine",{attrs:{tree:e.combinedTree,"into-empty":!1}}):e._e(),i("StudyStringLine",{attrs:{tree:e.importedTree,"into-empty":!0}}),e.deleting&&e.importedTree.hasInfo?i("StudyTreeInfo",{attrs:{"header-text":"Study Preset contains:","tree-status":e.importedTree}}):e._e(),!e.deleting&&!e.isImporting&&e.importedTree.hasInfo?i("StudyTreeInfo",{attrs:{"header-text":"Status after loading with <b>no studies</b>:","tree-status":e.importedTree}}):e._e(),!e.deleting&&e.combinedTree.hasInfo?i("StudyTreeInfo",{attrs:{"header-text":"Status after loading with <b>current tree</b>:","tree-status":e.combinedTree}}):e._e()]:e._e(),!e.deleting&&!e.inputIsValidTree&&e.hasInput?i("div",[e._v(" Not a valid tree ")]):e._e()],2),i("div",{staticClass:"c-study-preview"},[i("StudyStringPreview",{attrs:{"show-preview":e.inputIsValidTree,"new-studies":!e.isImporting||e.canEternity&&e.respecAndLoad?e.importedTree.newStudiesArray:e.combinedTree.newStudiesArray,"disregard-current-studies":!e.isImporting||e.canEternity&&e.respecAndLoad}})],1)]),!e.isImporting&&e.inputIsValidTree?i("div",[i("br"),e.deleting?e._e():i("PrimaryButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This will format the study preset text, for example, changing 'a,b,c|d' to 'a, b, c | d'.",expression:"'This will format the study preset text, for example, changing \\'a,b,c|d\\' to \\'a, b, c | d\\'.'"}],on:{click:e.convertInputShorthands}},[e._v(" Format Preset Text ")])],1):e._e(),e.isImporting?i("span",[i("br"),i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.canEternity?"":"You are currently unable to eternity, so this will only do a normal load.",expression:"canEternity ? '' : 'You are currently unable to eternity, so this will only do a normal load.'"}],staticClass:"c-modal__confirmation-toggle",on:{click:function(n){e.respecAndLoad=!e.respecAndLoad}}},[i("div",{class:{"c-modal__confirmation-toggle__checkbox":!0,"c-modal__confirmation-toggle__checkbox--active":e.respecAndLoad}},[e.respecAndLoad?i("span",{staticClass:"fas fa-check"}):e._e()]),i("span",{staticClass:"c-modal__confirmation-toggle__text"},[e._v(" Also respec tree and eternity "),e.canEternity?e._e():i("span",{staticClass:"c-modal__confirmation-toggle__warning"},[e._v(" ! ")])])])]):e._e()])},tTe=[],iTe=K(JEe,eTe,tTe,!1,null,"426906d4");const nTe=iTe.exports,rTe={name:"SwitchAutomatorEditorModal",components:{ModalWrapperChoice:Vt},props:{callback:{type:Function,required:!1,default:()=>({})},lostBlocks:{type:Number,required:!1,default:0}},data(){return{errorCount:0,isCurrentlyBlocks:!1}},computed:{currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(t){this.$viewModel.tabs.reality.automator.editorScriptID=t}},otherMode(){return this.isCurrentlyBlocks?"Text":"Block"}},methods:{update(){this.errorCount=AutomatorData.currentErrors().length,this.isCurrentlyBlocks=player.reality.automator.type===AUTOMATOR_TYPE.BLOCK},toggleAutomatorMode(){var t;AutomatorBackend.changeModes(this.currentScriptID),(t=this.callback)==null||t.call(this)}}};var sTe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"switchAutomatorMode"},on:{confirm:e.toggleAutomatorMode},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Change Automator to "+e._s(e.otherMode)+" editor ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Change Modes ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" This will stop your current script if it is running! "),e.errorCount?i("div",[i("br"),e._v(" Your script has some errors which may not get converted properly to "+e._s(e.otherMode)+" mode. Continuing on will make the Automator attempt to parse these lines anyway, although some information may get lost or not be converted properly. ")]):e._e(),e.lostBlocks?i("b",[i("br"),e._v(" Warning: Your script also currently has some lines which cannot interpreted as particular commands. These lines will end up being deleted since there is no block they can be converted into. If an error occurs at the start of a loop or IF, this may end up deleting large portions of your script! "),i("span",{staticClass:"l-lost-text"},[e._v(" Changing editor modes right now will cause "+e._s(e.quantifyInt("line",e.lostBlocks))+" of code to be irreversibly lost! ")])]):e._e(),i("br"),i("span",{staticClass:"l-lost-text"},[e._v(" Hiding this confirmation is not recommended, as it may cause parts of scripts to be immediately and irreversibly lost if your script has errors when attempting to switch modes. ")]),i("br"),i("br"),e._v(" Are you sure you want to change to the "+e._s(e.otherMode)+" editor? ")])])},aTe=[],oTe=K(rTe,sTe,aTe,!1,null,"e6960834");const lTe=oTe.exports,cTe={name:"UiChoiceModal",components:{ModalWrapperChoice:Vt},computed:{listEntries(){return[`Many more game events now have animations. If these impact your performance or gameplay, they can be
        disabled in the Visual Options tab.`,`New confirmation windows have replaced the default Javascript alert windows. These can be disabled in the
        Gameplay Options tab.`,"The game now also has a new sleek layout which was designed with more Modern design practices in mind."]}},methods:{handleYesClick(){GameOptions.toggleUI()}}};var uTe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" Visual Changes ")]},proxy:!0},{key:"cancel-text",fn:function(){return[e._v(" Remain ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Swap ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" We noticed that you've loaded an old save; a few visual changes have been made since older versions of the game: "),i("br"),i("br"),i("div",{staticClass:"c-visual-change-list"},e._l(e.listEntries,function(n,r){return i("div",{key:r,staticClass:"c-visual-change-list-entry"},[i("b",[e._v("•")]),e._v(" "+e._s(n)+" ")])}),0),i("br"),i("br"),e._v(" You can change between the Classic UI which older versions of the game used and the newer Modern UI in the Visual Options tab at any time. Would you like to swap to the Modern UI now? ")])])},dTe=[],hTe=K(cTe,uTe,dTe,!1,null,"46b68c08");const fTe=hTe.exports,pTe={name:"UndoGlyphModal",components:{ModalWrapperChoice:Vt},data(){return{showStoredGameTime:!1}},methods:{update(){this.showStoredGameTime=Enslaved.isUnlocked},realityInvalidate(){this.emitClose(),Modal.message.show("Glyph Undo can only undo with a Reality!",{closeEvent:GAME_EVENT.REALITY_RESET_AFTER})},handleYesClick(){this.emitClose(),Glyphs.undo()}}};var mTe=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{attrs:{option:"glyphUndo"},on:{confirm:e.handleYesClick},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" You are about to undo equipping a Glyph ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text c-text-wrapper"},[e._v(" The last equipped Glyph will be removed. Reality will be reset, but some things will be restored to what they were when it was equipped: "),i("br"),i("div",{staticClass:"c-text-wrapper"},[i("br"),e._v("- Antimatter, Infinity Points, and Eternity Points "),i("br"),e._v("- Dilation Upgrades, Tachyon Particles, and Dilated Time "),i("br"),e._v("- Time Theorems and Eternity Challenge completions "),i("br"),e._v("- Time Dimension and Reality unlocks "),i("br"),e._v("- Time in current Infinity/Eternity/Reality "),e.showStoredGameTime?i("span",[i("br"),e._v("- Stored game time")]):e._e()]),i("br"),e._v(" Note that if you invalidate special requirements for certain things (such as the achievement for completing a Reality without producing antimatter), they will remain invalid even after undoing. In those cases, you will need to complete the conditions in a single Reality without using undo. ")])])},yTe=[],gTe=K(pTe,mTe,yTe,!1,null,"54814078");const vTe=gTe.exports,bTe={name:"UpgradeMechanicLockModal",components:{ModalWrapperChoice:Vt},props:{upgrade:{type:Object,required:!0},isImaginary:{type:Boolean,required:!0},specialLockText:{type:String,required:!1,default:null}},computed:{upgradeStr(){return this.isImaginary?"Imaginary Upgrade":"Reality Upgrade"},lockEvent(){return this.specialLockText??this.upgrade.lockEvent}},methods:{disableLock(){this.upgrade.setMechanicLock(!1)}}};var _Te=function(){var e=this,i=e._self._c;return i("ModalWrapperChoice",{on:{confirm:e.disableLock},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.upgradeStr)+" Condition Lock ")]},proxy:!0},{key:"confirm-text",fn:function(){return[e._v(" Disable Lock ")]},proxy:!0}])},[i("div",{staticClass:"c-modal-message__text"},[e._v(" Are you sure you wish to "+e._s(e.lockEvent)+"? Doing this right now will cause you to "),i("span",{staticClass:"l-emphasis"},[e._v(" fail the requirement for the "+e._s(e.upgradeStr)+' "'+e._s(e.upgrade.name)+'" ')]),i("span",{attrs:{"ach-tooltip":e.upgrade.requirement}},[i("i",{staticClass:"fas fa-question-circle"})]),i("br"),i("br"),e._v(' Selecting "Cancel" will close this modal with no effect, while selecting "Disable Lock" will disable the requirement check for this upgrade and prevent this message from reappearing unless you turn it back on. '),i("br"),i("br"),e._v(" Neither of these options will perform the action you just attempted, so you will need to try again. ")])])},ETe=[],TTe=K(bTe,_Te,ETe,!1,null,"57544275");const wTe=TTe.exports,Fp={entries:[{name:"FE000000",link:"https://dan-simon.github.io/misc/fe000000/",image:"game--hex-game.png"},{name:"Trimps",link:"https://trimps.github.io/",image:"game--trimps.png"},{name:"Mine Defense",link:"http://scholtek.com/minedefense",image:"game--mine-defense.png"},{name:"Wizard and Minion Idle",link:"https://www.kongregate.com/games/Oninou/wami",image:"game--wami.png"},{name:"Anti-Idle",link:"https://www.kongregate.com/games/Tukkun/anti-idle-the-game",image:"game--anti-idle.png"},{name:"Synergism",link:"https://synergism.cc/",image:"game--synergism.png"},{name:"Universal Paperclips",link:"https://www.decisionproblem.com/paperclips/",image:"game--universal-paperclips.png"},{name:"Monies 2",link:"https://sneekxy.nmtechgroup.com/monies2/",image:"game--monies2.png"},{name:"The First Alkahistorian",link:"https://nagshell.github.io/elemental-inception-incremental/",image:"game--alkahistorian.png"},{name:"Melvor Idle",link:"https://melvoridle.com/",image:"game--melvor-idle.svg"}],selected:-1};let Jw=!1;const CTe={name:"S12Games",data(){return{S12Games:Fp}},mounted(){document.body.addEventListener("click",this.clearSelected)},beforeDestroy(){document.body.removeEventListener("click",this.clearSelected),this.clearSelected()},methods:{clearSelected(){Jw||(Fp.selected=-1)},handleClick(t){Fp.selected!==t?(Fp.selected=t,Jw=!0,setTimeout(()=>Jw=!1,0)):window.open(Fp.entries[t].link)}}};var STe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-s12-games-container"},e._l(e.S12Games.entries,function(n,r){return i("div",{key:n.name,staticClass:"c-s12-game",class:{"c-s12-game--selected":e.S12Games.selected===r},on:{click:function(s){return e.handleClick(r)}}},[i("div",{staticClass:"c-s12-game__inner"},[i("img",{staticClass:"c-s12-game__img",attrs:{src:`/images/s12/${n.image}`}}),i("div",{staticClass:"c-s12-game__text"},[e._v(" "+e._s(n.name)+" ")])])])}),0)},kTe=[],ATe=K(CTe,STe,kTe,!1,null,"cdddf7e8");const RTe=ATe.exports,ITe={name:"S12GamesModal",components:{ModalWrapper:As,S12GameEntries:RTe},data(){return{S12Games:Fp}},methods:{update(){this.$viewModel.theme!=="S12"&&EventHub.dispatch(GAME_EVENT.CLOSE_MODAL)}}};var DTe=function(){var e=this,i=e._self._c;return i("ModalWrapper",{staticClass:"c-modal-s12-games"},[i("div",{staticClass:"c-modal__title"},[e._v(" Games ")]),i("S12GameEntries"),i("div",{staticClass:"c-modal-s12-games__magnified-display"},[e.S12Games.selected!==-1?[i("img",{staticClass:"c-modal-s12-games__magnified-display__img",attrs:{src:`/images/s12/${e.S12Games.entries[e.S12Games.selected].image}`}}),i("b",{staticClass:"c-modal-s12-games__magnified-display__text"},[e._v(" "+e._s(e.S12Games.entries[e.S12Games.selected].name)+" ")])]:e._e()],2)],1)},xTe=[],MTe=K(ITe,DTe,xTe,!1,null,"975ac974");const PTe=MTe.exports;let OTe=0,Ce=class PS{constructor(e,i=0,n){this._component=e,this._modalConfig={},this._priority=i,this._closeEvent=n}applyCloseListeners(e){const i=[GAME_EVENT.DIMBOOST_AFTER,GAME_EVENT.GALAXY_RESET_AFTER,GAME_EVENT.BIG_CRUNCH_AFTER,GAME_EVENT.ETERNITY_RESET_AFTER,GAME_EVENT.REALITY_RESET_AFTER];let n=!1;for(const r of i)r===e&&(n=!0),n&&EventHub.ui.on(r,()=>this.removeFromQueue(),this._component);n||EventHub.ui.on(e,()=>this.removeFromQueue(),this._component)}show(e){if(!GameUI.initialized)return;this._uniqueID=OTe++,this._props=Object.assign({},e||{}),this._closeEvent&&this.applyCloseListeners(this._closeEvent),e!=null&&e.closeEvent&&this.applyCloseListeners(e.closeEvent),ui.view.modal.queue.unshift(this),PS.sortModalQueue()}get isOpen(){return ui.view.modal.current===this}get component(){return this._component}get props(){return this._props}get priority(){return this._priority}removeFromQueue(){EventHub.ui.offAll(this._component),ui.view.modal.queue=ui.view.modal.queue.filter(e=>e._uniqueID!==this._uniqueID),ui.view.modal.queue.length===0?ui.view.modal.current=void 0:ui.view.modal.current=ui.view.modal.queue[0]}static sortModalQueue(){const e=ui.view.modal.queue;e.sort((n,r)=>r.priority-n.priority);const i=[...new Set(e)];ui.view.modal.queue=i,ui.view.modal.current=i[0]}static hide(){GameUI.initialized&&(ui.view.modal.queue.shift(),ui.view.modal.queue.length===0?ui.view.modal.current=void 0:ui.view.modal.current=ui.view.modal.queue[0],ui.view.modal.cloudConflict=[])}static hideAll(){if(GameUI.initialized){for(;ui.view.modal.queue.length;)ui.view.modal.queue[0].hide?ui.view.modal.queue[0].hide():PS.hide();ui.view.modal.current=void 0}}static get isOpen(){return ui.view.modal.current instanceof this}};class bR extends Ce{show(e){super.show({id:e})}}class NTe extends Ce{show(e){super.show({diff:e})}}Ce.startEternityChallenge=new bR(Hhe);Ce.startInfinityChallenge=new bR(jhe);Ce.startNormalChallenge=new bR(nfe);Ce.catchup=new NTe(pbe,-1);Ce.dimensionBoost=new Ce(Afe,1,GAME_EVENT.DIMBOOST_AFTER);Ce.antimatterGalaxy=new Ce(lfe,1,GAME_EVENT.GALAXY_RESET_AFTER);Ce.bigCrunch=new Ce(Tfe,1,GAME_EVENT.BIG_CRUNCH_AFTER);Ce.exitChallenge=new Ce(Qfe,1,GAME_EVENT.REALITY_RESET_AFTER);Ce.replicantiGalaxy=new Ce(Ppe,1,GAME_EVENT.ETERNITY_RESET_AFTER);Ce.eternity=new Ce(jfe,1,GAME_EVENT.ETERNITY_RESET_AFTER);Ce.enterDilation=new Ce(Hfe,1,GAME_EVENT.REALITY_RESET_AFTER);Ce.exitDilation=new Ce(npe,1,GAME_EVENT.REALITY_RESET_AFTER);Ce.reality=new Ce(Rpe,1,GAME_EVENT.REALITY_RESET_AFTER);Ce.resetReality=new Ce(Lpe,1,GAME_EVENT.REALITY_RESET_AFTER);Ce.celestials=new Ce(Ufe,1);Ce.hardReset=new Ce(lpe,1);Ce.backupWindows=new Ce(Nme,1);Ce.enterSpeedrun=new Ce(rEe);Ce.modifySeed=new Ce(b0e);Ce.changeName=new Ce(Cbe);Ce.armageddon=new Ce(ffe,1);Ce.confirmationOptions=new Ce(Yme);Ce.infoDisplayOptions=new Ce(Yye);Ce.awayProgressOptions=new Ce(Sme);Ce.glyphDisplayOptions=new Ce(_ye);Ce.cosmeticSetChoice=new Ce(tye);Ce.singleGlyphAppearance=new Ce(dge);Ce.hotkeys=new Ce(Fye);Ce.newsOptions=new Ce(Kye);Ce.animationOptions=new Ce(mme);Ce.hiddenTabs=new Ce(Nye);Ce.preferredTree=new Ce(age);Ce.notation=new Ce(tge);Ce.upgradeLock=new Ce(wTe,1);Ce.deleteCompanion=new Ce(yge,1);Ce.glyphDelete=new Ce(Ege,1,GAME_EVENT.GLYPHS_CHANGED);Ce.glyphPurge=new Ce(Gge,1,GAME_EVENT.GLYPHS_CHANGED);Ce.glyphSacrifice=new Ce(Wge,1,GAME_EVENT.GLYPHS_CHANGED);Ce.glyphRefine=new Ce($ge,1,GAME_EVENT.GLYPHS_CHANGED);Ce.deleteAllUnprotectedGlyphs=new Ce(xge,1,GAME_EVENT.GLYPHS_CHANGED);Ce.deleteAllRejectedGlyphs=new Ce(kge,1,GAME_EVENT.GLYPHS_CHANGED);Ce.glyphShowcasePanel=new Ce(g_e);Ce.glyphUndo=new Ce(vTe,1,GAME_EVENT.REALITY_RESET_AFTER);Ce.glyphReplace=new Ce(O0e,1,GAME_EVENT.REALITY_RESET_AFTER);Ce.enslavedHints=new Ce(zbe);Ce.realityGlyph=new Ce(I0e);Ce.glyphSetSaveDelete=new Ce(o_e);Ce.uiChoice=new Ce(fTe);Ce.h2p=new Ce(w_e);Ce.information=new Ce(r0e);Ce.credits=new Ce(Lbe,1);Ce.changelog=new Ce(bbe,1);Ce.awayProgress=new Ce(zve);Ce.loadGame=new Ce(p0e);Ce.import=new Ce(V_e);Ce.importFilter=new Ce(L_e);Ce.importScriptData=new Ce(R_e);Ce.automatorScriptDelete=new Ce(Vbe);Ce.automatorScriptTemplate=new Ce(Lve);Ce.switchAutomatorEditorMode=new Ce(lTe);Ce.clearAutomatorConstants=new Ce(Ibe);Ce.importTSConstants=new Ce(z_e);Ce.autobuyerEditModal=new Ce(Pve);Ce.shop=new Ce(pEe);Ce.studyString=new Ce(nTe);Ce.singularityMilestones=new Ce(J0e);Ce.pelleEffects=new Ce(C0e);Ce.sacrifice=new Ce(q0e,1,GAME_EVENT.DIMBOOST_AFTER);Ce.breakInfinity=new Ce(Jve,1,GAME_EVENT.ETERNITY_RESET_AFTER);Ce.respecIAP=new Ce(B0e);Ce.s12Games=new Ce(PTe);function RE(t){var i,n,r,s,a,o,c,d,p,m,y,_;const e={realTimePlayed:0,totalAntimatter:new Decimal(0),infinities:new Decimal(0),eternities:new Decimal(0),realities:0,infinityPoints:new Decimal(0),eternityPoints:new Decimal(0),realityMachines:new Decimal(0),imaginaryMachines:0,dilatedTime:new Decimal(0),bestLevel:0,pelleAM:new Decimal(0),remnants:0,realityShards:new Decimal(0),pelleLore:0,saveName:"",compositeProgress:0};return e.realTimePlayed=((i=t.records)==null?void 0:i.realTimePlayed)??100*t.totalTimePlayed,e.totalAntimatter.copyFrom(new Decimal((n=t.records)==null?void 0:n.totalAntimatter)),e.infinities.copyFrom(new Decimal(t.infinities)),e.eternities.copyFrom(new Decimal(t.eternities)),e.realities=t.realities??0,e.infinityPoints.copyFrom(new Decimal(t.infinityPoints)),e.eternityPoints.copyFrom(new Decimal(t.eternityPoints)),e.realityMachines.copyFrom(new Decimal((r=t.reality)==null?void 0:r.realityMachines)),e.imaginaryMachines=((s=t.reality)==null?void 0:s.iMCap)??0,e.dilatedTime.copyFrom(new Decimal(((a=t.records)==null?void 0:a.thisReality.maxDT)??((o=t.dilation)==null?void 0:o.dilatedTime)??0)),e.bestLevel=((c=t.records)==null?void 0:c.bestReality.glyphLevel)??0,e.pelleAM.copyFrom(new Decimal((d=t.celestials)==null?void 0:d.pelle.records.totalAntimatter)),e.remnants=((p=t.celestials)==null?void 0:p.pelle.remnants)??0,e.realityShards.copyFrom(new Decimal((m=t.celestials)==null?void 0:m.pelle.realityShards)),e.pelleLore=((y=t.celestials)==null?void 0:y.pelle.quoteBits)??0,e.saveName=((_=t.options)==null?void 0:_.saveFileName)??"",e.compositeProgress=Bv.getCompositeProgress(t),e}Ce.cloudSaveConflict=new Ce(Uhe);Ce.cloudLoadConflict=new Ce(Mhe);Ce.cloudInvalidData=new Ce(whe);Ce.addCloudConflict=function(t,e,i,n,r){Ce.hide(),ui.view.modal.cloudConflict={saveId:t,saveComparison:e,cloud:RE(i),local:RE(n),onAccept:r}};Ce.addImportConflict=function(t,e){Ce.hide(),ui.view.modal.cloudConflict={importingSave:RE(t),currentSave:RE(e)}};Ce.message=new class extends Ce{show(t,e={},i=0){if(GameUI.initialized){if(this.currPriority===void 0)this.currPriority=i;else if(i<this.currPriority)return;super.show(),this.message=t,this.callback=e.callback,this.closeButton=e.closeButton??!1,EventHub.ui.offAll(this._component),e.closeEvent&&this.applyCloseListeners(e.closeEvent)}}hide(){EventHub.ui.offAll(this._component),this.currPriority=void 0,Ce.hide()}}(Qhe,2);const gi=function(e,i){this.name=e,this.isDark=function(){return this.isDefault()||e==="S12"?player.options.newUI:i.isDark},this.isMetro=i.isMetro,this.isAnimated=i.isAnimated,this.isSecret=i.isSecret,this.isDefault=function(){return e==="Normal"},this.isAvailable=function(){return this.isSecret?player.secretUnlocks.themes.some(n=>n.match(/^S[0-9]*/u)[0]===e):!0},this.displayName=function(){return!this.isSecret||!this.isAvailable()?e:player.secretUnlocks.themes.find(n=>n.match(/^S[0-9]*/u)[0]===e).replace(/^S[0-9]*/u,"")},this.set=function(){document.body.classList.remove(...document.body.classList),document.body.classList.add(this.cssClass()),this.isMetro&&document.body.classList.add("s-base--metro"),this.isDark()&&document.body.classList.add("s-base--dark"),this.isAnimated&&player.options.animations.background?document.getElementById("background-animations").style.display="block":document.getElementById("background-animations").style.display="none",player.options.newUI?player.options.themeModern=e:player.options.themeClassic=e,ui.view.theme=e,window.getSelection().removeAllRanges(),PerkNetwork.forceNetworkRemake()},this.cssClass=function(){return`t-${this.name.replace(/\s+/gu,"-").toLowerCase()}`}};gi.currentName=function(){return player.options.newUI?player.options.themeModern:player.options.themeClassic};gi.current=function(){return xm.find(gi.currentName())};gi.set=function(t){const e=xm.find(t);return e.set(),e};gi.secretThemeIndex=function(t){const e=["ef853879b60fa6755d9599fd756c94d112f987c0cd596abf48b08f33af5ff537","078570d37e6ffbf06e079e07c3c7987814e03436d00a17230ef5f24b1cb93290","a3d64c3d1e1749b60b2b3dba10ed5ae9425300e9600ca05bcbafe4df6c69941f","530fac71cc0b151b24d966493a6f4a0817921b37e4d3e593439e624c214ab2b2","cb72e4a679254df5f99110dc7a93924628b916d2e069e3ad206db92068cb0883","c8fac64da08d674123c32c936b14115ab384fe556fd24e431eb184a8dde21137","da3b3c152083f0c70245f104f06331497b97b52ac80edec05e26a33ee704cae7","1bbc0800145e72dfea5bfb218eba824c52510488b3a05ee88feaaa6683322d19","dba8336cd3224649d07952b00045a6ec3c8df277aa8a0a0e3e7c2aaa77f1fbb9","73de8a7f9efa1cbffc80a8effc9891a799127cd204b3a8b023bea8f513ed4753","f3a71114261b4af6517a53f89bf0c6b56bb81b6f0e931d0e0d71249eb196628c","1248689171faaa0abb68279199a8d2eb232dba10d2dacb79a705f680b6862c0e"],i=ff.sha512_256(t.toUpperCase());return e.indexOf(i)};gi.isSecretTheme=function(t){return gi.secretThemeIndex(t)!==-1};gi.animatedThemeUnlocked=function(){return xm.all.some(t=>t.isAvailable&&t.isAnimated)};gi.tryUnlock=function(t){const e=gi.secretThemeIndex(t);if(e===-1)return!1;const i=`S${e+1}`,n=i+t.capitalize(),r=player.secretUnlocks.themes.has(n);return player.secretUnlocks.themes.add(n),gi.set(i),SecretAchievement(25).unlock(),r||(GameUI.notify.success(`You have unlocked the ${t.capitalize()} theme!`,5e3),gi.current().isAnimated&&setTimeout(Modal.message.show(`This secret theme has animations. If they are giving you performance issues,
        you can turn them off in the Options/Visual tab to reduce lag.`),100)),!0};gi.create=function(t,e){const i={isDark:e.dark,isMetro:e.metro,isAnimated:e.animated,isSecret:e.secret};return new gi(t,i)};const xm={all:[gi.create("Normal",{}),gi.create("Metro",{metro:!0}),gi.create("Dark",{dark:!0}),gi.create("Dark Metro",{dark:!0,metro:!0}),gi.create("Inverted",{}),gi.create("Inverted Metro",{metro:!0}),gi.create("AMOLED",{dark:!0}),gi.create("AMOLED Metro",{dark:!0,metro:!0}),gi.create("S1",{animated:!0,secret:!0}),gi.create("S2",{secret:!0}),gi.create("S3",{secret:!0}),gi.create("S4",{secret:!0}),gi.create("S5",{secret:!0}),gi.create("S6",{dark:!0,animated:!0,secret:!0}),gi.create("S7",{metro:!0,secret:!0}),gi.create("S8",{metro:!0,secret:!0}),gi.create("S9",{secret:!0}),gi.create("S10",{dark:!0,metro:!0,animated:!0,secret:!0}),gi.create("S11",{dark:!0,animated:!0,secret:!0}),gi.create("S12",{secret:!0})],available(){return xm.all.filter(t=>t.isAvailable())},find(t){return xm.all.find(e=>e.name===t)}};let GTe=class{static toggleNews(){SecretAchievement(33).unlock(),GameUI.notify.error("We're sorry but you cannot modify your advertising settings.")}static toggleUI(){player.options.newUI=!player.options.newUI,ui.view.newUI=player.options.newUI,Themes.find(Theme.currentName()).set(),qh.updateZoom(),GameStorage.save()}static cloudSave(){Cloud.saveCheck(!0)}static cloudLoad(){Cloud.loadCheck()}static login(){Cloud.login()}static logout(){Cloud.logout()}static refreshUpdateRate(){player.options.updateRate===200&&SecretAchievement(31).unlock(),GameIntervals.gameLoop.restart()}static refreshAutosaveInterval(){GameIntervals.save.restart()}};const UTe=["80b7fdc794f5dfc944da6a445a3f21a2d0f7c974d044f2ea25713037e96af9e3","857876556a230da15fe1bb6f410ca8dbc9274de47c1a847c2281a7103dd2c274","be88e62eb68758cd7381104977c0d3d5d81e19c72a848f0d79d1963c1e39221f","c784c9c0a82b5f3c13884842fa6e6a8f5aed994ef401e6476c30b1adfe439b22"];function U3(t){const e=ff.sha512_256(t.replace(/\s/gu,"").toUpperCase());return UTe.indexOf(e)}function LTe(t){return U3(t)!==-1}function BTe(t){switch(U3(t)){case 0:return vl.display("a-barrel-roll",5),SecretAchievement(15).unlock(),!0;case 1:return SecretAchievement(14).unlock(),!0;case 2:return SecretAchievement(37).unlock(),!0;case 3:return player.records.fullGameCompletions>0||fW?Speedrun.unlock():GameUI.notify.error("Complete the game at least once first!",15e3),!0;default:return!1}}function of(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?of=function(i){return typeof i}:of=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},of(t)}function Mm(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function FTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Te(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HTe(t,e,i){return e&&$Te(t.prototype,e),t}/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var xb=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",VTe=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(xb&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();function qTe(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}function YTe(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},VTe))}}var WTe=xb&&window.Promise,jTe=WTe?qTe:YTe;function L3(t){var e={};return t&&e.toString.call(t)==="[object Function]"}function Qf(t,e){if(t.nodeType!==1)return[];var i=t.ownerDocument.defaultView,n=i.getComputedStyle(t,null);return e?n[e]:n}function _R(t){return t.nodeName==="HTML"?t:t.parentNode||t.host}function Mb(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=Qf(t),i=e.overflow,n=e.overflowX,r=e.overflowY;return/(auto|scroll|overlay)/.test(i+r+n)?t:Mb(_R(t))}function B3(t){return t&&t.referenceNode?t.referenceNode:t}var zO=xb&&!!(window.MSInputMethodContext&&document.documentMode),XO=xb&&/MSIE 10/.test(navigator.userAgent);function ly(t){return t===11?zO:t===10?XO:zO||XO}function Pm(t){if(!t)return document.documentElement;for(var e=ly(10)?document.body:null,i=t.offsetParent||null;i===e&&t.nextElementSibling;)i=(t=t.nextElementSibling).offsetParent;var n=i&&i.nodeName;return!n||n==="BODY"||n==="HTML"?t?t.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(i.nodeName)!==-1&&Qf(i,"position")==="static"?Pm(i):i}function zTe(t){var e=t.nodeName;return e==="BODY"?!1:e==="HTML"||Pm(t.firstElementChild)===t}function OS(t){return t.parentNode!==null?OS(t.parentNode):t}function IE(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?t:e,r=i?e:t,s=document.createRange();s.setStart(n,0),s.setEnd(r,0);var a=s.commonAncestorContainer;if(t!==a&&e!==a||n.contains(r))return zTe(a)?a:Pm(a);var o=OS(t);return o.host?IE(o.host,e):IE(t,OS(e).host)}function Om(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",i=e==="top"?"scrollTop":"scrollLeft",n=t.nodeName;if(n==="BODY"||n==="HTML"){var r=t.ownerDocument.documentElement,s=t.ownerDocument.scrollingElement||r;return s[i]}return t[i]}function XTe(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=Om(e,"top"),r=Om(e,"left"),s=i?-1:1;return t.top+=n*s,t.bottom+=n*s,t.left+=r*s,t.right+=r*s,t}function KO(t,e){var i=e==="x"?"Left":"Top",n=i==="Left"?"Right":"Bottom";return parseFloat(t["border"+i+"Width"])+parseFloat(t["border"+n+"Width"])}function ZO(t,e,i,n){return Math.max(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],ly(10)?parseInt(i["offset"+t])+parseInt(n["margin"+(t==="Height"?"Top":"Left")])+parseInt(n["margin"+(t==="Height"?"Bottom":"Right")]):0)}function F3(t){var e=t.body,i=t.documentElement,n=ly(10)&&getComputedStyle(i);return{height:ZO("Height",e,i,n),width:ZO("Width",e,i,n)}}var KTe=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ZTe=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Nm=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},wo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};function Fd(t){return wo({},t,{right:t.left+t.width,bottom:t.top+t.height})}function NS(t){var e={};try{if(ly(10)){e=t.getBoundingClientRect();var i=Om(t,"top"),n=Om(t,"left");e.top+=i,e.left+=n,e.bottom+=i,e.right+=n}else e=t.getBoundingClientRect()}catch{}var r={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},s=t.nodeName==="HTML"?F3(t.ownerDocument):{},a=s.width||t.clientWidth||r.width,o=s.height||t.clientHeight||r.height,c=t.offsetWidth-a,d=t.offsetHeight-o;if(c||d){var p=Qf(t);c-=KO(p,"x"),d-=KO(p,"y"),r.width-=c,r.height-=d}return Fd(r)}function ER(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=ly(10),r=e.nodeName==="HTML",s=NS(t),a=NS(e),o=Mb(t),c=Qf(e),d=parseFloat(c.borderTopWidth),p=parseFloat(c.borderLeftWidth);i&&r&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var m=Fd({top:s.top-a.top-d,left:s.left-a.left-p,width:s.width,height:s.height});if(m.marginTop=0,m.marginLeft=0,!n&&r){var y=parseFloat(c.marginTop),_=parseFloat(c.marginLeft);m.top-=d-y,m.bottom-=d-y,m.left-=p-_,m.right-=p-_,m.marginTop=y,m.marginLeft=_}return(n&&!i?e.contains(o):e===o&&o.nodeName!=="BODY")&&(m=XTe(m,e)),m}function QTe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t.ownerDocument.documentElement,n=ER(t,i),r=Math.max(i.clientWidth,window.innerWidth||0),s=Math.max(i.clientHeight,window.innerHeight||0),a=e?0:Om(i),o=e?0:Om(i,"left"),c={top:a-n.top+n.marginTop,left:o-n.left+n.marginLeft,width:r,height:s};return Fd(c)}function $3(t){var e=t.nodeName;if(e==="BODY"||e==="HTML")return!1;if(Qf(t,"position")==="fixed")return!0;var i=_R(t);return i?$3(i):!1}function H3(t){if(!t||!t.parentElement||ly())return document.documentElement;for(var e=t.parentElement;e&&Qf(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function TR(t,e,i,n){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s={top:0,left:0},a=r?H3(t):IE(t,B3(e));if(n==="viewport")s=QTe(a,r);else{var o=void 0;n==="scrollParent"?(o=Mb(_R(e)),o.nodeName==="BODY"&&(o=t.ownerDocument.documentElement)):n==="window"?o=t.ownerDocument.documentElement:o=n;var c=ER(o,a,r);if(o.nodeName==="HTML"&&!$3(a)){var d=F3(t.ownerDocument),p=d.height,m=d.width;s.top+=c.top-c.marginTop,s.bottom=p+c.top,s.left+=c.left-c.marginLeft,s.right=m+c.left}else s=c}i=i||0;var y=typeof i=="number";return s.left+=y?i:i.left||0,s.top+=y?i:i.top||0,s.right-=y?i:i.right||0,s.bottom-=y?i:i.bottom||0,s}function JTe(t){var e=t.width,i=t.height;return e*i}function V3(t,e,i,n,r){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(t.indexOf("auto")===-1)return t;var a=TR(i,n,s,r),o={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},c=Object.keys(o).map(function(y){return wo({key:y},o[y],{area:JTe(o[y])})}).sort(function(y,_){return _.area-y.area}),d=c.filter(function(y){var _=y.width,E=y.height;return _>=i.clientWidth&&E>=i.clientHeight}),p=d.length>0?d[0].key:c[0].key,m=t.split("-")[1];return p+(m?"-"+m:"")}function q3(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,r=n?H3(e):IE(e,B3(i));return ER(i,r,n)}function Y3(t){var e=t.ownerDocument.defaultView,i=e.getComputedStyle(t),n=parseFloat(i.marginTop||0)+parseFloat(i.marginBottom||0),r=parseFloat(i.marginLeft||0)+parseFloat(i.marginRight||0),s={width:t.offsetWidth+r,height:t.offsetHeight+n};return s}function DE(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(i){return e[i]})}function W3(t,e,i){i=i.split("-")[0];var n=Y3(t),r={width:n.width,height:n.height},s=["right","left"].indexOf(i)!==-1,a=s?"top":"left",o=s?"left":"top",c=s?"height":"width",d=s?"width":"height";return r[a]=e[a]+e[c]/2-n[c]/2,i===o?r[o]=e[o]-n[d]:r[o]=e[DE(o)],r}function Pb(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function e1e(t,e,i){if(Array.prototype.findIndex)return t.findIndex(function(r){return r[e]===i});var n=Pb(t,function(r){return r[e]===i});return t.indexOf(n)}function j3(t,e,i){var n=i===void 0?t:t.slice(0,e1e(t,"name",i));return n.forEach(function(r){r.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var s=r.function||r.fn;r.enabled&&L3(s)&&(e.offsets.popper=Fd(e.offsets.popper),e.offsets.reference=Fd(e.offsets.reference),e=s(e,r))}),e}function t1e(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=q3(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=V3(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=W3(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=j3(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function z3(t,e){return t.some(function(i){var n=i.name,r=i.enabled;return r&&n===e})}function wR(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var r=e[n],s=r?""+r+i:t;if(typeof document.body.style[s]<"u")return s}return null}function i1e(){return this.state.isDestroyed=!0,z3(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[wR("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function X3(t){var e=t.ownerDocument;return e?e.defaultView:window}function K3(t,e,i,n){var r=t.nodeName==="BODY",s=r?t.ownerDocument.defaultView:t;s.addEventListener(e,i,{passive:!0}),r||K3(Mb(s.parentNode),e,i,n),n.push(s)}function n1e(t,e,i,n){i.updateBound=n,X3(t).addEventListener("resize",i.updateBound,{passive:!0});var r=Mb(t);return K3(r,"scroll",i.updateBound,i.scrollParents),i.scrollElement=r,i.eventsEnabled=!0,i}function r1e(){this.state.eventsEnabled||(this.state=n1e(this.reference,this.options,this.state,this.scheduleUpdate))}function s1e(t,e){return X3(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(i){i.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function a1e(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=s1e(this.reference,this.state))}function CR(t){return t!==""&&!isNaN(parseFloat(t))&&isFinite(t)}function GS(t,e){Object.keys(e).forEach(function(i){var n="";["width","height","top","right","bottom","left"].indexOf(i)!==-1&&CR(e[i])&&(n="px"),t.style[i]=e[i]+n})}function o1e(t,e){Object.keys(e).forEach(function(i){var n=e[i];n!==!1?t.setAttribute(i,e[i]):t.removeAttribute(i)})}function l1e(t){return GS(t.instance.popper,t.styles),o1e(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&GS(t.arrowElement,t.arrowStyles),t}function c1e(t,e,i,n,r){var s=q3(r,e,t,i.positionFixed),a=V3(i.placement,s,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",a),GS(e,{position:i.positionFixed?"fixed":"absolute"}),i}function u1e(t,e){var i=t.offsets,n=i.popper,r=i.reference,s=Math.round,a=Math.floor,o=function(k){return k},c=s(r.width),d=s(n.width),p=["left","right"].indexOf(t.placement)!==-1,m=t.placement.indexOf("-")!==-1,y=c%2===d%2,_=c%2===1&&d%2===1,E=e?p||m||y?s:a:o,C=e?s:o;return{left:E(_&&!m&&e?n.left-1:n.left),top:C(n.top),bottom:C(n.bottom),right:E(n.right)}}var d1e=xb&&/Firefox/i.test(navigator.userAgent);function h1e(t,e){var i=e.x,n=e.y,r=t.offsets.popper,s=Pb(t.instance.modifiers,function(O){return O.name==="applyStyle"}).gpuAcceleration;s!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=s!==void 0?s:e.gpuAcceleration,o=Pm(t.instance.popper),c=NS(o),d={position:r.position},p=u1e(t,window.devicePixelRatio<2||!d1e),m=i==="bottom"?"top":"bottom",y=n==="right"?"left":"right",_=wR("transform"),E=void 0,C=void 0;if(m==="bottom"?o.nodeName==="HTML"?C=-o.clientHeight+p.bottom:C=-c.height+p.bottom:C=p.top,y==="right"?o.nodeName==="HTML"?E=-o.clientWidth+p.right:E=-c.width+p.right:E=p.left,a&&_)d[_]="translate3d("+E+"px, "+C+"px, 0)",d[m]=0,d[y]=0,d.willChange="transform";else{var S=m==="bottom"?-1:1,k=y==="right"?-1:1;d[m]=C*S,d[y]=E*k,d.willChange=m+", "+y}var R={"x-placement":t.placement};return t.attributes=wo({},R,t.attributes),t.styles=wo({},d,t.styles),t.arrowStyles=wo({},t.offsets.arrow,t.arrowStyles),t}function Z3(t,e,i){var n=Pb(t,function(o){var c=o.name;return c===e}),r=!!n&&t.some(function(o){return o.name===i&&o.enabled&&o.order<n.order});if(!r){var s="`"+e+"`",a="`"+i+"`";console.warn(a+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return r}function f1e(t,e){var i;if(!Z3(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if(typeof n=="string"){if(n=t.instance.popper.querySelector(n),!n)return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var r=t.placement.split("-")[0],s=t.offsets,a=s.popper,o=s.reference,c=["left","right"].indexOf(r)!==-1,d=c?"height":"width",p=c?"Top":"Left",m=p.toLowerCase(),y=c?"left":"top",_=c?"bottom":"right",E=Y3(n)[d];o[_]-E<a[m]&&(t.offsets.popper[m]-=a[m]-(o[_]-E)),o[m]+E>a[_]&&(t.offsets.popper[m]+=o[m]+E-a[_]),t.offsets.popper=Fd(t.offsets.popper);var C=o[m]+o[d]/2-E/2,S=Qf(t.instance.popper),k=parseFloat(S["margin"+p]),R=parseFloat(S["border"+p+"Width"]),O=C-t.offsets.popper[m]-k-R;return O=Math.max(Math.min(a[d]-E,O),0),t.arrowElement=n,t.offsets.arrow=(i={},Nm(i,m,Math.round(O)),Nm(i,y,""),i),t}function p1e(t){return t==="end"?"start":t==="start"?"end":t}var Q3=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],eC=Q3.slice(3);function QO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=eC.indexOf(t),n=eC.slice(i+1).concat(eC.slice(0,i));return e?n.reverse():n}var tC={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function m1e(t,e){if(z3(t.instance.modifiers,"inner")||t.flipped&&t.placement===t.originalPlacement)return t;var i=TR(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],r=DE(n),s=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case tC.FLIP:a=[n,r];break;case tC.CLOCKWISE:a=QO(n);break;case tC.COUNTERCLOCKWISE:a=QO(n,!0);break;default:a=e.behavior}return a.forEach(function(o,c){if(n!==o||a.length===c+1)return t;n=t.placement.split("-")[0],r=DE(n);var d=t.offsets.popper,p=t.offsets.reference,m=Math.floor,y=n==="left"&&m(d.right)>m(p.left)||n==="right"&&m(d.left)<m(p.right)||n==="top"&&m(d.bottom)>m(p.top)||n==="bottom"&&m(d.top)<m(p.bottom),_=m(d.left)<m(i.left),E=m(d.right)>m(i.right),C=m(d.top)<m(i.top),S=m(d.bottom)>m(i.bottom),k=n==="left"&&_||n==="right"&&E||n==="top"&&C||n==="bottom"&&S,R=["top","bottom"].indexOf(n)!==-1,O=!!e.flipVariations&&(R&&s==="start"&&_||R&&s==="end"&&E||!R&&s==="start"&&C||!R&&s==="end"&&S),I=!!e.flipVariationsByContent&&(R&&s==="start"&&E||R&&s==="end"&&_||!R&&s==="start"&&S||!R&&s==="end"&&C),F=O||I;(y||k||F)&&(t.flipped=!0,(y||k)&&(n=a[c+1]),F&&(s=p1e(s)),t.placement=n+(s?"-"+s:""),t.offsets.popper=wo({},t.offsets.popper,W3(t.instance.popper,t.offsets.reference,t.placement)),t=j3(t.instance.modifiers,t,"flip"))}),t}function y1e(t){var e=t.offsets,i=e.popper,n=e.reference,r=t.placement.split("-")[0],s=Math.floor,a=["top","bottom"].indexOf(r)!==-1,o=a?"right":"bottom",c=a?"left":"top",d=a?"width":"height";return i[o]<s(n[c])&&(t.offsets.popper[c]=s(n[c])-i[d]),i[c]>s(n[o])&&(t.offsets.popper[c]=s(n[o])),t}function g1e(t,e,i,n){var r=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+r[1],a=r[2];if(!s)return t;if(a.indexOf("%")===0){var o=void 0;switch(a){case"%p":o=i;break;case"%":case"%r":default:o=n}var c=Fd(o);return c[e]/100*s}else if(a==="vh"||a==="vw"){var d=void 0;return a==="vh"?d=Math.max(document.documentElement.clientHeight,window.innerHeight||0):d=Math.max(document.documentElement.clientWidth,window.innerWidth||0),d/100*s}else return s}function v1e(t,e,i,n){var r=[0,0],s=["right","left"].indexOf(n)!==-1,a=t.split(/(\+|\-)/).map(function(p){return p.trim()}),o=a.indexOf(Pb(a,function(p){return p.search(/,|\s/)!==-1}));a[o]&&a[o].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var c=/\s*,\s*|\s+/,d=o!==-1?[a.slice(0,o).concat([a[o].split(c)[0]]),[a[o].split(c)[1]].concat(a.slice(o+1))]:[a];return d=d.map(function(p,m){var y=(m===1?!s:s)?"height":"width",_=!1;return p.reduce(function(E,C){return E[E.length-1]===""&&["+","-"].indexOf(C)!==-1?(E[E.length-1]=C,_=!0,E):_?(E[E.length-1]+=C,_=!1,E):E.concat(C)},[]).map(function(E){return g1e(E,y,e,i)})}),d.forEach(function(p,m){p.forEach(function(y,_){CR(y)&&(r[m]+=y*(p[_-1]==="-"?-1:1))})}),r}function b1e(t,e){var i=e.offset,n=t.placement,r=t.offsets,s=r.popper,a=r.reference,o=n.split("-")[0],c=void 0;return CR(+i)?c=[+i,0]:c=v1e(i,s,a,o),o==="left"?(s.top+=c[0],s.left-=c[1]):o==="right"?(s.top+=c[0],s.left+=c[1]):o==="top"?(s.left+=c[0],s.top-=c[1]):o==="bottom"&&(s.left+=c[0],s.top+=c[1]),t.popper=s,t}function _1e(t,e){var i=e.boundariesElement||Pm(t.instance.popper);t.instance.reference===i&&(i=Pm(i));var n=wR("transform"),r=t.instance.popper.style,s=r.top,a=r.left,o=r[n];r.top="",r.left="",r[n]="";var c=TR(t.instance.popper,t.instance.reference,e.padding,i,t.positionFixed);r.top=s,r.left=a,r[n]=o,e.boundaries=c;var d=e.priority,p=t.offsets.popper,m={primary:function(_){var E=p[_];return p[_]<c[_]&&!e.escapeWithReference&&(E=Math.max(p[_],c[_])),Nm({},_,E)},secondary:function(_){var E=_==="right"?"left":"top",C=p[E];return p[_]>c[_]&&!e.escapeWithReference&&(C=Math.min(p[E],c[_]-(_==="right"?p.width:p.height))),Nm({},E,C)}};return d.forEach(function(y){var _=["left","top"].indexOf(y)!==-1?"primary":"secondary";p=wo({},p,m[_](y))}),t.offsets.popper=p,t}function E1e(t){var e=t.placement,i=e.split("-")[0],n=e.split("-")[1];if(n){var r=t.offsets,s=r.reference,a=r.popper,o=["bottom","top"].indexOf(i)!==-1,c=o?"left":"top",d=o?"width":"height",p={start:Nm({},c,s[c]),end:Nm({},c,s[c]+s[d]-a[d])};t.offsets.popper=wo({},a,p[n])}return t}function T1e(t){if(!Z3(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=Pb(t.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(t.hide===!0)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(t.hide===!1)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}function w1e(t){var e=t.placement,i=e.split("-")[0],n=t.offsets,r=n.popper,s=n.reference,a=["left","right"].indexOf(i)!==-1,o=["top","left"].indexOf(i)===-1;return r[a?"left":"top"]=s[i]-(o?r[a?"width":"height"]:0),t.placement=DE(e),t.offsets.popper=Fd(r),t}var C1e={shift:{order:100,enabled:!0,fn:E1e},offset:{order:200,enabled:!0,fn:b1e,offset:0},preventOverflow:{order:300,enabled:!0,fn:_1e,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:y1e},arrow:{order:500,enabled:!0,fn:f1e,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:m1e,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:w1e},hide:{order:800,enabled:!0,fn:T1e},computeStyle:{order:850,enabled:!0,fn:h1e,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:l1e,onLoad:c1e,gpuAcceleration:void 0}},S1e={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:C1e},Ob=function(){function t(e,i){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};KTe(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=jTe(this.update.bind(this)),this.options=wo({},t.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(wo({},t.Defaults.modifiers,r.modifiers)).forEach(function(a){n.options.modifiers[a]=wo({},t.Defaults.modifiers[a]||{},r.modifiers?r.modifiers[a]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return wo({name:a},n.options.modifiers[a])}).sort(function(a,o){return a.order-o.order}),this.modifiers.forEach(function(a){a.enabled&&L3(a.onLoad)&&a.onLoad(n.reference,n.popper,n.options,a,n.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return ZTe(t,[{key:"update",value:function(){return t1e.call(this)}},{key:"destroy",value:function(){return i1e.call(this)}},{key:"enableEventListeners",value:function(){return r1e.call(this)}},{key:"disableEventListeners",value:function(){return a1e.call(this)}}]),t}();Ob.Utils=(typeof window<"u"?window:global).PopperUtils;Ob.placements=Q3;Ob.Defaults=S1e;function k1e(){this.__data__=[],this.size=0}var A1e=k1e;function R1e(t,e){return t===e||t!==t&&e!==e}var Nb=R1e,I1e=Nb;function D1e(t,e){for(var i=t.length;i--;)if(I1e(t[i][0],e))return i;return-1}var DT=D1e,x1e=DT,M1e=Array.prototype,P1e=M1e.splice;function O1e(t){var e=this.__data__,i=x1e(e,t);if(i<0)return!1;var n=e.length-1;return i==n?e.pop():P1e.call(e,i,1),--this.size,!0}var N1e=O1e,G1e=DT;function U1e(t){var e=this.__data__,i=G1e(e,t);return i<0?void 0:e[i][1]}var L1e=U1e,B1e=DT;function F1e(t){return B1e(this.__data__,t)>-1}var $1e=F1e,H1e=DT;function V1e(t,e){var i=this.__data__,n=H1e(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}var q1e=V1e,Y1e=A1e,W1e=N1e,j1e=L1e,z1e=$1e,X1e=q1e;function cy(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}cy.prototype.clear=Y1e;cy.prototype.delete=W1e;cy.prototype.get=j1e;cy.prototype.has=z1e;cy.prototype.set=X1e;var xT=cy,K1e=xT;function Z1e(){this.__data__=new K1e,this.size=0}var Q1e=Z1e;function J1e(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}var ewe=J1e;function twe(t){return this.__data__.get(t)}var iwe=twe;function nwe(t){return this.__data__.has(t)}var rwe=nwe,swe=typeof Si=="object"&&Si&&Si.Object===Object&&Si,J3=swe,awe=J3,owe=typeof self=="object"&&self&&self.Object===Object&&self,lwe=awe||owe||Function("return this")(),yc=lwe,cwe=yc,uwe=cwe.Symbol,SR=uwe,JO=SR,e5=Object.prototype,dwe=e5.hasOwnProperty,hwe=e5.toString,cg=JO?JO.toStringTag:void 0;function fwe(t){var e=dwe.call(t,cg),i=t[cg];try{t[cg]=void 0;var n=!0}catch{}var r=hwe.call(t);return n&&(e?t[cg]=i:delete t[cg]),r}var pwe=fwe,mwe=Object.prototype,ywe=mwe.toString;function gwe(t){return ywe.call(t)}var vwe=gwe,eN=SR,bwe=pwe,_we=vwe,Ewe="[object Null]",Twe="[object Undefined]",tN=eN?eN.toStringTag:void 0;function wwe(t){return t==null?t===void 0?Twe:Ewe:tN&&tN in Object(t)?bwe(t):_we(t)}var Gb=wwe;function Cwe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Jf=Cwe,Swe=Gb,kwe=Jf,Awe="[object AsyncFunction]",Rwe="[object Function]",Iwe="[object GeneratorFunction]",Dwe="[object Proxy]";function xwe(t){if(!kwe(t))return!1;var e=Swe(t);return e==Rwe||e==Iwe||e==Awe||e==Dwe}var kR=xwe,Mwe=yc,Pwe=Mwe["__core-js_shared__"],Owe=Pwe,iC=Owe,iN=function(){var t=/[^.]+$/.exec(iC&&iC.keys&&iC.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Nwe(t){return!!iN&&iN in t}var Gwe=Nwe,Uwe=Function.prototype,Lwe=Uwe.toString;function Bwe(t){if(t!=null){try{return Lwe.call(t)}catch{}try{return t+""}catch{}}return""}var t5=Bwe,Fwe=kR,$we=Gwe,Hwe=Jf,Vwe=t5,qwe=/[\\^$.*+?()[\]{}|]/g,Ywe=/^\[object .+?Constructor\]$/,Wwe=Function.prototype,jwe=Object.prototype,zwe=Wwe.toString,Xwe=jwe.hasOwnProperty,Kwe=RegExp("^"+zwe.call(Xwe).replace(qwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zwe(t){if(!Hwe(t)||$we(t))return!1;var e=Fwe(t)?Kwe:Ywe;return e.test(Vwe(t))}var Qwe=Zwe;function Jwe(t,e){return t==null?void 0:t[e]}var eCe=Jwe,tCe=Qwe,iCe=eCe;function nCe(t,e){var i=iCe(t,e);return tCe(i)?i:void 0}var ep=nCe,rCe=ep,sCe=yc,aCe=rCe(sCe,"Map"),AR=aCe,oCe=ep,lCe=oCe(Object,"create"),MT=lCe,nN=MT;function cCe(){this.__data__=nN?nN(null):{},this.size=0}var uCe=cCe;function dCe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var hCe=dCe,fCe=MT,pCe="__lodash_hash_undefined__",mCe=Object.prototype,yCe=mCe.hasOwnProperty;function gCe(t){var e=this.__data__;if(fCe){var i=e[t];return i===pCe?void 0:i}return yCe.call(e,t)?e[t]:void 0}var vCe=gCe,bCe=MT,_Ce=Object.prototype,ECe=_Ce.hasOwnProperty;function TCe(t){var e=this.__data__;return bCe?e[t]!==void 0:ECe.call(e,t)}var wCe=TCe,CCe=MT,SCe="__lodash_hash_undefined__";function kCe(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=CCe&&e===void 0?SCe:e,this}var ACe=kCe,RCe=uCe,ICe=hCe,DCe=vCe,xCe=wCe,MCe=ACe;function uy(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}uy.prototype.clear=RCe;uy.prototype.delete=ICe;uy.prototype.get=DCe;uy.prototype.has=xCe;uy.prototype.set=MCe;var PCe=uy,rN=PCe,OCe=xT,NCe=AR;function GCe(){this.size=0,this.__data__={hash:new rN,map:new(NCe||OCe),string:new rN}}var UCe=GCe;function LCe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var BCe=LCe,FCe=BCe;function $Ce(t,e){var i=t.__data__;return FCe(e)?i[typeof e=="string"?"string":"hash"]:i.map}var PT=$Ce,HCe=PT;function VCe(t){var e=HCe(this,t).delete(t);return this.size-=e?1:0,e}var qCe=VCe,YCe=PT;function WCe(t){return YCe(this,t).get(t)}var jCe=WCe,zCe=PT;function XCe(t){return zCe(this,t).has(t)}var KCe=XCe,ZCe=PT;function QCe(t,e){var i=ZCe(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}var JCe=QCe,eSe=UCe,tSe=qCe,iSe=jCe,nSe=KCe,rSe=JCe;function dy(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}dy.prototype.clear=eSe;dy.prototype.delete=tSe;dy.prototype.get=iSe;dy.prototype.has=nSe;dy.prototype.set=rSe;var i5=dy,sSe=xT,aSe=AR,oSe=i5,lSe=200;function cSe(t,e){var i=this.__data__;if(i instanceof sSe){var n=i.__data__;if(!aSe||n.length<lSe-1)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new oSe(n)}return i.set(t,e),this.size=i.size,this}var uSe=cSe,dSe=xT,hSe=Q1e,fSe=ewe,pSe=iwe,mSe=rwe,ySe=uSe;function hy(t){var e=this.__data__=new dSe(t);this.size=e.size}hy.prototype.clear=hSe;hy.prototype.delete=fSe;hy.prototype.get=pSe;hy.prototype.has=mSe;hy.prototype.set=ySe;var n5=hy,gSe="__lodash_hash_undefined__";function vSe(t){return this.__data__.set(t,gSe),this}var bSe=vSe;function _Se(t){return this.__data__.has(t)}var ESe=_Se,TSe=i5,wSe=bSe,CSe=ESe;function xE(t){var e=-1,i=t==null?0:t.length;for(this.__data__=new TSe;++e<i;)this.add(t[e])}xE.prototype.add=xE.prototype.push=wSe;xE.prototype.has=CSe;var SSe=xE;function kSe(t,e){for(var i=-1,n=t==null?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}var ASe=kSe;function RSe(t,e){return t.has(e)}var ISe=RSe,DSe=SSe,xSe=ASe,MSe=ISe,PSe=1,OSe=2;function NSe(t,e,i,n,r,s){var a=i&PSe,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var m=-1,y=!0,_=i&OSe?new DSe:void 0;for(s.set(t,e),s.set(e,t);++m<o;){var E=t[m],C=e[m];if(n)var S=a?n(C,E,m,e,t,s):n(E,C,m,t,e,s);if(S!==void 0){if(S)continue;y=!1;break}if(_){if(!xSe(e,function(k,R){if(!MSe(_,R)&&(E===k||r(E,k,i,n,s)))return _.push(R)})){y=!1;break}}else if(!(E===C||r(E,C,i,n,s))){y=!1;break}}return s.delete(t),s.delete(e),y}var r5=NSe,GSe=yc,USe=GSe.Uint8Array,s5=USe;function LSe(t){var e=-1,i=Array(t.size);return t.forEach(function(n,r){i[++e]=[r,n]}),i}var BSe=LSe;function FSe(t){var e=-1,i=Array(t.size);return t.forEach(function(n){i[++e]=n}),i}var $Se=FSe,sN=SR,aN=s5,HSe=Nb,VSe=r5,qSe=BSe,YSe=$Se,WSe=1,jSe=2,zSe="[object Boolean]",XSe="[object Date]",KSe="[object Error]",ZSe="[object Map]",QSe="[object Number]",JSe="[object RegExp]",eke="[object Set]",tke="[object String]",ike="[object Symbol]",nke="[object ArrayBuffer]",rke="[object DataView]",oN=sN?sN.prototype:void 0,nC=oN?oN.valueOf:void 0;function ske(t,e,i,n,r,s,a){switch(i){case rke:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case nke:return!(t.byteLength!=e.byteLength||!s(new aN(t),new aN(e)));case zSe:case XSe:case QSe:return HSe(+t,+e);case KSe:return t.name==e.name&&t.message==e.message;case JSe:case tke:return t==e+"";case ZSe:var o=qSe;case eke:var c=n&WSe;if(o||(o=YSe),t.size!=e.size&&!c)return!1;var d=a.get(t);if(d)return d==e;n|=jSe,a.set(t,e);var p=VSe(o(t),o(e),n,r,s,a);return a.delete(t),p;case ike:if(nC)return nC.call(t)==nC.call(e)}return!1}var ake=ske;function oke(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}var lke=oke,cke=Array.isArray,OT=cke,uke=lke,dke=OT;function hke(t,e,i){var n=e(t);return dke(t)?n:uke(n,i(t))}var fke=hke;function pke(t,e){for(var i=-1,n=t==null?0:t.length,r=0,s=[];++i<n;){var a=t[i];e(a,i,t)&&(s[r++]=a)}return s}var mke=pke;function yke(){return[]}var gke=yke,vke=mke,bke=gke,_ke=Object.prototype,Eke=_ke.propertyIsEnumerable,lN=Object.getOwnPropertySymbols,Tke=lN?function(t){return t==null?[]:(t=Object(t),vke(lN(t),function(e){return Eke.call(t,e)}))}:bke,wke=Tke;function Cke(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}var Ske=Cke;function kke(t){return t!=null&&typeof t=="object"}var fy=kke,Ake=Gb,Rke=fy,Ike="[object Arguments]";function Dke(t){return Rke(t)&&Ake(t)==Ike}var xke=Dke,cN=xke,Mke=fy,a5=Object.prototype,Pke=a5.hasOwnProperty,Oke=a5.propertyIsEnumerable,Nke=cN(function(){return arguments}())?cN:function(t){return Mke(t)&&Pke.call(t,"callee")&&!Oke.call(t,"callee")},o5=Nke,ME={exports:{}};function Gke(){return!1}var Uke=Gke;ME.exports;(function(t,e){var i=yc,n=Uke,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===r,o=a?i.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||n;t.exports=d})(ME,ME.exports);var RR=ME.exports,Lke=9007199254740991,Bke=/^(?:0|[1-9]\d*)$/;function Fke(t,e){var i=typeof t;return e=e??Lke,!!e&&(i=="number"||i!="symbol"&&Bke.test(t))&&t>-1&&t%1==0&&t<e}var l5=Fke,$ke=9007199254740991;function Hke(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$ke}var c5=Hke,Vke=Gb,qke=c5,Yke=fy,Wke="[object Arguments]",jke="[object Array]",zke="[object Boolean]",Xke="[object Date]",Kke="[object Error]",Zke="[object Function]",Qke="[object Map]",Jke="[object Number]",eAe="[object Object]",tAe="[object RegExp]",iAe="[object Set]",nAe="[object String]",rAe="[object WeakMap]",sAe="[object ArrayBuffer]",aAe="[object DataView]",oAe="[object Float32Array]",lAe="[object Float64Array]",cAe="[object Int8Array]",uAe="[object Int16Array]",dAe="[object Int32Array]",hAe="[object Uint8Array]",fAe="[object Uint8ClampedArray]",pAe="[object Uint16Array]",mAe="[object Uint32Array]",fn={};fn[oAe]=fn[lAe]=fn[cAe]=fn[uAe]=fn[dAe]=fn[hAe]=fn[fAe]=fn[pAe]=fn[mAe]=!0;fn[Wke]=fn[jke]=fn[sAe]=fn[zke]=fn[aAe]=fn[Xke]=fn[Kke]=fn[Zke]=fn[Qke]=fn[Jke]=fn[eAe]=fn[tAe]=fn[iAe]=fn[nAe]=fn[rAe]=!1;function yAe(t){return Yke(t)&&qke(t.length)&&!!fn[Vke(t)]}var gAe=yAe;function vAe(t){return function(e){return t(e)}}var bAe=vAe,PE={exports:{}};PE.exports;(function(t,e){var i=J3,n=e&&!e.nodeType&&e,r=n&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===n,a=s&&i.process,o=function(){try{var c=r&&r.require&&r.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(PE,PE.exports);var _Ae=PE.exports,EAe=gAe,TAe=bAe,uN=_Ae,dN=uN&&uN.isTypedArray,wAe=dN?TAe(dN):EAe,IR=wAe,CAe=Ske,SAe=o5,kAe=OT,AAe=RR,RAe=l5,IAe=IR,DAe=Object.prototype,xAe=DAe.hasOwnProperty;function MAe(t,e){var i=kAe(t),n=!i&&SAe(t),r=!i&&!n&&AAe(t),s=!i&&!n&&!r&&IAe(t),a=i||n||r||s,o=a?CAe(t.length,String):[],c=o.length;for(var d in t)(e||xAe.call(t,d))&&!(a&&(d=="length"||r&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||RAe(d,c)))&&o.push(d);return o}var u5=MAe,PAe=Object.prototype;function OAe(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||PAe;return t===i}var DR=OAe;function NAe(t,e){return function(i){return t(e(i))}}var d5=NAe,GAe=d5,UAe=GAe(Object.keys,Object),LAe=UAe,BAe=DR,FAe=LAe,$Ae=Object.prototype,HAe=$Ae.hasOwnProperty;function VAe(t){if(!BAe(t))return FAe(t);var e=[];for(var i in Object(t))HAe.call(t,i)&&i!="constructor"&&e.push(i);return e}var qAe=VAe,YAe=kR,WAe=c5;function jAe(t){return t!=null&&WAe(t.length)&&!YAe(t)}var NT=jAe,zAe=u5,XAe=qAe,KAe=NT;function ZAe(t){return KAe(t)?zAe(t):XAe(t)}var QAe=ZAe,JAe=fke,eRe=wke,tRe=QAe;function iRe(t){return JAe(t,tRe,eRe)}var nRe=iRe,hN=nRe,rRe=1,sRe=Object.prototype,aRe=sRe.hasOwnProperty;function oRe(t,e,i,n,r,s){var a=i&rRe,o=hN(t),c=o.length,d=hN(e),p=d.length;if(c!=p&&!a)return!1;for(var m=c;m--;){var y=o[m];if(!(a?y in e:aRe.call(e,y)))return!1}var _=s.get(t),E=s.get(e);if(_&&E)return _==e&&E==t;var C=!0;s.set(t,e),s.set(e,t);for(var S=a;++m<c;){y=o[m];var k=t[y],R=e[y];if(n)var O=a?n(R,k,y,e,t,s):n(k,R,y,t,e,s);if(!(O===void 0?k===R||r(k,R,i,n,s):O)){C=!1;break}S||(S=y=="constructor")}if(C&&!S){var I=t.constructor,F=e.constructor;I!=F&&"constructor"in t&&"constructor"in e&&!(typeof I=="function"&&I instanceof I&&typeof F=="function"&&F instanceof F)&&(C=!1)}return s.delete(t),s.delete(e),C}var lRe=oRe,cRe=ep,uRe=yc,dRe=cRe(uRe,"DataView"),hRe=dRe,fRe=ep,pRe=yc,mRe=fRe(pRe,"Promise"),yRe=mRe,gRe=ep,vRe=yc,bRe=gRe(vRe,"Set"),_Re=bRe,ERe=ep,TRe=yc,wRe=ERe(TRe,"WeakMap"),CRe=wRe,US=hRe,LS=AR,BS=yRe,FS=_Re,$S=CRe,h5=Gb,py=t5,fN="[object Map]",SRe="[object Object]",pN="[object Promise]",mN="[object Set]",yN="[object WeakMap]",gN="[object DataView]",kRe=py(US),ARe=py(LS),RRe=py(BS),IRe=py(FS),DRe=py($S),Nh=h5;(US&&Nh(new US(new ArrayBuffer(1)))!=gN||LS&&Nh(new LS)!=fN||BS&&Nh(BS.resolve())!=pN||FS&&Nh(new FS)!=mN||$S&&Nh(new $S)!=yN)&&(Nh=function(t){var e=h5(t),i=e==SRe?t.constructor:void 0,n=i?py(i):"";if(n)switch(n){case kRe:return gN;case ARe:return fN;case RRe:return pN;case IRe:return mN;case DRe:return yN}return e});var xRe=Nh,rC=n5,MRe=r5,PRe=ake,ORe=lRe,vN=xRe,bN=OT,_N=RR,NRe=IR,GRe=1,EN="[object Arguments]",TN="[object Array]",e0="[object Object]",URe=Object.prototype,wN=URe.hasOwnProperty;function LRe(t,e,i,n,r,s){var a=bN(t),o=bN(e),c=a?TN:vN(t),d=o?TN:vN(e);c=c==EN?e0:c,d=d==EN?e0:d;var p=c==e0,m=d==e0,y=c==d;if(y&&_N(t)){if(!_N(e))return!1;a=!0,p=!1}if(y&&!p)return s||(s=new rC),a||NRe(t)?MRe(t,e,i,n,r,s):PRe(t,e,c,i,n,r,s);if(!(i&GRe)){var _=p&&wN.call(t,"__wrapped__"),E=m&&wN.call(e,"__wrapped__");if(_||E){var C=_?t.value():t,S=E?e.value():e;return s||(s=new rC),r(C,S,i,n,s)}}return y?(s||(s=new rC),ORe(t,e,i,n,r,s)):!1}var BRe=LRe,FRe=BRe,CN=fy;function f5(t,e,i,n,r){return t===e?!0:t==null||e==null||!CN(t)&&!CN(e)?t!==t&&e!==e:FRe(t,e,i,n,f5,r)}var $Re=f5,HRe=$Re;function VRe(t,e){return HRe(t,e)}var qRe=VRe;const YRe=ru(qRe);function WRe(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);var i=t.indexOf("Trident/");if(i>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return r>0?parseInt(t.substring(r+5,t.indexOf(".",r)),10):-1}var x0;function HS(){HS.init||(HS.init=!0,x0=WRe()!==-1)}var jRe={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},mounted:function(){var e=this;HS(),this.$nextTick(function(){e._w=e.$el.offsetWidth,e._h=e.$el.offsetHeight,e.emitOnMount&&e.emitSize()});var i=document.createElement("object");this._resizeObject=i,i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex",-1),i.onload=this.addResizeHandlers,i.type="text/html",x0&&this.$el.appendChild(i),i.data="about:blank",x0||this.$el.appendChild(i)},beforeDestroy:function(){this.removeResizeHandlers()},methods:{compareAndNotify:function(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize:function(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!x0&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};function zRe(t,e,i,n,r,s,a,o,c,d){var p=typeof i=="function"?i.options:i;return t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0),p._scopeId=n,i}var XRe=jRe,p5=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},KRe=[];p5._withStripped=!0;var ZRe=void 0,QRe="data-v-8859cc6c",VS=zRe({render:p5,staticRenderFns:KRe},ZRe,XRe,QRe);function JRe(t){t.component("resize-observer",VS),t.component("ResizeObserver",VS)}var eIe={version:"1.0.1",install:JRe},OE=null;typeof window<"u"?OE=window.Vue:typeof global<"u"&&(OE=global.Vue);OE&&OE.use(eIe);var tIe=ep,iIe=function(){try{var t=tIe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),m5=iIe,SN=m5;function nIe(t,e,i){e=="__proto__"&&SN?SN(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var xR=nIe,rIe=xR,sIe=Nb;function aIe(t,e,i){(i!==void 0&&!sIe(t[e],i)||i===void 0&&!(e in t))&&rIe(t,e,i)}var y5=aIe;function oIe(t){return function(e,i,n){for(var r=-1,s=Object(e),a=n(e),o=a.length;o--;){var c=a[t?o:++r];if(i(s[c],c,s)===!1)break}return e}}var lIe=oIe,cIe=lIe,uIe=cIe(),dIe=uIe,NE={exports:{}};NE.exports;(function(t,e){var i=yc,n=e&&!e.nodeType&&e,r=n&&!0&&t&&!t.nodeType&&t,s=r&&r.exports===n,a=s?i.Buffer:void 0,o=a?a.allocUnsafe:void 0;function c(d,p){if(p)return d.slice();var m=d.length,y=o?o(m):new d.constructor(m);return d.copy(y),y}t.exports=c})(NE,NE.exports);var hIe=NE.exports,kN=s5;function fIe(t){var e=new t.constructor(t.byteLength);return new kN(e).set(new kN(t)),e}var pIe=fIe,mIe=pIe;function yIe(t,e){var i=e?mIe(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var gIe=yIe;function vIe(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}var bIe=vIe,_Ie=Jf,AN=Object.create,EIe=function(){function t(){}return function(e){if(!_Ie(e))return{};if(AN)return AN(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}(),TIe=EIe,wIe=d5,CIe=wIe(Object.getPrototypeOf,Object),g5=CIe,SIe=TIe,kIe=g5,AIe=DR;function RIe(t){return typeof t.constructor=="function"&&!AIe(t)?SIe(kIe(t)):{}}var IIe=RIe,DIe=NT,xIe=fy;function MIe(t){return xIe(t)&&DIe(t)}var PIe=MIe,OIe=Gb,NIe=g5,GIe=fy,UIe="[object Object]",LIe=Function.prototype,BIe=Object.prototype,v5=LIe.toString,FIe=BIe.hasOwnProperty,$Ie=v5.call(Object);function HIe(t){if(!GIe(t)||OIe(t)!=UIe)return!1;var e=NIe(t);if(e===null)return!0;var i=FIe.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&v5.call(i)==$Ie}var VIe=HIe;function qIe(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var b5=qIe,YIe=xR,WIe=Nb,jIe=Object.prototype,zIe=jIe.hasOwnProperty;function XIe(t,e,i){var n=t[e];(!(zIe.call(t,e)&&WIe(n,i))||i===void 0&&!(e in t))&&YIe(t,e,i)}var KIe=XIe,ZIe=KIe,QIe=xR;function JIe(t,e,i,n){var r=!i;i||(i={});for(var s=-1,a=e.length;++s<a;){var o=e[s],c=n?n(i[o],t[o],o,i,t):void 0;c===void 0&&(c=t[o]),r?QIe(i,o,c):ZIe(i,o,c)}return i}var eDe=JIe;function tDe(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var iDe=tDe,nDe=Jf,rDe=DR,sDe=iDe,aDe=Object.prototype,oDe=aDe.hasOwnProperty;function lDe(t){if(!nDe(t))return sDe(t);var e=rDe(t),i=[];for(var n in t)n=="constructor"&&(e||!oDe.call(t,n))||i.push(n);return i}var cDe=lDe,uDe=u5,dDe=cDe,hDe=NT;function fDe(t){return hDe(t)?uDe(t,!0):dDe(t)}var _5=fDe,pDe=eDe,mDe=_5;function yDe(t){return pDe(t,mDe(t))}var gDe=yDe,RN=y5,vDe=hIe,bDe=gIe,_De=bIe,EDe=IIe,IN=o5,DN=OT,TDe=PIe,wDe=RR,CDe=kR,SDe=Jf,kDe=VIe,ADe=IR,xN=b5,RDe=gDe;function IDe(t,e,i,n,r,s,a){var o=xN(t,i),c=xN(e,i),d=a.get(c);if(d){RN(t,i,d);return}var p=s?s(o,c,i+"",t,e,a):void 0,m=p===void 0;if(m){var y=DN(c),_=!y&&wDe(c),E=!y&&!_&&ADe(c);p=c,y||_||E?DN(o)?p=o:TDe(o)?p=_De(o):_?(m=!1,p=vDe(c,!0)):E?(m=!1,p=bDe(c,!0)):p=[]:kDe(c)||IN(c)?(p=o,IN(o)?p=RDe(o):(!SDe(o)||CDe(o))&&(p=EDe(c))):m=!1}m&&(a.set(c,p),r(p,c,n,s,a),a.delete(c)),RN(t,i,p)}var DDe=IDe,xDe=n5,MDe=y5,PDe=dIe,ODe=DDe,NDe=Jf,GDe=_5,UDe=b5;function E5(t,e,i,n,r){t!==e&&PDe(e,function(s,a){if(r||(r=new xDe),NDe(s))ODe(t,e,a,i,E5,n,r);else{var o=n?n(UDe(t,a),s,a+"",t,e,r):void 0;o===void 0&&(o=s),MDe(t,a,o)}},GDe)}var LDe=E5;function BDe(t){return t}var T5=BDe;function FDe(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var $De=FDe,HDe=$De,MN=Math.max;function VDe(t,e,i){return e=MN(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=MN(n.length-e,0),a=Array(s);++r<s;)a[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=i(a),HDe(t,this,o)}}var qDe=VDe;function YDe(t){return function(){return t}}var WDe=YDe,jDe=WDe,PN=m5,zDe=T5,XDe=PN?function(t,e){return PN(t,"toString",{configurable:!0,enumerable:!1,value:jDe(e),writable:!0})}:zDe,KDe=XDe,ZDe=800,QDe=16,JDe=Date.now;function exe(t){var e=0,i=0;return function(){var n=JDe(),r=QDe-(n-i);if(i=n,r>0){if(++e>=ZDe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var txe=exe,ixe=KDe,nxe=txe,rxe=nxe(ixe),sxe=rxe,axe=T5,oxe=qDe,lxe=sxe;function cxe(t,e){return lxe(oxe(t,e,axe),t+"")}var uxe=cxe,dxe=Nb,hxe=NT,fxe=l5,pxe=Jf;function mxe(t,e,i){if(!pxe(i))return!1;var n=typeof e;return(n=="number"?hxe(i)&&fxe(e,i.length):n=="string"&&e in i)?dxe(i[e],t):!1}var yxe=mxe,gxe=uxe,vxe=yxe;function bxe(t){return gxe(function(e,i){var n=-1,r=i.length,s=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(s=t.length>3&&typeof s=="function"?(r--,s):void 0,a&&vxe(i[0],i[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++n<r;){var o=i[n];o&&t(e,o,n,s)}return e})}var _xe=bxe,Exe=LDe,Txe=_xe,wxe=Txe(function(t,e,i){Exe(t,e,i)}),Cxe=wxe;const Sxe=ru(Cxe);var MR=function(){};typeof window<"u"&&(MR=window.SVGAnimatedString);function dm(t){return typeof t=="string"&&(t=t.split(" ")),t}function Mg(t,e){var i=dm(e),n;t.className instanceof MR?n=dm(t.className.baseVal):n=dm(t.className),i.forEach(function(r){n.indexOf(r)===-1&&n.push(r)}),t instanceof SVGElement?t.setAttribute("class",n.join(" ")):t.className=n.join(" ")}function qS(t,e){var i=dm(e),n;t.className instanceof MR?n=dm(t.className.baseVal):n=dm(t.className),i.forEach(function(r){var s=n.indexOf(r);s!==-1&&n.splice(s,1)}),t instanceof SVGElement?t.setAttribute("class",n.join(" ")):t.className=n.join(" ")}var Hv=!1;if(typeof window<"u"){Hv=!1;try{var kxe=Object.defineProperty({},"passive",{get:function(){Hv=!0}});window.addEventListener("test",null,kxe)}catch{}}function ON(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Ip(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ON(Object(i),!0).forEach(function(n){Mm(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ON(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}var Axe={container:!1,delay:0,html:!1,placement:"top",title:"",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",offset:0},iv=[],Rxe=function(){function t(e,i){var n=this;FTe(this,t),Mm(this,"_events",[]),Mm(this,"_setTooltipNodeEvent",function(r,s,a,o){var c=r.relatedreference||r.toElement||r.relatedTarget,d=function p(m){var y=m.relatedreference||m.toElement||m.relatedTarget;n._tooltipNode.removeEventListener(r.type,p),s.contains(y)||n._scheduleHide(s,o.delay,o,m)};return n._tooltipNode.contains(c)?(n._tooltipNode.addEventListener(r.type,d),!0):!1}),i=Ip(Ip({},Axe),i),e.jquery&&(e=e[0]),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.reference=e,this.options=i,this._isOpen=!1,this._init()}return HTe(t,[{key:"show",value:function(){this._show(this.reference,this.options)}},{key:"hide",value:function(){this._hide()}},{key:"dispose",value:function(){this._dispose()}},{key:"toggle",value:function(){return this._isOpen?this.hide():this.show()}},{key:"setClasses",value:function(i){this._classes=i}},{key:"setContent",value:function(i){this.options.title=i,this._tooltipNode&&this._setContent(i,this.options)}},{key:"setOptions",value:function(i){var n=!1,r=i&&i.classes||xi.options.defaultClass;YRe(this._classes,r)||(this.setClasses(r),n=!0),i=C5(i);var s=!1,a=!1;(this.options.offset!==i.offset||this.options.placement!==i.placement)&&(s=!0),(this.options.template!==i.template||this.options.trigger!==i.trigger||this.options.container!==i.container||n)&&(a=!0);for(var o in i)this.options[o]=i[o];if(this._tooltipNode)if(a){var c=this._isOpen;this.dispose(),this._init(),c&&this.show()}else s&&this.popperInstance.update()}},{key:"_init",value:function(){var i=typeof this.options.trigger=="string"?this.options.trigger.split(" "):[];this._isDisposed=!1,this._enableDocumentTouch=i.indexOf("manual")===-1,i=i.filter(function(n){return["click","hover","focus"].indexOf(n)!==-1}),this._setEventListeners(this.reference,i,this.options),this.$_originalTitle=this.reference.getAttribute("title"),this.reference.removeAttribute("title"),this.reference.setAttribute("data-original-title",this.$_originalTitle)}},{key:"_create",value:function(i,n){var r=this,s=window.document.createElement("div");s.innerHTML=n.trim();var a=s.childNodes[0];return a.id=this.options.ariaId||"tooltip_".concat(Math.random().toString(36).substr(2,10)),a.setAttribute("aria-hidden","true"),this.options.autoHide&&this.options.trigger.indexOf("hover")!==-1&&(a.addEventListener("mouseenter",function(o){return r._scheduleHide(i,r.options.delay,r.options,o)}),a.addEventListener("click",function(o){return r._scheduleHide(i,r.options.delay,r.options,o)})),a}},{key:"_setContent",value:function(i,n){var r=this;this.asyncContent=!1,this._applyContent(i,n).then(function(){r.popperInstance&&r.popperInstance.update()})}},{key:"_applyContent",value:function(i,n){var r=this;return new Promise(function(s,a){var o=n.html,c=r._tooltipNode;if(c){var d=c.querySelector(r.options.innerSelector);if(i.nodeType===1){if(o){for(;d.firstChild;)d.removeChild(d.firstChild);d.appendChild(i)}}else if(typeof i=="function"){var p=i();p&&typeof p.then=="function"?(r.asyncContent=!0,n.loadingClass&&Mg(c,n.loadingClass),n.loadingContent&&r._applyContent(n.loadingContent,n),p.then(function(m){return n.loadingClass&&qS(c,n.loadingClass),r._applyContent(m,n)}).then(s).catch(a)):r._applyContent(p,n).then(s).catch(a);return}else o?d.innerHTML=i:d.innerText=i;s()}})}},{key:"_show",value:function(i,n){if(n&&typeof n.container=="string"){var r=document.querySelector(n.container);if(!r)return}clearTimeout(this._disposeTimer),n=Object.assign({},n),delete n.offset;var s=!0;this._tooltipNode&&(Mg(this._tooltipNode,this._classes),s=!1);var a=this._ensureShown(i,n);return s&&this._tooltipNode&&Mg(this._tooltipNode,this._classes),Mg(i,["v-tooltip-open"]),a}},{key:"_ensureShown",value:function(i,n){var r=this;if(this._isOpen)return this;if(this._isOpen=!0,iv.push(this),this._tooltipNode)return this._tooltipNode.style.display="",this._tooltipNode.setAttribute("aria-hidden","false"),this.popperInstance.enableEventListeners(),this.popperInstance.update(),this.asyncContent&&this._setContent(n.title,n),this;var s=i.getAttribute("title")||n.title;if(!s)return this;var a=this._create(i,n.template);this._tooltipNode=a,i.setAttribute("aria-describedby",a.id);var o=this._findContainer(n.container,i);this._append(a,o);var c=Ip(Ip({},n.popperOptions),{},{placement:n.placement});return c.modifiers=Ip(Ip({},c.modifiers),{},{arrow:{element:this.options.arrowSelector}}),n.boundariesElement&&(c.modifiers.preventOverflow={boundariesElement:n.boundariesElement}),this.popperInstance=new Ob(i,a,c),this._setContent(s,n),requestAnimationFrame(function(){!r._isDisposed&&r.popperInstance?(r.popperInstance.update(),requestAnimationFrame(function(){r._isDisposed?r.dispose():r._isOpen&&a.setAttribute("aria-hidden","false")})):r.dispose()}),this}},{key:"_noLongerOpen",value:function(){var i=iv.indexOf(this);i!==-1&&iv.splice(i,1)}},{key:"_hide",value:function(){var i=this;if(!this._isOpen)return this;this._isOpen=!1,this._noLongerOpen(),this._tooltipNode.style.display="none",this._tooltipNode.setAttribute("aria-hidden","true"),this.popperInstance&&this.popperInstance.disableEventListeners(),clearTimeout(this._disposeTimer);var n=xi.options.disposeTimeout;return n!==null&&(this._disposeTimer=setTimeout(function(){i._tooltipNode&&(i._tooltipNode.removeEventListener("mouseenter",i.hide),i._tooltipNode.removeEventListener("click",i.hide),i._removeTooltipNode())},n)),qS(this.reference,["v-tooltip-open"]),this}},{key:"_removeTooltipNode",value:function(){if(this._tooltipNode){var i=this._tooltipNode.parentNode;i&&(i.removeChild(this._tooltipNode),this.reference.removeAttribute("aria-describedby")),this._tooltipNode=null}}},{key:"_dispose",value:function(){var i=this;return this._isDisposed=!0,this.reference.removeAttribute("data-original-title"),this.$_originalTitle&&this.reference.setAttribute("title",this.$_originalTitle),this._events.forEach(function(n){var r=n.func,s=n.event;i.reference.removeEventListener(s,r)}),this._events=[],this._tooltipNode?(this._hide(),this._tooltipNode.removeEventListener("mouseenter",this.hide),this._tooltipNode.removeEventListener("click",this.hide),this.popperInstance.destroy(),this.popperInstance.options.removeOnDestroy||this._removeTooltipNode()):this._noLongerOpen(),this}},{key:"_findContainer",value:function(i,n){return typeof i=="string"?i=window.document.querySelector(i):i===!1&&(i=n.parentNode),i}},{key:"_append",value:function(i,n){n.appendChild(i)}},{key:"_setEventListeners",value:function(i,n,r){var s=this,a=[],o=[];n.forEach(function(c){switch(c){case"hover":a.push("mouseenter"),o.push("mouseleave"),s.options.hideOnTargetClick&&o.push("click");break;case"focus":a.push("focus"),o.push("blur"),s.options.hideOnTargetClick&&o.push("click");break;case"click":a.push("click"),o.push("click");break}}),a.forEach(function(c){var d=function(m){s._isOpen!==!0&&(m.usedByTooltip=!0,s._scheduleShow(i,r.delay,r,m))};s._events.push({event:c,func:d}),i.addEventListener(c,d)}),o.forEach(function(c){var d=function(m){m.usedByTooltip!==!0&&s._scheduleHide(i,r.delay,r,m)};s._events.push({event:c,func:d}),i.addEventListener(c,d)})}},{key:"_onDocumentTouch",value:function(i){this._enableDocumentTouch&&this._scheduleHide(this.reference,this.options.delay,this.options,i)}},{key:"_scheduleShow",value:function(i,n,r){var s=this,a=n&&n.show||n||0;clearTimeout(this._scheduleTimer),this._scheduleTimer=window.setTimeout(function(){return s._show(i,r)},a)}},{key:"_scheduleHide",value:function(i,n,r,s){var a=this,o=n&&n.hide||n||0;clearTimeout(this._scheduleTimer),this._scheduleTimer=window.setTimeout(function(){if(a._isOpen!==!1&&a._tooltipNode.ownerDocument.body.contains(a._tooltipNode)){if(s.type==="mouseleave"){var c=a._setTooltipNodeEvent(s,i,n,r);if(c)return}a._hide(i,r)}},o)}}]),t}();typeof document<"u"&&document.addEventListener("touchstart",function(t){for(var e=0;e<iv.length;e++)iv[e]._onDocumentTouch(t)},Hv?{passive:!0,capture:!0}:!0);function NN(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function hm(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?NN(Object(i),!0).forEach(function(n){Mm(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):NN(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}var YS={enabled:!0},GN=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"],w5={defaultPlacement:"top",defaultClass:"vue-tooltip-theme",defaultTargetClass:"has-tooltip",defaultHtml:!0,defaultTemplate:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',defaultArrowSelector:".tooltip-arrow, .tooltip__arrow",defaultInnerSelector:".tooltip-inner, .tooltip__inner",defaultDelay:0,defaultTrigger:"hover focus",defaultOffset:0,defaultContainer:"body",defaultBoundariesElement:void 0,defaultPopperOptions:{},defaultLoadingClass:"tooltip-loading",defaultLoadingContent:"...",autoHide:!0,defaultHideOnTargetClick:!0,disposeTimeout:5e3,popover:{defaultPlacement:"bottom",defaultClass:"vue-popover-theme",defaultBaseClass:"tooltip popover",defaultWrapperClass:"wrapper",defaultInnerClass:"tooltip-inner popover-inner",defaultArrowClass:"tooltip-arrow popover-arrow",defaultOpenClass:"open",defaultDelay:0,defaultTrigger:"click",defaultOffset:0,defaultContainer:"body",defaultBoundariesElement:void 0,defaultPopperOptions:{},defaultAutoHide:!0,defaultHandleResize:!0}};function C5(t){var e={placement:typeof t.placement<"u"?t.placement:xi.options.defaultPlacement,delay:typeof t.delay<"u"?t.delay:xi.options.defaultDelay,html:typeof t.html<"u"?t.html:xi.options.defaultHtml,template:typeof t.template<"u"?t.template:xi.options.defaultTemplate,arrowSelector:typeof t.arrowSelector<"u"?t.arrowSelector:xi.options.defaultArrowSelector,innerSelector:typeof t.innerSelector<"u"?t.innerSelector:xi.options.defaultInnerSelector,trigger:typeof t.trigger<"u"?t.trigger:xi.options.defaultTrigger,offset:typeof t.offset<"u"?t.offset:xi.options.defaultOffset,container:typeof t.container<"u"?t.container:xi.options.defaultContainer,boundariesElement:typeof t.boundariesElement<"u"?t.boundariesElement:xi.options.defaultBoundariesElement,autoHide:typeof t.autoHide<"u"?t.autoHide:xi.options.autoHide,hideOnTargetClick:typeof t.hideOnTargetClick<"u"?t.hideOnTargetClick:xi.options.defaultHideOnTargetClick,loadingClass:typeof t.loadingClass<"u"?t.loadingClass:xi.options.defaultLoadingClass,loadingContent:typeof t.loadingContent<"u"?t.loadingContent:xi.options.defaultLoadingContent,popperOptions:hm({},typeof t.popperOptions<"u"?t.popperOptions:xi.options.defaultPopperOptions)};if(e.offset){var i=of(e.offset),n=e.offset;(i==="number"||i==="string"&&n.indexOf(",")===-1)&&(n="0, ".concat(n)),e.popperOptions.modifiers||(e.popperOptions.modifiers={}),e.popperOptions.modifiers.offset={offset:n}}return e.trigger&&e.trigger.indexOf("click")!==-1&&(e.hideOnTargetClick=!1),e}function S5(t,e){for(var i=t.placement,n=0;n<GN.length;n++){var r=GN[n];e[r]&&(i=r)}return i}function k5(t){var e=of(t);return e==="string"?t:t&&e==="object"?t.content:!1}function Ixe(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=k5(e),r=typeof e.classes<"u"?e.classes:xi.options.defaultClass,s=hm({title:n},C5(hm(hm({},of(e)==="object"?e:{}),{},{placement:S5(e,i)}))),a=t._tooltip=new Rxe(t,s);a.setClasses(r),a._vueEl=t;var o=typeof e.targetClasses<"u"?e.targetClasses:xi.options.defaultTargetClass;return t._tooltipTargetClasses=o,Mg(t,o),a}function A5(t){t._tooltip&&(t._tooltip.dispose(),delete t._tooltip,delete t._tooltipOldShow),t._tooltipTargetClasses&&(qS(t,t._tooltipTargetClasses),delete t._tooltipTargetClasses)}function UN(t,e){var i=e.value;e.oldValue;var n=e.modifiers,r=k5(i);if(!r||!YS.enabled)A5(t);else{var s;t._tooltip?(s=t._tooltip,s.setContent(r),s.setOptions(hm(hm({},i),{},{placement:S5(i,n)}))):s=Ixe(t,i,n),typeof i.show<"u"&&i.show!==t._tooltipOldShow&&(t._tooltipOldShow=i.show,i.show?s.show():s.hide())}}var xi={options:w5,bind:UN,update:UN,unbind:function(e){A5(e)}};function LN(t){t.addEventListener("click",R5),t.addEventListener("touchstart",I5,Hv?{passive:!0}:!1)}function BN(t){t.removeEventListener("click",R5),t.removeEventListener("touchstart",I5),t.removeEventListener("touchend",D5),t.removeEventListener("touchcancel",x5)}function R5(t){var e=t.currentTarget;t.closePopover=!e.$_vclosepopover_touch,t.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}function I5(t){if(t.changedTouches.length===1){var e=t.currentTarget;e.$_vclosepopover_touch=!0;var i=t.changedTouches[0];e.$_vclosepopover_touchPoint=i,e.addEventListener("touchend",D5),e.addEventListener("touchcancel",x5)}}function D5(t){var e=t.currentTarget;if(e.$_vclosepopover_touch=!1,t.changedTouches.length===1){var i=t.changedTouches[0],n=e.$_vclosepopover_touchPoint;t.closePopover=Math.abs(i.screenY-n.screenY)<20&&Math.abs(i.screenX-n.screenX)<20,t.closeAllPopover=e.$_closePopoverModifiers&&!!e.$_closePopoverModifiers.all}}function x5(t){var e=t.currentTarget;e.$_vclosepopover_touch=!1}var Dxe={bind:function(e,i){var n=i.value,r=i.modifiers;e.$_closePopoverModifiers=r,(typeof n>"u"||n)&&LN(e)},update:function(e,i){var n=i.value,r=i.oldValue,s=i.modifiers;e.$_closePopoverModifiers=s,n!==r&&(typeof n>"u"||n?LN(e):BN(e))},unbind:function(e){BN(e)}};function FN(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Ll(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(i),!0).forEach(function(n){Mm(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):FN(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function Vu(t){var e=xi.options.popover[t];return typeof e>"u"?xi.options[t]:e}var M5=!1;typeof window<"u"&&typeof navigator<"u"&&(M5=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);var Bh=[],WS=function(){};typeof window<"u"&&(WS=window.Element);var xxe={name:"VPopover",components:{ResizeObserver:VS},props:{open:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placement:{type:String,default:function(){return Vu("defaultPlacement")}},delay:{type:[String,Number,Object],default:function(){return Vu("defaultDelay")}},offset:{type:[String,Number],default:function(){return Vu("defaultOffset")}},trigger:{type:String,default:function(){return Vu("defaultTrigger")}},container:{type:[String,Object,WS,Boolean],default:function(){return Vu("defaultContainer")}},boundariesElement:{type:[String,WS],default:function(){return Vu("defaultBoundariesElement")}},popperOptions:{type:Object,default:function(){return Vu("defaultPopperOptions")}},popoverClass:{type:[String,Array],default:function(){return Vu("defaultClass")}},popoverBaseClass:{type:[String,Array],default:function(){return xi.options.popover.defaultBaseClass}},popoverInnerClass:{type:[String,Array],default:function(){return xi.options.popover.defaultInnerClass}},popoverWrapperClass:{type:[String,Array],default:function(){return xi.options.popover.defaultWrapperClass}},popoverArrowClass:{type:[String,Array],default:function(){return xi.options.popover.defaultArrowClass}},autoHide:{type:Boolean,default:function(){return xi.options.popover.defaultAutoHide}},handleResize:{type:Boolean,default:function(){return xi.options.popover.defaultHandleResize}},openGroup:{type:String,default:null},openClass:{type:[String,Array],default:function(){return xi.options.popover.defaultOpenClass}},ariaId:{default:null}},data:function(){return{isOpen:!1,id:Math.random().toString(36).substr(2,10)}},computed:{cssClass:function(){return Mm({},this.openClass,this.isOpen)},popoverId:function(){return"popover_".concat(this.ariaId!=null?this.ariaId:this.id)}},watch:{open:function(e){e?this.show():this.hide()},disabled:function(e,i){e!==i&&(e?this.hide():this.open&&this.show())},container:function(e){if(this.isOpen&&this.popperInstance){var i=this.$refs.popover,n=this.$refs.trigger,r=this.$_findContainer(this.container,n);if(!r){console.warn("No container for popover",this);return}r.appendChild(i),this.popperInstance.scheduleUpdate()}},trigger:function(e){this.$_removeEventListeners(),this.$_addEventListeners()},placement:function(e){var i=this;this.$_updatePopper(function(){i.popperInstance.options.placement=e})},offset:"$_restartPopper",boundariesElement:"$_restartPopper",popperOptions:{handler:"$_restartPopper",deep:!0}},created:function(){this.$_isDisposed=!1,this.$_mounted=!1,this.$_events=[],this.$_preventOpen=!1},mounted:function(){var e=this.$refs.popover;e.parentNode&&e.parentNode.removeChild(e),this.$_init(),this.open&&this.show()},deactivated:function(){this.hide()},beforeDestroy:function(){this.dispose()},methods:{show:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=i.event;i.skipDelay;var r=i.force,s=r===void 0?!1:r;(s||!this.disabled)&&(this.$_scheduleShow(n),this.$emit("show")),this.$emit("update:open",!0),this.$_beingShowed=!0,requestAnimationFrame(function(){e.$_beingShowed=!1})},hide:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.event;e.skipDelay,this.$_scheduleHide(i),this.$emit("hide"),this.$emit("update:open",!1)},dispose:function(){if(this.$_isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.popperInstance&&(this.popperInstance.destroy(),!this.popperInstance.options.removeOnDestroy)){var e=this.$refs.popover;e.parentNode&&e.parentNode.removeChild(e)}this.$_mounted=!1,this.popperInstance=null,this.isOpen=!1,this.$emit("dispose")},$_init:function(){this.trigger.indexOf("manual")===-1&&this.$_addEventListeners()},$_show:function(){var e=this,i=this.$refs.trigger,n=this.$refs.popover;if(clearTimeout(this.$_disposeTimer),!this.isOpen){if(this.popperInstance&&(this.isOpen=!0,this.popperInstance.enableEventListeners(),this.popperInstance.scheduleUpdate()),!this.$_mounted){var r=this.$_findContainer(this.container,i);if(!r){console.warn("No container for popover",this);return}r.appendChild(n),this.$_mounted=!0,this.isOpen=!1,this.popperInstance&&requestAnimationFrame(function(){e.hidden||(e.isOpen=!0)})}if(!this.popperInstance){var s=Ll(Ll({},this.popperOptions),{},{placement:this.placement});if(s.modifiers=Ll(Ll({},s.modifiers),{},{arrow:Ll(Ll({},s.modifiers&&s.modifiers.arrow),{},{element:this.$refs.arrow})}),this.offset){var a=this.$_getOffset();s.modifiers.offset=Ll(Ll({},s.modifiers&&s.modifiers.offset),{},{offset:a})}this.boundariesElement&&(s.modifiers.preventOverflow=Ll(Ll({},s.modifiers&&s.modifiers.preventOverflow),{},{boundariesElement:this.boundariesElement})),this.popperInstance=new Ob(i,n,s),requestAnimationFrame(function(){if(e.hidden){e.hidden=!1,e.$_hide();return}!e.$_isDisposed&&e.popperInstance?(e.popperInstance.scheduleUpdate(),requestAnimationFrame(function(){if(e.hidden){e.hidden=!1,e.$_hide();return}e.$_isDisposed?e.dispose():e.isOpen=!0})):e.dispose()})}var o=this.openGroup;if(o)for(var c,d=0;d<Bh.length;d++)c=Bh[d],c.openGroup!==o&&(c.hide(),c.$emit("close-group"));Bh.push(this),this.$emit("apply-show")}},$_hide:function(){var e=this;if(this.isOpen){var i=Bh.indexOf(this);i!==-1&&Bh.splice(i,1),this.isOpen=!1,this.popperInstance&&this.popperInstance.disableEventListeners(),clearTimeout(this.$_disposeTimer);var n=xi.options.popover.disposeTimeout||xi.options.disposeTimeout;n!==null&&(this.$_disposeTimer=setTimeout(function(){var r=e.$refs.popover;r&&(r.parentNode&&r.parentNode.removeChild(r),e.$_mounted=!1)},n)),this.$emit("apply-hide")}},$_findContainer:function(e,i){return typeof e=="string"?e=window.document.querySelector(e):e===!1&&(e=i.parentNode),e},$_getOffset:function(){var e=of(this.offset),i=this.offset;return(e==="number"||e==="string"&&i.indexOf(",")===-1)&&(i="0, ".concat(i)),i},$_addEventListeners:function(){var e=this,i=this.$refs.trigger,n=[],r=[],s=typeof this.trigger=="string"?this.trigger.split(" ").filter(function(a){return["click","hover","focus"].indexOf(a)!==-1}):[];s.forEach(function(a){switch(a){case"hover":n.push("mouseenter"),r.push("mouseleave");break;case"focus":n.push("focus"),r.push("blur");break;case"click":n.push("click"),r.push("click");break}}),n.forEach(function(a){var o=function(d){e.isOpen||(d.usedByTooltip=!0,!e.$_preventOpen&&e.show({event:d}),e.hidden=!1)};e.$_events.push({event:a,func:o}),i.addEventListener(a,o)}),r.forEach(function(a){var o=function(d){d.usedByTooltip||(e.hide({event:d}),e.hidden=!0)};e.$_events.push({event:a,func:o}),i.addEventListener(a,o)})},$_scheduleShow:function(){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(clearTimeout(this.$_scheduleTimer),e)this.$_show();else{var i=parseInt(this.delay&&this.delay.show||this.delay||0);this.$_scheduleTimer=setTimeout(this.$_show.bind(this),i)}},$_scheduleHide:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(clearTimeout(this.$_scheduleTimer),n)this.$_hide();else{var r=parseInt(this.delay&&this.delay.hide||this.delay||0);this.$_scheduleTimer=setTimeout(function(){if(e.isOpen){if(i&&i.type==="mouseleave"){var s=e.$_setTooltipNodeEvent(i);if(s)return}e.$_hide()}},r)}},$_setTooltipNodeEvent:function(e){var i=this,n=this.$refs.trigger,r=this.$refs.popover,s=e.relatedreference||e.toElement||e.relatedTarget,a=function o(c){var d=c.relatedreference||c.toElement||c.relatedTarget;r.removeEventListener(e.type,o),n.contains(d)||i.hide({event:c})};return r.contains(s)?(r.addEventListener(e.type,a),!0):!1},$_removeEventListeners:function(){var e=this.$refs.trigger;this.$_events.forEach(function(i){var n=i.func,r=i.event;e.removeEventListener(r,n)}),this.$_events=[]},$_updatePopper:function(e){this.popperInstance&&(e(),this.isOpen&&this.popperInstance.scheduleUpdate())},$_restartPopper:function(){if(this.popperInstance){var e=this.isOpen;this.dispose(),this.$_isDisposed=!1,this.$_init(),e&&this.show({skipDelay:!0,force:!0})}},$_handleGlobalClose:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.$_beingShowed||(this.hide({event:e}),e.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),n&&(this.$_preventOpen=!0,setTimeout(function(){i.$_preventOpen=!1},300)))},$_handleResize:function(){this.isOpen&&this.popperInstance&&(this.popperInstance.scheduleUpdate(),this.$emit("resize"))}}};typeof document<"u"&&typeof window<"u"&&(M5?document.addEventListener("touchend",Pxe,Hv?{passive:!0,capture:!0}:!0):window.addEventListener("click",Mxe,!0));function Mxe(t){P5(t)}function Pxe(t){P5(t,!0)}function P5(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=function(s){var a=Bh[s];if(a.$refs.popover){var o=a.$refs.popover.contains(t.target);requestAnimationFrame(function(){(t.closeAllPopover||t.closePopover&&o||a.autoHide&&!o)&&a.$_handleGlobalClose(t,e)})}},n=0;n<Bh.length;n++)i(n)}function Oxe(t,e,i,n,r,s,a,o,c,d){const p=typeof i=="function"?i.options:i;return t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0),i}var Nxe=xxe,O5=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"v-popover",class:e.cssClass},[n("div",{ref:"trigger",staticClass:"trigger",staticStyle:{display:"inline-block"},attrs:{"aria-describedby":e.isOpen?e.popoverId:void 0,tabindex:e.trigger.indexOf("focus")!==-1?0:void 0}},[e._t("default")],2),e._v(" "),n("div",{ref:"popover",class:[e.popoverBaseClass,e.popoverClass,e.cssClass],style:{visibility:e.isOpen?"visible":"hidden"},attrs:{id:e.popoverId,"aria-hidden":e.isOpen?"false":"true",tabindex:e.autoHide?0:void 0},on:{keyup:function(s){if(!s.type.indexOf("key")&&e._k(s.keyCode,"esc",27,s.key,["Esc","Escape"]))return null;e.autoHide&&e.hide()}}},[n("div",{class:e.popoverWrapperClass},[n("div",{ref:"inner",class:e.popoverInnerClass,staticStyle:{position:"relative"}},[n("div",[e._t("popover",null,{isOpen:e.isOpen})],2),e._v(" "),e.handleResize?n("ResizeObserver",{on:{notify:e.$_handleResize}}):e._e()],1),e._v(" "),n("div",{ref:"arrow",class:e.popoverArrowClass})])])])},Gxe=[];O5._withStripped=!0;var Uxe=void 0,Lxe=Oxe({render:O5,staticRenderFns:Gxe},Uxe,Nxe);function Bxe(t,e){e===void 0&&(e={});var i=e.insertAt;if(!(typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",i==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var Fxe=".resize-observer[data-v-8859cc6c]{position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;border:none;background-color:transparent;pointer-events:none;display:block;overflow:hidden;opacity:0}.resize-observer[data-v-8859cc6c] object{display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1}";Bxe(Fxe);function jS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!jS.installed){jS.installed=!0;var i={};Sxe(i,w5,e),my.options=i,xi.options=i,t.directive("tooltip",xi),t.directive("close-popover",Dxe),t.component("VPopover",Lxe)}}var my={install:jS,get enabled(){return YS.enabled},set enabled(t){YS.enabled=t}},GE=null;typeof window<"u"?GE=window.Vue:typeof global<"u"&&(GE=global.Vue);GE&&GE.use(my);function M0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M0=function(e){return typeof e}:M0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}function zS(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function $N(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function XS(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?$N(Object(i),!0).forEach(function(n){zS(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$N(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}var $xe=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,r){if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");if(a.async=!0,a.src=e,a.defer=i.defer,i.preconnectOrigin){var o=document.createElement("link");o.href=i.preconnectOrigin,o.rel="preconnect",s.appendChild(o)}s.appendChild(a),a.onload=n,a.onerror=r}})},KS=function(e){return typeof e=="function"},sC=function(e){return e&&M0(e)==="object"&&!Array.isArray(e)},Hxe=function t(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];if(!n.length)return e;var s=n.shift();if(!(!sC(e)||!sC(s))){for(var a in s)sC(s[a])?(e[a]||Object.assign(e,zS({},a,{})),t(e[a],s[a])):Object.assign(e,zS({},a,s[a]));return t.apply(void 0,[e].concat(n))}},Ub=function(){return!(typeof window>"u"||typeof document>"u")},HN=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Ub()},Vxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return HN('Missing "appName" property inside the plugin options.',e.app_name==null),HN('Missing "name" property in the route.',e.screen_name==null),e};function qxe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=t.split("/"),n=e.split("/");return i[0]===""&&e[e.length-1]==="/"&&i.shift(),n.join("/")+i.join("/")}var Yxe=function(){return{bootstrap:!0,onReady:null,onError:null,onBeforeTrack:null,onAfterTrack:null,pageTrackerTemplate:null,customResourceURL:"https://www.googletagmanager.com/gtag/js",customPreconnectOrigin:"https://www.googletagmanager.com",deferScriptLoad:!1,pageTrackerExcludedRoutes:[],pageTrackerEnabled:!0,enabled:!0,disableScriptLoad:!1,pageTrackerScreenviewEnabled:!1,appName:null,pageTrackerUseFullPath:!1,pageTrackerPrependBase:!0,pageTrackerSkipSamePath:!0,globalDataLayerName:"dataLayer",globalObjectName:"gtag",defaultGroupName:"default",includes:null,config:{id:null,params:{send_page_view:!1}}}},N5={},Wxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Yxe();N5=Hxe(i,e)},oo=function(){return N5},If=function(){var t,e=oo(),i=e.globalObjectName;!Ub()||typeof window[i]>"u"||(t=window)[i].apply(t,arguments)},PR=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=oo(),r=n.config,s=n.includes;If.apply(void 0,["config",r.id].concat(e)),Array.isArray(s)&&s.forEach(function(a){If.apply(void 0,["config",a.id].concat(e))})},VN=function(e,i){Ub()&&(window["ga-disable-".concat(e)]=i)},G5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=oo(),i=e.config,n=e.includes;VN(i.id,t),Array.isArray(n)&&n.forEach(function(r){return VN(r.id,t)})},U5=function(){G5(!0)},jxe=function(){G5(!1)},L5,zxe=function(e){L5=e},OR=function(){return L5},tp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=oo(),n=i.includes,r=i.defaultGroupName;e.send_to==null&&Array.isArray(n)&&n.length&&(e.send_to=n.map(function(s){return s.id}).concat(r)),If("event",t,e)},B5=function(t){if(Ub()){var e;if(typeof t=="string")e={page_path:t};else if(t.path||t.fullPath){var i=oo(),n=i.pageTrackerUseFullPath,r=i.pageTrackerPrependBase,s=OR(),a=s&&s.options.base,o=n?t.fullPath:t.path;e=XS(XS({},t.name&&{page_title:t.name}),{},{page_path:r?qxe(o,a):o})}else e=t;e.page_location==null&&(e.page_location=window.location.href),e.send_page_view==null&&(e.send_page_view=!0),tp("page_view",e)}},F5=function(t){var e=oo(),i=e.appName;if(t){var n;typeof t=="string"?n={screen_name:t}:n=t,n.app_name=n.app_name||i,tp("screen_view",n)}},Xxe=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];tp.apply(void 0,["exception"].concat(e))},Kxe=function(t){PR("linker",t)},Zxe=function(t){tp("timing_complete",t)},Qxe=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];If.apply(void 0,["set"].concat(e))},Jxe=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];tp.apply(void 0,["refund"].concat(e))},eMe=function(t){tp("purchase",t)},tMe=function(t){PR({custom_map:t})},iMe=Object.freeze({__proto__:null,query:If,config:PR,optOut:U5,optIn:jxe,pageview:B5,screenview:F5,exception:Xxe,linker:Kxe,time:Zxe,set:Qxe,refund:Jxe,purchase:eMe,customMap:tMe,event:tp}),nMe=function(e){return e.$gtag=e.prototype.$gtag=iMe},rMe=function(){if(Ub()){var t=oo(),e=t.enabled,i=t.globalObjectName,n=t.globalDataLayerName;return window[i]==null&&(window[n]=window[n]||[],window[i]=function(){window[n].push(arguments)}),window[i]("js",new Date),e||U5(),window[i]}},qN=function(e){return XS({send_page_view:!1},e)},$5=function(){var t=oo(),e=t.config,i=t.includes;If("config",e.id,qN(e.params)),Array.isArray(i)&&i.forEach(function(n){If("config",n.id,qN(n.params))})},YN=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=oo(),n=i.appName,r=i.pageTrackerTemplate,s=i.pageTrackerScreenviewEnabled,a=i.pageTrackerSkipSamePath;if(!(a&&t.path===e.path)){var o=t;if(KS(r)?o=r(t,e):s&&(o=Vxe({app_name:n,screen_name:t.name})),s){F5(o);return}B5(o)}},WN=function(e){var i=oo(),n=i.pageTrackerExcludedRoutes;return n.includes(e.path)||n.includes(e.name)},sMe=function(){var t=oo(),e=t.onBeforeTrack,i=t.onAfterTrack,n=OR();n.onReady(function(){Sn.nextTick().then(function(){var r=n.currentRoute;$5(),!WN(r)&&YN(r)}),n.afterEach(function(r,s){Sn.nextTick().then(function(){WN(r)||(KS(e)&&e(r,s),YN(r,s),KS(i)&&i(r,s))})})})},aMe=function(){var t=oo(),e=t.onReady,i=t.onError,n=t.globalObjectName,r=t.globalDataLayerName,s=t.config,a=t.customResourceURL,o=t.customPreconnectOrigin,c=t.deferScriptLoad,d=t.pageTrackerEnabled,p=t.disableScriptLoad,m=!!(d&&OR());if(rMe(),m?sMe():$5(),!p)return $xe("".concat(a,"?id=").concat(s.id,"&l=").concat(r),{preconnectOrigin:o,defer:c}).then(function(){e&&e(window[n])}).catch(function(y){return i&&i(y),y})},oMe=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;nMe(e),Wxe(i),zxe(n),oo().bootstrap&&aMe()};class Yt{static initializeVars(){Yt._wasLongPress=!1,Yt._pressTimer=null,Yt._currentCancelHandler=null,Yt._currentTarget=null,Yt._pressCount=0}static addTo(e,i,n){if(!Object.prototype.hasOwnProperty.call(n,"longPress"))throw"Need to specify a longPress handler";const r=s=>Yt._pressBegin(i,n.longPress,n.cancel,n.repeat,s);e.addEventListener("mousedown",r),e.addEventListener("touchstart",r),e.addEventListener("mouseout",Yt._cancelCurrentPress),e.addEventListener("touchcancel",Yt._cancelCurrentPress),e.addEventListener("touchmove",s=>{s.preventDefault();const a=s.changedTouches[0];e!==document.elementFromPoint(a.pageX,a.pageY)&&Yt._cancelCurrentPress()}),n.click?(e.addEventListener("click",s=>Yt._handleClick(s,n.click)),e.addEventListener("touchend",s=>Yt._handleTouchEnd(s,n.click))):(e.addEventListener("click",Yt._cancelCurrentPress),e.addEventListener("touchend",Yt._cancelCurrentPress))}static _cancelCurrentPress(e){Yt._currentCancelHandler&&(Yt._currentCancelHandler(e),Yt._currentCancelHandler=null),Yt._pressTimer!==null&&(clearTimeout(Yt._pressTimer),Yt._pressTimer=null),Yt._wasLongPress=!1,Yt._currentTarget=null}static _pressBegin(e,i,n,r,s){Yt._cancelCurrentPress(s),!(s.type==="click"&&s.button!==0)&&(++Yt._pressCount,Yt._currentCancelHandler=n,Yt._wasLongPress=!1,Yt._currentTarget=s.target,s.target.focus(),Yt._pressTimer=setTimeout(()=>{Yt._wasLongPress=!0,i(s),r?Yt._beginRepeat(r,i,s):(Yt._pressTimer=null,Yt._currentCancelHandler=null)},e))}static _beginRepeat(e,i,n){Yt._pressTimer=setTimeout(()=>{i(n),Yt._beginRepeat(e,i,n)},e)}static _handleClick(e,i){const n=Yt._wasLongPress;return e.button!==0?i(e):(Yt._cancelCurrentPress(e),n?!1:i(e))}static _handleTouchEnd(e,i){const n=Yt._currentTarget,r=Yt._wasLongPress;return Yt._cancelCurrentPress(e),!r&&n===e.target?i(e):!1}}Yt.initializeVars();function lMe(t){t.directive("long-press",{bind(e,i,n){const r=(s,a)=>{const o=n.data&&n.data.on;o&&o[s]&&o[s].fns(a)};Yt.addTo(e,i.value.delay,{longPress:()=>r("longpress"),cancel:()=>r("longpresscancel"),click:()=>r("longpressclick")})}})}function cMe(t){t.directive("repeating-click",{bind(e,i,n){const r=(s,a)=>{const o=n.data&&n.data.on;o&&o[s]&&o[s].fns(a)};Yt.addTo(e,i.value.delay,{longPress:()=>r("repeatclick"),click:()=>r("firstclick"),repeat:250})}})}const uMe=function(){const t=document.createElement("div");t.classList.add("o-notification");const e="a-notification--enter",i="a-notification--leave";function n(r,s,a=2e3){if(!GameUI.initialized){setTimeout(n,500,r,s,a);return}const o=t.cloneNode();o.textContent=r,o.classList.add(s,e),Xv(o),document.getElementById("notification-container").appendChild(o);let d=!1;function p(){d||(d=!0,o.classList.remove(e))}setTimeout(()=>p(),500);let m=!1;function y(){m||(m=!0,p(),o.classList.add(i),setTimeout(()=>o.remove(),500))}setTimeout(()=>y(),a),o.onclick=()=>y()}return{success:(r,s)=>n(r,"o-notification--success",s),error:(r,s)=>n(r,"o-notification--error",s),info:(r,s)=>n(r,"o-notification--info",s),infinity:(r,s)=>n(r,"o-notification--infinity",s),eternity:(r,s)=>n(r,"o-notification--eternity",s),reality:(r,s)=>n(r,"o-notification--reality",s),automator:(r,s)=>n(r,"o-notification--automator",s),blackHole:(r,s)=>n(r,"o-notification--black-hole",s),strike:(r,s)=>n(r,"o-notification--strike",s),showBlackHoles:!0}}(),H5={view:{modal:{queue:[],current:void 0,cloudConflict:[],progressBar:void 0},quotes:{queue:[],current:void 0,history:void 0},tabs:{reality:{openGlyphWeights:!1,currentGlyphTooltip:-1,glyphTooltipDirection:1,draggingGlyphInfo:{id:0,type:"",sacrificeValue:0},mouseoverGlyphInfo:{id:0,type:"",sacrificeValue:0,refineValue:0,inInventory:!1},automator:{fullScreen:!1,editorScriptID:"",lines:[]}}},shiftDown:!1,theme:"Normal",bigCrunch:!1,scrollWindow:0,draggingUIID:-1,currentContextMenu:null,tab:"dimensions",subtab:"antimatter",newUI:!1,news:!1,initialized:!1,tutorialState:0,tutorialActive:!0,h2pForcedTab:void 0},notationName:"",formatPreBreak:!1,lastClickTime:0},dMe={name:"BlobBackground",props:{bounds:{type:Object,required:!0}},mounted(){this.drop()},methods:{drop(){const e=5+Math.random()*8,i=this.bounds,n={x:Math.random()*(i.x-60),y:60+Math.random()*(i.y-60)};this.$el.textContent=r(),this.$el.setAttribute("x",n.x),this.$el.setAttribute("y",n.y),this.$el.setAttribute("font-size",`${e}em`);function r(){const o="".codePointAt(0)||65,c=[];for(let d=0;d<23;d++)c.push(String.fromCharCode(o+d));return c[Math.floor(Math.random()*c.length)]}}}};var hMe=function(){var e=this,i=e._self._c;return i("text",{staticClass:"o-blob-background"})},fMe=[],pMe=K(dMe,hMe,fMe,!1,null,"68555dd5");const mMe=pMe.exports;var fm=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return t},Out:function(t){return t},InOut:function(t){return t}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return t===1?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return t===0?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-fm.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?fm.Bounce.In(t*2)*.5:fm.Bounce.Out(t*2-1)*.5+.5}}),generatePow:function(t){return t===void 0&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(e*2,t)/2:(1-Math.pow(2-e*2,t))/2+.5}}}}),Qp=function(){return performance.now()},V5=function(){function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(i){return e._tweens[i]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(){for(var e,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];for(var r=0,s=i;r<s.length;r++){var a=s[r];(e=a._group)===null||e===void 0||e.remove(a),a._group=this,this._tweens[a.getId()]=a,this._tweensAddedDuringUpdate[a.getId()]=a}},t.prototype.remove=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var n=0,r=e;n<r.length;n++){var s=r[n];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},t.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},t.prototype.update=function(e,i){e===void 0&&(e=Qp()),i===void 0&&(i=!0);var n=Object.keys(this._tweens);if(n.length!==0)for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],a=!i;s&&s.update(e,a)===!1&&!i&&this.remove(s)}n=Object.keys(this._tweensAddedDuringUpdate)}},t}(),Kh={Linear:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),s=Kh.Utils.Linear;return e<0?s(t[0],t[1],n):e>1?s(t[i],t[i-1],i-n):s(t[r],t[r+1>i?i:r+1],n-r)},Bezier:function(t,e){for(var i=0,n=t.length-1,r=Math.pow,s=Kh.Utils.Bernstein,a=0;a<=n;a++)i+=r(1-e,n-a)*r(e,a)*t[a]*s(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n),s=Kh.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(r=Math.floor(n=i*(1+e))),s(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],n-r)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(s(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):s(t[r?r-1:0],t[r],t[i<r+1?i:r+1],t[i<r+2?i:r+2],n-r)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=Kh.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){var t=[1];return function(e){var i=1;if(t[e])return t[e];for(var n=e;n>1;n--)i*=n;return t[e]=i,i}}(),CatmullRom:function(t,e,i,n,r){var s=(i-t)*.5,a=(n-e)*.5,o=r*r,c=r*o;return(2*e-2*i+s+a)*c+(-3*e+3*i-2*s-a)*o+s*r+e}}},NR=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),ZS=new V5,yMe=function(){function t(e,i){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=fm.Linear.None,this._interpolationFunction=Kh.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=NR.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof i=="object"?(this._group=i,i.add(this)):i===!0&&(this._group=ZS,ZS.add(this))}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.getDuration=function(){return this._duration},t.prototype.to=function(e,i){if(i===void 0&&(i=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=i<0?0:i,this},t.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},t.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},t.prototype.start=function(e,i){if(e===void 0&&(e=Qp()),i===void 0&&(i=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||i){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,i)}return this},t.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},t.prototype._setupProperties=function(e,i,n,r,s){for(var a in n){var o=e[a],c=Array.isArray(o),d=c?"array":typeof o,p=!c&&Array.isArray(n[a]);if(!(d==="undefined"||d==="function")){if(p){var m=n[a];if(m.length===0)continue;for(var y=[o],_=0,E=m.length;_<E;_+=1){var C=this._handleRelativeValue(o,m[_]);if(isNaN(C)){p=!1,console.warn("Found invalid interpolation list. Skipping.");break}y.push(C)}p&&(n[a]=y)}if((d==="object"||c)&&o&&!p){i[a]=c?[]:{};var S=o;for(var k in S)i[a][k]=S[k];r[a]=c?[]:{};var m=n[a];if(!this._isDynamic){var R={};for(var k in m)R[k]=m[k];n[a]=m=R}this._setupProperties(S,i[a],m,r[a],s)}else(typeof i[a]>"u"||s)&&(i[a]=o),c||(i[a]*=1),p?r[a]=n[a].slice().reverse():r[a]=i[a]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},t.prototype.pause=function(e){return e===void 0&&(e=Qp()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},t.prototype.resume=function(e){return e===void 0&&(e=Qp()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},t.prototype.stopChainedTweens=function(){for(var e=0,i=this._chainedTweens.length;e<i;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},t.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},t.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},t.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},t.prototype.easing=function(e){return e===void 0&&(e=fm.Linear.None),this._easingFunction=e,this},t.prototype.interpolation=function(e){return e===void 0&&(e=Kh.Linear),this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,i){var n=this,r;if(e===void 0&&(e=Qp()),i===void 0&&(i=t.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(i)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,o=this._duration+((r=this._repeatDelayTime)!==null&&r!==void 0?r:this._delayTime),c=this._duration+this._repeat*o,d=function(){if(n._duration===0||a>c)return 1;var C=Math.trunc(a/o),S=a-C*o,k=Math.min(S/n._duration,1);return k===0&&a===n._duration?1:k},p=d(),m=this._easingFunction(p);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,m),this._onUpdateCallback&&this._onUpdateCallback(this._object,p),this._duration===0||a>=this._duration)if(this._repeat>0){var y=Math.min(Math.trunc((a-this._duration)/o)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=y);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=o*y,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var _=0,E=this._chainedTweens.length;_<E;_++)this._chainedTweens[_].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,i,n,r){for(var s in n)if(i[s]!==void 0){var a=i[s]||0,o=n[s],c=Array.isArray(e[s]),d=Array.isArray(o),p=!c&&d;p?e[s]=this._interpolationFunction(o,r):typeof o=="object"&&o?this._updateProperties(e[s],a,o,r):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(e[s]=a+(o-a)*r))}},t.prototype._handleRelativeValue=function(e,i){return typeof i!="string"?i:i.charAt(0)==="+"||i.charAt(0)==="-"?e+parseFloat(i):parseFloat(i)},t.prototype._swapEndStartRepeatValues=function(e){var i=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=i},t.autoStartOnUpdate=!1,t}(),gMe="25.0.0",vMe=NR.nextId,cc=ZS,bMe=cc.getAll.bind(cc),_Me=cc.removeAll.bind(cc),EMe=cc.add.bind(cc),TMe=cc.remove.bind(cc),wMe=cc.update.bind(cc),qs={Easing:fm,Group:V5,Interpolation:Kh,now:Qp,Sequence:NR,nextId:vMe,Tween:yMe,VERSION:gMe,getAll:bMe,removeAll:_Me,add:EMe,remove:TMe,update:wMe};const CMe={name:"BlobSnowflake",props:{bounds:{type:Object,required:!0}},mounted(){this.fly()},beforeDestroy(){for(const t of this.tweens)qs.remove(t)},methods:{fly(){const e=50+Math.random()*50,i=160+Math.random()*60,n=1e3+Math.random()*1e4,r=3e3+Math.random()*1e3,s=2+Math.random()*3,a=this.bounds,o={x:-300,y:-150},c=-150,d=a.y+150,p=Math.random()-.5,m=new qs.Tween(o).to({x:`${p<0?"-":"+"}${e}`},r).easing(qs.Easing.Sinusoidal.InOut),y=new qs.Tween(o).to({x:`${p<0?"+":"-"}${e}`},r).easing(qs.Easing.Sinusoidal.InOut),_=new qs.Tween(o).to({y:`+${i}`},r).easing(qs.Easing.Linear.None).onUpdate(()=>{this.$el.setAttribute("x",o.x),this.$el.setAttribute("y",o.y),o.y>d&&(m.chain(E),y.chain(E),_.chain(C))}),E=new qs.Tween(o).to({x:120+Math.random()*(a.x-120*2)},0).chain(m).easing(qs.Easing.Linear.None),C=new qs.Tween(o).to({y:c},0).easing(qs.Easing.Linear.None).chain(_).onUpdate(()=>{this.$el.textContent=S(),this.$el.setAttribute("x",o.x),this.$el.setAttribute("y",o.y),this.$el.setAttribute("font-size",`${s}em`),m.chain(y),y.chain(m),_.chain(_)});E.start(n),C.start(n),this.tweens=[m,y,_,E,C];function S(){const O="".codePointAt(0)||65,I=[];for(let F=0;F<23;F++)I.push(String.fromCharCode(O+F));return Math.random()<GameEnd.endState**2?"":I[Math.floor(Math.random()*I.length)]}}}};var SMe=function(){var e=this,i=e._self._c;return i("text",{staticClass:"o-blob-snowflake"})},kMe=[],AMe=K(CMe,SMe,kMe,!1,null,"b522278c");const RMe=AMe.exports,IMe={name:"BlobSnowflakes",components:{BlobSnowflake:RMe,BlobBackground:mMe},data(){return{animateBackground:!1,count:0,initialized:!1,bounds:{x:0,y:0}}},mounted(){this.updateSize(),window.addEventListener("resize",this.updateSize),this.initialized=!0},destroyed(){window.removeEventListener("resize",this.updateSize)},methods:{update(){this.animateBackground=player.options.animations.background,this.count=player.options.animations.blobSnowflakes},updateSize(){this.bounds.x=document.documentElement.clientWidth,this.bounds.y=document.documentElement.clientHeight}}};var DMe=function(){var e=this,i=e._self._c;return e.initialized?i("div",[e.animateBackground?i("svg",{staticClass:"c-blob-snowflake-container"},e._l(e.count,function(n){return i("BlobSnowflake",{key:n,attrs:{bounds:e.bounds}})}),1):i("svg",{staticClass:"c-blob-background-container"},e._l(e.count,function(n){return i("BlobBackground",{key:n,attrs:{bounds:e.bounds}})}),1)]):e._e()},xMe=[],MMe=K(IMe,DMe,xMe,!1,null,"7a990dd7");const PMe=MMe.exports,OMe={name:"TachyonParticle",props:{bounds:{type:Object,required:!0},isBlob:{type:Boolean,required:!0}},data(){return{blob:""}},mounted(){const t="";this.blob=t[Math.floor(Math.random()*t.length)],this.fly()},beforeDestroy(){qs.remove(this.tween)},methods:{fly(){const t=this.bounds,e={x:Math.random()*t.x,y:Math.random()*t.y},i=m(),n=this.isBlob?.5:0,r=1-n,s=1.5-n,a=r+Math.random()*(s-r),o=y(e,i,{x:0,y:0},t),c={x:e.x+i.x*o,y:e.y+i.y*o},d=Math.max(o/a,1),p=e;this.tween=new qs.Tween(p).to(c,d).onUpdate(()=>{this.$el.setAttribute(this.isBlob?"x":"cx",p.x),this.$el.setAttribute(this.isBlob?"y":"cy",p.y)}).easing(qs.Easing.Linear.None).onComplete(this.fly.bind(this)).start(tweenTime);function m(){const _=Math.random()*2*Math.PI;return{x:Math.cos(_),y:Math.sin(_)}}function y(_,E,C,S){const k={x:1/E.x,y:1/E.y},R=(C.x-_.x)*k.x,O=(S.x-_.x)*k.x,I=(C.y-_.y)*k.y,F=(S.y-_.y)*k.y;return Math.min(Math.max(R,O),Math.max(I,F))}}}};var NMe=function(){var e=this,i=e._self._c;return e.isBlob?i("text",{staticClass:"o-tachyon-particle"},[e._v(" "+e._s(e.blob)+" ")]):i("circle",{staticClass:"o-tachyon-particle",attrs:{r:"2"}})},GMe=[],UMe=K(OMe,NMe,GMe,!1,null,"e2be9bad");const LMe=UMe.exports,BMe={name:"TachyonParticles",components:{TachyonParticle:LMe},data(){return{count:0,initialized:!1,bounds:{x:0,y:0},isBlob:!1}},mounted(){this.$nextTick(this.updateSize),window.addEventListener("resize",this.updateSize),this.initialized=!0},destroyed(){window.removeEventListener("resize",this.updateSize)},methods:{update(){this.count=Currency.tachyonParticles.gte(1)?Math.clampMin(Math.floor(20*Math.log10(Currency.tachyonParticles.exponent)),1):0,this.isBlob=Theme.currentName()==="S11"},updateSize(){this.bounds.x=this.$el.clientWidth,this.bounds.y=this.$el.clientHeight}}};var FMe=function(){var e=this,i=e._self._c;return e.initialized?i("svg",{staticClass:"c-tachyon-particle-container"},e._l(e.count,function(n){return i("TachyonParticle",{key:n,attrs:{bounds:e.bounds,"is-blob":e.isBlob}})}),1):e._e()},$Me=[],HMe=K(BMe,FMe,$Me,!1,null,"36e56b02");const VMe=HMe.exports,qMe={name:"BackgroundAnimations",components:{BlobSnowflakes:PMe,TachyonParticles:VMe},data(){return{blob:!1,animateTachyons:!1}},methods:{update(){this.blob=Theme.currentName()==="S11",this.animateTachyons=player.options.animations.tachyonParticles&&Tabs.current[this.$viewModel.subtab].name==="Time Dilation"}}};var YMe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-background-animations",attrs:{id:"ui-background-animations"}},[e.blob?i("BlobSnowflakes"):e._e(),e.animateTachyons?i("TachyonParticles"):e._e()],1)},WMe=[],jMe=K(qMe,YMe,WMe,!1,null,"e49954ec");const q5=jMe.exports,zMe={name:"BigCrunchButton",data(){return{isModern:!1,smallCrunch:!1,shouldDisplay:!1}},methods:{update(){this.shouldDisplay=!player.break&&Player.canCrunch,this.shouldDisplay&&(this.isModern=player.options.newUI,this.smallCrunch=Time.bestInfinityRealTime.totalMinutes<=1)},handleClick(){PlayerProgress.infinityUnlocked()?bigCrunchResetRequest():Modal.bigCrunch.show()}}};var XMe=function(){var e=this,i=e._self._c;return e.shouldDisplay?i("span",[e.isModern?i("div",[e.smallCrunch?e._e():i("h3",{staticClass:"l-spacing"},[e._v(" The world has collapsed due to excess antimatter. ")]),i("button",{class:{"btn-big-crunch":!0,"btn-big-crunch--small":e.smallCrunch},on:{click:e.handleClick}},[e._v(" Big Crunch ")])]):i("div",[i("button",{class:{"o-tab-btn":!0,"o-big-crunch-btn":!0,"l-old-ui__big-crunch-btn":!0,"l-old-ui__big-crunch-btn--overlay":e.smallCrunch},on:{click:e.handleClick}},[e._v(" Big Crunch ")]),e.smallCrunch?e._e():i("div",{staticClass:"o-emptiness"},[e._v(" The world has collapsed due to excess of antimatter. ")])])]):e._e()},KMe=[],ZMe=K(zMe,XMe,KMe,!1,null,"bf85dac1");const GR=ZMe.exports,QMe={name:"HeaderBlackHoleStatusText",props:{blackHole:{type:Object,required:!0}},data(){return{isUnlocked:!1,state:""}},computed:{id(){return this.blackHole.id}},methods:{update(){this.isUnlocked=this.blackHole.isUnlocked,this.state=this.blackHole.displayState}}};var JMe=function(){var e=this,i=e._self._c;return e.isUnlocked?i("span",[e._v(" 🌀"+e._s(e.id)+":"),i("span",{domProps:{innerHTML:e._s(e.state)}})]):e._e()},ePe=[],tPe=K(QMe,JMe,ePe,!1,null,"7df97e33");const iPe=tPe.exports,nPe={name:"HeaderBlackHole",components:{PrimaryButton:yt,PrimaryToggleButton:cn,HeaderBlackHoleStatusText:iPe},data(){return{canModifyBlackHoles:!1,displaySingle:!1,singleState:"",pauseText:"",canCharge:!1,isCharging:!1,storedTime:0,canAutoRelease:!1,isAutoReleasing:!1}},computed:{blackHoles:()=>BlackHoles.list,id(){return this.blackHole.id},dischargeText(){return`Discharge: ${timeDisplayShort(this.storedTime)}`},hasLongText(){return this.dischargeText.length>15}},watch:{isAutoReleasing(t){player.celestials.enslaved.isAutoReleasing=t}},methods:{update(){this.canModifyBlackHoles=BlackHoles.areUnlocked&&!Laitela.isRunning,this.displaySingle=BlackHoles.arePermanent,this.displaySingle&&(this.singleState=BlackHole(1).displayState),this.pauseText=this.pauseButtonText(),this.canCharge=Enslaved.isUnlocked,this.isCharging=Enslaved.isStoringGameTime,this.storedTime=player.celestials.enslaved.stored,this.canAutoRelease=Ra.unlocks.autoPulseTime.canBeApplied,this.isAutoReleasing=player.celestials.enslaved.isAutoReleasing},pauseButtonText(){if(BlackHoles.arePaused&&player.blackHoleNegative<1)return"Uninvert BH";if(BlackHoles.arePaused)return"Unpause BH";const t=BlackHoles.unpauseAccelerationFactor;return t!==1?`${formatPercents(t,1)} speed`:player.blackHoleNegative<1?"Invert BH":"Pause BH"},timeDisplayShort(t){return timeDisplayShort(t)},chargingClassObject(){return{"o-primary-btn--buy-max c-primary-btn--black-hole-header":!0,"o-bh-charge-disabled":this.isAutoReleasing}}}};var rPe=function(){var e=this,i=e._self._c;return e.canModifyBlackHoles?i("span",{staticClass:"c-black-hole-header"},[i("PrimaryButton",{staticClass:"o-primary-btn--buy-max c-primary-btn--black-hole-header",attrs:{onclick:"BlackHoles.togglePause()"}},[e._v(" "+e._s(e.pauseText)+" ")]),e.canCharge?i("span",[i("PrimaryButton",{class:e.chargingClassObject(),attrs:{onclick:"Enslaved.toggleStoreBlackHole()"}},[e.isCharging?i("span",[e._v(" Stop Charging ")]):i("span",[e._v(" Charge ")])])],1):e._e(),e.displaySingle?i("span",{staticClass:"c-black-hole-status-text",domProps:{innerHTML:e._s("🌀:"+e.singleState)}}):i("span",e._l(e.blackHoles,function(n,r){return i("HeaderBlackHoleStatusText",{key:"state"+r,attrs:{"black-hole":n}})}),1),e.canCharge?i("span",[i("PrimaryButton",{staticClass:"o-discharge-btn c-primary-btn--black-hole-header",class:{"o-small-discharge-text":e.hasLongText},attrs:{onclick:"Enslaved.useStoredTime(false)"}},[e._v(" "+e._s(e.dischargeText)+" ")])],1):e._e(),e.canAutoRelease?i("span",[i("PrimaryToggleButton",{staticClass:"o-primary-btn--buy-max c-primary-btn--black-hole-header",attrs:{label:"Pulse:"},model:{value:e.isAutoReleasing,callback:function(n){e.isAutoReleasing=n},expression:"isAutoReleasing"}})],1):e._e()],1):e._e()},sPe=[],aPe=K(nPe,rPe,sPe,!1,null,"28c9af09");const UR=aPe.exports,oPe={name:"FailableEcText",data(){return{currentResource:new Decimal(0),maximumResource:new Decimal(0),currentEternityChallengeId:0}},computed:{textStyle(){if(this.maximumResource.eq(0))return{};const t=this.currentResource.div(this.maximumResource).toNumber(),e=Theme.current().isDark()&&Theme.current().name!=="S6",i=e?2:1.5;return{color:`rgb(${[Math.round(Math.min(i*t,1)*255),Math.round(Math.min(i*(1-t),1)*255*(e?1:.7)),0].join(",")})`}},text(){return this.currentEternityChallengeId===4?`${formatInt(this.currentResource)} / ${formatInt(this.maximumResource)} Infinities used`:`${TimeSpan.fromSeconds(this.currentResource.toNumber()).toString()} /
        ${TimeSpan.fromSeconds(this.maximumResource.toNumber()).toString()} time spent`}},methods:{update(){EternityChallenge.current&&[4,12].includes(EternityChallenge.current.id)&&(this.currentEternityChallengeId=EternityChallenge.current.id,this.currentEternityChallengeId===4?this.currentResource.copyFrom(Currency.infinities):this.currentResource=new Decimal(Time.thisEternity.totalSeconds),this.maximumResource=new Decimal(EternityChallenge.current.config.restriction(EternityChallenge.current.completions)))}}};var lPe=function(){var e=this,i=e._self._c;return i("span",[e._v(" - "),i("span",{style:e.textStyle},[e._v(e._s(e.text))])])},cPe=[],uPe=K(oPe,lPe,cPe,!1,null,"8a762fed");const dPe=uPe.exports,hPe={name:"HeaderChallengeDisplay",components:{FailableEcText:dPe,PrimaryButton:yt},data(){return{activityTokens:[],infinityUnlocked:!1,showExit:!1,exitText:"",resetCelestial:!1,inPelle:!1}},computed:{parts(){function t(e,i,n){return{name:()=>`${i} Reality`,isActive:r=>r,activityToken:()=>e.isRunning,tabName:()=>n}}return[t(Teresa,"Teresa's","teresa"),t(Effarig,"Effarig's","effarig"),t(Enslaved,"The Nameless Ones'","enslaved"),t(V,"V's","v"),t(Ra,"Ra's","ra"),t(Laitela,"Lai'tela's","laitela"),{name:()=>"Time Dilation",isActive:e=>e,activityToken:()=>player.dilation.active},{name:e=>`Eternity Challenge ${e}`,isActive:e=>e>0,activityToken:()=>player.challenge.eternity.current},{name:e=>`Infinity Challenge ${e}`,isActive:e=>e>0,activityToken:()=>player.challenge.infinity.current},{name:e=>`${NormalChallenge(e).config.name} Challenge`,isActive:e=>e>0,activityToken:()=>player.challenge.normal.current}]},activeChallengeNames(){const t=[];for(let e=0;e<this.activityTokens.length;e++){const i=this.activityTokens[e],n=this.parts[e];if(n.isActive(i))if(n.name(i).includes("Eternity Challenge")){const r=player.challenge.eternity.current,s=EternityChallenge(r).completions+1;let a="";Enslaved.isRunning&&r===1?a=`(${formatInt(s)}/???)`:s===6?a="(already completed)":a=`(${formatInt(s)}/${formatInt(5)})`,t.push(`${n.name(i)} ${a}`)}else t.push(n.name(i))}return t},isVisible(){return this.infinityUnlocked||this.activeChallengeNames.length>0},isInFailableEC(){return this.activeChallengeNames.some(t=>t.match(/Eternity Challenge (4|12)/gu))},challengeDisplay(){return this.inPelle&&this.activeChallengeNames.length>0?`${this.activeChallengeNames.join(" + ")} in a Doomed Reality. Good luck.`:this.inPelle?"a Doomed Reality. Good luck.":this.activeChallengeNames.length===0?"the Antimatter Universe (no active challenges)":this.activeChallengeNames.join(" + ")}},methods:{update(){this.infinityUnlocked=PlayerProgress.infinityUnlocked(),this.activityTokens=this.parts.map(t=>t.activityToken()),this.showExit=this.inPelle&&player.dilation.active?this.activeChallengeNames.length>1:this.activeChallengeNames.length!==0,this.exitText=this.exitDisplay(),this.resetCelestial=player.options.retryCelestial,this.inPelle=Pelle.isDoomed},exitButtonClicked(){let t,e;const i=Player.anyChallenge instanceof EternityChallengeState;if(player.dilation.active&&(!Player.isInAnyChallenge||i)){player.options.confirmations.dilation?Modal.exitDilation.show():startDilatedEternityRequest();return}Player.isInAnyChallenge?(t={chall:this.activeChallengeNames[this.activeChallengeNames.length-1].replace(/\W+\(.*\)/u,""),normal:i?"Eternity":"Infinity"},e=()=>{const r=Player.anyChallenge;Player.anyChallenge.exit(!1),player.options.retryChallenge&&r.requestStart()}):(t={chall:this.activeChallengeNames[0],normal:"Reality"},e=()=>beginProcessReality(getRealityProps(!0))),player.options.confirmations.exitChallenge?Modal.exitChallenge.show({challengeName:t.chall,normalName:t.normal,hasHigherLayers:this.inPelle||this.activeChallengeNames.length>1,exitFn:e}):e()},textClicked(){var i;if(this.activeChallengeNames.length===0)return;let t="",e="";for(let n=this.activityTokens.length-1;n>=0;n--){const r=this.activityTokens[n],s=this.parts[n];if(s.isActive(r)){t=s.name(r),e=(i=s.tabName)==null?void 0:i.call(s);break}}t.match(" Challenge$")?Tab.challenges.normal.show(!0):t.match("Infinity Challenge")?Tab.challenges.infinity.show(!0):t.match("Eternity Challenge")?Tab.challenges.eternity.show(!0):player.dilation.active?Tab.eternity.dilation.show(!0):Tab.celestials[e].show(!0)},exitDisplay(){return Player.isInAnyChallenge?player.options.retryChallenge?"Retry Challenge":"Exit Challenge":player.dilation.active?"Exit Dilation":this.resetCelestial?"Restart Reality":"Exit Reality"},textClassObject(){return{"l-challenge-display":!0,"l-challenge-display--clickable":this.activeChallengeNames.length!==0}}}};var fPe=function(){var e=this,i=e._self._c;return e.isVisible?i("div",{staticClass:"l-game-header__challenge-text"},[i("span",{class:e.textClassObject(),on:{click:e.textClicked}},[e._v(" You are currently in "+e._s(e.challengeDisplay)+" ")]),e.isInFailableEC?i("FailableEcText"):e._e(),i("span",{staticClass:"l-padding-line"}),e.showExit?i("PrimaryButton",{on:{click:e.exitButtonClicked}},[e._v(" "+e._s(e.exitText)+" ")]):e._e()],1):e._e()},pPe=[],mPe=K(hPe,fPe,pPe,!1,null,"a7d77b1e");const LR=mPe.exports,yPe={name:"HeaderChallengeEffects",data(){return{isInMatterChallenge:!1,matter:new Decimal(0),isChallengePowerVisible:!1,challengePower:"",isInEffarig:!1,effarigMultNerfText:"",effarigTickNerfText:"",isInLaitela:!1,laitelaTimer:0,laitelaEntropy:"",waitingforHint:!1,enslavedTimer:""}},computed:{enslavedText(){return`${Enslaved.displayName} are helping you look for cracks in their Reality -
        they can give you some advice in ${this.enslavedTimer}`}},methods:{update(){this.isInMatterChallenge=Player.isInMatterChallenge,this.isInMatterChallenge&&this.matter.copyFrom(Currency.matter),this.updateChallengePower(),this.isInEffarig=Effarig.isRunning,this.isInEffarig&&(this.effarigMultNerfText=`${formatPow(.25+.25*Effarig.nerfFactor(Currency.infinityPower.value),0,5)}`,this.effarigTickNerfText=`${formatPow(.7+.1*Effarig.nerfFactor(Currency.timeShards.value),0,5)}`),this.isInLaitela=Laitela.isRunning,this.isInLaitela&&(player.celestials.laitela.entropy>0?(this.laitelaEntropy=`${formatPercents(player.celestials.laitela.entropy,2,2)}`,this.laitelaTimer=Time.thisRealityRealTime.toStringShort()):(this.laitelaEntropy=`${formatPercents(1,2,2)}`,this.laitelaTimer=TimeSpan.fromSeconds(player.celestials.laitela.thisCompletion).toStringShort())),this.waitingforHint=Enslaved.canTickHintTimer;const t=5*3600*1e3-player.celestials.enslaved.hintUnlockProgress;this.enslavedTimer=TimeSpan.fromMilliseconds(t/(Enslaved.isRunning?1:.4)).toStringShort()},updateChallengePower(){const t=NormalChallenge(2).isRunning,e=NormalChallenge(3).isRunning,i=InfinityChallenge(6).isRunning,n=InfinityChallenge(8).isRunning,r=t||e||i||n;if(this.isChallengePowerVisible=r,r){const s=[];t&&s.push(`Production: ${formatPercents(player.chall2Pow,2,2)}`),e&&s.push(`First dimension: ${formatX(player.chall3Pow,3,4)}`),i&&s.push(`Matter: Antimatter Dimensions /
          ${format(new Decimal(1).timesEffectOf(InfinityChallenge(6)),2,2)}`),n&&s.push(`Production: /
          ${format(new Decimal(1).timesEffectOf(InfinityChallenge(8)).reciprocal(),2,2)}`),this.challengePower=s.join(", ")}}}};var gPe=function(){var e=this,i=e._self._c;return i("div",[e.waitingforHint?i("div",[e._v(" "+e._s(e.enslavedText)+" ")]):e._e(),e.isInEffarig?i("div",[e._v(" Game speed and multipliers are Dilated "+e._s(e.effarigMultNerfText)+" "),i("br"),e._v(" Tickspeed is Dilated "+e._s(e.effarigTickNerfText)+" ")]):e._e(),e.isInLaitela?i("div",[e._v(" Entropy: "+e._s(e.laitelaEntropy)+" ("+e._s(e.laitelaTimer)+") ")]):e._e(),e.isInMatterChallenge?i("div",[e._v(" There is "+e._s(e.format(e.matter,2,1))+" matter. ")]):e._e(),e.isChallengePowerVisible?i("div",[e._v(" "+e._s(e.challengePower)+" ")]):e._e()])},vPe=[],bPe=K(yPe,gPe,vPe,!1,null,"6fb0660d");const BR=bPe.exports,_Pe={name:"ArmageddonButton",props:{isHeader:{type:Boolean,required:!1,default:!1}},data(){return{remnantsGain:0,realityShardGain:new Decimal(0),nextRealityShardGain:new Decimal(0),canArmageddon:!1}},computed:{remnants(){return format(this.remnantsGain,2,this.remnantsGain>1?0:2)},buttonClassObject(){return{"c-armageddon-button":!0,"l-armageddon-button":!this.isHeader,"l-reality-button":this.isHeader,"l-armageddon-button--header":this.isHeader,"c-armageddon-button--unavailable":!this.canArmageddon}}},methods:{update(){this.remnantsGain=Pelle.remnantsGain,this.realityShardGain.copyFrom(Pelle.realityShardGainPerSecond),this.nextRealityShardGain.copyFrom(Pelle.nextRealityShardGain),this.canArmageddon=Pelle.canArmageddon},manualArmageddon(){this.canArmageddon&&(player.options.confirmations.armageddon?Modal.armageddon.show():Pelle.armageddon(!0))}}};var EPe=function(){var e=this,i=e._self._c;return i("button",{class:e.buttonClassObject,on:{click:e.manualArmageddon}},[e.isHeader?i("span",[e._v("You cannot escape a Doomed Reality!"),i("br")]):e._e(),i("span",{staticClass:"c-remnant-gain-display"},[e._v(" Armageddon for "),i("span",{staticClass:"c-remnant-gain"},[e._v(e._s(e.remnants))]),e._v(" Remnants ")]),i("br"),e._v(" Reality Shards "),i("span",{staticClass:"c-reality-shard-gain"},[e._v(e._s(e.format(e.realityShardGain,2,2)))]),e._v("/s ➜ "),i("span",{staticClass:"c-reality-shard-gain"},[e._v(e._s(e.format(e.nextRealityShardGain,2,2)))]),e._v("/s ")])},TPe=[],wPe=K(_Pe,EPe,TPe,!1,null,"06e4f874");const Y5=wPe.exports,CPe={name:"RealityCurrencyHeader",data(){return{isDoomed:!1,currencyValue:new Decimal,currencyName:""}},methods:{update(){if(this.isDoomed=Pelle.isDoomed,this.isDoomed){const t=Currency.realityShards.value;this.currencyValue=format(t,2,2),this.currencyName=pluralize("Reality Shard",t)}else{const t=Currency.realityMachines.value;this.currencyValue=formatMachines(t,Currency.imaginaryMachines.value),this.currencyName=pluralize("Reality Machine",t)}},resourceClass(){return{"c-reality-tab__reality-machines":!0,"c-shard-color":this.isDoomed}}}};var SPe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-reality-currency"},[e._v(" You have "),i("b",{class:e.resourceClass()},[e._v(" "+e._s(e.currencyValue)+" ")]),e._v(" "+e._s(e.currencyName)+". ")])},kPe=[],APe=K(CPe,SPe,kPe,!1,null,"aebc18ca");const RPe=APe.exports,IPe={name:"GameSpeedDisplay",props:{},data(){return{baseSpeed:0,pulsedSpeed:0,hasSeenAlteredSpeed:!1,isStopped:!1,isEC12:!1,isPulsing:!1}},computed:{baseSpeedText(){if(this.isStopped)return"Stopped (storing real time)";const t=this.formatNumber(this.baseSpeed);return this.isEC12?`${t} (fixed)`:`${t}`},pulseSpeedText(){return`${this.formatNumber(this.pulsedSpeed)}`},baseText(){return this.hasSeenAlteredSpeed?this.baseSpeed===1?"The game is running at normal speed.":`Game speed is altered: ${this.baseSpeedText}`:null}},methods:{update(){this.baseSpeed=getGameSpeedupFactor(),this.pulsedSpeed=getGameSpeedupForDisplay(),this.hasSeenAlteredSpeed=PlayerProgress.seenAlteredSpeed(),this.isStopped=Enslaved.isStoringRealTime,this.isEC12=EternityChallenge(12).isRunning,this.isPulsing=this.baseSpeed!==this.pulsedSpeed&&Enslaved.canRelease(!0)},formatNumber(t){return t>=.001&&t<1e4&&t!==1?format(t,3,3):t<.001?`${formatInt(1)} / ${format(1/t,2)}`:`${format(t,2)}`}}};var DPe=function(){var e=this,i=e._self._c;return i("span",{staticClass:"c-gamespeed"},[i("span",[e._v(" "+e._s(e.baseText)+" ")]),e.isPulsing?i("span",[e._v("("),i("i",{staticClass:"fas fa-expand-arrows-alt u-fa-padding"}),e._v(" "+e._s(e.pulseSpeedText)+")")]):e._e()])},xPe=[],MPe=K(IPe,DPe,xPe,!1,null,"4a38b658");const GT=MPe.exports,PPe={name:"HeaderTickspeedInfo",components:{GameSpeedDisplay:GT},data(){return{mult:new Decimal(0),tickspeed:new Decimal(0),galaxyCount:0,purchasedTickspeed:0,freeTickspeed:0}},computed:{tickspeedDisplay(){return`Total Tickspeed: ${format(this.tickspeed,2,3)} / sec`},perUpgrade(){return InfinityChallenge(3).isRunning?`Tickspeed upgrades give
        ${formatX(1.05+this.galaxyCount*.005,3,3)} to all ADs`:`ADs produce ${formatX(this.mult.reciprocal(),2,3)} faster per Tickspeed upgrade`}},methods:{update(){this.mult.copyFrom(Tickspeed.multiplier),this.tickspeed.copyFrom(Tickspeed.perSecond),this.galaxyCount=player.galaxies,this.purchasedTickspeed=player.totalTickBought,this.freeTickspeed=FreeTickspeed.amount}}};var OPe=function(){var e=this,i=e._self._c;return i("div",[i("br"),e._v(" "+e._s(e.perUpgrade)+" "),i("br"),e._v(" "+e._s(e.tickspeedDisplay)+" "),i("br"),i("GameSpeedDisplay")],1)},NPe=[],GPe=K(PPe,OPe,NPe,!1,null,"166aa740");const UPe=GPe.exports,LPe={name:"RealityButton",data(){return{canReality:!1,showSpecialEffect:!1,hasRealityStudy:!1,machinesGained:new Decimal,projectedRM:new Decimal,newIMCap:0,realityTime:0,glyphLevel:0,nextGlyphPercent:0,nextMachineEP:0,shardsGained:0,currentShardsRate:0,bestShardRate:0,bestShardRateVal:0,ppGained:0,celestialRunText:["","","","",""]}},computed:{formatMachinesGained(){return this.machinesGained.gt(0)?`Machines gained: ${format(this.machinesGained,2)}`:"No Machines gained"},formatMachineStats(){return!PlayerProgress.realityUnlocked()&&this.nextMachineEP.gt("1e8000")?"(Capped this Reality!)":this.machinesGained.gt(0)&&this.machinesGained.lt(100)?`(Next at ${format(this.nextMachineEP,2)} EP)`:this.machinesGained.eq(0)&&this.newIMCap===0?`(Projected: ${format(this.projectedRM,2)} RM)`:this.newIMCap!==0?`(iM Cap: ${formatMachines(0,this.newIMCap)})`:this.machinesGained.lt(Number.MAX_VALUE)?`(${format(this.machinesGained.divide(this.realityTime),2,2)} RM/min)`:""},formatGlyphLevel(){return this.glyphLevel>=1e4?`Glyph level: ${formatInt(this.glyphLevel)}`:`Glyph level: ${formatInt(this.glyphLevel)} (${this.nextGlyphPercent} to next)`},showShardsRate(){return this.currentShardsRate},shardsGainedText(){return quantify("Relic Shard",this.shardsGained,2)},classObject(){return{"c-reality-button--unlocked":this.canReality,"c-reality-button--locked":!this.canReality,"c-reality-button--special":this.showSpecialEffect}}},methods:{percentToNextGlyphLevelText(){let e=getGlyphLevelInputs().actualLevel;isFinite(e)||(e=0);const i=this.glyphLevel>1e3?0:1;return`${formatPercents(Math.min(e-Math.floor(e),.999),i)}`},update(){if(this.hasRealityStudy=TimeStudy.reality.isBought,this.canReality=isRealityAvailable(),this.showSpecialEffect=this.hasSpecialReward(),!this.canReality){this.shardsGained=0;return}function t(r){const s=Decimal.divide(r,MachineHandler.realityMachineMultiplier);if(s.lte(1))return Decimal.pow10(4e3);if(s.lte(10))return Decimal.pow10(4e3/27*(s.toNumber()+26));let a=Decimal.pow10(4e3*(s.log10()/3+1));return!PlayerProgress.realityUnlocked()&&a.gte("1e6000")&&(a=a.div("1e6000").pow(4).times("1e6000")),a}const e=simulatedRealityCount(!1)+1;this.projectedRM=MachineHandler.gainedRealityMachines.times(e).clampMax(MachineHandler.hardcapRM),this.newIMCap=MachineHandler.projectedIMCap,this.machinesGained=this.projectedRM.clampMax(MachineHandler.distanceToRMCap),this.realityTime=Time.thisRealityRealTime.totalMinutes,this.glyphLevel=gainedGlyphLevel().actualLevel,this.nextGlyphPercent=this.percentToNextGlyphLevelText(),this.nextMachineEP=t(this.machinesGained.plus(1)),this.ppGained=e,this.shardsGained=Effarig.shardsGained*e,this.currentShardsRate=this.shardsGained/Time.thisRealityRealTime.totalMinutes,this.bestShardRate=player.records.thisReality.bestRSmin*e,this.bestShardRateVal=player.records.thisReality.bestRSminVal*e;const i=this.formatScalingMultiplierText("Glyph Sacrifice",Teresa.runRewardMultiplier,Math.max(Teresa.runRewardMultiplier,Teresa.rewardMultiplier(Currency.antimatter.value))),n=this.formatThresholdText(Teresa.rewardMultiplier(Currency.antimatter.value)>Teresa.runRewardMultiplier,player.celestials.teresa.bestRunAM,"antimatter");this.celestialRunText=[[Teresa.isRunning,i,n]]},handleClick(){this.canReality&&requestManualReality()},formatScalingMultiplierText(t,e,i){return`${t} ${formatX(e,2,2)} ➜ ${formatX(i,2,2)}`},formatThresholdText(t,e,i){return t?"":`(${format(e,2,2)} ${i} to improve)`},hasSpecialReward(){return Teresa.isRunning&&Teresa.rewardMultiplier(Currency.antimatter.value)>Teresa.runRewardMultiplier?!0:Currency.eternityPoints.value.exponent>4e3&&(Effarig.isRunning&&!EffarigUnlock.reality.isUnlocked||Enslaved.isRunning&&!Enslaved.isCompleted)}}};var BPe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-reality-button"},[i("button",{staticClass:"c-reality-button infotooltip",class:e.classObject,on:{click:e.handleClick}},[i("div",{staticClass:"l-reality-button__contents"},[e.canReality?[i("div",{staticClass:"c-reality-button__header"},[e._v(" Make a new Reality ")]),i("div",[e._v(e._s(e.formatMachinesGained)+" "+e._s(e.formatMachineStats))]),i("div",[e._v(e._s(e.formatGlyphLevel))])]:e.hasRealityStudy?[i("div",[e._v("Get "+e._s(e.format("1e4000"))+" Eternity Points to unlock a new Reality")])]:[i("div",[e._v("Purchase the study in the Eternity tab to unlock a new Reality")])],e.canReality?i("div",{staticClass:"infotooltiptext"},[i("div",[e._v("Other resources gained:")]),i("div",[e._v(e._s(e.quantifyInt("Perk Point",e.ppGained)))]),e.shardsGained!==0?i("div",[e._v(" "+e._s(e.shardsGainedText)+" ("+e._s(e.format(e.currentShardsRate,2))+"/min) "),i("br"),e._v(" Peak: "+e._s(e.format(e.bestShardRate,2))+"/min at "+e._s(e.format(e.bestShardRateVal,2))+" RS ")]):e._e(),e._l(e.celestialRunText,function(n,r){return i("div",{key:r},[n[0]?i("span",[e._v(" "+e._s(n[1])+" "),i("br"),e._v(" "+e._s(n[2])+" ")]):e._e()])})],2):e._e()],2)])])},FPe=[],$Pe=K(LPe,BPe,FPe,!1,null,"90489a61");const HPe=$Pe.exports,VPe={name:"HeaderCenterContainer",components:{HeaderTickspeedInfo:UPe,RealityCurrencyHeader:RPe,RealityButton:HPe,ArmageddonButton:Y5},data(){return{shouldDisplay:!0,isModern:!1,hasRealityButton:!1,isDoomed:!1,antimatter:new Decimal(0),antimatterPerSec:new Decimal(0)}},methods:{update(){this.shouldDisplay=player.break||!Player.canCrunch,this.shouldDisplay&&(this.isModern=player.options.newUI,this.isDoomed=Pelle.isDoomed,this.antimatter.copyFrom(Currency.antimatter),this.hasRealityButton=PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought,this.hasRealityButton||this.antimatterPerSec.copyFrom(Currency.antimatter.productionPerSecond))}}};var qPe=function(){var e=this,i=e._self._c;return e.shouldDisplay?i("div",{staticClass:"c-prestige-button-container"},[i("span",[e._v("You have "),i("span",{staticClass:"c-game-header__antimatter"},[e._v(e._s(e.format(e.antimatter,2,1)))]),e._v(" antimatter.")]),e.hasRealityButton?i("div",{staticClass:"c-reality-container"},[i("RealityCurrencyHeader"),e.isDoomed?i("ArmageddonButton",{attrs:{"is-header":!0}}):i("RealityButton")],1):i("div",[e._v(" You are getting "+e._s(e.format(e.antimatterPerSec,2))+" antimatter per second. "),i("br"),i("HeaderTickspeedInfo")],1)]):e._e()},YPe=[],WPe=K(VPe,qPe,YPe,!1,null,"fcd86144");const jPe=WPe.exports,zPe={name:"EternityButton",data(){return{isVisible:!1,type:Nc.FIRST_TIME,gainedEP:new Decimal(0),currentEP:new Decimal(0),currentEPRate:new Decimal(0),peakEPRateVal:new Decimal(0),peakEPRate:new Decimal(0),currentTachyons:new Decimal(0),gainedTachyons:new Decimal(0),challengeCompletions:0,gainedCompletions:0,fullyCompleted:!1,failedRestriction:void 0,hasMoreCompletions:!1,nextGoalAt:new Decimal(0),canEternity:!1,eternityGoal:new Decimal(0),hover:!1,headerTextColored:!0,creditsClosed:!1,showEPRate:!1,isDilation:!1}},computed:{buttonClassObject(){return{"o-eternity-button":!this.isDilation,"o-eternity-button--dilation":this.isDilation,"o-eternity-button--unavailable":!this.canEternity,"o-pelle-disabled-pointer":this.creditsClosed}},rateThreshold:()=>1e40,amountStyle(){if(!this.headerTextColored||this.currentEP.lt(this.rateThreshold))return{"transition-duration":"0s"};if(this.hover)return{color:"black","transition-duration":"0.2s"};const t=getComputedStyle(document.body).getPropertyValue("--color-text").split("#")[1],e=[[255,0,0],[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4),16)],[0,255,0]],i=this.gainedEP.log10()/this.currentEP.log10(),n=s=>{if(i<.9)return e[0][s];if(i<1){const a=10*(i-.9);return Math.round(e[0][s]*(1-a)+e[1][s]*a)}if(i<1.1){const a=10*(i-1);return Math.round(e[1][s]*(1-a)+e[2][s]*a)}return e[2][s]};return{color:`rgb(${[n(0),n(1),n(2)].join(",")})`,"transition-duration":"0.2s"}},tachyonAmountStyle(){if(!this.headerTextColored||this.hover)return{"transition-duration":"0s"};let t;return this.currentTachyons.eq(0)?t=this.gainedTachyons.eq(0)?0:1/0:t=this.gainedTachyons.div(this.currentTachyons).toNumber(),{color:`rgb(${[Math.round(Math.clampMax(1/t,1)*255),Math.round(Math.clampMax(t,1)*255),Math.round(Math.clampMax(t,1/t)*255)].join(",")})`}}},methods:{update(){if(this.isVisible=Player.canEternity||EternityMilestone.autoUnlockID.isReached||InfinityDimension(8).isUnlocked,this.isDilation=player.dilation.active,!this.isVisible)return;if(this.canEternity=Player.canEternity,this.eternityGoal.copyFrom(Player.eternityGoal),this.headerTextColored=player.options.headerTextColored,!this.canEternity){this.type=Nc.CANNOT_ETERNITY;return}if(!PlayerProgress.eternityUnlocked()){this.type=Nc.FIRST_TIME;return}if(EternityChallenge.isRunning){if(!Perk.studyECBulk.isBought){this.type=Nc.CHALLENGE;return}this.type=Nc.CHALLENGE_RUPG,this.updateChallengeWithRUPG();return}const t=gainedEternityPoints();this.currentEP.copyFrom(Currency.eternityPoints),this.gainedEP.copyFrom(t);const e=!PlayerProgress.realityUnlocked()&&Currency.eternityPoints.exponent>=4e3&&!TimeStudy.reality.isBought;if(this.isDilation){this.type=e?Nc.DILATION_EXPLORE_NEW_CONTENT:Nc.DILATION,this.currentTachyons.copyFrom(Currency.tachyonParticles),this.gainedTachyons.copyFrom(getTachyonGain(!0));return}this.type=e?Nc.NORMAL_EXPLORE_NEW_CONTENT:Nc.NORMAL,this.currentEPRate.copyFrom(t.dividedBy(TimeSpan.fromMilliseconds(player.records.thisEternity.realTime).totalMinutes)),this.peakEPRateVal.copyFrom(player.records.thisEternity.bestEPminVal),this.peakEPRate.copyFrom(player.records.thisEternity.bestEPmin),this.showEPRate=this.peakEPRate.lte(this.rateThreshold),this.creditsClosed=GameEnd.creditsEverClosed},updateChallengeWithRUPG(){const t=EternityChallenge.current;if(this.fullyCompleted=t.isFullyCompleted,this.fullyCompleted)return;const e=t.gainedCompletionStatus;this.gainedCompletions=e.gainedCompletions,this.failedRestriction=e.failedRestriction,this.hasMoreCompletions=e.hasMoreCompletions,this.nextGoalAt.copyFrom(e.nextGoalAt)}}},Nc={CANNOT_ETERNITY:-1,FIRST_TIME:0,NORMAL:1,CHALLENGE:2,DILATION:3,NORMAL_EXPLORE_NEW_CONTENT:4,DILATION_EXPLORE_NEW_CONTENT:5,CHALLENGE_RUPG:6};var XPe=function(){var e=this,i=e._self._c;return e.isVisible?i("button",{staticClass:"o-prestige-button",class:e.buttonClassObject,attrs:{onclick:"eternityResetRequest()"},on:{mouseover:function(n){e.hover=!0},mouseleave:function(n){e.hover=!1}}},[e.type===-1?[e._v(" Reach "+e._s(e.format(e.eternityGoal,2,2))+" "),i("br"),e._v(" Infinity Points ")]:e.type===0?[e._v(" Other times await... I need to become Eternal ")]:e.type===1?[e._v(" Eternity for "),i("span",{style:e.amountStyle},[e._v(e._s(e.format(e.gainedEP,2)))]),e.showEPRate?i("span",[e._v(" EP")]):i("span",[e._v(" Eternity "+e._s(e.pluralize("Point",e.gainedEP)))]),i("br"),e.showEPRate?[e._v(" Current: "+e._s(e.format(e.currentEPRate,2,2))+" EP/min "),i("br"),e._v(" Peak: "+e._s(e.format(e.peakEPRate,2,2))+" EP/min "),i("br"),e._v(" at "+e._s(e.format(e.peakEPRateVal,2,2))+" EP ")]:e._e()]:e.type===2||e.type===6&&!e.canEternity?[e._v(" Other challenges await... I need to become Eternal ")]:e.type===3?[e._v(" Eternity for "),i("span",{style:e.tachyonAmountStyle},[e._v(e._s(e.format(e.gainedTachyons,2,1)))]),e._v(" "+e._s(e.pluralize("Tachyon Particle",e.gainedTachyons))+" ")]:e.type===4||e.type===5?[e.type===4?[e._v(" Eternity for "),i("span",{style:e.amountStyle},[e._v(e._s(e.format(e.gainedEP,2,2)))]),e._v(" EP ")]:[e._v(" Eternity for "),i("span",{style:e.tachyonAmountStyle},[e._v(e._s(e.format(e.gainedTachyons,2,1)))]),e._v(" TP ")],i("br"),e._v(" You should explore a bit and look at new content before clicking me! ")]:e.type===6?[e._v(" Other challenges await... "),e.fullyCompleted?[i("br"),e._v(" (This challenge is already fully completed) ")]:[i("br"),e._v(" "+e._s(e.quantifyInt("completion",e.gainedCompletions))+" on Eternity "),e.failedRestriction?[i("br"),e._v(" "+e._s(e.failedRestriction)+" ")]:e.hasMoreCompletions?[i("br"),e._v(" Next goal at "+e._s(e.format(e.nextGoalAt))+" IP ")]:e._e()]]:e._e()],2):e._e()},KPe=[],ZPe=K(zPe,XPe,KPe,!1,null,"7724d591");const QPe=ZPe.exports,JPe={name:"UnlockInfinityDimButton",data(){return{isVisible:!1,canUnlock:!1,hasIPUnlock:!0,amRequirement:new Decimal(0),ipRequirement:0}},computed:{text(){const t=`a new ${this.hasIPUnlock?"type of Dimension":"Infinity Dimension"}.`;if(this.canUnlock)return`Unlock ${t}`;const e=format(this.amRequirement),i=format(this.ipRequirement);return this.hasIPUnlock?`Reach ${i} Infinity Points and ${e} antimatter to unlock ${t}`:`Reach ${e} antimatter to unlock ${t}`},buttonClassObject(){return{"o-prestige-button":!0,"o-infinity-button":!0,"o-infinity-button--unavailable":!this.canUnlock}}},methods:{update(){if(this.isVisible=player.break&&!InfinityDimension(8).isUnlocked&&!Player.canEternity&&!EternityMilestone.autoUnlockID.isReached,!this.isVisible)return;const t=InfinityDimensions.next();this.canUnlock=t.canUnlock,this.hasIPUnlock=t.hasIPUnlock,this.amRequirement=t.amRequirement,this.ipRequirement=t.ipRequirement},tryUnlockNextInfinityDimension(){InfinityDimensions.unlockNext()}}};var eOe=function(){var e=this,i=e._self._c;return e.isVisible?i("button",{class:e.buttonClassObject,on:{click:e.tryUnlockNextInfinityDimension}},[e._v(" "+e._s(e.text)+" ")]):e._e()},tOe=[],iOe=K(JPe,eOe,tOe,!1,null,"c4948b20");const nOe=iOe.exports,rOe={name:"HeaderEternityContainer",components:{EternityButton:QPe,UnlockInfinityDimButton:nOe},data(){return{showContainer:!1,showEP:!1,showNextEP:!1,eternityPoints:new Decimal(0),nextEP:new Decimal(0)}},methods:{update(){this.showContainer=player.break||PlayerProgress.eternityUnlocked(),this.showEP=PlayerProgress.eternityUnlocked(),this.eternityPoints.copyFrom(Currency.eternityPoints.value.floor()),this.showNextEP=Player.canEternity&&player.records.thisReality.maxEP.lt(100)&&gainedEternityPoints().lt(100),this.showNextEP&&this.nextEP.copyFrom(requiredIPForEP(gainedEternityPoints().floor().toNumber()+1))}}};var sOe=function(){var e=this,i=e._self._c;return e.showContainer?i("div",{staticClass:"c-prestige-button-container"},[e.showEP?i("div",{staticClass:"c-eternity-points"},[e._v(" You have "),i("span",{staticClass:"c-game-header__ep-amount"},[e._v(e._s(e.format(e.eternityPoints,2)))]),e._v(" "+e._s(e.pluralize("Eternity Point",e.eternityPoints))+". "),e.showNextEP?i("span",[e._v("(Next EP at "+e._s(e.format(e.nextEP,1))+" IP)")]):e._e()]):e._e(),i("UnlockInfinityDimButton"),i("EternityButton")],1):e._e()},aOe=[],oOe=K(rOe,sOe,aOe,!1,null,"f5c5e058");const lOe=oOe.exports,cOe={name:"BigCrunchButton",data(){return{isVisible:!1,gainedIP:new Decimal(0),currentIPRate:new Decimal(0),peakIPRate:new Decimal(0),peakIPRateVal:new Decimal(0),currentIP:new Decimal(0),tesseractAffordable:!1,canCrunch:!1,infinityGoal:new Decimal(0),inAntimatterChallenge:!1,hover:!1,headerTextColored:!0,creditsClosed:!1,showIPRate:!1}},computed:{buttonClassObject(){return{"o-infinity-button--unavailable":!this.canCrunch,"o-pelle-disabled-pointer":this.creditsClosed}},rateThreshold:()=>5e11,amountStyle(){if(!this.headerTextColored||this.currentIP.lt(this.rateThreshold))return{"transition-duration":"0s"};if(this.hover)return{color:"black","transition-duration":"0.2s"};const t=getComputedStyle(document.body).getPropertyValue("--color-text").split("#")[1],e=[[255,0,0],[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4),16)],[0,255,0]],i=this.gainedIP.log10()/this.currentIP.log10(),n=s=>{if(i<.9)return e[0][s];if(i<1){const a=10*(i-.9);return Math.round(e[0][s]*(1-a)+e[1][s]*a)}if(i<1.1){const a=10*(i-1);return Math.round(e[1][s]*(1-a)+e[2][s]*a)}return e[2][s]};return{color:`rgb(${[n(0),n(1),n(2)].join(",")})`,"transition-duration":"0.2s"}}},methods:{update(){if(this.isVisible=player.break,this.tesseractAffordable=Tesseracts.canBuyTesseract,!this.isVisible)return;this.canCrunch=Player.canCrunch,this.infinityGoal.copyFrom(Player.infinityGoal),this.inAntimatterChallenge=Player.isInAntimatterChallenge,this.headerTextColored=player.options.headerTextColored,this.creditsClosed=GameEnd.creditsEverClosed;const t=gainedInfinityPoints();this.currentIP.copyFrom(Currency.infinityPoints),this.gainedIP.copyFrom(t),this.currentIPRate.copyFrom(t.dividedBy(Math.clampMin(5e-4,Time.thisInfinityRealTime.totalMinutes))),this.peakIPRate.copyFrom(player.records.thisInfinity.bestIPmin),this.peakIPRateVal.copyFrom(player.records.thisInfinity.bestIPminVal),this.showIPRate=this.peakIPRate.lte(this.rateThreshold)},switchToInfinity(){Tab.dimensions.infinity.show(!0)},crunch(){Player.canCrunch&&manualBigCrunchResetRequest()}}};var uOe=function(){var e=this,i=e._self._c;return e.isVisible&&!e.tesseractAffordable?i("button",{staticClass:"o-prestige-button o-infinity-button",class:e.buttonClassObject,on:{click:e.crunch,mouseover:function(n){e.hover=!0},mouseleave:function(n){e.hover=!1}}},[e.canCrunch?e.inAntimatterChallenge?[e._v(" Big Crunch to "),i("br"),e._v(" complete the challenge ")]:[e.showIPRate?e._e():i("div"),i("b",[e._v(" Big Crunch for "),i("span",{style:e.amountStyle},[e._v(e._s(e.format(e.gainedIP,2)))]),e.showIPRate?i("span",[e._v(" IP")]):i("span",[e._v(" Infinity "+e._s(e.pluralize("Point",e.gainedIP)))])]),e.showIPRate?[i("br"),e._v(" Current: "+e._s(e.format(e.currentIPRate,2))+" IP/min "),i("br"),e._v(" Peak: "+e._s(e.format(e.peakIPRate,2))+" IP/min "),i("br"),e._v(" at "+e._s(e.format(e.peakIPRateVal,2))+" IP ")]:i("div")]:[e._v(" Reach "+e._s(e.format(e.infinityGoal,2,2))+" "),i("br"),e._v(" antimatter ")]],2):e.tesseractAffordable?i("button",{staticClass:"o-prestige-button c-game-header__tesseract-available",class:{"o-pelle-disabled-pointer":e.creditsClosed},on:{click:e.switchToInfinity}},[i("b",[e._v(" You have enough Infinity Points to buy a Tesseract ")])]):e._e()},dOe=[],hOe=K(cOe,uOe,dOe,!1,null,"60017359");const fOe=hOe.exports,pOe={name:"HeaderInfinityContainer",components:{BigCrunchButton:fOe},data(){return{showContainer:!1,infinityPoints:new Decimal(0),isTesseractUnlocked:!1,tesseractCost:new Decimal(0),tesseractText:""}},methods:{update(){this.showContainer=player.break||PlayerProgress.infinityUnlocked(),this.infinityPoints.copyFrom(Currency.infinityPoints.value.floor()),this.isTesseractUnlocked=Enslaved.isCompleted,this.tesseractCost=Tesseracts.nextCost,this.tesseractText=this.tesseractProgress()},tesseractProgress(){const t=this.infinityPoints.add(1).log10()/this.tesseractCost.log10();return t>1?`<b>(${formatPercents(1)})</b>`:`(${formatPercents(t,2,2)})`}}};var mOe=function(){var e=this,i=e._self._c;return e.showContainer?i("div",{staticClass:"c-prestige-button-container"},[i("div",{staticClass:"c-infinity-points"},[e._v(" You have "),i("span",{staticClass:"c-game-header__ip-amount"},[e._v(e._s(e.format(e.infinityPoints,2)))]),e._v(" "+e._s(e.pluralize("Infinity Point",e.infinityPoints))+". "),e.isTesseractUnlocked?i("span",{domProps:{innerHTML:e._s(e.tesseractText)}}):e._e()]),i("BigCrunchButton")],1):e._e()},yOe=[],gOe=K(pOe,mOe,yOe,!1,null,"b2a7165e");const vOe=gOe.exports,bOe={name:"HeaderPrestigeGroup",components:{HeaderCenterContainer:jPe,HeaderEternityContainer:lOe,HeaderInfinityContainer:vOe}};var _Oe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-prestige-info-blocks"},[i("HeaderEternityContainer",{staticClass:"l-game-header__eternity"}),i("HeaderCenterContainer",{staticClass:"l-game-header__center"}),i("HeaderInfinityContainer",{staticClass:"l-game-header__infinity"})],1)},EOe=[],TOe=K(bOe,_Oe,EOe,!1,null,"4c47ed9f");const FR=TOe.exports,wOe={name:"GameHeader",components:{HeaderChallengeDisplay:LR,HeaderChallengeEffects:BR,HeaderBlackHole:UR,HeaderPrestigeGroup:FR,GameSpeedDisplay:GT},data(){return{hasReality:!1}},methods:{update(){this.hasReality=PlayerProgress.realityUnlocked()}}};var COe=function(){var e=this,i=e._self._c;return i("div",[i("HeaderChallengeDisplay"),i("HeaderChallengeEffects"),i("HeaderPrestigeGroup"),e.hasReality?i("GameSpeedDisplay"):e._e(),e.hasReality?i("br"):e._e(),i("HeaderBlackHole")],1)},SOe=[],kOe=K(wOe,COe,SOe,!1,null,"1eb3fe17");const AOe=kOe.exports,ROe={name:"NewsTicker",data(){return{enableAnimation:!1}},computed:{lineClass(){return this.enableAnimation?void 0:"c-disable-ticker-animation"}},beforeCreate(){this.recentTickers=[]},mounted(){document.addEventListener("visibilitychange",()=>this.restart.bind(this)),this.restart()},beforeDestroy(){this.clearTimeouts()},methods:{update(){var t;(t=this.currentNews)!=null&&t.dynamic&&(this.$refs.line.innerHTML=this.currentNews.text),this.enableAnimation=player.options.news.includeAnimated},restart(){if(!GameUI.initialized){setTimeout(this.restart.bind(this),100);return}this.clearTimeouts(),!document.hidden&&this.prepareNextMessage()},clearTimeouts(){clearTimeout(this.delayTimeout),clearTimeout(this.scrollTimeout)},prepareNextMessage(){var r,s;const t=this.$refs.line;if(t===void 0)return;const e=a=>(a.unlocked??!0)&&!this.recentTickers.includes(a.id);if(nextNewsMessageId&&GameDatabase.news.find(a=>a.id===nextNewsMessageId))this.currentNews=GameDatabase.news.find(a=>a.id===nextNewsMessageId),nextNewsMessageId=void 0;else if(this.currentNews&&this.currentNews.id==="a236")this.currentNews=GameDatabase.news.filter(a=>a.isAdvertising&&e(a)).randomElement();else{const a=Math.random()<player.options.news.AIChance;this.currentNews=GameDatabase.news.filter(o=>o.id.includes("ai")===a).filter(o=>e(o)).randomElement()}for(this.recentTickers.push(this.currentNews.id);this.recentTickers.length>player.options.news.repeatBuffer;)this.recentTickers.shift();this.currentNews.reset&&this.currentNews.reset();let i=this.currentNews.text;t.innerHTML=i,t.style["transition-duration"]="0ms",((r=this.currentNews)==null?void 0:r.id)==="a244"||((s=this.currentNews)==null?void 0:s.id)==="ai63"?t.style.transform="translateX(-100%)":t.style.transform="translateX(0)";const n=1e3;this.delayTimeout=setTimeout(this.scrollMessage.bind(this),n)},scrollMessage(){const t=this.$refs.line,e=player.options.news.speed*100,i=(this.$refs.ticker.clientWidth+t.clientWidth)/e;t.style["transition-duration"]=`${i}s`,this.currentNews&&this.currentNews.id==="a244"?t.style.transform="translateX(0)":t.style.transform="translateX(-100%)",NewsHandler.addSeenNews(this.currentNews.id),NewsHandler.uniqueTickersSeen>=50&&Achievement(22).unlock(),this.scrollTimeout=setTimeout(this.prepareNextMessage.bind(this),i*1e3)},onLineClick(){if(this.currentNews.onClick===void 0)return;SecretAchievement(24).unlock();const t=this.currentNews.onClick();t!==void 0&&(this.$refs.line.innerHTML=t)}}};var IOe=function(){var e=this,i=e._self._c;return i("div",{ref:"ticker",staticClass:"c-news-ticker"},[i("span",{ref:"line",staticClass:"c-news-line c-news-ticker__line",class:e.lineClass,on:{click:e.onLineClick}})])},DOe=[],xOe=K(ROe,IOe,DOe,!1,null,null);const $R=xOe.exports,MOe={name:"ClassicSubtabButton",props:{subtab:{type:Object,required:!0},parentName:{type:String,required:!0}},data(){return{isAvailable:!1,hasNotification:!1,isCurrentSubtab:!1,tabName:""}},computed:{classObject(){return{"o-tab-btn":!0,"o-tab-btn--secondary":!0,"o-subtab-btn--active":this.isCurrentSubtab,"o-tab-btn--infinity":this.parentName==="Infinity","o-tab-btn--eternity":this.parentName==="Eternity","o-tab-btn--reality":this.parentName==="Reality","o-tab-btn--celestial":this.parentName==="Celestials"}}},methods:{update(){this.isAvailable=this.subtab.isAvailable,this.hasNotification=this.subtab.hasNotification,this.isCurrentSubtab=this.subtab.isOpen&&Theme.currentName()!=="S9",this.tabName=Pelle.transitionText(this.subtab.name,this.subtab.name,Math.max(Math.min(GameEnd.endState-this.subtab.id%4/10,1),0))}}};var POe=function(){var e=this,i=e._self._c;return e.isAvailable?i("button",{class:e.classObject,on:{click:function(n){return e.subtab.show(!0)}}},[e._v(" "+e._s(e.tabName)+" "),e.hasNotification?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()]):e._e()},OOe=[],NOe=K(MOe,POe,OOe,!1,null,"079cbdf5");const GOe=NOe.exports,UOe={name:"ClassicSubtabBar",components:{ClassicSubtabButton:GOe},data(){return{isVisible:!1}},computed:{tab:()=>Tabs.current,subtabs(){return this.tab.subtabs}},methods:{update(){this.isVisible=this.subtabs.countWhere(t=>t.isAvailable)>1}}};var LOe=function(){var e=this,i=e._self._c;return e.isVisible?i("div",{staticClass:"c-subtab-button-container"},e._l(e.subtabs,function(n,r){return i("ClassicSubtabButton",{key:r,attrs:{subtab:n,"parent-name":e.tab.name}})}),1):e._e()},BOe=[],FOe=K(UOe,LOe,BOe,!1,null,"f2987bee");const $Oe=FOe.exports,HOe={name:"ClassicTabButton",props:{tab:{type:Object,required:!0},tabPosition:{type:Number,required:!0}},data(){return{isAvailable:!1,hasNotification:!1,tabName:""}},computed:{isCurrentTab(){return this.tab.isOpen&&Theme.currentName()!=="S9"}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.hasNotification=this.tab.hasNotification,this.tabPosition<Pelle.endTabNames.length?this.tabName=Pelle.transitionText(this.tab.name,Pelle.endTabNames[this.tabPosition],Math.max(Math.min(GameEnd.endState-this.tab.id%4/10,1),0)):this.tabName=this.tab.name}}};var VOe=function(){var e=this,i=e._self._c;return e.isAvailable?i("button",{staticClass:"o-tab-btn",class:[e.tab.config.UIClass,{"o-tab-btn--active":e.isCurrentTab}],on:{click:function(n){return e.tab.show(!0)}}},[e._v(" "+e._s(e.tabName)+" "),e.hasNotification?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()]):e._e()},qOe=[],YOe=K(HOe,VOe,qOe,!1,null,"bbd8f289");const WOe=YOe.exports,jOe={name:"ClassicTabBar",components:{ClassicTabButton:WOe},computed:{tabs:()=>Tabs.oldUI}};var zOe=function(){var e=this,i=e._self._c;return i("div",e._l(e.tabs,function(n,r){return i("ClassicTabButton",{key:r,attrs:{"tab-position":r,tab:n}})}),1)},XOe=[],KOe=K(jOe,zOe,XOe,!1,null,"735a4212");const ZOe=KOe.exports,QOe={name:"EternityPointsHeader",data(){return{eternityPoints:new Decimal}},methods:{update(){this.eternityPoints.copyFrom(Currency.eternityPoints.value.floor())}}};var JOe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-eternity-tab__header"},[e._v(" You have "),i("span",{staticClass:"c-eternity-tab__eternity-points"},[e._v(e._s(e.format(e.eternityPoints,2)))]),e._v(" "+e._s(e.pluralize("Eternity Point",e.eternityPoints))+". ")])},eNe=[],tNe=K(QOe,JOe,eNe,!1,null,"54150313");const iNe=tNe.exports,nNe={name:"InfinityPointsHeader",data(){return{infinityPoints:new Decimal,isVisible:!1}},methods:{update(){this.infinityPoints.copyFrom(Currency.infinityPoints),this.isVisible=PlayerProgress.infinityUnlocked()}}};var rNe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],staticClass:"c-infinity-tab__header"},[e._v(" You have "),i("span",{staticClass:"c-infinity-tab__infinity-points"},[e._v(e._s(e.format(e.infinityPoints,2)))]),e._v(" "+e._s(e.pluralize("Infinity Point",e.infinityPoints))+". ")])},sNe=[],aNe=K(nNe,rNe,sNe,!1,null,"a7ec1a87");const oNe=aNe.exports,lNe={name:"ClassicUi",components:{GameHeader:AOe,ClassicSubtabBar:$Oe,ClassicTabBar:ZOe,NewsTicker:$R,InfinityPointsHeader:oNe,EternityPointsHeader:iNe,BigCrunchButton:GR},data(){return{bigCrunch:!1,smallCrunch:!1,newGameKey:""}},computed:{tab:()=>Tabs.current,news(){return this.$viewModel.news}},methods:{update(){const t=!player.break&&Player.canCrunch;this.bigCrunch=t&&Time.bestInfinityRealTime.totalMinutes>1,this.newGameKey=Pelle.isDoomed}}};var cNe=function(){var e=this,i=e._self._c;return i("div",{key:e.newGameKey,staticClass:"container c-old-ui l-old-ui",attrs:{id:"container"}},[i("link",{attrs:{rel:"stylesheet",type:"text/css",href:"stylesheets/old-ui.css"}}),i("BigCrunchButton"),e.bigCrunch?e._e():[e.news?i("NewsTicker",{staticClass:"l-old-ui__news-bar"}):e._e(),i("GameHeader",{staticClass:"l-old-ui__header"}),i("ClassicTabBar"),e.tab.config.before?i(e.tab.config.before,{tag:"component"}):e._e(),i("ClassicSubtabBar"),i("div",{staticClass:"l-old-ui__page"},[e._t("default")],2)]],2)},uNe=[],dNe=K(lNe,cNe,uNe,!1,null,"82ad2e8f");const hNe=dNe.exports,fNe={name:"CelestialQuoteBackground",props:{celestialSymbols:{type:Array,required:!0},celestials:{type:Array,required:!0},primary:{type:Boolean,required:!0}},computed:{modalClass(){return{"l-modal-celestial-quote":!0}}},methods:{styleObject(t,e,i){const n=`var(--color-${t[0]}--base)`;return t[0]==="laitela"?{color:`var(--color-${t[0]}--accent)`,background:i?void 0:n,opacity:e*t[1]}:{color:n,opacity:e*t[1]}}}};var pNe=function(){var e=this,i=e._self._c;return i("div",{class:e.modalClass},[e._l(e.celestials,function(n,r){return i("span",{key:r,staticClass:"c-modal-celestial-quote c-modal-celestial-quote__symbol",style:e.styleObject(n,.2,!0),domProps:{innerHTML:e._s(e.celestialSymbols[r])}})}),e._l(e.celestials,function(n,r){return i("span",{key:r+10,staticClass:"c-modal-celestial-quote c-modal-celestial-quote__shadow",style:e.styleObject(n,1,!1)})}),e._l(e.celestials,function(n,r){return i("span",{key:r+20,staticClass:"c-modal-celestial-quote c-modal-celestial-quote__text",style:e.styleObject(n,1,!0)},[e._t("default")],2)})],2)},mNe=[],yNe=K(fNe,pNe,mNe,!1,null,"57cba38e");const gNe=yNe.exports,vNe={name:"CelestialQuoteLine",components:{CelestialQuoteBackground:gNe},props:{quote:{type:Object,required:!0},currentLine:{type:Number,required:!0},primary:{type:Boolean,required:!1,default:!1},leftVisible:{type:Boolean,required:!1,default:!1},rightVisible:{type:Boolean,required:!1,default:!1},closeVisible:{type:Boolean,required:!1,default:!1}},data(){return{message:"",celestialSymbols:[],celestials:[],celestialName:""}},computed:{line(){return this.quote.line(this.currentLine)},leftClass(){return{"c-modal-celestial-quote__arrow":!0,"c-modal-celestial-quote__arrow-left":!0,"c-modal-celestial-quote__arrow-invisible":!this.leftVisible,fas:!0,"fa-chevron-circle-left":!0}},rightClass(){return{"c-modal-celestial-quote__arrow":!0,"c-modal-celestial-quote__arrow-right":!0,"c-modal-celestial-quote__arrow-invisible":!this.rightVisible,fas:!0,"fa-chevron-circle-right":!0}}},methods:{update(){const t=this.line;this.celestialSymbols=t.celestialSymbols,this.message=t.line,this.celestials=t.celestials,this.celestialName=t.celestialName}}};var bNe=function(){var e=this,i=e._self._c;return i("CelestialQuoteBackground",{attrs:{"celestial-symbols":e.celestialSymbols,celestials:e.celestials,primary:e.primary}},[e.line.showCelestialName?i("span",{staticClass:"c-modal-celestial-name"},[e._v(" "+e._s(e.celestialName)+" ")]):e._e(),i("i",{class:e.leftClass,on:{click:function(n){return e.$emit("progress-in","left")}}}),i("span",{staticClass:"l-modal-celestial-quote__text"},[e._v(" "+e._s(e.message)+" ")]),i("i",{class:e.rightClass,on:{click:function(n){return e.$emit("progress-in","right")}}}),e.closeVisible?i("i",{staticClass:"c-modal-celestial-quote__end fas fa-check-circle",on:{click:e.emitClose}}):e._e()])},_Ne=[],ENe=K(vNe,bNe,_Ne,!1,null,"63b07f7f");const W5=ENe.exports,TNe={name:"CelestialQuoteHistoryDisplay",components:{CelestialQuoteLine:W5},props:{quotes:{type:Array,required:!0}},data(){return{focusedQuoteId:0,unlockedQuotes:[],lastProgress:Date.now()}},computed:{name(){return this.unlockedQuotes[0].quote._celestial},focusedQuote(){return this.unlockedQuotes[this.focusedQuoteId]},currentQuoteLine(){return this.focusedQuote.currentLine},commonButtonClass(){const t=this.name==="laitela"&&!Theme.current().isDark();return{"fas c-modal-celestial-quote-history__arrow":!0,"o-dark-button":t,"o-light-button":!t}},upClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-up fa-chevron-circle-up":!0,"c-modal-celestial-quote-history__arrow--disabled":this.focusedQuoteId<=0}},downClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-down fa-chevron-circle-down":!0,"c-modal-celestial-quote-history__arrow--disabled":this.focusedQuoteId>=this.unlockedQuotes.length-1}},leftClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-left fa-chevron-circle-left":!0,"c-modal-celestial-quote-history__arrow--disabled":this.currentQuoteLine<=0}},rightClass(){return{...this.commonButtonClass,"c-modal-celestial-quote-history__arrow-right fa-chevron-circle-right":!0,"c-modal-celestial-quote-history__arrow--disabled":this.currentQuoteLine>=this.focusedQuote.quote.totalLines-1}}},created(){this.unlockedQuotes=this.quotes.filter(t=>t.isUnlocked).map(t=>({quote:t,currentLine:0})),this.$nextTick(()=>{this.on$(GAME_EVENT.ARROW_KEY_PRESSED,t=>{switch(t[0]){case"up":this.progressUp();break;case"down":this.progressDown();break;case"left":this.progressLeft();break;case"right":this.progressRight();break}})})},methods:{isFocused(t,e){return this.focusedQuoteId===t&&this.currentQuoteLine===e},quoteStyle(t,e){const i=t===this.focusedQuoteId?1-(e!==this.currentQuoteLine)*.3:1-Math.abs(t-this.focusedQuoteId)/8,n=t===this.focusedQuoteId&&e!==this.currentQuoteLine?`translateX(${(e-this.currentQuoteLine)*110+Math.sign(e-this.currentQuoteLine)*20}%)`:"";return{top:`calc(50vh + ${wNe(t-this.focusedQuoteId)*16}rem)`,transform:`translate(-50%, -50%) scale(${Math.max(i,0)}) ${n}`,opacity:+(e===this.unlockedQuotes[t].currentLine||t===this.focusedQuoteId),visibility:e===this.unlockedQuotes[t].currentLine||t===this.focusedQuoteId?"visible":"hidden","z-index":-Math.abs(t-this.focusedQuoteId)}},progressUp(){Date.now()-this.lastProgress<150||(this.focusedQuoteId=Math.max(0,this.focusedQuoteId-1),this.lastProgress=Date.now())},progressDown(){Date.now()-this.lastProgress<150||(this.focusedQuoteId=Math.min(this.unlockedQuotes.length-1,this.focusedQuoteId+1),this.lastProgress=Date.now())},progressLeft(){Date.now()-this.lastProgress<150||(this.focusedQuote.currentLine=Math.max(0,this.focusedQuote.currentLine-1),this.lastProgress=Date.now())},progressRight(){Date.now()-this.lastProgress<150||(this.focusedQuote.currentLine=Math.min(this.focusedQuote.quote.totalLines-1,this.focusedQuote.currentLine+1),this.lastProgress=Date.now())},close(){Quote.clearHistory()}}};function wNe(t){return Math.sign(t)*Math.pow(Math.abs(t),.4)}var CNe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-modal-overlay c-modal-overlay"},[i("i",{staticClass:"c-modal-celestial-quote-history__close fas fa-circle-xmark o-light-button",on:{click:e.close}}),i("div",{staticClass:"c-quote-history-modal__clickable-background",on:{click:e.close}}),e._l(e.unlockedQuotes,function(n,r){return i("div",{key:r,on:{click:function(s){e.focusedQuoteId=r}}},e._l(n.quote.config.lines,function(s,a){return i("div",{key:a,on:{click:function(o){n.currentLine=a}}},[i("CelestialQuoteLine",{staticClass:"c-quote-overlay",class:{"c-quote-overlay--background":!e.isFocused(r,a)},style:e.quoteStyle(r,a),attrs:{quote:n.quote,"current-line":a,primary:""}})],1)}),0)}),i("div",{staticClass:"c-quote-history-modal__controls"},[i("i",{class:e.upClass,on:{click:e.progressUp}}),i("i",{class:e.downClass,on:{click:e.progressDown}}),i("i",{class:e.leftClass,on:{click:e.progressLeft}}),i("i",{class:e.rightClass,on:{click:e.progressRight}})])],2)},SNe=[],kNe=K(TNe,CNe,SNe,!1,null,"dc0c322f");const j5=kNe.exports,ANe={name:"CelestialQuoteBasicInteractable",components:{CelestialQuoteLine:W5},props:{quote:{type:Object,required:!0},isFocused:{type:Boolean,required:!1,default:!0},primary:{type:Boolean,required:!1,default:!1},leftVisible:{type:Boolean,required:!1,default:!0},rightVisible:{type:Boolean,required:!1,default:!0},closeVisible:{type:Boolean,required:!1,default:!0}},data(){return{index:0}},computed:{totalLines(){return this.quote.totalLines},currentLine:{get(){return this.index},set(t){this.index=Math.clamp(t,0,this.totalLines-1)}},isQuoteStart(){return this.currentLine===0},isQuoteEnd(){return this.currentLine===this.totalLines-1}},created(){this.$nextTick(()=>{this.on$(GAME_EVENT.ARROW_KEY_PRESSED,t=>this.progressIn(t[0])),this.on$(GAME_EVENT.ENTER_PRESSED,()=>{this.isQuoteEnd&&this.close()})})},methods:{progressIn(t){if(!this.isFocused)return!1;switch(t){case"left":return this.currentLine--;case"right":return this.currentLine++;default:return!1}},close(){this.isFocused&&(this.index=0,Quote.advanceQueue())}}};var RNe=function(){var e=this,i=e._self._c;return i("CelestialQuoteLine",{attrs:{quote:e.quote,"current-line":e.currentLine,"left-visible":!e.isQuoteStart&&e.leftVisible,"right-visible":!e.isQuoteEnd&&e.rightVisible,"close-visible":e.isQuoteEnd&&e.closeVisible,primary:""},on:{close:e.close,"progress-in":e.progressIn}})},INe=[],DNe=K(ANe,RNe,INe,!1,null,null);const xNe=DNe.exports,MNe={name:"CelestialQuoteModal",components:{CelestialQuoteLineBasicInteractable:xNe},props:{quote:{type:Object,required:!0}}};var PNe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-modal-overlay c-modal-overlay"},[i("CelestialQuoteLineBasicInteractable",{staticClass:"c-quote-overlay",attrs:{quote:e.quote}})],1)},ONe=[],NNe=K(MNe,PNe,ONe,!1,null,"6e6798b4");const z5=NNe.exports,GNe={name:"CreditsContainer",components:{CreditsDisplay:N3},data(){return{rolling:!1,scroll:0,audio:null,isMuted:!1}},computed:{creditStyles(){return{bottom:`${this.scroll}px`,display:this.rolling?"block":"none"}},muteStyle(){return{top:`calc(${this.scroll+20}px - 100vh)`,display:this.rolling?"block":"none"}},muteIconClass(){return this.isMuted?"fa-volume-xmark":"fa-volume-high"},celestialDisplays(){return{teresa:Teresa.symbol,effarig:Effarig.symbol,enslaved:Enslaved.symbol,v:V.symbol,ra:Ra.symbol,laitela:Laitela.symbol,pelle:Pelle.symbol}}},watch:{rolling(t,e){GameEnd.creditsEverClosed||!e&&t&&this.audio===null&&(this.audio=new Audio("audio/credits.mp3"),this.audio.play())}},created(){const t=player.options.updateRate;player.options.updateRate=33,GameOptions.refreshUpdateRate(),player.options.updateRate=t},methods:{update(){var e;const t=(((e=this.$refs.creditsDisplay)==null?void 0:e.offsetHeight)||0)+innerHeight;this.rolling=GameEnd.endState>END_STATE_MARKERS.CREDITS_START,this.scroll=(Math.clampMax(GameEnd.endState,END_STATE_MARKERS.CREDITS_END)-END_STATE_MARKERS.CREDITS_START)/(END_STATE_MARKERS.SONG_END-END_STATE_MARKERS.CREDITS_START)*t,this.audio&&(this.audio.volume=this.isMuted?0:Math.clamp(GameEnd.endState-END_STATE_MARKERS.CREDITS_START,0,.3))}}};var UNe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-credits-container",style:e.creditStyles},[i("i",{staticClass:"c-mute-button fa-solid",class:e.muteIconClass,style:e.muteStyle,on:{click:function(n){e.isMuted=!e.isMuted}}}),e._l(e.celestialDisplays,function(n,r){return i("div",{key:r+"-end-credit-symbol-disp",staticClass:"c-credits-cel-symbol",class:`c-${r}-credits`,domProps:{innerHTML:e._s(n)}})}),i("span",{ref:"creditsDisplay"},[i("CreditsDisplay")],1)],2)},LNe=[],BNe=K(GNe,UNe,LNe,!1,null,"e8b40fc1");const X5=BNe.exports,FNe={name:"FadeAway",data(){return{opacity:0}},methods:{update(){this.opacity=(GameEnd.endState-END_STATE_MARKERS.FADE_AWAY)/2}}};var $Ne=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-background-overlay",style:{opacity:e.opacity,pointerEvents:e.opacity>1?"auto":"none"}})},HNe=[],VNe=K(FNe,$Ne,HNe,!1,null,"b4d0f99c");const K5=VNe.exports,qNe={name:"HowToPlay",data(){return{hasTutorial:!1,isModern:!1}},computed:{h2pClassObject(){return{"o-tab-btn l-help-me":!0}},topMargin(){return{"margin-top":this.isModern?"4.5rem":"1rem"}}},methods:{update(){this.hasTutorial=Tutorial.emphasizeH2P(),this.isModern=player.options.newUI},showH2P(){Modal.h2p.show()},showInfo(){Modal.information.show()}}};var YNe=function(){var e=this,i=e._self._c;return i("div",[i("div",{class:e.h2pClassObject,style:e.topMargin,on:{click:e.showH2P}},[e._v(" ? "),e.hasTutorial?i("div",{staticClass:"h2p-tooltip"},[e._v(" Click for info ")]):e._e()]),e.hasTutorial?i("div",{staticClass:"h2p-tutorial--glow",style:e.topMargin}):e._e(),i("div",{staticClass:"o-tab-btn l-information l-help-me",on:{click:e.showInfo}},[e._v(" i ")])])},WNe=[],jNe=K(qNe,YNe,WNe,!1,null,"3e91f7ec");const zNe=jNe.exports,XNe={name:"OfflineSpeedupButton",components:{PrimaryButton:yt},props:{button:{type:Object,required:!0},progress:{type:Object,required:!0}},computed:{canBeClicked(){return this.button.condition(this.progress.current,this.progress.max)},buttonClass(){return{"o-primary-btn--width-medium":!0,"o-primary-btn--disabled":!this.canBeClicked}}},methods:{buttonClicked(){this.canBeClicked&&this.button.click()}}};var KNe=function(){var e=this,i=e._self._c;return i("PrimaryButton",{class:e.buttonClass,on:{click:e.buttonClicked}},[e._v(" "+e._s(e.button.text)+" ")])},ZNe=[],QNe=K(XNe,KNe,ZNe,!1,null,null);const JNe=QNe.exports,e2e={name:"ModalProgressBar",components:{OfflineSpeedupButton:JNe},computed:{progress(){return this.$viewModel.modal.progressBar},foregroundStyle(){return{width:`${this.progress.current/this.progress.max*100}%`}},remainingTime(){const e=(Date.now()-this.progress.startTime)*(this.progress.max-this.progress.current)/this.progress.current;return TimeSpan.fromMilliseconds(e).toStringShort()},buttons(){return this.progress.buttons||[]}}};var t2e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-modal-overlay c-modal-overlay progress-bar-modal"},[i("div",{staticClass:"c-modal"},[i("div",{staticClass:"modal-progress-bar"},[i("div",{staticClass:"modal-progress-bar__label"},[e._v(" "+e._s(e.progress.label)+" ")]),i("div",[e._v(" "+e._s(e.progress.info())+" ")]),i("div",{staticClass:"modal-progress-bar__margin"},[i("div",[e._v(" "+e._s(e.progress.progressName)+": "+e._s(e.formatInt(e.progress.current))+"/"+e._s(e.formatInt(e.progress.max))+" ")]),i("div",[e._v(" Remaining: "+e._s(e.remainingTime)+" ")]),i("div",{staticClass:"modal-progress-bar__hbox"},[i("div",{staticClass:"modal-progress-bar__bg"},[i("div",{staticClass:"modal-progress-bar__fg",style:e.foregroundStyle})])])]),i("div",{staticClass:"modal-progress-bar__buttons"},e._l(e.buttons,function(n,r){return i("OfflineSpeedupButton",{key:r,attrs:{button:n,progress:e.progress}})}),1)])])])},i2e=[],n2e=K(e2e,t2e,i2e,!1,null,"deee5e6e");const Z5=n2e.exports,r2e={name:"ModernSidebarCurrency",data(){return{sidebarID:0,resourceName:"",resourceValue:new Decimal(0)}},computed:{resourceDB:()=>GameDatabase.sidebarResources,numDBEntries(){return this.resourceDB.length},resource(){return this.sidebarID===0?this.resourceDB.filter(t=>t.isAvailable()).sort((t,e)=>e.id-t.id)[0]:this.resourceDB.find(t=>t.id===this.sidebarID)},displayValue(){return this.resource.formatValue(this.resourceValue).replace(" + ","+")}},methods:{update(){this.sidebarID=player.options.sidebarResourceID,this.resourceName=this.resource.resourceName??this.resource.optionName,this.resourceValue.copyFrom(this.resource.value())},cycleResource(t){const e=this.sidebarID;for(this.sidebarID=(this.sidebarID+this.numDBEntries+t)%this.numDBEntries;this.sidebarID!==e&&!this.resource.isAvailable();)this.sidebarID=(this.sidebarID+this.numDBEntries+t)%this.numDBEntries;player.options.sidebarResourceID=this.sidebarID},containerClass(){return{"c-sidebar-resource":!0,"c-sidebar-resource-default":this.sidebarID===0}},styleObject(){const t=this.displayValue.length;return{transform:`scale(${t<10?1:10/t})`}}}};var s2e=function(){var e=this,i=e._self._c;return i("div",{class:e.containerClass(),on:{click:[function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.cycleResource(1)},function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.cycleResource(-1)}]}},[i("h2",{class:e.resource.formatClass,style:e.styleObject()},[e._v(" "+e._s(e.displayValue)+" ")]),i("div",{staticClass:"c-sidebar-resource__information"},[i("span",{staticClass:"c-sidebar-resource__name"},[e._v(e._s(e.resourceName))])])])},a2e=[],o2e=K(r2e,s2e,a2e,!1,null,"c3ad5a1a");const l2e=o2e.exports,c2e={name:"ModernTabButton",props:{tab:{type:Object,required:!0},tabPosition:{type:Number,required:!0}},data(){return{isAvailable:!1,isHidden:!1,subtabVisibilities:[],showSubtabs:!1,hasNotification:!1,tabName:""}},computed:{classObject(){return{"o-tab-btn":!0,"o-tab-btn--modern-tabs":!0,"o-tab-btn--subtabs":this.showSubtabs,"o-tab-btn--active":this.isCurrentTab&&Theme.currentName()!=="S9"}},isCurrentTab(){return this.tab.isOpen}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.isHidden=this.tab.isHidden,this.subtabVisibilities=this.tab.subtabs.map(t=>t.isAvailable),this.showSubtabs=this.isAvailable&&this.subtabVisibilities.length>=1,this.hasNotification=this.tab.hasNotification,this.tabPosition<Pelle.endTabNames.length?this.tabName=Pelle.transitionText(this.tab.name,Pelle.endTabNames[this.tabPosition],Math.clamp(GameEnd.endState-this.tab.id%4/10,0,1)):this.tabName=this.tab.name},isCurrentSubtab(t){return player.options.lastOpenSubtab[this.tab.id]===t&&Theme.currentName()!=="S9"}}};var u2e=function(){var e=this,i=e._self._c;return!e.isHidden&&e.isAvailable?i("div",{class:[e.classObject,e.tab.config.UIClass]},[i("div",{staticClass:"l-tab-btn-inner",on:{click:function(n){return e.tab.show(!0)}}},[e._v(" "+e._s(e.tabName)+" "),e.hasNotification?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()]),e.showSubtabs?i("div",{staticClass:"subtabs"},[e._l(e.tab.subtabs,function(n,r){return[e.subtabVisibilities[r]?i("div",{key:r,staticClass:"o-tab-btn o-tab-btn--subtab",class:[e.tab.config.UIClass,{"o-subtab-btn--active":e.isCurrentSubtab(n.id)}],on:{click:function(s){return n.show(!0)}}},[i("span",{domProps:{innerHTML:e._s(n.symbol)}}),n.hasNotification?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e(),i("div",{staticClass:"o-subtab__tooltip"},[e._v(" "+e._s(n.name)+" ")])]):e._e()]})],2):e._e()]):e._e()},d2e=[],h2e=K(c2e,u2e,d2e,!1,null,"45069237");const f2e=h2e.exports,p2e={name:"ModernSidebar",components:{ModernSidebarCurrency:l2e,ModernTabButton:f2e},data(){return{isHidden:!1,tabVisibilities:[]}},computed:{tabs:()=>Tabs.newUI},methods:{update(){this.isHidden=AutomatorData.isEditorFullscreen,this.tabVisibilities=Tabs.newUI.map(t=>t.isAvailable)}}};var m2e=function(){var e=this,i=e._self._c;return e.isHidden?e._e():i("div",{staticClass:"c-modern-sidebar"},[i("ModernSidebarCurrency"),e._l(e.tabs,function(n,r){return[e.tabVisibilities[r]?i("ModernTabButton",{key:n.name,attrs:{tab:n,"tab-position":r}}):e._e()]})],2)},y2e=[],g2e=K(p2e,m2e,y2e,!1,null,"2319ce9c");const v2e=g2e.exports,b2e={name:"NewGame",data(){return{opacity:0,visible:!1,hasMoreCosmetics:!1,selectedSetName:""}},computed:{style(){return{opacity:this.opacity,visibility:this.visible?"visible":"hidden"}}},methods:{update(){var t;this.visible=GameEnd.endState>END_STATE_MARKERS.SHOW_NEW_GAME&&!GameEnd.removeAdditionalEnd,this.opacity=(GameEnd.endState-END_STATE_MARKERS.SHOW_NEW_GAME)*2,this.hasMoreCosmetics=GlyphAppearanceHandler.lockedSets.length>0,this.selectedSetName=((t=GlyphAppearanceHandler.chosenFromModal)==null?void 0:t.name)??"None (will choose randomly)"},startNewGame(){NG.startNewGame()},openSelectionModal(){Modal.cosmeticSetChoice.show()}}};var _2e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-new-game-container",style:e.style},[i("h2",[e._v(" Reset the entire game, but keep Automator Scripts, Study Presets, Secret Themes, Secret Achievements, Options, and Companion Glyph. ")]),i("h3",[e._v("You can use the button in the top-right to view the game as it is right now.")]),i("div",{staticClass:"c-new-game-button-container"},[i("button",{staticClass:"c-new-game-button",on:{click:e.startNewGame}},[e._v(" Start over? ")])]),i("br"),e.hasMoreCosmetics?i("h3",[e._v(" For completing the game, you also unlock a new cosmetic set of your choice for Glyphs. These are freely modifiable once you reach Reality again, but are purely visual and offer no gameplay bonuses. "),i("br"),i("button",{staticClass:"c-new-game-button",on:{click:e.openSelectionModal}},[e._v(" Choose Cosmetic Set ")]),i("br"),i("br"),e._v(" Selected Set: "+e._s(e.selectedSetName)+" ")]):i("h3",[e._v(" You have unlocked all Glyph cosmetic sets! ")]),i("br"),i("h3",[e._v(' You can also import "speedrun" to start the game again with additional tracking for speedrunning purposes. ')])])},E2e=[],T2e=K(b2e,_2e,E2e,!1,null,"2cb6f714");const Q5=T2e.exports,w2e={name:"PopupModal",props:{modal:{type:Object,required:!0}},data(){return{showModal:!1,positionStyle:{}}},created(){this.on$(GAME_EVENT.CLOSE_MODAL,this.hide)},mounted(){this.updatePositionStyles()},destroyed(){document.activeElement.blur()},methods:{update(){const t=this.showModal;this.showModal=GameEnd.endState<=END_STATE_MARKERS.INTERACTIVITY_DISABLED||this.modal.component.name==="CosmeticSetChoiceModal",this.showModal!==t&&this.$nextTick(()=>this.updatePositionStyles()),this.updatePositionStyles()},updatePositionStyles(){if(!this.$refs.modal)return;if(!this.showModal||this.$viewModel.theme!=="S12"){this.positionStyle={};return}const t=this.$refs.modal.offsetWidth,e=this.$refs.modal.offsetHeight;this.positionStyle={left:`${Math.round(innerWidth/2-t/2)}px`,top:`${Math.round(innerHeight/2-e/2)}px`,transform:"none"}},hide(){this.modal.isOpen&&(this.modal.hide?this.modal.hide():Modal.hide())}}};var C2e=function(){var e=this,i=e._self._c;return e.showModal?i("div",{ref:"modal",staticClass:"c-modal l-modal",style:e.positionStyle},[i(e.modal.component,e._b({tag:"component",on:{close:e.hide}},"component",e.modal.props,!1))],1):e._e()},S2e=[],k2e=K(w2e,C2e,S2e,!1,null,null);const J5=k2e.exports,A2e={name:"SaveTimer",data(){return{currentTime:0,cloudSaveEnabled:!1,lastLocalSave:0,lastCloudSave:0,showTimeSinceSave:!1,saveDisabled:!1}},computed:{timeString(){const t=timeDisplayShort(this.currentTime-this.lastLocalSave),e=timeDisplayShort(this.currentTime-this.lastCloudSave);return this.cloudSaveEnabled?`${t} (local) | ${e} (cloud)`:t}},methods:{update(){this.currentTime=Date.now(),this.cloudSaveEnabled=player.options.cloudEnabled&&Cloud.loggedIn,this.lastLocalSave=GameStorage.lastSaveTime,this.lastCloudSave=GameStorage.lastCloudSave,this.showTimeSinceSave=player.options.showTimeSinceSave,this.saveDisabled=GameEnd.endState>=END_STATE_MARKERS.INTERACTIVITY_DISABLED},save(){GameStorage.save(!1,!0)}}};var R2e=function(){var e=this,i=e._self._c;return e.showTimeSinceSave?i("div",{staticClass:"o-save-timer",on:{click:e.save}},[e.saveDisabled?i("b",[e._v("There is nothing left to save.")]):i("span",[e._v("Time since last save: "+e._s(e.timeString))])]):e._e()},I2e=[],D2e=K(A2e,R2e,I2e,!1,null,"a0726033");const x2e=D2e.exports,M2e={name:"SpectateGame",components:{PrimaryButton:yt},data(){return{showSpectate:Boolean}},methods:{update(){this.showSpectate=GameEnd.endState>END_STATE_MARKERS.SPECTATE_GAME,this.endState=GameEnd.endState},swap(){GameEnd.creditsClosed=!GameEnd.creditsClosed,GameEnd.creditsEverClosed||(GameEnd.creditsEverClosed=!0)}}};var P2e=function(){var e=this,i=e._self._c;return e.showSpectate?i("div",{key:e.endState},[i("PrimaryButton",{staticClass:"c-swap-button o-primary-btn--modal-close c-modal__close-btn tutorial--glow",on:{click:e.swap}},[i("i",{staticClass:"fas fa-sync"})])],1):e._e()},O2e=[],N2e=K(M2e,P2e,O2e,!1,null,"677cdc3b");const e4=N2e.exports,G2e={name:"SpeedrunStatus",data(){return{isActive:!1,isSegmented:!1,usedSTD:!1,hasStarted:!1,startDate:0,saveName:"",timePlayedStr:"",offlineProgress:!1,offlineFraction:0,mostRecent:{},isCollapsed:!1,timeSince:0,seedText:0,canModifySeed:!1,isComplete:!1}},computed:{statusText(){return this.isComplete?'<span style="color: var(--color-good)">Finished!</span>':this.hasStarted?'<span style="color: var(--color-good)">Running!</span>':'<span style="color: var(--color-bad)">Not Started Yet</span>'},segmentText(){return this.isSegmented?"Segmented Speedrun (imported save)":"Single-segment Speedrun (no save import)"},iapText(){return this.usedSTD?"IAPs have been used":"No IAPs Used"},offlineText(){const t=this.offlineProgress?'<span style="color: var(--color-good)">Enabled</span>':'<span style="color: var(--color-bad)">Disabled</span>',e=this.offlineFraction===0?"(No offline time used)":`(${formatPercents(this.offlineFraction,2)} time spent offline)`;return`${t} ${e}`},collapseIcon(){return this.isCollapsed?"fas fa-expand-arrows-alt":"fas fa-compress-arrows-alt"}},methods:{update(){const t=player.speedrun;this.isActive=t.isActive,this.canModifySeed=Speedrun.canModifySeed(),this.isActive&&(this.isSegmented=t.isSegmented,this.usedSTD=t.usedSTD,this.hasStarted=t.hasStarted,this.startDate=t.startDate,this.saveName=t.name,this.isCollapsed=t.hideInfo,this.isComplete=Achievement(188).isUnlocked,this.timePlayedStr=Time.realTimePlayed.toStringShort(),this.offlineProgress=player.options.offlineProgress,this.offlineFraction=t.offlineTimeUsed/Math.clampMin(player.records.realTimePlayed,1),this.mostRecent=Speedrun.mostRecentMilestone(),this.timeSince=Time.realTimePlayed.minus(TimeSpan.fromMilliseconds(t.records[this.mostRecent]??0)).toStringShort(),this.seedText=Speedrun.seedModeText())},milestoneName(t){const e=GameDatabase.speedrunMilestones;return t===0?"None":e.find(i=>i.id===t).name},changeName(){this.hasStarted||Modal.changeName.show()},collapseText(){return this.isCollapsed?"Expand":"Click to collapse Speedrun info"},toggleCollapse(){player.speedrun.hideInfo=!this.isCollapsed},openSeedModal(){this.canModifySeed&&Modal.modifySeed.show()}}};var U2e=function(){var e=this,i=e._self._c;return e.isActive?i("div",{staticClass:"c-speedrun-status"},[e.isCollapsed?e._e():i("div",[i("b",[e._v("Speedrun Status ("),i("span",{domProps:{innerHTML:e._s(e.statusText)}}),e._v(")")]),i("br"),i("span",{class:{"c-speedrun-status--can-change":!e.hasStarted},on:{click:e.changeName}},[e._v(" Player Name: "+e._s(e.saveName)+" ")]),i("br"),i("i",[e._v(e._s(e.segmentText))]),i("br"),i("i",[e._v(e._s(e.iapText))]),i("br"),i("span",{class:{"c-speedrun-status--can-change":e.canModifySeed},on:{click:function(n){return e.openSeedModal()}}},[e._v(e._s(e.seedText))]),i("br"),e._v(" Total real playtime since start: "+e._s(e.timePlayedStr)+" "),i("br"),e._v(" Offline Progress: "),i("span",{domProps:{innerHTML:e._s(e.offlineText)}}),i("br"),e._v(" Most Recent Milestone: "+e._s(e.milestoneName(e.mostRecent))+" "),e.mostRecent?i("span",[e._v("("+e._s(e.timeSince)+" ago)")]):e._e(),i("br")]),i("div",{staticClass:"c-speedrun-status--collapse",on:{click:e.toggleCollapse}},[i("i",{class:e.collapseIcon}),e._v(" "+e._s(e.collapseText())+" "),i("i",{class:e.collapseIcon})])]):e._e()},L2e=[],B2e=K(G2e,U2e,L2e,!1,null,"99cb515a");const F2e=B2e.exports,$2e={name:"HoverMenu",props:{saveslot:{type:Number,default:0}},data:()=>({componentID:UIID.next(),contextMenuHideTimer:null,contextMenuShowTimer:null}),computed:{contextMenuIsVisible(){return this.$viewModel.currentContextMenu===this.componentID},listeners(){return Object.assign({},this.$listeners,{touchstart:()=>this.startShowTimer(),mouseenter:()=>this.startShowTimer(),mouseleave:()=>this.startHideTimer()})}},methods:{startShowTimer(){this.stopHideTimer(),!(this.contextMenuIsVisible||this.contextMenuShowTimer)&&(this.contextMenuShowTimer=setTimeout(()=>{this.contextMenuShowTimer=null,this.showContextMenu()},250))},showContextMenu(){this.stopTimers(),this.$viewModel.currentContextMenu=this.componentID},startHideTimer(){this.stopShowTimer(),!(!this.contextMenuIsVisible||this.contextMenuHideTimer)&&(this.contextMenuHideTimer=setTimeout(()=>{this.contextMenuHideTimer=null,this.hideContextMenu()},500))},hideContextMenu(){this.stopTimers(),this.$viewModel.currentContextMenu===this.componentID&&(this.$viewModel.currentContextMenu=null)},toggleContextMenu(){this.contextMenuIsVisible?this.hideContextMenu():this.showContextMenu()},stopTimers(){this.stopHideTimer(),this.stopShowTimer()},stopHideTimer(){this.contextMenuHideTimer&&(clearTimeout(this.contextMenuHideTimer),this.contextMenuHideTimer=null)},stopShowTimer(){this.contextMenuShowTimer&&(clearTimeout(this.contextMenuShowTimer),this.contextMenuShowTimer=null)}}};var H2e=function(){var e=this,i=e._self._c;return i("div",e._g({staticClass:"hover-menu__wrapper",on:{contextmenu:function(n){return n.preventDefault(),e.toggleContextMenu.apply(null,arguments)}}},e.listeners),[e._t("object"),e.contextMenuIsVisible?e._t("menu"):e._e()],2)},V2e=[],q2e=K($2e,H2e,V2e,!1,null,"df01d4cf");const Y2e=q2e.exports,W2e={name:"TimeStudySaveLoadButton",components:{HoverMenu:Y2e},props:{saveslot:{type:Number,required:!0}},data(){return{name:"",displayName:"",canEternity:!1}},computed:{preset(){return player.timestudy.presets[this.saveslot-1]}},methods:{update(){this.name=player.timestudy.presets[this.saveslot-1].name,this.displayName=this.name===""?this.saveslot:this.name,this.canEternity=Player.canEternity},nicknameBlur(t){const e=t.target.value.slice(0,4).trim();!this.isASCII(e)||player.timestudy.presets.map(n=>n.name).includes(e)||(this.preset.name=e,this.name=this.preset.name)},hideContextMenu(){this.$viewModel.currentContextMenu=null},isASCII(t){return!/[^\u0000-\u00ff]/u.test(t)},save(){this.hideContextMenu(),this.preset.studies=GameCache.currentStudyTree.value.exportString;const t=this.name?`Study preset "${this.name}"`:"Study preset";GameUI.notify.eternity(`${t} saved in slot ${this.saveslot}`)},load(){if(this.hideContextMenu(),this.preset.studies){const t=new TimeStudyTree;t.attemptBuyArray(TimeStudyTree.currentStudies,!1),t.attemptBuyArray(t.parseStudyImport(this.preset.studies),!0),TimeStudyTree.commitToGameState(t.purchasedStudies,!1,t.startEC);const e=this.name?`Study preset "${this.name}"`:"Study preset";GameUI.notify.eternity(`${e} loaded from slot ${this.saveslot}`)}else Modal.message.show("This Time Study list currently contains no Time Studies.")},respecAndLoad(){if(Player.canEternity){player.respec=!0;const t=new TimeStudyTree;t.attemptBuyArray(t.parseStudyImport(this.preset.studies)),animateAndEternity(()=>TimeStudyTree.commitToGameState(t.purchasedStudies,!1,t.startEC))}},deletePreset(){this.hideContextMenu(),this.preset.studies?Modal.studyString.show({id:this.saveslot-1,deleting:!0}):Modal.message.show("This Time Study list currently contains no Time Studies.")},handleExport(){this.hideContextMenu(),copyToClipboard(this.preset.studies);const t=this.name?`Study preset "${this.name}"`:"Study preset";GameUI.notify.eternity(`${t} exported from slot ${this.saveslot} to your clipboard`)},edit(){Modal.studyString.show({id:this.saveslot-1})}}};var j2e=function(){var e=this,i=e._self._c;return i("HoverMenu",{staticClass:"l-tt-save-load-btn__wrapper",scopedSlots:e._u([{key:"object",fn:function(){return[i("button",{staticClass:"l-tt-save-load-btn c-tt-buy-button c-tt-buy-button--unlocked",on:{click:[function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.save.apply(null,arguments)},function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.load.apply(null,arguments)}]}},[e._v(" "+e._s(e.displayName)+" ")])]},proxy:!0},{key:"menu",fn:function(){return[i("div",{staticClass:"l-tt-save-load-btn__menu c-tt-save-load-btn__menu"},[i("span",{attrs:{"ach-tooltip":"Set a custom name (up to 4 ASCII characters)"}},[i("input",{staticClass:"l-tt-save-load-btn__menu-rename c-tt-save-load-btn__menu-rename",attrs:{type:"text",size:"4",maxlength:"4"},domProps:{value:e.name},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.hideContextMenu.apply(null,arguments)},blur:e.nicknameBlur}})]),i("div",{staticClass:"l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item",on:{click:e.edit}},[e._v(" Edit ")]),i("div",{staticClass:"l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item",on:{click:e.handleExport}},[e._v(" Export ")]),i("div",{staticClass:"l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item",on:{click:e.save}},[e._v(" Save ")]),i("div",{staticClass:"l-tt-save-load-btn__menu-item"},[i("div",{staticClass:"c-tt-save-load-btn__menu-item",on:{click:e.load}},[e._v(" Load ")]),i("div",{staticClass:"c-tt-save-load-btn__menu-item__hover-options"},[i("div",{class:{"c-tt-save-load-btn__menu-item__hover-option":!0,"c-tt-save-load-btn__menu-item__hover-option--disabled":!e.canEternity},on:{click:e.respecAndLoad}},[e._v(" Respec and Load ")])])]),i("div",{staticClass:"l-tt-save-load-btn__menu-item c-tt-save-load-btn__menu-item",on:{click:e.deletePreset}},[e._v(" Delete ")])])]},proxy:!0}])})},z2e=[],X2e=K(W2e,j2e,z2e,!1,null,"088bac37");const K2e=X2e.exports,Z2e={props:{budget:Decimal,cost:Decimal,formatCost:{type:Function,required:!0},action:{type:Function,required:!0}},data(){return{isLocked:!1}},computed:{isEnabled(){return this.isLocked?!1:this.budget.gte(this.cost)},enabledClass(){return!this.isEnabled||this.isLocked?"c-tt-buy-button--locked":"c-tt-buy-button--unlocked"}},methods:{update(){this.isLocked=player.eternities.eq(0)}}};var Q2e=function(){var e=this,i=e._self._c;return i("button",{staticClass:"l-tt-buy-button c-tt-buy-button",class:e.enabledClass,on:{click:e.action}},[e._v(" "+e._s(e.isLocked?"Requires an Eternity to unlock":e.formatCost(e.cost))+" ")])},J2e=[],eGe=K(Z2e,Q2e,J2e,!1,null,null);const tGe=eGe.exports,iGe={name:"TimeTheoremShop",components:{PrimaryToggleButton:cn,TimeTheoremBuyButton:tGe,TimeStudySaveLoadButton:K2e},data(){return{theoremAmount:new Decimal(0),theoremGeneration:new Decimal(0),totalTimeTheorems:new Decimal(0),shopMinimized:!1,minimizeAvailable:!1,hasTTAutobuyer:!1,isAutobuyerOn:!1,budget:{am:new Decimal(0),ip:new Decimal(0),ep:new Decimal(0)},costs:{am:new Decimal(0),ip:new Decimal(0),ep:new Decimal(0)},showST:!1,STamount:0,hasTTGen:!1,showTTGen:!1,invertTTgenDisplay:!1}},computed:{minimized(){return this.minimizeAvailable&&this.shopMinimized},formatTimeTheoremType(){return this.theoremAmount.gte(1e6)?format:!(Teresa.isRunning||Enslaved.isRunning)&&getAdjustedGlyphEffect("dilationTTgen")>0&&!DilationUpgrade.ttGenerator.isBought?formatFloat:formatInt},TTgenRateText(){return this.theoremGeneration.lt(1/3600)?`one TT every ${TimeSpan.fromSeconds(this.theoremGeneration.reciprocal().toNumber()).toStringShort(!1)}`:this.theoremGeneration.lt(.1)?`${format(this.theoremGeneration.times(3600),2,2)} TT/hour`:`${format(this.theoremGeneration,2,2)} TT/sec`},totalTimeTheoremText(){return`${quantify("total Time Theorem",this.totalTimeTheorems,2,2,this.formatTimeTheoremType)}`},minimizeArrowStyle(){return{transform:this.minimized?"rotate(-180deg)":"",transition:"all 0.25s ease-out"}},saveLoadText(){return this.$viewModel.shiftDown?"Save:":"Load:"},shopBottomRowHeightStyle(){return{height:this.hasTTAutobuyer?"6.7rem":"4.4rem"}}},watch:{isAutobuyerOn(t){Autobuyer.timeTheorem.isActive=t},invertTTgenDisplay(t){player.options.invertTTgenDisplay=t}},methods:{minimize(){player.timestudy.shopMinimized=!player.timestudy.shopMinimized},formatAM(t){return`${format(t)} AM`},buyWithAM(){TimeTheorems.buyOne(!1,"am")},formatIP(t){return`${format(t)} IP`},buyWithIP(){TimeTheorems.buyOne(!1,"ip")},formatEP(t){return`${format(t,2,0)} EP`},buyWithEP(){TimeTheorems.buyOne(!1,"ep")},buyMaxTheorems(){TimeTheorems.buyMax(!1)},update(){this.theoremAmount.copyFrom(Currency.timeTheorems),this.theoremGeneration.copyFrom(getTTPerSecond().times(getGameSpeedupForDisplay())),this.totalTimeTheorems.copyFrom(Currency.timeTheorems.max),this.shopMinimized=player.timestudy.shopMinimized,this.hasTTAutobuyer=Autobuyer.timeTheorem.isUnlocked,this.isAutobuyerOn=Autobuyer.timeTheorem.isActive,this.minimizeAvailable=DilationUpgrade.ttGenerator.isBought||this.hasTTAutobuyer;const t=this.budget;t.am.copyFrom(TimeTheoremPurchaseType.am.currency),t.ip.copyFrom(TimeTheoremPurchaseType.ip.currency),t.ep.copyFrom(TimeTheoremPurchaseType.ep.currency);const e=this.costs;e.am.copyFrom(TimeTheoremPurchaseType.am.cost),e.ip.copyFrom(TimeTheoremPurchaseType.ip.cost),e.ep.copyFrom(TimeTheoremPurchaseType.ep.cost),this.showST=V.spaceTheorems>0&&!Pelle.isDoomed,this.STamount=V.availableST,this.hasTTGen=this.theoremGeneration.gt(0),this.showTTGen=this.hasTTGen&&ui.view.shiftDown===this.invertTTgenDisplay,this.invertTTgenDisplay=player.options.invertTTgenDisplay},toggleTTgen(){this.invertTTgenDisplay=!this.invertTTgenDisplay}}};var nGe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"time-theorem-buttons"},[i("div",{staticClass:"ttshop-container ttshop-background"},[i("div",{staticClass:"ttbuttons-row ttbuttons-top-row",attrs:{"data-role":"page"}},[e._m(0),i("p",{staticClass:"timetheorems"},[i("span",{staticClass:"c-tt-amount"},[e._v(" "+e._s(e.quantify("Time Theorem",e.theoremAmount,2,0,e.formatTimeTheoremType))+" ")]),e.showST?i("span",[i("br"),e._v(" "+e._s(e.quantifyInt("Space Theorem",e.STamount))+" ")]):e._e()]),i("div",{staticClass:"l-load-tree-area"},[i("div",{staticClass:"l-tree-load-button-wrapper"},[i("span",{staticClass:"c-ttshop__save-load-text"},[e._v(e._s(e.saveLoadText))]),e._l(6,function(n){return i("TimeStudySaveLoadButton",{key:n,attrs:{saveslot:n}})})],2),i("div",{staticClass:"tt-gen-container"},[e.hasTTGen?i("span",{staticClass:"checkbox-margin",attrs:{"ach-tooltip":`This shows TT generation by default and total TT if you hold shift.
              Check this box to swap this behavior.`}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.invertTTgenDisplay,expression:"invertTTgenDisplay"}],staticClass:"o-clickable",attrs:{type:"checkbox"},domProps:{value:e.invertTTgenDisplay,checked:Array.isArray(e.invertTTgenDisplay)?e._i(e.invertTTgenDisplay,e.invertTTgenDisplay)>-1:e.invertTTgenDisplay},on:{input:function(n){return e.toggleTTgen()},change:function(n){var r=e.invertTTgenDisplay,s=n.target,a=!!s.checked;if(Array.isArray(r)){var o=e.invertTTgenDisplay,c=e._i(r,o);s.checked?c<0&&(e.invertTTgenDisplay=r.concat([o])):c>-1&&(e.invertTTgenDisplay=r.slice(0,c).concat(r.slice(c+1)))}else e.invertTTgenDisplay=a}}})]):e._e(),e.showTTGen?i("span",[e._v(" You are gaining "+e._s(e.TTgenRateText)+". ")]):i("span",[e._v(" You have "+e._s(e.totalTimeTheoremText)+". ")])])])]),e.minimized?i("div",{staticClass:"ttbuttons-row ttbuttons-bottom-row-hide"}):i("div",{staticClass:"ttbuttons-row",style:e.shopBottomRowHeightStyle},[i("TimeTheoremBuyButton",{attrs:{budget:e.budget.am,cost:e.costs.am,"format-cost":e.formatAM,action:e.buyWithAM}}),i("TimeTheoremBuyButton",{attrs:{budget:e.budget.ip,cost:e.costs.ip,"format-cost":e.formatIP,action:e.buyWithIP}}),i("TimeTheoremBuyButton",{attrs:{budget:e.budget.ep,cost:e.costs.ep,"format-cost":e.formatEP,action:e.buyWithEP}}),i("div",{staticClass:"l-tt-buy-max-vbox"},[e.minimized?e._e():i("button",{staticClass:"o-tt-top-row-button c-tt-buy-button c-tt-buy-button--unlocked",on:{click:e.buyMaxTheorems}},[e._v(" Buy max ")]),!e.minimized&&e.hasTTAutobuyer?i("PrimaryToggleButton",{staticClass:"o-tt-autobuyer-button c-tt-buy-button c-tt-buy-button--unlocked",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):e._e()],1)],1)]),e.minimizeAvailable?i("button",{staticClass:"ttshop-minimize-btn ttshop-background",on:{click:e.minimize}},[i("span",{staticClass:"minimize-arrow",style:e.minimizeArrowStyle},[e._v("▼")])]):e._e()])},rGe=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"l-tt-save-load-btn c-tt-buy-button c-tt-buy-button--unlocked",attrs:{onClick:"Modal.preferredTree.show()"}},[e("i",{staticClass:"fas fa-cog"})])}],sGe=K(iGe,nGe,rGe,!1,null,"ec15cc2a");const aGe=sGe.exports,oGe={name:"GameUiComponentFixed",components:{HowToPlay:zNe,TimeTheoremShop:aGe,ModernSidebar:v2e,SaveTimer:x2e,SpeedrunStatus:F2e,PopupModal:J5,ModalProgressBar:Z5,CelestialQuoteModal:z5,CelestialQuoteHistoryDisplay:j5,FadeAway:K5,CreditsContainer:X5,SpectateGame:e4,NewGame:Q5},data(){return{ending:!1}},computed:{view(){return this.$viewModel},hideIfMatoFullscreen(){return{visibility:ui.view.tabs.reality.automator.fullScreen?"hidden":"visible"}}},methods:{update(){this.ending=GameEnd.endState>=END_STATE_MARKERS.FADE_AWAY&&!GameEnd.creditsClosed}}};var lGe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-game-ui--fixed",attrs:{id:"ui-fixed"}},[i("div",{staticClass:"l-notification-container",attrs:{id:"notification-container"}}),i("HowToPlay",{style:e.hideIfMatoFullscreen}),e.view.subtab==="studies"?i("TimeTheoremShop",{staticClass:"l-time-studies-tab__tt-shop"}):e._e(),e.view.newUI&&e.view.theme!=="S12"?i("ModernSidebar",{style:e.hideIfMatoFullscreen}):e._e(),i("SaveTimer",{style:e.hideIfMatoFullscreen}),i("SpeedrunStatus",{style:e.hideIfMatoFullscreen}),e.view.theme!=="S12"?[e.view.modal.progressBar?i("ModalProgressBar"):e.view.quotes.current?i("CelestialQuoteModal",{attrs:{quote:e.view.quotes.current}}):e.view.quotes.history?i("CelestialQuoteHistoryDisplay",{attrs:{quotes:e.view.quotes.history}}):e.view.modal.current?i("PopupModal",{attrs:{modal:e.view.modal.current}}):e._e(),e.view.modal.progressBar?i("ModalProgressBar"):e._e(),e.ending?i("FadeAway"):e._e(),e.ending?i("CreditsContainer"):e._e(),e.ending?i("NewGame"):e._e(),i("SpectateGame")]:e._e()],2)},cGe=[],uGe=K(oGe,lGe,cGe,!1,null,"27f21e04");const t4=uGe.exports,dGe={name:"ModernUi",components:{BigCrunchButton:GR,HeaderChallengeDisplay:LR,HeaderChallengeEffects:BR,NewsTicker:$R,HeaderBlackHole:UR,HeaderPrestigeGroup:FR,GameSpeedDisplay:GT},data(){return{bigCrunch:!1,hasReality:!1,newGameKey:""}},computed:{news(){return this.$viewModel.news},topMargin(){return this.$viewModel.news?"":"margin-top: 3.9rem"}},methods:{update(){const t=!player.break&&Player.canCrunch;this.bigCrunch=t&&Time.bestInfinityRealTime.totalMinutes>1,this.hasReality=PlayerProgress.realityUnlocked(),this.newGameKey=Pelle.isDoomed},handleClick(){PlayerProgress.infinityUnlocked()?manualBigCrunchResetRequest():Modal.bigCrunch.show()}}};var hGe=function(){var e=this,i=e._self._c;return i("div",{attrs:{id:"page"}},[i("link",{attrs:{rel:"stylesheet",type:"text/css",href:"stylesheets/new-ui-styles.css"}}),i("div",{key:e.newGameKey,staticClass:"game-container",style:e.topMargin},[e.news?i("NewsTicker"):e._e(),i("BigCrunchButton"),e.bigCrunch?e._e():i("div",{staticClass:"tab-container"},[i("HeaderPrestigeGroup"),i("div",{staticClass:"information-header"},[i("HeaderChallengeDisplay"),i("HeaderChallengeEffects"),e.hasReality?i("GameSpeedDisplay"):e._e(),e.hasReality?i("br"):e._e(),i("HeaderBlackHole")],1),e._t("default")],2)],1)])},fGe=[],pGe=K(dGe,hGe,fGe,!1,null,"ee54dac3");const mGe=pGe.exports;class ug{constructor(e,i,n=0){this._resources=AlchemyResources.all.filter(r=>r.config.tier===e).sort((r,s)=>r.config.uiOrder-s.config.uiOrder),this._radius=i,this._angleOffset=n}get radius(){return this._radius}get nodes(){const e=[],i=Math.PI_2/this._resources.length;let n=this._angleOffset;for(const r of this._resources)e.push({resource:r,x:this._radius*Math.sin(n),y:this._radius*Math.cos(n)}),n+=i;return e}}class yGe{constructor(){this.orbits=[new ug(1,4,-Math.PI/3),new ug(2,3),new ug(3,2,Math.PI/3),new ug(4,1,-Math.PI/6),new ug(5,0)];const e=[];for(const r of this.orbits.map(s=>s.nodes))e.push(...r);const i=Math.max(e.map(r=>Math.abs(r.x)).max(),e.map(r=>Math.abs(r.y)).max())*2;for(const r of e)r.x=(r.x/i+.5)*100,r.y=(r.y/i+.5)*100;const n=[];for(const r of AlchemyReactions.all.compact()){const s=e.find(o=>o.resource===r.product),a=r.reagents.map(o=>e.find(c=>c.resource===o.resource));for(const o of a)n.push({reaction:r,reagent:o,product:s})}this.reactionArrows=n,this.nodes=e,this.size=i}}const gGe={name:"AlchemyResourceArc",props:{resource:{type:Object,required:!0},classObject:{type:Object,required:!0}},data(){return{amount:0,fillFraction:0}},computed:{spinnerTransform(){return{transform:`rotate(${this.fillFraction*360}deg)`,background:this.fillFraction===1?"#ff9800":void 0}},fillerTransform(){return{opacity:this.fillFraction>.5?1:0,background:this.fillFraction===1?"#ff9800":void 0}},maskTransform(){return{opacity:this.fillFraction>.5?0:1}}},methods:{update(){this.amount=this.resource.amount,this.fillFraction=this.resource.fillFraction}}};var vGe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-alchemy-resource-arc-wrapper"},[i("div",{staticClass:"o-alchemy-resource-arc-spinner o-alchemy-resource-arc-circle",style:e.spinnerTransform}),i("div",{staticClass:"o-alchemy-resource-arc-filler o-alchemy-resource-arc-circle",style:e.fillerTransform}),i("div",{staticClass:"o-alchemy-resource-arc-mask",style:e.maskTransform}),i("div",{staticClass:"o-alchemy-node-mask",class:e.classObject},[e._v(" "+e._s(e.resource.symbol)+" ")])])},bGe=[],_Ge=K(gGe,vGe,bGe,!1,null,"e07297f4");const EGe=_Ge.exports,TGe={name:"HintText",props:{type:{type:String,required:!0}},computed:{showThisHintText(){return this.$viewModel.shiftDown||player.options.showHintText[this.type]}}};var wGe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showThisHintText,expression:"showThisHintText"}],staticClass:"o-hint-text l-hint-text"},[e._t("default")],2)},CGe=[],SGe=K(TGe,wGe,CGe,!1,null,null);const gc=SGe.exports,kGe={name:"AlchemyCircleNode",components:{HintText:gc,AlchemyResourceArc:EGe},props:{node:{type:Object,required:!0},isFocused:{type:Boolean,required:!1,default:!1}},data(){return{isReactionActive:!1,amount:0,flow:0,isUnlocked:!1}},computed:{resource(){return this.node.resource},isBaseResource(){return this.resource.isBaseResource},layoutStyle(){const t=Math.clamp(.7*Math.sqrt(Math.abs(this.flow)),0,1);return{left:`${this.node.x}%`,top:`${this.node.y}%`,"box-shadow":`0 0 0.3rem 0.3rem
          rgba(${this.flow>0?"156, 204, 101":"204, 102, 102"}, ${t})`}},classObject(){return{"o-alchemy-node--base":this.isBaseResource,"o-alchemy-node--active":this.isReactionActive,"o-alchemy-node--unfocused":!this.isFocused,"o-alchemy-node--locked":!this.isUnlocked}},hintClassObject(){return this.isFocused?void 0:"o-hint-text--alchemy-node--unfocused"}},methods:{update(){this.isReactionActive=!Pelle.isDoomed&&!this.isBaseResource&&this.node.resource.reaction.isActive,this.amount=this.resource.amount,this.flow=this.resource.flow,this.isUnlocked=this.resource.isUnlocked}}};var AGe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-alchemy-node",class:e.classObject,style:e.layoutStyle,on:{mouseenter:function(n){return e.$emit("mouseenter")},mouseleave:function(n){return e.$emit("mouseleave")},click:e.emitClick}},[i("AlchemyResourceArc",{attrs:{resource:e.resource,"class-object":e.classObject}}),e.isUnlocked?i("span",[i("HintText",{staticClass:"o-hint-text--alchemy-node l-hint-text--alchemy-node",class:e.hintClassObject,attrs:{type:"alchemy"}},[e._v(" "+e._s(e.formatInt(e.amount))+" ")])],1):e._e()],1)},RGe=[],IGe=K(kGe,AGe,RGe,!1,null,"a6679da8");const DGe=IGe.exports,xGe={name:"EffectDisplay",props:{config:{type:Object,required:!1,default:void 0},br:{type:Boolean,required:!1},label:{type:String,required:!1,default:"Currently"},ignoreCapped:{type:Boolean,required:!1,default:!1}},data(){return{isVisible:!1,effectValue:0,cap:Number.MAX_VALUE,hasCap:!1}},computed:{reachedCap(){return this.hasCap&&this.reachedCapFunction()},labelDisplay(){return this.config.noLabel?"":`${this.reachedCap&&!this.ignoreCapped?"Capped":this.label}: `},effectDisplay(){return this.formatEffect(this.reachedCap?this.cap:this.effectValue)}},watch:{config:{immediate:!0,handler(t){this.updateEffect=()=>{},this.updateCap=()=>{};const e=t==null?void 0:t.effect,i=t==null?void 0:t.formatEffect;if(this.isVisible=e!==void 0&&i!==void 0,!this.isVisible)return;if(this.formatEffect=i,qp(e)){this.effectValue=e;return}if(nm(e)){this.effectValue=Decimal.fromDecimal(e);return}if(!z0(e))throw new Error(`EffectDisplay config.effect has unsupported type "${typeof e}"`);const n=e();if(qp(n))this.effectValue=n,this.updateEffect=()=>this.effectValue=e();else if(nm(n))this.effectValue=Decimal.fromDecimal(n),this.updateEffect=()=>this.effectValue.copyFrom(e());else throw new Error(`EffectDisplay config.effect is a function which returns unsupported type "${typeof e}"`);let r=t.cap;if(t.reachedCap!==void 0&&(r=()=>this.effectValue,this.reachedCapFunction=t.reachedCap),r!==void 0){if(t.reachedCap===void 0&&(this.reachedCapFunction=qp(n)?()=>this.effectValue>=this.cap:()=>this.effectValue.gte(this.cap)),qp(r)){this.cap=r,this.hasCap=!0;return}if(nm(r)){this.cap=Decimal.fromDecimal(r),this.hasCap=!0;return}if(z0(r)){this.updateCap=()=>{this.cap=r(),this.hasCap=this.cap!==void 0},this.updateCap();return}throw new Error(`EffectDisplay config.cap is a function which returns unsupported type "${typeof e}"`)}}}},beforeCreate(){this.updateEffect=()=>{},this.updateCap=()=>{}},methods:{update(){this.updateEffect(),this.updateCap()}}};var MGe=function(){var e=this,i=e._self._c;return e.isVisible&&e.effectDisplay!==void 0?i("span",[e.br?i("br"):e._e(),e._v(" "+e._s(e.labelDisplay)+e._s(e.effectDisplay)+" ")]):e._e()},PGe=[],OGe=K(xGe,MGe,PGe,!1,null,null);const lo=OGe.exports,NGe={name:"AlchemyResourceInfo",components:{EffectDisplay:lo},props:{resource:{type:Object,required:!0}},data(){return{amount:0,cap:0,capped:!1,flow:0,isReactionActive:!1,reactionProduction:0,isUnlocked:!1,unlockRequirement:""}},computed:{classObject(){return{"c-alchemy-resource-info":!0,"c-alchemy-resource-info--locked":!this.isUnlocked}},reaction(){return this.resource.reaction},isBaseResource(){return this.resource.isBaseResource},reactionText(){return this.resource===AlchemyResource.reality?this.realityReactionText:`${this.reaction.reagents.map(e=>`${format(e.cost)}${e.resource.symbol}`).join(" + ")} ➜ ${format(this.reactionProduction,2,2)}${this.resource.symbol}`},realityReactionText(){return`${this.reaction.reagents.map(e=>e.resource.symbol).join(" + ")} ➜ ${this.resource.symbol}`},effectConfig(){const t=this.resource;return{effect:()=>t.effectValue,formatEffect:t.config.formatEffect}},resourceAmount(){return formatFloat(this.amount,1)},resourceCap(){return formatFloat(this.cap,1)},formattedFlow(){const t=this.flow>=0?"+":"-";if(Math.abs(this.flow)<.01)return"None";const e=`${t}${format(Math.abs(this.flow),2,2)}/sec`;return`<span style="color:#${this.flow>0?"9CCC65":"CC6666"}">${e}</span>`},isDoomed:()=>Pelle.isDoomed},methods:{update(){const t=this.resource;this.amount=t.amount,this.cap=t.cap,this.capped=t.capped,this.flow=t.flow,this.isUnlocked=t.isUnlocked,this.unlockRequirement=t.lockText,this.isBaseResource||(this.isReactionActive=!this.isDoomed&&this.reaction.isActive,this.reactionProduction=this.reaction.reactionProduction)}}};var GGe=function(){var e=this,i=e._self._c;return e.isUnlocked?i("div",{class:e.classObject},[i("span",{staticClass:"c-alchemy-resource-info__title"},[e._v(" "+e._s(e.resource.symbol)+" "+e._s(e.resource.name)+" "+e._s(e.resource.symbol)+" ")]),e.isDoomed?i("span",[e._v(" Destroyed by Pelle ")]):i("span",[e._v(" "+e._s(e.capped?"Capped":"Current")+": "+e._s(e.resourceAmount)+"/"+e._s(e.resourceCap)+" (Recent change: "),i("span",{domProps:{innerHTML:e._s(e.formattedFlow)}}),e._v(") ")]),e.isBaseResource?i("span",[e._v("Base Resource")]):i("span",[e._v("Reaction: "+e._s(e.isReactionActive?"Active":"Inactive")+" ("+e._s(e.reactionText)+")")]),i("span",{class:{"o-pelle-disabled":e.isDoomed}},[i("EffectDisplay",{attrs:{label:"Effect",config:e.effectConfig}})],1)]):i("div",{class:e.classObject},[e._v(" Unlock requirement: "+e._s(e.unlockRequirement)+" ")])},UGe=[],LGe=K(NGe,GGe,UGe,!1,null,"b4962b54");const BGe=LGe.exports,FGe={name:"AlchemyTab",components:{PrimaryButton:yt,AlchemyCircleNode:DGe,AlchemyResourceInfo:BGe},data(){return{infoResourceId:0,focusedResourceId:-1,reactionsAvailable:!1,realityCreationVisible:!1,animationTimer:0,alchemyCap:0,capFactor:0,createdRealityGlyph:!1,allReactionsDisabled:!1,realityAmount:0}},computed:{resources:()=>AlchemyResources.all,layout:()=>new yGe,sizeMultiplier:()=>5,infoResource(){return this.resources[this.infoResourceId]},circleStyle(){const t=this.layout.size*this.sizeMultiplier;return{width:`${t}rem`,height:`${t}rem`,opacity:this.isDoomed?.8:1}},orbitClass(){return this.focusedResourceId===-1||this.isDoomed?void 0:"o-alchemy-orbit--unfocused"},realityGlyphCreationClass(){return{"o-primary-btn--subtab-option":!0,"tutorial--glow":!this.createdRealityGlyph}},reactions(){return AlchemyReactions.all.compact().filter(t=>t.product.isUnlocked)},isDoomed(){return Pelle.isDoomed},pelleSymbol(){return Pelle.symbol}},methods:{update(){this.reactionsAvailable=AlchemyResources.all.filter(t=>!t.isBaseResource&&t.isUnlocked).length!==0,this.realityCreationVisible=Ra.pets.effarig.level===25,this.animationTimer+=35,this.alchemyCap=Ra.alchemyResourceCap,this.capFactor=1/GlyphSacrificeHandler.glyphRefinementEfficiency,this.createdRealityGlyph=player.reality.glyphs.createdRealityGlyph,this.allReactionsDisabled=this.reactions.every(t=>!t.isActive),this.realityAmount=AlchemyResource.reality.amount},orbitSize(t){const e=this.layout.orbits.map(i=>i.radius).max();return`${t.radius/e*50}%`},handleMouseEnter(t){this.infoResourceId=t.resource.id,t.resource.isUnlocked&&(this.focusedResourceId=t.resource.id)},handleMouseLeave(){this.focusedResourceId=-1},handleClick(t){const e=t.resource;if(e.isUnlocked){if(this.infoResourceId!==e.id){this.infoResourceId=e.id,this.focusedResourceId=e.id;return}e.isBaseResource||(e.reaction.isActive=!e.reaction.isActive,GameUI.update())}},isUnlocked(t){return t.product.resource.isUnlocked&&t.reagent.resource.isUnlocked},isCapped(t){const e=t.reagent.resource,i=t.product.resource;return i.amount>0&&i.amount>=e.amount||i.amount>=i.cap},isLessThanRequired(t){return t.product.resource.amount>0&&t.reagent.cost<t.reagent.resource.cap},isActiveReaction(t){return t.reaction.isActive&&!this.isDoomed},isFocusedReaction(t){return this.isDoomed?!1:this.isUnlocked(t)&&(t.product.resource.id===this.focusedResourceId||t.reagent.resource.id===this.focusedResourceId)},isDisplayed(t){return this.isUnlocked(t)&&(this.isActiveReaction(t)||this.isFocusedReaction(t))},isFocusedNode(t){var i,n;if(this.focusedResourceId===-1||this.isDoomed)return!0;const e=this.resources[this.focusedResourceId];return e===t.resource?!0:((i=e.reaction)==null?void 0:i.reagents.some(r=>r.resource===t.resource))||((n=t.resource.reaction)==null?void 0:n.reagents.some(r=>r.resource===e))},reactionArrowPositions(t){if(!this.isDisplayed(t)||this.isCapped(t))return;const e=t.reagent.x,i=t.reagent.y,n=t.product.x,r=t.product.y,s=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-i,2)),a=s*40,o=this.animationTimer%a/a,c=Math.max(0,o+2/s),d=Math.min(1,o-2/s);return{x1:`${e*(1-c)+n*c}%`,y1:`${i*(1-c)+r*c}%`,x2:`${e*(1-d)+n*d}%`,y2:`${i*(1-d)+r*d}%`}},reactionArrowPaths(t){return{x1:`${t.reagent.x}%`,y1:`${t.reagent.y}%`,x2:`${t.product.x}%`,y2:`${t.product.y}%`}},reactionPathClass(t){return{"o-alchemy-reaction-path":this.isUnlocked(t),"o-alchemy-reaction-path--capped":this.isCapped(t)&&this.isDisplayed(t),"o-alchemy-reaction-path--less-than-required":this.isLessThanRequired(t)&&this.isDisplayed(t),"o-alchemy-reaction-path--focused":!this.isCapped(t)&&this.isFocusedReaction(t),"o-alchemy-reaction-path--not-focused":!this.isFocusedReaction(t)&&this.focusedResourceId!==-1,"o-alchemy-reaction-path--doomed":this.isDoomed}},reactionArrowClass(t){return{"o-alchemy-reaction-arrow":!this.isCapped(t)&&this.isDisplayed(t),"o-alchemy-reaction-arrow--focused":this.isFocusedReaction(t)}},showAlchemyHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(t=>t.name==="Glyph Alchemy")[0],Modal.h2p.show()},toggleAllReactions(){const t=this.allReactionsDisabled;for(const e of this.reactions)e.isActive=t},nodeClass(t){const e=t.resource;return{"o-clickable":e.isUnlocked&&!e.isBaseResource&&!this.isDoomed}}}};var $Ge=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-ra-alchemy-tab"},[i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.showAlchemyHowTo}},[e._v(" Click for alchemy info ")]),e.isDoomed?e._e():i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.toggleAllReactions}},[e._v(" "+e._s(e.allReactionsDisabled?"Enable":"Disable")+" all reactions ")]),e.realityCreationVisible?i("PrimaryButton",{class:e.realityGlyphCreationClass,attrs:{onclick:"Modal.realityGlyph.show()"}},[e._v(" View Reality Glyph creation ")]):e._e()],1),i("AlchemyResourceInfo",{key:e.infoResourceId,attrs:{resource:e.infoResource}}),i("br"),e._v(" Glyphs can now be refined using your Glyph filter in the Glyphs tab. "),i("br"),e._v(" When refining a Glyph, it will only give you resources up to a cap of "+e._s(e.formatX(e.capFactor))+" its highest refinement value. "),e.reactionsAvailable?i("span",[e._v(" Reactions trigger once every time you Reality, unaffected by amplification from stored real time. ")]):e._e(),i("div",{staticClass:"l-alchemy-circle",style:e.circleStyle},[e.isDoomed?i("span",{staticClass:"c-pelle-symbol-overlay",domProps:{innerHTML:e._s(e.pelleSymbol)}}):e._e(),i("svg",{staticClass:"l-alchemy-orbit-canvas"},e._l(e.layout.orbits,function(n,r){return i("circle",{key:r,staticClass:"o-alchemy-orbit",class:e.orbitClass,attrs:{cx:"50%",cy:"50%",r:e.orbitSize(n)}})}),0),e._l(e.layout.nodes,function(n,r){return i("AlchemyCircleNode",{key:r,class:e.nodeClass(n),attrs:{node:n,"is-focused":e.isFocusedNode(n)},on:{mouseenter:function(s){return e.handleMouseEnter(n)},mouseleave:e.handleMouseLeave,click:function(s){return e.handleClick(n)}}})}),i("svg",{staticClass:"l-alchemy-arrow-canvas"},[e._l(e.layout.reactionArrows,function(n,r){return i("line",e._b({key:"arrow-"+r+e.realityAmount,class:e.reactionPathClass(n)},"line",e.reactionArrowPaths(n),!1))}),e._l(e.layout.reactionArrows,function(n,r){return i("line",e._b({key:"arrow2-"+r+e.realityAmount,class:e.reactionArrowClass(n)},"line",e.reactionArrowPositions(n),!1))})],2)],2)],1)},HGe=[],VGe=K(FGe,$Ge,HGe,!1,null,"4815fc77");const qGe=VGe.exports,YGe={name:"AntimatterDimensionProgressBar",data(){return{fill:0,tooltip:"",displayPercents:""}},computed:{progressBarStyle(){return{width:`${(this.fill*100).toFixed(2)}%`}}},methods:{update(){this.displayPercents=formatPercents(this.fill,2);const t=(n,r,s)=>{this.fill=Math.clampMax(n.pLog10()/Decimal.log10(r),1),this.tooltip=s},e=(n,r,s)=>{this.fill=Math.clampMax(n/r,1),this.tooltip=s};if(Player.isInAntimatterChallenge||EternityChallenge.isRunning||player.dilation.active||Laitela.isRunning)if(Player.isInAntimatterChallenge)t(Currency.antimatter.value,Player.antimatterChallenge.goal,"Percentage to Challenge goal");else if(EternityChallenge.isRunning)if(Perk.studyECBulk.isBought){const n=EternityChallenge.current.gainedCompletionStatus.nextGoalAt;n?t(Currency.infinityPoints.value,n,"Percentage to next Challenge completion"):t(Currency.infinityPoints.value,10,"This Challenge is already fully completed!")}else t(Currency.infinityPoints.value,Player.eternityGoal,"Percentage to Eternity Challenge goal");else player.dilation.active?player.dilation.lastEP.gt(0)?t(Currency.antimatter.value,getTachyonReq(),"Percentage to gain more TP in Dilation"):t(Currency.infinityPoints.value,Player.eternityGoal,"Percentage to Eternity in Dilation"):t(Decimal.pow10(player.celestials.laitela.entropy),10,"Percentage to Destabilized Reality");else if(Pelle.isDoomed)PelleRifts.recursion.milestones[2].canBeApplied||GalaxyGenerator.spentGalaxies>0?t(Currency.infinityPoints.value,Tesseracts.nextCost,"Percentage to next Tesseract"):PelleStrikes.dilation.hasStrike?t(Currency.eternityPoints.value,L.E4000,"Percentage to Galaxy Generator"):PelleStrikes.ECs.hasStrike?e((Math.min(Currency.timeTheorems.max.toNumber()/12900,1)+Math.min(EternityChallenges.completions/60,1))/2,1,"Percentage to fifth Strike"):PelleStrikes.eternity.hasStrike?e(Currency.timeTheorems.max.toNumber(),115,"Percentage to fourth Strike"):PelleStrikes.powerGalaxies.hasStrike?t(Currency.infinityPoints.value,Player.eternityGoal,"Percentage to third Strike"):PelleStrikes.infinity.hasStrike?player.break?t(Currency.infinityPoints.value,5e11,"Percentage to second Strike"):t(Currency.antimatter.value,Decimal.NUMBER_MAX_VALUE,"Percentage to Infinity"):t(Currency.antimatter.value,Decimal.NUMBER_MAX_VALUE,"Percentage to first Strike");else if(Enslaved.isCompleted)t(Currency.infinityPoints.value,Tesseracts.nextCost,"Percentage to next Tesseract");else if(PlayerProgress.dilationUnlocked())t(Currency.eternityPoints.value,L.E4000,"Percentage to Reality");else if(InfinityDimension(8).isUnlocked)t(Currency.infinityPoints.value,Player.eternityGoal,"Percentage to Eternity");else if(player.break){const n=`Percentage to unlock a new ${InfinityDimensions.next().hasIPUnlock?"type of Dimension":"Infinity Dimension"}`,r=InfinityDimensions.next();r.ipRequirementReached?t(player.records.thisEternity.maxAM,r.amRequirement,n):t(player.infinityPoints,r.ipRequirement,n)}else t(Currency.antimatter.value,Decimal.NUMBER_MAX_VALUE,"Percentage to Infinity")}}};var WGe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-progress-bar"},[i("div",{staticClass:"c-progress-bar__fill",style:e.progressBarStyle},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltip,expression:"tooltip"}],staticClass:"c-progress-bar__percents"},[e._v(" "+e._s(e.displayPercents)+" ")])])])},jGe=[],zGe=K(YGe,WGe,jGe,!1,null,null);const i4=zGe.exports,XGe={name:"GenericDimensionRowText",props:{tier:{type:Number,required:!0},name:{type:String,required:!0},multiplierText:{type:String,required:!0},amountText:{type:String,required:!0},rate:{type:Object,required:!0}},data(){return{isSmall:0}},computed:{rateText(){return this.rate.neq(0)?` (+${format(this.rate,2,2)}%/s)`:""},showPercentage(){return player.options.showHintText.showPercentage||ui.view.shiftDown}},methods:{update(){this.isSmall=window.innerWidth<1573},adjustableTextClass(){return{"l-narrow-box":this.isSmall,"l-wide-box":!this.isSmall}}}};var KGe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-dimension-text-container"},[i("div",{class:e.adjustableTextClass()},[i("span",{staticClass:"c-dim-row__large"},[e._v(" "+e._s(e.name)+" ")]),i("span",{staticClass:"c-dim-row__small"},[e._v(" "+e._s(e.multiplierText)+" ")])]),i("div",{class:e.adjustableTextClass()},[i("span",{staticClass:"c-dim-row__large"},[e._v(" "+e._s(e.amountText)+" ")]),e.rate.neq(0)&&e.showPercentage?i("span",{staticClass:"c-dim-row__small"},[e._v(" "+e._s(e.rateText)+" ")]):e._e()])])},ZGe=[],QGe=K(XGe,KGe,ZGe,!1,null,"3c275ef6");const yy=QGe.exports,JGe={name:"ClassicAntimatterDimensionRow",components:{GenericDimensionRowText:yy,PrimaryButton:yt},props:{tier:{type:Number,required:!0}},data(){return{end:!1,isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:0,boughtBefore10:0,rateOfChange:new Decimal(0),singleCost:new Decimal(0),until10Cost:new Decimal(0),isAffordable:!1,isAffordableUntil10:!1,isContinuumActive:!1,continuumValue:0,isShown:!1,isCostsAD:!1,formattedAmount:null,hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,name(){return`${AntimatterDimension(this.tier).shortDisplayName} Antimatter Dimension`},amountText(){return this.formattedAmount?this.formattedAmount:`${this.tier<8?format(this.amount,2):formatInt(this.amount)} (${formatInt(this.boughtBefore10)})`},singleText(){if(this.isCapped)return"Capped";const t=this.showCostTitle(this.singleCost)?"Cost: ":"",e=this.isCostsAD?`${this.costUnit}`:"AM";return`${t} ${format(this.singleCost)} ${e}`},until10Text(){if(this.isCapped)return"Shattered by Nameless";if(this.isContinuumActive)return`Continuum: ${this.continuumString}`;const t=`Until ${formatInt(10)},${this.showCostTitle(this.until10Cost)?" Cost":""}`,e=this.isCostsAD?`${this.costUnit}`:"AM";return`${t} ${format(this.until10Cost)} ${e}`},continuumString(){return formatFloat(this.continuumValue,2)},showRow(){return this.isShown||this.isUnlocked||this.amount.gt(0)},boughtTooltip(){return this.isCapped?`Nameless prevents the purchase of more than ${format(1)} 8th Antimatter Dimension`:this.isContinuumActive?"Continuum produces all your Antimatter Dimensions":`Purchased ${quantifyInt("time",this.bought)}`},costUnit(){return`${AntimatterDimension(this.tier-2).shortDisplayName} AD`},buySingleClass(){return{"o-primary-btn--buy-ad o-primary-btn--buy-single-ad c-dim-tooltip-container":!0,"l-dim-row-small-text":this.isLongText(this.singleText)||!this.showCostTitle(this.singleCost)}},buyTenClass(){return{"o-primary-btn--buy-ad o-primary-btn--buy-dim c-dim-tooltip-container":!0,"o-primary-btn--buy-10-ad":!this.isContinuumActive,"o-primary-btn--continuum-ad o-continuum":this.isContinuumActive,"l-dim-row-small-text":this.isLongText(this.until10Text)&&!this.isContinuumActive}}},methods:{update(){const t=this.tier;if(t===8&&this.isDoomed&&(this.formattedAmount=formatInt(this.amount)),t>DimBoost.maxDimensionsUnlockable)return;const e=AntimatterDimension(t);this.isUnlocked=e.isAvailableForPurchase,this.isCapped=t===8&&Enslaved.isRunning&&e.bought>=1,this.multiplier.copyFrom(e.multiplier),this.amount.copyFrom(e.totalAmount),this.totalAmount=e.totalAmount,this.bought=e.bought,this.boughtBefore10=e.boughtBefore10,this.singleCost.copyFrom(e.cost),this.until10Cost.copyFrom(e.costUntil10),t<8&&this.rateOfChange.copyFrom(e.rateOfChange),this.isAffordable=e.isAffordable,this.isAffordableUntil10=e.isAffordableUntil10,this.isContinuumActive=Laitela.continuumActive,this.isContinuumActive&&(this.continuumValue=e.continuumValue),this.isShown=DimBoost.totalBoosts>0&&DimBoost.totalBoosts+3>=t||PlayerProgress.infinityUnlocked(),this.isCostsAD=NormalChallenge(6).isRunning&&t>2&&!this.isContinuumActive,this.hasTutorial=t===1&&Tutorial.isActive(TUTORIAL_STATE.DIM1)||t===2&&Tutorial.isActive(TUTORIAL_STATE.DIM2)},buySingle(){this.isContinuumActive||buyOneDimension(this.tier)},buyUntil10(){this.isContinuumActive||buyManyDimension(this.tier)},showCostTitle(t){return t.exponent<1e6},isLongText(t){return t.length>20},tutorialClass(){return{"l-glow-container":!0,"tutorial--glow":this.isAffordable&&this.hasTutorial}}}};var eUe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showRow,expression:"showRow"}],staticClass:"c-dimension-row c-antimatter-dim-row l-dimension-single-row",class:{"c-dim-row--not-reached":!e.isUnlocked}},[i("GenericDimensionRowText",{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,2),"amount-text":e.amountText,rate:e.rateOfChange}}),i("div",{staticClass:"l-dim-row-multi-button-container"},[e.isContinuumActive?e._e():i("PrimaryButton",{class:e.buySingleClass,attrs:{enabled:e.isAffordable&&!e.isCapped&&e.isUnlocked},on:{click:e.buySingle}},[i("div",{class:e.tutorialClass()},[e._v(" "+e._s(e.singleText)+" ")]),i("div",{staticClass:"c-dim-purchase-count-tooltip"},[e._v(" "+e._s(e.boughtTooltip)+" ")]),e.hasTutorial?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()]),i("PrimaryButton",{class:e.buyTenClass,attrs:{enabled:(e.isAffordableUntil10||e.isContinuumActive)&&!e.isCapped&&e.isUnlocked},on:{click:e.buyUntil10}},[e._v(" "+e._s(e.until10Text)+" "),i("div",{staticClass:"c-dim-purchase-count-tooltip"},[e._v(" "+e._s(e.boughtTooltip)+" ")])])],1)],1)},tUe=[],iUe=K(JGe,eUe,tUe,!1,null,"1ed715a0");const nUe=iUe.exports,rUe={name:"ClassicAntimatterDimensionsTabHeader",components:{PrimaryButton:yt},data(){return{isSacrificeUnlocked:!1,isSacrificeAffordable:!1,currentSacrifice:new Decimal(0),sacrificeBoost:new Decimal(0),disabledCondition:""}},computed:{sacrificeTooltip(){return`Boosts 8th Antimatter Dimension by ${formatX(this.sacrificeBoost,2,2)}`}},methods:{update(){const t=Sacrifice.isVisible;this.isSacrificeUnlocked=t,t&&(this.isSacrificeAffordable=Sacrifice.canSacrifice,this.currentSacrifice.copyFrom(Sacrifice.totalBoost),this.sacrificeBoost.copyFrom(Sacrifice.nextBoost),this.disabledCondition=Sacrifice.disabledCondition)},sacrifice(){sacrificeBtnClick()},maxAll(){maxAll()}}};var sUe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-antimatter-dim-tab__header"},[i("PrimaryButton",{directives:[{name:"show",rawName:"v-show",value:e.isSacrificeUnlocked,expression:"isSacrificeUnlocked"},{name:"tooltip",rawName:"v-tooltip",value:e.sacrificeTooltip,expression:"sacrificeTooltip"}],staticClass:"o-primary-btn--sacrifice",attrs:{enabled:e.isSacrificeAffordable},on:{click:e.sacrifice}},[e.isSacrificeAffordable?i("span",[e._v(" Dimensional Sacrifice ("+e._s(e.formatX(e.sacrificeBoost,2,2))+") ")]):i("span",[e._v(" Dimensional Sacrifice Disabled ("+e._s(e.disabledCondition)+") ")])]),i("PrimaryButton",{staticClass:"o-primary-btn--buy-max",on:{click:e.maxAll}},[e._v(" Max all (M) ")])],1)},aUe=[],oUe=K(rUe,sUe,aUe,!1,null,null);const lUe=oUe.exports,cUe={name:"ClassicAntimatterGalaxyRow",components:{PrimaryButton:yt},data(){return{type:GALAXY_TYPE.NORMAL,galaxies:{normal:0,replicanti:0,dilation:0},requirement:{tier:1,amount:0},canBeBought:!1,distantStart:0,remoteStart:0,lockText:null,canBulkBuy:!1,creditsClosed:!1,scalingText:{distant:null,remote:null},hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).displayName},buttonText(){if(this.lockText!==null)return this.lockText;const t=[];return Achievement(111).isUnlocked||t.push("Dimensions"),Achievement(143).isUnlocked||t.push("Dimension Boosts"),t.length===0?"Increase the power of Tickspeed upgrades":`Reset your ${makeEnumeration(t)} to increase the power of Tickspeed upgrades`},sumText(){const t=[Math.max(this.galaxies.normal,0)];this.galaxies.replicanti>0&&t.push(this.galaxies.replicanti),this.galaxies.dilation>0&&t.push(this.galaxies.dilation);const e=t.map(this.formatGalaxies).join(" + ");return t.length>=2?`${e} = ${this.formatGalaxies(t.sum())}`:e},typeName(){switch(this.type){case GALAXY_TYPE.NORMAL:return"Antimatter Galaxies";case GALAXY_TYPE.DISTANT:return"Distant Antimatter Galaxies";case GALAXY_TYPE.REMOTE:return"Remote Antimatter Galaxies"}},hasIncreasedScaling(){return this.type!==GALAXY_TYPE.NORMAL},costScalingText(){switch(this.type){case GALAXY_TYPE.DISTANT:return`Each Galaxy is more expensive past ${quantifyInt("Galaxy",this.distantStart)}`;case GALAXY_TYPE.REMOTE:return`Increased Galaxy cost scaling: ${[{type:"distant",function:"quadratic",amount:this.distantStart},{type:"remote",function:"exponential",amount:this.remoteStart}].sort((e,i)=>e.amount-i.amount).map(e=>`${e.function} scaling past ${this.formatGalaxies(e.amount)} (${e.type})`).join(", ").capitalize()}`}},classObject(){return{"o-primary-btn--galaxy l-dim-row__prestige-button":!0,"tutorial--glow":this.canBeBought&&this.hasTutorial,"o-pelle-disabled-pointer":this.creditsClosed}}},methods:{update(){this.type=Galaxy.type,this.galaxies.normal=player.galaxies+GalaxyGenerator.galaxies,this.galaxies.replicanti=Replicanti.galaxies.total,this.galaxies.dilation=player.dilation.totalTachyonGalaxies;const t=Galaxy.requirement;this.requirement.amount=t.amount,this.requirement.tier=t.tier,this.canBeBought=t.isSatisfied&&Galaxy.canBeBought,this.distantStart=EternityChallenge(5).isRunning?0:Galaxy.costScalingStart,this.remoteStart=Galaxy.remoteStart,this.lockText=Galaxy.lockText,this.canBulkBuy=EternityMilestone.autobuyMaxGalaxies.isReached,this.creditsClosed=GameEnd.creditsEverClosed,this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.GALAXY)},buyGalaxy(t){this.canBeBought&&manualRequestGalaxyReset(this.canBulkBuy&&t)},formatGalaxies(t){return t>1e8?format(t,2):formatInt(t)}}};var uUe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-dimension-row c-antimatter-dim-row c-antimatter-prestige-row"},[i("div",{staticClass:"l-dim-row__prestige-text c-dim-row__label c-dim-row__label--amount l-text-wrapper"},[e._v(" "+e._s(e.typeName)+" ("+e._s(e.sumText)+"): requires "+e._s(e.formatInt(e.requirement.amount))+" "+e._s(e.dimName)+" Dimensions "),i("div",{staticClass:"l-scaling-text-wrapper"},[e._v(" "+e._s(e.hasIncreasedScaling?e.costScalingText:"")+" ")])]),i("PrimaryButton",{class:e.classObject,attrs:{enabled:e.canBeBought},on:{click:[function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.buyGalaxy(!0)},function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.buyGalaxy(!1)}]}},[e._v(" "+e._s(e.buttonText)+" "),e.hasTutorial?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()])],1)},dUe=[],hUe=K(cUe,uUe,dUe,!1,null,"6dfdda2a");const fUe=hUe.exports,pUe={name:"ClassicDimensionBoostRow",components:{PrimaryButton:yt},data(){return{requirement:{tier:1,amount:0},isBuyable:!1,purchasedBoosts:0,imaginaryBoosts:0,lockText:null,unlockedByBoost:null,creditsClosed:!1,requirementText:null,hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).displayName},boostCountText(){if(this.requirementText)return this.requirementText;const t=[this.purchasedBoosts];this.imaginaryBoosts!==0&&t.push(this.imaginaryBoosts);const e=t.map(formatInt).join(" + ");return t.length>=2?`${e} = ${formatInt(t.sum())}`:e},classObject(){return{"o-primary-btn--dimboost l-dim-row__prestige-button":!0,"tutorial--glow":this.isBuyable&&this.hasTutorial,"o-pelle-disabled-pointer":this.creditsClosed}}},methods:{update(){const t=DimBoost.requirement;this.requirement.tier=t.tier,this.requirement.amount=t.amount,this.isBuyable=t.isSatisfied&&DimBoost.canBeBought,this.purchasedBoosts=DimBoost.purchasedBoosts,this.imaginaryBoosts=DimBoost.imaginaryBoosts,this.lockText=DimBoost.lockText,this.unlockedByBoost=DimBoost.unlockedByBoost,this.creditsClosed=GameEnd.creditsClosed,this.isDoomed&&(this.requirementText=formatInt(this.purchasedBoosts)),this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.DIMBOOST)},dimensionBoost(t){!DimBoost.requirement.isSatisfied||!DimBoost.canBeBought||manualRequestDimensionBoost(t)}}};var mUe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-dimension-row c-antimatter-dim-row c-antimatter-prestige-row"},[i("div",{staticClass:"l-dim-row__prestige-text c-dim-row__label c-dim-row__label--amount"},[e._v(" Dimension Boost ("+e._s(e.boostCountText)+"): requires "+e._s(e.formatInt(e.requirement.amount))+" "+e._s(e.dimName)+" Dimensions ")]),i("PrimaryButton",{class:e.classObject,attrs:{enabled:e.isBuyable},on:{click:[function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.dimensionBoost(!0)},function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.dimensionBoost(!1)}]}},[e._v(" "+e._s(e.unlockedByBoost)+" "),e.hasTutorial?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()])],1)},yUe=[],gUe=K(pUe,mUe,yUe,!1,null,"2831238d");const vUe=gUe.exports,bUe={name:"TickspeedRow",data(){return{purchasedTickspeed:0,freeTickspeed:0,isVisible:!1,mult:new Decimal(0),cost:new Decimal(0),isAffordable:!1,tickspeed:new Decimal(0),gameSpeedMult:1,galaxyCount:0,isContinuumActive:!1,continuumValue:0,hasTutorial:!1,hasRealityButton:!1,isEC9:!1}},computed:{classObject(){return{"l-tickspeed-container":!0,"l-tickspeed-container--hidden":!this.isVisible}},multiplierDisplay(){if(InfinityChallenge(3).isRunning)return`Multiply all Antimatter Dimensions by
        ${formatX(1.05+this.galaxyCount*.005,3,3)}`;const t=this.mult;return`${formatX(t.reciprocal(),2,3)} faster / upgrade.`},tickspeedDisplay(){return`Tickspeed: ${format(this.tickspeed,2,3)} / sec`},continuumString(){return formatFloat(this.continuumValue,2)},upgradeCount(){const t=this.purchasedTickspeed;return this.freeTickspeed?t===0||this.isContinuumActive?`${formatInt(this.freeTickspeed)} Free Upgrades`:`${formatInt(t)} Purchased + ${formatInt(this.freeTickspeed)} Free`:quantifyInt("Purchased Upgrade",t)}},methods:{update(){this.hasRealityButton=PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought,this.purchasedTickspeed=player.totalTickBought,this.freeTickspeed=FreeTickspeed.amount,this.isEC9=EternityChallenge(9).isRunning,this.isVisible=Tickspeed.isUnlocked||this.isEC9,this.isVisible&&(this.mult.copyFrom(Tickspeed.multiplier),this.cost.copyFrom(Tickspeed.cost),this.isAffordable=Tickspeed.isAvailableForPurchase&&Tickspeed.isAffordable,this.tickspeed.copyFrom(Tickspeed.perSecond),this.gameSpeedMult=getGameSpeedupForDisplay(),this.galaxyCount=player.galaxies,this.isContinuumActive=Laitela.continuumActive,this.isContinuumActive&&(this.continuumValue=Tickspeed.continuumValue),this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.TICKSPEED))},buttonClass(){return{"o-primary-btn":!0,"tickspeed-btn":!0,"o-primary-btn--disabled":!this.isAffordable&&!this.isContinuumActive,"o-non-clickable o-continuum":this.isContinuumActive,"tutorial--glow":this.isAffordable&&this.hasTutorial}}}};var _Ue=function(){var e=this,i=e._self._c;return i("div",{class:e.classObject},[i("div",{staticClass:"tickspeed-buttons"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.upgradeCount,expression:"upgradeCount"}],class:e.buttonClass(),attrs:{onclick:"buyTickSpeed()"}},[e.isContinuumActive?i("span",[e._v(" Tickspeed Continuum: "+e._s(e.continuumString)+" ")]):e.isEC9?i("span",[e._v(" Tickspeed Unpurchasable (EC 9) ")]):i("span",[e._v(" Tickspeed Cost: "+e._s(e.format(e.cost))+" ")]),e.hasTutorial?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()]),e.isContinuumActive?e._e():i("button",{staticClass:"o-primary-btn tickspeed-max-btn",class:{"o-primary-btn--disabled":!e.isAffordable&&!e.isContinuumActive},attrs:{onclick:"buyMaxTickSpeed()"}},[e._v(" Buy Max ")])]),e.hasRealityButton?i("div",{staticClass:"tickspeed-labels"},[e._v(" "+e._s(e.tickspeedDisplay)+" | "+e._s(e.multiplierDisplay)+" ")]):e._e()])},EUe=[],TUe=K(bUe,_Ue,EUe,!1,null,"fbaba040");const n4=TUe.exports,wUe={name:"ClassicAntimatterDimensionsTab",components:{PrimaryButton:yt,AntimatterDimensionRow:nUe,AntimatterDimensionsTabHeader:lUe,AntimatterGalaxyRow:fUe,DimensionBoostRow:vUe,AntimatterDimensionProgressBar:i4,TickspeedRow:n4},data(){return{hasDimensionBoosts:!1,isQuickResetAvailable:!1,isSacrificeUnlocked:!1,buy10Mult:new Decimal(0),currentSacrifice:new Decimal(0),hasRealityButton:!1,multiplierText:""}},methods:{update(){this.hasDimensionBoosts=player.dimensionBoosts>0,this.isQuickResetAvailable=Player.isInAntimatterChallenge&&Player.antimatterChallenge.isQuickResettable,this.isSacrificeUnlocked=Sacrifice.isVisible,this.buy10Mult.copyFrom(AntimatterDimensions.buyTenMultiplier),this.currentSacrifice.copyFrom(Sacrifice.totalBoost),this.hasRealityButton=PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought;const t=this.isSacrificeUnlocked?` | Dimensional Sacrifice multiplier: ${formatX(this.currentSacrifice,2,2)}`:"";this.multiplierText=`Buy 10 Dimension purchase multiplier: ${formatX(this.buy10Mult,2,2)}${t}`},quickReset(){softReset(-1,!0,!0)}}};var CUe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-old-ui-antimatter-dim-tab"},[i("AntimatterDimensionsTabHeader"),e._v(" "+e._s(e.multiplierText)+" "),i("TickspeedRow"),i("div",{staticClass:"l-dimensions-container"},[e._l(8,function(n){return i("AntimatterDimensionRow",{key:n,attrs:{tier:n}})}),i("DimensionBoostRow"),i("AntimatterGalaxyRow")],2),e.isQuickResetAvailable?i("PrimaryButton",{staticClass:"o-primary-btn--quick-reset",on:{click:e.quickReset}},[e._v(" Perform a Dimension Boost reset "),e.hasDimensionBoosts?i("span",[e._v(" but lose a Dimension Boost")]):i("span",[e._v(" for no gain")])]):e._e(),i("div",{staticClass:"l-flex"}),i("AntimatterDimensionProgressBar",{staticClass:"l-antimatter-dim-tab__progress_bar"})],1)},SUe=[],kUe=K(wUe,CUe,SUe,!1,null,"dad05b98");const AUe=kUe.exports,RUe={name:"ModernAntimatterDimensionRow",components:{GenericDimensionRowText:yy},props:{tier:{type:Number,required:!0}},data(){return{isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:0,boughtBefore10:0,rateOfChange:new Decimal(0),singleCost:new Decimal(0),until10Cost:new Decimal(0),isAffordable:!1,buyUntil10:!0,howManyCanBuy:0,isContinuumActive:!1,continuumValue:0,isShown:!1,isCostsAD:!1,amountDisplay:"",hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,name(){return`${AntimatterDimension(this.tier).shortDisplayName} Antimatter Dimension`},costDisplay(){return this.buyUntil10?format(this.until10Cost):format(this.singleCost)},continuumString(){return formatFloat(this.continuumValue,2)},showRow(){return this.isShown||this.isUnlocked||this.amount.gt(0)},boughtTooltip(){return this.isCapped?`Nameless prevents the purchase of more than ${format(1)} 8th Antimatter Dimension`:this.isContinuumActive?"Continuum produces all your Antimatter Dimensions":`Purchased ${quantifyInt("time",this.bought)}`},costUnit(){return`${AntimatterDimension(this.tier-2).shortDisplayName} AD`},buttonPrefix(){return this.isUnlocked?this.isCapped?"Shattered by Nameless":this.isContinuumActive?"Continuum: ":`Buy ${formatInt(this.howManyCanBuy)}`:"Locked"},buttonValue(){if(this.isCapped)return"";if(this.isContinuumActive)return this.continuumString;const t=this.showCostTitle(this.buyUntil10?this.until10Cost:this.singleCost)?"Cost: ":"",e=this.isCostsAD?this.costUnit:"AM";return`${t}${this.costDisplay} ${e}`},hasLongText(){return this.buttonValue.length>20}},methods:{update(){const t=this.tier;if(t>DimBoost.maxDimensionsUnlockable&&!this.isDoomed)return;const e=AntimatterDimension(t);this.isUnlocked=e.isAvailableForPurchase;const i=player.buyUntil10;this.isCapped=t===8&&Enslaved.isRunning&&e.bought>=1,this.multiplier.copyFrom(AntimatterDimension(t).multiplier),this.amount.copyFrom(e.totalAmount),this.bought=e.bought,this.boughtBefore10=e.boughtBefore10,this.howManyCanBuy=i?e.howManyCanBuy:Math.min(e.howManyCanBuy,1),this.singleCost.copyFrom(e.cost),this.until10Cost.copyFrom(e.cost.times(Math.max(e.howManyCanBuy,1))),t<8&&this.rateOfChange.copyFrom(e.rateOfChange),this.isAffordable=e.isAffordable,this.buyUntil10=i,this.isContinuumActive=Laitela.continuumActive,this.isContinuumActive&&(this.continuumValue=e.continuumValue),this.isShown=DimBoost.totalBoosts>0&&DimBoost.totalBoosts+3>=t||PlayerProgress.infinityUnlocked(),this.isCostsAD=NormalChallenge(6).isRunning&&t>2&&!this.isContinuumActive,this.amountDisplay=this.tier<8?format(this.amount,2):formatInt(this.amount),this.hasTutorial=t===1&&Tutorial.isActive(TUTORIAL_STATE.DIM1)||t===2&&Tutorial.isActive(TUTORIAL_STATE.DIM2)},buy(){this.isContinuumActive||(this.howManyCanBuy===1?buyOneDimension(this.tier):buyAsManyAsYouCanBuy(this.tier))},showCostTitle(t){return t.exponent<1e6},buttonClass(){return{"o-primary-btn o-primary-btn--new":!0,"o-primary-btn--disabled":!this.isAffordable&&!this.isContinuumActive||!this.isUnlocked||this.isCapped,"o-non-clickable o-continuum":this.isContinuumActive}},buttonTextClass(){return{"button-content l-modern-buy-ad-text":!0,"tutorial--glow":this.isAffordable&&this.hasTutorial}}}};var IUe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showRow,expression:"showRow"}],staticClass:"c-dimension-row l-dimension-row-antimatter-dim c-antimatter-dim-row l-dimension-single-row",class:{"c-dim-row--not-reached":!e.isUnlocked}},[i("GenericDimensionRowText",{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,2),"amount-text":e.amountDisplay,rate:e.rateOfChange}}),i("div",{staticClass:"l-dim-row-multi-button-container c-modern-dim-tooltip-container"},[i("div",{staticClass:"c-modern-dim-purchase-count-tooltip"},[e._v(" "+e._s(e.boughtTooltip)+" ")]),i("button",{class:e.buttonClass(),on:{click:e.buy}},[i("div",{class:e.buttonTextClass()},[i("div",[e._v(" "+e._s(e.buttonPrefix)+" ")]),i("div",{class:{"l-dim-row-small-text":e.hasLongText}},[e._v(" "+e._s(e.buttonValue)+" ")]),e.hasTutorial?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()]),!e.isContinuumActive&&e.isUnlocked&&!e.isCapped?i("div",{staticClass:"fill"},[i("div",{staticClass:"fill-purchased",style:{width:e.boughtBefore10*10+"%"}}),i("div",{staticClass:"fill-possible",style:{width:e.howManyCanBuy*10+"%"}})]):e._e()])])],1)},DUe=[],xUe=K(RUe,IUe,DUe,!1,null,"8b7ed69c");const MUe=xUe.exports,PUe={name:"ModernAntimatterGalaxyRow",data(){return{type:GALAXY_TYPE.NORMAL,galaxies:{normal:0,replicanti:0,dilation:0},requirement:{tier:1,amount:0},canBeBought:!1,distantStart:0,remoteStart:0,lockText:null,canBulkBuy:!1,creditsClosed:!1,scalingText:{distant:null,remote:null},hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).shortDisplayName},buttonText(){if(this.lockText!==null)return this.lockText;const t=[];return Achievement(111).isUnlocked||t.push("Dimensions"),Achievement(143).isUnlocked||t.push("Dimension Boosts"),t.length===0?"Increase the power of Tickspeed upgrades":`Reset your ${makeEnumeration(t)} to increase the power of Tickspeed upgrades`},sumText(){const t=[Math.max(this.galaxies.normal,0)];this.galaxies.replicanti>0&&t.push(this.galaxies.replicanti),this.galaxies.dilation>0&&t.push(this.galaxies.dilation);const e=t.map(this.formatGalaxies).join(" + ");return t.length>=2?`${e} = ${this.formatGalaxies(t.sum())}`:e},typeName(){switch(this.type){case GALAXY_TYPE.NORMAL:return"Antimatter Galaxies";case GALAXY_TYPE.DISTANT:return"Distant Antimatter Galaxies";case GALAXY_TYPE.REMOTE:return"Remote Antimatter Galaxies"}},hasIncreasedScaling(){return this.type!==GALAXY_TYPE.NORMAL},costScalingText(){switch(this.type){case GALAXY_TYPE.DISTANT:return`Each Galaxy is more expensive past ${quantifyInt("Galaxy",this.distantStart)}`;case GALAXY_TYPE.REMOTE:return`Increased Galaxy cost scaling: ${[{type:"distant",function:"quadratic",amount:this.distantStart},{type:"remote",function:"exponential",amount:this.remoteStart}].sort((e,i)=>e.amount-i.amount).map(e=>`${e.function} scaling past ${this.formatGalaxies(e.amount)} (${e.type})`).join(", ").capitalize()}`}},classObject(){return{"o-primary-btn o-primary-btn--new o-primary-btn--dimension-reset":!0,"tutorial--glow":this.canBeBought&&this.hasTutorial,"o-primary-btn--disabled":!this.canBeBought,"o-pelle-disabled-pointer":this.creditsClosed}}},methods:{update(){this.type=Galaxy.type,this.galaxies.normal=player.galaxies+GalaxyGenerator.galaxies,this.galaxies.replicanti=Replicanti.galaxies.total,this.galaxies.dilation=player.dilation.totalTachyonGalaxies;const t=Galaxy.requirement;this.requirement.amount=t.amount,this.requirement.tier=t.tier,this.canBeBought=t.isSatisfied&&Galaxy.canBeBought,this.distantStart=EternityChallenge(5).isRunning?0:Galaxy.costScalingStart,this.remoteStart=Galaxy.remoteStart,this.lockText=Galaxy.lockText,this.canBulkBuy=EternityMilestone.autobuyMaxGalaxies.isReached,this.creditsClosed=GameEnd.creditsEverClosed,this.isDoomed&&(this.scalingText={distant:this.formatGalaxies(this.distantStart),remote:this.formatGalaxies(Galaxy.remoteStart)}),this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.GALAXY)},buyGalaxy(t){this.canBeBought&&manualRequestGalaxyReset(this.canBulkBuy&&t)},formatGalaxies(t){return t>1e8?format(t,2):formatInt(t)}}};var OUe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"reset-container galaxy"},[i("h4",[e._v(e._s(e.typeName)+" ("+e._s(e.sumText)+")")]),i("span",[e._v("Requires: "+e._s(e.formatInt(e.requirement.amount))+" "+e._s(e.dimName)+" Antimatter D")]),e.hasIncreasedScaling?i("span",[e._v(e._s(e.costScalingText))]):e._e(),i("button",{class:e.classObject,on:{click:[function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.buyGalaxy(!0)},function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.buyGalaxy(!1)}]}},[e._v(" "+e._s(e.buttonText)+" "),e.hasTutorial?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()])])},NUe=[],GUe=K(PUe,OUe,NUe,!1,null,null);const UUe=GUe.exports,LUe={name:"ModernDimensionBoostRow",data(){return{requirement:{tier:1,amount:0},isBuyable:!1,purchasedBoosts:0,imaginaryBoosts:0,lockText:null,unlockedByBoost:null,creditsClosed:!1,requirementText:null,hasTutorial:!1}},computed:{isDoomed:()=>Pelle.isDoomed,dimName(){return AntimatterDimension(this.requirement.tier).shortDisplayName},boostCountText(){if(this.requirementText)return this.requirementText;const t=[this.purchasedBoosts];this.imaginaryBoosts!==0&&t.push(this.imaginaryBoosts);const e=t.map(formatInt).join(" + ");return t.length>=2?`${e} = ${formatInt(t.sum())}`:e},classObject(){return{"o-primary-btn o-primary-btn--new o-primary-btn--dimension-reset":!0,"tutorial--glow":this.isBuyable&&this.hasTutorial,"o-primary-btn--disabled":!this.isBuyable,"o-pelle-disabled-pointer":this.creditsClosed}}},methods:{update(){const t=DimBoost.requirement;this.requirement.tier=t.tier,this.requirement.amount=t.amount,this.isBuyable=t.isSatisfied&&DimBoost.canBeBought,this.purchasedBoosts=DimBoost.purchasedBoosts,this.imaginaryBoosts=DimBoost.imaginaryBoosts,this.lockText=DimBoost.lockText,this.unlockedByBoost=DimBoost.unlockedByBoost,this.creditsClosed=GameEnd.creditsEverClosed,this.isDoomed&&(this.requirementText=formatInt(this.purchasedBoosts)),this.hasTutorial=Tutorial.isActive(TUTORIAL_STATE.DIMBOOST)},dimensionBoost(t){!DimBoost.requirement.isSatisfied||!DimBoost.canBeBought||manualRequestDimensionBoost(t)}}};var BUe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"reset-container dimboost"},[i("h4",[e._v("Dimension Boost ("+e._s(e.boostCountText)+")")]),i("span",[e._v("Requires: "+e._s(e.formatInt(e.requirement.amount))+" "+e._s(e.dimName)+" Antimatter D")]),i("button",{class:e.classObject,on:{click:[function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.dimensionBoost(!0)},function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.dimensionBoost(!1)}]}},[e._v(" "+e._s(e.unlockedByBoost)+" "),e.hasTutorial?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()])])},FUe=[],$Ue=K(LUe,BUe,FUe,!1,null,null);const HUe=$Ue.exports,VUe={name:"ModernAntimatterDimensionsTab",components:{PrimaryButton:yt,AntimatterDimensionProgressBar:i4,AntimatterDimensionRow:MUe,AntimatterGalaxyRow:UUe,DimensionBoostRow:HUe,TickspeedRow:n4},data(){return{hasDimensionBoosts:!1,buyUntil10:!0,isSacrificeUnlocked:!1,isSacrificeAffordable:!1,buy10Mult:new Decimal(0),currentSacrifice:new Decimal(0),sacrificeBoost:new Decimal(0),disabledCondition:"",isQuickResetAvailable:!1,hasContinuum:!1,isContinuumActive:!1,multiplierText:"",isFullyAutomated:!1}},computed:{sacrificeTooltip(){return this.isFullyAutomated?"Sacrifice autobuyer is enabled and Achievement 118 is unlocked, so Sacrifice is now fully automated":`Boosts 8th Antimatter Dimension by ${formatX(this.sacrificeBoost,2,2)}`}},methods:{maxAll(){maxAll()},sacrifice(){sacrificeBtnClick()},changeBuyMode(){if(!this.hasContinuum){player.buyUntil10=!player.buyUntil10;return}if(this.isContinuumActive)Laitela.setContinuum(!1),player.buyUntil10=!0;else if(player.buyUntil10)player.buyUntil10=!1;else{if(ImaginaryUpgrade(21).isLockingMechanics&&player.auto.disableContinuum){ImaginaryUpgrade(21).tryShowWarningModal();return}Laitela.setContinuum(!0)}},getUntil10Display(){return this.isContinuumActive?"Continuum":this.buyUntil10?"Until 10":"Buy 1"},update(){this.hasDimensionBoosts=player.dimensionBoosts>0,this.buyUntil10=player.buyUntil10,this.hasContinuum=Laitela.continuumUnlocked,this.isContinuumActive=Laitela.continuumActive,this.isQuickResetAvailable=Player.isInAntimatterChallenge&&Player.antimatterChallenge.isQuickResettable;const t=Sacrifice.isVisible;if(this.isSacrificeUnlocked=t,this.buy10Mult.copyFrom(AntimatterDimensions.buyTenMultiplier),this.multiplierText=`Buy 10 Dimension purchase multiplier: ${formatX(this.buy10Mult,2,2)}`,!t)return;this.isFullyAutomated=Autobuyer.sacrifice.isActive&&Achievement(118).isUnlocked,this.isSacrificeAffordable=Sacrifice.canSacrifice&&!this.isFullyAutomated,this.currentSacrifice.copyFrom(Sacrifice.totalBoost),this.sacrificeBoost.copyFrom(Sacrifice.nextBoost),this.disabledCondition=Sacrifice.disabledCondition;const e=this.isSacrificeUnlocked?` | Dimensional Sacrifice multiplier: ${formatX(this.currentSacrifice,2,2)}`:"";this.multiplierText+=e}}};var qUe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-antimatter-dim-tab"},[i("div",{staticClass:"modes-container"},[i("button",{staticClass:"o-primary-btn l-button-container",on:{click:e.changeBuyMode}},[e._v(" "+e._s(e.getUntil10Display())+" ")]),i("PrimaryButton",{directives:[{name:"show",rawName:"v-show",value:e.isSacrificeUnlocked,expression:"isSacrificeUnlocked"},{name:"tooltip",rawName:"v-tooltip",value:e.sacrificeTooltip,expression:"sacrificeTooltip"}],staticClass:"o-primary-btn--sacrifice",attrs:{enabled:e.isSacrificeAffordable},on:{click:e.sacrifice}},[e.isSacrificeAffordable?i("span",[e._v("Dimensional Sacrifice ("+e._s(e.formatX(e.sacrificeBoost,2,2))+")")]):e.isFullyAutomated&&e.disabledCondition!==""?i("span",[e._v(" Dimensional Sacrifice is Automated (Achievement 118) ")]):i("span",[e._v("Dimensional Sacrifice Disabled ("+e._s(e.disabledCondition)+")")])]),i("button",{staticClass:"o-primary-btn l-button-container",on:{click:e.maxAll}},[e._v(" Max All (M) ")])],1),i("span",[e._v(e._s(e.multiplierText))]),i("TickspeedRow"),i("div",{staticClass:"l-dimensions-container"},e._l(8,function(n){return i("AntimatterDimensionRow",{key:n,attrs:{tier:n}})}),1),i("div",{staticClass:"resets-container"},[i("DimensionBoostRow"),e.isQuickResetAvailable?i("PrimaryButton",{staticClass:"o-primary-btn--quick-reset",attrs:{onclick:"softReset(-1, true, true)"}},[e._v(" Perform a Dimension Boost reset "),e.hasDimensionBoosts?i("span",[e._v(" but lose a Dimension Boost")]):i("span",[e._v(" for no gain")])]):e._e(),i("AntimatterGalaxyRow")],1),i("AntimatterDimensionProgressBar")],1)},YUe=[],WUe=K(VUe,qUe,YUe,!1,null,"541ab54a");const jUe=WUe.exports,zUe={name:"AntimatterDimensionsTab",components:{ClassicAntimatterDimensionsTab:AUe,ModernAntimatterDimensionsTab:jUe},computed:{activeComponent(){return this.$viewModel.newUI?"ModernAntimatterDimensionsTab":"ClassicAntimatterDimensionsTab"}}};var XUe=function(){var e=this,i=e._self._c;return i(e.activeComponent,{tag:"component"})},KUe=[],ZUe=K(zUe,XUe,KUe,!1,null,null);const QUe=ZUe.exports,JUe={name:"AutobuyerToggles",components:{PrimaryButton:yt,PrimaryToggleButton:cn},data(){return{isDoomed:!1,autobuyersOn:!1,showContinuum:!1,disableContinuum:!1,allAutobuyersDisabled:!1}},watch:{autobuyersOn(t){player.auto.autobuyersOn=t},disableContinuum(t){if(ImaginaryUpgrade(21).isLockingMechanics&&!t){ImaginaryUpgrade(21).tryShowWarningModal();return}Laitela.setContinuum(!t)}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.autobuyersOn=player.auto.autobuyersOn,this.showContinuum=Laitela.isUnlocked,this.disableContinuum=player.auto.disableContinuum,this.allAutobuyersDisabled=Autobuyers.unlocked.every(t=>!t.isActive)},toggleAllAutobuyers(){for(const t of Autobuyers.unlocked)t.isActive=this.allAutobuyersDisabled}}};var eLe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{on:"Pause autobuyers",off:"Resume autobuyers"},model:{value:e.autobuyersOn,callback:function(n){e.autobuyersOn=n},expression:"autobuyersOn"}}),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:function(n){return e.toggleAllAutobuyers()}}},[e._v(" "+e._s(e.allAutobuyersDisabled?"Enable":"Disable")+" all autobuyers ")]),e.isDoomed?i("span",[e.showContinuum?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option"},[e._v(" Continuum is disabled ")]):e._e()],1):i("span",[e.showContinuum?i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{on:"Enable Continuum",off:"Disable Continuum"},model:{value:e.disableContinuum,callback:function(n){e.disableContinuum=n},expression:"disableContinuum"}}):e._e()],1)],1)},tLe=[],iLe=K(JUe,eLe,tLe,!1,null,"d9bd0b87");const nLe=iLe.exports,rLe={name:"DimensionBulkButton",props:{autobuyer:{type:Object,required:!0}},data(){return{hasMaxedInterval:!1,hasMaxedBulk:!1,isUnlocked:!1,bulkUnlimited:!1,bulk:1,cost:1,isAffordable:!1}},computed:{bulkDisplay(){if(this.hasMaxedBulk)return`${formatX(this.bulk,2,0)} bulk buy (capped)`;const t=Math.min(this.bulk*2,this.autobuyer.bulkCap);return`${formatX(this.bulk,2,0)} ➜ ${formatX(t,2,0)} bulk buy`},classObject(){return{"o-autobuyer-btn":!0,"o-autobuyer-btn--unavailable":!this.isAffordable&&!this.hasMaxedBulk,"o-non-clickable":this.hasMaxedBulk}}},methods:{update(){const t=this.autobuyer;this.hasMaxedInterval=t.hasMaxedInterval,this.isUnlocked=t.isUnlocked,this.hasMaxedBulk=t.hasMaxedBulk,this.bulkUnlimited=t.hasUnlimitedBulk,this.bulk=t.bulk,this.cost=t.cost,this.isAffordable=Currency.infinityPoints.gte(this.cost)},upgradeBulk(){this.autobuyer.upgradeBulk()}}};var sLe=function(){var e=this,i=e._self._c;return e.hasMaxedInterval&&!e.bulkUnlimited&&e.isUnlocked?i("button",{class:e.classObject,on:{click:e.upgradeBulk}},[i("span",[e._v(e._s(e.bulkDisplay))]),e.hasMaxedBulk?e._e():[i("br"),i("span",[e._v("Cost: "+e._s(e.format(e.cost,2,0))+" IP")])]],2):e.hasMaxedInterval&&!e.bulkUnlimited?i("button",{staticClass:"o-autobuyer-btn l-autobuyer-box__button o-autobuyer-btn--unavailable"},[e._v(" Complete the challenge to upgrade bulk ")]):e._e()},aLe=[],oLe=K(rLe,sLe,aLe,!1,null,"eea5c864");const lLe=oLe.exports,cLe={name:"DimensionAutobuyerBox",components:{DimensionBulkButton:lLe,AutobuyerBox:Kf,AutobuyerIntervalButton:Db},props:{tier:{type:Number,required:!0}},data(){return{mode:AUTOBUYER_MODE.BUY_SINGLE}},computed:{autobuyer(){return Autobuyer.antimatterDimension(this.tier)},name(){return`${AntimatterDimension(this.tier).shortDisplayName} Dimension Autobuyer`},modeDisplay(){switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:return"Buys singles";case AUTOBUYER_MODE.BUY_10:return"Buys max"}throw"Unknown Dimension Autobuyer mode"}},methods:{update(){this.mode=this.autobuyer.mode},toggleMode(){this.autobuyer.toggleMode(),this.update()}}};var uLe=function(){var e=this,i=e._self._c;return i("AutobuyerBox",{attrs:{autobuyer:e.autobuyer,name:e.name,"show-interval":""},scopedSlots:e._u([{key:"intervalSlot",fn:function(){return[i("DimensionBulkButton",{attrs:{autobuyer:e.autobuyer}}),i("AutobuyerIntervalButton",{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},{key:"toggleSlot",fn:function(){return[i("button",{staticClass:"o-autobuyer-btn",on:{click:e.toggleMode}},[e._v(" "+e._s(e.modeDisplay)+" ")])]},proxy:!0}])})},dLe=[],hLe=K(cLe,uLe,dLe,!1,null,"b1a874a6");const fLe=hLe.exports,pLe={name:"OpenModalHotkeysButton",methods:{handleClick(){Modal.hotkeys.show()}}};var mLe=function(){var e=this,i=e._self._c;return i("p",{staticClass:"c-options-tab__hotkeys-link",on:{click:e.handleClick}},[e._v(" Press "),i("kbd",[e._v("?")]),e._v(" to open the hotkey list. ")])},yLe=[],gLe=K(pLe,mLe,yLe,!1,null,null);const UT=gLe.exports,vLe={name:"AutobuyerToggleLabel",props:{isActive:Boolean,isDisabled:Boolean,name:{type:String,required:!0}},computed:{autobuyerToggleClass(){return this.isDisabled?this.isActive?"fas fa-pause":"fas fa-times":this.isActive?"fas fa-check":"fas fa-times"},autobuyerStateClass(){return this.isDisabled?{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label--active-paused":this.isActive,"o-autobuyer-toggle-checkbox__label--deactive-paused":!this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":this.isDisabled}:{"o-autobuyer-toggle-checkbox__label":!0,"o-autobuyer-toggle-checkbox__label--active":this.isActive,"o-autobuyer-toggle-checkbox__label--disabled":this.isDisabled}}}};var bLe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-autobuyer-box__footer",on:{click:e.emitClick}},[i("label",{class:e.autobuyerStateClass},[i("span",{class:e.autobuyerToggleClass})]),i("input",{attrs:{disabled:e.isDisabled,name:e.name,type:"checkbox"},domProps:{checked:e.isActive&&!e.isDisabled}})])},_Le=[],ELe=K(vLe,bLe,_Le,!1,null,"7a818cb5");const r4=ELe.exports,TLe={name:"AutobuyerGroupToggleLabel",components:{AutobuyerToggleLabel:r4},props:{isActive:Boolean,name:{type:String,required:!0}},data(){return{isDisabled:!1}},methods:{update(){this.isDisabled=!player.auto.autobuyersOn}}};var wLe=function(){var e=this,i=e._self._c;return i("AutobuyerToggleLabel",{attrs:{"is-active":e.isActive,"is-disabled":e.isDisabled,name:e.name},on:{click:e.emitClick}})},CLe=[],SLe=K(TLe,wLe,CLe,!1,null,"3fdc6b46");const kLe=SLe.exports,ALe={name:"AutobuyerModeButton",props:{autobuyer:{type:Object,required:!0}},data(){return{mode:AUTOBUYER_MODE.BUY_SINGLE}},computed:{modeDisplay(){switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:return"Buys singles";case AUTOBUYER_MODE.BUY_10:return"Buys max"}throw"Unknown Dimension Autobuyer mode"}},methods:{update(){this.mode=this.autobuyer.mode},toggleMode(){this.autobuyer.toggleMode(),this.update()}}};var RLe=function(){var e=this,i=e._self._c;return i("button",{staticClass:"o-autobuyer-btn o-autobuyer-btn--tiny",on:{click:e.toggleMode}},[e._v(" "+e._s(e.modeDisplay)+" ")])},ILe=[],DLe=K(ALe,RLe,ILe,!1,null,"f0b5aef2");const xLe=DLe.exports,MLe={name:"AutobuyerSingleToggleLabel",components:{AutobuyerToggleLabel:r4},props:{autobuyer:{type:Object,required:!0},parentDisabled:Boolean},data(){return{isActive:!1,isDisabled:!1}},computed:{name(){return this.autobuyer.name}},methods:{update(){this.isActive=this.autobuyer.isActive,this.isDisabled=!player.auto.autobuyersOn||this.parentDisabled},toggle(){this.autobuyer.toggle()}}};var PLe=function(){var e=this,i=e._self._c;return i("AutobuyerToggleLabel",{attrs:{"is-active":e.isActive,"is-disabled":e.isDisabled,name:e.name},on:{click:e.toggle}})},OLe=[],NLe=K(MLe,PLe,OLe,!1,null,"ac6f9f39");const s4=NLe.exports,GLe={name:"SingleAutobuyerInRow",components:{AutobuyerSingleToggleLabel:s4,AutobuyerIntervalLabel:AT,AutobuyerModeButton:xLe},props:{autobuyer:{type:Object,required:!0},showIndividual:Boolean,parentDisabled:Boolean},data(){return{isVisible:!1}},computed:{name(){return this.autobuyer.name},hasMode(){return this.autobuyer.mode!==void 0}},methods:{update(){const t=this.autobuyer;this.isVisible=t.isUnlocked||t.isBought}}};var ULe=function(){var e=this,i=e._self._c;return e.isVisible?i("span",{staticClass:"c-autobuyer-box-slot"},[i("AutobuyerSingleToggleLabel",{attrs:{autobuyer:e.autobuyer,"parent-disabled":e.parentDisabled}}),e._v(" "+e._s(e.name)+" "),e.showIndividual?i("AutobuyerIntervalLabel",{attrs:{autobuyer:e.autobuyer}}):e._e(),e.hasMode?i("AutobuyerModeButton",{attrs:{autobuyer:e.autobuyer}}):e._e()],1):e._e()},LLe=[],BLe=K(GLe,ULe,LLe,!1,null,"6ffc07a9");const FLe=BLe.exports,$Le={name:"MultipleAutobuyersBox",components:{AutobuyerIntervalLabel:AT,AutobuyerGroupToggleLabel:kLe,SingleAutobuyerInRow:FLe},props:{type:{type:Function,required:!0}},data(){return{continuumActive:!1,anyUnlocked:!1,displayLabelAsGroup:!1,parentActive:!1}},computed:{autobuyers(){return this.type.zeroIndexed},name(){return this.type.groupName},entryCount(){return this.type.entryCount},rowCount(){return Math.ceil(this.entryCount/8)},entryCountPerRow(){return this.rowCount===1?this.entryCount:5},boxSize(){return`flex: 1 0 ${100/this.entryCountPerRow-1}%`},isADBox(){return this.name===Autobuyer.antimatterDimension.groupName},showAutobuyers(){return this.isADBox?this.anyUnlocked&&this.displayLabelAsGroup:this.anyUnlocked}},methods:{update(){this.continuumActive=Laitela.continuumActive;const t=this.type;this.anyUnlocked=t.anyUnlocked,this.displayLabelAsGroup=(t.allMaxedInterval??!0)&&(t.allUnlimitedBulk??!0),this.parentActive=t.isActive},toggleGroup(){this.type.toggle()}}};var HLe=function(){var e=this,i=e._self._c;return e.showAutobuyers&&!(e.isADBox&&e.continuumActive)?i("span",{staticClass:"c-autobuyer-box-row"},[i("AutobuyerGroupToggleLabel",{attrs:{"is-active":e.parentActive,name:e.name},on:{click:e.toggleGroup}}),i("div",{staticClass:"l-autobuyer-box__title"},[e._v(" "+e._s(e.name)),i("br"),e._v("Autobuyers "),e.displayLabelAsGroup?i("AutobuyerIntervalLabel",{attrs:{autobuyer:e.autobuyers[0]}}):e._e()],1),i("div",{staticClass:"l-autobuyer-box__autobuyers"},[e._l(e.autobuyers,function(n,r){return[i("SingleAutobuyerInRow",{key:r,staticClass:"l-autobuyer-box__autobuyers-internal",style:e.boxSize,attrs:{autobuyer:n,"show-individual":!e.displayLabelAsGroup,"parent-disabled":!e.parentActive}}),r%e.entryCountPerRow===e.entryCountPerRow?i("br",{key:r}):e._e()]})],2)],1):e.isADBox&&e.continuumActive?i("span",{staticClass:"c-autobuyer-box-row"},[e._v(" Continuum replaces your Antimatter Dimension and Tickspeed Autobuyers, as your production multipliers "),i("br"),e._v(" now automatically and continuously scale based on how many purchases you would have had otherwise. ")]):e._e()},VLe=[],qLe=K($Le,HLe,VLe,!1,null,"12c668e6");const YLe=qLe.exports,WLe={name:"SingleAutobuyerBox",components:{AutobuyerSingleToggleLabel:s4,AutobuyerIntervalLabel:AT,AutobuyerInput:Ym},props:{autobuyer:{type:Object,required:!0}},data(){return{isUnlocked:!1,isHiddenSacrifice:!1}},computed:{name(){return this.autobuyer.name},isSacrifice(){return this.name==="Dimensional Sacrifice"}},methods:{update(){this.isUnlocked=this.autobuyer.isUnlocked,this.isHiddenSacrifice=this.isSacrifice&&Achievement(118).canBeApplied}}};var jLe=function(){var e=this,i=e._self._c;return e.isUnlocked?i("span",{staticClass:"c-autobuyer-box-row"},[i("AutobuyerSingleToggleLabel",{attrs:{autobuyer:e.autobuyer}}),i("div",[e._v(" "+e._s(e.name)+" "),i("AutobuyerIntervalLabel",{attrs:{autobuyer:e.autobuyer}}),e.isHiddenSacrifice?i("b",{staticClass:"c-autobuyer-box__small-text"},[e._v(" Automatic (Achievement 118) ")]):e.autobuyer.hasInput?i("span",{staticClass:"c-autobuyer-box__small-text"},[e._v(" Multiplier: "),i("AutobuyerInput",{staticClass:"c-small-autobuyer-input",attrs:{autobuyer:e.autobuyer,type:e.autobuyer.inputType,property:e.autobuyer.inputEntry}})],1):e._e()],1)],1):e._e()},zLe=[],XLe=K(WLe,jLe,zLe,!1,null,"ebe1bcf8");const KLe=XLe.exports,ZLe={name:"MultipleSingleAutobuyersGroup",components:{SingleAutobuyerBox:KLe},computed:{singles(){return Autobuyers.display[1]},entryCount(){return this.singles.length},rowCount(){return Math.ceil(this.entryCount/4)},entryCountPerRow(){return this.rowCount===1?this.entryCount:4},boxSize(){return`flex: 1 0 ${100/this.entryCountPerRow-2}%`}}};var QLe=function(){var e=this,i=e._self._c;return i("span",{staticClass:"l-autobuyer-singlet-group"},[e._l(e.singles,function(n,r){return[i("SingleAutobuyerBox",{key:r,style:e.boxSize,attrs:{autobuyer:n}}),r%e.entryCountPerRow===e.entryCountPerRow?i("br",{key:r}):e._e()]})],2)},JLe=[],eBe=K(ZLe,QLe,JLe,!1,null,"b88000b4");const tBe=eBe.exports,iBe={name:"SimpleAutobuyersMultiBox",components:{MultipleAutobuyersBox:YLe,MultipleSingleAutobuyersGroup:tBe},computed:{multiple(){return Autobuyers.display[0]}}};var nBe=function(){var e=this,i=e._self._c;return i("span",{staticClass:"l-autobuyers-tab"},[e._l(e.multiple,function(n,r){return i("MultipleAutobuyersBox",{key:r,attrs:{type:n}})}),i("MultipleSingleAutobuyersGroup")],2)},rBe=[],sBe=K(iBe,nBe,rBe,!1,null,"d7584220");const aBe=sBe.exports,oBe={name:"TickspeedAutobuyerBox",components:{AutobuyerBox:Kf,AutobuyerIntervalButton:Db},data(){return{mode:AUTOBUYER_MODE.BUY_SINGLE,isUnlocked:!1}},computed:{autobuyer:()=>Autobuyer.tickspeed,modeDisplay(){switch(this.mode){case AUTOBUYER_MODE.BUY_SINGLE:return"Buys singles";case AUTOBUYER_MODE.BUY_MAX:return"Buys max"}throw"Unknown tickspeed autobuyer mode"}},methods:{update(){this.mode=this.autobuyer.mode,this.isUnlocked=this.autobuyer.isUnlocked},toggleMode(){this.autobuyer.toggleMode(),this.update()}}};var lBe=function(){var e=this,i=e._self._c;return i("AutobuyerBox",{attrs:{autobuyer:e.autobuyer,name:"Tickspeed Autobuyer","show-interval":""},scopedSlots:e._u([{key:"intervalSlot",fn:function(){return[i("AutobuyerIntervalButton",{attrs:{autobuyer:e.autobuyer}})]},proxy:!0},{key:"toggleSlot",fn:function(){return[e.isUnlocked?i("button",{staticClass:"o-autobuyer-btn",on:{click:e.toggleMode}},[e._v(" "+e._s(e.modeDisplay)+" ")]):i("button",{staticClass:"o-autobuyer-btn o-autobuyer-btn--unavailable"},[e._v(" Complete the challenge to change mode ")])]},proxy:!0}])})},cBe=[],uBe=K(oBe,lBe,cBe,!1,null,"530102a5");const dBe=uBe.exports,hBe={name:"AutobuyersTab",components:{AutobuyerToggles:nLe,OpenModalHotkeysButton:UT,RealityAutobuyerBox:O3,EternityAutobuyerBox:M3,BigCrunchAutobuyerBox:D3,GalaxyAutobuyerBox:P3,DimensionBoostAutobuyerBox:x3,TickspeedAutobuyerBox:dBe,DimensionAutobuyerBox:fLe,SimpleAutobuyersMultiBox:aBe},data(){return{hasInfinity:!1,hasContinuum:!1,displayADAutobuyersIndividually:!1,hasInstant:!1}},computed:{hasSeenGamespeedAlteringEffects(){return PlayerProgress.seenAlteredSpeed()},gameTickLength(){return`${formatInt(player.options.updateRate)} ms`}},methods:{update(){this.hasInfinity=PlayerProgress.infinityUnlocked(),this.hasContinuum=Laitela.continuumActive,this.checkADAutoStatus()},checkADAutoStatus(){const t=Autobuyer.antimatterDimension;if(Pelle.isDoomed){this.displayADAutobuyersIndividually=!t.zeroIndexed.filter(e=>e.isUnlocked).every(e=>e.hasUnlimitedBulk&&e.hasMaxedInterval);return}this.hasInstant=t.hasInstant,this.displayADAutobuyersIndividually=!t.collapseDisplay}}};var fBe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-autobuyers-tab"},[i("AutobuyerToggles"),i("OpenModalHotkeysButton"),e.hasSeenGamespeedAlteringEffects?i("div",[e._v(" Autobuyer intervals and time-based settings are always "),i("b",[e._v("real time")]),e._v(" and therefore "),i("br"),e._v(" unaffected by anything which may alter how fast the game itself is running. "),i("br"),i("br")]):e._e(),e.hasInfinity?e._e():i("div",[e._v(" Challenges for upgrading autobuyers are unlocked by reaching Infinity. ")]),i("b",[e._v("Autobuyers with no displayed bulk have unlimited bulk by default.")]),i("b",[e._v(" Antimatter Dimension Autobuyers can have their bulk upgraded once interval is below "+e._s(e.formatInt(100))+" ms. ")]),e.hasInstant?i("b",[e._v('Autobuyers with "Instant" interval will trigger every game tick ('+e._s(e.gameTickLength)+").")]):e._e(),i("RealityAutobuyerBox",{staticClass:"c-reality-pos"}),i("EternityAutobuyerBox",{staticClass:"c-eternity-pos"}),i("BigCrunchAutobuyerBox",{staticClass:"c-infinity-pos"}),i("GalaxyAutobuyerBox"),i("DimensionBoostAutobuyerBox"),e.hasContinuum?e._e():i("TickspeedAutobuyerBox"),e.displayADAutobuyersIndividually?e._l(8,function(n){return i("DimensionAutobuyerBox",{key:n,attrs:{tier:n}})}):e._e(),i("SimpleAutobuyersMultiBox")],2)},pBe=[],mBe=K(hBe,fBe,pBe,!1,null,"008f3bf9");const yBe=mBe.exports;var a4={exports:{}};(function(t,e){(function(i,n){t.exports=n()})(Si,function(){return function(i){function n(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return i[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var r={};return n.m=i,n.c=r,n.i=function(s){return s},n.d=function(s,a,o){n.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:o})},n.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(a,"a",a),a},n.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},n.p="/dist/",n(n.s=7)}([function(i,n){i.exports=function(){var r=[];return r.toString=function(){for(var s=[],a=0;a<this.length;a++){var o=this[a];o[2]?s.push("@media "+o[2]+"{"+o[1]+"}"):s.push(o[1])}return s.join("")},r.i=function(s,a){typeof s=="string"&&(s=[[null,s,""]]);for(var o={},c=0;c<this.length;c++){var d=this[c][0];typeof d=="number"&&(o[d]=!0)}for(c=0;c<s.length;c++){var p=s[c];typeof p[0]=="number"&&o[p[0]]||(a&&!p[2]?p[2]=a:a&&(p[2]="("+p[2]+") and ("+a+")"),r.push(p))}},r}},function(i,n){i.exports=function(r,s,a,o){var c,d=r=r||{},p=typeof r.default;p!=="object"&&p!=="function"||(c=r,d=r.default);var m=typeof d=="function"?d.options:d;if(s&&(m.render=s.render,m.staticRenderFns=s.staticRenderFns),a&&(m._scopeId=a),o){var y=Object.create(m.computed||null);Object.keys(o).forEach(function(_){var E=o[_];y[_]=function(){return E}}),m.computed=y}return{esModule:c,exports:d,options:m}}},function(i,n,r){function s(I){for(var F=0;F<I.length;F++){var P=I[F],x=y[P.id];if(x){x.refs++;for(var M=0;M<x.parts.length;M++)x.parts[M](P.parts[M]);for(;M<P.parts.length;M++)x.parts.push(o(P.parts[M]));x.parts.length>P.parts.length&&(x.parts.length=P.parts.length)}else{for(var q=[],M=0;M<P.parts.length;M++)q.push(o(P.parts[M]));y[P.id]={id:P.id,refs:1,parts:q}}}}function a(){var I=document.createElement("style");return I.type="text/css",_.appendChild(I),I}function o(I){var F,P,x=document.querySelector('style[data-vue-ssr-id~="'+I.id+'"]');if(x){if(S)return k;x.parentNode.removeChild(x)}if(R){var M=C++;x=E||(E=a()),F=c.bind(null,x,M,!1),P=c.bind(null,x,M,!0)}else x=a(),F=d.bind(null,x),P=function(){x.parentNode.removeChild(x)};return F(I),function(q){if(q){if(q.css===I.css&&q.media===I.media&&q.sourceMap===I.sourceMap)return;F(I=q)}else P()}}function c(I,F,P,x){var M=P?"":x.css;if(I.styleSheet)I.styleSheet.cssText=O(F,M);else{var q=document.createTextNode(M),$=I.childNodes;$[F]&&I.removeChild($[F]),$.length?I.insertBefore(q,$[F]):I.appendChild(q)}}function d(I,F){var P=F.css,x=F.media,M=F.sourceMap;if(x&&I.setAttribute("media",x),M&&(P+=`
/*# sourceURL=`+M.sources[0]+" */",P+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(M))))+" */"),I.styleSheet)I.styleSheet.cssText=P;else{for(;I.firstChild;)I.removeChild(I.firstChild);I.appendChild(document.createTextNode(P))}}var p=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!p)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var m=r(19),y={},_=p&&(document.head||document.getElementsByTagName("head")[0]),E=null,C=0,S=!1,k=function(){},R=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());i.exports=function(I,F,P){S=P;var x=m(I,F);return s(x),function(M){for(var q=[],$=0;$<x.length;$++){var B=x[$],j=y[B.id];j.refs--,q.push(j)}M?(x=m(I,M),s(x)):x=[];for(var $=0;$<q.length;$++){var j=q[$];if(j.refs===0){for(var z=0;z<j.parts.length;z++)j.parts[z]();delete y[j.id]}}}};var O=function(){var I=[];return function(F,P){return I[F]=P,I.filter(Boolean).join(`
`)}}()},function(i,n,r){r(17);var s=r(1)(r(4),r(14),"data-v-566a42b8",null);i.exports=s.exports},function(i,n,r){function s(p){return p&&p.__esModule?p:{default:p}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(12),o=s(a),c=r(11),d=s(c);n.default={name:"splitPane",components:{Resizer:o.default,Pane:d.default},props:{minPercent:{type:Number,default:10},defaultPercent:{type:Number,default:50},split:{validator:function(p){return["vertical","horizontal"].indexOf(p)>=0},required:!0},className:String},computed:{userSelect:function(){return this.active?"none":""},cursor:function(){return this.active?this.split==="vertical"?"col-resize":"row-resize":""}},watch:{defaultPercent:function(p,m){this.percent=p}},data:function(){return{active:!1,hasMoved:!1,height:null,percent:this.defaultPercent,type:this.split==="vertical"?"width":"height",resizeType:this.split==="vertical"?"left":"top"}},methods:{onClick:function(){this.hasMoved||(this.percent=50,this.$emit("resize",this.percent))},onMouseDown:function(){this.active=!0,this.hasMoved=!1},onMouseUp:function(){this.active=!1},onMouseMove:function(p){if(p.buttons!==0&&p.which!==0||(this.active=!1),this.active){var m=0,y=p.currentTarget;if(this.split==="vertical")for(;y;)m+=y.offsetLeft,y=y.offsetParent;else for(;y;)m+=y.offsetTop,y=y.offsetParent;var _=this.split==="vertical"?p.pageX:p.pageY,E=this.split==="vertical"?p.currentTarget.offsetWidth:p.currentTarget.offsetHeight,C=Math.floor((_-m)/E*1e4)/100;C>this.minPercent&&C<100-this.minPercent&&(this.percent=C),this.$emit("resize",this.percent),this.hasMoved=!0}}}}},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"Pane",props:{className:String},data:function(){return{classes:[this.$parent.split,this.className].join(" "),percent:50}}}},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default={props:{split:{validator:function(s){return["vertical","horizontal"].indexOf(s)>=0},required:!0},className:String},computed:{classes:function(){return["splitter-pane-resizer",this.split,this.className].join(" ")}}}},function(i,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(3),a=function(o){return o&&o.__esModule?o:{default:o}}(s);n.default=a.default,typeof window<"u"&&window.Vue&&window.Vue.component("split-pane",a.default)},function(i,n,r){n=i.exports=r(0)(),n.push([i.i,".splitter-pane-resizer[data-v-212fa2a4]{box-sizing:border-box;background:#000;position:absolute;opacity:.2;z-index:1;background-clip:padding-box}.splitter-pane-resizer.horizontal[data-v-212fa2a4]{height:11px;margin:-5px 0;border-top:5px solid hsla(0,0%,100%,0);border-bottom:5px solid hsla(0,0%,100%,0);cursor:row-resize;width:100%}.splitter-pane-resizer.vertical[data-v-212fa2a4]{width:11px;height:100%;margin-left:-5px;border-left:5px solid hsla(0,0%,100%,0);border-right:5px solid hsla(0,0%,100%,0);cursor:col-resize}",""])},function(i,n,r){n=i.exports=r(0)(),n.push([i.i,'.clearfix[data-v-566a42b8]:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.vue-splitter-container[data-v-566a42b8]{height:100%;position:relative}.vue-splitter-container-mask[data-v-566a42b8]{z-index:9999;width:100%;height:100%;position:absolute;top:0;left:0}',""])},function(i,n,r){n=i.exports=r(0)(),n.push([i.i,".splitter-pane.vertical.splitter-paneL[data-v-815c801c]{position:absolute;left:0;height:100%;padding-right:3px}.splitter-pane.vertical.splitter-paneR[data-v-815c801c]{position:absolute;right:0;height:100%;padding-left:3px}.splitter-pane.horizontal.splitter-paneL[data-v-815c801c]{position:absolute;top:0;width:100%}.splitter-pane.horizontal.splitter-paneR[data-v-815c801c]{position:absolute;bottom:0;width:100%;padding-top:3px}",""])},function(i,n,r){r(18);var s=r(1)(r(5),r(15),"data-v-815c801c",null);i.exports=s.exports},function(i,n,r){r(16);var s=r(1)(r(6),r(13),"data-v-212fa2a4",null);i.exports=s.exports},function(i,n){i.exports={render:function(){var r=this,s=r.$createElement;return(r._self._c||s)("div",{class:r.classes})},staticRenderFns:[]}},function(i,n){i.exports={render:function(){var r,s,a,o=this,c=o.$createElement,d=o._self._c||c;return d("div",{staticClass:"vue-splitter-container clearfix",style:{cursor:o.cursor,userSelect:o.userSelect},on:{mouseup:o.onMouseUp,mousemove:o.onMouseMove}},[d("pane",{staticClass:"splitter-pane splitter-paneL",style:(r={},r[o.type]=o.percent+"%",r),attrs:{split:o.split}},[o._t("paneL")],2),o._v(" "),d("resizer",{style:(s={},s[o.resizeType]=o.percent+"%",s),attrs:{className:o.className,split:o.split},nativeOn:{mousedown:function(p){return o.onMouseDown(p)},click:function(p){return o.onClick(p)}}}),o._v(" "),d("pane",{staticClass:"splitter-pane splitter-paneR",style:(a={},a[o.type]=100-o.percent+"%",a),attrs:{split:o.split}},[o._t("paneR")],2),o._v(" "),o.active?d("div",{staticClass:"vue-splitter-container-mask"}):o._e()],1)},staticRenderFns:[]}},function(i,n){i.exports={render:function(){var r=this,s=r.$createElement;return(r._self._c||s)("div",{class:r.classes},[r._t("default")],2)},staticRenderFns:[]}},function(i,n,r){var s=r(8);typeof s=="string"&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals),r(2)("a82a4610",s,!0)},function(i,n,r){var s=r(9);typeof s=="string"&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals),r(2)("033d59ad",s,!0)},function(i,n,r){var s=r(10);typeof s=="string"&&(s=[[i.i,s,""]]),s.locals&&(i.exports=s.locals),r(2)("6816c93c",s,!0)},function(i,n){i.exports=function(r,s){for(var a=[],o={},c=0;c<s.length;c++){var d=s[c],p=d[0],m=d[1],y=d[2],_=d[3],E={id:r+":"+c,css:m,media:y,sourceMap:_};o[p]?o[p].parts.push(E):a.push(o[p]={id:p,parts:[E]})}return a}}])})})(a4);var gBe=a4.exports;const vBe=ru(gBe),bBe={name:"AutomatorModeSwitch",data(){return{automatorType:0}},computed:{currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(t){this.$viewModel.tabs.reality.automator.editorScriptID=t}},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,"automato").getValue()},isTextAutomator(){return this.automatorType===AUTOMATOR_TYPE.TEXT},automatorModeTooltip(){return this.automatorType===AUTOMATOR_TYPE.BLOCK?"Switch to the text editor":"Switch to the block editor"},tutorialClass(){return{"tutorial--glow":ui.view.tutorialState===TUTORIAL_STATE.AUTOMATOR&&ui.view.tutorialActive}}},created(){this.on$(GAME_EVENT.GAME_LOAD,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>this.onGameLoad()),this.updateCurrentScriptID()},methods:{update(){this.automatorType=player.reality.automator.type},onGameLoad(){this.updateCurrentScriptID()},updateCurrentScriptID(){const t=player.reality.automator.scripts;this.currentScriptID=player.reality.automator.state.editorScript,t[this.currentScriptID]===void 0&&(this.currentScriptID=Object.keys(t)[0],player.reality.automator.state.editorScript=this.currentScriptID,AutomatorData.clearUndoData()),BlockAutomator.hasUnparsableCommands(this.currentScript)&&player.reality.automator.type===AUTOMATOR_TYPE.BLOCK&&(Modal.message.show("Some script commands were unrecognizable - defaulting to text editor."),AutomatorBackend.changeModes(this.currentScriptID)),this.$nextTick(()=>BlockAutomator.updateEditor(this.currentScript))},toggleAutomatorMode(){const t=player.reality.automator.scripts[this.currentScriptID].content,e=this.automatorType===AUTOMATOR_TYPE.TEXT&&(BlockAutomator.hasUnparsableCommands(t)||AutomatorData.currentErrors().length!==0);if(player.options.confirmations.switchAutomatorMode&&(e||AutomatorBackend.isRunning)){const i=cv(t),n=this.automatorType===AUTOMATOR_TYPE.TEXT?i.validatedBlocks-i.visitedBlocks:0;Modal.switchAutomatorEditorMode.show({callBack:()=>this.$recompute("currentScriptContent"),lostBlocks:n})}else AutomatorBackend.changeModes(this.currentScriptID);AutomatorData.clearUndoData()}}};var _Be=function(){var e=this,i=e._self._c;return i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.automatorModeTooltip,hideOnTargetClick:!1},expression:`{
    content: automatorModeTooltip,
    hideOnTargetClick: false
  }`}],class:{"c-slider-toggle-button":!0,"c-slider-toggle-button--right":e.isTextAutomator,...e.tutorialClass},on:{click:e.toggleAutomatorMode}},[i("i",{staticClass:"fas fa-cubes"}),i("i",{staticClass:"fas fa-code"})])},EBe=[],TBe=K(bBe,_Be,EBe,!1,null,"abf4f0d7");const wBe=TBe.exports,CBe={name:"AutomatorControls",components:{AutomatorButton:tB,AutomatorModeSwitch:wBe},data(){return{isRunning:!1,isPaused:!1,repeatOn:!1,justCompleted:!1,forceRestartOn:!1,followExecution:!1,hasErrors:!1,currentLine:0,statusName:"",editingName:"",editingDifferentScript:!1,currentChars:0,hasUndo:!1,hasRedo:!1}},computed:{fullScreen(){return this.$viewModel.tabs.reality.automator.fullScreen},currentScriptID(){return this.$viewModel.tabs.reality.automator.editorScriptID},playTooltip(){return this.isPaused?"Resume Automator execution":this.isRunning?"Pause Automator execution":"Start Automator"},playButtonClass(){return{"c-automator__button--active":this.isRunning,"fa-play":!this.isRunning&&!this.isPaused,"fa-pause":this.isRunning,"fa-eject":this.isPaused}},statusText(){const t=Math.clampMin(Math.ceil(Math.log10(AutomatorBackend.currentScriptLength+1)),1);let e=`0000${this.currentLine}`;return e=e.slice(e.length-t),this.isPaused?`Paused: "${this.statusName}" (Resumes on Line ${e})`:this.isRunning?`Running: "${this.statusName}" (Line ${e})`:this.hasErrors?`Stopped: "${this.statusName}" has errors (Cannot run)`:`Stopped: Will start running "${this.statusName}"`},maxScriptChars(){return AutomatorData.MAX_ALLOWED_SCRIPT_CHARACTERS}},methods:{update(){this.isRunning=AutomatorBackend.isRunning,this.isPaused=AutomatorBackend.isOn&&!this.isRunning,this.repeatOn=AutomatorBackend.state.repeat,this.justCompleted=AutomatorBackend.hasJustCompleted,this.forceRestartOn=AutomatorBackend.state.forceRestart,this.followExecution=AutomatorBackend.state.followExecution,this.hasErrors=AutomatorData.currentErrors().length!==0,this.currentLine=AutomatorBackend.currentLineNumber,this.statusName=this.isPaused||this.isRunning?AutomatorBackend.scriptName:AutomatorBackend.currentEditingScript.name,this.duplicateStatus=AutomatorBackend.hasDuplicateName(this.statusName),this.editingDifferentScript=(this.isRunning||this.isPaused)&&AutomatorBackend.currentEditingScript.id!==AutomatorBackend.currentRunningScript.id,this.currentChars=AutomatorData.singleScriptCharacters(),this.hasUndo=AutomatorData.undoBuffer.length>0,this.hasRedo=AutomatorData.redoBuffer.length>0},rewind:()=>AutomatorBackend.restart(),play(){if(this.hasErrors){AutomatorBackend.mode=AUTOMATOR_MODE.PAUSED;return}if(this.isRunning){AutomatorBackend.pause();return}player.reality.automator.type===AUTOMATOR_TYPE.BLOCK&&this.$emit("automatorplay"),AutomatorBackend.isOn?AutomatorBackend.mode=AUTOMATOR_MODE.RUN:AutomatorBackend.start(this.currentScriptID)},stop:()=>AutomatorBackend.stop(),step(){AutomatorBackend.isOn?AutomatorBackend.mode=AUTOMATOR_MODE.SINGLE_STEP:AutomatorBackend.start(this.currentScriptID,AUTOMATOR_MODE.SINGLE_STEP)},repeat:()=>AutomatorBackend.toggleRepeat(),restart:()=>AutomatorBackend.toggleForceRestart(),follow:()=>AutomatorBackend.toggleFollowExecution(),undo:()=>AutomatorData.undoScriptEdit(),redo:()=>AutomatorData.redoScriptEdit()}};var SBe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator__controls l-automator__controls"},[i("div",{staticClass:"c-automator-control-row l-automator-button-row"},[i("div",{staticClass:"c-button-group"},[i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Rewind Automator to the first command",expression:"'Rewind Automator to the first command'"}],staticClass:"fa-fast-backward",on:{click:e.rewind}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.playTooltip,hideOnTargetClick:!1},expression:`{
          content: playTooltip,
          hideOnTargetClick: false
        }`}],class:e.playButtonClass,on:{click:e.play}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Stop Automator and reset position",expression:"'Stop Automator and reset position'"}],staticClass:"fa-stop",on:{click:e.stop}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Step forward one line",expression:"'Step forward one line'"}],staticClass:"fa-step-forward",on:{click:e.step}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Restart script automatically when it reaches the end",expression:"'Restart script automatically when it reaches the end'"}],staticClass:"fa-sync-alt",class:{"c-automator__button--active":e.repeatOn},on:{click:e.repeat}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Automatically restart the active script when finishing or restarting a Reality",expression:"'Automatically restart the active script when finishing or restarting a Reality'"}],staticClass:"fa-reply",class:{"c-automator__button--active":e.forceRestartOn},on:{click:e.restart}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Scroll Automator to follow current line",expression:"'Scroll Automator to follow current line'"}],staticClass:"fa-indent",class:{"c-automator__button--active":e.followExecution},on:{click:e.follow}}),e.fullScreen?i("span",{staticClass:"c-automator__status-text c-automator__status-text--small",class:{"c-automator__status-text--error":e.currentChars>e.maxScriptChars}},[e._v(" This script: "+e._s(e.formatInt(e.currentChars))+"/"+e._s(e.formatInt(e.maxScriptChars))+" ")]):e._e()],1),i("div",{staticClass:"c-button-group"},[i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Undo",expression:"'Undo'"}],staticClass:"fa-arrow-rotate-left",class:{"c-automator__button--inactive":!e.hasUndo},on:{click:e.undo}}),i("AutomatorButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Redo",expression:"'Redo'"}],staticClass:"fa-arrow-rotate-right",class:{"c-automator__button--inactive":!e.hasRedo},on:{click:e.redo}}),i("AutomatorModeSwitch")],1)]),i("div",{staticClass:"l-automator-button-row"},[e.duplicateStatus?i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"More than one script has this name!",expression:"'More than one script has this name!'"}],staticClass:"fas fa-exclamation-triangle c-automator__status-text c-automator__status-text--error"}):e._e(),e.editingDifferentScript?i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"The automator is running a different script than the editor is showing",expression:"'The automator is running a different script than the editor is showing'"}],staticClass:"fas fa-circle-exclamation c-automator__status-text c-automator__status-text--warning"}):e._e(),e.justCompleted?i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"The automator completed running the previous script",expression:"'The automator completed running the previous script'"}],staticClass:"fas fa-circle-check c-automator__status-text"}):e._e(),i("span",{staticClass:"c-automator__status-text",class:{"c-automator__status-text--error":e.hasErrors&&!(e.isRunning||e.isPaused)}},[e._v(" "+e._s(e.statusText)+" ")])])])},kBe=[],ABe=K(CBe,SBe,kBe,!1,null,"68205adb");const RBe=ABe.exports,IBe={name:"AutomatorEditor",components:{AutomatorBlockEditor:JU,AutomatorTextEditor:tL,AutomatorControls:RBe},data(){return{automatorType:0}},computed:{currentScriptID:{get(){return this.$viewModel.tabs.reality.automator.editorScriptID},set(t){this.$viewModel.tabs.reality.automator.editorScriptID=t}},currentScriptContent(){return player.reality.automator.scripts[this.currentScriptID].content},currentScript(){return CodeMirror.Doc(this.currentScriptContent,"automato").getValue()},isTextAutomator(){return this.automatorType===AUTOMATOR_TYPE.TEXT}},created(){this.on$(GAME_EVENT.GAME_LOAD,()=>this.onGameLoad()),this.on$(GAME_EVENT.AUTOMATOR_SAVE_CHANGED,()=>this.onGameLoad()),this.updateCurrentScriptID()},methods:{update(){this.automatorType=player.reality.automator.type,!AutomatorBackend.isOn&&AutomatorTextUI.editor&&AutomatorData.needsRecompile&&AutomatorTextUI.editor.performLint()},onGameLoad(){this.updateCurrentScriptID()},updateCurrentScriptID(){const t=player.reality.automator.scripts;if(this.currentScriptID=player.reality.automator.state.editorScript,t[this.currentScriptID]===void 0&&(this.currentScriptID=Number(Object.keys(t)[0]),player.reality.automator.state.editorScript=this.currentScriptID,AutomatorData.clearUndoData()),BlockAutomator.hasUnparsableCommands(this.currentScript)&&player.reality.automator.type===AUTOMATOR_TYPE.BLOCK){Modal.message.show("Some incomplete blocks were unrecognizable - defaulting to text editor.");const e=AutomatorData.currentScriptText();AutomatorBackend.changeModes(this.currentScriptID),player.reality.automator.scripts[this.currentScriptID].content=e,this.automatorType=AUTOMATOR_TYPE.TEXT}this.$nextTick(()=>BlockAutomator.updateEditor(this.currentScript))}}};var DBe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-automator-pane"},[i("AutomatorControls"),e.isTextAutomator?i("AutomatorTextEditor",{attrs:{"current-script-id":e.currentScriptID}}):e._e(),e.isTextAutomator?e._e():i("AutomatorBlockEditor")],1)},xBe=[],MBe=K(IBe,DBe,xBe,!1,null,"546c8981");const PBe=MBe.exports,OBe={name:"AutomatorPointsList",data(){return{totalPoints:0}},computed:{pointsForAutomator:()=>AutomatorPoints.pointsForAutomator,fromPerks:()=>AutomatorPoints.pointsFromPerks,fromUpgrades:()=>AutomatorPoints.pointsFromUpgrades,perkSources:()=>AutomatorPoints.perks,upgradeSources:()=>AutomatorPoints.upgrades,otherSources:()=>GameDatabase.reality.automator.otherAutomatorPoints,automatorInterval:()=>AutomatorBackend.currentInterval},methods:{update(){this.totalPoints=AutomatorPoints.totalPoints},textColor(t){return{color:t?"var(--color-good)":"var(--color-bad)"}}}};var NBe=function(){var e=this,i=e._self._c;return i("div",[i("div",{staticClass:"l-header"},[e._v(" You have "+e._s(e.formatInt(e.totalPoints))+" / "+e._s(e.formatInt(e.pointsForAutomator))+" Automator Points towards unlocking the Automator. "),i("br"),e._v(" You gain Automator Points from the following sources: ")]),i("div",{staticClass:"l-automator-points-list-container"},[i("div",{staticClass:"l-automator-points-list-side-col c-automator-points-list-col"},[i("span",{staticClass:"c-automator-points-list-symbol fas fa-project-diagram"}),i("span",{staticClass:"c-automator-points-list-ap--large"},[e._v(e._s(e.formatInt(e.fromPerks))+" AP")]),i("span",{staticClass:"l-large-text"},[e._v(" Perks ")]),e._l(e.perkSources,function(n){return i("div",{key:n.id,staticClass:"c-automator-points-list-single-entry",style:e.textColor(n.isBought)},[i("span",{staticClass:"c-automator-points-list-perk-label"},[e._v(e._s(n.label))]),e._v(" - "+e._s(n.shortDescription)+" "),i("span",{staticClass:"c-automator-points-list-ap"},[e._v(e._s(e.formatInt(n.automatorPoints))+" AP")])])})],2),i("div",{staticClass:"l-automator-points-list-center-col"},e._l(e.otherSources,function(n){return i("div",{key:n.name,staticClass:"c-automator-points-list-cell"},[i("span",{staticClass:"c-automator-points-list-ap--large"},[e._v(e._s(e.formatInt(n.automatorPoints()))+" AP")]),i("span",{staticClass:"l-large-text"},[e._v(" "+e._s(n.name)+" ")]),i("br"),i("br"),i("span",{style:e.textColor(n.automatorPoints()>0)},[e._v(" "+e._s(n.shortDescription())+" ")]),i("span",{staticClass:"c-automator-points-list-symbol",domProps:{innerHTML:e._s(n.symbol)}})])}),0),i("div",{staticClass:"l-automator-points-list-side-col c-automator-points-list-col"},[i("span",{staticClass:"c-automator-points-list-symbol fas fa-arrow-up"}),i("span",{staticClass:"c-automator-points-list-ap--large"},[e._v(e._s(e.formatInt(e.fromUpgrades))+" AP")]),i("span",{staticClass:"l-large-text"},[e._v(" Reality Upgrades ")]),e._l(e.upgradeSources,function(n){return i("div",{key:n.id,staticClass:"c-automator-points-list-single-entry l-upgrade-list",style:e.textColor(n.isBought)},[i("b",[e._v(e._s(n.name))]),i("span",{staticClass:"c-automator-points-list-ap"},[e._v(e._s(e.formatInt(n.automatorPoints))+" AP")]),i("br"),e._v(" "+e._s(n.shortDescription)+" ")])})],2)]),i("br"),i("div",[e._v(" The Automator allows (amongst other things) buying full Time Study Trees, entering Eternity Challenges, or starting Dilation. "),i("br"),e._v(" It can also force prestige events on certain conditions independently from your Autobuyers or modify some of your Autobuyer settings. "),i("br"),e._v(" The speed of the Automator gradually increases as you get more Realities. If unlocked right now, it would run "+e._s(e.format(1e3/e.automatorInterval,2,2))+" commands per real-time second. ")])])},GBe=[],UBe=K(OBe,NBe,GBe,!1,null,"2dee20fd");const LBe=UBe.exports,BBe={name:"AutomatorTab",components:{SplitPane:vBe,AutomatorEditor:PBe,AutomatorPointsList:LBe,AutomatorDocs:pee},data(){return{automatorUnlocked:!1,interval:0,currentChars:0,totalChars:0,withinLimit:!1}},computed:{fullScreen(){return this.$viewModel.tabs.reality.automator.fullScreen},tabClass(){if(this.fullScreen)return"c-automator-tab--full-screen"},fullScreenIconClass(){return this.fullScreen?"fa-compress-arrows-alt":"fa-expand-arrows-alt"},intervalText(){const t=`Each Reality makes it run ${formatPercents(.006,1)} faster, up to a maximum of
        ${formatInt(1e3)} per second.`;return this.interval===1?`The Automator is running at max speed (${formatInt(1e3)} commands per real-time second).`:`The Automator is running ${quantify("command",1e3/this.interval,2,2)} per real-time second.
          ${t}`},maxScriptChars(){return AutomatorData.MAX_ALLOWED_SCRIPT_CHARACTERS},maxTotalChars(){return AutomatorData.MAX_ALLOWED_TOTAL_CHARACTERS}},methods:{update(){this.automatorUnlocked=Player.automatorUnlocked,this.interval=AutomatorBackend.currentInterval,this.currentChars=AutomatorData.singleScriptCharacters(),this.totalChars=AutomatorData.totalScriptCharacters(),this.withinLimit=AutomatorData.isWithinLimit()}}};var FBe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-automator-tab l-automator-tab",class:e.tabClass},[e.automatorUnlocked?i("div",[i("div",[e._v(" "+e._s(e.intervalText)+" ")]),i("span",{class:{"c-overlimit":e.currentChars>e.maxScriptChars}},[e._v(" This script: "+e._s(e.formatInt(e.currentChars))+" / "+e._s(e.formatInt(e.maxScriptChars))+" ")]),e._v(" | "),i("span",{class:{"c-overlimit":e.totalChars>e.maxTotalChars}},[e._v(" Across all scripts: "+e._s(e.formatInt(e.totalChars))+" / "+e._s(e.formatInt(e.maxTotalChars))+" ")]),i("br"),e.withinLimit?e._e():i("span",{staticClass:"c-overlimit"},[e._v(" (Your changes will not be saved due to being over a character limit!) ")]),i("div",{staticClass:"c-automator-split-pane"},[i("SplitPane",{attrs:{"min-percent":44,"default-percent":50,split:"vertical"},scopedSlots:e._u([{key:"paneL",fn:function(){return[i("AutomatorEditor")]},proxy:!0},{key:"paneR",fn:function(){return[i("AutomatorDocs")]},proxy:!0}],null,!1,3115218829)})],1)]):i("AutomatorPointsList")],1)},$Be=[],HBe=K(BBe,FBe,$Be,!1,null,"cf30a386");const VBe=HBe.exports,qBe=function(){let s;function a(y,_){let E=_;const C=20;for(let S=0;S<C;S++)E=_+y*Math.sin(E);return E}class o{draw(_){_.beginPath(),_.lineWidth=2*this.size,this.performDraw(_),_.stroke()}performDraw(_){}static calculatePosition(_,E){return{x:_*Math.sin(2*Math.PI*E),y:_*Math.cos(2*Math.PI*E)}}}class c extends o{constructor(){super(),this.angle=0,this.distance=0,this.size=1.5}update(_,E,C){const S=a(E,2*Math.PI*_/C),k=100*(1-E*Math.cos(S));let R=2*Math.atan(Math.sqrt((1+E)/(1-E)*Math.pow(Math.tan(S/2),2)));Math.tan(S/2)<0&&(R*=-1),this.distance=k,this.angle=R/(2*Math.PI)}performDraw(_){const{x:E,y:C}=o.calculatePosition(this.distance,this.angle);_.arc(E+200,C+200,1.5,0,2*Math.PI),_.strokeStyle="rgb(0, 0, 255)"}}class d extends o{constructor(_){super(),this.size=_}performDraw(_){const E=_.createRadialGradient(200,200,0,200,200,this.size*2);BlackHoles.areNegative?(E.addColorStop(0,"rgba(255, 255, 255, 1)"),E.addColorStop(.85,"rgba(190, 190, 190, 1)"),E.addColorStop(.87,"rgba(170, 170, 170, 1)"),E.addColorStop(1,"rgba(135, 135, 135, 0)")):(E.addColorStop(0,"rgba(0, 0, 0, 1)"),E.addColorStop(.9,"rgba(0, 0, 0, 1)"),E.addColorStop(.92,"rgba(100, 100, 100, 1)"),E.addColorStop(1,"rgba(100, 100, 100, 0)")),_.fillStyle=E,_.fillRect(0,0,400,400),_.strokeStyle="black"}}const p="";class m extends o{constructor(){super(),this.size=.5,this.respawn()}respawn(){this.distance=m.randomDistance(),this.lastDistance=this.distance,this.preLastDistance=this.distance,this.angle=Math.random(),this.lastAngle=this.angle,this.preLastAngle=this.angle,this.respawnTick=!0,this.isInside=BlackHoles.areNegative,this.blob=p[Math.floor(Math.random()*p.length)],this.isBlob=Theme.currentName()==="S11"||player.options.animations.blobHole}static randomDistance(){return BlackHoles.areNegative?(1.97*Math.random()+.03)*s:s+.5*100*Math.random()*(BlackHole(1).isActive?2:1)}update(_,E){const k=1.5*Math.min(Math.pow(Math.max(E,2)/2,3),5)*Math.min(_,16)/1e3;this.isInside||(this.preLastAngle=this.lastAngle,this.lastAngle=this.angle,this.angle=(this.angle+20*k*Math.PI*Math.pow(this.distance,-1.5))%1),this.preLastDistance=this.lastDistance,this.lastDistance=this.distance;const R=1+.3*k*Math.pow(this.distance/s,-2);if(BlackHoles.areNegative?this.distance*=R:this.distance/=R,this.distance>2.74645*s&&BlackHoles.areNegative)this.respawn();else if(this.distance<.01*s&&!BlackHoles.areNegative){this.respawn();return}this.isInside=this.distance<=s*.865,this.respawnTick=!1}performDraw(_){if(this.drawTrail(_),!BlackHole(1).isActive){_.strokeStyle="rgb(127, 127, 127)";return}const{distance:E}=this;if(E>s){const C=Math.floor(127*(E-s)/100);_.strokeStyle=`rgb(${135-C}, ${C}, ${C})`}if(E<=s){const C=Math.floor(255*Math.sqrt(E/s));_.strokeStyle=`rgb(${C}, 0, 0)`}}drawTrail(_){if(this.isInside&&!BlackHole(2).isActive)return;const{x:E,y:C}=o.calculatePosition(this.distance,this.angle);if(this.respawnTick||!BlackHole(1).isActive){_.arc(E+200,C+200,this.size,0,2*Math.PI),this.isBlob&&this.drawAndRotateBlob(_,E,C);return}const S=this.isInside?this.angle:this.preLastAngle,{x:k,y:R}=o.calculatePosition(this.preLastDistance,S);_.lineCap="round",this.isBlob?this.drawAndRotateBlob(_,E,C):(_.lineWidth*=1,_.moveTo(E+200,C+200),_.lineTo(k+200,R+200))}drawAndRotateBlob(_,E,C){if(_.textAlign="center",_.fillStyle="orange",this.distance<=s){const k=this.distance/s,R=18*Math.sqrt(k),O=165*k**2;_.fillStyle=`rgba(255, ${O}, 0, ${k*2})`,_.font=`${R}px Typewriter`}else _.font="18px Typewriter";_.save(),_.translate(E+200,C+200),_.rotate(-this.angle*Math.PI*2+Math.PI),_.fillText(this.blob,0,0),_.restore()}}return class{constructor(_){this.context=_,this.planet=new c,this.period=BlackHole(1).cycleLength;const E=(1-Math.pow(2,-2))/(1-Math.pow(BlackHole(1).power,-2));let C=.5;const S=1e3,k=2*Math.PI*Math.min(.9,BlackHole(1).duration/this.period);for(let R=0;R<S;R++){const O=a(C,k);C=(E-1)/(E*Math.cos(O)-1)}this.eccentricity=C,s=100*(1-C)*(1-Math.pow(BlackHole(1).power,-2)),this.hole=new d((s-1.5)/2),this.particles=Array.range(0,120).map(()=>new m),this.frameRequest=requestAnimationFrame(R=>this.update(R))}update(_){if(this.frameRequest=requestAnimationFrame(S=>this.update(S)),_===void 0||this.lastFrame===void 0){this.lastFrame=_;return}const E=_-this.lastFrame;this.lastFrame=_,this.planet.update(this.totalPhase(),this.eccentricity,this.period),this.context.clearRect(0,0,400,400),this.hole.draw(this.context);for(const S of this.particles)S.draw(this.context);if(BlackHoles.arePaused&&!BlackHoles.areNegative)return;const C=1/Math.sqrt(1-s/this.planet.distance);for(const S of this.particles)S.update(E,C)}totalPhase(){const _=BlackHole(1);return _.isActive?(_.phase-_.duration/2+this.period)%this.period:_.phase+_.duration/2}unmount(){cancelAnimationFrame(this.frameRequest)}}}(),YBe={name:"BlackHoleChargingSliders",components:{SliderComponent:fu},data(){return{isNegativeBHUnlocked:!1,isInverted:!1,isLaitela:!1,negativeSlider:0,negativeBHDivisor:1,maxNegativeBlackHole:300,isDisabled:!1}},computed:{infoTooltip(){return this.isLaitela?"The physics of this Reality do not allow Black Hole Inversion":"Black Hole must be paused to activate Inversion"},reqLockText(){return`Inversion strength cannot be modified due to Lock for
        "${ImaginaryUpgrade(24).name}"`}},methods:{update(){this.isNegativeBHUnlocked=V.isFlipped&&BlackHoles.arePermanent,this.isInverted=BlackHoles.areNegative,this.isLaitela=Ad.isRunning,this.negativeSlider=-Math.log10(player.blackHoleNegative),this.negativeBHDivisor=Math.pow(10,this.negativeSlider);const t=player.requirementChecks.reality.slowestBH<=1e-300;this.isDisabled=ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&t},adjustSliderNegative(t){this.negativeSlider=t,player.blackHoleNegative=Math.pow(10,-this.negativeSlider),player.requirementChecks.reality.slowestBH=Math.max(player.requirementChecks.reality.slowestBH,player.blackHoleNegative)},sliderProps(t){return{min:0,max:t?this.maxNegativeBlackHole:990,interval:1,width:"55rem",tooltip:!1}}}};var WBe=function(){var e=this,i=e._self._c;return i("div",[e.isNegativeBHUnlocked?i("div",{staticClass:"l-black-hole-sliders"},[i("b",[e._v(" Inverted Black Hole divides game speed by "+e._s(e.format(e.negativeBHDivisor,2,2))+". (Currently "+e._s(e.isInverted?"active":"inactive")),e.negativeSlider!==0&&!e.isInverted?i("span",{attrs:{"ach-tooltip":e.infoTooltip}},[i("i",{staticClass:"fas fa-question-circle l-margin-left"})]):e._e(),e._v(") ")]),e.isDisabled?i("div",{staticClass:"l-lock-text"},[e._v(" "+e._s(e.reqLockText)+" ")]):i("SliderComponent",e._b({attrs:{value:e.negativeSlider},on:{input:function(n){return e.adjustSliderNegative(n)}}},"SliderComponent",e.sliderProps(!0),!1)),i("br"),e._v(" Inverting the Black Hole only affects its own speedup, no other upgrades or effects, although it will also indirectly affect the Effarig Game speed power effect. ")],1):e._e()])},jBe=[],zBe=K(YBe,WBe,jBe,!1,null,"8c9fb479");const o4=zBe.exports,XBe={name:"BlackHoleStateRow",props:{blackHole:{type:Object,required:!0}},data(){return{isUnlocked:!1,isPermanent:!1,isActive:!1,isCharged:!1,nextChange:"",state:""}},computed:{description(){return this.blackHole.description(!0)},id(){return this.blackHole.id}},methods:{update(){const{blackHole:t}=this;this.isUnlocked=t.isUnlocked,this.isUnlocked&&(this.isPermanent=t.isPermanent,this.isActive=t.isActive,this.isCharged=t.isCharged,this.nextChange=TimeSpan.fromSeconds(t.timeWithPreviousActiveToNextStateChange).toStringShort(),this.state=t.displayState)}}};var KBe=function(){var e=this,i=e._self._c;return e.isUnlocked?i("h3",[e._v(" "+e._s(e.description)+" State: "),e.isPermanent?[e._v(" Permanently Active ")]:e.isActive?[e._v(" Active ("+e._s(e.nextChange)+" remaining) ")]:e.id===2&&e.isCharged?[e._v(" Charged (Activates with Black Hole 1, "+e._s(e.nextChange)+" remaining) ")]:[e._v(" Inactive (Activation in "+e._s(e.nextChange)+") ")]],2):e._e()},ZBe=[],QBe=K(XBe,KBe,ZBe,!1,null,"d672fbfe");const JBe=QBe.exports,eFe={name:"BlackHoleUnlockButton",data(){return{canBeUnlocked:!1}},computed:{classObject(){return{"c-reality-upgrade-btn--unavailable":!this.canBeUnlocked}}},methods:{update(){this.canBeUnlocked=BlackHoles.canBeUnlocked},unlock(){BlackHoles.unlock(),this.$emit("blackholeunlock")}}};var tFe=function(){var e=this,i=e._self._c;return i("button",{staticClass:"l-reality-upgrade-btn c-reality-upgrade-btn c-reality-upgrade-btn--black-hole-unlock",class:e.classObject,on:{click:e.unlock}},[e._v(" Unleash the Black Hole "),i("br"),e._v(" Cost: "+e._s(e.formatInt(100))+" Reality Machines ")])},iFe=[],nFe=K(eFe,tFe,iFe,!1,null,"a2590725");const rFe=nFe.exports,sFe={name:"DescriptionDisplay",props:{config:{type:Object,required:!1,default:void 0},name:{type:String,required:!1,default:void 0},length:{type:Number,required:!1,default:void 0},title:{type:String,required:!1,default:""}},data(){return{isVisible:!1,description:""}},computed:{classObject(){const t=this.name;if(t===void 0)return;const e={};return e[t]=!0,this.description.length>=this.length&&(e[`${t}--small-text`]=!0),e}},watch:{config:{immediate:!0,handler(t){this.updateFunction=()=>{};const e=t==null?void 0:t.description,i=r=>r.charAt(0).toUpperCase()+r.slice(1);if(this.isVisible=e!==void 0,!this.isVisible)return;if(ux(e)){this.description=i(e);return}if(!z0(e))throw new Error(`DescriptionDisplay config.description has  unsupported type "${typeof e}"`);const n=e();if(ux(n)){if(this.config.scrambleText){this.description=i(n).replace("*",Xn.wordCycle(this.config.scrambleText,!0)),this.updateFunction=()=>this.description=i(e()).replace("*",Xn.wordCycle(this.config.scrambleText,!0));return}this.description=i(n),this.updateFunction=()=>this.description=i(e());return}throw new Error(`DescriptionDisplay config.description is a function which returns unsupported type "${typeof n}"`)}}},beforeCreate(){this.updateFunction=()=>{}},methods:{update(){this.updateFunction()}}};var aFe=function(){var e=this,i=e._self._c;return e.isVisible?i("span",{class:e.classObject},[e._v(" "+e._s(e.title)+" "+e._s(e.description)+" ")]):e._e()},oFe=[],lFe=K(sFe,aFe,oFe,!1,null,null);const Qs=lFe.exports,cFe={name:"BlackHoleUpgradeButton",components:{PrimaryToggleButton:cn,DescriptionDisplay:Qs,EffectDisplay:lo,CostDisplay:mc},props:{config:{type:Object,required:!0}},data(){return{isAffordable:!1,isCapped:!1,isAutoUnlocked:!1,isAutobuyerOn:!1}},computed:{effectConfig(){const{config:t}=this;return{effect:()=>t.upgrade.value,formatEffect:e=>t.formatEffect(e)}},costConfig(){const{config:t}=this;return{cost:()=>t.upgrade.cost,formatCost:e=>format(e,2,0)}},classObject(){return{"c-reality-upgrade-btn--unavailable":!this.isAffordable}}},watch:{isAutobuyerOn(t){Autobuyer.blackHolePower(this.config.upgrade.id).isActive=t}},methods:{update(){this.isCapped=this.config.upgrade.value===0,this.isAffordable=this.config.upgrade.isAffordable&&!this.isCapped;const t=this.config.upgrade.hasAutobuyer,e=Autobuyer.blackHolePower(this.config.upgrade.id);this.isAutoUnlocked=t&&e.isUnlocked,this.isAutobuyerOn=t&&e.isActive}}};var uFe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group"},[i("button",{staticClass:"l-reality-upgrade-btn c-reality-upgrade-btn",class:e.classObject,on:{click:function(n){return e.config.upgrade.purchase()}}},[i("DescriptionDisplay",{attrs:{config:e.config}}),i("EffectDisplay",{attrs:{config:e.effectConfig,label:e.config.effectTitle}}),e.isCapped?e._e():i("CostDisplay",{attrs:{config:e.costConfig,name:"Reality Machine"}})],1),e.isAutoUnlocked?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon-reality-btn o-primary-btn--reality-upgrade-toggle",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):e._e()],1)},dFe=[],hFe=K(cFe,uFe,dFe,!1,null,"13280879");const fFe=hFe.exports,pFe={name:"BlackHoleUpgradeRow",components:{BlackHoleUpgradeButton:fFe},props:{blackHole:{type:Object,required:!0}},data(){return{isUnlocked:!1,isPermanent:!1,intervalVal:0,durationVal:0}},computed:{blackHoleDescription(){return this.blackHole.description(!1)},intervalConfig(){return{upgrade:this.blackHole.intervalUpgrade,description:()=>`Reduce ${this.blackHoleDescription}'s inactive time by ${formatPercents(.2)}`,effectTitle:"Current interval",formatEffect:()=>`${TimeSpan.fromSeconds(this.blackHole.rawInterval).toStringShort(!1)}`}},powerConfig(){return{upgrade:this.blackHole.powerUpgrade,description:()=>`Make ${this.blackHoleDescription} ${formatPercents(.35)} stronger`,effectTitle:"Current power",formatEffect:t=>`${formatX(t,2,2)}`}},durationConfig(){return{upgrade:this.blackHole.durationUpgrade,description:()=>`Extend ${this.blackHoleDescription}'s duration by ${formatPercents(.3)}`,effectTitle:"Current duration",formatEffect:()=>`${TimeSpan.fromSeconds(this.blackHole.duration).toStringShort(!1)}`}}},methods:{update(){const t=this.blackHole;this.isUnlocked=t.isUnlocked,this.isPermanent=t.isPermanent,this.intervalVal=t.rawInterval,this.durationVal=t.duration}}};var mFe=function(){var e=this,i=e._self._c;return e.isUnlocked?i("div",{staticClass:"l-black-hole-upgrade-grid__row"},[e.isPermanent?e._e():i("BlackHoleUpgradeButton",{key:e.intervalVal,attrs:{config:e.intervalConfig}}),i("BlackHoleUpgradeButton",{attrs:{config:e.powerConfig}}),e.isPermanent?e._e():i("BlackHoleUpgradeButton",{key:e.durationVal,attrs:{config:e.durationConfig}})],1):e._e()},yFe=[],gFe=K(pFe,mFe,yFe,!1,null,"1551b97a");const vFe=gFe.exports,bFe={name:"BlackHoleTab",components:{BlackHoleUpgradeRow:vFe,BlackHoleStateRow:JBe,BlackHoleChargingSliders:o4,BlackHoleUnlockButton:rFe},data(){return{isDoomed:!1,isUnlocked:!1,isPaused:!1,isEnslaved:!1,isLaitela:!1,pauseMode:0,detailedBH2:"",isPermanent:!1,hasBH2:!1,blackHoleUptime:[],stateChange:""}},computed:{blackHoles:()=>BlackHoles.list,pauseModeString(){switch(this.pauseMode){case BLACK_HOLE_PAUSE_MODE.NO_PAUSE:return"Do not pause";case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH1:return this.hasBH2?"Before BH1":"Before activation";case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH2:return"Before BH2";default:throw new Error("Unrecognized BH offline pausing mode")}}},mounted(){this.startAnimation()},destroyed(){this.animation&&this.animation.unmount()},methods:{update(){this.isDoomed=Pelle.isDoomed,this.isUnlocked=BlackHoles.areUnlocked,this.isPaused=BlackHoles.arePaused,this.isEnslaved&&!Enslaved.isRunning&&(this.animation&&this.animation.unmount(),this.startAnimation()),this.isEnslaved=Enslaved.isRunning,this.isLaitela=Laitela.isRunning,this.isPermanent=BlackHoles.arePermanent,this.pauseMode=player.blackHoleAutoPauseMode,this.hasBH2=BlackHole(2).isUnlocked,this.blackHoleUptime=[BlackHole(1).duration/BlackHole(1).cycleLength,BlackHole(2).duration/BlackHole(2).cycleLength],this.detailedBH2=this.bh2Status(),player.blackHoleNegative<1&&!this.isLaitela?this.stateChange=this.isPaused?"Uninvert":"Invert":this.stateChange=this.isPaused?"Unpause":"Pause"},bh2Status(){const t=BlackHole(1).timeWithPreviousActiveToNextStateChange,e=BlackHole(2).timeWithPreviousActiveToNextStateChange;if(BlackHole(1).isActive&&BlackHole(2).isActive){const n=Math.min(t,e);return`Black Hole 2 is active for the next ${TimeSpan.fromSeconds(n).toStringShort()}!`}if(BlackHole(1).isActive&&e<t){const n=Math.min(t-e,BlackHole(2).duration);return`Black Hole 2 will activate before Black Hole 1 deactivates,
          for ${TimeSpan.fromSeconds(n).toStringShort()}`}if(BlackHole(1).isActive||e>BlackHole(1).duration){const n=BlackHole(1).isActive?Math.floor((e-t)/BlackHole(1).duration)+1:Math.floor(e/BlackHole(1).duration);return`Black Hole 2 will activate after ${quantifyInt("more active cycle",n)} of Black Hole 1.`}if(BlackHole(2).isCharged){const n=Math.min(BlackHole(1).duration,e);return`Black Hole 2 will activate with Black Hole 1,
          for ${TimeSpan.fromSeconds(n).toStringShort()}.`}const i=Math.min(BlackHole(1).duration-e,BlackHole(2).duration);return`Black Hole 2 will activate ${TimeSpan.fromSeconds(e).toStringShort()} after
        Black Hole 1, for ${TimeSpan.fromSeconds(i).toStringShort()}.`},togglePause(){BlackHoles.togglePause(),BlackHoles.arePaused&&(player.celestials.enslaved.isAutoReleasing=!1),this.update()},changePauseMode(){let t;switch(this.pauseMode){case BLACK_HOLE_PAUSE_MODE.NO_PAUSE:t=BlackHole(1).isPermanent?2:1;break;case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH1:t=this.hasBH2?1:2;break;case BLACK_HOLE_PAUSE_MODE.PAUSE_BEFORE_BH2:t=1;break;default:throw new Error("Unrecognized BH offline pausing mode")}player.blackHoleAutoPauseMode=(this.pauseMode+t)%Object.values(BLACK_HOLE_PAUSE_MODE).length},startAnimation(){setTimeout(()=>{this.$refs.canvas&&(this.animation=new qBe(this.$refs.canvas.getContext("2d")))},1)},gridStyle(){return this.isPermanent?"l-black-hole-upgrade-permanent":"l-black-hole-upgrade-grid"}}};var _Fe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-black-hole-tab"},[e.isEnslaved||e.isDoomed?i("div",{staticClass:"c-black-hole-disabled-description"},[e.isEnslaved?i("i",[e._v(" You must... seek... other methods... "),i("br")]):e._e(),e._v(" The physics of this Reality do not allow the existence of Black Holes. ")]):e.isUnlocked?[i("div",{staticClass:"c-subtab-option-container"},[i("button",{staticClass:"o-primary-btn o-primary-btn--subtab-option",on:{click:e.togglePause}},[e._v(" "+e._s(e.stateChange)+" Black Hole ")]),e.isPermanent?e._e():i("button",{staticClass:"o-primary-btn o-primary-btn--subtab-option l-auto-pause-button",on:{click:e.changePauseMode}},[e._v(" Auto-pause: "+e._s(e.pauseModeString)+" ")])]),i("canvas",{ref:"canvas",staticClass:"c-black-hole-canvas",attrs:{width:"400",height:"400"}}),i("div",{staticClass:"l-black-hole-upgrade-grid"},[e._l(e.blackHoles,function(n,r){return i("BlackHoleStateRow",{key:"state"+r,attrs:{"black-hole":n}})}),e.hasBH2&&!e.isPermanent?i("span",[i("b",[e._v(e._s(e.detailedBH2))]),i("br"),e._v(" The timer for Black Hole 2 only advances while Black Hole 1 is active. "),i("br"),e._v(" Upgrades affect the internal timer; the header shows real time until next activation. ")]):e._e(),i("br"),e.isPermanent?e._e():i("div",[e._v(" Black holes become permanently active when they are active for more than "+e._s(e.formatPercents(.9999,2))+" of the time. "),i("br"),e._v(" Active time percent: "+e._s(e.formatPercents(e.blackHoleUptime[0],3))+" "),e.hasBH2?i("span",[e._v("and "+e._s(e.formatPercents(e.blackHoleUptime[1],3)))]):e._e()]),e.isLaitela?e._e():i("BlackHoleChargingSliders",{staticClass:"l-enslaved-shop-container"})],2),i("div",{class:e.gridStyle()},e._l(e.blackHoles,function(n,r){return i("BlackHoleUpgradeRow",{key:"upgrades"+r,attrs:{"black-hole":n}})}),1)]:i("div",{staticClass:"l-pre-unlock-text"},[i("BlackHoleUnlockButton",{on:{blackholeunlock:e.startAnimation}}),e._v(" The Black Hole makes the entire game run significantly faster for a short period of time. "),i("br"),e._v(" Starts at "+e._s(e.formatX(180))+" faster for "+e._s(e.formatInt(10))+" seconds, once per hour. "),i("br"),i("br"),e._v(" Unlocking the Black Hole also gives "+e._s(e.formatInt(10))+" Automator Points. ")],1)],2)},EFe=[],TFe=K(bFe,_Fe,EFe,!1,null,"1285d799");const wFe=TFe.exports,CFe={name:"BreakInfinityButton",data(){return{isBroken:!1,isUnlocked:!1,isEnslaved:!1}},computed:{classObject(){return{"o-infinity-upgrade-btn":!0,"o-infinity-upgrade-btn--color-2":!0,"o-infinity-upgrade-btn--available":this.isUnlocked,"o-infinity-upgrade-btn--unavailable":!this.isUnlocked,"o-infinity-upgrade-btn--feel-eternity":this.isEnslaved,"o-infinity-upgrade-btn--unclickable":this.isBroken&&!this.isEnslaved}},tooltip(){if(this.isEnslaved)return"...eons stacked on eons stacked on eons stacked on eons stacked on ..."},text(){return this.isEnslaved?"FEEL ETERNITY":this.isBroken?"INFINITY IS BROKEN":"BREAK INFINITY"}},methods:{update(){this.isBroken=player.break,this.isUnlocked=Autobuyer.bigCrunch.hasMaxedInterval,this.isEnslaved=Enslaved.isRunning},clicked(){this.isEnslaved?Enslaved.feelEternity():!this.isBroken&&this.isUnlocked&&Modal.breakInfinity.show()}}};var SFe=function(){var e=this,i=e._self._c;return i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tooltip,expression:"tooltip"}],class:e.classObject,on:{click:e.clicked}},[e._v(" "+e._s(e.text)+" ")])},kFe=[],AFe=K(CFe,SFe,kFe,!1,null,"ab944202");const RFe=AFe.exports,IFe={name:"InfinityUpgradeButton",components:{DescriptionDisplay:Qs,EffectDisplay:lo,CostDisplay:mc},props:{upgrade:{type:Object,required:!0}},data(){return{showWorstChallenge:!1,worstChallengeString:"",isUseless:!1,canBeBought:!1,chargePossible:!1,canBeCharged:!1,isBought:!1,isCharged:!1,isDisabled:!1,showingCharged:!1,hasTS31:!1,ts31Effect:new Decimal(0)}},computed:{isBasedOnInfinities(){return/(18|27|36|45)Mult/u.test(this.upgrade.id)||this.upgrade.id==="infinitiedMult"},shiftDown(){return ui.view.shiftDown},showChargedEffect(){return this.chargePossible&&(this.isCharged||this.showingCharged||this.shiftDown)},config(){const t=this.upgrade.config;return this.showChargedEffect?t.charged:t},classObject(){return{"o-infinity-upgrade-btn":!0,"o-infinity-upgrade-btn--bought":!this.isUseless&&this.isBought,"o-infinity-upgrade-btn--available":!this.isUseless&&!this.isBought&&this.canBeBought,"o-infinity-upgrade-btn--unavailable":!this.isUseless&&!this.isBought&&!this.canBeBought,"o-infinity-upgrade-btn--useless":this.isUseless,"o-pelle-disabled":this.isUseless,"o-infinity-upgrade-btn--chargeable":!this.isCharged&&this.chargePossible&&(this.showingCharged||this.shiftDown),"o-infinity-upgrade-btn--charged":this.isCharged,"o-pelle-disabled-pointer":this.isUseless}},isImprovedByTS31(){return this.hasTS31&&this.isBasedOnInfinities&&!this.showChargedEffect}},methods:{update(){const t=this.upgrade;if(this.isBought=t.isBought||t.isCapped,this.chargePossible=Ra.unlocks.chargedInfinityUpgrades.canBeApplied&&t.hasChargeEffect&&!Pelle.isDoomed,this.canBeBought=t.canBeBought,this.canBeCharged=t.canCharge,this.isCharged=t.isCharged,this.isDisabled=t.config.isDisabled&&t.config.isDisabled(t.config.effect()),this.isUseless=Pelle.uselessInfinityUpgrades.includes(t.id)&&Pelle.isDoomed,this.hasTS31=TimeStudy(31).canBeApplied,!this.isDisabled&&this.isImprovedByTS31&&(this.ts31Effect=Decimal.pow(t.config.effect(),4)),t.id!=="challengeMult")return;this.showWorstChallenge=t.effectValue!==t.cap&&player.challenge.normal.bestTimes.sum()<Number.MAX_VALUE;const e=GameCache.worstChallengeTime.value,i=2+player.challenge.normal.bestTimes.indexOf(e);this.worstChallengeString=`(Challenge ${i}: ${timeDisplayShort(e)})`}}};var DFe=function(){var e=this,i=e._self._c;return i("button",{class:e.classObject,on:{mouseenter:function(n){e.showingCharged=e.canBeCharged},mouseleave:function(n){e.showingCharged=!1},click:function(n){return e.upgrade.purchase()}}},[i("span",{class:{"o-pelle-disabled":e.isUseless}},[i("DescriptionDisplay",{attrs:{config:e.config}}),e.showWorstChallenge?i("span",[i("br"),e._v(" "+e._s(e.worstChallengeString)+" ")]):e._e(),e.isDisabled?e._e():i("EffectDisplay",{attrs:{br:"",config:e.config}}),!e.isDisabled&&e.isImprovedByTS31?[i("br"),e._v(" After TS31: "+e._s(e.formatX(e.ts31Effect,2,2))+" ")]:e._e()],2),e.isBought?e._e():i("CostDisplay",{attrs:{br:"",config:e.config,name:"Infinity Point"}}),e._t("default")],2)},xFe=[],MFe=K(IFe,DFe,xFe,!1,null,"7e89b264");const HR=MFe.exports,PFe={name:"BreakInfinityTab",components:{BreakInfinityButton:RFe,InfinityUpgradeButton:HR},data(){return{isUnlocked:!1}},computed:{grid(){return[[BreakInfinityUpgrade.totalAMMult,BreakInfinityUpgrade.currentAMMult,BreakInfinityUpgrade.galaxyBoost],[BreakInfinityUpgrade.infinitiedMult,BreakInfinityUpgrade.achievementMult,BreakInfinityUpgrade.slowestChallengeMult],[BreakInfinityUpgrade.infinitiedGen,BreakInfinityUpgrade.autobuyMaxDimboosts,BreakInfinityUpgrade.autobuyerSpeed],[BreakInfinityUpgrade.tickspeedCostMult,BreakInfinityUpgrade.dimCostMult,BreakInfinityUpgrade.ipGen]]}},methods:{update(){this.isUnlocked=Autobuyer.bigCrunch.hasMaxedInterval},btnClassObject(t){return{"l-infinity-upgrade-grid__cell":!0,"o-infinity-upgrade-btn--multiplier":t===3}},timeDisplayShort(t){return timeDisplayShort(t)}}};var OFe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-break-infinity-tab"},[e.isUnlocked?e._e():i("div",[e._v(" Reduce the interval of Automatic Big Crunch Autobuyer to "+e._s(e.format(.1,1,1))+" seconds to unlock Break Infinity. ")]),i("BreakInfinityButton",{staticClass:"l-break-infinity-tab__break-btn"}),e.isUnlocked?i("div",{staticClass:"l-break-infinity-upgrade-grid l-break-infinity-tab__grid"},e._l(e.grid,function(n,r){return i("div",{key:r,staticClass:"l-break-infinity-upgrade-grid__row"},e._l(n,function(s){return i("InfinityUpgradeButton",{key:s.id,class:e.btnClassObject(r),attrs:{upgrade:s}})}),1)}),0):e._e()],1)},NFe=[],GFe=K(PFe,OFe,NFe,!1,null,"a7945537");const UFe=GFe.exports;var LFe=function(){var t="",e,i,n,r=[],s={passive:!0};window.addEventListener?(e="addEventListener",i="removeEventListener"):(e="attachEvent",i="detachEvent",t="on"),n="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function a(_,E){var C=function(S){!S&&(S=window.event);var k={originalEvent:S,target:S.target||S.srcElement,type:"wheel",deltaMode:S.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){S.preventDefault?S.preventDefault():S.returnValue=!1}};return n=="mousewheel"?(k.deltaY=-.025*S.wheelDelta,S.wheelDeltaX&&(k.deltaX=-.025*S.wheelDeltaX)):k.deltaY=S.detail,E(k)};return r.push({element:_,fn:C}),C}function o(_){for(var E=0;E<r.length;E++)if(r[E].element===_)return r[E].fn;return function(){}}function c(_){for(var E=0;E<r.length;E++)if(r[E].element===_)return r.splice(E,1)}function d(_,E,C,S){var k;n==="wheel"?k=C:k=a(_,C),_[e](t+E,k,S?s:!1)}function p(_,E,C,S){var k;n==="wheel"?k=C:k=o(_),_[i](t+E,k,S?s:!1),c(_)}function m(_,E,C){d(_,n,E,C),n=="DOMMouseScroll"&&d(_,"MozMousePixelScroll",E,C)}function y(_,E,C){p(_,n,E,C),n=="DOMMouseScroll"&&p(_,"MozMousePixelScroll",E,C)}return{on:m,off:y}}(),VR={extend:function(t,e){t=t||{};for(var i in e)this.isObject(e[i])?t[i]=this.extend(t[i],e[i]):t[i]=e[i];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,i;if(this.isElement(t))e=t;else if(typeof t=="string"||t instanceof String){if(e=document.querySelector(t),!e)throw new Error("Provided selector did not find any elements. Selector: "+t)}else throw new Error("Provided selector is not an HTML object nor String");if(e.tagName.toLowerCase()==="svg")i=e;else if(e.tagName.toLowerCase()==="object")i=e.contentDocument.documentElement;else if(e.tagName.toLowerCase()==="embed")i=e.getSVGDocument().documentElement;else throw e.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return i},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(t.clientX===void 0||t.clientX===null)if(t.clientX=0,t.clientY=0,t.touches!==void 0&&t.touches.length){if(t.touches[0].clientX!==void 0)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(t.touches[0].pageX!==void 0){var i=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-i.left,t.clientY=t.touches[0].pageY-i.top}}else t.originalEvent!==void 0&&t.originalEvent.clientX!==void 0&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(t.detail===2)return!0;if(e!=null){var i=t.timeStamp-e.timeStamp,n=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return i<250&&n<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(t,e,i){var n=this,r,s,a,o=null,c=0;i||(i={});var d=function(){c=i.leading===!1?0:n.now(),o=null,a=t.apply(r,s),o||(r=s=null)};return function(){var p=n.now();!c&&i.leading===!1&&(c=p);var m=e-(p-c);return r=this,s=arguments,m<=0||m>e?(clearTimeout(o),o=null,c=p,a=t.apply(r,s),o||(r=s=null)):!o&&i.trailing!==!1&&(o=setTimeout(d,m)),a}},createRequestAnimationFrame:function(t){var e=null;return t!=="auto"&&t<60&&t>1&&(e=Math.floor(1e3/t)),e===null?window.requestAnimationFrame||jN(33):jN(e)}};function jN(t){return function(e){window.setTimeout(e,t)}}var aC=VR,l4="unknown";document.documentMode&&(l4="ie");var qR={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(t){if(t.clientWidth&&t.clientHeight)return{width:t.clientWidth,height:t.clientHeight};if(t.getBoundingClientRect())return t.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(t,e){var i=null;if(aC.isElement(e)?i=e:i=t.querySelector(e),!i){var n=Array.prototype.slice.call(t.childNodes||t.children).filter(function(c){return c.nodeName!=="defs"&&c.nodeName!=="#text"});n.length===1&&n[0].nodeName==="g"&&n[0].getAttribute("transform")===null&&(i=n[0])}if(!i){var r="viewport-"+new Date().toISOString().replace(/\D/g,"");i=document.createElementNS(this.svgNS,"g"),i.setAttribute("id",r);var s=t.childNodes||t.children;if(s&&s.length>0)for(var a=s.length;a>0;a--)s[s.length-a].nodeName!=="defs"&&i.appendChild(s[s.length-a]);t.appendChild(i)}var o=[];return i.getAttribute("class")&&(o=i.getAttribute("class").split(" ")),~o.indexOf("svg-pan-zoom_viewport")||(o.push("svg-pan-zoom_viewport"),i.setAttribute("class",o.join(" "))),i},setupSvgAttributes:function(t){if(t.setAttribute("xmlns",this.svgNS),t.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),t.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),t.parentNode!==null){var e=t.getAttribute("style")||"";e.toLowerCase().indexOf("overflow")===-1&&t.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:aC.throttle(function(){for(var t=document.querySelectorAll("defs"),e=t.length,i=0;i<e;i++){var n=t[i];n.parentNode.insertBefore(n,n)}},Si?Si.internetExplorerRedisplayInterval:null),setCTM:function(t,e,i){var n=this,r="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttributeNS(null,"transform",r),"transform"in t.style?t.style.transform=r:"-ms-transform"in t.style?t.style["-ms-transform"]=r:"-webkit-transform"in t.style&&(t.style["-webkit-transform"]=r),l4==="ie"&&i&&(i.parentNode.insertBefore(i,i),window.setTimeout(function(){n.refreshDefsGlobal()},n.internetExplorerRedisplayInterval))},getEventPoint:function(t,e){var i=e.createSVGPoint();return aC.mouseAndTouchNormalize(t,e),i.x=t.clientX,i.y=t.clientY,i},getSvgCenterPoint:function(t,e,i){return this.createSVGPoint(t,e/2,i/2)},createSVGPoint:function(t,e,i){var n=t.createSVGPoint();return n.x=e,n.y=i,n}},Ha=qR,BFe={enable:function(t){var e=t.svg.querySelector("defs");e||(e=document.createElementNS(Ha.svgNS,"defs"),t.svg.appendChild(e));var i=e.querySelector("style#svg-pan-zoom-controls-styles");if(!i){var n=document.createElementNS(Ha.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(n)}var r=document.createElementNS(Ha.svgNS,"g");r.setAttribute("id","svg-pan-zoom-controls"),r.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),r.setAttribute("class","svg-pan-zoom-control"),r.appendChild(this._createZoomIn(t)),r.appendChild(this._createZoomReset(t)),r.appendChild(this._createZoomOut(t)),t.svg.appendChild(r),t.controlIcons=r},_createZoomIn:function(t){var e=document.createElementNS(Ha.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomIn()},!1);var i=document.createElementNS(Ha.svgNS,"rect");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","1500"),i.setAttribute("height","1400"),i.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(i);var n=document.createElementNS(Ha.svgNS,"path");return n.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n),e},_createZoomReset:function(t){var e=document.createElementNS(Ha.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().reset()},!1);var i=document.createElementNS(Ha.svgNS,"rect");i.setAttribute("x","2"),i.setAttribute("y","2"),i.setAttribute("width","182"),i.setAttribute("height","58"),i.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(i);var n=document.createElementNS(Ha.svgNS,"path");n.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n);var r=document.createElementNS(Ha.svgNS,"path");return r.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},_createZoomOut:function(t){var e=document.createElementNS(Ha.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomOut()},!1);var i=document.createElementNS(Ha.svgNS,"rect");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","1500"),i.setAttribute("height","1400"),i.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(i);var n=document.createElementNS(Ha.svgNS,"path");return n.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}},FFe=qR,Rd=VR,ur=function(t,e){this.init(t,e)};ur.prototype.init=function(t,e){this.viewport=t,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=Rd.proxy(this.updateCTM,this),this.requestAnimationFrame=Rd.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var i=this.processCTM();this.setCTM(i),this.updateCTM()};ur.prototype.cacheViewBox=function(){var t=this.options.svg.getAttribute("viewBox");if(t){var e=t.split(/[\s\,]/).filter(function(n){return n}).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var i=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=i,this.activeState.x=(this.options.width-this.viewBox.width*i)/2,this.activeState.y=(this.options.height-this.viewBox.height*i)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};ur.prototype.simpleViewBoxCache=function(){var t=this.viewport.getBBox();this.viewBox.x=t.x,this.viewBox.y=t.y,this.viewBox.width=t.width,this.viewBox.height=t.height};ur.prototype.getViewBox=function(){return Rd.extend({},this.viewBox)};ur.prototype.processCTM=function(){var t=this.getCTM();if(this.options.fit||this.options.contain){var e;this.options.fit?e=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):e=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t.a=e,t.d=e,t.e=-this.viewBox.x*e,t.f=-this.viewBox.y*e}if(this.options.center){var i=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*t.a)*.5,n=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*t.a)*.5;t.e=i,t.f=n}return this.originalState.zoom=t.a,this.originalState.x=t.e,this.originalState.y=t.f,t};ur.prototype.getOriginalState=function(){return Rd.extend({},this.originalState)};ur.prototype.getState=function(){return Rd.extend({},this.activeState)};ur.prototype.getZoom=function(){return this.activeState.zoom};ur.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};ur.prototype.computeRelativeZoom=function(t){return t/this.originalState.zoom};ur.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};ur.prototype.getCTM=function(){var t=this.options.svg.createSVGMatrix();return t.a=this.activeState.zoom,t.b=0,t.c=0,t.d=this.activeState.zoom,t.e=this.activeState.x,t.f=this.activeState.y,t};ur.prototype.setCTM=function(t){var e=this.isZoomDifferent(t),i=this.isPanDifferent(t);if(e||i){if(e&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(t.a))===!1?(t.a=t.d=this.activeState.zoom,e=!1):(this.updateCache(t),this.options.onZoom(this.getRelativeZoom()))),i){var n=this.options.beforePan(this.getPan(),{x:t.e,y:t.f}),r=!1,s=!1;n===!1?(t.e=this.getPan().x,t.f=this.getPan().y,r=s=!0):Rd.isObject(n)&&(n.x===!1?(t.e=this.getPan().x,r=!0):Rd.isNumber(n.x)&&(t.e=n.x),n.y===!1?(t.f=this.getPan().y,s=!0):Rd.isNumber(n.y)&&(t.f=n.y)),r&&s||!this.isPanDifferent(t)?i=!1:(this.updateCache(t),this.options.onPan(this.getPan()))}(e||i)&&this.updateCTMOnNextFrame()}};ur.prototype.isZoomDifferent=function(t){return this.activeState.zoom!==t.a};ur.prototype.isPanDifferent=function(t){return this.activeState.x!==t.e||this.activeState.y!==t.f};ur.prototype.updateCache=function(t){this.activeState.zoom=t.a,this.activeState.x=t.e,this.activeState.y=t.f};ur.prototype.pendingUpdate=!1;ur.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};ur.prototype.updateCTM=function(){var t=this.getCTM();FFe.setCTM(this.viewport,t,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(t)};var $Fe=function(t,e){return new ur(t,e)},c4=LFe,QS=BFe,al=VR,oc=qR,HFe=$Fe,Gi=function(t,e){this.init(t,e)},VFe={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},u4={passive:!0};Gi.prototype.init=function(t,e){var i=this;this.svg=t,this.defs=t.querySelector("defs"),oc.setupSvgAttributes(this.svg),this.options=al.extend(al.extend({},VFe),e),this.state="none";var n=oc.getBoundingClientRectNormalized(t);this.width=n.width,this.height=n.height,this.viewport=HFe(oc.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,a){if(i.viewport&&i.options.beforeZoom)return i.options.beforeZoom(s,a)},onZoom:function(s){if(i.viewport&&i.options.onZoom)return i.options.onZoom(s)},beforePan:function(s,a){if(i.viewport&&i.options.beforePan)return i.options.beforePan(s,a)},onPan:function(s){if(i.viewport&&i.options.onPan)return i.options.onPan(s)},onUpdatedCTM:function(s){if(i.viewport&&i.options.onUpdatedCTM)return i.options.onUpdatedCTM(s)}});var r=this.getPublicInstance();r.setBeforeZoom(this.options.beforeZoom),r.setOnZoom(this.options.onZoom),r.setBeforePan(this.options.beforePan),r.setOnPan(this.options.onPan),r.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&QS.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};Gi.prototype.setupHandlers=function(){var t=this,e=null;if(this.eventListeners={mousedown:function(s){var a=t.handleMouseDown(s,e);return e=s,a},touchstart:function(s){var a=t.handleMouseDown(s,e);return e=s,a},mouseup:function(s){return t.handleMouseUp(s)},touchend:function(s){return t.handleMouseUp(s)},mousemove:function(s){return t.handleMouseMove(s)},touchmove:function(s){return t.handleMouseMove(s)},mouseleave:function(s){return t.handleMouseUp(s)},touchleave:function(s){return t.handleMouseUp(s)},touchcancel:function(s){return t.handleMouseUp(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var i=this.options.customEventsHandler.haltEventListeners;if(i&&i.length)for(var n=i.length-1;n>=0;n--)this.eventListeners.hasOwnProperty(i[n])&&delete this.eventListeners[i[n]]}for(var r in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(r,this.eventListeners[r],this.options.preventMouseEventsDefault?!1:u4);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};Gi.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var t=this;this.wheelListener=function(i){return t.handleMouseWheel(i)};var e=!this.options.preventMouseEventsDefault;c4.on(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!0}};Gi.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var t=!this.options.preventMouseEventsDefault;c4.off(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!1}};Gi.prototype.handleMouseWheel=function(t){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1);var e=t.deltaY||1,i=Date.now()-this.lastMouseWheelEventTime,n=3+Math.max(0,30-i);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in t&&t.deltaMode===0&&t.wheelDelta&&(e=t.deltaY===0?0:Math.abs(t.wheelDelta)/t.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/n;var r=this.svg.getScreenCTM().inverse(),s=oc.getEventPoint(t,this.svg).matrixTransform(r),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(a,s)}};Gi.prototype.zoomAtPoint=function(t,e,i){var n=this.viewport.getOriginalState();i?(t=Math.max(this.options.minZoom*n.zoom,Math.min(this.options.maxZoom*n.zoom,t)),t=t/this.getZoom()):this.getZoom()*t<this.options.minZoom*n.zoom?t=this.options.minZoom*n.zoom/this.getZoom():this.getZoom()*t>this.options.maxZoom*n.zoom&&(t=this.options.maxZoom*n.zoom/this.getZoom());var r=this.viewport.getCTM(),s=e.matrixTransform(r.inverse()),a=this.svg.createSVGMatrix().translate(s.x,s.y).scale(t).translate(-s.x,-s.y),o=r.multiply(a);o.a!==r.a&&this.viewport.setCTM(o)};Gi.prototype.zoom=function(t,e){this.zoomAtPoint(t,oc.getSvgCenterPoint(this.svg,this.width,this.height),e)};Gi.prototype.publicZoom=function(t,e){e&&(t=this.computeFromRelativeZoom(t)),this.zoom(t,e)};Gi.prototype.publicZoomAtPoint=function(t,e,i){if(i&&(t=this.computeFromRelativeZoom(t)),al.getType(e)!=="SVGPoint")if("x"in e&&"y"in e)e=oc.createSVGPoint(this.svg,e.x,e.y);else throw new Error("Given point is invalid");this.zoomAtPoint(t,e,i)};Gi.prototype.getZoom=function(){return this.viewport.getZoom()};Gi.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};Gi.prototype.computeFromRelativeZoom=function(t){return t*this.viewport.getOriginalState().zoom};Gi.prototype.resetZoom=function(){var t=this.viewport.getOriginalState();this.zoom(t.zoom,!0)};Gi.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};Gi.prototype.reset=function(){this.resetZoom(),this.resetPan()};Gi.prototype.handleDblClick=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.options.controlIconsEnabled){var e=t.target.getAttribute("class")||"";if(e.indexOf("svg-pan-zoom-control")>-1)return!1}var i;t.shiftKey?i=1/((1+this.options.zoomScaleSensitivity)*2):i=(1+this.options.zoomScaleSensitivity)*2;var n=oc.getEventPoint(t,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(i,n)};Gi.prototype.handleMouseDown=function(t,e){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),al.mouseAndTouchNormalize(t,this.svg),this.options.dblClickZoomEnabled&&al.isDblClick(t,e)?this.handleDblClick(t):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=oc.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()))};Gi.prototype.handleMouseMove=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var e=oc.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()),i=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(i)}};Gi.prototype.handleMouseUp=function(t){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&(this.state="none")};Gi.prototype.fit=function(){var t=this.viewport.getViewBox(),e=Math.min(this.width/t.width,this.height/t.height);this.zoom(e,!0)};Gi.prototype.contain=function(){var t=this.viewport.getViewBox(),e=Math.max(this.width/t.width,this.height/t.height);this.zoom(e,!0)};Gi.prototype.center=function(){var t=this.viewport.getViewBox(),e=(this.width-(t.width+t.x*2)*this.getZoom())*.5,i=(this.height-(t.height+t.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:e,y:i})};Gi.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};Gi.prototype.pan=function(t){var e=this.viewport.getCTM();e.e=t.x,e.f=t.y,this.viewport.setCTM(e)};Gi.prototype.panBy=function(t){var e=this.viewport.getCTM();e.e+=t.x,e.f+=t.y,this.viewport.setCTM(e)};Gi.prototype.getPan=function(){var t=this.viewport.getState();return{x:t.x,y:t.y}};Gi.prototype.resize=function(){var t=oc.getBoundingClientRectNormalized(this.svg);this.width=t.width,this.height=t.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};Gi.prototype.destroy=function(){var t=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var e in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],this.options.preventMouseEventsDefault?!1:u4);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),td=td.filter(function(i){return i.svg!==t.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};Gi.prototype.getPublicInstance=function(){var t=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return t.options.panEnabled=!0,t.pi},disablePan:function(){return t.options.panEnabled=!1,t.pi},isPanEnabled:function(){return!!t.options.panEnabled},pan:function(e){return t.pan(e),t.pi},panBy:function(e){return t.panBy(e),t.pi},getPan:function(){return t.getPan()},setBeforePan:function(e){return t.options.beforePan=e===null?null:al.proxy(e,t.publicInstance),t.pi},setOnPan:function(e){return t.options.onPan=e===null?null:al.proxy(e,t.publicInstance),t.pi},enableZoom:function(){return t.options.zoomEnabled=!0,t.pi},disableZoom:function(){return t.options.zoomEnabled=!1,t.pi},isZoomEnabled:function(){return!!t.options.zoomEnabled},enableControlIcons:function(){return t.options.controlIconsEnabled||(t.options.controlIconsEnabled=!0,QS.enable(t)),t.pi},disableControlIcons:function(){return t.options.controlIconsEnabled&&(t.options.controlIconsEnabled=!1,QS.disable(t)),t.pi},isControlIconsEnabled:function(){return!!t.options.controlIconsEnabled},enableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!0,t.pi},disableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!1,t.pi},isDblClickZoomEnabled:function(){return!!t.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return t.enableMouseWheelZoom(),t.pi},disableMouseWheelZoom:function(){return t.disableMouseWheelZoom(),t.pi},isMouseWheelZoomEnabled:function(){return!!t.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return t.options.zoomScaleSensitivity=e,t.pi},setMinZoom:function(e){return t.options.minZoom=e,t.pi},setMaxZoom:function(e){return t.options.maxZoom=e,t.pi},setBeforeZoom:function(e){return t.options.beforeZoom=e===null?null:al.proxy(e,t.publicInstance),t.pi},setOnZoom:function(e){return t.options.onZoom=e===null?null:al.proxy(e,t.publicInstance),t.pi},zoom:function(e){return t.publicZoom(e,!0),t.pi},zoomBy:function(e){return t.publicZoom(e,!1),t.pi},zoomAtPoint:function(e,i){return t.publicZoomAtPoint(e,i,!0),t.pi},zoomAtPointBy:function(e,i){return t.publicZoomAtPoint(e,i,!1),t.pi},zoomIn:function(){return this.zoomBy(1+t.options.zoomScaleSensitivity),t.pi},zoomOut:function(){return this.zoomBy(1/(1+t.options.zoomScaleSensitivity)),t.pi},getZoom:function(){return t.getRelativeZoom()},setOnUpdatedCTM:function(e){return t.options.onUpdatedCTM=e===null?null:al.proxy(e,t.publicInstance),t.pi},resetZoom:function(){return t.resetZoom(),t.pi},resetPan:function(){return t.resetPan(),t.pi},reset:function(){return t.reset(),t.pi},fit:function(){return t.fit(),t.pi},contain:function(){return t.contain(),t.pi},center:function(){return t.center(),t.pi},updateBBox:function(){return t.updateBBox(),t.pi},resize:function(){return t.resize(),t.pi},getSizes:function(){return{width:t.width,height:t.height,realZoom:t.getZoom(),viewBox:t.viewport.getViewBox()}},destroy:function(){return t.destroy(),t.pi}}),this.publicInstance};var td=[],qFe=function(t,e){var i=al.getSvg(t);if(i===null)return null;for(var n=td.length-1;n>=0;n--)if(td[n].svg===i)return td[n].instance.getPublicInstance();return td.push({svg:i,instance:new Gi(i,e)}),td[td.length-1].instance.getPublicInstance()},YFe=qFe;const WFe=ru(YFe);function YR(t){if(!t.gapDeg){const R=t.rMinor?`m 0.2 ${t.rMajor-t.rMinor}
a ${t.rMinor} ${t.rMinor} 0 1 1 -0.2 0
z`:"";return`M -0.1, ${-t.rMajor}
a ${t.rMajor} ${t.rMajor} 0 1 0 0.2 0
z
${R}`}const e=Math.PI/180,i=t.gapAngleDeg===void 0?t.gapDeg/2:t.gapAngleDeg,n=e*(t.gapCenterDeg+t.gapDeg/2),r=Math.cos(n),s=Math.sin(n),a=e*(t.gapCenterDeg-t.gapDeg/2),o=Math.cos(a),c=Math.sin(a),d=t.rMajor/t.rMinor*Math.sin(e*(t.gapDeg/2-i)),p=Math.asin(d)+e*i,m=e*t.gapCenterDeg+p,y=Math.cos(m),_=Math.sin(m),E=e*t.gapCenterDeg-p,C=Math.cos(E),S=Math.sin(E),k=t.gapDeg<=180?1:0;return`M ${r*t.rMajor-.001*s} ${s*t.rMajor+.001*r}
A ${t.rMajor} ${t.rMajor} 0 ${k} 1 ${o*t.rMajor+.001*c} ${c*t.rMajor-.001*o}
L ${C*t.rMinor+.001*S} ${S*t.rMinor-.001*C}
A ${t.rMinor} ${t.rMinor} 0 ${k} 0 ${y*t.rMinor-.001*_} ${_*t.rMinor+.001*y}
z`}const jFe={name:"NodeBackground",props:{position:{type:Object,required:!0},ring:{type:Object,required:!0},isStacked:{type:Boolean,required:!1,default:!1}},computed:{ringBackgroundTransform(){return this.position.asTranslate()},ringBackgroundPath(){return YR(this.ring)},ringBackgroundFilter(){return this.isStacked?"":"url(#backgroundGlow)"}}};var zFe=function(){var e=this,i=e._self._c;return i("path",{attrs:{transform:e.ringBackgroundTransform,d:e.ringBackgroundPath,fill:"rgba(0,0,0,0.75)",stroke:"none",filter:e.ringBackgroundFilter}})},XFe=[],KFe=K(jFe,zFe,XFe,!1,null,"dbec7994");const zN=KFe.exports,ZFe={name:"NodeOverlay",props:{complete:{type:Number,required:!0},position:{type:Object,required:!0},legend:{type:Object,required:!1,default:void 0},ring:{type:Object,required:!0},fill:{type:String,required:!1,default:void 0},alwaysShowLegend:{type:Boolean,required:!1,default:!1},forceLegend:{type:Function,required:!1,default:void 0},clickAction:{type:Function,required:!1,default:void 0}},data(){return{legendLines:[],hoverOverride:!1}},computed:{LEGEND_FONT_SIZE:()=>16,baseTransform(){return this.position.asTranslate()},pathData(){return YR(this.ring)},hasLegend(){return!!this.legend&&(!this.legend.hideWhenCompleted||this.complete<1)},legendArrowPoints(){const t=Vector.unitFromDegrees(this.legend.angle),e=[t.times(this.ring.rMajor+2)];return e.push(e[0].plus(t.times(this.legend.diagonal))),e.push(e[1].plus(Vector.horiz(this.legend.horizontal*Math.sign(t.x)))),e},legendArrowPointString(){return this.legendArrowPoints.join(" ")},legendTransform(){const t=this.legendArrowPoints,e=Math.sign(t[2].x-t[0].x);return t[2].plus(Vector.horiz(e*4)).asTranslate()},legendTextAnchor(){const t=(this.legend.angle+360)%360;return t>90&&t<270?"end":"start"},nodeClass(){return{"o-celestial-nav__force-hover":this.hoverOverride,"o-celestial-nav__clickable":this.clickAction!==void 0}}},methods:{update(){this.legendLines=this.getLines(),this.hoverOverride=this.alwaysShowLegend||this.forceLegend&&this.forceLegend()},legendLineY(t){const e=Math.round(this.LEGEND_FONT_SIZE*1.25/2),i=this.legendLines.length;return(2*t-(i-1))*e},getLines(){if(!this.legend)return null;const t=typeof this.legend.text=="function"?this.legend.text(this.complete):this.legend.text;return typeof t=="string"?[t]:t}}};var QFe=function(){var e=this,i=e._self._c;return i("g",e._g({staticClass:"o-celestial-nav__hoverable",class:e.nodeClass,attrs:{transform:e.baseTransform}},e.clickAction?{click:e.clickAction}:{}),[i("path",{staticClass:"o-celestial-nav__node-overlay",attrs:{d:e.pathData}}),e.hasLegend?i("g",{staticClass:"tooltiptext"},[i("polyline",{staticClass:"o-celestial-nav__legend-arrow",attrs:{points:e.legendArrowPointString}}),i("path",{staticClass:"o-celestial-nav__legend-outline",attrs:{d:e.pathData}}),i("g",{attrs:{transform:e.legendTransform}},[i("text",{staticClass:"o-celestial-nav__legend-text",attrs:{"text-anchor":e.legendTextAnchor,"dominant-baseline":"middle","font-size":e.LEGEND_FONT_SIZE}},e._l(e.legendLines,function(n,r){return i("tspan",{key:r,attrs:{x:"0",y:e.legendLineY(r)}},[e._v(" "+e._s(n)+" ")])}),0)])]):e._e()])},JFe=[],e$e=K(ZFe,QFe,JFe,!1,null,"08568679");const XN=e$e.exports,t$e={name:"NodeRing",props:{complete:{type:Number,required:!0},position:{type:Object,required:!0},ring:{type:Object,required:!0},symbol:{type:String,required:!1,default:""},symbolScale:{type:Number,required:!1,default:1.4},symbolOffset:{type:String,required:!1,default:"0"},completeClass:{type:String,required:!1,default:void 0},incompleteClass:{type:String,required:!1,default:void 0},fill:{type:String,required:!1,default:void 0},isStacked:{type:Boolean,required:!1,default:!1}},computed:{baseTransform(){return this.position.asTranslate()},pathData(){return YR(this.ring)},ringClass(){return this.complete>=1?this.completeClass:this.incompleteClass},symbolFontSize(){return this.ring.rMajor*this.symbolScale},ringFilter(){return this.complete>=1&&!this.isStacked?"url(#completeGlow)":""}}};var i$e=function(){var e=this,i=e._self._c;return i("g",{attrs:{transform:e.baseTransform}},[i("path",{class:e.ringClass,attrs:{d:e.pathData,stroke:"none",fill:e.fill,filter:e.ringFilter}}),e.symbol?i("text",{staticClass:"o-celestial-nav__symbol o-no-mouse",attrs:{fill:"#000","dominant-baseline":"middle","font-size":e.symbolFontSize,dy:e.symbolOffset}},[e._v(" "+e._s(e.symbol)+" ")]):e._e()])},n$e=[],r$e=K(t$e,i$e,n$e,!1,null,"64a71932");const KN=r$e.exports,s$e={name:"ProgressConnector",props:{complete:{type:Number,required:!0},completeWidth:{type:Number,required:!1,default:8},incompleteWidth:{type:Number,required:!1,default:6},noBG:{type:Boolean,required:!1,default:!1},opacity:{type:Number,required:!1,default:1},fill:{type:String,required:!1,default:"#5151ec"},filterName:{type:String,required:!1,default:"completeGlow"},path:{type:Object,required:!0},pathStart:{type:Number,required:!0},pathEnd:{type:Number,required:!0},pathPadStart:{type:Number,required:!1,default:0},pathPadEnd:{type:Number,required:!1,default:0}},computed:{unpaddedSpan(){return this.pathEnd-this.pathPadEnd-(this.pathStart+this.pathPadStart)},incompleteStart(){return this.complete>=1?this.pathEnd:this.pathStart+this.pathPadStart+this.unpaddedSpan*this.complete},incompleteStartShape(){return this.shapeAt(this.incompleteStart)},completeStartShape(){return this.shapeAt(this.pathStart)},incompleteTransform(){const t=this.incompleteStartShape;return`${t.position.asTranslate()} ${t.direction.asRotate()}`},pathEndShape(){return this.shapeAt(this.pathEnd)},totalPathOffsetPx(){return this.pathEndShape.position.minus(this.completeStartShape.position)},completeTransform(){const t=this.completeStartShape,e=this.totalPathOffsetPx.length;return`${t.position.asTranslate()} ${t.direction.asRotate()} scale(${e})`},incompleteFadeEnd(){const e=12/this.incompleteStartShape.derivative.length;return this.pathEnd>this.pathStart?Math.min(this.incompleteStart+e,this.pathEnd):Math.max(this.incompleteStart-e,this.pathEnd)},incompleteFadePath(){return this.generateIncompletePath(this.incompleteStart,this.incompleteFadeEnd)},incompleteSolidPath(){return this.generateIncompletePath(this.incompleteFadeEnd-.001*(this.pathEnd-this.incompleteFadeEnd),this.pathEnd)},completePath(){const t=this.completeStartShape,e=1/this.totalPathOffsetPx.length,i=AffineTransform.translation(t.position.negative).rotated(-t.direction.angle).scaled(e),n=this.pathStart,r=this.incompleteStart,s=this.completeWidth,a=this.getOffsetPath(-s/2,n,r).transformedBy(i),o=this.getOffsetPath(s/2,r,n).transformedBy(i),c=this.incompleteStartShape.direction.transformedBy(i.withoutTranslation),d=a.path[a.path.length-1],p=o.path[0],m=d.position(1).plus(c.times(s/2)),y=p.position(0).plus(c.times(s/2)),_=`C ${m.x} ${m.y} ${y.x} ${y.y} ${p.p0.x} ${p.p0.y}
`;return a.toSVG("M")+_+o.toSVG("L")},hasIncompleteSolidPath(){return this.incompleteFadeEnd!==this.pathEnd},filter(){return`url(#${this.filterName})`}},methods:{generateIncompletePath(t,e){const i=this.getOffsetPath(-this.incompleteWidth/2,t,e),n=this.getOffsetPath(this.incompleteWidth/2,e,t),r=this.incompleteStartShape,s=AffineTransform.translation(r.position.negative).rotated(-r.direction.angle);return i.transformedBy(s).toSVG("M")+n.transformedBy(s).toSVG("L")},getOffsetPath(t,e,i){if(this.path instanceof LinearPath)return new PiecewisePath([this.path.createOffsetLine(t,e,i)]);const n=new OffsetCurve(this.path,t);return PiecewisePath.cubicBezierFitToCurveSection(n,e,i)},shapeAt(t){const e=this.path.shapeAt(t);return this.pathStart>this.pathEnd&&(e.direction=e.direction.negative,e.derivative=e.derivative.negative),e}}};var a$e=function(){var e=this,i=e._self._c;return i("g",[e.noBG?e._e():i("g",{attrs:{transform:e.incompleteTransform}},[i("path",{attrs:{d:e.incompleteFadePath,fill:"url(#incompleteFade)"}}),e.hasIncompleteSolidPath?i("path",{attrs:{d:e.incompleteSolidPath,fill:"#888"}}):e._e()]),i("g",{attrs:{filter:e.filter}},[i("path",{style:{opacity:e.opacity},attrs:{transform:e.completeTransform,fill:e.fill,stroke:"none",d:e.completePath}})])])},o$e=[],l$e=K(s$e,a$e,o$e,!1,null,"054c785a");const oC=l$e.exports,c$e=""+new URL("../images/celestial-navigation-bg.webp",import.meta.url).href,u$e={name:"CelestialNavigationTab",components:{NodeRing:KN,NodeBackground:zN,NodeOverlay:XN,ProgressConnector:oC},data:()=>({nodeState:null}),computed:{db(){return{...GameDatabase.celestials.navigation,...GameDatabase.celestials.navSigils}},drawOrder(){const t=this.db,e=[];for(const i of Object.keys(t)){const n=t[i];if(n.connector instanceof Array)for(const r of n.connector)e.push({nodeId:i,is:oC,config:r,drawOrder:r.drawOrder||nl.CONNECTORS});else n.connector&&e.push({nodeId:i,is:oC,config:n.connector,drawOrder:n.connector.drawOrder||nl.CONNECTORS});n.node&&(e.push({nodeId:i,is:zN,config:n.node,drawOrder:n.node.bgDrawOrder||nl.NODE_BG}),e.push({nodeId:i,is:KN,config:n.node,drawOrder:n.node.drawOrder||nl.NODES}),e.push({nodeId:i,is:XN,config:n.node,drawOrder:n.node.overlayDrawOrder||nl.NODE_OVERLAYS})),e.sort((r,s)=>r.drawOrder-s.drawOrder)}return e}},created(){this.nodeState=Object.keys(this.db).mapToObject(t=>t,()=>({visible:!1,complete:0}))},mounted(){const t=function(e,i){const n=this.getSizes(),r=n.width-(n.viewBox.x+n.viewBox.width)*n.realZoom,s=-n.viewBox.x*n.realZoom,a=n.height-(n.viewBox.y+n.viewBox.height)*n.realZoom,o=-n.viewBox.y*n.realZoom;return{x:Math.max(r,Math.min(s,i.x)),y:Math.max(a,Math.min(o,i.y))}};this.panZoom=WFe(this.$refs.celestialNavigationSVG,{controlIconsEnabled:!0,dblClickZoomEnabled:!1,center:!1,fit:!1,zoomScaleSensitivity:.3,minZoom:.64,maxZoom:1.5,beforePan:t}),Dp.pan&&this.panZoom.pan(Dp.pan),Dp.zoom&&this.panZoom.zoom(Dp.zoom)},beforeDestroy(){this.panZoom&&(Dp.zoom=this.panZoom.getZoom(),Dp.pan=this.panZoom.getPan(),this.panZoom.destroy(),delete this.panZoom)},methods:{update(){for(const t of Object.keys(this.db))this.nodeState&&(this.nodeState[t].visible=this.db[t].visible(),this.nodeState[t].complete=this.db[t].complete())},vec(t,e){return new Vector(t,e)},nodeVisibility(t){return this.nodeState[t.nodeId].visible?"visible":"hidden"}}},Dp={pan:{x:125,y:125},zoom:.75};var d$e=function(){var e=this,i=e._self._c;return i("div",[i("svg",{ref:"celestialNavigationSVG",staticClass:"c-wide-canvas-element l-celestial-navigation"},[i("defs",[i("linearGradient",{attrs:{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%"}},[i("stop",{attrs:{offset:"0%","stop-color":"#ffff00","stop-opacity":"1"}}),i("stop",{attrs:{offset:"100%","stop-color":"#ff0000","stop-opacity":"1"}})],1),i("linearGradient",{attrs:{id:"incompleteFade",x1:"0",x2:"8",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#888","stop-opacity":"0"}}),i("stop",{attrs:{offset:"8","stop-color":"#888","stop-opacity":"1"}})],1),i("linearGradient",{attrs:{id:"fadeGrad",y2:"0",x2:"1"}},[i("stop",{attrs:{offset:"0.5","stop-color":"white","stop-opacity":"0"}}),i("stop",{attrs:{offset:"1","stop-color":"white","stop-opacity":".5"}})],1),i("linearGradient",{attrs:{id:"gradTeresaEffarig",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#5151ec"}}),i("stop",{attrs:{offset:"1","stop-color":"#d13737"}})],1),i("linearGradient",{attrs:{id:"gradEffarigEnslaved",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#d13737"}}),i("stop",{attrs:{offset:"1","stop-color":"#ffa337"}})],1),i("linearGradient",{attrs:{id:"gradEnslavedV",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#ffa337"}}),i("stop",{attrs:{offset:"1","stop-color":"#ffe066"}})],1),i("linearGradient",{attrs:{id:"gradRaTeresa",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#9063de"}}),i("stop",{attrs:{offset:"1","stop-color":"#5151ec"}})],1),i("linearGradient",{attrs:{id:"gradRaEffarig",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#9063de"}}),i("stop",{attrs:{offset:"1","stop-color":"#d13737"}})],1),i("linearGradient",{attrs:{id:"gradRaEnslaved",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#9063de"}}),i("stop",{attrs:{offset:"1","stop-color":"#ffa337"}})],1),i("linearGradient",{attrs:{id:"gradRaV",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#9063de"}}),i("stop",{attrs:{offset:"1","stop-color":"#ffe066"}})],1),i("linearGradient",{attrs:{id:"gradRaLaitela",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"#9063de"}}),i("stop",{attrs:{offset:"1","stop-color":"white"}})],1),i("linearGradient",{attrs:{id:"gradLaitelaPelle",y2:"0",x2:"1",gradientUnits:"userSpaceOnUse"}},[i("stop",{attrs:{offset:"0","stop-color":"white"}}),i("stop",{attrs:{offset:"1","stop-color":"crimson"}})],1),i("mask",{attrs:{id:"fade",maskContentUnits:"objectBoundingBox"}},[i("rect",{attrs:{width:"1",height:"1",fill:"url(#fadeGrad)"}})]),i("filter",{attrs:{id:"completeGlow",x:"-100%",y:"-100%",width:"300%",height:"300%"}},[i("feGaussianBlur",{attrs:{in:"SourceGraphic",result:"blurred",stdDeviation:"2"}}),i("feMerge",[i("feMergeNode",{attrs:{in:"blurred"}}),i("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1),i("filter",{attrs:{id:"backgroundGlow",x:"-100%",y:"-100%",width:"300%",height:"300%"}},[i("feGaussianBlur",{attrs:{in:"SourceGraphic",result:"blurred",stdDeviation:"4"}}),i("feMerge",[i("feMergeNode",{attrs:{in:"blurred"}}),i("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)],1),i("image",{attrs:{x:"-250",y:"-350",height:"1503",width:"1503",href:c$e}}),e._l(e.drawOrder,function(n,r){return i("g",{key:r,attrs:{visibility:e.nodeVisibility(n)}},[i(n.is,e._b({tag:"component",attrs:{complete:e.nodeState[n.nodeId].complete}},"component",n.config,!1))],1)})],2)])},h$e=[],f$e=K(u$e,d$e,h$e,!1,null,"79d8d106");const p$e=f$e.exports,m$e={name:"ChallengeRecordsList",props:{name:{type:String,required:!0},start:{type:Number,required:!0},times:{type:Array,required:!0}},computed:{timeSum(){return this.times.sum()},completedAllChallenges(){return this.timeSum<Number.MAX_VALUE}},methods:{timeDisplayShort,completionString(t){return t<Number.MAX_VALUE?`record time: ${timeDisplayShort(t)}`:"has not yet been completed"}}};var y$e=function(){var e=this,i=e._self._c;return i("div",[i("br"),e._l(e.times,function(n,r){return i("div",{key:r},[i("span",[e._v(e._s(e.name)+" "+e._s(e.start+r)+" "+e._s(e.completionString(n)))])])}),i("br"),e.completedAllChallenges?i("div",[e._v(" Sum of "+e._s(e.name)+" record times: "+e._s(e.timeDisplayShort(e.timeSum))+" ")]):i("div",[e._v(" You have not completed all "+e._s(e.name)+"s yet. ")])],2)},g$e=[],v$e=K(m$e,y$e,g$e,!1,null,null);const b$e=v$e.exports,_$e={name:"ChallengeRecordsTab",components:{ChallengeRecordsList:b$e},data(){return{infinityChallengesUnlocked:!1,normalChallenges:[],infinityChallenges:[]}},methods:{update(){this.infinityChallengesUnlocked=PlayerProgress.infinityChallengeCompleted()||PlayerProgress.eternityUnlocked(),this.normalChallenges=player.challenge.normal.bestTimes.slice(0),this.infinityChallenges=player.challenge.infinity.bestTimes.slice(0)}}};var E$e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-challenge-records-tab c-stats-tab"},[i("ChallengeRecordsList",{attrs:{start:2,times:e.normalChallenges,name:"Normal Challenge"}}),e.infinityChallengesUnlocked?i("ChallengeRecordsList",{staticClass:"l-challenge-records-tab__infinity_challenges",attrs:{start:1,times:e.infinityChallenges,name:"Infinity Challenge"}}):e._e()],1)},T$e=[],w$e=K(_$e,E$e,T$e,!1,null,null);const C$e=w$e.exports,S$e={name:"CelestialQuoteHistory",props:{celestial:{type:String,required:!0}},data(){return{isShown:!1}},computed:{color(){return this.celestial==="laitela"?"var(--color-laitela--accent)":`var(--color-${this.celestial}--base)`},possessiveForm(){return Celestials[this.celestial].possessiveName}},methods:{update(){this.isShown=Celestials[this.celestial].quotes.all.some(t=>t.isUnlocked)},show(){Quote.showHistory(Celestials[this.celestial].quotes.all)}}};var k$e=function(){var e=this,i=e._self._c;return e.isShown?i("button",{staticClass:"c-celestial-quote-history--button",style:{"--scoped-cel-color":e.color},on:{click:e.show}},[e._v(" "+e._s(e.possessiveForm)+" Quotes ")]):e._e()},A$e=[],R$e=K(S$e,k$e,A$e,!1,null,null);const ip=R$e.exports,I$e={name:"EffarigRunUnlockReward",props:{unlock:{type:Object,required:!0}},data(){return{isUnlocked:!1}},computed:{descriptionLines(){return this.unlock.config.description.split(`
`).map(t=>t.trim())},symbol:()=>GLYPH_SYMBOLS.effarig,isDoomed:()=>Pelle.isDoomed},methods:{update(){this.isUnlocked=this.unlock.isUnlocked}}};var D$e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-effarig-tab__reward"},[i("div",{staticClass:"c-effarig-tab__reward-label"},[e._v(" "+e._s(e.unlock.config.label)+": ")]),e.isUnlocked?i("div",{staticClass:"l-effarig-tab__reward-descriptions"},e._l(e.descriptionLines,function(n,r){return i("div",{key:r+"-effarig-reward-description",staticClass:"c-effarig-tab__reward-description"},[i("span",{staticClass:"c-effarig-tab__reward-symbol"},[e._v(" "+e._s(e.symbol)+" ")]),i("span",{class:{"o-pelle-disabled":e.isDoomed}},[e._v(" "+e._s(n)+" ")])])}),0):i("span",{staticClass:"c-effarig-tab__reward-symbol"},[e._v("?")])])},x$e=[],M$e=K(I$e,D$e,x$e,!1,null,null);const P$e=M$e.exports,O$e={name:"EffarigUnlockButton",components:{DescriptionDisplay:Qs,CostDisplay:mc},props:{unlock:{type:Object,required:!0}},data(){return{isBought:!1,isAvailable:!1}},computed:{config(){return this.unlock.config},classObject(){return{"c-effarig-shop-button":!0,"c-effarig-shop-button--bought":this.isBought,"c-effarig-shop-button--available":this.isAvailable&&!this.isBought}}},methods:{update(){this.isBought=this.unlock.isUnlocked,this.isAvailable=Currency.relicShards.gte(this.unlock.cost)},purchase(){this.unlock.purchase()}}};var N$e=function(){var e=this,i=e._self._c;return i("button",{class:e.classObject,on:{click:e.purchase}},[i("DescriptionDisplay",{attrs:{config:e.config}}),e.isBought?i("div",[e._v(" (Unlocked) ")]):i("CostDisplay",{attrs:{config:e.config,name:"Relic Shard",label:""}})],1)},G$e=[],U$e=K(O$e,N$e,G$e,!1,null,null);const L$e=U$e.exports,B$e={name:"EffarigTab",components:{EffarigUnlockButton:L$e,EffarigRunUnlockReward:P$e,CelestialQuoteHistory:ip},data(){return{relicShards:0,shardRarityBoost:0,shardPower:0,shardsGained:0,currentShardsRate:0,amplification:0,amplifiedShards:0,amplifiedShardsRate:0,runUnlocked:!1,quote:"",isRunning:!1,vIsFlipped:!1,relicShardRarityAlwaysMax:!1}},computed:{shopUnlocks:()=>[EffarigUnlock.adjuster,EffarigUnlock.glyphFilter,EffarigUnlock.setSaves],runUnlock:()=>EffarigUnlock.run,runUnlocks:()=>[EffarigUnlock.infinity,EffarigUnlock.eternity,EffarigUnlock.reality],symbol:()=>GLYPH_SYMBOLS.effarig,runButtonOuterClass(){return{"l-effarig-run-button":!0,"c-effarig-run-button":!0,"c-effarig-run-button--running":this.isRunning,"c-effarig-run-button--not-running":!this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runButtonInnerClass(){return this.isRunning?"c-effarig-run-button__inner--running":"c-effarig-run-button__inner--not-running"},runDescription(){return`${GameDatabase.celestials.descriptions[1].effects()}

      ${GameDatabase.celestials.descriptions[1].description()}`},showShardsRate(){return this.currentShardsRate},isDoomed:()=>Pelle.isDoomed},watch:{isRunning(){this.$recompute("runDescription")}},methods:{update(){this.relicShards=Currency.relicShards.value,this.shardRarityBoost=Effarig.maxRarityBoost/100,this.shardPower=Ra.unlocks.maxGlyphRarityAndShardSacrificeBoost.effectOrDefault(1),this.shardsGained=Effarig.shardsGained,this.currentShardsRate=this.shardsGained/Time.thisRealityRealTime.totalMinutes,this.amplification=simulatedRealityCount(!1),this.amplifiedShards=this.shardsGained*(1+this.amplification),this.amplifiedShardsRate=this.amplifiedShards/Time.thisRealityRealTime.totalMinutes,this.quote=Effarig.quote,this.runUnlocked=EffarigUnlock.run.isUnlocked,this.isRunning=Effarig.isRunning,this.vIsFlipped=V.isFlipped,this.relicShardRarityAlwaysMax=Ra.unlocks.extraGlyphChoicesAndRelicShardRarityAlwaysMax.canBeApplied},startRun(){this.isDoomed||Modal.celestials.show({name:"Effarig's",number:1})},createCursedGlyph(){Glyphs.giveCursedGlyph()}}};var F$e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-teresa-celestial-tab"},[i("CelestialQuoteHistory",{attrs:{celestial:"effarig"}}),i("div",{staticClass:"l-effarig-shop-and-run"},[i("div",{staticClass:"l-effarig-shop"},[i("div",{staticClass:"c-effarig-relics"},[e._v(" You have "+e._s(e.quantify("Relic Shard",e.relicShards,2,0))+". "),i("br"),e.relicShardRarityAlwaysMax?i("span",[e._v(" The rarity of new Glyphs is being increased by +"+e._s(e.formatPercents(e.shardRarityBoost,2))+". ")]):i("span",[e._v(" Each new Glyph will have its rarity increased "),i("br"),e._v(" by a random value between +"+e._s(e.formatPercents(0))+" and +"+e._s(e.formatPercents(e.shardRarityBoost,2))+". ")]),e.shardPower>1?i("span",[i("br"),e._v(" Glyph Sacrifice gain is also being raised to "+e._s(e.formatPow(e.shardPower,0,2))+". ")]):e._e()]),i("div",{staticClass:"c-effarig-relic-description"},[e._v(" You will gain "+e._s(e.quantify("Relic Shard",e.shardsGained,2))+" next Reality ("+e._s(e.format(e.currentShardsRate,2))+"/min). "),e.amplification!==0?i("span",[i("br"),e._v(" Due to amplification of your current Reality, "),i("br"),e._v(" you will actually gain a total of "+e._s(e.quantify("Relic Shard",e.amplifiedShards,2))+" ("+e._s(e.format(e.amplifiedShardsRate,2))+"/min). ")]):e._e()]),e._m(0),e._l(e.shopUnlocks,function(n,r){return i("EffarigUnlockButton",{key:r,attrs:{unlock:n}})}),e.runUnlocked?e._e():i("EffarigUnlockButton",{attrs:{unlock:e.runUnlock}}),e.vIsFlipped?i("button",{staticClass:"c-effarig-shop-button c-effarig-shop-button--available",on:{click:e.createCursedGlyph}},[e._v(" Get a Cursed Glyph... ")]):e._e()],2),e.runUnlocked?i("div",{staticClass:"l-effarig-run"},[i("div",{staticClass:"c-effarig-run-description"},[i("span",{class:{"o-pelle-disabled":e.isDoomed}},[e._v(" Enter Effarig's Reality. ")])]),i("div",{class:e.runButtonOuterClass,on:{click:e.startRun}},[i("div",{class:e.runButtonInnerClass,attrs:{"button-symbol":e.symbol}},[e._v(" "+e._s(e.symbol)+" ")])]),i("div",{staticClass:"c-effarig-run-description"},[e._v(" "+e._s(e.runDescription)+" ")]),e._l(e.runUnlocks,function(n,r){return i("EffarigRunUnlockReward",{key:r,attrs:{unlock:n}})})],2):e._e()])],1)},$$e=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-effarig-relic-description"},[e("br"),t._v(" More Eternity Points slightly increases Relic Shards "),e("br"),t._v(" gained. More distinct Glyph effects significantly "),e("br"),t._v(" increases Relic Shards gained. ")])}],H$e=K(B$e,F$e,$$e,!1,null,"b4070ea8");const V$e=H$e.exports,q$e={name:"EnslavedTab",components:{CelestialQuoteHistory:ip,PrimaryButton:yt,PrimaryToggleButton:cn,BlackHoleChargingSliders:o4},data:()=>({isStoringBlackHole:!1,isStoringReal:!1,autoStoreReal:!1,offlineEnabled:!1,hasAutoRelease:!1,isRunning:!1,completed:!1,storedBlackHole:0,storedReal:0,storedRealEffiency:0,storedRealCap:0,autoRelease:!1,autoReleaseSpeed:0,unlocks:[],buyableUnlocks:[],quote:"",currentSpeedUp:0,hintsUnlocked:!1,canModifyGameTimeStorage:!1,canChangeStoreTime:!1,canChangeStoreRealTime:!1,canDischarge:!1,canAutoRelease:!1,hasNoCharge:!0,hasReachedCurrentCap:!1}),computed:{storedRealEfficiencyDesc(){return formatPercents(this.storedRealEffiency)},storedRealCapDesc(){return timeDisplayShort(this.storedRealCap)},unlocksInfo(){return ENSLAVED_UNLOCKS},nerfedBlackHoleTime(){return Enslaved.storedTimeInsideEnslaved(this.storedBlackHole)},realityTitle(){return this.isRunning?"You are inside The Nameless Ones' Reality":"Start The Nameless Ones' Reality"},runButtonClassObject(){return{"c-enslaved-run-button__icon":!0,"c-enslaved-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runDescription(){return GameDatabase.celestials.descriptions[2].effects().split(`
`)},realTimeButtonText(){return this.offlineEnabled?this.autoStoreReal?"Offline time stored":"Offline time used for production":"Offline Progress is disabled"},enslavedSymbol:()=>Enslaved.symbol,isDoomed:()=>Pelle.isDoomed,storeGameTimeClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":this.canModifyGameTimeStorage,"o-enslaved-mechanic-button--storing-time":this.isStoringBlackHole,"l-fixed-setting":!this.canModifyGameTimeStorage,"o-pelle-disabled":this.isDoomed}},storeRealTimeClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":!this.isDoomed,"o-enslaved-mechanic-button--storing-time":this.isStoringReal,"l-fixed-setting":!this.canChangeStoreRealTime,"o-pelle-disabled":this.isDoomed}},dischargeClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":!this.isDoomed,"l-fixed-setting":!this.canDischarge||this.hasNoCharge,"o-pelle-disabled":this.isDoomed}},doomedDisabledClass(){return{"o-pelle-disabled":this.isDoomed}},mechanicButtonClass(){return{"o-enslaved-mechanic-button":!0,"o-enslaved-mechanic-button--clickable":!this.isDoomed}}},watch:{autoRelease(t){player.celestials.enslaved.isAutoReleasing=t}},methods:{update(){this.isStoringBlackHole=Enslaved.isStoringGameTime,this.storedBlackHole=player.celestials.enslaved.stored,this.isStoringReal=Enslaved.isStoringRealTime,this.autoStoreReal=player.celestials.enslaved.autoStoreReal,this.offlineEnabled=player.options.offlineProgress,this.hasAutoRelease=Ra.unlocks.autoPulseTime.canBeApplied,this.isRunning=Enslaved.isRunning,this.completed=Enslaved.isCompleted&&!this.isDoomed,this.storedReal=player.celestials.enslaved.storedReal,this.storedRealEffiency=Enslaved.storedRealTimeEfficiency,this.storedRealCap=Enslaved.storedRealTimeCap,this.unlocks=Array.from(player.celestials.enslaved.unlocks),this.buyableUnlocks=Object.values(ENSLAVED_UNLOCKS).map(t=>Enslaved.canBuy(t)),this.quote=Enslaved.quote,this.autoRelease=player.celestials.enslaved.isAutoReleasing,this.autoReleaseSpeed=Enslaved.isAutoReleasing?Enslaved.autoReleaseSpeed:0,this.currentSpeedUp=Enslaved.currentBlackHoleStoreAmountPerMs,this.hintsUnlocked=EnslavedProgress.hintsUnlocked.hasProgress,this.canModifyGameTimeStorage=Enslaved.canModifyGameTimeStorage,this.canChangeStoreTime=Enslaved.canModifyGameTimeStorage,this.canChangeStoreRealTime=Enslaved.canModifyRealTimeStorage,this.canDischarge=Enslaved.canRelease(!1),this.canAutoRelease=Enslaved.canRelease(!0),this.hasNoCharge=player.celestials.enslaved.stored===0,this.hasReachedCurrentCap=this.storedReal===this.storedRealCap},toggleStoreBlackHole(){Enslaved.toggleStoreBlackHole()},toggleStoreReal(){Enslaved.toggleStoreReal()},toggleAutoStoreReal(){this.offlineEnabled&&Enslaved.toggleAutoStoreReal()},useStored(){Enslaved.useStoredTime(!1)},timeDisplayShort(t){return timeDisplayShort(t)},timeUntilBuy(t){return Math.max((t-this.storedBlackHole)/this.currentSpeedUp,0)},buyUnlock(t){Enslaved.buyUnlock(t)},startRun(){this.isDoomed||Modal.celestials.show({name:"The Nameless Ones'",number:2})},hasUnlock(t){return Enslaved.has(t)},canBuyUnlock(t){return this.buyableUnlocks[t.id]},unlockClassObject(t){return{"o-enslaved-shop-button--bought":this.hasUnlock(t),"o-enslaved-shop-button--available":this.canBuyUnlock(t)}},glitchStyle(t){const e=.5555555555555556,i=5,n=(t-13)*e+(Math.random()*2-1)*.85,r=(Math.random()*2-1)*i,s=(Math.pow(Math.random(),1.5)+.25)*3*i;return{transform:`translate(${n}rem, ${r}rem)`,height:`${s}rem`}}}};var Y$e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-enslaved-celestial-tab"},[i("CelestialQuoteHistory",{attrs:{celestial:"enslaved"}}),e.hasAutoRelease&&e.canAutoRelease?i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{label:"Pulse Black Hole:"},model:{value:e.autoRelease,callback:function(n){e.autoRelease=n},expression:"autoRelease"}})],1):e._e(),i("div",{staticClass:"l-enslaved-celestial-tab--inner"},[i("div",{staticClass:"l-enslaved-run-container"},[e.hasUnlock(e.unlocksInfo.RUN)?i("div",[i("div",{staticClass:"c-enslaved-run-button"},[i("div",{staticClass:"c-enslaved-run-button__title",class:e.doomedDisabledClass},[e._v(" "+e._s(e.realityTitle)+" ")]),e.completed?i("div",[i("b",[e._v("(Completed)")])]):e._e(),i("div",{class:e.runButtonClassObject,on:{click:e.startRun}},[i("div",{staticClass:"c-enslaved-run-button__icon__sigil"},[e._v(" "+e._s(e.enslavedSymbol)+" ")]),e._l(e.isRunning?25:0,function(n){return i("div",{key:n,staticClass:"c-enslaved-run-button__icon__glitch",style:e.glitchStyle(n)})})],2),e._l(e.runDescription,function(n){return i("div",{key:n,staticClass:"c-enslaved-run-description-line"},[e._v(" "+e._s(n)+" ")])}),i("b",[e._v("Reward: Unlock Tesseracts, which let you increase Infinity Dimension caps (see Infinity Dimension tab)")])],2)]):e._e()]),i("div",{staticClass:"l-enslaved-upgrades-column"},[e.hintsUnlocked?i("PrimaryButton",{staticClass:"o-primary-btn",attrs:{onclick:"Modal.enslavedHints.show()"}},[e._v(" Examine the Reality more closely... ")]):e._e(),i("div",{staticClass:"l-enslaved-top-container"},[i("div",{staticClass:"l-enslaved-top-container__half"},[e._v(" While charging, game speed multipliers are "+e._s(e.hasAutoRelease?"decreased":"disabled")+", and the lost speed is converted into stored game time. Discharging the Black Hole allows you to skip forward in time. Stored game time is also used to unlock certain upgrades. "),i("button",{class:e.storeGameTimeClass,on:{click:e.toggleStoreBlackHole}},[i("div",{staticClass:"o-enslaved-stored-time",class:e.doomedDisabledClass},[e._v(" "+e._s(e.timeDisplayShort(e.storedBlackHole))+" ")]),i("div",[e._v(" "+e._s(e.isStoringBlackHole?"Charging Black Hole":"Charge Black Hole")+" ")])]),i("button",{class:e.dischargeClass,on:{click:e.useStored}},[i("span",[e._v("Discharge Black Hole")]),e.isRunning?i("p",[e._v(" "+e._s(e.timeDisplayShort(e.nerfedBlackHoleTime))+" in this Reality ")]):e._e()])]),i("div",{staticClass:"l-enslaved-top-container__half"},[e._v(" Storing real time completely halts all production, setting game speed to "+e._s(e.formatInt(0))+'. You can use stored real time to "amplify" a Reality, simulating repeated runs of it. Amplified Realities give all the rewards that normal Realities do. '),i("button",{class:[e.storeRealTimeClass,{"l-fixed-setting":e.hasReachedCurrentCap}],on:{click:e.toggleStoreReal}},[i("div",{staticClass:"o-enslaved-stored-time"},[e._v(" "+e._s(e.timeDisplayShort(e.storedReal))+" ")]),i("div",[e._v(" "+e._s(e.isStoringReal?"Storing real time":"Store real time")+" ")])]),i("button",{class:[e.mechanicButtonClass,{"o-enslaved-mechanic-button--storing-time":e.autoStoreReal&&e.offlineEnabled,"l-fixed-setting":!e.canChangeStoreRealTime||!e.offlineEnabled},e.doomedDisabledClass],on:{click:e.toggleAutoStoreReal}},[e._v(" "+e._s(e.realTimeButtonText)+" ")]),i("div",[e._v(" Efficiency: "+e._s(e.storedRealEfficiencyDesc)+" ")]),i("div",[e._v(" Maximum stored real time: "+e._s(e.storedRealCapDesc)+" ")])])]),i("BlackHoleChargingSliders"),i("br"),i("div",{staticClass:"l-enslaved-shop-container"},e._l(e.unlocksInfo,function(n){return i("button",{key:n.id,staticClass:"o-enslaved-shop-button",class:e.unlockClassObject(n),on:{click:function(r){return e.buyUnlock(n)}}},[e._v(" "+e._s(n.description())+" "),e.hasUnlock(n)?e._e():i("div",[e._v(" Costs: "+e._s(e.timeDisplayShort(n.price))+" ")]),e.isStoringBlackHole&&!e.hasUnlock(n)&&e.timeUntilBuy(n.price)>0?i("span",[e._v(" Time to obtain: "+e._s(e.timeDisplayShort(e.timeUntilBuy(n.price)))+" ")]):e._e()])}),0)],1)])],1)},W$e=[],j$e=K(q$e,Y$e,W$e,!1,null,"4c97a911");const z$e=j$e.exports,X$e={name:"ChallengeGridCell",props:{challenge:{type:Object,required:!0},isChallengeVisible:{type:Function,required:!0}},data(){return{isVisible:!1}},methods:{update(){this.isVisible=this.isChallengeVisible(this.challenge)}}};var K$e=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],staticClass:"l-challenge-grid__cell"},[e._t("default")],2)},Z$e=[],Q$e=K(X$e,K$e,Z$e,!1,null,"2fa21b88");const J$e=Q$e.exports,e3e={name:"ChallengeGrid",components:{ChallengeGridCell:J$e},props:{challenges:{type:Array,required:!0},isChallengeVisible:{type:Function,required:!1,default:()=>!0}}};var t3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-challenge-grid"},e._l(e.challenges,function(n){return i("ChallengeGridCell",{key:n.id,attrs:{challenge:n,"is-challenge-visible":e.isChallengeVisible}},[e._t("default",null,{challenge:n})],2)}),1)},i3e=[],n3e=K(e3e,t3e,i3e,!1,null,"28459f46");const WR=n3e.exports,r3e={name:"ChallengeTabHeader",components:{PrimaryButton:yt,PrimaryToggleButton:cn},data(){return{retryChallenge:!1,isInChallenge:!1,isShowAllVisible:!1,isAutoECVisible:!1,showAllChallenges:!1,autoEC:!1}},watch:{retryChallenge(t){player.options.retryChallenge=t},autoEC(t){player.reality.autoEC=t},showAllChallenges(t){player.options.showAllChallenges=t}},methods:{update(){this.retryChallenge=player.options.retryChallenge,this.showAllChallenges=player.options.showAllChallenges,this.isInChallenge=Player.isInAnyChallenge,this.isShowAllVisible=PlayerProgress.eternityUnlocked(),this.isAutoECVisible=Perk.autocompleteEC1.canBeApplied,this.autoEC=player.reality.autoEC},restartChallenge(){const t=Player.anyChallenge;Player.isInAnyChallenge&&(t.exit(!0),t.start())},exitChallenge(){const t=Player.anyChallenge;Player.isInAnyChallenge&&t.exit(!1)}}};var s3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-challenges-tab__header"},[i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{label:"Automatically retry challenges:"},model:{value:e.retryChallenge,callback:function(n){e.retryChallenge=n},expression:"retryChallenge"}}),e.isShowAllVisible?i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{label:"Show all known challenges:"},model:{value:e.showAllChallenges,callback:function(n){e.showAllChallenges=n},expression:"showAllChallenges"}}):e._e(),e.isAutoECVisible?i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{label:"Auto Eternity Challenges:"},model:{value:e.autoEC,callback:function(n){e.autoEC=n},expression:"autoEC"}}):e._e(),e.isInChallenge?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.restartChallenge}},[e._v(" Restart Challenge ")]):e._e(),e.isInChallenge?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.exitChallenge}},[e._v(" Exit Challenge ")]):e._e()],1)])},a3e=[],o3e=K(r3e,s3e,a3e,!1,null,"2687280b");const jR=o3e.exports,l3e={name:"EternityChallengeBoxWrapper",components:{HintText:gc},props:{name:{type:String,required:!0},isUnlocked:{type:Boolean,required:!0},isRunning:{type:Boolean,required:!0},isCompleted:{type:Boolean,required:!0},canBeUnlocked:{type:Boolean,required:!0},completionCount:{type:Number,required:!0},overrideLabel:{type:String,required:!1,default:""}},data(){return{challengeId:Number}},computed:{buttonClassObject(){const t=this.isCompleted&&!this.isUnlocked,e=this.isCompleted&&this.isUnlocked&&!this.isRunning,i=this.isUnlocked||this.canBeUnlocked,n=!this.isCompleted&&!this.isUnlocked&&!this.isRunning&&!this.canBeUnlocked,r=!this.isRunning&&(!this.isCompleted&&this.canBeUnlocked||this.isUnlocked);return{"o-challenge-btn":!0,"o-challenge-btn--running":this.isRunning,"o-challenge-btn--completed":t,"o-challenge-btn--redo":e,"o-challenge-btn--unlocked":!t&&i,"o-challenge-btn--locked":n,"o-challenge-btn--unenterable":!r}},completionOverlay(){return{position:"absolute",width:`${15*Math.clampMax(this.completionCount/5,1)}rem`,height:"3rem",background:"var(--color-good)",opacity:this.completionCount>=5?0:.3,"border-top-left-radius":"var(--var-border-radius, 1rem)","border-bottom-left-radius":"var(--var-border-radius, 1rem)","pointer-events":"none"}},buttonText(){return this.overrideLabel.length?this.overrideLabel:this.isRunning?"Running":this.isCompleted?this.isUnlocked?"Redo":"Completed":this.isUnlocked?"Start":this.canBeUnlocked?"Unlock":"Locked"}}};var c3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-challenge-box l-challenge-box c-challenge-box--eternity"},[i("HintText",{staticClass:"l-hint-text--challenge",attrs:{type:"challenges"}},[e._v(" "+e._s(e.name)+" ")]),e._t("top"),i("div",{staticClass:"l-challenge-box__fill"}),i("div",[i("div",{style:e.completionOverlay}),i("button",{class:e.buttonClassObject,on:{click:function(n){return e.$emit("start")}}},[e._v(" "+e._s(e.buttonText)+" ")])]),e._t("bottom")],2)},u3e=[],d3e=K(l3e,c3e,u3e,!1,null,"62be9714");const h3e=d3e.exports,f3e={name:"EternityChallengeBox",components:{EternityChallengeBoxWrapper:h3e,DescriptionDisplay:Qs,EffectDisplay:lo},props:{challenge:{type:Object,required:!0}},data(){return{isUnlocked:!1,isRunning:!1,isCompleted:!1,canBeUnlocked:!1,completions:0,showGoalSpan:!1,lastGoal:""}},computed:{config(){return this.challenge.config},goalDisplay(){const t=this.config;let e=`Goal: ${this.goalAtCompletions(this.completions)} IP`;return t.restriction&&(e+=` ${t.formatRestriction(t.restriction(this.completions))}`),e},firstGoal(){return this.goalAtCompletions(0)},currentRewardConfig(){const t=this.challenge,e=this.config.reward;return{effect:()=>e.effect(t.completions),formatEffect:e.formatEffect,cap:e.cap}},nextRewardConfig(){const t=this.challenge,e=this.config.reward;return{effect:()=>e.effect(t.completions+1),formatEffect:e.formatEffect,cap:e.cap}},name(){return`EC${this.challenge.id}`}},methods:{update(){const t=this.challenge;this.isUnlocked=t.isUnlocked,this.isRunning=t.isRunning,this.isCompleted=t.isFullyCompleted,this.completions=t.completions,this.showGoalSpan=PlayerProgress.realityUnlocked(),this.canBeUnlocked=TimeStudy.eternityChallenge(t.id).canBeBought,this.lastGoal=Enslaved.isRunning&&this.challenge.id===1?Xn.wordCycle(this.config.scrambleText.map(e=>format(e))):this.goalAtCompletions(this.challenge.maxCompletions-1)},start(){this.canBeUnlocked?TimeStudy.eternityChallenge(this.challenge.id).purchase():this.challenge.requestStart()},goalAtCompletions(t){return format(this.challenge.goalAtCompletions(t),2,1)}}};var p3e=function(){var e=this,i=e._self._c;return i("EternityChallengeBoxWrapper",{attrs:{name:e.name,"is-unlocked":e.isUnlocked,"is-running":e.isRunning,"is-completed":e.isCompleted,"can-be-unlocked":e.canBeUnlocked,"completion-count":e.completions},on:{start:e.start},scopedSlots:e._u([{key:"top",fn:function(){return[i("DescriptionDisplay",{attrs:{config:e.config}})]},proxy:!0},{key:"bottom",fn:function(){return[i("div",{style:{visiblity:e.completions<5?"visible":"hidden"}},[i("div",[e._v(" Completed "+e._s(e.quantifyInt("time",e.completions))+" ")]),e._v(" "+e._s(e.goalDisplay)+" ")]),e.showGoalSpan?i("span",[e._v(" Goal Span: "+e._s(e.firstGoal)+" IP - "+e._s(e.lastGoal)+" IP ")]):e._e(),i("span",[e._v(" Reward: "),i("DescriptionDisplay",{attrs:{config:e.config.reward,length:55,name:"c-challenge-box__reward-description"}})],1),i("span",[e.completions>0?i("EffectDisplay",{attrs:{config:e.currentRewardConfig}}):e._e(),e.completions>0&&e.completions<5?i("span",[e._v("|")]):e._e(),e.completions<5?i("EffectDisplay",{attrs:{config:e.nextRewardConfig,label:"Next","ignore-capped":!0}}):e._e()],1)]},proxy:!0}])})},m3e=[],y3e=K(f3e,p3e,m3e,!1,null,"050da1f3");const g3e=y3e.exports,v3e={name:"EternityChallengesTab",components:{ChallengeTabHeader:jR,ChallengeGrid:WR,EternityChallengeBox:g3e},data(){return{unlockedCount:0,showAllChallenges:!1,autoEC:!1,isAutoECVisible:!1,hasUpgradeLock:!1,remainingECTiers:0,untilNextEC:TimeSpan.zero,untilAllEC:TimeSpan.zero,hasECR:!1}},computed:{challenges(){return EternityChallenges.all},upgradeLockNameText(){return RealityUpgrade(12).isLockingMechanics?RealityUpgrade(12).name:ImaginaryUpgrade(15).name},nextECText(){return this.untilNextEC.totalMilliseconds===0&&!this.autoEC?"Immediately upon unpausing":`${this.untilNextEC} (real time)`},allECText(){return this.untilAllEC.totalMilliseconds===0&&!this.autoEC?"Immediately upon unpausing":`After ${this.untilAllEC} (real time)`}},methods:{update(){this.showAllChallenges=player.options.showAllChallenges,this.unlockedCount=EternityChallenges.all.filter(this.isChallengeVisible).length,this.isAutoECVisible=Perk.autocompleteEC1.canBeApplied,this.autoEC=player.reality.autoEC;const t=TimeDimension(1).amount.gt(0);this.hasUpgradeLock=RealityUpgrade(12).isLockingMechanics||ImaginaryUpgrade(15).isLockingMechanics&&t&&!Array.range(1,6).some(i=>!EternityChallenge(i).isFullyCompleted);const e=EternityChallenges.remainingCompletions;if(this.remainingECTiers=e,e!==0){const i=EternityChallenges.autoComplete.interval,n=Math.max(i-player.reality.lastAutoEC,0);this.untilNextEC.setFrom(n),this.untilAllEC.setFrom(n+i*(e-1))}this.hasECR=Perk.studyECRequirement.isBought},isChallengeVisible(t){return t.completions>0||t.isUnlocked||t.hasUnlocked||this.showAllChallenges&&PlayerProgress.realityUnlocked()}}};var b3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-challenges-tab"},[i("ChallengeTabHeader"),e.isAutoECVisible?i("div",[e._v(" Eternity Challenges are automatically completed sequentially, requiring all previous Eternity Challenges to be fully completed before any progress is made. ")]):e._e(),e.isAutoECVisible&&e.remainingECTiers>0?i("div",{staticClass:"c-challenges-tab__auto-ec-info l-challenges-tab__auto-ec-info"},[i("div",{staticClass:"l-challenges-tab__auto-ec-timers"},[e.hasUpgradeLock?i("span",{staticClass:"l-emphasis"},[e._v(' Auto EC is currently disabled because of the "'+e._s(e.upgradeLockNameText)+'" upgrade requirement lock. ')]):e._e(),e.remainingECTiers>0?i("span",[e._v(" Next Auto Eternity Challenge completion: "+e._s(e.nextECText)+" ")]):e._e(),i("span",[e._v(" All Auto Eternity Challenge completions: "+e._s(e.allECText)+" ")]),i("br")])]):e._e(),i("div",[e._v(" Complete Eternity Challenges again for a bigger reward, maximum of "+e._s(e.formatInt(5))+" times."),i("br"),e._v(" The rewards are applied permanently with no need to have the respective Eternity Challenge Time Study purchased. ")]),e.hasECR?e._e():i("div",[e._v(" When you respec out of an unlocked Eternity Challenge, you don't need to redo the secondary requirement"),i("br"),e._v(" in order to unlock it again until you complete it; only the Time Theorems are required. ")]),e.unlockedCount!==12?i("div",[e._v(" You have seen "+e._s(e.formatInt(e.unlockedCount))+" out of "+e._s(e.formatInt(12))+" Eternity Challenges. ")]):i("div",[e._v(" You have seen all "+e._s(e.formatInt(12))+" Eternity Challenges. ")]),i("ChallengeGrid",{attrs:{challenges:e.challenges,"is-challenge-visible":e.isChallengeVisible},scopedSlots:e._u([{key:"default",fn:function({challenge:n}){return[i("EternityChallengeBox",{attrs:{challenge:n}})]}}])})],1)},_3e=[],E3e=K(v3e,b3e,_3e,!1,null,"59cd9ed3");const T3e=E3e.exports,w3e={name:"EternityMilestoneButton",props:{getMilestone:{type:Function,required:!0}},data(){return{isReached:!1,isLocked:!1}},computed:{milestone(){return this.getMilestone()},config(){return this.milestone.config},eternities(){return this.config.eternities},reward(){const t=this.config.reward;return typeof t=="function"?t():t},rewardClassObject(){return{"o-eternity-milestone__reward":!0,"o-eternity-milestone__reward--locked":!this.isReached,"o-eternity-milestone__reward--reached":this.isReached,"o-eternity-milestone__reward--small-font":this.reward.length>80}},activeCondition(){return this.config.activeCondition?this.config.activeCondition():null},isDoomed:()=>Pelle.isDoomed,isUseless(){return this.isDoomed&&this.config.pelleUseless}},methods:{update(){this.isLocked=this.isDoomed&&this.config.givenByPelle!==void 0,this.isReached=this.milestone.isReached}}};var C3e=function(){var e=this,i=e._self._c;return e.config.invisible?e._e():i("div",{staticClass:"l-eternity-milestone"},[i("span",{staticClass:"o-eternity-milestone__goal"},[e._v(" "+e._s(e.quantifyInt("Eternity",e.eternities))+": ")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.activeCondition,expression:"activeCondition"}],class:e.rewardClassObject},[i("span",{class:{"o-pelle-disabled":e.isUseless}},[e._v(" "+e._s(e.reward)+" "+e._s(e.isLocked&&!e.isReached?"(Locked behind a Pelle Upgrade)":"")+" ")])])])},S3e=[],k3e=K(w3e,C3e,S3e,!1,null,"49bebf7b");const A3e=k3e.exports,R3e={name:"EternityMilestonesTab",components:{EternityMilestoneButton:A3e},data(){return{eternityCount:new Decimal}},computed:{milestones(){return Object.values(GameDatabase.eternity.milestones).sort((t,e)=>t.eternities-e.eternities).map(t=>new EternityMilestoneState(t))},rows(){return Math.ceil(this.milestones.length/3)}},methods:{update(){this.eternityCount.copyFrom(Currency.eternities.value.floor())},getMilestone(t,e){return()=>this.milestones[(t-1)*3+e-1]}}};var I3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-eternity-milestone-grid"},[i("div",[e._v("You have "+e._s(e.quantify("Eternity",e.eternityCount,3))+".")]),i("div",[e._v(" Offline generation milestones are only active under certain conditions, mouse-over to see these conditions. ")]),e._l(e.rows,function(n){return i("div",{key:n,staticClass:"l-eternity-milestone-grid__row"},e._l(3,function(r){return i("EternityMilestoneButton",{key:n*3+r,staticClass:"l-eternity-milestone-grid__cell",attrs:{"get-milestone":e.getMilestone(n,r)}})}),1)})],2)},D3e=[],x3e=K(R3e,I3e,D3e,!1,null,"c163bf5c");const M3e=x3e.exports,P3e={name:"EPMultiplierButton",components:{PrimaryButton:yt,PrimaryToggleButton:cn},data(){return{isAutobuyerActive:!1,isAutoUnlocked:!1,isAffordable:!1,multiplier:new Decimal,cost:new Decimal}},computed:{upgrade(){return EternityUpgrade.epMult},autobuyer(){return Autobuyer.epMult},classObject(){return this.isDoomed?{"o-eternity-upgrade":!0,"o-eternity-upgrade--useless":!this.isAffordable,"o-pelle-disabled-pointer":!0,"o-pelle-disabled":!0}:{"o-eternity-upgrade":!0,"o-eternity-upgrade--available":this.isAffordable,"o-eternity-upgrade--unavailable":!this.isAffordable}},isDoomed:()=>Pelle.isDoomed},watch:{isAutobuyerActive(t){Autobuyer.epMult.isActive=t}},methods:{update(){const t=this.upgrade;this.isAutoUnlocked=this.autobuyer.isUnlocked,this.isAutobuyerActive=this.autobuyer.isActive,this.multiplier.copyFrom(t.effectValue),this.cost.copyFrom(t.cost),this.isAffordable=t.isAffordable},purchaseUpgrade(){RealityUpgrade(15).isLockingMechanics?RealityUpgrade(15).tryShowWarningModal():this.upgrade.purchase()}}};var O3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group l-margin-top"},[i("button",{class:e.classObject,on:{click:e.purchaseUpgrade}},[i("div",{class:{"o-pelle-disabled":e.isDoomed}},[e._v(" Multiply Eternity Points from all sources by "+e._s(e.formatX(5))+" "),i("br"),e._v(" Currently: "+e._s(e.formatX(e.multiplier,2,0))+" ")]),i("br"),e._v(" Cost: "+e._s(e.quantify("Eternity Point",e.cost,2,0))+" ")]),i("PrimaryButton",{staticClass:"l--spoon-btn-group__little-spoon o-primary-btn--small-spoon",on:{click:function(n){return e.upgrade.buyMax(!1)}}},[e._v(" Max Eternity Point mult ")]),e.isAutoUnlocked?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon o-primary-btn--small-spoon",attrs:{label:"Autobuy EP mult"},model:{value:e.isAutobuyerActive,callback:function(n){e.isAutobuyerActive=n},expression:"isAutobuyerActive"}}):e._e()],1)},N3e=[],G3e=K(P3e,O3e,N3e,!1,null,"22f2076c");const U3e=G3e.exports,L3e={name:"EternityUpgradeButton",components:{DescriptionDisplay:Qs,EffectDisplay:lo,CostDisplay:mc},props:{upgrade:{type:Object,required:!0}},data(){return{isBought:!1,isAffordable:!1}},computed:{classObject(){return{"o-eternity-upgrade":!0,"o-eternity-upgrade--bought":this.isBought,"o-eternity-upgrade--available":!this.isBought&&this.isAffordable,"o-eternity-upgrade--unavailable":!this.isBought&&!this.isAffordable}},hasEU2(){return Perk.autounlockEU2.canBeApplied}},methods:{update(){const t=this.upgrade;this.isBought=t.isBought,this.isAffordable=t.isAffordable}}};var B3e=function(){var e=this,i=e._self._c;return i("button",{class:e.classObject,on:{click:function(n){return e.upgrade.purchase()}}},[i("DescriptionDisplay",{attrs:{config:e.upgrade.config}}),i("EffectDisplay",{attrs:{br:"",config:e.upgrade.config}}),!e.isBought&&e.hasEU2?i("div",[e._v(" Auto: "+e._s(e.format(e.upgrade.config.cost/1e10))+" Eternity Points ")]):e.isBought?e._e():i("CostDisplay",{attrs:{br:"",config:e.upgrade.config,name:"Eternity Point"}})],1)},F3e=[],$3e=K(L3e,B3e,F3e,!1,null,"4a2f2061");const H3e=$3e.exports,V3e={name:"EternityUpgradesTab",components:{EternityUpgradeButton:H3e,EPMultiplierButton:U3e},computed:{grid(){return[[EternityUpgrade.idMultEP,EternityUpgrade.idMultEternities,EternityUpgrade.idMultICRecords],[EternityUpgrade.tdMultAchs,EternityUpgrade.tdMultTheorems,EternityUpgrade.tdMultRealTime]]},costIncreases:()=>EternityUpgrade.epMult.costIncreaseThresholds.map(t=>new Decimal(t))},methods:{formatPostBreak}};var q3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-eternity-upgrades-grid"},[e._l(e.grid,function(n,r){return i("div",{key:r,staticClass:"l-eternity-upgrades-grid__row"},e._l(n,function(s){return i("EternityUpgradeButton",{key:s.id,staticClass:"l-eternity-upgrades-grid__cell",attrs:{upgrade:s}})}),1)}),i("EPMultiplierButton"),i("div",[e._v(" The cost for the "+e._s(e.formatX(5))+" multiplier jumps at "+e._s(e.format(e.costIncreases[0]))+", "+e._s(e.formatPostBreak(e.costIncreases[1],2))+", and "+e._s(e.formatPostBreak(e.costIncreases[2]))+" Eternity Points. "),i("br"),e._v(" The cost increases super-exponentially after "+e._s(e.formatPostBreak(e.costIncreases[3]))+" Eternity Points. ")])],2)},Y3e=[],W3e=K(V3e,q3e,Y3e,!1,null,"cda397b4");const j3e=W3e.exports,z3e={name:"GlyphSetRecordsTab",components:{GlyphSetPreview:Zf},data(){return{recordGlyphInfo:[]}},methods:{update(){const t=player.records.bestReality,e=8-Laitela.difficultyTier;this.recordGlyphInfo=[[!0,Glyphs.copyForRecords(t.RMSet),"Best Reality Machines gained",`${format(t.RM,2,2)} RM`],[!0,Glyphs.copyForRecords(t.RMminSet),"Best Reality Machines per minute",`${format(t.RMmin,2,2)} RM/min`],[!0,Glyphs.copyForRecords(t.glyphLevelSet),"Best Glyph Level",`Level ${formatInt(t.glyphLevel)}`],[!0,Glyphs.copyForRecords(t.bestEPSet),"Highest Eternity Points",`${format(t.bestEP,2,2)} EP`],[!0,Glyphs.copyForRecords(t.speedSet),"Fastest Reality (real time)",`${TimeSpan.fromMilliseconds(t.realTime).toStringShort()}`],[player.celestials.teresa.bestRunAM.gt(1),Glyphs.copyForRecords(player.celestials.teresa.bestAMSet),`Highest Antimatter in ${Teresa.possessiveName} Reality`,`${format(player.celestials.teresa.bestRunAM,2,2)} Antimatter`],[Currency.imaginaryMachines.gt(0),Glyphs.copyForRecords(t.iMCapSet),"Highest Imaginary Machine cap",`${format(MachineHandler.currentIMCap,2,2)} iM`],[Laitela.isUnlocked,Glyphs.copyForRecords(t.laitelaSet),`Best ${Laitela.displayName} Destabilization`,`${TimeSpan.fromSeconds(player.celestials.laitela.fastestCompletion).toStringShort()},
          ${e} ${pluralize("Dimension",e)} (${formatX(Laitela.realityReward,2,2)} DM)`]]}}};var X3e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-glyph-set-tab"},e._l(e.recordGlyphInfo,function(n,r){return i("div",{key:r},[n[0]?i("div",{staticClass:"l-glyph-set-entry"},[e._v(" "+e._s(n[2])+": "),n[0]?i("GlyphSetPreview",{key:r,attrs:{glyphs:n[1],text:n[2],"text-hidden":!0}}):e._e(),e._v(" "+e._s(n[3])+" "),i("br")],1):e._e()])}),0)},K3e=[],Z3e=K(z3e,X3e,K3e,!1,null,null);const Q3e=Z3e.exports,J3e={name:"CurrentGlyphEffect",props:{isColored:{type:Boolean,default:!0},effect:{type:Object,required:!0}},computed:{effectConfig(){return GlyphEffects[this.effect.id]},formatValue(){if(this.effectConfig.isDisabledByDoomed)return"";const t=this.effect.value.value,e=this.effectConfig.formatEffect(t),i=this.effectConfig.conversion===void 0?"":this.effectConfig.formatSecondaryEffect(this.effectConfig.conversion(t));return this.effectConfig.totalDesc.replace("{value}",e).replace("{value2}",i)},textColor(){if(!this.isColored)return{};const t=this.effectConfig.id==="timeshardpow"?CosmeticGlyphTypes.time:CosmeticGlyphTypes[this.effectConfig.glyphTypes];let e=t.currentColor.border;return t.id==="cursed"&&(e="var(--color-celestials)"),{color:e,"text-shadow":`-1px 1px 1px var(--color-text-base), 1px 1px 1px var(--color-text-base),
                            -1px -1px 1px var(--color-text-base), 1px -1px 1px var(--color-text-base),
                            0 0 3px ${t.currentColor.border}`,animation:t.id==="reality"?"a-reality-glyph-description-cycle 10s infinite":void 0}},valueClass(){return this.effect.value.capped?"c-current-glyph-effects__effect--capped":""}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute("effectConfig")})}};var e5e=function(){var e=this,i=e._self._c;return i("div",[i("span",{class:e.valueClass,style:e.textColor},[e._v(" "+e._s(e.formatValue)+" ")])])},t5e=[],i5e=K(J3e,e5e,t5e,!1,null,"0d51f78e");const n5e=i5e.exports,ZN=["powerpow","powermult","powerdimboost","powerbuy10","infinitypow","infinityinfmult","infinityIP","infinityrate","replicationpow","replicationdtgain","replicationspeed","replicationglyphlevel","timepow","timeshardpow","timeEP","timespeed","timeetermult","dilationpow","dilationTTgen","dilationDT","dilationgalaxyThreshold","effarigrm","effarigglyph","effarigblackhole","effarigachievement","effarigforgotten","effarigdimensions","effarigantimatter","cursedgalaxies","cursedtickspeed","curseddimensions","cursedEP","realityglyphlevel","realitygalaxies","realityrow1pow","realityDTglyph","companiondescription","companionEP"],r5e={name:"CurrentGlyphEffects",components:{GlyphSetName:vR,CurrentGlyphEffect:n5e},data(){return{effects:[],isColored:!1,hasEffarig:!1,hasReality:!1,logTotalSacrifice:0,pelleChaosEffect:{}}},computed:{isSoftcapActive(){return this.effects.length&&!this.effects.every(t=>t.value.capped===!1)},uniqueGlyphText(){if(!this.hasEffarig&&!this.hasReality)return"";const t=[];return this.hasEffarig&&t.push(`<span style="color: ${GlyphAppearanceHandler.getBorderColor("effarig")};">Effarig</span>`),this.hasReality&&t.push('<span style="animation: a-reality-glyph-description-cycle 10s infinite;">Reality</span>'),`You cannot have more than one ${t.join(" or ")}
        Glyph equipped${t.length>1?" each.":"."}`},noEffects(){return!this.effects.length},glyphSet(){return Glyphs.activeList},pelleGlyphText(){return Pelle.isDoomed?`Glyph Rarity is set to ${formatPercents(strengthToRarity(Pelle.glyphStrength))}
          and Level is capped at ${formatInt(Pelle.glyphMaxLevel)}`:""},showChaosText(){return this.pelleChaosEffect.isUnlocked&&!this.noEffects},chaosEffect(){return this.pelleChaosEffect.description}},watch:{logTotalSacrifice(){this.glyphsChanged()}},created(){this.on$(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED,this.glyphsChanged),this.glyphsChanged()},methods:{update(){this.isColored=player.options.glyphTextColors,this.hasEffarig=Glyphs.active.some(t=>t&&t.type==="effarig"),this.hasReality=Glyphs.active.some(t=>t&&t.type==="reality"),this.logTotalSacrifice=GameCache.logTotalGlyphSacrifice.value,this.pelleChaosEffect=Pelle.specialGlyphEffect},glyphsChanged(){this.effects=getActiveGlyphEffects(),this.effects.sort((t,e)=>ZN.indexOf(t.id)-ZN.indexOf(e.id))}}};var s5e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-current-glyph-effects l-current-glyph-effects"},[i("div",{staticClass:"pelle-current-glyph-effects"},[e._v(" "+e._s(e.pelleGlyphText)+" ")]),i("div",{staticClass:"c-current-glyph-effects__header"},[e._v(" Currently active Glyph effects: ")]),i("GlyphSetName",{attrs:{"glyph-set":e.glyphSet}}),e.isSoftcapActive||e.hasEffarig||e.hasReality?i("br"):e._e(),i("span",{domProps:{innerHTML:e._s(e.uniqueGlyphText)}}),e.isSoftcapActive?i("div",{staticClass:"l-current-glyph-effects__capped-header"},[i("span",{staticClass:"c-current-glyph-effects__effect--capped"},[e._v("Italic")]),e._v(" effects have been slightly reduced due to a softcap ")]):e._e(),i("br"),e.noEffects?i("div",[e._v(" None (equip Glyphs to get their effects) ")]):e._e(),e._l(e.effects,function(n){return i("CurrentGlyphEffect",{key:n.id+e.logTotalSacrifice,attrs:{effect:n,"is-colored":e.isColored}})}),e.showChaosText?i("div",{staticClass:"pelle-current-glyph-effects"},[e._v(" "+e._s(e.chaosEffect)+" ")]):e._e()],2)},a5e=[],o5e=K(r5e,s5e,a5e,!1,null,"91207762");const l5e=o5e.exports,c5e={name:"EquippedGlyphs",components:{GlyphComponent:du},data(){return{glyphs:[],dragoverIndex:-1,respec:player.reality.respec,respecIntoProtected:player.options.respecIntoProtected,undoSlotsAvailable:0,undoAvailable:!1,undoVisible:!1,cosmeticGlow:!1}},computed:{GLYPH_SIZE:()=>5,slotCount(){return this.glyphs.length},arrangementRadius(){return this.slotCount===0?0:this.slotCount+1},respecTooltip(){const t=Pelle.isDoomed?"Armageddon":"Reality";return this.respec?`Respec is active and will place your currently - equipped Glyphs into your inventory after ${t}.`:`Your currently-equipped Glyphs will stay equipped on ${t}.`},undoTooltip(){return this.undoSlotsAvailable?this.undoAvailable?"Unequip the last equipped Glyph and rewind Reality to when you equipped it. (Most resources will be fully reset)":"Undo is only available for Glyphs equipped during this Reality":"You do not have available inventory space to unequip Glyphs to"},unequipText(){return Pelle.isDoomed?"Unequip Glyphs on Armageddon":"Unequip Glyphs on Reality"},isDoomed(){return Pelle.isDoomed},glyphRespecStyle(){return this.respec?{color:"var(--color-reality-light)","background-color":"var(--color-reality)","border-color":"#094e0b",cursor:"pointer"}:{cursor:"pointer"}},unequipClass(){return{"l-glyph-equip-button":this.isDoomed,"l-glyph-equip-button-short":!this.isDoomed}}},created(){this.on$(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED,this.glyphsChanged),this.glyphsChanged()},methods:{update(){this.respec=player.reality.respec,this.respecIntoProtected=player.options.respecIntoProtected,this.undoSlotsAvailable=this.respecIntoProtected?Glyphs.totalSlots-GameCache.glyphInventorySpace.value-Glyphs.inventoryList.length>0:GameCache.glyphInventorySpace.value>0,this.undoVisible=TeresaUnlocks.undo.canBeApplied,this.undoAvailable=this.undoVisible&&this.undoSlotsAvailable&&player.reality.glyphs.undo.length>0,this.cosmeticGlow=player.reality.glyphs.cosmetics.glowNotification},glyphPositionStyle(t){const e=2*Math.PI*t/this.slotCount,i=-this.GLYPH_SIZE/2+this.arrangementRadius*Math.sin(e),n=-this.GLYPH_SIZE/2+this.arrangementRadius*Math.cos(e);return{position:"absolute",left:`calc(50% + ${i}rem)`,top:`calc(50% + ${n}rem)`,"z-index":1}},dragover(t,e){t.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&(t.preventDefault(),this.dragoverIndex=e)},dragleave(t){this.dragoverIndex===t&&(this.dragoverIndex=-1)},drop(t,e){this.dragoverIndex=-1;const i=parseInt(t.dataTransfer.getData(GLYPH_MIME_TYPE),10);if(isNaN(i))return;const n=Glyphs.findById(i);n&&Glyphs.equip(n,e)},toggleRespec(){player.reality.respec=!player.reality.respec},toggleRespecIntoProtected(){player.options.respecIntoProtected=!player.options.respecIntoProtected},glyphsChanged(){this.glyphs=Glyphs.active.map(GlyphGenerator.copy),this.$recompute("slotCount")},undo(){!this.undoAvailable||Pelle.isDoomed||(player.options.confirmations.glyphUndo?Modal.glyphUndo.show():Glyphs.undo())},dragEvents(t){return{dragover:e=>this.dragover(e,t),dragleave:()=>this.dragleave(t),drop:e=>this.drop(e,t)}},showEquippedModal(){this.glyphs.filter(t=>t).length!==0&&Modal.glyphShowcasePanel.show({name:"Equipped Glyphs",glyphSet:this.glyphs,closeEvent:GAME_EVENT.GLYPHS_EQUIPPED_CHANGED})},showOptionModal(){player.reality.glyphs.cosmetics.glowNotification=!1,Modal.glyphDisplayOptions.show()},clickGlyph(t,e,i=!1){if(Glyphs.isMusicGlyph(t)){const n=e+(i?6:1);new Audio(`audio/note${n}.mp3`).play()}}}};var u5e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-equipped-glyphs"},[i("div",{staticClass:"l-equipped-glyphs__slots"},e._l(e.glyphs,function(n,r){return i("div",e._g({key:r,staticClass:"l-glyph-set-preview",style:e.glyphPositionStyle(r),on:{click:e.showEquippedModal}},e.dragEvents(r)),[i("div",{staticClass:"l-equipped-glyphs__dropzone"}),n?i("GlyphComponent",{key:r,staticClass:"c-equipped-glyph",attrs:{glyph:n,circular:!0,"is-active-glyph":!0},on:{clicked:function(s){return e.clickGlyph(n,r)},shiftClicked:function(s){return e.clickGlyph(n,r,!0)},ctrlShiftClicked:function(s){return e.clickGlyph(n,r,!0)}}}):i("div",{class:["l-equipped-glyphs__empty","c-equipped-glyphs__empty",{"c-equipped-glyphs__empty--dragover":e.dragoverIndex===r}]})],1)}),0),i("div",{staticClass:"l-equipped-glyphs__buttons"},[i("button",{staticClass:"c-reality-upgrade-btn",class:e.unequipClass,style:e.glyphRespecStyle,attrs:{"ach-tooltip":e.respecTooltip},on:{click:e.toggleRespec}},[e._v(" "+e._s(e.unequipText)+" ")]),e.undoVisible?i("button",{staticClass:"l-glyph-equip-button c-reality-upgrade-btn",class:{"c-reality-upgrade-btn--unavailable":!e.undoAvailable},attrs:{"ach-tooltip":e.undoTooltip},on:{click:e.undo}},[e._m(0)]):e._e(),i("button",{staticClass:"l-glyph-equip-button c-reality-upgrade-btn",on:{click:e.toggleRespecIntoProtected}},[e._v(" Unequip Glyphs to: "),i("br"),e.respecIntoProtected?i("span",[e._v("Protected slots")]):i("span",[e._v("Main inventory")])]),i("button",{staticClass:"l-glyph-equip-button-short c-reality-upgrade-btn",class:{"tutorial--glow":e.cosmeticGlow},on:{click:e.showOptionModal}},[e._v(" Open Glyph Visual Options ")])])])},d5e=[function(){var t=this,e=t._self._c;return e("span",[t._v("Rewind to "),e("b",[t._v("undo")]),t._v(" the last equipped Glyph")])}],h5e=K(c5e,u5e,d5e,!1,null,"740aa6c3");const f5e=h5e.exports,p5e={name:"GlyphInventory",components:{GlyphComponent:du},data(){return{inventory:[],newGlyphs:[],unequippedGlyphs:[],doubleClickTimeOut:null,clickedGlyphId:null,glyphSacrificeUnlocked:!1,protectedRows:0}},computed:{rowCount:()=>Glyphs.totalSlots/10,colCount:()=>10},created(){this.on$(GAME_EVENT.GLYPHS_CHANGED,this.glyphsChanged),this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,this.glyphsChanged),this.glyphsChanged()},methods:{update(){this.glyphSacrificeUnlocked=GlyphSacrificeHandler.canSacrifice,this.protectedRows=player.reality.glyphs.protectedRows,this.newGlyphs=Glyphs.unseen,this.unequippedGlyphs=Glyphs.unequipped},toIndex(t,e){return(t-1)*this.colCount+(e-1)},allowDrag(t){t.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&t.preventDefault()},drop(t,e){const i=parseInt(e.dataTransfer.getData(GLYPH_MIME_TYPE),10);if(isNaN(i))return;const n=Glyphs.findById(i);n&&Glyphs.moveToSlot(n,t)},removeGlyph(t,e){GlyphSacrificeHandler.removeGlyph(Glyphs.findById(t),e)},clickGlyph(t,e){const i=Glyphs.findById(e);if(this.doubleClickTimeOut){if(this.clickedGlyphId===e){clearTimeout(this.doubleClickTimeOut),this.doubleClickTimeOut=null;const n=Glyphs.active.indexOf(null);n!==-1&&Glyphs.equip(i,n)}}else{if(this.doubleClickTimeOut=setTimeout(()=>{this.clickedGlyphId=null,this.doubleClickTimeOut=null},200),this.clickedGlyphId=e,!i)return;Glyphs.isMusicGlyph(i)&&new Audio(`audio/note${t}.mp3`).play()}},glyphsChanged(){this.inventory=Glyphs.inventory.map(GlyphGenerator.copy)},slotClass(t){return t<Glyphs.protectedSlots?"c-glyph-inventory__protected-slot":"c-glyph-inventory__slot"},isNew(t){return player.options.showNewGlyphIcon&&this.newGlyphs.includes(this.inventory[t].id)},isUnequipped(t){return player.options.showUnequippedGlyphIcon&&this.unequippedGlyphs.includes(this.inventory[t].id)}}};var m5e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-glyph-inventory"},[e._v(" Click and drag or double-click to equip Glyphs. "),e._l(e.rowCount,function(n){return i("div",{key:e.protectedRows+n,staticClass:"l-glyph-inventory__row"},e._l(e.colCount,function(r){return i("div",{key:r,staticClass:"l-glyph-inventory__slot",class:e.slotClass(e.toIndex(n,r)),on:{dragover:e.allowDrag,drop:function(s){e.drop(e.toIndex(n,r),s)}}},[e.inventory[e.toIndex(n,r)]?i("GlyphComponent",{attrs:{glyph:e.inventory[e.toIndex(n,r)],"is-new":e.isNew(e.toIndex(n,r)),"is-unequipped":e.isUnequipped(e.toIndex(n,r)),"is-inventory-glyph":!0,"show-sacrifice":e.glyphSacrificeUnlocked,draggable:!0},on:{shiftClicked:function(s){return e.removeGlyph(s,!1)},ctrlShiftClicked:function(s){return e.removeGlyph(s,!0)},clicked:function(s){return e.clickGlyph(r,s)}}}):e._e()],1)}),0)})],2)},y5e=[],g5e=K(p5e,m5e,y5e,!1,null,"7ecb9ab4");const v5e=g5e.exports,b5e={name:"ToggleButton",props:{label:{type:String,required:!1,default:""},on:{type:String,required:!1,default:"ON"},off:{type:String,required:!1,default:"OFF"},value:{type:Boolean,required:!0},tooltipClass:{type:String,required:!1,default:""},tooltipContent:{type:String,required:!1,default:""}},computed:{displayText(){return`${this.label} ${this.value?this.on:this.off}`.trim()}}};var _5e=function(){var e=this,i=e._self._c;return i("button",e._b({on:{click:function(n){return e.emitInput(!e.value)}}},"button",e.$attrs,!1),[e._v(" "+e._s(e.displayText)+" "),e.tooltipClass?i("div",{class:e.tooltipClass},[e._v(" "+e._s(e.tooltipContent)+" ")]):e._e()])},E5e=[],T5e=K(b5e,_5e,E5e,!1,null,null);const LT=T5e.exports,w5e={name:"GlyphLevelsAndWeights",components:{ToggleButton:LT,SliderComponent:fu},data(){return{perkShopVisible:!1,penaltyVisible:!1,rowVisible:!1,achievementVisible:!1,showAutoAdjustWeights:!1,isAutoAdjustWeightsOn:!1,factors:getGlyphLevelInputs(),shardsGained:0,weights:Object.assign({},player.celestials.effarig.glyphWeights),rows:3}},computed:{gridStyle(){const t=this.adjustVisible?"30% 3% 17% 48% 2%":"80% 5% 15%";return{width:"100%","-ms-grid-columns":t,"grid-template-columns":t,"grid-auto-rows":"1fr"}},adjustOutlineStyle(){const t=5+(this.showAutoAdjustWeights?1:0);return`grid-row: 1 / ${t+1}; -ms-grid-row: 1; -ms-grid-row-span: ${t};`},formatPerkShop(){return formatPercents(this.factors.perkShop-1,1)},sliderProps(){return{min:0,max:100,interval:1,disabled:this.isAutoAdjustWeightsOn,"dot-width":"2.2rem","dot-height":"1.6rem",width:"13.5rem",tooltip:!1,"value-in-dot":!0,"plus-minus-buttons":!0,"dot-class":"c-glyph-levels-and-weights__slider-handle","bg-class":"c-glyph-levels-and-weights__slider-bg","process-class":"c-glyph-levels-and-weights__slider-process"}},totalWeights(){return this.weights.ep+this.weights.repl+this.weights.dt+this.weights.eternities},visibleRows(){const t=["ep","replicanti","dt"];return this.eternityVisible&&t.push("eternities"),this.perkShopVisible&&t.push("perk shop"),this.shardVisible&&t.push("shards"),this.singularityVisible&&t.push("singularities"),this.penaltyVisible&&t.push("instability"),this.rowVisible&&t.push("upgrade rows"),this.achievementVisible&&t.push("achievements"),t.push("level"),t.push("info"),t.push("info2"),t},adjustVisible(){return EffarigUnlock.adjuster.isUnlocked},eternityVisible(){return RealityUpgrade(18).isBought},shardVisible(){return Ra.unlocks.relicShardGlyphLevelBoost.canBeApplied&&this.shardsGained!==0},singularityVisible(){return SingularityMilestone.glyphLevelFromSingularities.canBeApplied}},watch:{isAutoAdjustWeightsOn(t){player.celestials.effarig.autoAdjustGlyphWeights=t}},created(){this.glyphWeightFields=Object.keys(player.celestials.effarig.glyphWeights),this.resetSavedWeights(),this.lastInstability=0,Glyphs.factorsOpen&&this.$parent.$emit("openrequest")},mounted(){this.$viewModel.tabs.reality.openGlyphWeights&&(this.$viewModel.tabs.reality.openGlyphWeights=!1,this.$parent.$emit("openrequest"))},destroyed(){Glyphs.factorsOpen=this.$parent.state.name.match("OPEN")!==null},methods:{update(){if(this.glyphWeightFields===void 0||this.$parent.state.name==="CLOSED")return;const t=getGlyphLevelInputs();this.perkShopVisible=t.perkShop!==1,this.rowVisible=t.rowFactor>0,this.achievementVisible=t.achievementFactor>0,t.scalePenalty!==1?(this.penaltyVisible=!0,this.lastInstability=Date.now()):this.penaltyVisible&&Date.now()-this.lastInstability>2e3&&(this.penaltyVisible=!1),this.rows=this.visibleRows.length,this.adjustVisible&&this.rows<6&&(this.rows=6),this.factors=t,this.shardsGained=Effarig.shardsGained;let e=!0;this.glyphWeightFields.forEach(i=>{this.weights[i]!==player.celestials.effarig.glyphWeights[i]&&(e=!1),this.weights[i]=player.celestials.effarig.glyphWeights[i]}),e||this.resetSavedWeights(),this.showAutoAdjustWeights=Achievement(165).isUnlocked,this.isAutoAdjustWeightsOn=player.celestials.effarig.autoAdjustGlyphWeights},rowStyle(t){const e=this.visibleRows.findIndex(i=>i===t)+1;return e===0?this.makeRowStyle(t):this.makeRowStyle(e)},formatFactor(t){return Notations.current.isPainful||t>1e3?format(t,2,2):t.toPrecision(5).slice(0,6)},formatLevel(t){return t>1e3?formatInt(Math.floor(t)):format(t,2,4)},makeRowStyle(t){return{"grid-row":t,"-ms-grid-row":t}},resetWeightsButtonClass(){return{"c-glyph-levels-and-weights__reset-btn":!0,"c-glyph-levels-and-weights__reset-btn-clickable":!this.isAutoAdjustWeightsOn}},resetWeights(){this.glyphWeightFields.forEach(t=>player.celestials.effarig.glyphWeights[t]=25),this.resetSavedWeights()},adjustSlider(t,e){if(this.weights[t]===e)return;t!==this.lastAdjusted&&(this.resetSavedWeights(),this.savedWeights[t]=0,this.lastAdjusted=t);const i=this.weights.ep+this.weights.repl+this.weights.dt+this.weights.eternities,n=this.weights[t];if(i-n+e>100){const s=this.savedWeights.ep+this.savedWeights.repl+this.savedWeights.dt+this.savedWeights.eternities,a=(100-e)/s,o=[];this.glyphWeightFields.forEach(c=>{c!==t&&o.push(this.savedWeights[c]*a)}),C5e(o),this.glyphWeightFields.forEach(c=>{c!==t&&(player.celestials.effarig.glyphWeights[c]=o.shift())})}player.celestials.effarig.glyphWeights[t]=e},resetSavedWeights(){this.savedWeights=Object.assign({},player.celestials.effarig.glyphWeights),this.lastAdjusted=null},factorString(t){const e=this.adjustVisible?t.name.substring(0,4):t.name;return`${format(t.coeff,2,4)}×${e}^${format(t.exp,2,3)}`}}};function C5e(t){for(let e=0;e<t.length;++e){let i=-1,n=1e3,r=0;for(let a=0;a<t.length;++a){const o=Math.abs(t[a]-Math.round(t[a]));o!==0&&(++r,o<n&&(i=a,n=o))}if(i===-1)break;let s=t[i]-Math.round(t[i]);if(t[i]=Math.round(t[i]),r===1)break;s/=r-1;for(let a=0;a<t.length;++a)t[a]!==Math.round(t[a])&&(t[a]+=s)}}var S5e=function(){var e=this,i=e._self._c;return i("div",{ref:"grid",staticClass:"l-glyph-levels-and-weights c-glyph-levels-and-weights",style:e.gridStyle},[e.adjustVisible?i("div",{style:e.makeRowStyle(6)}):e._e(),i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("ep")},[e._v(" "+e._s(e.factorString(e.factors.ep))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("ep")},[e._v(" "+e._s(e.formatFactor(e.factors.ep.value))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("replicanti")},[e._v(" "+e._s(e.factorString(e.factors.repl))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("replicanti")},[e._v(" × ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("replicanti")},[e._v(" "+e._s(e.formatFactor(e.factors.repl.value))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("dt")},[e._v(" "+e._s(e.factorString(e.factors.dt))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("dt")},[e._v(" × ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("dt")},[e._v(" "+e._s(e.formatFactor(e.factors.dt.value))+" ")]),e.eternityVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("eternities")},[e._v(" "+e._s(e.factorString(e.factors.eter))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("eternities")},[e._v(" × ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("eternities")},[e._v(" "+e._s(e.formatFactor(e.factors.eter.value))+" ")])]:e._e(),e.perkShopVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("perk shop")},[e._v(" Teresa's Perk shop ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("perk shop")},[e._v(" + ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("perk shop")},[e._v(" "+e._s(e.formatPerkShop)+" ")])]:e._e(),e.shardVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("shards")},[e._v(" "+e._s(e.formatInt(100))+"×Shards"+e._s(e.formatPow(2))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("shards")},[e._v(" + ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("shards")},[e._v(" "+e._s(e.formatFactor(e.factors.shardFactor))+" ")])]:e._e(),e.singularityVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("singularities")},[e._v(" Singularities ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("singularities")},[e._v(" × ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("singularities")},[e._v(" "+e._s(e.formatFactor(e.factors.singularityEffect))+" ")])]:e._e(),e.penaltyVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("instability")},[e._v(" Instability ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("instability")},[e._v(" / ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("instability")},[e._v(" "+e._s(e.formatFactor(e.factors.scalePenalty))+" ")])]:e._e(),e.rowVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("upgrade rows")},[e._v(" Upgrade Rows ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("upgrade rows")},[e._v(" + ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("upgrade rows")},[e._v(" "+e._s(e.formatInt(e.factors.rowFactor))+" ")])]:e._e(),e.achievementVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("achievements")},[e._v(" Achievements ")]),i("div",{staticClass:"l-glyph-levels-and-weights__operator",style:e.rowStyle("achievements")},[e._v(" + ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("achievements")},[e._v(" "+e._s(e.formatInt(e.factors.achievementFactor))+" ")])]:e._e(),i("div",{staticClass:"l-glyph-levels-and-weights__factor",style:e.rowStyle("level")},[e._v(" Final Level ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor-val",style:e.rowStyle("level")},[e._v(" "+e._s(e.formatLevel(e.factors.actualLevel))+" ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor l-glyph-level-and-weights-note",style:e.rowStyle("info")},[e._v(" Note: All resources here are log10 of their actual values. ")]),i("div",{staticClass:"l-glyph-levels-and-weights__factor l-glyph-level-and-weights-note",style:e.rowStyle("info2")},[e._v(" EP, Replicanti, and DT use their highest values this Reality. ")]),e.adjustVisible?[i("div",{staticClass:"l-glyph-levels-and-weights__adjust-outline",style:e.adjustOutlineStyle}),i("div",{staticClass:"l-glyph-levels-and-weights__adjust-label"},[e._v(" Adjust weights "),i("div",{staticClass:"l-glyph-levels-and-weights__reset-btn-outer"},[i("div",{class:e.resetWeightsButtonClass(),on:{click:e.resetWeights}},[e._v(" Reset ")])])]),i("div",{staticClass:"l-glyph-levels-and-weights__adjust-auto"},[e.showAutoAdjustWeights?i("ToggleButton",{staticClass:"c-glyph-levels-and-weights__auto-btn",attrs:{label:"Auto adjustment:"},model:{value:e.isAutoAdjustWeightsOn,callback:function(n){e.isAutoAdjustWeightsOn=n},expression:"isAutoAdjustWeightsOn"}}):e._e()],1),i("div",{staticClass:"l-glyph-levels-and-weights__slider",style:e.rowStyle("ep")},[i("SliderComponent",e._b({attrs:{value:e.weights.ep,width:"100%"},on:{input:function(n){return e.adjustSlider("ep",n)}}},"SliderComponent",e.sliderProps,!1))],1),i("div",{staticClass:"l-glyph-levels-and-weights__slider",style:e.rowStyle("replicanti")},[i("SliderComponent",e._b({attrs:{value:e.weights.repl,width:"100%"},on:{input:function(n){return e.adjustSlider("repl",n)}}},"SliderComponent",e.sliderProps,!1))],1),i("div",{staticClass:"l-glyph-levels-and-weights__slider",style:e.rowStyle("dt")},[i("SliderComponent",e._b({attrs:{value:e.weights.dt,width:"100%"},on:{input:function(n){return e.adjustSlider("dt",n)}}},"SliderComponent",e.sliderProps,!1))],1),i("div",{staticClass:"l-glyph-levels-and-weights__slider",style:e.rowStyle("eternities")},[i("SliderComponent",e._b({attrs:{value:e.weights.eternities,width:"100%"},on:{input:function(n){return e.adjustSlider("eternities",n)}}},"SliderComponent",e.sliderProps,!1))],1)]:e._e()],2)},k5e=[],A5e=K(w5e,S5e,k5e,!1,null,"d0afa6b6");const R5e=A5e.exports,I5e={name:"GlyphPeek",components:{GlyphSetPreview:Zf},data(){return{glyphs:[],level:0,canPeek:!1,isVisible:!1,canSacrifice:!1}},created(){this.on$(GAME_EVENT.REALITY_RESET_AFTER,this.refreshGlyphs),this.refreshGlyphs()},methods:{update(){this.canSacrifice=GlyphSacrificeHandler.canSacrifice,this.isVisible=!Pelle.isDoomed&&PlayerProgress.realityUnlocked(),this.canPeek=TimeStudy.reality.isBought,gainedGlyphLevel().actualLevel!==this.level&&this.refreshGlyphs()},refreshGlyphs(){this.canRefresh=!0,this.glyphs=GlyphSelection.upcomingGlyphs;for(const t of this.glyphs)Glyphs.applyGamespeed(t);this.level=gainedGlyphLevel().actualLevel},showModal(){Modal.glyphShowcasePanel.show({name:"Potential Glyphs for this Reality",glyphSet:this.glyphs,closeEvent:GAME_EVENT.REALITY_RESET_AFTER,isGlyphSelection:!0,showSetName:!1})}}};var D5e=function(){var e=this,i=e._self._c;return e.isVisible?i("div",{staticClass:"c-glyph-peek"},[e.canPeek?i("div",{staticClass:"l-glyph-set-preview",on:{click:e.showModal}},[i("GlyphSetPreview",{attrs:{"show-name":!1,text:"Upcoming Glyph selection:",glyphs:e.glyphs,"ignore-modified-level":!0,"show-sacrifice":e.canSacrifice,"flip-tooltip":!0,sort:!1}}),e._v(" (Click to bring up details) ")],1):i("div",[e._v(" Purchase the Reality study to see "),i("br"),e._v(" this Reality's Glyph choices ")])]):e._e()},x5e=[],M5e=K(I5e,D5e,x5e,!1,null,"dd569763");const P5e=M5e.exports,O5e={name:"AutoSacrificeAdvancedTab",props:{glyphType:{type:String,required:!0}},data(){return{scoreThreshold:0,effectScores:{}}},computed:{typeConfig(){return GlyphTypes[this.glyphType]},autoSacrificeSettings(){return AutoGlyphProcessor.types[this.glyphType]},effects(){return this.typeConfig.effects},descStyle(){return{color:GlyphAppearanceHandler.getBorderColor(this.glyphType),"border-color":this.typeConfig.color}},minScoreInputStyle(){return{"font-size":"larger","border-width":"var(--var-border-width, 0.2rem)"}},questionmarkTooltip(){return"The score of a Glyph is its rarity percentage, plus the specified amount for each effect it has."},weightInputLimit(){return 999},indexOffset(){return AutoGlyphProcessor.bitmaskIndexOffset(this.glyphType)}},created(){this.effectScores=[...AutoGlyphProcessor.types[this.glyphType].effectScores]},methods:{update(){this.scoreThreshold=this.autoSacrificeSettings.score;for(const t of this.effects){const e=t.bitmaskIndex-this.indexOffset;this.effectScores[e]=this.autoSacrificeSettings.effectScores[e]}},limitedInput(t){return Math.clamp(t,-this.weightInputLimit,this.weightInputLimit)},setScoreThreshold(t){const e=t.target.value;isNaN(e)||(this.autoSacrificeSettings.score=this.limitedInput(e))},setEffectScore(t,e){const i=e.target.value;isNaN(i)||(this.autoSacrificeSettings.effectScores[t]=this.limitedInput(i))}}};var N5e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-auto-sac-type-tab"},[i("div",{staticClass:"l-auto-sac-type-tab__row-wrapper"},[i("div",[i("div",{staticClass:"o-questionmark",attrs:{"ach-tooltip":e.questionmarkTooltip}},[e._v(" ? ")]),i("b",[e._v(" Threshold score")]),e._v(" (rarity % + effect scores) ")]),i("input",{ref:"scoreThreshold",staticClass:"c-auto-sac-type-tab__input",style:e.minScoreInputStyle,attrs:{type:"number",min:-e.weightInputLimit,max:e.weightInputLimit},domProps:{value:e.scoreThreshold},on:{blur:e.setScoreThreshold}})]),e._l(e.effects,function(n){return i("div",{key:n.id,staticClass:"l-auto-sac-type-tab__row-wrapper"},[i("div",{staticClass:"c-auto-sac-type-tab__effect-desc l-auto-sac-type-tab__effect-desc",style:e.descStyle},[e._v(" "+e._s(n.genericDesc)+" ")]),i("input",{staticClass:"c-auto-sac-type-tab__input",attrs:{type:"number",min:-e.weightInputLimit,max:e.weightInputLimit},domProps:{value:e.effectScores[n.bitmaskIndex-e.indexOffset]},on:{blur:function(r){return e.setEffectScore(n.bitmaskIndex-e.indexOffset,r)}}})])})],2)},G5e=[],U5e=K(O5e,N5e,G5e,!1,null,"8d0236c9");const L5e=U5e.exports,B5e={name:"SelectedEffectToggle",props:{effect:{type:Object,required:!0},glyphType:{type:String,required:!0}},data(){return{isActive:!1,noExclude:!1,effarigSettings:{effarigrm:!1,effarigglyph:!1}}},computed:{color(){return GlyphAppearanceHandler.getBorderColor(this.glyphType)},description(){return this.effect.genericDesc},classObject(){return this.isActive?"c-auto-sac-type-tab__effect-desc--active":"c-auto-sac-type-tab__effect-desc--inactive"},exclusionTooltip(){if(this.noExclude)return"";const t=this.effarigSettings;return t.RM&&t.glyph&&(this.effect.id==="effarigrm"||this.effect.id==="effarigglyph")?"RM multiplier and Glyph instability cannot occur together on the same Glyph!":this.effect.id==="effarigrm"&&t.glyph?"This effect is mutually exclusive with Glyph instability!":this.effect.id==="effarigglyph"&&t.RM?"This effect is mutually exclusive with RM multiplier!":""},isExcluded(){return this.exclusionTooltip!==""},effarigBits(){const t=GameDatabase.reality.glyphEffects;return{RM:t.effarigrm.bitmaskIndex,glyph:t.effarigglyph.bitmaskIndex}}},methods:{update(){this.isActive=(AutoGlyphProcessor.types[this.glyphType].specifiedMask&1<<this.effect.bitmaskIndex)!==0;const t=AutoGlyphProcessor.types.effarig.specifiedMask;this.effarigSettings={RM:(t&1<<this.effarigBits.RM)!==0,glyph:(t&1<<this.effarigBits.glyph)!==0},this.noExclude=Ra.unlocks.glyphEffectCount.canBeApplied},toggleSelection(){AutoGlyphProcessor.types[this.glyphType].specifiedMask^=1<<this.effect.bitmaskIndex},setEffectCount(t){const e=t.target.value;isNaN(e)||(this.autoSacrificeSettings.effectCount=Math.clamp(e,0,8))}}};var F5e=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.exclusionTooltip,expression:"exclusionTooltip"}],class:e.classObject,on:{click:function(n){return e.toggleSelection()}}},[i("span",[e.isExcluded?i("i",{staticClass:"fas fa-exclamation l-dock l-dock-left"}):e._e(),e._v(" "+e._s(e.description)+" "),e.isExcluded?i("i",{staticClass:"fas fa-exclamation l-dock l-dock-right"}):e._e()]),e.isActive?i("i",{staticClass:"fas fa-check c-selected-effect-toggle-indicator--active",style:{"background-color":e.color}}):e._e()])},$5e=[],H5e=K(B5e,F5e,$5e,!1,null,"85b1d57d");const V5e=H5e.exports,q5e={name:"AutoSacrificeEffectTab",components:{SelectedEffectToggle:V5e},props:{glyphType:{type:String,required:!0}},data(){return{effectCount:0}},computed:{typeConfig(){return GlyphTypes[this.glyphType]},autoSacrificeSettings(){return AutoGlyphProcessor.types[this.glyphType]},effects(){return this.typeConfig.effects},descStyle(){return{color:GlyphAppearanceHandler.getBorderColor(this.glyphType),"border-color":this.typeConfig.color}},questionmarkTooltip(){return`Glyph score is rarity, minus ${formatInt(200)} for every missing effect.
        Glyphs with less than the specified rarity are sacrificed. Additional effects
        beyond ones specified will not increase Glyph score.`}},methods:{update(){this.effectCount=this.autoSacrificeSettings.effectCount},setEffectCount(t){const e=t.target.value;isNaN(e)||(this.autoSacrificeSettings.effectCount=Math.clamp(e,0,8))}}};var Y5e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-glyph-sacrifice-options__advanced"},[i("div",[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.questionmarkTooltip,expression:"questionmarkTooltip"}],staticClass:"o-questionmark"},[e._v(" ? ")]),e._v(" Selected Glyphs will have at least "),i("input",{ref:"effectCount",staticClass:"c-auto-sac-effect-tab__input",attrs:{type:"number",min:"0",max:"8"},domProps:{value:e.effectCount},on:{blur:e.setEffectCount}}),e._v(" effects total, which must include "),i("i",[e._v("all")]),e._v(" of the following effects: ")]),e._l(e.effects,function(n){return i("div",{key:n.id,staticClass:"l-auto-sac-type-tab__row-wrapper"},[i("SelectedEffectToggle",{staticClass:"c-auto-sac-type-tab__effect-desc l-specified-effect-tab__effect-desc",style:e.descStyle,attrs:{effect:n,"glyph-type":e.glyphType}})],1)}),e._v(" Click to toggle individual effects on/off ")],2)},W5e=[],j5e=K(q5e,Y5e,W5e,!1,null,"abc5d2fa");const z5e=j5e.exports,X5e={name:"GlyphFilterPanel",components:{AutoSacrificeEffectTab:z5e,AutoSacrificeAdvancedTab:L5e,SliderComponent:fu,GlyphComponent:du},data(){return{mode:AUTO_GLYPH_SCORE.LOWEST_SACRIFICE,effectCount:0,lockedTypes:GlyphTypes.locked.map(t=>t.id),advancedType:GLYPH_TYPES[0],alchemyUnlocked:!1,rarityThresholds:GLYPH_TYPES.mapToObject(t=>t,()=>0),autoRealityForFilter:player.options.autoRealityForFilter,isRefining:!1}},computed:{modes(){return AUTO_GLYPH_SCORE},glyphTypes(){return GlyphTypes.list.filter(t=>!this.lockedTypes.includes(t.id))},raritySliderProps(){return{min:0,max:100,width:"18rem",valueInDot:!0,tooltip:"never","dot-width":"2.2rem","dot-height":"1.6rem","dot-class":"c-glyph-sacrifice-options__rarity-slider-handle","bg-class":"c-glyph-sacrifice-options__rarity-slider-bg","process-class":"c-glyph-sacrifice-options__rarity-slider-process",style:{"margin-left":"1rem"}}},glyphIconProps(){return{size:"3rem","glow-blur":"0.3rem","glow-spread":"0.1rem","text-proportion":.66}},questionmarkTooltip(){return`All Glyph choices are given a score and compared to a threshold based on the chosen mode. 
        The Glyph with the highest score is picked, but will still be ${this.isRefining?"Refined":"Sacrificed"}
        if below the threshold. (click for more detail)`},autoRealityTooltip(){return`If Auto-Reality is on, ignore all other settings and immediately Reality if no upcoming
        Glyphs would be kept`},unlockedModes(){return Object.values(this.modes).filter(t=>this.isUnlocked(t))}},methods:{update(){this.effectCount=player.reality.glyphs.filter.simple,this.mode=AutoGlyphProcessor.scoreMode;for(const t of generatedTypes)this.rarityThresholds[t]=AutoGlyphProcessor.types[t].rarity;this.lockedTypes=GlyphTypes.locked.map(t=>t.id),this.alchemyUnlocked=Ra.unlocks.unlockGlyphAlchemy.canBeApplied,this.isRefining=GlyphSacrificeHandler.isRefining},optionClass(t){const e=this.modeIcon(t);return["c-glyph-sacrifice-options__option",t===this.mode?"c-glyph-sacrifice-options__option--active":"c-glyph-sacrifice-options__option--inactive",e]},modeIcon(t){switch(t){case this.modes.LOWEST_SACRIFICE:return"fas fa-burn";case this.modes.EFFECT_COUNT:return"fas fa-list-ul";case this.modes.RARITY_THRESHOLD:return"fas fa-gem";case this.modes.SPECIFIED_EFFECT:return"fas fa-tasks";case this.modes.EFFECT_SCORE:return"fas fa-list-ol";case this.modes.LOWEST_ALCHEMY:return"fas fa-atom";case this.modes.ALCHEMY_VALUE:return"fas fa-flask";default:throw Error("Unrecognized glyph filter mode")}},strengthThreshold(t){return rarityToStrength(this.rarityThresholds[t])},advancedTypeSelectStyle(t){const e=GlyphAppearanceHandler.getBorderColor(t.id);return t.id===this.advancedType?{color:e,"text-shadow":`0 0 0.25rem ${e}, 0 0 0.5rem ${e}, 0 0 0.75rem ${e}, 0 0 1rem ${e}`}:{}},setMode(t){AutoGlyphProcessor.scoreMode=t,player.reality.hasCheckedFilter=!1},setRarityThreshold(t,e){AutoGlyphProcessor.types[t].rarity=e},setEffectCount(t){const e=t.target.value;isNaN(e)||(this.effectCount=Math.clamp(e,0,8),player.reality.glyphs.filter.simple=this.effectCount)},filterMode(t){return AutoGlyphProcessor.filterModeName(t)},isUnlocked(t){switch(t){case this.modes.LOWEST_SACRIFICE:case this.modes.EFFECT_COUNT:case this.modes.RARITY_THRESHOLD:case this.modes.SPECIFIED_EFFECT:case this.modes.EFFECT_SCORE:return!0;case this.modes.LOWEST_ALCHEMY:case this.modes.ALCHEMY_VALUE:return this.alchemyUnlocked;default:throw Error("Unrecognized glyph filter mode")}},bumpRarity(t){const e=GlyphRarities.map(n=>strengthToRarity(n.minStrength));let i;if(ui.view.shiftDown){const n=e.filter(r=>r<this.rarityThresholds[t]);i=n.length===0?100:n.max()}else i=e.filter(n=>n>this.rarityThresholds[t]).min();this.setRarityThreshold(t,i)},showFilterHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(t=>t.name==="Advanced Glyph Mechanics")[0],Modal.h2p.show()},getSymbol(t){return CosmeticGlyphTypes[t].currentSymbol.symbol},toggleAutoReality(){player.options.autoRealityForFilter=!player.options.autoRealityForFilter,this.autoRealityForFilter=player.options.autoRealityForFilter,player.reality.hasCheckedFilter=!1},exportFilterSettings(){const t=player.reality.glyphs.filter,e=r=>[r.rarity,r.score,r.effectCount,r.specifiedMask,r.effectScores.join("/")].join(","),i=[t.select,t.simple,t.trash].join("|"),n=ALCHEMY_BASIC_GLYPH_TYPES.map(r=>e(t.types[r])).join("|");copyToClipboard(GameSaveSerializer.encodeText(`${i}|${n}`,"glyph filter")),GameUI.notify.info("Filter settings copied to clipboard")},importFilterSettings(){Modal.importFilter.show()}}};var K5e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-glyph-sacrifice-options c-glyph-sacrifice-options l-glyph-sidebar-panel-size"},[i("div",{staticClass:"c-glyph-sacrifice-options c-glyph-sacrifice-options-container"},[i("div",{staticClass:"c-filter-extra-btns c-top-left"},[i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Export filter settings",expression:"'Export filter settings'"}],staticClass:"fas fa-file-export l-top-left-btn",on:{click:e.exportFilterSettings}}),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Import filter settings",expression:"'Import filter settings'"}],staticClass:"fas fa-file-import l-top-left-btn",on:{click:e.importFilterSettings}})]),i("div",{staticClass:"c-filter-extra-btns c-top-right"},[i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.autoRealityTooltip,expression:"autoRealityTooltip"}],staticClass:"fas fa-recycle l-top-right-btn",class:{"o-quick-reality":e.autoRealityForFilter},on:{click:e.toggleAutoReality}}),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.questionmarkTooltip,expression:"questionmarkTooltip"}],staticClass:"fas fa-question-circle l-top-right-btn o-borderless",on:{click:e.showFilterHowTo}})]),e._v(" Current Filter Mode: "),i("br"),e._v(" "+e._s(e.filterMode(e.mode))+" "),i("br"),i("div",{staticClass:"c-glyph-filter-mode-container"},e._l(e.unlockedModes,function(n){return i("div",{key:n,class:e.optionClass(n),on:{click:function(r){return e.setMode(n)}}},[i("div",{staticClass:"c-glyph-sacrifice-options__option__tooltip"},[e._v(" "+e._s(e.filterMode(n))+" ")])])}),0)]),e.mode===e.modes.LOWEST_SACRIFICE?i("div",{staticClass:"c-glyph-sacrifice-options__advanced"},[i("br"),e._v(" Glyph score is assigned based on type. Priority is given to Glyphs belonging to the type of which you have the least total Glyph Sacrifice value. "),i("br"),i("br"),e._v(" This mode never keeps Glyphs, but will instead always sacrifice the Glyph it chooses. ")]):e._e(),e.mode===e.modes.EFFECT_COUNT?i("div",{staticClass:"c-glyph-sacrifice-options__advanced"},[i("br"),e._v(" Glyphs must have at least "),i("input",{ref:"effectCount",staticClass:"c-auto-sac-effect-tab__input",attrs:{type:"number",min:"0",max:"8"},domProps:{value:e.effectCount},on:{blur:e.setEffectCount}}),e._v(" effects to be chosen. Rarer Glyphs are preferred in ties. ")]):e._e(),e.mode===e.modes.RARITY_THRESHOLD?i("div",{staticClass:"l-glyph-sacrifice-options__rarity-sliders"},[i("span",{staticClass:"c-glyph-sacrifice-options__advanced"},[e._v(" Any Glyphs with rarity below these thresholds will be sacrificed. ")]),e._l(e.glyphTypes,function(n){return i("div",{key:n.id,staticClass:"l-glyph-sacrifice-options__rarity-slider-div"},[i("span",{on:{click:function(r){return e.bumpRarity(n.id)}}},[i("GlyphComponent",e._b({staticClass:"o-clickable",attrs:{glyph:{type:n.id,strength:e.strengthThreshold(n.id)}}},"GlyphComponent",e.glyphIconProps,!1))],1),i("SliderComponent",e._b({attrs:{value:e.rarityThresholds[n.id],width:"100%"},on:{input:function(r){return e.setRarityThreshold(n.id,r)}}},"SliderComponent",e.raritySliderProps,!1))],1)})],2):e._e(),e.mode===e.modes.SPECIFIED_EFFECT?i("div",{staticClass:"c-glyph-sacrifice-options__advanced"},[i("div",[e._v(" Glyph Type: "),e._l(e.glyphTypes,function(n){return i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.id.capitalize(),expression:"type.id.capitalize()"}],key:n.id,staticClass:"l-glyph-sacrifice-options__advanced-type-select c-glyph-sacrifice-options__advanced-type-select",style:e.advancedTypeSelectStyle(n),on:{click:function(r){e.advancedType=n.id}}},[e._v(" "+e._s(e.getSymbol(n.id))+" ")])})],2),i("br"),i("div",{staticClass:"l-glyph-sacrifice-options__rarity-slider-div"},[i("span",{on:{click:function(n){return e.bumpRarity(e.advancedType)}}},[i("GlyphComponent",e._b({staticClass:"o-clickable",attrs:{glyph:{type:e.advancedType,strength:e.strengthThreshold(e.advancedType)}}},"GlyphComponent",e.glyphIconProps,!1))],1),i("SliderComponent",e._b({attrs:{value:e.rarityThresholds[e.advancedType],width:"100%"},on:{input:function(n){return e.setRarityThreshold(e.advancedType,n)}}},"SliderComponent",e.raritySliderProps,!1))],1),e._l(e.glyphTypes,function(n){return[i("AutoSacrificeEffectTab",{directives:[{name:"show",rawName:"v-show",value:n.id===e.advancedType,expression:"type.id === advancedType"}],key:n.id,attrs:{"glyph-type":n.id}})]})],2):e._e(),e.mode===e.modes.EFFECT_SCORE?i("div",{staticClass:"c-glyph-sacrifice-options__advanced"},[i("div",[e._v(" Glyph Type: "),e._l(e.glyphTypes,function(n){return i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.id.capitalize(),expression:"type.id.capitalize()"}],key:n.id,staticClass:"l-glyph-sacrifice-options__advanced-type-select c-glyph-sacrifice-options__advanced-type-select",style:e.advancedTypeSelectStyle(n),on:{click:function(r){e.advancedType=n.id}}},[e._v(" "+e._s(e.getSymbol(n.id))+" ")])})],2),i("br"),e._l(e.glyphTypes,function(n){return[i("AutoSacrificeAdvancedTab",{directives:[{name:"show",rawName:"v-show",value:n.id===e.advancedType,expression:"type.id === advancedType"}],key:n.id,attrs:{"glyph-type":n.id}})]})],2):e._e(),e.mode===e.modes.LOWEST_ALCHEMY?i("div",{staticClass:"c-glyph-sacrifice-options__advanced"},[i("br"),e._v(" Glyph score is assigned based on current Alchemy Resource totals. Priority is given to the Glyph type with the lowest associated alchemy resource total. "),i("br"),i("br"),e._v(" This mode never keeps Glyphs. ")]):e._e(),e.mode===e.modes.ALCHEMY_VALUE?i("div",{staticClass:"c-glyph-sacrifice-options__advanced"},[i("br"),e._v(" Glyphs will be assigned values based on "),i("i",[e._v("current")]),e._v(" refinement value, accounting for the type-specific resource caps. Priority is given to Glyphs which are worth the most alchemy resources; Glyphs which would cause you to hit a cap are effectively worth less. "),i("br"),i("br"),e._v(" This mode never keeps Glyphs. ")]):e._e()])},Z5e=[],Q5e=K(X5e,K5e,Z5e,!1,null,"b37d06d1");const J5e=Q5e.exports,e4e={name:"ButtonCycle",props:{text:{type:String,required:!0},labels:{type:Array,required:!0},value:{type:Number,required:!0}},computed:{displayText(){return`${this.text} ${this.labels[this.value]}`.trim()}},methods:{handleClick(){this.emitInput((this.value+1)%this.labels.length)}}};var t4e=function(){var e=this,i=e._self._c;return i("button",e._b({on:{click:e.handleClick}},"button",e.$attrs,!1),[e._v(" "+e._s(e.displayText)+" ")])},i4e=[],n4e=K(e4e,t4e,i4e,!1,null,null);const r4e=n4e.exports,s4e={name:"GlyphAutosortButtonGroup",components:{ToggleButton:LT,ButtonCycle:r4e},data(){return{autoSort:0,showScoreFilter:!1,autoCollapse:!1,showAutoAutoClean:!1,autoAutoClean:!1,applyFilterToPurge:!1}},computed:{sortModes(){const t=["NONE","LEVEL","POWER","EFFECT"];return this.showScoreFilter&&t.push("SCORE"),t},questionMarkTooltip(){return"The automatic settings below will apply after every Reality"},keepTooltip(){return"If set to ON, Glyphs which your filter accepts will never be auto-purged even if they are worse"}},watch:{autoSort(t){player.reality.autoSort=t},autoCollapse(t){player.reality.autoCollapse=t},autoAutoClean(t){player.reality.autoAutoClean=t},applyFilterToPurge(t){player.reality.applyFilterToPurge=t}},methods:{update(){this.autoSort=player.reality.autoSort,this.showScoreFilter=EffarigUnlock.glyphFilter.isUnlocked,this.autoCollapse=player.reality.autoCollapse,this.showAutoAutoClean=VUnlocks.autoAutoClean.canBeApplied,this.autoAutoClean=player.reality.autoAutoClean,this.applyFilterToPurge=player.reality.applyFilterToPurge}}};var a4e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-glyph-inventory-management-group"},[i("div",{staticClass:"l-glyph-sacrifice-options__header"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.questionMarkTooltip,expression:"questionMarkTooltip"}],staticClass:"o-questionmark"},[e._v(" ? ")]),e._v(" Auto Glyph Arrangement: ")]),i("ButtonCycle",{staticClass:"c-glyph-inventory-option",attrs:{text:"Auto-sort Mode:",labels:e.sortModes},model:{value:e.autoSort,callback:function(n){e.autoSort=n},expression:"autoSort"}}),i("ToggleButton",{staticClass:"c-glyph-inventory-option",attrs:{label:"Auto-collapse space:"},model:{value:e.autoCollapse,callback:function(n){e.autoCollapse=n},expression:"autoCollapse"}}),e.showAutoAutoClean?i("ToggleButton",{staticClass:"c-glyph-inventory-option",attrs:{label:"Auto-purge on Realities:"},model:{value:e.autoAutoClean,callback:function(n){e.autoAutoClean=n},expression:"autoAutoClean"}}):e._e(),e.showAutoAutoClean?i("ToggleButton",{staticClass:"c-glyph-inventory-option",attrs:{label:"Never Auto-purge Glyphs accepted by filter:","tooltip-class":"c-glyph-inventory-option__tooltip","tooltip-content":e.keepTooltip},model:{value:e.applyFilterToPurge,callback:function(n){e.applyFilterToPurge=n},expression:"applyFilterToPurge"}}):e._e()],1)},o4e=[],l4e=K(s4e,a4e,o4e,!1,null,"9ef64d0a");const c4e=l4e.exports,u4e={name:"GlyphCleanButtonGroup",data(){return{glyphSacrificeUnlocked:!1,hasPerkShop:!1,hasFilter:!1,inventory:[],isRefining:!1,removeCount:0}},computed:{removeString(){return this.isRefining?"Refine":this.glyphSacrificeUnlocked?"Sacrifice":"Delete"},autoCleanTooltip(){return`${this.removeString} Glyphs that are worse in every way than
        enough other Glyphs${this.hasPerkShop?" (ignores customized Glyphs)":""}`},harshAutoCleanTooltip(){return`${this.removeString} Glyphs that are worse in every way than
        ANY other Glyph${this.hasPerkShop?" (includes customized Glyphs)":""}`},deleteRejectedTooltip(){const t=AutoGlyphProcessor.hasNegativeEffectScore()?" You also have some negative Effect Filter scores; this may remove some Glyphs you normally want to keep!":"";return this.removeCount===0?"This will not remove any Glyphs, adjust your Filter settings to remove some.":`This will remove ${quantifyInt("Glyph",this.removeCount)}!${t}`}},methods:{update(){this.glyphSacrificeUnlocked=GlyphSacrificeHandler.canSacrifice&&!Pelle.isDoomed,this.hasPerkShop=TeresaUnlocks.shop.canBeApplied,this.hasFilter=EffarigUnlock.glyphFilter.isUnlocked,this.inventory=Glyphs.inventory.map(GlyphGenerator.copy),this.isRefining=AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE||AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE_TO_CAP,this.removeCount=this.inventory.filter(t=>t!==null&&t.idx>=Glyphs.protectedSlots&&!AutoGlyphProcessor.wouldKeep(t)).length},autoClean(){player.options.confirmations.autoClean?Modal.glyphPurge.show({harsh:!1}):Glyphs.autoClean(5)},harshAutoClean(){player.options.confirmations.autoClean?Modal.glyphPurge.show({harsh:!0}):Glyphs.autoClean(1)},deleteAllUnprotected(){player.options.confirmations.sacrificeAll?Modal.deleteAllUnprotectedGlyphs.show():Glyphs.autoClean(0)},deleteAllRejected(){player.options.confirmations.sacrificeAll?Modal.deleteAllRejectedGlyphs.show():Glyphs.deleteAllRejected(!0)},slotClass(t){return t<Glyphs.protectedSlots?"c-glyph-inventory__protected-slot":"c-glyph-inventory__slot"}}};var d4e=function(){var e=this,i=e._self._c;return e.glyphSacrificeUnlocked?i("div",{staticClass:"o-glyph-inventory-management-group"},[i("div",{staticClass:"l-glyph-sacrifice-options__header"},[e._v(" Remove weaker Glyphs: ")]),i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.autoClean}},[e._v(" Purge Glyphs "),i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" "+e._s(e.autoCleanTooltip)+" ")])]),i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.harshAutoClean}},[e._v(" Harsh Purge Glyphs "),i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" "+e._s(e.harshAutoCleanTooltip)+" ")])]),i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.deleteAllUnprotected}},[e._v(" "+e._s(e.removeString)+" all unprotected Glyphs ")]),e.hasFilter?i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.deleteAllRejected}},[e._v(" "+e._s(e.removeString)+" all Glyphs rejected by filtering "),i("div",{staticClass:"c-glyph-inventory-option__tooltip l-rejected-tooltip"},[e._v(" "+e._s(e.deleteRejectedTooltip)+" ")])]):e._e()]):e._e()},h4e=[],f4e=K(u4e,d4e,h4e,!1,null,"ab86d0c5");const p4e=f4e.exports,m4e={name:"GlyphProtectedRowButtonGroup",components:{ToggleButton:LT},data(){return{protectedRows:0,moveGlyphs:!1}},computed:{questionMarkTooltip(){return`Protected slots are unaffected by anything which may move or purge Glyphs.
        New Glyphs will never be inserted into these slots.`}},watch:{moveGlyphs(t){player.reality.moveGlyphsOnProtection=t}},methods:{update(){this.moveGlyphs=player.reality.moveGlyphsOnProtection,this.protectedRows=player.reality.glyphs.protectedRows},addRow(){Glyphs.changeProtectedRows(1)},removeRow(){Glyphs.changeProtectedRows(-1)},isProtectedRowsMax(){return this.protectedRows===Glyphs.totalSlots/10-1},addRowButtonClass(){return{"c-glyph-inventory-option":!0,"o-non-clickable":this.isProtectedRowsMax()}},removeRowButtonClass(){return{"c-glyph-inventory-option":!0,"o-non-clickable":this.protectedRows===0}}}};var y4e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-glyph-inventory-management-group"},[i("div",{staticClass:"l-glyph-sacrifice-options__header"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.questionMarkTooltip,expression:"questionMarkTooltip"}],staticClass:"o-questionmark"},[e._v(" ? ")]),e._v(" Protected Slots: ("+e._s(e.quantifyInt("row",e.protectedRows))+") ")]),i("button",{class:e.addRowButtonClass(),on:{click:e.addRow}},[e._v(" Add a protected row "),e.isProtectedRowsMax()?i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" One row is permanently un-protected for new Glyphs ")]):e._e()]),i("button",{class:e.removeRowButtonClass(),on:{click:e.removeRow}},[e._v(" Remove a protected row ")]),i("ToggleButton",{staticClass:"c-glyph-inventory-option",attrs:{label:"Move Glyphs on changing row count:"},model:{value:e.moveGlyphs,callback:function(n){e.moveGlyphs=n},expression:"moveGlyphs"}})],1)},g4e=[],v4e=K(m4e,y4e,g4e,!1,null,"b731f9a5");const b4e=v4e.exports,_4e={name:"GlyphSortButtonGroup",data(){return{showScoreFilter:!1}},methods:{update(){this.showScoreFilter=EffarigUnlock.glyphFilter.isUnlocked},sortByLevel(){Glyphs.sortByLevel()},sortByPower(){Glyphs.sortByPower()},sortByScore(){Glyphs.sortByScore()},sortByEffect(){Glyphs.sortByEffect()},collapseEmpty(){Glyphs.collapseEmptySlots()}}};var E4e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-glyph-inventory-management-group"},[i("div",{staticClass:"l-glyph-sacrifice-options__header"},[e._v(" Sort Glyphs: ")]),i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.sortByLevel}},[e._v(" Sort by level "),i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" Arranges by decreasing Glyph level ")])]),i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.sortByPower}},[e._v(" Sort by power "),i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" Arranges by decreasing level×rarity ")])]),i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.sortByEffect}},[e._v(" Sort by effect "),i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" Groups Glyphs together based on effects ")])]),e.showScoreFilter?i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.sortByScore}},[e._v(" Sort by score "),i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" Arranges by decreasing Glyph filter score ")])]):e._e(),i("button",{staticClass:"c-glyph-inventory-option",on:{click:e.collapseEmpty}},[e._v(" Collapse empty space "),i("div",{staticClass:"c-glyph-inventory-option__tooltip"},[e._v(" Moves all Glyphs to the earliest empty slots ")])])])},T4e=[],w4e=K(_4e,E4e,T4e,!1,null,"3130bb73");const C4e=w4e.exports,S4e={name:"GlyphInventoryManagementPanel",components:{GlyphSortButtonGroup:C4e,GlyphProtectedRowButtonGroup:b4e,GlyphAutosortButtonGroup:c4e,GlyphCleanButtonGroup:p4e},props:{hasMoreOptions:{type:Boolean,required:!1,default:!0}},computed:{groupClass(){return{"l-glyph-sacrifice-options":!0,"c-glyph-sacrifice-options":!0,"l-glyph-sidebar-panel-size":!0,"l-glyph-inventory-management":!0,"c-glyph-inventory-management-with-border":!this.hasMoreOptions}}}};var k4e=function(){var e=this,i=e._self._c;return i("div",{class:e.groupClass},[i("GlyphSortButtonGroup"),i("GlyphProtectedRowButtonGroup"),i("GlyphAutosortButtonGroup"),i("GlyphCleanButtonGroup")],1)},A4e=[],R4e=K(S4e,k4e,A4e,!1,null,"7a284e58");const I4e=R4e.exports,D4e={name:"GlyphRejectionPanel",data(){return{mode:AUTO_GLYPH_REJECT.SACRIFICE}},computed:{modes(){return AUTO_GLYPH_REJECT},availableModes(){return Object.values(this.modes)}},methods:{optionClass(t){return[t===this.mode?"c-glyph-auto-pick-options__option--active":"c-glyph-auto-pick-options__option--inactive","c-glyph-auto-pick-options__option"]},update(){this.mode=AutoGlyphProcessor.sacMode},setMode(t){AutoGlyphProcessor.sacMode=t},modeDesc(t){return AutoGlyphProcessor.trashModeDesc(t)}}};var x4e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-glyph-sacrifice-options c-glyph-sacrifice-options l-glyph-sidebar-panel-size"},[i("span",{staticClass:"c-glyph-sacrifice-options__advanced"},[e._v(" Behavior for deleted and filtered Glyphs: ")]),i("br"),i("div",{staticClass:"l-glyph-auto-pick-options__container"},e._l(e.availableModes,function(n){return i("div",{key:n,class:e.optionClass(n),on:{click:function(r){return e.setMode(n)}}},[e._v(" "+e._s(e.modeDesc(n))+" ")])}),0)])},M4e=[],P4e=K(D4e,x4e,M4e,!1,null,"b72bc529");const O4e=P4e.exports,N4e={name:"GlyphSetSavePanel",components:{ToggleButton:LT,GlyphSetPreview:Zf},data(){return{hasEquipped:!0,glyphSets:[],names:[],effects:!1,rarity:!1,level:!1}},computed:{questionmarkTooltip(){return`Glyph Presets work like Time Study Loadouts, allowing you to equip a
        full set of previously-saved Glyphs`},noSet(){return"No Glyph Preset saved in this slot"}},watch:{effects(t){player.options.ignoreGlyphEffects=t},rarity(t){player.options.ignoreGlyphRarity=t},level(t){player.options.ignoreGlyphLevel=t}},created(){this.on$(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED,this.refreshGlyphSets),this.on$(GAME_EVENT.GLYPH_SET_SAVE_CHANGE,this.refreshGlyphSets),this.refreshGlyphSets();for(let t=0;t<player.reality.glyphs.sets.length;t++)this.names[t]=player.reality.glyphs.sets[t].name},methods:{update(){this.hasEquipped=Glyphs.activeList.length>0,this.effects=player.options.ignoreGlyphEffects,this.rarity=player.options.ignoreGlyphRarity,this.level=player.options.ignoreGlyphLevel},refreshGlyphSets(){this.glyphSets=player.reality.glyphs.sets.map(t=>Glyphs.copyForRecords(t.glyphs))},setName(t){const e=this.names[t]===""?"":`: ${this.names[t]}`;return`Glyph Preset #${t+1}${e}`},saveGlyphSet(t){!this.hasEquipped||player.reality.glyphs.sets[t].glyphs.length||(player.reality.glyphs.sets[t].glyphs=Glyphs.active.compact(),this.refreshGlyphSets(),EventHub.dispatch(GAME_EVENT.GLYPH_SET_SAVE_CHANGE))},loadGlyphSet(t,e){if(!this.setLengthValid(t))return;let i=[...t].sort((d,p)=>-d.level*d.strength+p.level*p.strength);const n=[...Glyphs.active.filter(d=>d)],r=[];for(const d of n){const p=Glyphs.findByValues(d,i,{level:this.level?-1:0,strength:this.rarity?-1:0,effects:this.effects?-1:0});r.push({glyph:d,options:p})}const s=this.findSelectedGlyphs(r,5);for(const d of s)i=i.filter(p=>p!==d);const a=[];for(let d=0;d<i.length;d++){const p=i[d],m=Glyphs.findByValues(p,Glyphs.sortedInventoryList,{level:this.level?1:0,strength:this.rarity?1:0,effects:this.effects?1:0});a[d]={glyph:p,options:m}}const o=this.findSelectedGlyphs(a,Glyphs.active.countWhere(d=>d===null));for(const d of o)i=i.filter(p=>p!==d);let c=i.length;for(const d of o){const p=Glyphs.active.indexOf(null);p!==-1&&(Glyphs.equip(d,p),c--)}c>0?GameUI.notify.error(`Could not find or equip ${c} ${pluralize("Glyph",c)} from
          ${this.setName(e)}.`):GameUI.notify.success(`Successfully loaded ${this.setName(e)}.`)},findSelectedGlyphs(t,e){const i=s=>1e3*(10*s.glyph.type.length+s.glyph.type.codePointAt(0))+s.options.length;t.sort((s,a)=>i(s)-i(a));const n=[];let r=e;for(let s=0;s<t.length&&r!==0;s++){const o=t[s].options.filter(d=>!n.includes(d));if(o.length===0)continue;const c=o[o.length-1];n.push(c),r--}return n},deleteGlyphSet(t){player.reality.glyphs.sets[t].glyphs.length&&(player.options.confirmations.deleteGlyphSetSave?Modal.glyphSetSaveDelete.show({glyphSetId:t}):(player.reality.glyphs.sets[t].glyphs=[],this.refreshGlyphSets(),EventHub.dispatch(GAME_EVENT.GLYPH_SET_SAVE_CHANGE)))},nicknameBlur(t){player.reality.glyphs.sets[t.target.id].name=t.target.value.slice(0,20),this.names[t.target.id]=player.reality.glyphs.sets[t.target.id].name,this.refreshGlyphSets()},setLengthValid(t){return t.length&&t.length<=Glyphs.activeSlotCount},loadingTooltip(t){return this.setLengthValid(t)&&this.hasEquipped?"This set may not load properly because you already have some Glyphs equipped":null},glyphSetKey(t,e){return`${e} ${Glyphs.hash(t)}`}}};var G4e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-glyph-sacrifice-options c-glyph-sacrifice-options l-glyph-sidebar-panel-size"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.questionmarkTooltip,expression:"questionmarkTooltip"}],staticClass:"l-glyph-sacrifice-options__help c-glyph-sacrifice-options__help o-questionmark"},[e._v(" ? ")]),i("div",{staticClass:"l-glyph-set-save__header"},[e._v(' When loading a preset, try to match the following attributes. "Exact" will only equip Glyphs identical to the ones in the preset. The other settings will, loosely speaking, allow "better" Glyphs to be equipped in their place. ')]),i("div",{staticClass:"c-glyph-set-save-container"},[i("ToggleButton",{staticClass:"c-glyph-set-save-setting-button",attrs:{label:"Effects:",on:"Including",off:"Exact"},model:{value:e.effects,callback:function(n){e.effects=n},expression:"effects"}}),i("ToggleButton",{staticClass:"c-glyph-set-save-setting-button",attrs:{label:"Level:",on:"Increased",off:"Exact"},model:{value:e.level,callback:function(n){e.level=n},expression:"level"}}),i("ToggleButton",{staticClass:"c-glyph-set-save-setting-button",attrs:{label:"Rarity:",on:"Increased",off:"Exact"},model:{value:e.rarity,callback:function(n){e.rarity=n},expression:"rarity"}})],1),e._l(e.glyphSets,function(n,r){return i("div",{key:r,staticClass:"c-glyph-single-set-save"},[i("div",{staticClass:"c-glyph-set-preview-area"},[i("GlyphSetPreview",{key:e.glyphSetKey(n,r),attrs:{text:e.setName(r),"text-hidden":!0,glyphs:n,"flip-tooltip":!0,"none-text":e.noSet}})],1),i("div",{staticClass:"c-glyph-single-set-save-flexbox"},[i("div",{attrs:{"ach-tooltip":"Set a custom name (up to 20 characters)"}},[i("input",{staticClass:"c-glyph-sets-save-name__input",attrs:{id:r,type:"text",size:"20",maxlength:"20",placeholder:"Custom set name"},domProps:{value:e.names[r]},on:{blur:e.nicknameBlur}})]),i("div",{staticClass:"c-glyph-single-set-save-flexbox-buttons"},[i("button",{staticClass:"c-glyph-set-save-button",class:{"c-glyph-set-save-button--unavailable":!e.hasEquipped||n.length},on:{click:function(s){return e.saveGlyphSet(r)}}},[e._v(" Save ")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.loadingTooltip(n),expression:"loadingTooltip(set)"}],staticClass:"c-glyph-set-save-button",class:{"c-glyph-set-save-button--unavailable":!e.setLengthValid(n)},on:{click:function(s){return e.loadGlyphSet(n,r)}}},[e._v(" Load ")]),i("button",{staticClass:"c-glyph-set-save-button",class:{"c-glyph-set-save-button--unavailable":!n.length},on:{click:function(s){return e.deleteGlyphSet(r)}}},[e._v(" Delete ")])])])])})],2)},U4e=[],L4e=K(N4e,G4e,U4e,!1,null,"7d775710");const B4e=L4e.exports,F4e={name:"GlyphTabSidebar",components:{GlyphInventoryManagementPanel:I4e,GlyphFilterPanel:J5e,GlyphSetSavePanel:B4e,GlyphRejectionPanel:O4e},data(){return{type:0,sidebarEnum:{},unlockedFilter:!1,unlockedSets:!1,unlockedAlchemy:!1,hasMoreOptions:!1,hasRefined:!1}},computed:{isDoomed(){return Pelle.isDoomed}},methods:{update(){this.type=player.reality.showSidebarPanel,this.sidebarEnum=GLYPH_SIDEBAR_MODE,this.unlockedFilter=EffarigUnlock.glyphFilter.isUnlocked,this.unlockedSets=EffarigUnlock.setSaves.isUnlocked,this.unlockedAlchemy=Ra.unlocks.unlockGlyphAlchemy.canBeApplied,this.hasMoreOptions=this.unlockedFilter||this.unlockedSets||this.unlockedAlchemy,this.hasRefined=AlchemyResources.all.map(t=>t.amount).some(t=>t>0)},setSidebarState(t){player.reality.showSidebarPanel=t},sidebarClass(t){return{"l-glyph-sidebar-button":!0,"c-glyph-sidebar-button":!0,"c-glyph-sidebar-button--active":t===player.reality.showSidebarPanel,"l-glyph-sidebar-button--attention":t===this.sidebarEnum.SACRIFICE_TYPE&&!this.hasRefined&&!this.isDoomed}}}};var $4e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-glyph-sidebar-option-container"},[e.hasMoreOptions?i("div",{staticClass:"l-glyph-sidebar-tab-container"},[i("button",{class:e.sidebarClass(e.sidebarEnum.INVENTORY_MANAGEMENT),on:{click:function(n){return e.setSidebarState(e.sidebarEnum.INVENTORY_MANAGEMENT)}}},[e._v(" Manage Inventory ")]),e.unlockedFilter?i("button",{class:e.sidebarClass(e.sidebarEnum.FILTER_SETTINGS),on:{click:function(n){return e.setSidebarState(e.sidebarEnum.FILTER_SETTINGS)}}},[e._v(" Glyph Filter ")]):e._e(),e.unlockedSets?i("button",{class:e.sidebarClass(e.sidebarEnum.SAVED_SETS),on:{click:function(n){return e.setSidebarState(e.sidebarEnum.SAVED_SETS)}}},[e._v(" Glyph Presets ")]):e._e(),e.unlockedAlchemy?i("button",{class:e.sidebarClass(e.sidebarEnum.SACRIFICE_TYPE),on:{click:function(n){return e.setSidebarState(e.sidebarEnum.SACRIFICE_TYPE)}}},[e._v(" Sacrifice Type ")]):e._e()]):e._e(),e.type===e.sidebarEnum.INVENTORY_MANAGEMENT?i("GlyphInventoryManagementPanel",{attrs:{"has-more-options":e.hasMoreOptions}}):e.type===e.sidebarEnum.FILTER_SETTINGS&&e.unlockedFilter?i("GlyphFilterPanel"):e.type===e.sidebarEnum.SAVED_SETS&&e.unlockedSets?i("GlyphSetSavePanel"):e.type===e.sidebarEnum.SACRIFICE_TYPE&&e.unlockedAlchemy?i("GlyphRejectionPanel"):e._e()],1)},H4e=[],V4e=K(F4e,$4e,H4e,!1,null,"24be043f");const q4e=V4e.exports,Y4e={name:"RealityAmplifyButton",data:()=>({isDoomed:!1,isVisible:!1,isDisabled:!1,isActive:!1,ratio:1,canAmplify:!1}),computed:{tooltip(){return this.isDoomed?"You cannot amplify a Doomed Reality":this.isDisabled?"You cannot amplify Celestial Realities":this.canAmplify?null:"Store more real time or complete the Reality faster to amplify"},buttonClass(){return{"l-reality-amplify-button":!0,"l-reality-amplify-button--clickable":!this.isDoomed&&this.canAmplify,"o-enslaved-mechanic-button--storing-time":this.isActive}}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.isVisible=Enslaved.isUnlocked,this.isDisabled=isInCelestialReality(),this.isActive=Enslaved.boostReality,this.ratio=Enslaved.realityBoostRatio,this.canAmplify=Enslaved.canAmplify},toggleActive(){this.canAmplify&&(Enslaved.boostReality=!Enslaved.boostReality)}}};var W4e=function(){var e=this,i=e._self._c;return e.isVisible?i("button",{class:e.buttonClass,attrs:{"ach-tooltip":e.tooltip},on:{click:e.toggleActive}},[e.isDoomed?i("div",[e._v(" You cannot amplify Doomed Realities. ")]):e.canAmplify?i("div",[e.isActive?i("span",[e._v("Will be amplified:")]):i("span",[e._v("Amplify this Reality:")]),i("br"),e._v(" All rewards ×"+e._s(e.formatInt(e.ratio))+" ")]):i("div",[e._v(" Not enough stored real time to amplify. ")])]):e._e()},j4e=[],z4e=K(Y4e,W4e,j4e,!1,null,"ece2371d");const X4e=z4e.exports,K4e={name:"RealityReminder",data(){return{canReality:!1,isVisible:!1,isExpanded:!1,ecCount:0,missingAchievements:0,unpurchasedDilationUpgrades:0,currLog10EP:0,cheapestLog10TD:0,multEPLog10Cost:0,purchasableTS:0,hasDilated:0,availableCharges:0}},computed:{suggestions(){const t=[];return this.purchasableTS>0&&t.push(`Purchase more Time Studies (${formatInt(this.purchasableTS)} available)`),this.missingAchievements>0&&t.push(`Complete the rest of your Achievements (${formatInt(this.missingAchievements)} left)`),this.unpurchasedDilationUpgrades>0&&t.push(`Purchase the remaining Dilation Upgrades (${formatInt(this.unpurchasedDilationUpgrades)} left)`),this.currLog10EP>1.3*this.cheapestLog10TD&&t.push(`Purchase more TDs (cheapest: ${format(Decimal.pow10(this.cheapestLog10TD))} EP)`),this.currLog10EP>1.3*this.multEPLog10Cost&&t.push(`Purchase more ${formatX(5)} EP (cost: ${format(Decimal.pow10(this.multEPLog10Cost))} EP)`),this.ecCount<60&&t.push(`Finish the rest of your ECs (Done: ${formatInt(this.ecCount)}/${formatInt(60)})`),this.hasDilated||t.push("Perform a Dilated Eternity"),this.availableCharges>0&&t.push(`Charge more Infinity Upgrades (${formatInt(this.availableCharges)} available)`),t},canBeExpanded(){return this.canReality&&this.suggestions.length!==0},styleObject(){const t=!this.canReality||this.canBeExpanded?"var(--color-bad)":"var(--color-good)",e=this.canBeExpanded&&this.isExpanded?`${6.5+1.5*this.suggestions.length}rem`:"5rem";return{color:t,height:e}},clickText(){return`(click to ${this.isExpanded?"collapse":"expand"})`},realityReminderClass(){return{"c-reality-reminder":!0,"c-reality-reminder-pointer":this.canBeExpanded}},dropDownIconClass(){return this.isExpanded?"far fa-minus-square":"far fa-plus-square"}},created(){this.on$(GAME_EVENT.REALITY_RESET_AFTER,()=>this.isExpanded=!1)},methods:{update(){this.canReality=TimeStudy.reality.isBought,this.isVisible=!isInCelestialReality(),this.ecCount=EternityChallenges.completions,this.missingAchievements=Achievements.preReality.countWhere(t=>!t.isUnlocked),this.unpurchasedDilationUpgrades=DilationUpgrade.all.countWhere(t=>(t.isBought===void 0?t.boughtAmount===0:!t.isBought)&&!t.config.pelleOnly),this.currLog10EP=player.eternityPoints.log10(),this.cheapestLog10TD=Math.min(...TimeDimensions.all.map(t=>t.cost.log10())),this.multEPLog10Cost=EternityUpgrade.epMult.cost.log10(),this.purchasableTS=NormalTimeStudyState.studies.countWhere(t=>t&&t.canBeBought&&!t.isBought),this.hasDilated=Perk.startTP.canBeApplied?player.dilation.lastEP.gt(0):player.dilation.tachyonParticles.gt(0),this.availableCharges=Ra.chargesLeft},clicked(){this.canBeExpanded&&(this.isExpanded=!this.isExpanded)}}};var Z4e=function(){var e=this,i=e._self._c;return e.isVisible?i("div",{class:e.realityReminderClass,style:e.styleObject,on:{click:e.clicked}},[e.canReality?e.suggestions.length===0?i("span",[e._v(" Ready to Reality! You have unlocked every available upgrade within this Reality. ")]):i("span",[i("i",{class:e.dropDownIconClass}),e._v(" You have "+e._s(e.quantifyInt("thing",e.suggestions.length))+" you may want to do before Reality. "+e._s(e.clickText)+" "),e.isExpanded?i("div",{staticClass:"l-suggestions"},[i("br"),e._l(e.suggestions,function(n){return i("div",{key:n},[e._v(" "+e._s(n)+" ")])})],2):e._e()]):i("span",[e._v(" You still need to unlock Reality in the Time Study Tree. ")])]):e._e()},Q4e=[],J4e=K(K4e,Z4e,Q4e,!1,null,"101752f1");const eHe=J4e.exports,tHe={name:"ResetRealityButton",data(){return{canReality:!1,resetCelestial:!1,isInCelestialReality:!1,isDoomed:!1}},computed:{resetText(){return this.isDoomed?"Start this Armageddon over":this.isInCelestialReality&&!this.resetCelestial?"Exit this Celestial early":this.isInCelestialReality&&this.resetCelestial?"Restart this Celestial":"Start this Reality over"}},methods:{update(){this.canReality=TimeStudy.reality.isBought&&player.records.thisReality.maxEP.exponent>=4e3,this.resetCelestial=player.options.retryCelestial,this.isInCelestialReality=isInCelestialReality(),this.isDoomed=Pelle.isDoomed},resetReality(){const t=player.options.confirmations;GameEnd.creditsClosed||(this.isInCelestialReality?t.exitChallenge?Modal.exitChallenge.show({challengeName:"a Celestial Reality",normalName:"Reality",hasHigherLayers:!1,exitFn:()=>beginProcessReality(getRealityProps(!0))}):beginProcessReality(getRealityProps(!0)):t.resetReality?Modal.resetReality.show():beginProcessReality(getRealityProps(!0)))}}};var iHe=function(){var e=this,i=e._self._c;return i("button",{class:["l-reset-reality-button","c-reset-reality-button",{"c-reset-reality-button-celestial":e.isInCelestialReality}],on:{click:e.resetReality}},[i("div",{staticClass:"l-reality-button__contents"},[e._v(" "+e._s(e.resetText)+" ")])])},nHe=[],rHe=K(tHe,iHe,nHe,!1,null,"db10bf4d");const sHe=rHe.exports,aHe={name:"TypeSacrifice",props:{type:{type:String,required:!0},hasDragover:{type:Boolean,required:!0}},data(){return{amount:0,effectValue:0,isColored:!0,willSacrifice:!1}},computed:{typeConfig(){return GlyphTypes[this.type]},sacConfig(){return GlyphSacrifice[this.type].config},style(){if(!this.isColored)return{};const t=GlyphAppearanceHandler.getBorderColor(this.type),e=this.typeConfig.id==="reality"&&!player.reality.glyphs.cosmetics.colorMap.reality;return{color:t,"text-shadow":`-1px 1px 1px var(--color-text-base), 1px 1px 1px var(--color-text-base),
                            -1px -1px 1px var(--color-text-base), 1px -1px 1px var(--color-text-base),
                            0 0 3px ${t}`,animation:e?"a-reality-glyph-description-cycle 10s infinite":void 0}},symbol(){return CosmeticGlyphTypes[this.type].currentSymbol.symbol},formatAmount(){return format(this.amount,2,2)},description(){return this.sacConfig.description(this.effectValue)},newDescription(){return this.sacConfig.description(this.sacConfig.effect(this.currentSacrifice.sacrificeValue))},currentSacrifice(){const t=this.$viewModel.tabs.reality;return t.mouseoverGlyphInfo.type===""?t.draggingGlyphInfo:t.mouseoverGlyphInfo},showNewSacrifice(){const t=this.currentSacrifice.type===this.type,e=this.willSacrifice&&this.currentSacrifice.inInventory,i=ui.view.shiftDown;return t&&(this.hasDragover||i&&e)},formatNewAmount(){return format(this.currentSacrifice.sacrificeValue,2,2)},formatTotalAmount(){return format(this.amount+this.currentSacrifice.sacrificeValue,2,2)}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute("style")})},methods:{update(){this.amount=player.reality.glyphs.sac[this.type],this.effectValue=GlyphSacrifice[this.type].effectValue,this.isColored=player.options.glyphTextColors,this.willSacrifice=AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.SACRIFICE||AutoGlyphProcessor.sacMode===AUTO_GLYPH_REJECT.REFINE_TO_CAP&&this.currentSacrifice.refineValue===0}}};var oHe=function(){var e=this,i=e._self._c;return e.amount>0?i("div",{style:e.style},[i("div",[i("div",{staticClass:"l-sacrificed-glyphs__type-symbol c-sacrificed-glyphs__type-symbol"},[e._v(" "+e._s(e.symbol)+" ")]),i("div",{staticClass:"l-sacrificed-glyphs__type-amount c-sacrificed-glyphs__type-amount"},[e._v(" "+e._s(e.formatAmount)+" "),e.showNewSacrifice?i("span",{staticClass:"c-sacrificed-glyphs__type-new-amount"},[e._v(" + "+e._s(e.formatNewAmount)+" ➜ "+e._s(e.formatTotalAmount)+" ")]):e._e()])]),e.showNewSacrifice?i("span",{staticClass:"c-sacrificed-glyphs__type-new-amount"},[e._v(" "+e._s(e.newDescription)+" ")]):i("span",[e._v(" "+e._s(e.description)+" ")])]):e._e()},lHe=[],cHe=K(aHe,oHe,lHe,!1,null,"aadaee49");const uHe=cHe.exports,dHe={name:"SacrificedGlyphs",components:{TypeSacrifice:uHe},data(){return{anySacrifices:!1,hasDragover:!1,hasAlteration:!1,hideAlteration:!1,maxSacrifice:0,teresaMult:0,lastMachinesTeresa:new Decimal(0)}},computed:{types:()=>GLYPH_TYPES.filter(t=>t!=="cursed"&&t!=="companion"),lastMachines(){return this.lastMachinesTeresa.lt(L.E10000)?`${quantify("Reality Machine",this.lastMachinesTeresa,2)}`:`${quantify("Imaginary Machine",this.lastMachinesTeresa.dividedBy(L.E10000),2)}`},dropDownIconClass(){return this.hideAlteration?"far fa-plus-square":"far fa-minus-square"},isDoomed(){return Pelle.isDoomed},addThreshold(){return GlyphAlteration.additionThreshold},empowerThreshold(){return GlyphAlteration.empowermentThreshold},boostThreshold(){return GlyphAlteration.boostingThreshold},cosmeticTypes:()=>CosmeticGlyphTypes,addStyle(){return{color:GlyphAlteration.baseAdditionColor()}},empowerStyle(){return{color:GlyphAlteration.baseEmpowermentColor()}},boostStyle(){return{color:GlyphAlteration.baseBoostColor()}},hasSeenRealityGlyph(){return player.reality.glyphs.createdRealityGlyph}},created(){this.on$(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute("cosmeticTypes")})},methods:{update(){this.anySacrifices=GameCache.logTotalGlyphSacrifice!==0,this.hasAlteration=Ra.unlocks.alteredGlyphs.canBeApplied,this.hideAlteration=player.options.hideAlterationEffects,this.maxSacrifice=GlyphSacrificeHandler.maxSacrificeForEffects,this.teresaMult=Teresa.runRewardMultiplier,this.lastMachinesTeresa.copyFrom(player.celestials.teresa.lastRepeatedMachines)},dragover(t){Pelle.isDoomed||t.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&(t.preventDefault(),this.hasDragover=!0)},dragleave(t){this.isDoomed||!t.relatedTarget||!t.relatedTarget.classList||t.relatedTarget.classList.contains("c-current-glyph-effects")||t.relatedTarget.classList.contains("c-sacrificed-glyphs__header")||t.relatedTarget.classList.contains("l-sacrificed-glyphs__type")||t.relatedTarget.classList.contains("l-sacrificed-glyphs__type-symbol")||t.relatedTarget.classList.contains("l-sacrificed-glyphs__type-amount")||t.relatedTarget.classList.contains("c-sacrificed-glyphs__type-new-amount")||t.relatedTarget.classList.length===0||(this.hasDragover=!1)},drop(t){if(this.isDoomed||!t.dataTransfer.types.includes(GLYPH_MIME_TYPE))return;const e=parseInt(t.dataTransfer.getData(GLYPH_MIME_TYPE),10);if(isNaN(e))return;const i=Glyphs.findById(e);i&&(GlyphSacrificeHandler.sacrificeGlyph(i,!0),this.hasDragover=!1)},toggleAlteration(){player.options.hideAlterationEffects=!player.options.hideAlterationEffects},glyphSymbol(t){return this.cosmeticTypes[t].currentSymbol.symbol}}};var hHe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-current-glyph-effects l-current-glyph-effects",class:{"c-sacrificed-glyphs--dragover":e.hasDragover},on:{dragover:e.dragover,dragleave:e.dragleave,drop:e.drop}},[i("div",{staticClass:"l-sacrificed-glyphs__help"},[e.isDoomed?i("span",{staticClass:"pelle-current-glyph-effects"},[e._v(" You cannot sacrifice Glyphs while Doomed. ")]):i("span",[i("div",[e._v("Drag Glyphs here or shift-click to Sacrifice.")]),i("div",[e._v("The confirmation can be disabled in Options or by holding Ctrl.")])])]),e.hasAlteration?i("div",[i("span",{staticClass:"c-altered-glyphs-toggle-button",on:{click:e.toggleAlteration}},[i("i",{class:e.dropDownIconClass}),i("b",[e._v(" Altered Glyphs")])]),i("br"),e.hideAlteration?i("div",[e._v(" (Details hidden, click to unhide) ")]):i("div",[e._v(" Glyph types will have one of their effects improved"),i("br"),e._v(" when their Glyph type's total sacrifice value is above: "),i("br"),i("br"),i("b",[i("span",{style:e.addStyle},[e._v(e._s(e.format(e.addThreshold))+" - an additional secondary effect")]),i("br"),i("span",{style:e.empowerStyle},[e._v(e._s(e.format(e.empowerThreshold))+" - formula drastically improved")]),i("br"),i("span",{style:e.boostStyle},[e._v(e._s(e.format(e.boostThreshold))+" - a boost depending on Glyph Sacrifice")])]),i("br"),i("br"),e._v(" All effects from Glyph Sacrifice can no longer be increased once they reach "+e._s(e.format(e.maxSacrifice))+". ")])]):e._e(),i("br"),i("div",{staticClass:"c-sacrificed-glyphs__header"},[e._v(" Glyph Sacrifice Boosts: ")]),e.anySacrifices&&!e.isDoomed?i("div",[e.teresaMult>1?i("div",[e._v(" Glyph sacrifice values are multiplied by "+e._s(e.formatX(e.teresaMult,2,2))+"; Teresa was last done at "+e._s(e.lastMachines)+". "),e.hasSeenRealityGlyph?i("span",[e._v(" Reality Glyphs are unaffected by this multiplier and have no altered effects. ")]):e._e()]):e._e(),e._l(e.types,function(n){return[i("TypeSacrifice",{key:n+e.glyphSymbol(n),attrs:{type:n,"has-dragover":e.hasDragover}})]})],2):e.isDoomed?i("div",{staticClass:"pelle-current-glyph-effects"},[e._v(" All boosts from Glyph Sacrifice are disabled while Doomed, including changes to effects due to Altered Glyphs. ")]):i("div",[e._v(" You haven't Sacrificed any Glyphs yet! ")])])},fHe=[],pHe=K(dHe,hHe,fHe,!1,null,"5207b928");const mHe=pHe.exports,yHe={name:"SingleGlyphCustomzationPanel",components:{GlyphComponent:du,PrimaryButton:yt},data(){return{glyphID:-1,isVisible:!0}},computed:{glyph(){if(this.glyphID===-1)return null;const t=Glyphs.findById(this.glyphID);return{type:t.type,level:t.level,strength:t.strength,effects:t.effects,color:t.color,symbol:t.symbol,cosmetic:t.cosmetic}},typeCosmetic(){const t=[];return GlyphAppearanceHandler.symbolMap[this.glyph.type]&&t.push("Symbol"),GlyphAppearanceHandler.colorMap[this.glyph.type]&&t.push("Color"),t.length===0?"None":t.join("/")},specialCosmetic(){if(this.glyph.cosmetic)return this.glyph.cosmetic.capitalize();const t=[];return this.glyph.symbol&&t.push("Symbol"),this.glyph.color&&t.push("Color"),t.length===0?"None":t.join("/")}},created(){EventHub.logic.on(GAME_EVENT.GLYPHS_CHANGED,()=>{this.glyphID=-1,this.$recompute("glyph")}),EventHub.logic.on(GAME_EVENT.GLYPH_VISUAL_CHANGE,()=>{this.$recompute("glyph")})},methods:{update(){this.isVisible=player.reality.glyphs.cosmetics.active&&(GlyphAppearanceHandler.availableTypes.length>0||CosmeticGlyphTypes.list.some(t=>t.isCosmetic&&t.isUnlocked()))},dragover(t){t.dataTransfer.types.includes(GLYPH_MIME_TYPE)&&t.preventDefault()},drop(t){if(!t.dataTransfer.types.includes(GLYPH_MIME_TYPE))return;const e=parseInt(t.dataTransfer.getData(GLYPH_MIME_TYPE),10);isNaN(e)||(EventHub.dispatch(GAME_EVENT.GLYPH_VISUAL_CHANGE),this.glyphID=e,this.$recompute("glyph"))},openModal(){Modal.singleGlyphAppearance.show({glyphId:this.glyphID})}}};var gHe=function(){var e=this,i=e._self._c;return e.isVisible?i("div",{staticClass:"c-single-glyph-cosmetic",on:{dragover:e.dragover,drop:e.drop}},[e.glyph?i("div",{staticClass:"c-glyph-info"},[i("div",{staticClass:"c-glyph-info-section"},[i("GlyphComponent",{attrs:{glyph:e.glyph,"flip-tooltip":!0}})],1),i("div",{staticClass:"c-glyph-info-section c-cosmetic-text"},[i("u",[e._v("Cosmetic Attributes")]),e._v(" Type: "+e._s(e.glyph.type.capitalize())+" "),i("br"),e._v(" All: "+e._s(e.typeCosmetic)+" "),i("br"),e._v(" Single: "+e._s(e.specialCosmetic)+" ")]),i("div",{staticClass:"c-glyph-info-section"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.openModal}},[e._v(" Customize! ")]),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:function(n){e.glyphID=-1}}},[e._v(" Clear Box ")])],1)]):i("div",[e._v(" Drag a Glyph over this box to change its appearance! This will make a visual copy of it here, but leave the actual Glyph itself in your inventory. Removing, gaining, or moving any Glyphs will clear this box. ")])]):e._e()},vHe=[],bHe=K(yHe,gHe,vHe,!1,null,"1d1b021e");const _He=bHe.exports,EHe={name:"GlyphsTab",components:{ExpandingControlBox:fc,GlyphTabSidebar:q4e,GlyphPeek:P5e,RealityAmplifyButton:X4e,GlyphInventory:v5e,SacrificedGlyphs:mHe,CurrentGlyphEffects:l5e,EquippedGlyphs:f5e,GlyphLevelsAndWeights:R5e,ResetRealityButton:sHe,RealityReminder:eHe,SingleGlyphCustomzationPanel:_He},data(){return{enslavedHint:"",showInstability:!1,instabilityThreshold:0,hyperInstabilityThreshold:0,isInCelestialReality:!1,canAmplify:!1,glyphTextColors:!0,autoRestartCelestialRuns:!1,sacrificeUnlocked:!1,sacrificeDisplayed:!1,resetRealityDisplayed:!1}},computed:{showEnslavedHint(){return this.enslavedHint!==""},glyphColorState(){return{"o-glyph-color-checkbox":!0,"o-glyph-color-checkbox--active":this.glyphTextColors,"o-glyph-color-checkbox--inactive":!this.glyphTextColors}}},methods:{update(){if(this.resetRealityDisplayed=PlayerProgress.realityUnlocked(),this.showInstability=player.records.bestReality.glyphLevel>800,this.instabilityThreshold=Glyphs.instabilityThreshold,this.hyperInstabilityThreshold=Glyphs.hyperInstabilityThreshold,this.isInCelestialReality=isInCelestialReality(),this.canAmplify=Enslaved.isUnlocked&&!this.isInCelestialReality,this.autoRestartCelestialRuns=player.options.retryCelestial,this.glyphTextColors=player.options.glyphTextColors,this.enslavedHint="",this.sacrificeUnlocked=GlyphSacrificeHandler.canSacrifice,this.sacrificeDisplayed=player.reality.showGlyphSacrifice,!Enslaved.isRunning)return;Glyphs.activeWithoutCompanion.find(e=>e.level<Enslaved.glyphLevelMin)!==void 0&&(this.enslavedHint="done... what little... I can... with Glyphs...")},toggleAutoRestartCelestial(){player.options.retryCelestial=!player.options.retryCelestial},toggleGlyphTextColors(){player.options.glyphTextColors=!player.options.glyphTextColors},glyphInfoClass(t){return{"l-glyph-info-button":!0,"c-glyph-info-button":!0,"c-glyph-info-button--active":t,"c-glyph-info-button--inactive":!t}},setInfoState(t){player.reality.showGlyphSacrifice=t},glyphColorPosition(){return this.sacrificeUnlocked?"l-glyph-color-position__low":"l-glyph-color-position__top"},glyphInfoBorderClass(){return{"c-current-glyph-effects-with-top-border":!this.sacrificeUnlocked}},buttonGroupClass(){return{"l-half-width":this.canAmplify}}}};var THe=function(){var e=this,i=e._self._c;return i("div",[i("div",{staticClass:"l-glyphs-tab"},[i("div",{staticClass:"l-reality-button-column"},[i("GlyphPeek"),e.resetRealityDisplayed?i("div",{staticClass:"l-reality-button-group"},[e.isInCelestialReality?e._e():i("RealityAmplifyButton",{class:e.buttonGroupClass()}),i("ResetRealityButton",{class:e.buttonGroupClass()})],1):e._e(),e.isInCelestialReality?i("div",{staticClass:"l-celestial-auto-restart-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.autoRestartCelestialRuns,expression:"autoRestartCelestialRuns"}],staticClass:"o-clickable",attrs:{id:"autoRestart",type:"checkbox"},domProps:{value:e.autoRestartCelestialRuns,checked:Array.isArray(e.autoRestartCelestialRuns)?e._i(e.autoRestartCelestialRuns,e.autoRestartCelestialRuns)>-1:e.autoRestartCelestialRuns},on:{input:function(n){return e.toggleAutoRestartCelestial()},change:function(n){var r=e.autoRestartCelestialRuns,s=n.target,a=!!s.checked;if(Array.isArray(r)){var o=e.autoRestartCelestialRuns,c=e._i(r,o);s.checked?c<0&&(e.autoRestartCelestialRuns=r.concat([o])):c>-1&&(e.autoRestartCelestialRuns=r.slice(0,c).concat(r.slice(c+1)))}else e.autoRestartCelestialRuns=a}}}),i("label",{staticClass:"o-clickable",attrs:{for:"autoRestart"}},[e._v(" Repeat this Celestial's Reality ")])]):e._e(),i("br"),i("RealityReminder"),e.showInstability?i("div",[i("br"),e._v(" Glyphs are becoming unstable. "),i("br"),e._v(" Glyph levels higher than "+e._s(e.formatInt(e.instabilityThreshold))+" are harder to reach. "),i("br"),e._v(" This effect is even stronger above level "+e._s(e.formatInt(e.hyperInstabilityThreshold))+". ")]):e._e(),i("SingleGlyphCustomzationPanel"),i("ExpandingControlBox",{staticClass:"l-glyph-level-factors",attrs:{"width-source":"content",label:"Glyph Level Factors","container-class":"c-glyph-level-factors-dropdown-header"},scopedSlots:e._u([{key:"dropdown",fn:function(){return[i("GlyphLevelsAndWeights")]},proxy:!0}])}),i("GlyphTabSidebar")],1),i("div",{staticClass:"l-player-glyphs-column"},[e.showEnslavedHint?i("div",{staticClass:"o-teresa-quotes",domProps:{innerHTML:e._s(e.enslavedHint)}}):e._e(),i("div",{staticClass:"l-equipped-glyphs-and-effects-container"},[i("EquippedGlyphs"),i("div",{staticClass:"l-glyph-info-wrapper"},[i("span",{staticClass:"l-glyph-color-box",on:{click:e.toggleGlyphTextColors}},[i("div",{class:e.glyphColorPosition()},[i("label",{class:e.glyphColorState},[i("span",{staticClass:"fas fa-palette"})])])]),e.sacrificeUnlocked?i("div",{staticClass:"c-glyph-info-options"},[i("button",{class:e.glyphInfoClass(!e.sacrificeDisplayed),on:{click:function(n){return e.setInfoState(!1)}}},[e._v(" Current Glyph effects ")]),i("button",{class:e.glyphInfoClass(e.sacrificeDisplayed),on:{click:function(n){return e.setInfoState(!0)}}},[e._v(" Glyph Sacrifice totals ")])]):e._e(),e.sacrificeUnlocked&&e.sacrificeDisplayed?i("SacrificedGlyphs"):i("CurrentGlyphEffects",{class:e.glyphInfoBorderClass()})],1)],1),i("GlyphInventory")],1)])])},wHe=[],CHe=K(EHe,THe,wHe,!1,null,"0a345430");const SHe=CHe.exports,kHe={name:"ImaginaryUpgradeButton",components:{PrimaryToggleButton:cn,DescriptionDisplay:Qs,EffectDisplay:lo,CostDisplay:mc,HintText:gc},props:{upgrade:{type:Object,required:!0}},data(){return{isAvailableForPurchase:!1,canBeBought:!1,isRebuyable:!1,isBought:!1,isPossible:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,etaText:"",canBeLocked:!1,hasRequirementLock:!1}},computed:{config(){return this.upgrade.config},classObject(){return{"c-reality-upgrade-btn--useless":this.upgrade.pelleDisabled,"c-reality-upgrade-btn--bought":this.isBought&&!this.upgrade.pelleDisabled,"c-reality-upgrade-btn--unavailable":!this.isBought&&!this.canBeBought&&this.isAvailableForPurchase,"c-reality-upgrade-btn--possible":!this.isAvailableForPurchase&&this.isPossible,"c-reality-upgrade-btn--locked":!this.isAvailableForPurchase&&!this.isPossible}},requirementConfig(){return{description:this.config.requirement}},canLock(){return this.config.canLock&&!(this.isAvailableForPurchase||this.isBought)},isDoomed:()=>Pelle.isDoomed},watch:{isAutobuyerOn(t){Autobuyer.imaginaryUpgrade(this.upgrade.id).isActive=t}},methods:{update(){const t=this.upgrade;this.isAvailableForPurchase=t.isAvailableForPurchase,this.canBeBought=t.canBeBought,this.isRebuyable=t.isRebuyable,this.isBought=!t.isRebuyable&&t.isBought,this.isPossible=t.isPossible,this.isAutoUnlocked=ImaginaryUpgrade(20).canBeApplied,this.canBeLocked=t.config.canLock&&!this.isAvailableForPurchase,this.hasRequirementLock=t.hasPlayerLock,this.isRebuyable&&(this.isAutobuyerOn=Autobuyer.imaginaryUpgrade(t.id).isActive),this.etaText=this.getETAText()},getETAText(){if(this.canBeBought||!this.isAvailableForPurchase||this.isBought||Pelle.isDoomed)return"";const t=MachineHandler.estimateIMTimer(this.upgrade.cost);return isFinite(t)?TimeSpan.fromSeconds(t).toString():"Never affordable"},toggleLock(t){this.isRebuyable||t.toggleMechanicLock()}}};var AHe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.etaText,expression:"etaText"}],staticClass:"l-spoon-btn-group"},[i("button",{staticClass:"l-reality-upgrade-btn c-reality-upgrade-btn",class:e.classObject,on:{click:[function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.toggleLock(e.upgrade)},function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.upgrade.purchase()}]}},[i("HintText",{staticClass:"l-hint-text--reality-upgrade c-hint-text--reality-upgrade",attrs:{type:"realityUpgrades"}},[e._v(" "+e._s(e.config.name)+" ")]),i("span",{class:{"o-pelle-disabled":e.upgrade.pelleDisabled}},[i("DescriptionDisplay",{attrs:{config:e.config}}),e.$viewModel.shiftDown===e.isAvailableForPurchase&&!e.isRebuyable?[i("br"),i("DescriptionDisplay",{staticClass:"c-reality-upgrade-btn__requirement",attrs:{config:e.requirementConfig,label:"Requirement:"}})]:[i("EffectDisplay",{attrs:{config:e.config,br:""}}),e.isBought?e._e():i("CostDisplay",{attrs:{config:e.config,br:"",name:"Imaginary Machine"}})]],2)],1),e.canBeLocked?i("div",{staticClass:"o-requirement-lock"},[e.hasRequirementLock?i("i",{staticClass:"fas fa-lock"}):e.canLock?i("i",{staticClass:"fas fa-lock-open"}):e._e()]):e._e(),e.isRebuyable&&e.isAutoUnlocked?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon-reality-btn o-primary-btn--reality-upgrade-toggle",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):e._e()],1)},RHe=[],IHe=K(kHe,AHe,RHe,!1,null,"6c488fea");const DHe=IHe.exports,xHe={name:"ImaginaryUpgradesTab",components:{ImaginaryUpgradeButton:DHe},data(){return{baseRMCap:new Decimal,capRM:new Decimal,scaleTime:0,capStr:""}},computed:{upgrades:()=>ImaginaryUpgrades.all,lockTooltip:()=>`Requirement locks only prevent manual and automated actions. Any related upgrades
      will not be disabled and may still cause requirements to be failed.`},methods:{update(){this.baseRMCap.copyFrom(MachineHandler.baseRMCap),this.capRM.copyFrom(MachineHandler.hardcapRM),this.scaleTime=MachineHandler.scaleTimeForIM,this.capStr=formatMachines(MachineHandler.hardcapRM,MachineHandler.currentIMCap)},id(t,e){return(t-1)*5+e-1}}};var MHe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-reality-upgrade-grid"},[i("div",{staticClass:"c-cap-text"},[e._v(" Your Machine cap is "),i("span",{staticClass:"c-reality-tab__reality-machines"},[e._v(e._s(e.capStr))]),e._v(". ")]),i("div",{staticClass:"c-info-text"},[e._v(" You have reached the limits of Reality and cannot hold more than "+e._s(e.format(e.capRM))+" Reality Machines. "),i("br"),e._v(" Machines gained in excess of "+e._s(e.format(e.baseRMCap))+" will raise the maximum amount of Imaginary Machines you can have. "),i("br"),e._v(" Imaginary Machines are gained passively over time up to the cap, but gain slows down exponentially as you approach the cap. "),i("br"),e._v(" Every "+e._s(e.formatInt(e.scaleTime))+" seconds the difference in iM between your current amount and the cap will be cut in half. "),i("br"),i("br"),e._v(" The first two rows of upgrades can be purchased endlessly and the rest of the upgrades are one-time upgrades with requirements. "),i("br"),e._v(" Upgrades here have the same gameplay and visual behavior as Reality Upgrades, but cost Imaginary Machines instead. "),i("span",{attrs:{"ach-tooltip":e.lockTooltip}},[i("i",{staticClass:"fas fa-question-circle"})])]),e._l(5,function(n){return i("div",{key:n,staticClass:"l-reality-upgrade-grid__row"},e._l(5,function(r){return i("ImaginaryUpgradeButton",{key:e.id(n,r),attrs:{upgrade:e.upgrades[e.id(n,r)]}})}),1)})],2)},PHe=[],OHe=K(xHe,MHe,PHe,!1,null,"0237c183");const NHe=OHe.exports,GHe={name:"ChallengeBox",components:{HintText:gc},props:{name:{type:String,required:!0},isUnlocked:{type:Boolean,required:!0},isRunning:{type:Boolean,required:!0},isCompleted:{type:Boolean,required:!0},lockedAt:{type:Decimal,required:!1,default:void 0},overrideLabel:{type:String,required:!1,default:""}},data(){return{inC1:Boolean,infinities:new Decimal(0)}},computed:{buttonClassObject(){const t=!(this.isCompleted||this.isRunning||this.inC1||this.isUnlocked),e=!this.isUnlocked||this.isRunning||this.name==="C1";return{"o-challenge-btn":!0,"o-challenge-btn--broken":this.overrideLabel.length>0&&this.name!=="C10","o-challenge-btn--broken-alt":this.overrideLabel.length>0&&this.name==="C10","o-challenge-btn--running":this.isRunning||this.inC1,"o-challenge-btn--completed":this.isCompleted&&this.isUnlocked,"o-challenge-btn--unlocked":!this.isCompleted&&this.isUnlocked,"o-challenge-btn--locked":t,"o-challenge-btn--unenterable":e}},buttonText(){return this.overrideLabel.length>0?this.overrideLabel:this.isRunning||this.inC1?"Running":this.isCompleted?"Completed":this.isUnlocked?"Start":`Locked${this.lockedAt===void 0?"":` (${formatInt(this.infinities)}/${formatInt(this.lockedAt)})`}`}},methods:{update(){this.inC1=this.name==="C1"&&!this.isCompleted&&!Player.isInAntimatterChallenge,this.infinities.copyFrom(Currency.infinities)}}};var UHe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-challenge-box l-challenge-box"},[i("HintText",{staticClass:"l-hint-text--challenge",attrs:{type:"challenges"}},[e._v(" "+e._s(e.name)+" ")]),e._t("top"),i("div",{staticClass:"l-challenge-box__fill"}),i("button",{class:e.buttonClassObject,on:{click:function(n){return e.$emit("start")}}},[e._v(" "+e._s(e.buttonText)+" ")]),e._t("bottom")],2)},LHe=[],BHe=K(GHe,UHe,LHe,!1,null,"9fd1b421");const d4=BHe.exports,FHe={name:"InfinityChallengeBox",components:{ChallengeBox:d4,DescriptionDisplay:Qs,EffectDisplay:lo},props:{challenge:{type:Object,required:!0}},data(){return{isUnlocked:!1,isRunning:!1,isCompleted:!1}},computed:{config(){return this.challenge.config},name(){return`IC${this.challenge.id}`}},methods:{update(){const t=this.challenge;this.isUnlocked=t.isUnlocked,this.isRunning=t.isRunning,this.isCompleted=t.isCompleted}}};var $He=function(){var e=this,i=e._self._c;return i("ChallengeBox",{staticClass:"c-challenge-box--infinity",attrs:{name:e.name,"is-unlocked":e.isUnlocked,"is-running":e.isRunning,"is-completed":e.isCompleted},on:{start:function(n){return e.challenge.requestStart()}},scopedSlots:e._u([{key:"top",fn:function(){return[i("DescriptionDisplay",{attrs:{config:e.config}}),e.isRunning?i("EffectDisplay",{attrs:{config:e.config}}):e._e()]},proxy:!0},{key:"bottom",fn:function(){return[i("div",{staticClass:"l-challenge-box__bottom--infinity"},[i("span",[e._v("Goal: "+e._s(e.format(e.config.goal))+" antimatter")]),i("DescriptionDisplay",{attrs:{config:e.config.reward,title:"Reward:"}}),i("EffectDisplay",{attrs:{config:e.config.reward}})],1)]},proxy:!0}])})},HHe=[],VHe=K(FHe,$He,HHe,!1,null,"197c3d92");const qHe=VHe.exports,YHe={name:"InfinityChallengesTab",components:{ChallengeGrid:WR,ChallengeTabHeader:jR,InfinityChallengeBox:qHe},data(){return{nextIC:0,showAllChallenges:!1}},computed:{challenges(){return InfinityChallenges.all},nextAtDisplay(){var i;const t=((i=this.nextIC)==null?void 0:i.id)===1,e=InfinityChallenges.nextICUnlockAM;return t?`The first Infinity Challenge unlocks at ${format(e)} antimatter.`:e===void 0?"All Infinity Challenges unlocked":`Next Infinity Challenge unlocks at ${format(e)} antimatter.`}},methods:{update(){this.nextIC=InfinityChallenges.nextIC,this.showAllChallenges=player.options.showAllChallenges},isChallengeVisible(t){return t.isUnlocked||this.showAllChallenges&&PlayerProgress.eternityUnlocked()}}};var WHe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-challenges-tab"},[i("ChallengeTabHeader"),i("div",[e._v(" An active Big Crunch Autobuyer will Crunch immediately when reaching an Infinity Challenge's antimatter goal, regardless of settings. ")]),i("div",[e._v(e._s(e.nextAtDisplay))]),i("ChallengeGrid",{attrs:{challenges:e.challenges,"is-challenge-visible":e.isChallengeVisible},scopedSlots:e._u([{key:"default",fn:function({challenge:n}){return[i("InfinityChallengeBox",{attrs:{challenge:n}})]}}])})],1)},jHe=[],zHe=K(YHe,WHe,jHe,!1,null,"361016e9");const XHe=zHe.exports,KHe={name:"ClassicInfinityDimensionRow",components:{GenericDimensionRowText:yy,PrimaryButton:yt,PrimaryToggleButton:cn},props:{tier:{type:Number,required:!0}},data(){return{hasPrevTier:!1,isUnlocked:!1,canUnlock:!1,multiplier:new Decimal(0),baseAmount:0,amount:new Decimal(0),purchases:0,rateOfChange:new Decimal(0),isAutobuyerUnlocked:!1,cost:new Decimal(0),isAvailableForPurchase:!1,isCapped:!1,capIP:new Decimal(0),isAutobuyerOn:!1,isEC8Running:!1,hardcap:InfinityDimensions.HARDCAP_PURCHASES,eternityReached:!1,enslavedRunning:!1}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${InfinityDimension(this.tier).shortDisplayName} Infinity Dimension`},costDisplay(){return this.isUnlocked||this.shiftDown?this.isCapped?"Capped":this.showCostTitle?`Cost: ${format(this.cost)} IP`:`${format(this.cost)} IP`:this.canUnlock?"Unlock":`Reach ${formatPostBreak(InfinityDimension(this.tier).amRequirement)} AM`},hasLongText(){return this.costDisplay.length>20},hardcapPurchases(){return format(this.hardcap,1,1)},capTooltip(){return this.enslavedRunning?`Nameless prevents the purchase of more than ${format(10)} Infinity Dimensions`:this.isCapped?`Cap reached at ${format(this.capIP)} IP`:`Purchased ${quantifyInt("time",this.purchases)}`},showRow(){return this.eternityReached||this.isUnlocked||this.canUnlock||this.amount.gt(0)||this.hasPrevTier},showCostTitle(){return this.cost.exponent<1e5}},watch:{isAutobuyerOn(t){Autobuyer.infinityDimension(this.tier).isActive=t}},methods:{update(){const t=this.tier,e=InfinityDimension(t);this.hasPrevTier=t===1||InfinityDimension(t-1).isUnlocked;const i=Autobuyer.infinityDimension(t);this.isUnlocked=e.isUnlocked,this.canUnlock=e.canUnlock,this.multiplier.copyFrom(e.multiplier),this.baseAmount=e.baseAmount,this.purchases=e.purchases,this.amount.copyFrom(e.amount),this.rateOfChange.copyFrom(e.rateOfChange),this.isAutobuyerUnlocked=i.isUnlocked,this.cost.copyFrom(e.cost),this.isAvailableForPurchase=e.isAvailableForPurchase,this.isCapped=e.isCapped,this.isCapped&&(this.capIP.copyFrom(e.hardcapIPAmount),this.hardcap=e.purchaseCap),this.isEC8Running=EternityChallenge(8).isRunning,this.isAutobuyerOn=i.isActive,this.eternityReached=PlayerProgress.eternityUnlocked(),this.enslavedRunning=Enslaved.isRunning},buySingleInfinityDimension(){InfinityDimension(this.tier).buySingle()},buyMaxInfinityDimension(){InfinityDimension(this.tier).buyMax(!1)}}};var ZHe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showRow,expression:"showRow"}],staticClass:"c-dimension-row l-dimension-single-row",class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.canUnlock}},[i("GenericDimensionRowText",{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),"amount-text":e.format(e.amount,2),rate:e.rateOfChange}}),i("div",{staticClass:"l-dim-row-multi-button-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--buy-id o-primary-btn--buy-dim c-dim-tooltip-container",class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase||!e.isUnlocked&&e.canUnlock},on:{click:e.buySingleInfinityDimension}},[e._v(" "+e._s(e.costDisplay)+" "),i("div",{staticClass:"c-dim-purchase-count-tooltip"},[e._v(" "+e._s(e.capTooltip)+" ")])]),e.isAutobuyerUnlocked&&!e.isEC8Running?i("PrimaryToggleButton",{staticClass:"o-primary-btn--id-auto",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):i("PrimaryButton",{staticClass:"o-primary-btn--id-auto",attrs:{enabled:e.isAvailableForPurchase&&e.isUnlocked},on:{click:e.buyMaxInfinityDimension}},[e._v(" Buy Max ")])],1)],1)},QHe=[],JHe=K(KHe,ZHe,QHe,!1,null,null);const e6e=JHe.exports,t6e={name:"ClassicInfinityDimensionsTab",components:{PrimaryButton:yt,InfinityDimensionRow:e6e},data(){return{infinityPower:new Decimal(0),dimMultiplier:new Decimal(0),powerPerSecond:new Decimal(0),incomeType:"",isEC8Running:!1,EC8PurchasesLeft:0,isEC9Running:!1,isEnslavedRunning:!1,isAnyAutobuyerUnlocked:!1,conversionRate:0,nextDimCapIncrease:0,tesseractCost:new Decimal(0),totalDimCap:0,canBuyTesseract:!1,enslavedCompleted:!1,boughtTesseracts:0,extraTesseracts:0,creditsClosed:!1,showLockedDimCostNote:!0}},computed:{tesseractCountString(){const t=this.extraTesseracts>0?` + ${format(this.extraTesseracts,2,2)}`:"";return`${formatInt(this.boughtTesseracts)}${t}`}},methods:{update(){this.showLockedDimCostNote=!InfinityDimension(8).isUnlocked,this.isEC9Running=EternityChallenge(9).isRunning,this.infinityPower.copyFrom(Currency.infinityPower),this.conversionRate=InfinityDimensions.powerConversionRate,this.isEC9Running?this.dimMultiplier.copyFrom(Decimal.pow(Math.max(this.infinityPower.log2(),1),4).max(1)):this.dimMultiplier.copyFrom(this.infinityPower.pow(this.conversionRate).max(1)),this.powerPerSecond.copyFrom(InfinityDimension(1).productionPerRealSecond),this.incomeType=EternityChallenge(7).isRunning?"Seventh Dimensions":"Infinity Power",this.isEC8Running=EternityChallenge(8).isRunning,this.isEC8Running&&(this.EC8PurchasesLeft=player.eterc8ids),this.isEnslavedRunning=Enslaved.isRunning,this.isAnyAutobuyerUnlocked=Autobuyer.infinityDimension(1).isUnlocked,this.nextDimCapIncrease=Tesseracts.nextTesseractIncrease,this.tesseractCost.copyFrom(Tesseracts.nextCost),this.totalDimCap=InfinityDimensions.totalDimCap,this.canBuyTesseract=Tesseracts.canBuyTesseract,this.enslavedCompleted=Enslaved.isCompleted,this.boughtTesseracts=Tesseracts.bought,this.extraTesseracts=Tesseracts.extra,this.creditsClosed=GameEnd.creditsEverClosed},maxAll(){InfinityDimensions.buyMax()},toggleAllAutobuyers(){toggleAllInfDims()},buyTesseract(){Tesseracts.buyTesseract()}}};var i6e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-infinity-dim-tab"},[i("div",{staticClass:"c-subtab-option-container"},[e.isEC8Running?e._e():i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.maxAll}},[e._v(" Max all ")]),e.isAnyAutobuyerUnlocked&&!e.isEC8Running?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.toggleAllAutobuyers}},[e._v(" Toggle all autobuyers ")]):e._e()],1),i("div",[i("p",[e._v(" You have "),i("span",{staticClass:"c-infinity-dim-description__accent"},[e._v(e._s(e.format(e.infinityPower,2,1)))]),e._v(" Infinity Power, "),i("br"),e.isEC9Running?i("span",[e._v(" translated ")]):i("span",[e._v(" increased by "),i("span",{staticClass:"c-infinity-dim-description__accent"},[e._v(e._s(e.formatPow(e.conversionRate,2,3)))])]),e._v(" to a "),i("span",{staticClass:"c-infinity-dim-description__accent"},[e._v(e._s(e.formatX(e.dimMultiplier,2,1)))]),e._v(" multiplier on all "),e.isEC9Running?i("span",[e._v("Time Dimensions due to Eternity Challenge 9.")]):i("span",[e._v("Antimatter Dimensions.")])])]),e.enslavedCompleted?i("div",{staticClass:"l-infinity-dim-tab__enslaved-reward-container"},[i("button",{staticClass:"c-infinity-dim-tab__tesseract-button",class:{"c-infinity-dim-tab__tesseract-button--disabled":!e.canBuyTesseract,"o-pelle-disabled-pointer":e.creditsClosed},on:{click:e.buyTesseract}},[i("p",[e._v(" Buy a Tesseract ("+e._s(e.tesseractCountString)+") ")]),i("p",[e._v("Increase Infinity Dimension caps by "+e._s(e.format(e.nextDimCapIncrease,2)))]),i("p",[i("b",[e._v("Costs: "+e._s(e.format(e.tesseractCost))+" IP")])])])]):e._e(),e.isEnslavedRunning?i("div",[e._v(" All Infinity Dimensions are limited to a single purchase. ")]):i("div",[e._v(" All Infinity Dimensions except for the 8th are limited to a maximum of "+e._s(e.format(e.totalDimCap,2))+" purchases each. ")]),i("div",[e._v("You are getting "+e._s(e.format(e.powerPerSecond,2,0))+" "+e._s(e.incomeType)+" per second.")]),e.isEC8Running?i("b",{staticClass:"l-infinity-dim-tab__ec8-purchases"},[e._v(" You have "+e._s(e.quantifyInt("purchase",e.EC8PurchasesLeft))+" left within Eternity Challenge 8. ")]):e._e(),i("div",{staticClass:"l-dimensions-container"},e._l(8,function(n){return i("InfinityDimensionRow",{key:n,attrs:{tier:n}})}),1),e.showLockedDimCostNote?i("div",[e._v(" Hold shift to see the Infinity Point cost for locked Infinity Dimensions. ")]):e._e()])},n6e=[],r6e=K(t6e,i6e,n6e,!1,null,null);const s6e=r6e.exports,a6e={name:"ModernInfinityDimensionRow",components:{GenericDimensionRowText:yy,PrimaryButton:yt,PrimaryToggleButton:cn},props:{tier:{type:Number,required:!0}},data(){return{hasPrevTier:!1,isUnlocked:!1,canUnlock:!1,multiplier:new Decimal(0),baseAmount:0,amount:new Decimal(0),purchases:0,rateOfChange:new Decimal(0),isAutobuyerUnlocked:!1,cost:new Decimal(0),isAvailableForPurchase:!1,isCapped:!1,capIP:new Decimal(0),isAutobuyerOn:!1,isEC8Running:!1,hardcap:InfinityDimensions.HARDCAP_PURCHASES,eternityReached:!1,enslavedRunning:!1}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${InfinityDimension(this.tier).shortDisplayName} Infinity Dimension`},costDisplay(){return this.isUnlocked||this.shiftDown?this.isCapped?"Capped":this.showCostTitle?`Cost: ${format(this.cost)} IP`:`${format(this.cost)} IP`:this.canUnlock?"Unlock":`Reach ${formatPostBreak(InfinityDimension(this.tier).amRequirement)} AM`},hasLongText(){return this.costDisplay.length>20},capTooltip(){return this.enslavedRunning?`Nameless prevents the purchase of more than ${format(10)} Infinity Dimensions`:this.isCapped?`Cap reached at ${format(this.capIP)} IP`:`Purchased ${quantifyInt("time",this.purchases)}`},showRow(){return this.eternityReached||this.isUnlocked||this.canUnlock||this.amount.gt(0)||this.hasPrevTier},showCostTitle(){return this.cost.exponent<1e5}},watch:{isAutobuyerOn(t){Autobuyer.infinityDimension(this.tier).isActive=t}},methods:{update(){const t=this.tier,e=InfinityDimension(t);this.hasPrevTier=t===1||InfinityDimension(t-1).isUnlocked,this.isUnlocked=e.isUnlocked,this.canUnlock=e.canUnlock,this.multiplier.copyFrom(e.multiplier),this.baseAmount=e.baseAmount,this.purchases=e.purchases,this.amount.copyFrom(e.amount),this.rateOfChange.copyFrom(e.rateOfChange),this.isAutobuyerUnlocked=Autobuyer.infinityDimension(t).isUnlocked,this.cost.copyFrom(e.cost),this.isAvailableForPurchase=e.isAvailableForPurchase,this.isCapped=e.isCapped,this.isCapped&&(this.capIP.copyFrom(e.hardcapIPAmount),this.hardcap=e.purchaseCap),this.isEC8Running=EternityChallenge(8).isRunning,this.isAutobuyerOn=Autobuyer.infinityDimension(t).isActive,this.eternityReached=PlayerProgress.eternityUnlocked(),this.enslavedRunning=Enslaved.isRunning},buySingleInfinityDimension(){InfinityDimension(this.tier).buySingle()},buyMaxInfinityDimension(){InfinityDimension(this.tier).buyMax(!1)}}};var o6e=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showRow,expression:"showRow"}],staticClass:"c-dimension-row l-dimension-row-infinity-dim l-dimension-single-row",class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.canUnlock}},[i("GenericDimensionRowText",{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),"amount-text":e.format(e.amount,2),rate:e.rateOfChange}}),i("div",{staticClass:"l-dim-row-multi-button-container c-modern-dim-tooltip-container"},[i("div",{staticClass:"c-modern-dim-purchase-count-tooltip"},[e._v(" "+e._s(e.capTooltip)+" ")]),i("PrimaryButton",{staticClass:"o-primary-btn--buy-id o-primary-btn o-primary-btn--new o-primary-btn--buy-dim",class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase||!e.isUnlocked&&e.canUnlock},on:{click:e.buySingleInfinityDimension}},[e._v(" "+e._s(e.costDisplay)+" ")]),e.isAutobuyerUnlocked&&!e.isEC8Running?i("PrimaryToggleButton",{staticClass:"o-primary-btn--id-auto",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):i("PrimaryButton",{staticClass:"o-primary-btn--id-auto",attrs:{enabled:e.isAvailableForPurchase},on:{click:e.buyMaxInfinityDimension}},[e._v(" Buy Max ")])],1)],1)},l6e=[],c6e=K(a6e,o6e,l6e,!1,null,"edfefd14");const u6e=c6e.exports,d6e={name:"ModernInfinityDimensionsTab",components:{PrimaryButton:yt,InfinityDimensionRow:u6e},data(){return{infinityPower:new Decimal(0),dimMultiplier:new Decimal(0),powerPerSecond:new Decimal(0),incomeType:"",isEC8Running:!1,EC8PurchasesLeft:0,isEC9Running:!1,isEnslavedRunning:!1,isAnyAutobuyerUnlocked:!1,conversionRate:0,nextDimCapIncrease:0,tesseractCost:new Decimal(0),totalDimCap:0,canBuyTesseract:!1,enslavedCompleted:!1,boughtTesseracts:0,extraTesseracts:0,creditsClosed:!1,showLockedDimCostNote:!0}},computed:{tesseractCountString(){const t=this.extraTesseracts>0?` + ${format(this.extraTesseracts,2,2)}`:"";return`${formatInt(this.boughtTesseracts)}${t}`}},methods:{update(){this.showLockedDimCostNote=!InfinityDimension(8).isUnlocked,this.isEC9Running=EternityChallenge(9).isRunning,this.infinityPower.copyFrom(Currency.infinityPower),this.conversionRate=InfinityDimensions.powerConversionRate,this.isEC9Running?this.dimMultiplier.copyFrom(Decimal.pow(Math.max(this.infinityPower.log2(),1),4).max(1)):this.dimMultiplier.copyFrom(this.infinityPower.pow(this.conversionRate).max(1)),this.powerPerSecond.copyFrom(InfinityDimension(1).productionPerSecond),this.incomeType=EternityChallenge(7).isRunning?"Seventh Dimensions":"Infinity Power",this.isEC8Running=EternityChallenge(8).isRunning,this.isEC8Running&&(this.EC8PurchasesLeft=player.eterc8ids),this.isEnslavedRunning=Enslaved.isRunning,this.isAnyAutobuyerUnlocked=Autobuyer.infinityDimension(1).isUnlocked,this.nextDimCapIncrease=Tesseracts.nextTesseractIncrease,this.tesseractCost.copyFrom(Tesseracts.nextCost),this.totalDimCap=InfinityDimensions.totalDimCap,this.canBuyTesseract=Tesseracts.canBuyTesseract,this.enslavedCompleted=Enslaved.isCompleted,this.boughtTesseracts=Tesseracts.bought,this.extraTesseracts=Tesseracts.extra,this.creditsClosed=GameEnd.creditsEverClosed},maxAll(){InfinityDimensions.buyMax()},toggleAllAutobuyers(){toggleAllInfDims()},buyTesseract(){Tesseracts.buyTesseract()}}};var h6e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-infinity-dim-tab"},[i("div",{staticClass:"c-subtab-option-container"},[e.isEC8Running?e._e():i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.maxAll}},[e._v(" Max all ")]),e.isAnyAutobuyerUnlocked&&!e.isEC8Running?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.toggleAllAutobuyers}},[e._v(" Toggle all autobuyers ")]):e._e()],1),i("div",[i("p",[e._v(" You have "),i("span",{staticClass:"c-infinity-dim-description__accent"},[e._v(e._s(e.format(e.infinityPower,2,1)))]),e._v(" Infinity Power, "),i("br"),e.isEC9Running?i("span",[e._v(" translated ")]):i("span",[e._v(" increased by "),i("span",{staticClass:"c-infinity-dim-description__accent"},[e._v(e._s(e.formatPow(e.conversionRate,2,3)))])]),e._v(" to a "),i("span",{staticClass:"c-infinity-dim-description__accent"},[e._v(e._s(e.formatX(e.dimMultiplier,2,1)))]),e._v(" multiplier on all "),e.isEC9Running?i("span",[e._v("Time Dimensions due to Eternity Challenge 9.")]):i("span",[e._v("Antimatter Dimensions.")])])]),e.enslavedCompleted?i("div",{staticClass:"l-infinity-dim-tab__enslaved-reward-container"},[i("button",{staticClass:"c-infinity-dim-tab__tesseract-button",class:{"c-infinity-dim-tab__tesseract-button--disabled":!e.canBuyTesseract,"o-pelle-disabled-pointer":e.creditsClosed},on:{click:e.buyTesseract}},[i("p",[e._v(" Buy a Tesseract ("+e._s(e.tesseractCountString)+") ")]),i("p",[e._v("Increase dimension caps by "+e._s(e.format(e.nextDimCapIncrease,2)))]),i("p",[i("b",[e._v("Costs: "+e._s(e.format(e.tesseractCost))+" IP")])])])]):e._e(),e.isEnslavedRunning?i("div",[e._v(" All Infinity Dimensions are limited to a single purchase. ")]):i("div",[e._v(" All Infinity Dimensions except for the 8th are limited to a maximum of "+e._s(e.format(e.totalDimCap,2))+" purchases each. ")]),i("div",[e._v("You are getting "+e._s(e.format(e.powerPerSecond,2,0))+" "+e._s(e.incomeType)+" per second.")]),e.isEC8Running?i("b",{staticClass:"l-infinity-dim-tab__ec8-purchases"},[e._v(" You have "+e._s(e.quantifyInt("purchase",e.EC8PurchasesLeft))+" left within Eternity Challenge 8. ")]):e._e(),i("div",{staticClass:"l-dimensions-container"},e._l(8,function(n){return i("InfinityDimensionRow",{key:n,attrs:{tier:n}})}),1),e.showLockedDimCostNote?i("div",[e._v(" Hold shift to see the Infinity Point cost for locked Infinity Dimensions. ")]):e._e()])},f6e=[],p6e=K(d6e,h6e,f6e,!1,null,null);const m6e=p6e.exports,y6e={name:"InfinityDimensionsTab",components:{ClassicInfinityDimensionsTab:s6e,ModernInfinityDimensionsTab:m6e},computed:{activeComponent(){return this.$viewModel.newUI?"ModernInfinityDimensionsTab":"ClassicInfinityDimensionsTab"}}};var g6e=function(){var e=this,i=e._self._c;return i(e.activeComponent,{tag:"component"})},v6e=[],b6e=K(y6e,g6e,v6e,!1,null,null);const _6e=b6e.exports,E6e={name:"IpMultiplierButton",components:{PrimaryButton:yt,PrimaryToggleButton:cn,InfinityUpgradeButton:HR},data(){return{isAutobuyerActive:!1,isAutoUnlocked:!1,isCapped:!1}},computed:{upgrade(){return InfinityUpgrade.ipMult}},watch:{isAutobuyerActive(t){Autobuyer.ipMult.isActive=t}},methods:{update(){this.isAutoUnlocked=Autobuyer.ipMult.isUnlocked,this.isAutobuyerActive=Autobuyer.ipMult.isActive,this.isCapped=this.upgrade.isCapped},buyMaxIPMult(){InfinityUpgrade.ipMult.buyMax()}}};var T6e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group"},[i("InfinityUpgradeButton",{staticClass:"o-infinity-upgrade-btn--multiplier",attrs:{upgrade:e.upgrade}},[e.isCapped?[i("br"),i("span",[e._v("(Capped at "+e._s(e.quantify("Infinity Point",e.upgrade.config.costCap))+")")])]:e._e()],2),i("PrimaryButton",{staticClass:"l--spoon-btn-group__little-spoon o-primary-btn--small-spoon",on:{click:function(n){return e.buyMaxIPMult()}}},[e._v(" Max Infinity Point mult ")]),e.isAutoUnlocked?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon o-primary-btn--small-spoon",attrs:{label:"Autobuy IP mult"},model:{value:e.isAutobuyerActive,callback:function(n){e.isAutobuyerActive=n},expression:"isAutobuyerActive"}}):e._e()],1)},w6e=[],C6e=K(E6e,T6e,w6e,!1,null,"b0af25e1");const S6e=C6e.exports,k6e={name:"InfinityUpgradesTab",components:{PrimaryButton:yt,InfinityUpgradeButton:HR,IpMultiplierButton:S6e},data(){return{isUseless:!1,chargeUnlocked:!1,totalCharges:0,chargesUsed:0,disCharge:!1,ipMultSoftCap:0,ipMultHardCap:0,eternityUnlocked:!1,bottomRowUnlocked:!1,styleOfColumnBg:void 0}},computed:{grid(){return[[InfinityUpgrade.totalTimeMult,InfinityUpgrade.dim18mult,InfinityUpgrade.dim36mult,InfinityUpgrade.resetBoost],[InfinityUpgrade.buy10Mult,InfinityUpgrade.dim27mult,InfinityUpgrade.dim45mult,InfinityUpgrade.galaxyBoost],[InfinityUpgrade.thisInfinityTimeMult,InfinityUpgrade.unspentIPMult,InfinityUpgrade.dimboostMult,InfinityUpgrade.ipGen],[InfinityUpgrade.skipReset1,InfinityUpgrade.skipReset2,InfinityUpgrade.skipReset3,InfinityUpgrade.skipResetGalaxy]]},allColumnUpgrades(){return this.grid.flat()},disChargeClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--charged-respec-active":this.disCharge}},offlineIpUpgrade:()=>InfinityUpgrade.ipOffline},watch:{disCharge(t){player.celestials.ra.disCharge=t}},created(){this.on$(GAME_EVENT.INFINITY_UPGRADE_BOUGHT,()=>this.setStyleOfColumnBg()),this.on$(GAME_EVENT.INFINITY_UPGRADE_CHARGED,()=>this.setStyleOfColumnBg()),this.on$(GAME_EVENT.INFINITY_UPGRADES_DISCHARGED,()=>this.setStyleOfColumnBg()),this.setStyleOfColumnBg()},methods:{update(){this.isUseless=Pelle.isDoomed,this.chargeUnlocked=Ra.unlocks.chargedInfinityUpgrades.canBeApplied&&!Pelle.isDoomed,this.totalCharges=Ra.totalCharges,this.chargesUsed=Ra.totalCharges-Ra.chargesLeft,this.disCharge=player.celestials.ra.disCharge,this.ipMultSoftCap=GameDatabase.infinity.upgrades.ipMult.costIncreaseThreshold,this.ipMultHardCap=GameDatabase.infinity.upgrades.ipMult.costCap,this.eternityUnlocked=PlayerProgress.current.isEternityUnlocked,this.bottomRowUnlocked=Achievement(41).isUnlocked},btnClassObject(t){const e={"l-infinity-upgrade-grid__cell":!0};return t>0&&(e[`o-infinity-upgrade-btn--color-${t+1}`]=!0),e},getColumnColor(t){return t.isCharged?"var(--color-teresa--base)":t.isBought?"var(--color-infinity)":"transparent"},setStyleOfColumnBg(){this.styleOfColumnBg=this.grid.map(t=>({background:`linear-gradient(to bottom,
          ${this.getColumnColor(t[0])} 15%,
          ${this.getColumnColor(t[1])} 35% 40%,
          ${this.getColumnColor(t[2])} 60% 65%,
          ${this.getColumnColor(t[3])} 85% 100%`}))}}};var A6e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-infinity-upgrades-tab"},[e.chargeUnlocked?i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryButton",{class:e.disChargeClassObject,on:{click:function(n){e.disCharge=!e.disCharge}}},[e._v(" Respec Charged Infinity Upgrades on next Reality ")])],1):e._e(),e.chargeUnlocked?i("div",[e._v(" You have charged "+e._s(e.formatInt(e.chargesUsed))+"/"+e._s(e.formatInt(e.totalCharges))+" Infinity Upgrades. Charged Infinity Upgrades have their effect altered. "),i("br"),e._v(" Hold shift to show Charged Infinity Upgrades. You can freely respec your choices on Reality. ")]):e._e(),e.isUseless?i("div",[e._v(" You cannot Charge Infinity Upgrades while Doomed. ")]):e._e(),i("br"),e._v(" Within each column, the upgrades must be purchased from top to bottom. "),i("br"),i("div",{staticClass:"l-infinity-upgrade-grid l-infinity-upgrades-tab__grid"},e._l(e.grid,function(n,r){return i("div",{key:r,staticClass:"c-infinity-upgrade-grid__column"},[e._l(n,function(s){return i("InfinityUpgradeButton",{key:s.id,class:e.btnClassObject(r),attrs:{upgrade:s}})}),i("div",{staticClass:"c-infinity-upgrade-grid__column--background",style:e.styleOfColumnBg[r]})],2)}),0),e.bottomRowUnlocked?i("div",{staticClass:"l-infinity-upgrades-bottom-row"},[i("IpMultiplierButton",{staticClass:"l-infinity-upgrades-tab__mult-btn"}),i("InfinityUpgradeButton",{class:e.btnClassObject(1),attrs:{upgrade:e.offlineIpUpgrade}})],1):e._e(),e.eternityUnlocked&&e.bottomRowUnlocked?i("div",[e._v(" The Infinity Point multiplier becomes more expensive "),i("br"),e._v(" above "+e._s(e.formatPostBreak(e.ipMultSoftCap))+" Infinity Points, and cannot be purchased past "+e._s(e.formatPostBreak(e.ipMultHardCap))+" Infinity Points. ")]):e._e()])},R6e=[],I6e=K(k6e,A6e,R6e,!1,null,"f1281b53");const D6e=I6e.exports,x6e={name:"AnnihilationButton",data(){return{darkMatter:new Decimal(0),darkMatterMult:0,darkMatterMultGain:0,autobuyerUnlocked:!1,annihilationButtonVisible:!1,matterRequirement:0,darkMatterMultRatio:0,autoAnnihilationInput:player.auto.annihilation.multiplier,isEnabled:!0}},computed:{annihilationInputStyle(){return{"background-color":this.isEnabled?"":"var(--color-bad)"}}},methods:{update(){this.darkMatter.copyFrom(Currency.darkMatter),this.darkMatterMult=Laitela.darkMatterMult,this.darkMatterMultGain=Laitela.darkMatterMultGain,this.autobuyerUnlocked=Autobuyer.annihilation.isUnlocked,this.annihilationButtonVisible=Laitela.canAnnihilate||this.autobuyerUnlocked,this.matterRequirement=Laitela.annihilationDMRequirement,this.darkMatterMultRatio=Laitela.darkMatterMultRatio,this.isEnabled=player.auto.annihilation.isActive},annihilate(){Laitela.annihilate()},handleAutoAnnihilationInputChange(){const t=parseFloat(this.autoAnnihilationInput);isNaN(t)?this.autoAnnihilationInput=player.auto.annihilation.multiplier:player.auto.annihilation.multiplier=t}}};var M6e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-laitela-annihilation-container"},[e.darkMatter.lt(e.matterRequirement)?i("button",{staticClass:"l-laitela-annihilation-button"},[e._v(" Annihilation requires "+e._s(e.format(e.matterRequirement,2))+" Dark Matter ")]):i("button",{staticClass:"l-laitela-annihilation-button c-laitela-annihilation-button",on:{click:e.annihilate}},[i("b",[e._v("Annihilate your Dark Matter Dimensions")])]),i("br"),i("br"),e.darkMatterMult>1?i("span",[e._v(" Current multiplier to all Dark Matter Dimensions: "),i("b",[e._v(e._s(e.formatX(e.darkMatterMult,2,2)))]),i("br"),i("br"),e._v(" Annihilation will reset your Dark Matter and Dark Matter Dimension amounts, but also add "),i("b",[e._v("+"+e._s(e.format(e.darkMatterMultGain,2,2)))]),e._v(" to your Annihilation multiplier. "),i("br"),e._v(" ("),i("b",[e._v(e._s(e.formatX(e.darkMatterMultRatio,2,2)))]),e._v(" from previous multiplier) "),e.autobuyerUnlocked?i("span",[i("br"),i("br"),e._v(" Auto-Annihilate when adding "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.autoAnnihilationInput,expression:"autoAnnihilationInput"}],staticClass:"c-small-autobuyer-input c-laitela-annihilation-input",style:e.annihilationInputStyle,attrs:{type:"text"},domProps:{value:e.autoAnnihilationInput},on:{change:function(n){return e.handleAutoAnnihilationInputChange()},input:function(n){n.target.composing||(e.autoAnnihilationInput=n.target.value)}}}),e._v(" to the multiplier. ")]):e._e()]):i("span",[e._v(" Annihilation will reset your Dark Matter and Dark Matter Dimension amounts, but will give a permanent multiplier of "),i("b",[e._v(e._s(e.formatX(1+e.darkMatterMultGain,2,2)))]),e._v(" to all Dark Matter Dimensions. ")])])},P6e=[],O6e=K(x6e,M6e,P6e,!1,null,null);const N6e=O6e.exports,G6e={name:"DarkMatterDimensionRow",props:{tier:{type:Number,required:!0}},data(){return{isUnlocked:!1,ascension:0,hasAscended:!1,powerDMPerAscension:0,interval:0,powerDM:new Decimal(0),powerDE:0,intervalCost:0,powerDMCost:0,powerDECost:0,amount:new Decimal(0),canBuyInterval:!1,canBuyPowerDM:!1,canBuyPowerDE:!1,isIntervalCapped:!1,timer:0,timerPecent:0,intervalAscensionBump:1e4,intervalAfterAscension:0,darkEnergyPerSecond:0,portionDE:0,productionPerSecond:new Decimal(0),percentPerSecond:0,hoverOverAscension:!1}},computed:{name(){return`${DarkMatterDimension(this.tier).shortDisplayName} Dark Matter Dimension`},ascensionText(){return`(⯅${formatInt(this.ascension)})`},intervalClassObject(){return{"o-dark-matter-dimension-button":!0,"o-dark-matter-dimension-button--available":this.canBuyInterval,"o-dark-matter-dimension-button--ascend":this.isIntervalCapped}},darkMatterClassObject(){return{"o-dark-matter-dimension-button":!0,"o-dark-matter-dimension-button--available":this.hoverOverAscension||this.canBuyPowerDM,"o-dark-matter-dimension-button--accent":this.hoverOverAscension}},darkEnergyClassObject(){return{"o-dark-matter-dimension-button":!0,"o-dark-matter-dimension-button--available":this.hoverOverAscension||this.canBuyPowerDE,"o-dark-matter-dimension-button--accent":this.hoverOverAscension}},intervalText(){const t=this.hoverOverAscension?this.intervalAfterAscension:this.interval,e=t>1e3?`${format(t/1e3,2,2)}s`:`${format(t,2,2)}ms`,i=this.hoverOverAscension?`<b>${e}</b>`:e;let n;return this.isIntervalCapped?n=this.hoverOverAscension?"On ascend ➜":"Ascend!":n=`Cost: ${this.formatDMCost(this.intervalCost)} DM`,` ${i}<br>${n}`},darkMatterText(){const t=this.powerDM.times(this.hoverOverAscension?this.powerDMPerAscension:1),e=`DM ${formatX(t,2,2)}`,i=this.hoverOverAscension?`<b>${e}</b>`:e,n=this.powerDMPerAscension*this.interval/this.intervalAfterAscension,r=this.hoverOverAscension?`${formatX(n,2,2)} / sec`:`Cost: ${this.formatDMCost(this.powerDMCost)} DM`;return`${i}<br>${r}`},darkEnergyText(){const t=this.powerDE*(this.hoverOverAscension?POWER_DE_PER_ASCENSION:1),e=`DE +${format(t,2,4)}`,i=this.hoverOverAscension?`<b>${e}</b>`:e,n=POWER_DE_PER_ASCENSION*this.interval/this.intervalAfterAscension,r=this.hoverOverAscension?`${formatX(n,2,2)} / sec`:`Cost: ${this.formatDMCost(this.powerDECost)} DM`;return`${i}<br>${r}`},ascensionTooltip(){return`Interval is capped at ${formatInt(DarkMatterDimension(this.tier).intervalPurchaseCap)}ms.
        Ascension multiplies interval by ${formatInt(this.intervalAscensionBump)},
        DM by ${formatInt(this.powerDMPerAscension)}, and DE by ${formatInt(POWER_DE_PER_ASCENSION)}.`}},methods:{update(){const t=DarkMatterDimension(this.tier);this.isUnlocked=t.isUnlocked,this.ascension=t.ascensions,this.hasAscended=this.ascension>0,this.powerDMPerAscension=t.powerDMPerAscension,this.interval=t.interval,this.powerDM.copyFrom(t.powerDM),this.powerDE=t.powerDE,this.intervalCost=t.intervalCost,this.powerDMCost=t.powerDMCost,this.powerDECost=t.powerDECost,this.amount.copyFrom(t.amount),this.canBuyInterval=t.canBuyInterval,this.canBuyPowerDM=t.canBuyPowerDM,this.canBuyPowerDE=t.canBuyPowerDE,this.isIntervalCapped=t.interval<=t.intervalPurchaseCap,this.timer=t.timeSinceLastUpdate,this.timerPercent=this.timer/this.interval,this.intervalAscensionBump=SingularityMilestone.ascensionIntervalScaling.effectOrDefault(1200),this.intervalAfterAscension=t.intervalAfterAscension,this.darkEnergyPerSecond=t.productionPerSecond,this.portionDE=this.darkEnergyPerSecond/Currency.darkEnergy.productionPerSecond,this.productionPerSecond=this.dimensionProduction(this.tier),this.percentPerSecond=Decimal.divide(this.productionPerSecond,this.amount).toNumber(),this.isIntervalCapped||(this.hoverOverAscension=!1)},handleIntervalClick(){this.isIntervalCapped?DarkMatterDimension(this.tier).ascend():DarkMatterDimension(this.tier).buyInterval()},buyPowerDM(){DarkMatterDimension(this.tier).buyPowerDM()},buyPowerDE(){DarkMatterDimension(this.tier).buyPowerDE()},formatDMCost(t){return t.gt(Number.MAX_VALUE)?Notations.current.infinite:format(t,2)},dimensionProduction(t){if(t===4)return SingularityMilestone.dim4Generation.effectOrDefault(0);const e=DarkMatterDimension(t+1);return e.amount.times(e.powerDM).divide(e.interval).times(1e3)},hoverState(t){this.isIntervalCapped&&(this.hoverOverAscension=t)}}};var U6e=function(){var e=this,i=e._self._c;return e.isUnlocked?i("div",{staticClass:"c-dark-matter-dimension-container"},[i("div",{staticClass:"o-dark-matter-dimension-amount"},[e._v(" "+e._s(e.name)),e.hasAscended?i("span",[e._v(" "+e._s(e.ascensionText))]):e._e(),e._v(": "+e._s(e.format(e.amount,2))+" ")]),i("div",[e._v(" Average gain: "+e._s(e.format(e.productionPerSecond,2,2))+"/s (+"+e._s(e.formatPercents(e.percentPerSecond,2,2))+"/s) ")]),i("div",{staticClass:"c-dark-matter-dimension-buttons"},[i("button",{class:e.intervalClassObject,on:{click:e.handleIntervalClick,mouseover:function(n){return e.hoverState(!0)},mouseleave:function(n){return e.hoverState(!1)}}},[e.isIntervalCapped?i("span",{attrs:{"ach-tooltip":e.ascensionTooltip}},[i("i",{staticClass:"fas fa-question-circle"})]):e._e(),i("span",{domProps:{innerHTML:e._s(e.intervalText)}})]),i("button",{class:e.darkMatterClassObject,on:{click:e.buyPowerDM}},[i("span",{domProps:{innerHTML:e._s(e.darkMatterText)}})]),i("button",{class:e.darkEnergyClassObject,on:{click:e.buyPowerDE}},[i("span",{domProps:{innerHTML:e._s(e.darkEnergyText)}})])]),e.interval>200?i("div",[e._v(" Tick: "+e._s(e.formatInt(e.timer))+" ms ("+e._s(e.formatPercents(e.timerPercent,1))+") ")]):i("div",[e._v(" "+e._s(e.format(1e3/e.interval,2,2))+" ticks / sec ")]),i("div",[e._v(" Dark Energy: "+e._s(e.format(e.darkEnergyPerSecond,2,4))+"/s ("+e._s(e.formatPercents(e.portionDE,1))+" of total) ")])]):e._e()},L6e=[],B6e=K(G6e,U6e,L6e,!1,null,null);const F6e=B6e.exports,$6e={name:"DarkMatterDimensionGroup",components:{DarkMatterDimensionRow:F6e}};var H6e=function(){var e=this,i=e._self._c;return i("span",e._l(4,function(n){return i("DarkMatterDimensionRow",{key:n,attrs:{tier:n}})}),1)},V6e=[],q6e=K($6e,H6e,V6e,!1,null,null);const Y6e=q6e.exports,W6e={name:"LaitelaAutobuyerPane",components:{PrimaryToggleButton:cn},data(){return{hasDimension:!1,hasAscension:!1,hasSingularity:!1,hasAnnihilated:!1,dimension:!1,ascension:!1,singularity:!1,annihilation:!1,maxAutobuy:0,maxAutoAscend:0,autoSingularityFactor:0}},computed:{autobuyStr(){return this.maxAutobuy===4?"ON (all DMD)":`ON (max. DMD ${this.maxAutobuy})`},autoAscendStr(){return this.maxAutoAscend===4?"ON (all DMD)":`ON (max. DMD ${this.maxAutoAscend})`},autoSingularityStr(){return this.autoSingularityFactor===1?"At Cap":`Cap ${formatX(this.autoSingularityFactor,2,2)}`}},watch:{dimension(t){player.auto.darkMatterDims.isActive=t},ascension(t){player.auto.ascension.isActive=t},singularity(t){player.auto.singularity.isActive=t},annihilation(t){player.auto.annihilation.isActive=t}},methods:{update(){this.hasDimension=Autobuyer.darkMatterDims.isUnlocked,this.hasAscension=Autobuyer.darkMatterDimsAscension.isUnlocked,this.hasSingularity=Autobuyer.singularity.isUnlocked,this.hasAnnihilated=Autobuyer.annihilation.isUnlocked;const t=player.auto;this.dimension=t.darkMatterDims.isActive,this.ascension=t.ascension.isActive,this.singularity=t.singularity.isActive,this.annihilation=t.annihilation.isActive,this.maxAutobuy=SingularityMilestone.darkDimensionAutobuyers.effectValue,this.maxAutoAscend=SingularityMilestone.ascensionAutobuyers.effectValue,this.autoSingularityFactor=SingularityMilestone.autoCondense.effectValue}}};var j6e=function(){var e=this,i=e._self._c;return e.hasDimension||e.hasAscension||e.hasSingularity||e.hasAnnihilated?i("div",{staticClass:"c-laitela-singularity-container"},[e.hasDimension?i("PrimaryToggleButton",{staticClass:"c-laitela-automation-toggle",attrs:{label:"Auto-buy DMD:",on:e.autobuyStr},model:{value:e.dimension,callback:function(n){e.dimension=n},expression:"dimension"}}):e._e(),e.hasAscension?i("PrimaryToggleButton",{staticClass:"c-laitela-automation-toggle",attrs:{label:"Auto-Ascend:",on:e.autoAscendStr},model:{value:e.ascension,callback:function(n){e.ascension=n},expression:"ascension"}}):e._e(),e.hasSingularity?i("PrimaryToggleButton",{staticClass:"c-laitela-automation-toggle",attrs:{label:"Auto-Singularity:",on:e.autoSingularityStr},model:{value:e.singularity,callback:function(n){e.singularity=n},expression:"singularity"}}):e._e(),e.hasAnnihilated?i("PrimaryToggleButton",{staticClass:"c-laitela-automation-toggle",attrs:{label:"Auto-Annihilation:"},model:{value:e.annihilation,callback:function(n){e.annihilation=n},expression:"annihilation"}}):e._e()],1):e._e()},z6e=[],X6e=K(W6e,j6e,z6e,!1,null,null);const K6e=X6e.exports,Z6e={name:"LaitelaRunButton",components:{GlyphSetPreview:Zf},data(){return{realityTime:0,maxDimTier:0,isRunning:!1,realityReward:1,singularitiesUnlocked:!1,bestSet:[],tierNotCompleted:!0}},computed:{completionTime(){return this.tierNotCompleted?"Not completed at this tier":`Fastest Completion: ${TimeSpan.fromSeconds(this.realityTime).toStringShort()}`},runEffects(){return GameDatabase.celestials.descriptions[5].effects().split(`
`)},runDescription(){return GameDatabase.celestials.descriptions[5].description()},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.realityTime=player.celestials.laitela.fastestCompletion,this.maxDimTier=Laitela.maxAllowedDimension,this.realityReward=Laitela.realityReward,this.isRunning=Laitela.isRunning,this.singularitiesUnlocked=Currency.singularities.gt(0),this.bestSet=Glyphs.copyForRecords(player.records.bestReality.laitelaSet),this.tierNotCompleted=this.realityTime===3600||this.realityTime===300&&this.maxDimTier<8},startRun(){this.isDoomed||Modal.celestials.show({name:"Lai'tela's",number:5})},classObject(){return{"o-laitela-run-button":!0,"o-laitela-run-button--large":!this.singularitiesUnlocked}},runButtonClassObject(){return{"o-laitela-run-button__icon":!0,"o-laitela-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}}}};var Q6e=function(){var e=this,i=e._self._c;return i("button",{class:e.classObject()},[i("span",{class:{"o-pelle-disabled":e.isDoomed}},[i("b",[e._v("Start Lai'tela's Reality")])]),i("div",{class:e.runButtonClassObject(),on:{click:e.startRun}}),e.realityReward>1?i("div",[i("b",[e._v(" All Dark Matter multipliers are "+e._s(e.formatX(e.realityReward,2,2))+" higher. ")]),e.maxDimTier>0?i("span",[i("br"),i("br"),e._v(" "+e._s(e.completionTime)+" "),i("br"),e.maxDimTier<=7?i("span",[i("b",[e._v("Highest active dimension: "+e._s(e.formatInt(e.maxDimTier)))])]):e._e(),i("br"),i("br"),e._v(" Glyph Set: "),i("GlyphSetPreview",{attrs:{text:"Fastest Destabilization Glyph Set","text-hidden":!0,"force-name-color":!1,glyphs:e.bestSet}})],1):i("span",[i("br"),i("b",[e._v(" You also gain an additional "+e._s(e.formatX(8))+" Dark Energy. ")]),i("br"),i("br"),e._v(" Lai'tela's Reality has been fully destabilized and cannot have its reward further improved. ")]),i("br")]):e._e(),e._l(e.runEffects,function(n,r){return i("div",{key:r+"-laitela-run-desc"+e.maxDimTier},[e._v(" "+e._s(n)+" "),i("br")])}),i("br"),i("div",[e._v(e._s(e.runDescription))])],2)},J6e=[],eVe=K(Z6e,Q6e,J6e,!1,null,null);const tVe=eVe.exports,iVe={name:"SingularityMilestonePane",components:{SingularityMilestoneComponent:G3},data(){return{milestones:[],hasNew:!1,shouldGlow:!1}},computed:{classObject(){return{"o-dark-matter-dimension-button--ascend":this.hasNew&&this.shouldGlow}}},methods:{update(){this.milestones=SingularityMilestones.nextMilestoneGroup,this.hasNew=SingularityMilestones.unseenMilestones.length!==0,this.shouldGlow=player.celestials.laitela.milestoneGlow}}};var nVe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-laitela-next-milestones"},[i("div",{staticClass:"o-laitela-singularity-modal-button",class:e.classObject,attrs:{onclick:"Modal.singularityMilestones.show()"}},[e._v(" Show all milestones ")]),e._l(e.milestones,function(n){return i("SingularityMilestoneComponent",{key:n.id,attrs:{milestone:n,"suppress-glow":!0}})})],2)},rVe=[],sVe=K(iVe,nVe,rVe,!1,null,null);const aVe=sVe.exports,oVe={name:"SingularityPane",data(){return{darkEnergy:0,darkEnergyGainPerSecond:0,singularities:0,singularityCapIncreases:0,canPerformSingularity:!1,unlockedBulkSingularity:!1,singularityCap:0,baseTimeToSingularity:0,currentTimeToSingularity:0,extraTimeAfterSingularity:0,singularitiesGained:0,autoSingularityFactor:0,perStepFactor:0,isAutoEnabled:!1,hasAutoSingularity:!1,nextLowerStep:0,willCondenseOnDecrease:!1}},computed:{isDoomed:()=>Pelle.isDoomed,singularityFormText(){const t=this.singularitiesGained===1?"all Dark Energy into a Singularity":`all Dark Energy into ${quantify("Singularity",this.singularitiesGained,2)}`;return this.canPerformSingularity?`Condense ${t}`:`Reach ${format(this.singularityCap)} Dark Energy to condense ${t}`},singularityWaitText(){let t=this.currentTimeToSingularity;return this.canPerformSingularity?(t+=this.extraTimeAfterSingularity,this.isAutoEnabled?t>0?`(Auto-condensing in ${TimeSpan.fromSeconds(t).toStringShort()})`:"(Will immediately auto-condense)":""):`(Enough Dark Energy in ${TimeSpan.fromSeconds(t).toStringShort()})`},baseSingularityTime(){return TimeSpan.fromSeconds(this.baseTimeToSingularity).toStringShort()},additionalSingularityTime(){return TimeSpan.fromSeconds(this.extraTimeAfterSingularity).toStringShort()},manualSingularityRate(){const t=this.baseTimeToSingularity;return this.formatRate(this.singularitiesGained/t)},autoSingularityRate(){if(this.hasAutoSingularity&&!this.isAutoEnabled)return"Auto-Singularity is OFF";const t=this.baseTimeToSingularity+this.extraTimeAfterSingularity;return this.formatRate(this.singularitiesGained/t)},decreaseTooltip(){if(this.singularityCapIncreases===0)return"You cannot decrease the cap any further!";const t=this.singularitiesGained/this.perStepFactor;return this.willCondenseOnDecrease?`Decreasing the cap will immediately auto-condense for
          ${quantify("Singularity",t,2)}!`:null},increaseTooltip(){return this.singularityCapIncreases>=50?"You cannot increase the cap any further!":null}},methods:{update(){const t=player.celestials.laitela;this.darkEnergy=Currency.darkEnergy.value,this.darkEnergyGainPerSecond=Currency.darkEnergy.productionPerSecond,this.singularities=Currency.singularities.value,this.singularityCapIncreases=t.singularityCapIncreases,this.canPerformSingularity=Singularity.capIsReached,this.unlockedBulkSingularity=Currency.singularities.gte(10),this.singularityCap=Singularity.cap,this.baseTimeToSingularity=Singularity.timePerCondense,this.currentTimeToSingularity=Singularity.timeUntilCap,this.extraTimeAfterSingularity=Singularity.timeDelayFromAuto,this.singularitiesGained=Singularity.singularitiesGained,this.autoSingularityFactor=SingularityMilestone.autoCondense.effectOrDefault(1/0),this.perStepFactor=Singularity.gainPerCapIncrease,this.isAutoEnabled=player.auto.singularity.isActive&&SingularityMilestone.autoCondense.canBeApplied,this.hasAutoSingularity=Number.isFinite(this.autoSingularityFactor),this.nextLowerStep=this.singularityCap*this.autoSingularityFactor/10,this.willCondenseOnDecrease=this.isAutoEnabled&&this.darkEnergy>this.nextLowerStep},doSingularity(){Singularity.perform()},increaseCap(){Singularity.increaseCap()},decreaseCap(){Singularity.decreaseCap()},formatRate(t){return t<1/60?`${format(3600*t,2,3)} per hour`:t<1?`${format(60*t,2,3)} per minute`:`${format(t,2,3)} per second`},condenseClassObject(){return{"c-laitela-singularity":!0,"c-laitela-singularity--active":this.canPerformSingularity&&!this.isDoomed,"o-pelle-disabled":this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}}}};var lVe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-laitela-singularity-container"},[i("div",[i("h2",[e._v(" You have "+e._s(e.quantify("Singularity",e.singularities,2))+" ")]),i("button",{class:e.condenseClassObject(),on:{click:e.doSingularity}},[i("h2",[e._v(" "+e._s(e.singularityFormText)+" ")]),e.singularityWaitText!==""?i("br"):e._e(),i("h2",[e._v(" "+e._s(e.singularityWaitText)+" ")])])]),e.singularities!==0?i("div",[i("div",{staticClass:"o-laitela-matter-amount"},[e._v(" You have "+e._s(e.format(e.darkEnergy,2,4))+" Dark Energy. (+"+e._s(e.format(e.darkEnergyGainPerSecond,2,4))+"/s) ")]),e.unlockedBulkSingularity?i("div",[i("button",{staticClass:"c-laitela-singularity__cap-control",class:{"c-laitela-singularity__cap-control--available":e.singularityCapIncreases>0},attrs:{"ach-tooltip":e.decreaseTooltip},on:{click:e.decreaseCap}},[e._v(" Decrease Singularity cap. ")]),i("button",{staticClass:"c-laitela-singularity__cap-control",class:{"c-laitela-singularity__cap-control--available":e.singularityCapIncreases<50},attrs:{"ach-tooltip":e.increaseTooltip},on:{click:e.increaseCap}},[e._v(" Increase Singularity cap. ")]),i("br"),e._v(" Each step increases the required Dark Energy by "+e._s(e.formatX(10))+", "),i("br"),e._v(" but also increases gained Singularities by "+e._s(e.formatX(e.perStepFactor))+". ")]):i("div",[i("br"),e._v(" Reach "+e._s(e.format(10))+" Singularities "),i("br"),e._v(" to unlock Bulk Singularities. "),i("br")]),i("br"),e._v(" Total time to "),e.hasAutoSingularity?i("span",[e._v("(auto-)")]):e._e(),e._v("condense: "+e._s(e.baseSingularityTime)+" "),e.hasAutoSingularity&&e.autoSingularityFactor!==1?i("span",[e._v(" (+"+e._s(e.additionalSingularityTime)+") ")]):e._e(),i("br"),e.hasAutoSingularity&&e.autoSingularityFactor!==1?i("span",[e._v("Manual ")]):e._e(),e._v(" Singularity gain rate: "+e._s(e.manualSingularityRate)+" "),i("br"),e.hasAutoSingularity&&e.autoSingularityFactor!==1?i("span",[e._v(" Automatic Singularity gain rate: "+e._s(e.autoSingularityRate)+" ")]):e._e()]):e._e()])},cVe=[],uVe=K(oVe,lVe,cVe,!1,null,"90379505");const dVe=uVe.exports,hVe={name:"LaitelaTab",components:{LaitelaRunButton:tVe,SingularityPane:dVe,SingularityMilestonePane:aVe,DarkMatterDimensionGroup:Y6e,AnnihilationButton:N6e,LaitelaAutobuyerPane:K6e,CelestialQuoteHistory:ip,PrimaryButton:yt},data(){return{isDoomed:!1,darkMatter:new Decimal(0),darkMatterGain:new Decimal(0),isDMCapped:!1,maxDarkMatter:new Decimal(0),darkEnergy:0,matterExtraPurchasePercentage:0,autobuyersUnlocked:!1,singularityPanelVisible:!1,singularitiesUnlocked:!1,singularityCap:0,singularityWaitTime:0,showAnnihilation:!1}},computed:{styleObject(){return{color:this.isDMCapped?"var(--color-bad)":""}}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.darkMatter.copyFrom(Currency.darkMatter),this.isDMCapped=this.darkMatter.eq(Number.MAX_VALUE),this.maxDarkMatter.copyFrom(Currency.darkMatter.max),this.darkEnergy=player.celestials.laitela.darkEnergy,this.matterExtraPurchasePercentage=Laitela.matterExtraPurchaseFactor-1,this.autobuyersUnlocked=SingularityMilestone.darkDimensionAutobuyers.canBeApplied||SingularityMilestone.darkDimensionAutobuyers.canBeApplied||SingularityMilestone.autoCondense.canBeApplied||Laitela.darkMatterMult>1,this.singularityPanelVisible=Currency.singularities.gt(0),this.singularitiesUnlocked=Singularity.capIsReached||this.singularityPanelVisible,this.singularityCap=Singularity.cap,this.singularityWaitTime=TimeSpan.fromSeconds((this.singularityCap-this.darkEnergy)/Currency.darkEnergy.productionPerSecond).toStringShort(),this.showAnnihilation=Laitela.annihilationUnlocked;const t=DarkMatterDimension(1);this.darkMatterGain=t.amount.times(t.powerDM).divide(t.interval).times(1e3)},maxAll(){Laitela.maxAllDMDimensions(4)},showLaitelaHowTo(){ui.view.h2pForcedTab=GameDatabase.h2p.tabs.filter(t=>t.name==="Lai'tela")[0],Modal.h2p.show()}}};var fVe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-laitela-celestial-tab"},[i("CelestialQuoteHistory",{attrs:{celestial:"laitela"}}),i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:function(n){return e.showLaitelaHowTo()}}},[e._v(" Click for Lai'tela info ")]),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.maxAll}},[e._v(" Max all Dark Matter Dimensions ")])],1),i("div",{staticClass:"o-laitela-matter-amount"},[e._v(" You have "),i("span",{style:e.styleObject},[e._v(e._s(e.format(e.darkMatter,2)))]),e._v(" Dark Matter"),e.isDMCapped?i("span",[e._v(" (capped)")]):e._e(),e._v(". "),e.isDMCapped?e._e():i("span",[e._v("(Average: "+e._s(e.format(e.darkMatterGain,2,2))+"/s)")])]),i("div",{staticClass:"o-laitela-matter-amount"},[e._v(" Your maximum Dark Matter ever is "),i("span",{style:e.styleObject},[e._v(e._s(e.format(e.maxDarkMatter,2)))]),e.isDoomed?e._e():i("span",[e._v(", giving "+e._s(e.formatPercents(e.matterExtraPurchasePercentage,2))+" more purchases from Continuum")]),e._v(". ")]),i("div",{staticClass:"o-laitela-matter-amount"},[e._v(" Dark Matter Dimensions are unaffected by storing real time. ")]),e.singularitiesUnlocked?e._e():i("h2",{staticClass:"c-laitela-singularity-container"},[e._v(" Unlock Singularities in "+e._s(e.singularityWaitTime)+". ("+e._s(e.format(e.darkEnergy,2,2))+"/"+e._s(e.format(e.singularityCap,2))+" Dark Energy) ")]),e.singularitiesUnlocked?i("SingularityPane"):e._e(),e.autobuyersUnlocked?i("LaitelaAutobuyerPane"):e._e(),i("div",{staticClass:"l-laitela-mechanics-container"},[i("LaitelaRunButton"),i("div",[i("DarkMatterDimensionGroup"),e.showAnnihilation?i("AnnihilationButton"):e._e()],1),e.singularityPanelVisible?i("SingularityMilestonePane"):e._e()],1)],1)},pVe=[],mVe=K(hVe,fVe,pVe,!1,null,null);const yVe=mVe.exports;class h4{constructor(e){this.key=e;const i=this.key.split("_"),n=GameDatabase.multiplierTabValues[i[0]][i[1]],r=i.length>=3?i.slice(2).map(s=>s.match("^\\d+$")?Number(s):s):[];this._name=Xo(n.name,r),this._multValue=Xo(n.multValue,r),this._powValue=Xo(n.powValue,r),this._dilationEffect=Xo(n.dilationEffect,r),this._isActive=Xo(n.isActive,r),this._fakeValue=Xo(n.fakeValue,r),this._icon=Xo(n.icon,r),this._displayOverride=Xo(n.displayOverride,r),this._isDilated=Xo(n.isDilated,r),this._isBase=Xo(n.isBase,r),this._ignoresNerfPowers=Xo(n.ignoresNerfPowers,r),this.data=Sn.observable({mult:new Decimal(0),pow:0,isVisible:!1,lastVisibleAt:0})}update(){const e=this.isVisible;this.data.mult.fromDecimal(e?this.mult:L.D1),this.data.pow=e?this.pow:1,this.data.isVisible=e,e&&(this.data.lastVisibleAt=Date.now())}get name(){return this._name()}get mult(){return new Decimal(this._multValue()??1)}get pow(){return this._powValue()??1}get dilationEffect(){return this._dilationEffect()??1}get isActive(){return this._isActive()??!1}get fakeValue(){return this._fakeValue()}get icon(){return this._icon()}get displayOverride(){return this._displayOverride()}get isDilated(){return this._isDilated()}get isBase(){return this._isBase()}get ignoresNerfPowers(){return this._ignoresNerfPowers()??!1}get isVisible(){return this.isActive&&(this.pow!==1||this.mult.neq(1))}}function Xo(t,e){return typeof t=="function"?()=>t(...e):()=>t}const QN=new Map;function f4(t){const e=QN.get(t);if(e!==void 0)return e;const i=new h4(t);return QN.set(t,i),i}class gVe{constructor(e){this.entries=e.map(i=>f4(i))}get hasVisibleEntries(){const e=this.entries.filter(i=>i.isActive&&(i.mult.neq(1)||i.pow!==1));return e.length>1||e.length===1&&e[0].key.startsWith("general")}}const JN=new Map;function e2(t){const e=JN.get(t);if(e!==void 0)return e;const i=GameDatabase.multiplierTabTree[t],n=i===void 0?[]:i.map(r=>new gVe(r));return JN.set(t,n),n}const vVe=10;class bVe{constructor(){this.dataPoints=[]}add(e){this.dataPoints.push(e),this.dataPoints.length>vVe&&this.dataPoints.shift()}get average(){const e=this.dataPoints.filter(r=>r!==void 0);if(e.length===0)return[];const i=[],n=e[0];for(let r=0;r<n.length;r++)i[r]=e.map(s=>s[r]).sum()/e.length;return i}clear(){this.dataPoints=[]}}const t2=["IP_base","EP_base","TP_base"];function i2(t){return t.padStart(7," ")}const _Ve={name:"MultiplierBreakdownEntry",components:{PrimaryToggleButton:cn},props:{resource:{type:h4,required:!0},isRoot:{type:Boolean,required:!1,default:!1}},data(){return{selected:0,percentList:[],averagedPercentList:[],showGroup:[],hadChildEntriesAt:[],mouseoverIndex:-1,lastNotEmptyAt:0,dilationExponent:1,isDilated:!1,lastLayoutChange:Date.now(),now:Date.now(),totalMultiplier:L.D1,totalPositivePower:1,replacePowers:player.options.multiplierTab.replacePowers,inNC12:!1}},computed:{groups(){return e2(this.resource.key)},entries(){return this.groups[this.selected].entries},rollingAverage(){return new bVe},containerClass(){return{"c-multiplier-entry-container":!0,"c-multiplier-entry-root-container":this.isRoot}},isEmpty(){return!this.isRecent(this.lastNotEmptyAt)},disabledText(){return this.resource.isBase?Decimal.eq(this.resource.mult,0)?"You cannot gain this resource (prestige requirement not reached)":`You have no multipliers for this resource (will gain ${format(1)} on prestige)`:`Total effect inactive, disabled, or reduced to ${formatX(1)}`},hasSeenPowers(){return InfinityChallenge(4).isCompleted||PlayerProgress.eternityUnlocked()},allowPowerToggle(){return!["AD_infinityPower","galaxies","tickspeed"].some(e=>this.resource.key.startsWith(e))}},watch:{replacePowers(t){player.options.multiplierTab.replacePowers=t}},created(){this.groups.length>1&&player.options.multiplierTab.showAltGroup&&this.changeGroup()},methods:{update(){for(let t=0;t<this.entries.length;t++){const e=this.entries[t];e.update(),e2(e.key).some(n=>n.hasVisibleEntries)&&(this.hadChildEntriesAt[t]=Date.now())}this.dilationExponent=this.resource.dilationEffect,this.isDilated=this.dilationExponent!==1,this.calculatePercents(),this.now=Date.now(),this.replacePowers=player.options.multiplierTab.replacePowers&&this.allowPowerToggle,this.inNC12=NormalChallenge(12).isRunning},changeGroup(){this.selected=(this.selected+1)%this.groups.length,player.options.multiplierTab.showAltGroup=this.selected===1,this.showGroup=Array.repeat(!1,this.entries.length),this.hadChildEntriesAt=Array.repeat(0,this.entries.length),this.lastLayoutChange=Date.now(),this.rollingAverage.clear(),this.update()},calculatePercents(){const t=this.entries.map(c=>c.data.pow),e=t.filter(c=>c>1).reduce((c,d)=>c*d,1),i=t.filter(c=>c<1).reduce((c,d)=>c*d,1),n=(this.resource.fakeValue??this.resource.mult).log10()/e,r=n===0;r||(this.lastNotEmptyAt=Date.now());let s=[];for(const c of this.entries){const d=n===0?0:Decimal.log10(c.data.mult)/n,p=e===1?0:Math.log(c.data.pow)/Math.log(e),m=c.data.pow>=1?d/e+p*(1-1/e):Math.log(c.data.pow)/Math.log(i)*(i-1);s.push([c.ignoresNerfPowers,t2.includes(c.key)?Math.clampMin(m,1e-4):m])}const a=s.filter(c=>c[1]>0).map(c=>c[1]).sum(),o=s.filter(c=>c[1]>0).reduce((c,d)=>c+(d[0]?d[1]:d[1]*i),0);s=s.map(c=>c[1]>0?(c[0]?c[1]:c[1]*i)/o:Math.clampMin(c[1]*(a-o)/a/i,-1)),this.percentList=s,this.rollingAverage.add(r?void 0:s),this.averagedPercentList=this.rollingAverage.average,this.totalMultiplier=Decimal.pow10(n),this.totalPositivePower=e},styleObject(t){const e=this.averagedPercentList.sum(),i=this.averagedPercentList[t]<0,n=this.entries[t].icon,r=this.averagedPercentList[t],s=a=>a>0?a*e:-a;return{position:"absolute",top:`${100*this.averagedPercentList.slice(0,t).map(a=>s(a)).sum()}%`,height:`${100*s(r)}%`,width:"100%","transition-duration":this.isRecent(this.lastLayoutChange)?void 0:"0.2s",border:r===0?"":"0.1rem solid var(--color-text)",color:(n==null?void 0:n.textColor)??"black",background:i?`repeating-linear-gradient(-45deg, var(--color-bad), ${n==null?void 0:n.color} 0.8rem)`:n==null?void 0:n.color}},singleEntryClass(t){return{"c-single-entry":!0,"c-single-entry-highlight":this.mouseoverIndex===t}},shouldShowEntry(t){return t.data.isVisible||this.isRecent(t.data.lastVisibleAt)},barSymbol(t){var e;return((e=this.entries[t].icon)==null?void 0:e.symbol)??null},hasChildEntries(t){return this.isRecent(this.hadChildEntriesAt[t])},expandIcon(t){return this.showGroup[t]?"far fa-minus-square":"far fa-plus-square"},expandIconStyle(t){return{opacity:this.hasChildEntries(t)?1:0}},entryString(t){const e=this.percentList[t];if(e<0&&!t2.includes(this.entries[t].key))return this.nerfString(t);let i;e===0?i=formatPercents(0):e===1?i=formatPercents(1):e<.001?i=`<${formatPercents(.001,1)}`:e>.9995?i=`~${formatPercents(1)}`:i=formatPercents(e,1),i=i2(i);const n=this.entries[t];if(!n.data.isVisible)return`${i}: ${n.name}`;const r=n.displayOverride;let s;if(r)s=`(${r})`;else{const a=[],o=c=>{if(n.isDilated&&this.dilationExponent!==1){const p=this.applyDilationExp(c,1/this.dilationExponent);return`${formatX(p,2,2)} ➜ ${formatX(c,2,2)}`}return n.isBase?format(c,2,2):formatX(c,2,2)};if(this.replacePowers&&n.data.pow!==1){const c=Math.log(n.data.pow)/Math.log(this.totalPositivePower),d=this.totalMultiplier.pow((this.totalPositivePower-1)*c);a.push(o(n.data.mult.times(d)))}else Decimal.neq(n.data.mult,1)&&a.push(o(n.data.mult)),n.data.pow!==1&&a.push(formatPow(n.data.pow,2,3));s=a.length===0?"":`(${a.join(", ")})`}return`${i}: ${n.name} ${s}`},nerfString(t){const e=this.entries[t],i=i2(formatPercents(this.percentList[t],1)),n=e.displayOverride;let r;const s=e.isBase?a=>format(a,2,2):a=>`/${format(a.reciprocal(),2,2)}`;if(n)r=`(${n})`;else{const a=[];if(this.replacePowers&&e.data.pow!==1){const o=this.resource.fakeValue??this.resource.mult;a.push(s(o.pow(1-1/e.data.pow)))}else Decimal.neq(e.data.mult,1)&&a.push(s(e.data.mult)),e.data.pow!==1&&a.push(formatPow(e.data.pow,2,3));r=a.length===0?"":`(${a.join(", ")})`}return`${i}: ${e.name} ${r}`},totalString(){const t=this.resource,e=t.name,i=t.displayOverride;if(i)return`${e}: ${i}`;const n=t.mult;return t.isBase?`${e}: ${format(n,2,2)}`:`${e}: ${formatX(n,2,2)}`},applyDilationExp(t,e){return Decimal.pow10(t.log10()**e)},dilationString(){const t=this.resource,e=t.mult;let i,n;if(this.isDilated&&t.isDilated){const s=this.entries.filter(a=>a.isVisible&&a.isDilated).map(a=>a.mult).map(a=>this.applyDilationExp(a,1/this.dilationExponent)).reduce((a,o)=>a.times(o),L.D1);i=s.neq(1)?s:this.applyDilationExp(e,1/this.dilationExponent),n=t.mult}else i=e,n=this.applyDilationExp(i,this.dilationExponent);const r=t.isBase?s=>format(s,2,2):s=>formatX(s,2,2);return`Dilation Effect: Exponent${formatPow(this.dilationExponent,2,3)}
        (${r(i)} ➜ ${r(n)})`},isRecent(t){return this.now-t<200}}};var EVe=function(){var e=this,i=e._self._c;return i("div",{class:e.containerClass},[e.isEmpty?e._e():i("div",{staticClass:"c-stacked-bars"},e._l(e.averagedPercentList,function(n,r){return i("div",{key:100+r,class:{"c-bar-highlight":e.mouseoverIndex===r},style:e.styleObject(r),on:{mouseover:function(s){e.mouseoverIndex=r},mouseleave:function(s){e.mouseoverIndex=-1},click:function(s){e.showGroup[r]=!e.showGroup[r]}}},[i("span",{staticClass:"c-bar-overlay",domProps:{innerHTML:e._s(e.barSymbol(r))}})])}),0),i("div"),i("div",{staticClass:"c-info-list"},[i("div",{staticClass:"c-total-mult"},[i("b",[e._v(" "+e._s(e.totalString())+" ")]),i("span",{staticClass:"c-display-settings"},[e.hasSeenPowers&&e.allowPowerToggle?i("PrimaryToggleButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Change Display for Power effects",expression:"'Change Display for Power effects'"}],staticClass:"o-primary-btn c-change-display-btn",attrs:{off:"^N",on:"×N"},model:{value:e.replacePowers,callback:function(n){e.replacePowers=n},expression:"replacePowers"}}):e._e(),e.groups.length>1?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Change Multiplier Grouping",expression:"'Change Multiplier Grouping'"}],staticClass:"o-primary-btn c-change-display-btn fas fa-arrows-rotate",on:{click:e.changeGroup}}):e._e()],1)]),e.isEmpty?i("div",{staticClass:"c-no-effect"},[e._v(" No Active Effects "),i("br"),i("br"),e._v(" "+e._s(e.disabledText)+" ")]):e._l(e.entries,function(n,r){return i("div",{key:n.key,on:{mouseover:function(s){e.mouseoverIndex=r},mouseleave:function(s){e.mouseoverIndex=-1}}},[e.shouldShowEntry(n)?i("div",{class:e.singleEntryClass(r)},[i("div",{on:{click:function(s){e.showGroup[r]=!e.showGroup[r]}}},[i("span",{class:e.expandIcon(r),style:e.expandIconStyle(r)}),e._v(" "+e._s(e.entryString(r))+" ")]),e.showGroup[r]&&e.hasChildEntries(r)?i("MultiplierBreakdownEntry",{attrs:{resource:n}}):e._e()],1):e._e()])}),e.isDilated&&!e.isEmpty?i("div",[i("div",{staticClass:"c-single-entry c-dilation-entry"},[i("div",[e._v(" "+e._s(e.dilationString())+" ")])])]):e._e(),e.resource.key==="AD_total"?i("div",{staticClass:"c-no-effect"},[i("div",[e._v(' "Base AD Production" is the amount of Antimatter that you would be producing with your current AD upgrades as if you had waited a fixed amount of time ('+e._s(e.formatInt(10))+"-"+e._s(e.formatInt(40))+" seconds depending on your AD count) after a Sacrifice. This may misrepresent your actual production if your ADs have been producing for a while, but the relative mismatch will become smaller as you progress further in the game and numbers become larger. ")]),e.inNC12?i("div",[e._v(" The breakdown in this tab within Normal Challenge 12 may be inaccurate for some entries, and might count extra multipliers which apply to all Antimatter Dimensions rather than just the ones which are displayed. ")]):e._e()]):e._e()],2)])},TVe=[],wVe=K(_Ve,EVe,TVe,!1,null,"6c572673");const CVe=wVe.exports,lC=[{id:0,key:"AM",text:"Antimatter Production"},{id:1,key:"tickspeed",text:"Tickspeed"},{id:2,key:"AD",text:"Antimatter Dimensions"},{id:3,key:"IP",text:"Infinity Points"},{id:4,key:"ID",text:"Infinity Dimensions"},{id:5,key:"infinities",text:"Infinities"},{id:6,key:"replicanti",text:"Replicanti Speed"},{id:7,key:"EP",text:"Eternity Points"},{id:8,key:"TD",text:"Time Dimensions"},{id:9,key:"eternities",text:"Eternities"},{id:10,key:"DT",text:"Dilated Time"},{id:11,key:"gamespeed",text:"Game Speed"}],SVe={name:"MultiplierBreakdownTab",components:{MultiplierBreakdownEntry:CVe},data(){return{availableOptions:[],currentID:player.options.multiplierTab.currTab}},computed:{currentKey(){return lC.find(t=>t.id===this.currentID).key},resource(){return f4(`${this.currentKey}_total`)},resourceSymbols(){return GameDatabase.multiplierTabValues[this.currentKey].total.overlay}},methods:{update(){this.availableOptions=lC.map(t=>({...t,isActive:this.checkActiveKey(t.key)})).filter(t=>t.isActive)},checkActiveKey(t){const e=GameDatabase.multiplierTabValues[t].total.isActive;return typeof e=="function"?e():e},accessProp(t){return typeof t=="function"?t():t},subtabClassObject(t){return{"c-multiplier-subtab-btn":!0,"c-multiplier-subtab-btn--active":t.key===this.currentKey}},clickSubtab(t){this.currentID=this.availableOptions[t].id,player.options.multiplierTab.currTab=lC.find(e=>e.key===this.currentKey).id}}};var kVe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-stats-tab"},[i("div",{staticClass:"l-multiplier-subtab-btn-container"},e._l(e.availableOptions,function(n,r){return i("button",{key:n.key+n.isActive,class:e.subtabClassObject(n),on:{click:function(s){return e.clickSubtab(r)}}},[e._v(" "+e._s(n.text)+" ")])}),0),i("div",{staticClass:"c-list-container"},[e._l(e.resourceSymbols,function(n){return i("span",{key:n},[i("span",{staticClass:"c-symbol-overlay",domProps:{innerHTML:e._s(n)}})])}),i("MultiplierBreakdownEntry",{key:e.resource.key,attrs:{resource:e.resource,"is-root":!0}}),e._m(0)],2)])},AVe=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-multiplier-tab-text-line"},[t._v(" Note: Entries are only expandable if they contain multiple sources which can be different values. For example, any effects which affect all Dimensions of any type equally will not expand into a list of eight identical numbers. "),e("br"),e("b",[t._v(" Some entries may cause lag if expanded out fully. Resizing happens over 200 ms (instead of instantly) in order to reduce possible adverse effects due to photosensitivity. This may cause some visual weirdness after prestige events. ")])])}],RVe=K(SVe,kVe,AVe,!1,null,"4a04cd32");const IVe=RVe.exports,DVe={name:"NormalAchievement",components:{EffectDisplay:lo,HintText:gc},props:{achievement:{type:Object,required:!0},isObscured:{type:Boolean,required:!1}},data(){return{isDisabled:!1,isUnlocked:!1,isMouseOver:!1,isCancer:!1,showUnlockState:!1,realityUnlocked:!1,garbleTimer:0,garbleKey:0,achievementTime:0}},computed:{id(){return this.achievement.id},displayId(){return this.config.displayId??this.id},config(){return this.achievement.config},styleObject(){return{"background-position":`-${(this.achievement.column-1)*104}px -${(this.achievement.row-1)*104}px`}},classObject(){return{"o-achievement":!0,"o-achievement--disabled":this.isDisabled,"o-achievement--locked":!this.isUnlocked&&!this.isDisabled&&!this.isObscured,"o-achievement--unlocked":this.isUnlocked,"o-achievement--waiting":!this.isUnlocked&&this.isPreRealityAchievement&&!this.isDisabled,"o-achievement--blink":!this.isUnlocked&&this.id===78&&!this.isDisabled,"o-achievement--normal":!this.isCancer&&!this.isObscured,"o-achievement--cancer":this.isCancer&&!this.isObscured,"o-achievement--hidden":this.isObscured}},indicatorIconClass(){return this.isUnlocked?"fas fa-check":this.isPreRealityAchievement&&!this.isDisabled?"far fa-clock":"fas fa-times"},indicatorClassObject(){return{"o-achievement__indicator":!0,"o-achievement__indicator--disabled":this.isDisabled,"o-achievement__indicator--locked":!this.isUnlocked&&!this.isPreRealityAchievement&&!this.isDisabled,"o-achievement__indicator--waiting":!this.isUnlocked&&this.isPreRealityAchievement&&!this.isDisabled}},rewardClassObject(){return{"o-achievement__reward":!0,"o-achievement__reward--disabled":this.isDisabled,"o-achievement__reward--locked":!this.isUnlocked&&!this.isPreRealityAchievement&&!this.isDisabled,"o-achievement__reward--waiting":!this.isUnlocked&&this.isPreRealityAchievement&&!this.isDisabled}},isPreRealityAchievement(){return this.realityUnlocked&&this.achievement.row<=13},hasReward(){return this.config.reward!==void 0&&!this.isObscured},garbledNameTemplate(){return this.makeGarbledTemplate(this.config.name)},garbledIDTemplate(){return this.makeGarbledTemplate(this.displayId)},garbledDescriptionTemplate(){return this.makeGarbledTemplate(this.config.description)},achievedTime(){return player.speedrun.isActive?this.achievementTime===void 0?"Not Achieved yet":this.achievementTime===0?"Given at Speedrun start":`Achieved after ${TimeSpan.fromMilliseconds(this.achievementTime).toStringShort()}`:null}},beforeDestroy(){clearTimeout(this.mouseOverInterval)},methods:{update(){this.isDisabled=Pelle.disabledAchievements.includes(this.id)&&Pelle.isDoomed,this.isUnlocked=this.achievement.isUnlocked&&!this.isDisabled,this.isCancer=Theme.current().name==="S4"||player.secretUnlocks.cancerAchievements,this.showUnlockState=player.options.showHintText.achievementUnlockStates,this.realityUnlocked=PlayerProgress.realityUnlocked(),this.processedName=this.processText(this.config.name,this.garbledNameTemplate),this.processedId=this.processText(this.displayId,this.garbledIDTemplate),this.processedDescription=this.processText(this.config.description,this.garbledDescriptionTemplate),this.garbleTimer++,this.isObscured?this.garbleKey=10*this.id+Math.floor(this.garbleTimer/3):this.garbleKey=this.id,player.speedrun.isActive&&(this.achievementTime=player.speedrun.achievementTimes[this.id])},onMouseEnter(){clearTimeout(this.mouseOverInterval),this.isMouseOver=!0},onMouseLeave(){this.mouseOverInterval=setTimeout(()=>this.isMouseOver=!1,300)},makeGarbledTemplate(t){const e=`${t}`;let i="";for(let n=0;n<e.length;n++)if(e[n]===" ")i+=" ";else{const r=e[n].charCodeAt();i+=String.fromCharCode(33+(r*r+n*n)%93)}return i},processText(t,e){if(!this.isObscured)return t;const i=Xn.randomCrossWords(e);let n="";for(let r=0;r<i.length;r++)e[r]===" "?n+=" ":n+=i[r];return n}}};var xVe=function(){var e=this,i=e._self._c;return i("div",{class:e.classObject,style:e.styleObject,on:{mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}},[i("HintText",{key:e.garbleKey,staticClass:"l-hint-text--achievement",attrs:{type:"achievements"}},[e._v(" "+e._s(e.processedId)+" ")]),i("div",{staticClass:"o-achievement__tooltip"},[e.isMouseOver?[i("div",{staticClass:"o-achievement__tooltip__name"},[e._v(" "+e._s(e.processedName)+" ("+e._s(e.processedId)+") ")]),i("div",{staticClass:"o-achievement__tooltip__description"},[e._v(" "+e._s(e.processedDescription)+" ")]),e.config.reward?i("div",{staticClass:"o-achievement__tooltip__reward"},[e.isObscured?e._e():i("span",{class:{"o-pelle-disabled":e.isDisabled}},[e._v(" Reward: "+e._s(e.config.reward)+" "),e.config.formatEffect?i("EffectDisplay",{attrs:{br:"",config:e.config}}):e._e()],1)]):e._e(),e.achievedTime?i("div",{staticClass:"o-achievement-time"},[e._v(" "+e._s(e.achievedTime)+" ")]):e._e()]:e._e()],2),e.showUnlockState?i("div",{class:e.indicatorClassObject},[i("i",{class:e.indicatorIconClass})]):e._e(),e.hasReward?i("div",{class:e.rewardClassObject},[i("i",{staticClass:"fas fa-star"})]):e._e()],1)},MVe=[],PVe=K(DVe,xVe,MVe,!1,null,"6979b143");const OVe=PVe.exports,NVe={name:"NormalAchievementRow",components:{NormalAchievement:OVe},props:{row:{type:Array,required:!0},isObscured:{type:Boolean,required:!1}},data(){return{isCompleted:!1,isHidden:!1}},computed:{classObject(){return{"l-achievement-grid__row":!0,"c-achievement-grid__row--completed":this.isCompleted}}},methods:{update(){this.isCompleted=this.row.every(t=>t.isUnlocked),this.isHidden=this.isCompleted&&player.options.hideCompletedAchievementRows}}};var GVe=function(){var e=this,i=e._self._c;return e.isHidden?e._e():i("div",{class:e.classObject},e._l(e.row,function(n,r){return i("normal-achievement",{key:r,staticClass:"l-achievement-grid__cell",attrs:{achievement:n,"is-obscured":e.isObscured}})}),1)},UVe=[],LVe=K(NVe,GVe,UVe,!1,null,null);const BVe=LVe.exports,FVe={name:"SwapAchievementImagesButton",data(){return{canSwapImages:!1,isCancerImages:!1,isDoomed:!1}},computed:{swapImagesButton(){const t=this.isDoomed?".":":";return this.isCancerImages?"😂":t},imageSwapperStyleObject(){return this.canSwapImages?{cursor:"pointer"}:{}}},methods:{update(){this.isDoomed=Pelle.isDoomed;const t=Theme.current().name==="S4";this.canSwapImages=!t&&Themes.find("S4").isAvailable(),this.isCancerImages=t||player.secretUnlocks.cancerAchievements},swapImages(){this.canSwapImages&&(player.secretUnlocks.cancerAchievements=!player.secretUnlocks.cancerAchievements)}}};var $Ve=function(){var e=this,i=e._self._c;return i("span",{style:e.imageSwapperStyleObject,on:{click:e.swapImages}},[e._v(e._s(e.swapImagesButton))])},HVe=[],VVe=K(FVe,$Ve,HVe,!1,null,null);const qVe=VVe.exports,YVe={name:"NormalAchievementsTab",components:{SwapAchievementImagesButton:qVe,NormalAchievementRow:BVe,PrimaryToggleButton:cn},data(){return{achievementPower:0,achTPEffect:0,achCountdown:0,totalCountdown:0,missingAchievements:0,showAutoAchieve:!1,isAutoAchieveActive:!1,hideCompletedRows:!1,achMultBreak:!1,achMultToIDS:!1,achMultToTDS:!1,achMultToBH:!1,achMultToTP:!1,achMultToTT:!1,renderedRowIndices:[]}},computed:{isDoomed:()=>Pelle.isDoomed,rows:()=>Achievements.allRows,renderedRows(){return this.rows.filter((t,e)=>this.renderedRowIndices.includes(e))},boostText(){const t=formatX(this.achievementPower,2,3),e=formatX(this.achTPEffect,2,3),i=[],n=[];return n.push("Antimatter"),this.achMultToIDS&&n.push("Infinity"),this.achMultToTDS&&n.push("Time"),i.push(`${makeEnumeration(n)} Dimensions: ${t}`),this.achMultToTP&&i.push(`Tachyon Particles: ${e}`),this.achMultToBH&&i.push(`Black Hole Power: ${t}`),this.achMultToTT&&i.push(`Time Theorem production: ${t}`),`${i.join("<br>")}`}},watch:{isAutoAchieveActive(t){player.reality.autoAchieve=t},hideCompletedRows(t){player.options.hideCompletedAchievementRows=t,this.startRowRendering()}},created(){this.startRowRendering()},beforeDestroy(){cancelAnimationFrame(this.renderAnimationId)},methods:{update(){const t=getGameSpeedupFactor();this.achievementPower=Achievements.power,this.achTPEffect=RealityUpgrade(8).config.effect(),this.achCountdown=Achievements.timeToNextAutoAchieve/t,this.totalCountdown=((Achievements.preReality.countWhere(e=>!e.isUnlocked)-1)*Achievements.period+Achievements.timeToNextAutoAchieve)/t,this.missingAchievements=Achievements.preReality.countWhere(e=>!e.isUnlocked),this.showAutoAchieve=PlayerProgress.realityUnlocked()&&!Perk.achievementGroup5.isBought,this.isAutoAchieveActive=player.reality.autoAchieve,this.hideCompletedRows=player.options.hideCompletedAchievementRows,this.achMultBreak=BreakInfinityUpgrade.achievementMult.canBeApplied,this.achMultToIDS=Achievement(75).isUnlocked,this.achMultToTDS=EternityUpgrade.tdMultAchs.isBought,this.achMultToTP=RealityUpgrade(8).isBought,this.achMultToBH=VUnlocks.achievementBH.canBeApplied,this.achMultToTT=Ra.unlocks.achievementTTMult.canBeApplied},startRowRendering(){const t=[],e=[];for(let a=0;a<this.rows.length;a++)(this.rows[a].every(c=>c.isUnlocked)?t:e).push(a);const i=e.filter(a=>this.renderedRowIndices.includes(a)),n=e.filter(a=>!this.renderedRowIndices.includes(a));let r;player.options.hideCompletedAchievementRows?(this.renderedRowIndices=t.concat(i),r=n):(this.renderedRowIndices=i,r=t.concat(n));const s=()=>{for(let o=0;o<2;o++){if(r.length===0)return;this.renderedRowIndices.push(r.shift())}this.renderAnimationId=requestAnimationFrame(s)};s()},isRendered(t){return this.renderedRowIndices.includes(t)},isObscured(t){return this.isDoomed?!1:t===17},timeDisplay,timeDisplayNoDecimals}};var WVe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-achievements-tab"},[i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{label:"Hide completed rows:"},model:{value:e.hideCompletedRows,callback:function(n){e.hideCompletedRows=n},expression:"hideCompletedRows"}}),e.showAutoAchieve?i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{label:"Auto Achievements:"},model:{value:e.isAutoAchieveActive,callback:function(n){e.isAutoAchieveActive=n},expression:"isAutoAchieveActive"}}):e._e()],1),i("div",{staticClass:"c-achievements-tab__header c-achievements-tab__header--multipliers"},[e.isDoomed?i("span",[e._v(" All Achievement multipliers have been disabled"),i("SwapAchievementImagesButton")],1):i("span",[e._v(" Achievements provide a multiplier to"),i("SwapAchievementImagesButton"),i("div",{domProps:{innerHTML:e._s(e.boostText)}})],1)]),e._m(0),e.showAutoAchieve?i("div",{staticClass:"c-achievements-tab__header"},[e.achCountdown>0?i("div",[e._v(" Automatically gain the next missing Achievement in "+e._s(e.timeDisplayNoDecimals(e.achCountdown))),e.isAutoAchieveActive?e._e():i("span",[e._v(" once Auto is turned on")]),e._v(". (left-to-right, top-to-bottom) ")]):e.missingAchievements!==0?i("div",[e._v(" Automatically gain the next missing Achievement as soon as you enable Auto Achievements. (left-to-right, top-to-bottom) ")]):e._e(),e.totalCountdown>0?i("div",[e._v(" You will regain all remaining achievements after "+e._s(e.timeDisplayNoDecimals(e.totalCountdown))+" if Auto Achievement "),e.isAutoAchieveActive?i("span",[e._v("stays enabled")]):i("span",[e._v("is turned on")]),e._v(". ")]):e._e(),i("br")]):e._e(),i("div",{staticClass:"l-achievement-grid"},e._l(e.renderedRows,function(n,r){return i("NormalAchievementRow",{key:r,attrs:{row:n,"is-obscured":e.isObscured(r)}})}),1)])},jVe=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-achievements-tab__header"},[t._v(" Achievements with a "),e("i",{staticClass:"fas fa-star"}),t._v(" icon also give an additional reward. ")])}],zVe=K(YVe,WVe,jVe,!1,null,null);const XVe=zVe.exports,KVe={name:"NormalChallengeBox",components:{ChallengeBox:d4,DescriptionDisplay:Qs},props:{challenge:{type:Object,required:!0}},data(){return{isDoomed:!1,isDisabled:!1,isRunning:!1,isCompleted:!1,isBroken:!1,isUnlocked:!1,lockedAt:new Decimal}},computed:{descriptionDisplayConfig(){return this.isUnlocked?this.challenge.config:{description:`Infinity ${formatInt(this.challenge.config.lockedAt)} times to unlock.`}},name(){return`C${this.challenge.id}`},overrideLabel(){return this.isBroken?"Broken":""}},methods:{update(){this.isDisabled=this.challenge.isDisabled,this.isUnlocked=this.challenge.isUnlocked,this.isRunning=this.challenge.isOnlyActiveChallenge,this.lockedAt=this.challenge.config.lockedAt,this.isBroken=Enslaved.isRunning&&Enslaved.BROKEN_CHALLENGES.includes(this.challenge.id),this.isCompleted=this.challenge.isCompleted&&!this.isBroken}}};var ZVe=function(){var e=this,i=e._self._c;return i("ChallengeBox",{staticClass:"c-challenge-box--normal",attrs:{name:e.name,"is-unlocked":e.isUnlocked,"is-running":e.isRunning,"is-completed":e.isCompleted,"override-label":e.overrideLabel,"locked-at":e.lockedAt},on:{start:function(n){return e.challenge.requestStart()}},scopedSlots:e._u([{key:"top",fn:function(){return[i("DescriptionDisplay",{attrs:{config:e.descriptionDisplayConfig}})]},proxy:!0},{key:"bottom",fn:function(){return[i("span",{class:{"o-pelle-disabled":e.isDisabled}},[e._v("Reward: "+e._s(e.challenge.config.reward))])]},proxy:!0}])})},QVe=[],JVe=K(KVe,ZVe,QVe,!1,null,"809f51fd");const eqe=JVe.exports,tqe={name:"NormalChallengesTab",components:{ChallengeGrid:WR,ChallengeTabHeader:jR,NormalChallengeBox:eqe},computed:{challenges(){return NormalChallenges.all}}};var iqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-challenges-tab"},[i("ChallengeTabHeader"),i("div",[e._v(" Some Normal Challenges have requirements to be able to run that challenge. ")]),i("div",[e._v(" If you have an active Big Crunch Autobuyer, it will attempt to Crunch as soon as possible when reaching Infinite antimatter. ")]),i("ChallengeGrid",{attrs:{challenges:e.challenges},scopedSlots:e._u([{key:"default",fn:function({challenge:n}){return[i("NormalChallengeBox",{attrs:{challenge:n}})]}}])})],1)},nqe=[],rqe=K(tqe,iqe,nqe,!1,null,"adb13550");const sqe=rqe.exports,aqe={name:"OptionsButton",components:{PrimaryButton:yt}};var oqe=function(){var e=this,i=e._self._c;return i("PrimaryButton",{staticClass:"o-primary-btn--option l-options-grid__button",on:{click:e.emitClick}},[e._t("default")],2)},lqe=[],cqe=K(aqe,oqe,lqe,!1,null,null);const zR=cqe.exports,uqe={name:"OptionsGameplayTab",components:{OpenModalHotkeysButton:UT,OptionsButton:zR,PrimaryToggleButton:cn,SliderComponent:fu},data(){return{offlineProgress:!1,hibernationCatchup:!1,hotkeys:!1,offlineSlider:0,offlineTicks:0,automaticTabSwitching:!1,infinityUnlocked:!1,automatorUnlocked:!1,automatorLogSize:0}},computed:{sliderPropsOfflineTicks(){return{min:22,max:54,interval:1,width:"100%",tooltip:!1}},sliderPropsAutomatorLogSize(){return{min:50,max:500,interval:50,width:"100%",tooltip:!1}}},watch:{offlineProgress(t){player.options.offlineProgress=t},hibernationCatchup(t){player.options.hibernationCatchup=t},hotkeys(t){player.options.hotkeys=t},offlineSlider(t){player.options.offlineTicks=this.parseOfflineSlider(t)},automaticTabSwitching(t){player.options.automaticTabSwitching=t},automatorLogSize(t){player.options.automatorEvents.maxEntries=parseInt(t,10)}},created(){const t=player.options.offlineTicks,e=Math.floor(Math.log10(t)),i=t/Math.pow(10,e)-1;this.offlineSlider=9*e+i},methods:{update(){const t=player.options;this.offlineProgress=t.offlineProgress,this.hibernationCatchup=t.hibernationCatchup,this.hotkeys=t.hotkeys,this.offlineTicks=player.options.offlineTicks,this.automaticTabSwitching=t.automaticTabSwitching,this.infinityUnlocked=PlayerProgress.current.isInfinityUnlocked,this.automatorUnlocked=Player.automatorUnlocked,this.automatorLogSize=t.automatorEvents.maxEntries},parseOfflineSlider(t){const e=parseInt(t,10);return(1+e%9)*Math.pow(10,Math.floor(e/9))},adjustSliderValueOfflineTicks(t){this.offlineSlider=t,player.options.offlineTicks=this.parseOfflineSlider(t)},adjustSliderValueAutomatorLogSize(t){this.automatorLogSize=t,player.options.automatorEvents.maxEntries=this.automatorLogSize}}};var dqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-options-tab"},[i("div",{staticClass:"l-options-grid"},[i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{staticClass:"o-primary-btn--option",attrs:{onclick:"Modal.confirmationOptions.show()"}},[e._v(" Open Confirmation Options ")]),i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button",attrs:{label:"Hotkeys:",on:"Enabled",off:"Disabled"},model:{value:e.hotkeys,callback:function(n){e.hotkeys=n},expression:"hotkeys"}}),i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button l-toggle-button",attrs:{label:"Switch tabs on some events (e.g. entering challenges):"},model:{value:e.automaticTabSwitching,callback:function(n){e.automaticTabSwitching=n},expression:"automaticTabSwitching"}})],1),i("div",{staticClass:"l-options-grid__row"},[i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button",attrs:{label:"Offline progress:"},model:{value:e.offlineProgress,callback:function(n){e.offlineProgress=n},expression:"offlineProgress"}}),i("div",{staticClass:"o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button"},[i("b",[e._v("Offline ticks: "+e._s(e.formatInt(e.offlineTicks)))]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.offlineSlider},on:{input:function(n){return e.adjustSliderValueOfflineTicks(n)}}},"SliderComponent",e.sliderPropsOfflineTicks,!1))],1),i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button",attrs:{label:"Run suspended time as offline:"},model:{value:e.hibernationCatchup,callback:function(n){e.hibernationCatchup=n},expression:"hibernationCatchup"}})],1),i("div",{staticClass:"l-options-grid__row"},[e.automatorUnlocked?i("div",{staticClass:"o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button"},[i("b",[e._v("Automator Log Max: "+e._s(e.formatInt(parseInt(e.automatorLogSize))))]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.automatorLogSize},on:{input:function(n){return e.adjustSliderValueAutomatorLogSize(n)}}},"SliderComponent",e.sliderPropsAutomatorLogSize,!1))],1):e._e()]),i("OpenModalHotkeysButton")],1)])},hqe=[],fqe=K(uqe,dqe,hqe,!1,null,"18c4bcf9");const pqe=fqe.exports,mqe={name:"AutosaveIntervalSlider",components:{SliderComponent:fu},props:{min:{type:Number,required:!0},max:{type:Number,required:!0},interval:{type:Number,required:!0}},data(){return{sliderInterval:10}},computed:{sliderProps(){return{min:this.min,max:this.max,interval:this.interval,width:"100%",tooltip:!1}}},methods:{update(){this.sliderInterval=player.options.autosaveInterval/1e3},adjustSliderValue(t){this.sliderInterval=t,player.options.autosaveInterval=this.sliderInterval*1e3,GameOptions.refreshAutosaveInterval()}}};var yqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button"},[i("b",[e._v("Autosave interval: "+e._s(e.formatInt(e.sliderInterval))+"s")]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.sliderInterval},on:{input:function(n){return e.adjustSliderValue(n)}}},"SliderComponent",e.sliderProps,!1))],1)},gqe=[],vqe=K(mqe,yqe,gqe,!1,null,null);const bqe=vqe.exports,_qe={name:"SaveFileName",components:{},data(){return{saveFileName:""}},methods:{update(){this.saveFileName=player.options.saveFileName},removeNotAvailableCharacters(t){return t.replace(/[^a-zA-Z0-9 -]/gu,"")},handleChange(t){const e=this.removeNotAvailableCharacters(t.target.value.trim());player.options.saveFileName=e,t.target.value=e}}};var Eqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-primary-btn o-primary-btn--option o-primary-btn--input l-options-grid__button"},[i("b",[e._v("Save file name:")]),i("span",{attrs:{"ach-tooltip":"Set a custom name (up to 16 alphanumeric characters, including space and hyphen)"}},[i("input",{staticClass:"c-custom-save-name__input",attrs:{type:"text",maxlength:"16",placeholder:"Custom save name"},domProps:{value:e.saveFileName},on:{change:e.handleChange}})])])},Tqe=[],wqe=K(_qe,Eqe,Tqe,!1,null,"d9f2f934");const Cqe=wqe.exports,Sqe={name:"OptionsSavingTab",components:{AutosaveIntervalSlider:bqe,OpenModalHotkeysButton:UT,OptionsButton:zR,PrimaryToggleButton:cn,SaveFileName:Cqe},data(){return{cloudAvailable:!1,cloudEnabled:!1,forceCloudOverwrite:!1,showCloudModal:!1,syncSaveIntervals:!1,showTimeSinceSave:!1,hideGoogleName:!1,loggedIn:!1,userName:"",canSpeedrun:!1,inSpeedrun:!1,creditsClosed:!1,canModifySeed:!1}},computed:{modalTooltip(){return`The game will detect certain situations where you might not want to overwrite your cloud save, and show
        you a modal with more information if this is ON.`},overwriteTooltip(){return this.showCloudModal?"This setting does nothing since the modal is being shown.":this.forceCloudOverwrite?"Your local save will always overwrite your cloud save no matter what.":"Save conflicts will prevent your local save from being saved to the cloud."},STEAM(){return CG}},watch:{cloudEnabled(t){player.options.cloudEnabled=t},forceCloudOverwrite(t){player.options.forceCloudOverwrite=t},showCloudModal(t){player.options.showCloudModal=t},syncSaveIntervals(t){player.options.syncSaveIntervals=t},showTimeSinceSave(t){player.options.showTimeSinceSave=t},hideGoogleName(t){player.options.hideGoogleName=t}},methods:{update(){const t=player.options;this.cloudAvailable=Cloud.isAvailable,this.cloudEnabled=t.cloudEnabled,this.forceCloudOverwrite=t.forceCloudOverwrite,this.showCloudModal=t.showCloudModal,this.syncSaveIntervals=t.syncSaveIntervals,this.showTimeSinceSave=t.showTimeSinceSave,this.hideGoogleName=t.hideGoogleName,this.loggedIn=Cloud.loggedIn,this.canSpeedrun=player.speedrun.isUnlocked,this.inSpeedrun=player.speedrun.isActive,this.canModifySeed=Speedrun.canModifySeed(),this.creditsClosed=GameEnd.creditsEverClosed,this.loggedIn&&(this.userName=Cloud.user.displayName)},importAsFile(t){if(t.target.files.length===0)return;const e=new FileReader;e.onload=function(){GameStorage.offlineEnabled=player.options.offlineProgress,GameStorage.offlineTicks=player.options.offlineTicks,GameStorage.import(e.result)},e.readAsText(t.target.files[0])},openSeedModal(){this.canModifySeed?Modal.modifySeed.show():Modal.message.show(`You cannot modify your seed any more. Glyph RNG has already been used to generate
          at least one Glyph on this run.`)}}};var kqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-options-tab"},[i("div",{staticClass:"l-options-grid"},[i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{staticClass:"o-primary-btn--option_font-x-large",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"GameStorage.export()"}},[e._v(" Export save ")]),i("OptionsButton",{staticClass:"o-primary-btn--option_font-x-large",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"Modal.import.show()"}},[e._v(" Import save ")]),i("OptionsButton",{staticClass:"o-primary-btn--option_font-x-large",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"Modal.hardReset.show()"}},[e._v(" RESET THE GAME ")])],1),i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{staticClass:"o-primary-btn--option_font-x-large",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"GameStorage.save(false, true)"}},[e._v(" Save game ")]),i("OptionsButton",{staticClass:"o-primary-btn--option_font-x-large",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"Modal.loadGame.show()"}},[e._v(" Choose save ")]),i("AutosaveIntervalSlider",{attrs:{min:10,max:60,interval:1}})],1),i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"GameStorage.exportAsFile()"}},[e._v(" Export save as file ")]),i("OptionsButton",{staticClass:"c-file-import-button",class:{"o-pelle-disabled-pointer":e.creditsClosed}},[i("input",{staticClass:"c-file-import",attrs:{type:"file",accept:".txt"},on:{change:e.importAsFile}}),i("label",{attrs:{for:"file"}},[e._v("Import save from file")])]),i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:"Display time since save:"},model:{value:e.showTimeSinceSave,callback:function(n){e.showTimeSinceSave=n},expression:"showTimeSinceSave"}})],1),i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"Modal.backupWindows.show()"}},[e._v(" Open Automatic Save Backup Menu ")]),i("SaveFileName")],1),i("div",{staticClass:"l-options-grid__row"},[e.canSpeedrun?i("OptionsButton",{staticClass:"o-primary-btn--option_font-x-large",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"Modal.enterSpeedrun.show()"}},[e._v(" Start Speedrun ")]):e._e(),e.inSpeedrun?i("OptionsButton",{class:{"o-pelle-disabled-pointer":e.creditsClosed,"o-primary-btn--disabled":!e.canModifySeed},on:{click:function(n){return e.openSeedModal()}}},[e._v(" Change Glyph RNG Seed ")]):e._e()],1),i("OpenModalHotkeysButton")],1),e.cloudAvailable?i("h2",{staticClass:"c-cloud-options-header"},[e.hideGoogleName?i("span",[e._v("Logged in to Google "),i("i",[e._v("(name hidden)")])]):e.loggedIn?i("span",[e._v("Logged in as "+e._s(e.userName))]):i("span",[e._v("Not logged in")])]):e._e(),e.loggedIn?i("div",[e.cloudEnabled?i("span",[e._v("Cloud Saving will occur automatically every 10 minutes.")]):i("span",[e._v("Cloud Saving has been disabled on this save.")])]):e._e(),e.cloudAvailable?i("div",{staticClass:"l-options-grid"},[e.STEAM?e._e():i("div",{staticClass:"l-options-grid__row"},[e.loggedIn?i("OptionsButton",{attrs:{onclick:"GameOptions.logout()"}},[e._v(" Disconnect Google Account and disable Cloud Saving ")]):i("OptionsButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This will connect your Google Account to your Antimatter Dimensions savefiles",expression:"'This will connect your Google Account to your Antimatter Dimensions savefiles'"}],class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"GameOptions.login()"}},[e._v(" Login with Google to enable Cloud Saving ")]),e.loggedIn?i("PrimaryToggleButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This will hide your Google Account name from the UI for privacy. Saving/loading is unaffected.",expression:"'This will hide your Google Account name from the UI for privacy. Saving/loading is unaffected.'"}],staticClass:"o-primary-btn--option l-options-grid__button",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:"Hide Google Account name:"},model:{value:e.hideGoogleName,callback:function(n){e.hideGoogleName=n},expression:"hideGoogleName"}}):e._e()],1),e.loggedIn?i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"GameOptions.cloudSave()"}},[e._v(" Cloud save ")]),i("OptionsButton",{class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{onclick:"GameOptions.cloudLoad()"}},[e._v(" Cloud load ")]),i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:"Force local save before cloud saving:"},model:{value:e.syncSaveIntervals,callback:function(n){e.syncSaveIntervals=n},expression:"syncSaveIntervals"}})],1):e._e(),e.loggedIn?i("div",{staticClass:"l-options-grid__row"},[i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:"Automatic cloud saving/loading:"},model:{value:e.cloudEnabled,callback:function(n){e.cloudEnabled=n},expression:"cloudEnabled"}}),i("PrimaryToggleButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.modalTooltip,expression:"modalTooltip"}],staticClass:"o-primary-btn--option l-options-grid__button",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:"Show modal if possible saving conflict:"},model:{value:e.showCloudModal,callback:function(n){e.showCloudModal=n},expression:"showCloudModal"}}),i("PrimaryToggleButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.overwriteTooltip,expression:"overwriteTooltip"}],staticClass:"o-primary-btn--option l-options-grid__button",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:"Force cloud saving despite conflicts:"},model:{value:e.forceCloudOverwrite,callback:function(n){e.forceCloudOverwrite=n},expression:"forceCloudOverwrite"}})],1):e._e()]):e._e()])},Aqe=[],Rqe=K(Sqe,kqe,Aqe,!1,null,null);const Iqe=Rqe.exports,Dqe={name:"SelectNotationDropdown",computed:{notations:()=>Notations.all}};var xqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-select-notation"},[i("div",{staticClass:"l-select-notation__inner"},e._l(e.notations,function(n){return i("div",{key:n.name,staticClass:"o-primary-btn l-select-notation__item c-select-notation__item",on:{click:function(r){return n.setAsCurrent()}}},[e._v(" "+e._s(n.name)+" ")])}),0)])},Mqe=[],Pqe=K(Dqe,xqe,Mqe,!1,null,null);const Oqe=Pqe.exports,Nqe={name:"SelectSidebarDropdown",computed:{resourceDB:()=>GameDatabase.sidebarResources,resources(){return this.resourceDB.filter(t=>t.isAvailable())}},methods:{setResource(t){player.options.sidebarResourceID=t}}};var Gqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-select-theme"},[i("div",{staticClass:"l-select-theme__inner"},[i("div",{key:"Default",staticClass:"o-primary-btn l-select-theme__item c-select-theme__item",on:{click:function(n){return e.setResource(0)}}},[e._v(" Latest Resource ")]),e._l(e.resources,function(n){return i("div",{key:n.name,staticClass:"o-primary-btn l-select-theme__item c-select-theme__item",on:{click:function(r){return e.setResource(n.id)}}},[e._v(" "+e._s(n.optionName)+" ")])})],2)])},Uqe=[],Lqe=K(Nqe,Gqe,Uqe,!1,null,null);const Bqe=Lqe.exports,Fqe={name:"SelectThemeDropdown",data(){return{availableThemeNames:[]}},computed:{themes(){return this.availableThemeNames.map(t=>Themes.find(t))}},methods:{update(){this.availableThemeNames=Themes.available().map(t=>t.name)}}};var $qe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-select-theme"},[i("div",{staticClass:"l-select-theme__inner"},e._l(e.themes,function(n){return i("div",{key:n.name,staticClass:"o-primary-btn l-select-theme__item c-select-theme__item",on:{click:function(r){return n.set()}}},[e._v(" "+e._s(n.displayName())+" ")])}),0)])},Hqe=[],Vqe=K(Fqe,$qe,Hqe,!1,null,null);const qqe=Vqe.exports,Yqe={name:"UpdateRateSlider",components:{SliderComponent:fu},data(){return{updateRate:0}},computed:{sliderProps(){return{min:33,max:200,interval:1,width:"100%",tooltip:!1}}},methods:{update(){this.updateRate=player.options.updateRate},adjustSliderValue(t){this.updateRate=t,player.options.updateRate=this.updateRate,GameOptions.refreshUpdateRate()}}};var Wqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"o-primary-btn o-primary-btn--option o-primary-btn--slider l-options-grid__button"},[i("b",[e._v("Update rate: "+e._s(e.formatInt(e.updateRate))+" ms")]),i("SliderComponent",e._b({staticClass:"o-primary-btn--slider__slider",attrs:{value:e.updateRate},on:{input:function(n){return e.adjustSliderValue(n)}}},"SliderComponent",e.sliderProps,!1))],1)},jqe=[],zqe=K(Yqe,Wqe,jqe,!1,null,null);const Xqe=zqe.exports,Kqe={name:"OptionsVisualTab",components:{UpdateRateSlider:Xqe,PrimaryToggleButton:cn,ExpandingControlBox:fc,OptionsButton:zR,OpenModalHotkeysButton:UT,SelectThemeDropdown:qqe,SelectNotationDropdown:Oqe,SelectSidebarDropdown:Bqe},data(){return{theme:"",notation:"",sidebarResource:"",headerTextColored:!0}},computed:{sidebarDB:()=>GameDatabase.sidebarResources,themeLabel(){return`Theme: ${Themes.find(this.theme).displayName()}`},notationLabel(){return`Notation: ${this.notation}`},sidebarLabel(){return`Sidebar (Modern UI): ${this.sidebarResource}`},UILabel(){return`UI: ${this.$viewModel.newUI?"Modern":"Classic"}`}},watch:{headerTextColored(t){player.options.headerTextColored=t}},methods:{update(){const t=player.options;this.theme=Theme.currentName(),this.notation=t.notation,this.sidebarResource=player.options.sidebarResourceID===0?"Latest Resource":this.sidebarDB.find(e=>e.id===player.options.sidebarResourceID).optionName,this.headerTextColored=t.headerTextColored}}};var Zqe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-options-tab"},[i("div",{staticClass:"l-options-grid"},[i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{staticClass:"o-primary-btn--option_font-large",attrs:{onclick:"GameOptions.toggleUI()"}},[e._v(" "+e._s(e.UILabel)+" ")]),i("UpdateRateSlider"),i("OptionsButton",{staticClass:"o-primary-btn--option",attrs:{onclick:"Modal.newsOptions.show();"}},[e._v(" Open News Options ")])],1),i("div",{staticClass:"l-options-grid__row"},[i("ExpandingControlBox",{staticClass:"l-options-grid__button c-options-grid__notations",attrs:{"button-class":"o-primary-btn o-primary-btn--option l-options-grid__notations-header",label:e.themeLabel},scopedSlots:e._u([{key:"dropdown",fn:function(){return[i("SelectThemeDropdown")]},proxy:!0}])}),i("ExpandingControlBox",{staticClass:"l-options-grid__button c-options-grid__notations",attrs:{"button-class":"o-primary-btn o-primary-btn--option l-options-grid__notations-header",label:e.notationLabel},scopedSlots:e._u([{key:"dropdown",fn:function(){return[i("SelectNotationDropdown")]},proxy:!0}])}),i("OptionsButton",{staticClass:"o-primary-btn--option",attrs:{onclick:"Modal.notation.show();"}},[e._v(" Open Exponent Notation Options ")])],1),i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{staticClass:"o-primary-btn--option",attrs:{onclick:"Modal.animationOptions.show();"}},[e._v(" Open Animation Options ")]),i("OptionsButton",{staticClass:"o-primary-btn--option",attrs:{onclick:"Modal.infoDisplayOptions.show()"}},[e._v(" Open Info Display Options ")]),i("OptionsButton",{staticClass:"o-primary-btn--option",attrs:{onclick:"Modal.awayProgressOptions.show()"}},[e._v(" Open Away Progress Options ")])],1),i("div",{staticClass:"l-options-grid__row"},[i("OptionsButton",{staticClass:"o-primary-btn--option",attrs:{onclick:"Modal.hiddenTabs.show()"}},[e._v(" Modify Visible Tabs ")]),i("PrimaryToggleButton",{staticClass:"o-primary-btn--option l-options-grid__button",attrs:{label:"Relative prestige gain text coloring:"},model:{value:e.headerTextColored,callback:function(n){e.headerTextColored=n},expression:"headerTextColored"}}),e.$viewModel.newUI?i("ExpandingControlBox",{staticClass:"l-options-grid__button c-options-grid__notations",attrs:{"button-class":"o-primary-btn o-primary-btn--option l-options-grid__notations-header",label:e.sidebarLabel},scopedSlots:e._u([{key:"dropdown",fn:function(){return[i("SelectSidebarDropdown")]},proxy:!0}],null,!1,409945354)}):e._e()],1),i("OpenModalHotkeysButton")],1)])},Qqe=[],Jqe=K(Kqe,Zqe,Qqe,!1,null,null);const eYe=Jqe.exports;function tYe(t){let e=t.filter(r=>r[0]!==Number.MAX_VALUE);e.length===0&&(e=[t[0]]);const i=t.map(r=>r.length).max(),n=[];for(let r=0;r<i;r++){if(typeof e[0][r]=="string"){n.push("");continue}const s=typeof e[0][r]=="number",a=e.map(o=>o[r]).reduce(s?Number.sumReducer:Decimal.sumReducer);n.push(s?a/e.length:Decimal.div(a,e.length))}return n}const iYe={name:"PastPrestigeRunsContainer",props:{layer:{type:Object,required:!0}},data(){return{isRealityUnlocked:!1,resourceType:!1,selectedResources:[],resourceTitles:[],showRealTime:!1,runs:[],hasEmptyRecord:!1,shown:!0,hasChallenges:!1,longestRow:0,hasIM:!1}},computed:{averageRun(){return tYe(this.runs)},dropDownIconClass(){return this.shown?"far fa-minus-square":"far fa-plus-square"},points(){const t=this.layer.currency;return t==="RM"&&this.hasIM?"iM Cap":t},condition(){return this.layer.condition()},plural(){return this.layer.plural},singular(){return this.layer.name},getRuns(){return this.layer.getRuns},hasRealTime:()=>PlayerProgress.seenAlteredSpeed()},methods:{update(){this.runs=this.clone(this.getRuns()),this.hasEmptyRecord=this.runs[0][0]===Number.MAX_VALUE,this.runs.push(this.averageRun),this.isRealityUnlocked=PlayerProgress.current.isRealityUnlocked,this.shown=player.shownRuns[this.singular],this.resourceType=player.options.statTabResources,this.showRate=this.resourceType===RECENT_PRESTIGE_RESOURCE.RATE,this.hasChallenges=this.runs.map(i=>this.challengeText(i)).some(i=>i),this.hasIM=MachineHandler.currentIMCap>0;const t=[this.points,`${this.points} Rate`,this.plural,`${this.singular} Rate`];switch(this.resourceType){case RECENT_PRESTIGE_RESOURCE.ABSOLUTE_GAIN:this.selectedResources=[0,2];break;case RECENT_PRESTIGE_RESOURCE.RATE:this.selectedResources=[1,3];break;case RECENT_PRESTIGE_RESOURCE.CURRENCY:this.selectedResources=[0,1];break;case RECENT_PRESTIGE_RESOURCE.PRESTIGE_COUNT:this.selectedResources=[2,3];break;default:throw new Error("Unrecognized Statistics tab resource type")}this.resourceTitles=[t[this.selectedResources[0]],t[this.selectedResources[1]]];const e=i=>{let n=i.length;for(;n>0;){const r=i[n-1];if(typeof r=="string"&&r!==""||typeof r!="string"&&Decimal.neq(r,0))return n;n--}return 0};this.longestRow=this.runs.map(i=>e(i)).max()},clone(t){return t.map(e=>e.map(i=>i instanceof Decimal?Decimal.fromDecimal(i):i))},infoArray(t,e){var s;let i;e===0?i="Last":e===10?i="Average":i=`${formatInt(e+1)} ago`;const n=[i,this.gameTime(t)];this.hasRealTime&&n.push(this.realTime(t));const r=[this.prestigeCurrencyGain(t),this.prestigeCurrencyRate(t),this.prestigeCountGain(t),this.prestigeCountRate(t)];n.push(r[this.selectedResources[0]]),n.push(r[this.selectedResources[1]]),this.hasChallenges&&n.push(this.challengeText(t));for(let a=0;a<((s=this.layer.extra)==null?void 0:s.length)&&n.length<=this.longestRow;a++){if(!this.layer.showExtra[a]())continue;const o=this.layer.formatExtra[a],c=t[a+5]??0;this.layer.allowRate[a]&&this.showRate?n.push(this.rateText(t,t[a+5])):n.push(o(c))}return n},infoCol(){var e;const t=["Run",this.hasRealTime?"Game Time":"Time in Run"];this.hasRealTime&&t.push("Real Time"),t.push(...this.resourceTitles),this.hasChallenges&&t.push("Challenge");for(let i=0;i<((e=this.layer.extra)==null?void 0:e.length)&&t.length<=this.longestRow;i++)this.layer.showExtra[i]()&&t.push(this.layer.allowRate[i]&&this.showRate?this.layer.rateString[i]:this.layer.extra[i]);return t},gameTime(t){return timeDisplayShort(t[0])},realTime(t){return timeDisplayShort(t[1])},prestigeCurrencyGain(t){return this.hasIM&&this.layer.name==="Reality"?`${format(t[7],2)} iM`:`${format(t[2],2)} ${this.points}`},prestigeCountGain(t){return quantify(this.singular,t[3])},prestigeCurrencyRate(t){return this.hasIM&&this.layer.name==="Reality"?"N/A":this.rateText(t,t[2])},prestigeCountRate(t){return this.rateText(t,t[3])},rateText(t,e){const i=t[1],n=ratePerMinute(e,i);return Decimal.lt(n,1)?`${format(Decimal.mul(n,60),2,2)} per hour`:`${format(n,2,2)} per min`},challengeText(t){const e=t[4];return e==="The Nameless Ones"?"Nameless":e},toggleShown(){player.shownRuns[this.singular]=!player.shownRuns[this.singular]},cellStyle(t,e){let i;switch(t){case 0:i="7rem";break;case 3:case 4:i=this.layer.name==="Reality"?"15rem":"20rem";break;case 5:i=this.layer.name==="Reality"?"10rem":"20rem";break;default:i="13rem"}return{width:i,border:"0.05rem solid #999999",margin:"-0.05rem",padding:"0.2rem 0","border-bottom-width":e?"0.3rem":"0.1rem","font-weight":e?"bold":null,color:"var(--color-text)"}}}};var nYe=function(){var e=this,i=e._self._c;return e.condition?i("div",[i("div",{staticClass:"c-past-runs-header",on:{click:e.toggleShown}},[i("span",{staticClass:"o-run-drop-down-icon"},[i("i",{class:e.dropDownIconClass})]),i("span",[i("h3",[e._v("Last "+e._s(e.formatInt(10))+" "+e._s(e.plural)+":")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.shown,expression:"shown"}]},[i("div",{staticClass:"c-row-container"},e._l(e.infoCol(),function(n,r){return i("span",{key:r,style:e.cellStyle(r,!0)},[e._v(" "+e._s(n)+" ")])}),0),e._l(e.runs,function(n,r){return i("div",{key:r},[n[0]===Number.MAX_VALUE?i("span",{staticClass:"c-empty-row"},[r===10?i("i",[e._v(" An average cannot be calculated with no "+e._s(e.plural)+". ")]):i("i",[e._v(" You have not done "+e._s(e.formatInt(r+1))+" "+e._s(r===0?e.singular:e.plural)+" yet. ")])]):i("span",{staticClass:"c-row-container"},e._l(e.infoArray(n,r),function(s,a){return i("span",{key:10*r+a,style:e.cellStyle(a,!1)},[e._v(" "+e._s(s)+" ")])}),0)])}),i("br")],2)]):e._e()},rYe=[],sYe=K(iYe,nYe,rYe,!1,null,"afe2ae2c");const aYe=sYe.exports,oYe={name:"PastPrestigeRunsTab",components:{PastPrestigeRunsContainer:aYe},data(){return{layers:{reality:{name:"Reality",plural:"Realities",currency:"RM",condition:()=>PlayerProgress.realityUnlocked(),getRuns:()=>player.records.recentRealities,extra:["Glyph Level","Relic Shards"],showExtra:[()=>!0,()=>TeresaUnlocks.effarig.canBeApplied],formatExtra:[t=>formatInt(t),t=>format(t,2)],allowRate:[!1,!0],rateString:["","Relic Shard Rate"]},eternity:{name:"Eternity",plural:"Eternities",currency:"EP",condition:()=>PlayerProgress.eternityUnlocked(),getRuns:()=>player.records.recentEternities,extra:["Tachyon Particles"],showExtra:[()=>PlayerProgress.dilationUnlocked()],formatExtra:[t=>format(t,2)],allowRate:[!1]},infinity:{name:"Infinity",plural:"Infinities",currency:"IP",condition:()=>PlayerProgress.infinityUnlocked(),getRuns:()=>player.records.recentInfinities}},resourceType:!1}},computed:{resourceText(){switch(this.resourceType){case RECENT_PRESTIGE_RESOURCE.ABSOLUTE_GAIN:return"total resource gain";case RECENT_PRESTIGE_RESOURCE.RATE:return"resource gain rate";case RECENT_PRESTIGE_RESOURCE.CURRENCY:return"prestige currency";case RECENT_PRESTIGE_RESOURCE.PRESTIGE_COUNT:return"prestige count";default:throw new Error("Unrecognized Statistics tab resource type")}}},methods:{update(){this.resourceType=player.options.statTabResources},cycleButton(){const t=Object.keys(RECENT_PRESTIGE_RESOURCE).length;player.options.statTabResources=(player.options.statTabResources+1)%t}}};var lYe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-stats-tab"},[i("div",{staticClass:"c-subtab-option-container"},[i("button",{staticClass:"o-primary-btn o-primary-btn--subtab-option",on:{click:function(n){return e.cycleButton()}}},[e._v(" Showing "+e._s(e.resourceText)+" ")])]),e._l(e.layers,function(n){return i("PastPrestigeRunsContainer",{key:n.name,attrs:{layer:n}})})],2)},cYe=[],uYe=K(oYe,lYe,cYe,!1,null,null);const dYe=uYe.exports,hYe={name:"CustomizeableTooltip",props:{tooltipContentStyle:{type:Object,required:!1,default:()=>({})},tooltipArrowStyle:{type:Object,required:!1,default:()=>({})},left:{type:String,required:!1,default:""},top:{type:String,required:!1,default:""},right:{type:String,required:!1,default:""},bottom:{type:String,required:!1,default:""},contentClass:{type:[Object,String],required:!1,default:""},tooltipClass:{type:[Object,String],required:!1,default:""},mode:{type:String,required:!1,default:"top"},show:{type:Boolean,required:!1}},data(){return{hovering:!1,mainContent:null,isDarkTheme:!1}},computed:{positionStyle(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom}},tooltipType(){return`c-tooltip--${this.mode}`},contentTransform(){const t=this.mode==="top"||this.mode==="bottom"?"X":"Y";return`translate${t}(${this.showNegativeSign(t)}50%)`},tooltipTransform(){switch(this.mode){case"top":return`translate(${this.showNegativeSign("X")}50%, -100%)`;case"bottom":return`translate(${this.showNegativeSign("X")}50%, 100%)`;case"right":return`translate(100%, ${this.showNegativeSign("Y")}50%)`;case"left":return`translate(-100%, ${this.showNegativeSign("Y")}50%)`;default:return""}},showTooltip(){return this.show||this.hovering},tooltipContentLightDarkClass(){return this.isDarkTheme?"c-tooltip-content--dark":""},tooltipArrowLightDarkClass(){return this.isDarkTheme?"c-tooltip-arrow--dark":""},tooltipInternalClass(){return{"c-tooltip-show":this.showTooltip,[this.tooltipType]:!0}},tooltipContentClass(){return[this.tooltipInternalClass,this.tooltipClass,this.tooltipContentLightDarkClass]},tooltipArrowClass(){return[this.tooltipInternalClass,this.tooltipArrowLightDarkClass]}},methods:{update(){this.isDarkTheme=Theme.current().isDark()},showNegativeSign(t){return t==="X"?this.left?"-":"":this.top?"-":""}}};var fYe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-custom-tooltip"},[i("div",{staticClass:"c-main-content",class:e.contentClass,style:{...e.positionStyle,transform:e.contentTransform},on:{mouseenter:function(n){e.hovering=!0},mouseleave:function(n){e.hovering=!1}}},[e._t("mainContent")],2),i("div",{staticClass:"c-tooltip-content",class:e.tooltipContentClass,style:[e.tooltipContentStyle,e.positionStyle,{transform:e.tooltipTransform}]},[e._t("tooltipContent")],2),i("div",{staticClass:"c-tooltip-arrow",class:e.tooltipArrowClass,style:[e.tooltipArrowStyle,e.positionStyle,{transform:e.tooltipTransform}]})])},pYe=[],mYe=K(hYe,fYe,pYe,!1,null,"5ff4f479");const BT=mYe.exports,yYe={name:"PelleUpgrade",components:{DescriptionDisplay:Qs,CostDisplay:mc,CustomizeableTooltip:BT},props:{upgrade:{type:Object,required:!0},faded:{type:Boolean,required:!1},galaxyGenerator:{type:Boolean,required:!1},showImprovedEstimate:{type:Boolean,required:!1}},data(){return{canBuy:!1,isBought:!1,purchases:0,currentTimeEstimate:new Decimal(0),projectedTimeEstimate:new Decimal(0),isCapped:!1,hovering:!1,hasRemnants:!1,galaxyCap:0,notAffordable:!1}},computed:{config(){return this.upgrade.config},effectText(){if(!this.config.formatEffect)return!1;const t=this.isCapped?"Capped:":"Currently:",e=r=>this.config.formatEffect(this.config.effect(r)),i=e(this.purchases),n=!this.isCapped&&this.hovering?e(this.purchases+1):void 0;return{prefix:t,value:i,next:n}},timeEstimate(){return!this.hasTimeEstimate||!this.hasRemnants?null:this.notAffordable?"Never affordable due to Generated Galaxy cap":this.currentTimeEstimate},hasTimeEstimate(){return!(this.canBuy||this.isBought||this.isCapped||this.galaxyGenerator&&this.config.currencyLabel!=="Galaxy")},shouldEstimateImprovement(){return this.showImprovedEstimate&&this.hasTimeEstimate},estimateImprovement(){return this.shouldEstimateImprovement?Pelle.canArmageddon?this.projectedTimeEstimate.startsWith(">")?this.projectedTimeEstimate:`${this.currentTimeEstimate} ➜ ${this.projectedTimeEstimate}`:`${this.currentTimeEstimate}`:""}},methods:{update(){this.canBuy=this.upgrade.canBeBought&&!this.faded,this.isBought=this.upgrade.isBought,this.isCapped=this.upgrade.isCapped,this.purchases=player.celestials.pelle.rebuyables[this.upgrade.config.id],this.currentTimeEstimate=TimeSpan.fromSeconds(this.secondsUntilCost(this.galaxyGenerator?GalaxyGenerator.gainPerSecond:Pelle.realityShardGainPerSecond).toNumber()).toTimeEstimate(),this.projectedTimeEstimate=TimeSpan.fromSeconds(this.secondsUntilCost(Pelle.nextRealityShardGain).toNumber()).toTimeEstimate(),this.hasRemnants=Pelle.cel.remnants>0,this.galaxyCap=GalaxyGenerator.generationCap;const t=GameDatabase.celestials.pelle.galaxyGeneratorUpgrades;this.notAffordable=(this.config===t.additive||this.config===t.multiplicative)&&Decimal.gt(this.upgrade.cost,this.galaxyCap-GalaxyGenerator.generatedGalaxies+player.galaxies)},secondsUntilCost(t){const e=this.galaxyGenerator?player.galaxies+GalaxyGenerator.galaxies:Currency.realityShards.value;return Decimal.sub(this.upgrade.cost,e).div(t)}}};var gYe=function(){var e=this,i=e._self._c;return i("button",{staticClass:"c-pelle-upgrade",class:{"c-pelle-upgrade--unavailable":!e.canBuy&&!(e.isBought||e.isCapped),"c-pelle-upgrade--bought":e.isBought||e.isCapped,"c-pelle-upgrade--faded":e.faded,"c-pelle-upgrade--galaxyGenerator":e.galaxyGenerator},on:{click:function(n){!e.faded&&e.upgrade.purchase()},mouseover:function(n){e.hovering=!0},mouseleave:function(n){e.hovering=!1}}},[i("CustomizeableTooltip",{attrs:{show:e.shouldEstimateImprovement,left:"50%",top:"0"},scopedSlots:e._u([{key:"tooltipContent",fn:function(){return[e._v(" "+e._s(e.estimateImprovement)+" ")]},proxy:!0}])}),e.timeEstimate?i("CustomizeableTooltip",{attrs:{left:"50%",top:"0","content-class":"l-fill-container"},scopedSlots:e._u([{key:"tooltipContent",fn:function(){return[e._v(" "+e._s(e.timeEstimate)+" ")]},proxy:!0}],null,!1,1945308655)}):e._e(),i("DescriptionDisplay",{attrs:{config:e.config}}),i("div",{staticClass:"l-pelle-upgrade-gap"}),e.effectText?i("div",[e._v(" "+e._s(e.effectText.prefix)+" "+e._s(e.effectText.value)+" "),e.effectText.next?[e._v(" ➜ "),i("span",{class:{"c-improved-effect":e.canBuy,"c-improved-effect--unavailable":!e.canBuy}},[e._v(" "+e._s(e.effectText.next)+" ")])]:e._e(),i("div",{staticClass:"l-pelle-upgrade-gap"})],2):e._e(),e.isCapped?e._e():i("CostDisplay",{attrs:{config:e.config,name:e.galaxyGenerator?e.config.currencyLabel:"Reality Shard"}})],1)},vYe=[],bYe=K(yYe,gYe,vYe,!1,null,"f23b5500");const p4=bYe.exports,_Ye={name:"GalaxyGeneratorPanel",components:{PelleUpgrade:p4},data(){return{isUnlocked:!1,galaxies:0,generatedGalaxies:0,galaxiesPerSecond:0,cap:0,isCapped:!1,capRift:null,sacrificeActive:!1,isCollapsed:!1,barWidth:0,capRiftName:""}},computed:{collapseIcon(){return this.isCollapsed?"fas fa-expand-arrows-alt":"fas fa-compress-arrows-alt"},upgrades(){return GalaxyGeneratorUpgrades.all},galaxyText(){let t=format(Math.max(this.galaxies,0),2);return this.galaxies<0&&(t+=` [${format(this.galaxies,2)}]`),t},sacrificeText(){return this.capRift.galaxyGeneratorText.replace("$value",this.capRiftName)},emphasisedStart(){return Math.pow(this.generatedGalaxies/this.cap,.45)}},methods:{update(){this.isUnlocked=Pelle.hasGalaxyGenerator,this.isCapped=GalaxyGenerator.isCapped,this.isCollapsed=player.celestials.pelle.collapsed.galaxies&&!this.isCapped,!(this.isCollapsed||!this.isUnlocked)&&(this.galaxies=player.galaxies+GalaxyGenerator.galaxies,this.generatedGalaxies=GalaxyGenerator.generatedGalaxies,this.galaxiesPerSecond=GalaxyGenerator.gainPerSecond,this.cap=GalaxyGenerator.generationCap,this.capRift=GalaxyGenerator.capRift,this.sacrificeActive=GalaxyGenerator.sacrificeActive,this.barWidth=this.isCapped?this.capRift.reducedTo:this.emphasisedStart,this.capRift&&(this.capRiftName=Xn.wordCycle(this.capRift.name)))},increaseCap(){GalaxyGenerator.isCapped&&GalaxyGenerator.startSacrifice()},toggleCollapse(){player.celestials.pelle.collapsed.galaxies=!this.isCollapsed},unlock(){player.celestials.pelle.galaxyGenerator.unlocked=!0,Pelle.quotes.galaxyGeneratorUnlock.show()}}};var EYe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-pelle-panel-container"},[i("div",{staticClass:"c-pelle-panel-title"},[e.isCapped?e._e():i("i",{staticClass:"c-collapse-icon-clickable",class:e.collapseIcon,on:{click:e.toggleCollapse}}),e._v(" Galaxy Generator ")]),e.isCollapsed?e._e():i("div",{staticClass:"l-pelle-content-container"},[e.isUnlocked?i("div",[i("div",[e._v(" You have a total of "),i("span",{staticClass:"c-galaxies-amount"},[e._v(e._s(e.galaxyText))]),e._v(" Galaxies. "),i("span",{staticClass:"c-galaxies-amount"},[e._v("+"+e._s(e.format(e.galaxiesPerSecond,2,1))+"/s")])]),i("div",[i("button",{staticClass:"c-increase-cap",class:{"c-increase-cap-available":e.isCapped&&e.capRift&&!e.sacrificeActive,"tutorial--glow":e.cap===1/0},on:{click:e.increaseCap}},[i("div",{staticClass:"c-increase-cap-background",style:{width:`${e.barWidth*100}%`}}),e.isCapped&&e.capRift?i("div",{staticClass:"c-increase-cap-text"},[e._v(" "+e._s(e.sacrificeText)+". "),i("br"),i("br"),e.sacrificeActive?i("span",{staticClass:"c-big-text"},[e._v(" Getting rid of all that "+e._s(e.capRiftName)+"... ")]):i("span",{staticClass:"c-big-text"},[e._v(" Sacrifice your "+e._s(e.capRiftName)+" ")])]):i("div",{staticClass:"c-increase-cap-text c-medium-text"},[e._v(" "+e._s(e.format(e.generatedGalaxies,2))+" / "+e._s(e.format(e.cap,2))+" Galaxies generated ")])])]),i("div",{staticClass:"l-galaxy-generator-upgrades-container"},e._l(e.upgrades,function(n){return i("PelleUpgrade",{key:n.config.id,attrs:{upgrade:n,"galaxy-generator":!0}})}),1)]):i("button",{staticClass:"c-generator-unlock-button",on:{click:e.unlock}},[e._v(" Unlock the Galaxy Generator ")])])])},TYe=[],wYe=K(_Ye,EYe,TYe,!1,null,"6bb918e0");const CYe=wYe.exports,SYe={name:"PelleRiftBar",components:{CustomizeableTooltip:BT},props:{rift:{type:Object,required:!0}},data(){return{isActive:!1,isMaxed:!1,percentage:0,reducedTo:0,hasEffectiveFill:!1,selectedHoverMilestone:this.rift.milestones[0],remToPx:parseInt(getComputedStyle(document.documentElement).fontSize,10),effects:[],selectedMilestoneResourceText:"",selectedMilestoneDescriptionText:""}},computed:{tooltipArrowStyle(){return{borderTop:"0.55rem solid var(--color-pelle--base)"}}},methods:{update(){const t=this.rift;this.effects=t.effects,this.isActive=t.isActive,this.isMaxed=t.isMaxed||Pelle.hasGalaxyGenerator,this.percentage=t.percentage,this.reducedTo=t.reducedTo,this.hasEffectiveFill=t.config.key==="decay"&&PelleRifts.chaos.milestones[0].canBeApplied,this.selectedMilestoneResourceText=this.milestoneResourceText(this.selectedHoverMilestone),this.selectedMilestoneDescriptionText=this.milestoneDescriptionText(this.selectedHoverMilestone)},hasMilestone(t){return t.canBeApplied},milestoneResourceText(t){const e=this.rift;return`${formatPercents(t.requirement)}
      (${this.formatRift(e.config.percentageToFill(t.requirement))}       ${e.id===3?Xn.wordCycle(PelleRifts.decay.name):e.drainResource})`},milestoneDescriptionText(t){return typeof t.description=="string"?t.description:t.description()},formatRift(t){return typeof t=="number"?`${formatInt(100*t)}%`:format(t,2)},toggle(){this.isMaxed||this.rift.toggle()},barOverlay(){const t=this.percentage>1;return{"o-pelle-rift-bar-permanent":!t&&this.hasEffectiveFill,"o-pelle-rift-bar-overfilled":t}},handleMilestoneRequirementTooltipDisplay(t){const e=t.clientX-this.$refs.pelleRiftBar.getBoundingClientRect().x,i=this.rift.milestones.filter(n=>{const r=Math.abs(n.requirement*31.6-e/this.remToPx);return r<1&&(n.dist=r),r<1}).map(n=>{const r=n.dist;return delete n.dist,{dist:r,m:n}});i.length&&(this.selectedHoverMilestone=i.sort((n,r)=>n.dist-r.dist)[0].m)},tooltipContentClass(){return{"c-pelle-milestone-tooltip":!0,"c-pelle-milestone-tooltip--unlocked":this.hasMilestone(this.selectedHoverMilestone)}}}};var kYe=function(){var e=this,i=e._self._c;return i("div",{ref:"pelleRiftBar",staticClass:"c-pelle-rift-bar",class:{"c-pelle-rift-bar-overfill-container":e.percentage>1,"c-pelle-rift-bar--idle":!e.isActive&&!e.isMaxed,"c-pelle-rift-bar--filling":e.isActive},on:{mousemove:e.handleMilestoneRequirementTooltipDisplay,click:e.toggle}},[i("div",{staticClass:"l-overflow-hidden"},[i("div",{class:e.barOverlay()}),i("div",{staticClass:"o-pelle-rift-bar-fill",style:{width:`${Math.clampMax(e.percentage*100,100)}%`}}),e.reducedTo<1?i("div",{staticClass:"o-pelle-rift-bar-reducedto",style:{width:`${Math.clampMax(100-e.reducedTo*100,100)}%`}}):e._e(),i("div",{staticClass:"o-pelle-rift-bar-overlay"}),e.isActive&&!e.isMaxed?i("div",{staticClass:"o-pelle-rift-bar-active-fill"}):e._e(),e._l(e.rift.milestones,function(n,r){return i("div",{key:"milestone-line-"+r,staticClass:"o-pelle-rift-bar-milestone-line",class:{"o-pelle-rift-bar-milestone-line--unlocked":e.hasMilestone(n),"o-pelle-rift-bar-milestone-line--disabled":e.reducedTo<n.requirement},style:{left:`calc(${n.requirement*100}% - 0.25rem)`}})})],2),i("div",{staticClass:"o-pelle-rift-bar-percentage"},[e._v(" "+e._s(e.formatPercents(e.percentage,3))+" "),e.isMaxed?e._e():i("span",[e._v("("+e._s(e.isActive?"Filling":"Idle")+")")])]),i("CustomizeableTooltip",{staticClass:"o-pelle-rift-bar-milestone-hover-container",attrs:{"tooltip-class":e.tooltipContentClass(),"tooltip-arrow-style":e.tooltipArrowStyle,left:`calc(${e.selectedHoverMilestone.requirement*100}% - 0.1rem)`,"content-class":"o-pelle-rift-bar-milestone-hover-area"},scopedSlots:e._u([{key:"tooltipContent",fn:function(){return[e._v(" "+e._s(e.selectedMilestoneResourceText)+" "),i("br"),i("br"),e._v(" "+e._s(e.selectedMilestoneDescriptionText)+" ")]},proxy:!0}])})],1)},AYe=[],RYe=K(SYe,kYe,AYe,!1,null,"0d96335d");const IYe=RYe.exports,DYe={name:"PelleStrike",components:{ExpandingControlBox:fc},props:{strike:{type:Object,required:!0}},data(){return{strikeReward:""}},methods:{update(){this.strikeReward=this.strike.reward()}}};var xYe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-pelle-strike-container"},[i("ExpandingControlBox",{attrs:{"container-class":"c-pelle-strike"},scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"c-pelle-strike-header"},[e._v(" ▼ "+e._s(e.strike.requirement)+" ▼ ")])]},proxy:!0},{key:"dropdown",fn:function(){return[i("div",{staticClass:"c-pelle-strike-dropdown"},[i("span",[e._v("Penalty: "+e._s(e.strike.penalty))]),i("br"),i("span",[e._v("Reward: "+e._s(e.strikeReward))])])]},proxy:!0}])})],1)},MYe=[],PYe=K(DYe,xYe,MYe,!1,null,null);const OYe=PYe.exports,NYe={name:"PelleRift",components:{PelleStrike:OYe,PelleRiftBar:IYe},props:{strike:{type:Object,required:!0}},data(){return{hasStrike:!1,isActive:!1,isMaxed:!1,totalFill:new Decimal,resource:new Decimal,hasEffectiveFill:!1,effects:[]}},computed:{rift(){return this.strike.rift},specialRift(){return this.rift.id===3},infoTooltip(){return`The Replicanti requirement for the 2nd Rift is based on the total amount you have ever filled, including
        any amount drained to fill this Rift.`}},methods:{update(){if(this.hasStrike=this.strike.hasStrike,!this.hasStrike)return;const t=this.rift;this.effects=this.rift.effects,this.isActive=t.isActive,this.isMaxed=t.isMaxed||Pelle.hasGalaxyGenerator,this.setValue("totalFill",t.totalFill),this.setValue("resource",t.fillCurrency.value),this.hasEffectiveFill=t.key==="decay"&&PelleRifts.chaos.milestones[0].canBeApplied},setValue(t,e){typeof e=="number"?this[t]=e:this[t].copyFrom(e)},formatRift(t){return typeof t=="number"?`${formatInt(100*t)}%`:format(t,2)},riftName(){return Xn.wordCycle(this.rift.name,!0)},drainResource(){return this.specialRift?Xn.wordCycle(this.rift.drainResource):this.rift.drainResource}}};var GYe=function(){var e=this,i=e._self._c;return e.hasStrike?i("div",{staticClass:"c-pelle-single-bar"},[i("div",{staticClass:"c-pelle-rift"},[i("div",{staticClass:"c-pelle-rift-row"},[i("div",{staticClass:"c-pelle-rift-column c-pelle-rift-status"},[i("h2",{staticClass:"c-pelle-rift-name-header"},[e._v(" "+e._s(e.riftName())+" ")]),i("div",{staticClass:"c-pelle-rift-rift-info-container"},e._l(e.effects,function(n,r){return i("div",{key:r},[e._v(" "+e._s(n||"")+" ")])}),0)]),i("div",{staticClass:"c-pelle-rift-column"},[i("PelleStrike",{attrs:{strike:e.strike}}),i("PelleRiftBar",{attrs:{rift:e.rift}})],1),i("div",{staticClass:"c-pelle-rift-status"},[i("div",{staticClass:"c-pelle-rift-fill-status"},[i("h2",{staticClass:"c-pelle-rift-name-header"},[e._v(" "+e._s(e.riftName())+" ")]),i("div",{staticClass:"c-pelle-rift-rift-info-container"},[e._v(" Drains "+e._s(e.drainResource())+" to fill. "),e.specialRift?i("span",{attrs:{"ach-tooltip":e.infoTooltip}},[i("i",{staticClass:"fas fa-question-circle"})]):e._e(),i("br"),e.isMaxed?e._e():[e._v(" Current Amount: "+e._s(e.formatRift(e.resource))+" ")],i("br"),e._v(" Total Filled: "+e._s(e.formatRift(e.rift.totalFill))+" ")],2)])])])])]):e._e()},UYe=[],LYe=K(NYe,GYe,UYe,!1,null,"bc4139f2");const BYe=LYe.exports,FYe={name:"PelleBarPanel",components:{PelleRift:BYe},data(){return{decayRate:0,isCollapsed:!1}},computed:{collapseIcon(){return this.isCollapsed?"fas fa-expand-arrows-alt":"fas fa-compress-arrows-alt"},strikes(){return PelleStrikes.all}},methods:{update(){this.decayRate=Pelle.riftDrainPercent,this.isCollapsed=player.celestials.pelle.collapsed.rifts},toggleCollapse(){player.celestials.pelle.collapsed.rifts=!this.isCollapsed}}};var $Ye=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-pelle-panel-container"},[i("div",{staticClass:"c-pelle-panel-title"},[i("i",{staticClass:"c-collapse-icon-clickable",class:e.collapseIcon,on:{click:e.toggleCollapse}}),e._v(" Pelle Strikes and Rifts ")]),e.isCollapsed?e._e():i("div",{staticClass:"l-pelle-content-container"},[e._v(" Rifts can be activated by clicking on their bars. "),e.strikes.length>1?i("span",[e._v("You cannot activate more than two Rifts at once.")]):i("br"),e._v(" When active, Rifts consume "+e._s(e.formatPercents(e.decayRate))+" of another resource per second. "),i("br"),e._v(" Rift effects apply even when not activated, and are based on the total amount drained. "),i("b",{staticClass:"o-strike-warning"},[e._v("Pelle Strike penalties are permanent and remain active even after Armageddon!")]),i("div",{staticClass:"c-pelle-bar-container"},e._l(e.strikes,function(n){return i("PelleRift",{key:n.config.id,attrs:{strike:n}})}),1)])])},HYe=[],VYe=K(FYe,$Ye,HYe,!1,null,"37c7e8d6");const qYe=VYe.exports,YYe={name:"RemnantGainFactor",components:{ExpandingControlBox:fc},props:{hide:{type:Boolean,required:!1,default:!1}},data(){return{best:{am:new Decimal(0),ip:new Decimal(0),ep:new Decimal(0)},dilationMult:[1,1,1],remnants:0,remnantsGain:0}},computed:{opacity(){return+!this.hide}},methods:{update(){this.best.am.copyFrom(player.celestials.pelle.records.totalAntimatter),this.best.ip.copyFrom(player.celestials.pelle.records.totalInfinityPoints),this.best.ep.copyFrom(player.celestials.pelle.records.totalEternityPoints),this.dilationMult=PelleStrikes.dilation.hasStrike?[500,10,5]:[1,1,1],this.remnants=Pelle.cel.remnants,this.remnantsGain=Pelle.remnantsGain}}};var WYe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-remnant-factors-container"},[i("ExpandingControlBox",{style:{opacity:e.opacity},attrs:{"container-class":"c-remnant-factors",label:"Remnant Gain Factors"},scopedSlots:e._u([{key:"dropdown",fn:function(){return[i("div",{staticClass:"c-remnant-factors-text"},[e._v(" Best AM: "+e._s(e.format(e.best.am,2,2))),i("br"),e._v(" Best IP: "+e._s(e.format(e.best.ip,2,2))),i("br"),e._v(" Best EP: "+e._s(e.format(e.best.ep,2,2))),i("br"),i("br"),i("div",{staticClass:"l-remnant-factors-row"},[i("div",{staticClass:"l-remnant-factors-col l-remnant-factors-col--first"},[i("div",{staticClass:"l-remnant-factors-item"},[e._v(" log10(log10(am)"+e._s(e.dilationMult[0]>1?`*${e.dilationMult[0]}`:"")+" + 2) ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" log10(log10(ip)"+e._s(e.dilationMult[1]>1?`*${e.dilationMult[1]}`:"")+" + 2) ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" log10(log10(ep)"+e._s(e.dilationMult[2]>1?`*${e.dilationMult[2]}`:"")+" + 2) ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" Static divisor ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" Static power ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" Existing Remnants ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" Final amount ")])]),i("div",{staticClass:"l-remnant-factors-col"},[i("div",{staticClass:"l-remnant-factors-item"}),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" + ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" + ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" / ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" ^ ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" - ")])]),i("div",{staticClass:"l-remnant-factors-col"},[i("div",{staticClass:"l-remnant-factors-item"},[e._v(" "+e._s(e.format(Math.log10(e.best.am.add(1).log10()*e.dilationMult[0]+2),2,2))+" ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" "+e._s(e.format(Math.log10(e.best.ip.add(1).log10()*e.dilationMult[1]+2),2,2))+" ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" "+e._s(e.format(Math.log10(e.best.ep.add(1).log10()*e.dilationMult[2]+2),2,2))+" ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" "+e._s(e.format(1.64,2,2))+" ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" "+e._s(e.format(7.5,2,2))+" ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" "+e._s(e.format(e.remnants,2,0))+" ")]),i("div",{staticClass:"l-remnant-factors-item"},[e._v(" "+e._s(e.format(e.remnantsGain,2,e.remnantsGain>=1?0:2))+" ")])])])])]},proxy:!0}])})],1)},jYe=[],zYe=K(YYe,WYe,jYe,!1,null,null);const XYe=zYe.exports,KYe={name:"PelleUpgradePanel",components:{ArmageddonButton:Y5,PelleUpgradeVue:p4,RemnantGainFactor:XYe},data(){return{showBought:!1,isCollapsed:!1,isHovering:!1,remnants:0,realityShards:new Decimal(0),shardRate:new Decimal(0),upgrades:[],boughtUpgrades:[]}},computed:{collapseIcon(){return this.isCollapsed?"fas fa-expand-arrows-alt":"fas fa-compress-arrows-alt"},rebuyables:()=>PelleUpgrade.rebuyables,visibleUpgrades(){return this.upgrades.slice(0,5)},fadedUpgrades(){return this.upgrades.slice(5,10)},allUpgrades(){let t=[];return this.showBought&&(t=this.boughtUpgrades),t=t.concat(this.visibleUpgrades),t},showImprovedEstimate(){return this.isHovering&&!this.shardRate.eq(0)}},methods:{update(){this.showBought=Pelle.cel.showBought,this.isCollapsed=player.celestials.pelle.collapsed.upgrades,this.remnants=Pelle.cel.remnants,this.realityShards.copyFrom(Pelle.cel.realityShards),this.shardRate.copyFrom(Pelle.realityShardGainPerSecond),this.upgrades=PelleUpgrade.singles.filter(t=>!t.isBought),this.boughtUpgrades=PelleUpgrade.singles.filter(t=>t.isBought)},toggleBought(){Pelle.cel.showBought=!Pelle.cel.showBought,this.$recompute("upgrades")},toggleCollapse(){player.celestials.pelle.collapsed.upgrades=!this.isCollapsed}}};var ZYe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-pelle-panel-container"},[i("div",{staticClass:"c-pelle-panel-title"},[i("i",{staticClass:"c-collapse-icon-clickable",class:e.collapseIcon,on:{click:e.toggleCollapse}}),e._v(" Pelle Upgrades ")]),e.isCollapsed?e._e():i("div",{staticClass:"l-pelle-content-container"},[i("div",{staticClass:"c-armageddon-container"},[i("div",[i("div",{staticClass:"c-armageddon-button-container",on:{mouseover:function(n){e.isHovering=!0},mouseleave:function(n){e.isHovering=!1}}},[i("ArmageddonButton")],1),i("RemnantGainFactor",{attrs:{hide:e.showImprovedEstimate}})],1),i("div",{staticClass:"c-armageddon-resources-container"},[i("div",[e._v(" You have "),i("span",{staticClass:"c-remnants-amount"},[e._v(e._s(e.format(e.remnants,2)))]),e._v(" Remnants. ")]),i("div",[e._v(" You have "),i("span",{staticClass:"c-remnants-amount"},[e._v(e._s(e.format(e.realityShards,2)))]),e._v(" Reality Shards. "),i("span",{staticClass:"c-remnants-amount"},[e._v("+"+e._s(e.format(e.shardRate,2,2))+"/s")])])])]),i("div",{staticClass:"c-pelle-upgrade-container"},e._l(e.rebuyables,function(n){return i("PelleUpgradeVue",{key:n.config.id,attrs:{upgrade:n,"show-improved-estimate":e.showImprovedEstimate}})}),1),i("button",{staticClass:"o-pelle-button",on:{click:e.toggleBought}},[e._v(" "+e._s(e.showBought?"Showing bought upgrades":"Bought upgrades hidden")+" ")]),e.allUpgrades.length?i("div",{staticClass:"c-pelle-upgrade-container"},[e._l(e.allUpgrades,function(n){return i("PelleUpgradeVue",{key:n.config.id,attrs:{upgrade:n,"show-improved-estimate":e.showImprovedEstimate}})}),e._l(e.fadedUpgrades,function(n){return i("PelleUpgradeVue",{key:n.config.id,attrs:{upgrade:n,faded:""}})})],2):i("div",[e._v(" No upgrades to show! ")])])])},QYe=[],JYe=K(KYe,ZYe,QYe,!1,null,"c71fc570");const e8e=JYe.exports,t8e={name:"PelleTab",components:{PelleBarPanel:qYe,PelleUpgradePanel:e8e,GalaxyGeneratorPanel:CYe,CelestialQuoteHistory:ip},data(){return{isDoomed:!1,canEnterPelle:!1,completedRows:0,cappedResources:0,hasStrike:!1,hasGalaxyGenerator:!1}},computed:{symbol(){return Pelle.symbol},totalRows(){return Achievements.prePelleRows.length},totalAlchemyResources(){return AlchemyResources.all.length}},methods:{update(){this.isDoomed=Pelle.isDoomed,this.isDoomed||(this.completedRows=Achievements.prePelleRows.countWhere(t=>t.every(e=>e.isUnlocked)),this.cappedResources=AlchemyResources.all.countWhere(t=>t.capped),this.canEnterPelle=this.completedRows===this.totalRows&&this.cappedResources===this.totalAlchemyResources),this.hasStrike=PelleStrikes.all.some(t=>t.hasStrike),this.hasGalaxyGenerator=PelleRifts.recursion.milestones[2].canBeApplied||GalaxyGenerator.spentGalaxies>0},toggleBought(){Pelle.cel.showBought=!Pelle.cel.showBought,this.$recompute("upgrades")},showModal(){Modal.pelleEffects.show()},enterDoomModal(){Modal.armageddon.show()}}};var i8e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-pelle-celestial-tab"},[e.isDoomed?i("div",{staticClass:"l-pelle-all-content-container"},[i("CelestialQuoteHistory",{attrs:{celestial:"pelle"}}),i("div",{staticClass:"button-container"},[i("button",{staticClass:"o-pelle-button",on:{click:e.showModal}},[e._v(" Show effects in Doomed Reality ")])]),i("br"),e.hasGalaxyGenerator?i("GalaxyGeneratorPanel"):e._e(),e.hasStrike?i("PelleBarPanel"):e._e(),i("PelleUpgradePanel")],1):e.canEnterPelle?i("button",{staticClass:"pelle-doom-button",on:{click:e.enterDoomModal}},[e._v(" Doom"),i("br"),e._v("Your"),i("br"),e._v("Reality "),i("div",{staticClass:"pelle-icon-container"},[i("span",{staticClass:"pelle-icon"},[e._v(e._s(e.symbol))])])]):i("div",{staticClass:"pelle-unlock-requirements"},[e._v(" You must have "+e._s(e.formatInt(e.totalRows))+" rows of Achievements and all of your Glyph Alchemy Resources capped to unlock Pelle, Celestial of Antimatter. "),i("br"),i("br"),e._v(" "+e._s(e.formatInt(e.completedRows))+" / "+e._s(e.formatInt(e.totalRows))+" Achievement rows completed "),i("br"),e._v(" "+e._s(e.formatInt(e.cappedResources))+" / "+e._s(e.formatInt(e.totalAlchemyResources))+" capped Alchemy Resources ")])])},n8e=[],r8e=K(t8e,i8e,n8e,!1,null,"86baeebd");const s8e=r8e.exports,a8e={name:"PreviousSpeedrunInfo",props:{prevRunInfo:{type:Object,required:!1,default:()=>{}},index:{type:Number,required:!0}},computed:{segmentAttr(){return{icon:`fas o-icon ${this.prevRunInfo.isSegmented?"fa-stopwatch-20":"fa-stopwatch"}`,text:this.prevRunInfo.isSegmented?"Segmented":"Single Segment"}},stdAttr(){return{icon:`fas fa-coins o-icon ${this.prevRunInfo.usedSTD?"l-icon-on":"l-icon-off"}`,text:this.prevRunInfo.usedSTD?"Used STD Upgrades":"No STDs used"}},offlineAttr(){const t=this.prevRunInfo.offlineTimeUsed/this.prevRunInfo.records.max();let e;return t===0?e="fa-eye":t<.1?e="fa-computer":t<.6?e="fa-moon":e="fa-power-off",{icon:`fas o-icon ${e}`,text:`${t===0?"No":formatPercents(t,1)} Offline Time`}},seedAttr(){let t;switch(this.prevRunInfo.seedSelection){case SPEEDRUN_SEED_STATE.UNKNOWN:t="fa-question";break;case SPEEDRUN_SEED_STATE.FIXED:t="fa-gamepad";break;case SPEEDRUN_SEED_STATE.RANDOM:t="fa-dice";break;case SPEEDRUN_SEED_STATE.PLAYER:t="fa-user-pen";break;default:throw new Error("Unrecognized speedrun seed option in previous run subtab")}return{icon:`fas ${t} o-icon`,text:Speedrun.seedModeText(this.prevRunInfo)}},iconAttrs(){return[this.offlineAttr,this.segmentAttr,this.stdAttr,this.seedAttr]},startDate(){return Time.toDateTimeString(this.prevRunInfo.startDate)},finalTime(){return TimeSpan.fromMilliseconds(this.prevRunInfo.records.max()).toStringShort(!0,!0)}}};var o8e=function(){var e=this,i=e._self._c;return e.prevRunInfo?i("div",{staticClass:"c-icon-container"},[i("span",[e._v("Run "+e._s(e.index))]),i("span",[e._v(e._s(e.prevRunInfo.name))]),e._l(e.iconAttrs,function(n){return i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.text,expression:"attr.text"}],key:n.icon,class:n.icon})}),i("span",[e._v("Started: "+e._s(e.startDate))]),i("span",[e._v("Final Time: "+e._s(e.finalTime))])],2):i("div",{staticClass:"c-no-record"},[e._v(" No speedrun records found for run "+e._s(e.index)+". ")])},l8e=[],c8e=K(a8e,o8e,l8e,!1,null,"279778e1");const u8e=c8e.exports,d8e={name:"SpeedrunMilestoneCompare",props:{milestone:{type:Object,required:!0},currTime:{type:Number,required:!1,default:0},refTime:{type:Number,required:!1,default:0},bestTime:{type:Number,required:!0},runIndices:{type:Array,required:!0}},data(){return{realTime:0}},computed:{classObject(){const t=this.currTime>0&&this.refTime>0;return{"l-speedrun-milestone-entry":!0,"l-milestone-slow":t&&this.currTime>this.refTime,"l-milestone-fast":t&&this.currTime<this.refTime,"l-milestone-fastest":t&&this.currTime<this.bestTime}}},methods:{update(){this.realTime=player.records.realTimePlayed},timeString(t,e){const i=TimeSpan.fromMilliseconds(t).toStringShort(!0,!0),n=this.currTime>0?this.currTime-t:this.realTime-t;let r=TimeSpan.fromMilliseconds(Math.abs(n)).toStringShort(!0,!0);return r=`${this.currTime>t?"-":"+"}${r}`,t>0?`${i}${e?` (${r})`:""}`:"Not reached yet"},timeStyle(t){const e=t===[this.currTime,this.refTime,this.bestTime].filter(i=>i!==0).min();return{color:"var(--color-text)",opacity:e?1:.85,"font-weight":e?"bold":null}}}};var h8e=function(){var e=this,i=e._self._c;return i("div",{class:e.classObject},[i("span",{staticClass:"l-milestone-title"},[e._v(e._s(e.milestone.name))]),i("span",{style:e.timeStyle(e.currTime)},[e._v("Current run: "+e._s(e.timeString(e.currTime)))]),e.refTime?i("span",{style:e.timeStyle(e.refTime)},[e._v(" Run "+e._s(e.runIndices[0])+": "+e._s(e.timeString(e.refTime,!0))+" ")]):e._e(),i("span",{style:e.timeStyle(e.bestTime)},[e._v("Best ("+e._s(e.runIndices[1])+"): "+e._s(e.timeString(e.bestTime,!0)))])])},f8e=[],p8e=K(d8e,h8e,f8e,!1,null,"b9670f28");const m8e=p8e.exports,y8e={name:"PreviousSpeedrunTab",components:{PrimaryButton:yt,SpeedrunMilestoneCompare:m8e,PreviousSpeedrunInfo:u8e},data(){return{milestoneTimes:[],isSpectating:!1,selectedRun:0,runPage:0}},computed:{milestones:()=>GameDatabase.speedrunMilestones,previousRuns(){const t=Object.keys(player.speedrun.previousRuns),e=[];for(const i of t){const n=player.speedrun.previousRuns[i];n.id=Number(i),e.push(n)}return e},bestPreviousTimes(){const t=GameDatabase.speedrunMilestones.length+1,e=Array.repeat(0,t),i=[...e];for(const r of Object.keys(player.speedrun.previousRuns)){const s=player.speedrun.previousRuns[r].records;for(let a=0;a<t;a++)s[a]!==0&&(s[a]<e[a]||e[a]===0)&&(e[a]=s[a],i[a]=r)}const n=Array.repeat({},t);for(let r=0;r<t;r++)n[r]={time:e[r],index:i[r]};return n},numRuns(){return Object.keys(this.previousRuns).length},highestIndex(){return Math.max(this.previousRuns.map(t=>Number(t.id)).max(),player.records.fullGameCompletions)},spectateText(){return this.isSpectating?"Numbers here are unaffected by END so that you can see your final records.":null}},methods:{update(){this.milestoneTimes=[...player.speedrun.records],this.isSpectating=GameEnd.endState>END_STATE_MARKERS.SPECTATE_GAME},selectRun(t){this.selectedRun=t},findRun(t){return this.previousRuns.find(e=>(e==null?void 0:e.id)===10*this.runPage+t)},changePage(t){this.runPage=Math.clamp(this.runPage+t,0,Math.floor(this.highestIndex/10))}}};var g8e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-previous-runs"},[i("b",[e._v("You have completed "+e._s(e.quantify("speedrun",e.numRuns,0,0,n=>n))+" prior to this playthrough.")]),i("b",[e._v("Statistics of previous runs are below, mouseover icons for more details.")]),i("b",[e._v("Click the magnifying glass to compare the milestones on a particular run to this run.")]),i("b",[e._v(e._s(e.spectateText))]),i("br"),e.highestIndex>10?i("div",{staticClass:"c-run-page-nav"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option fas fa-arrow-left",class:{"o-primary-btn--disabled":e.runPage===0},on:{click:function(n){return e.changePage(-1)}}}),e._v(" Showing runs "+e._s(10*e.runPage+1)+" to "+e._s(10*(e.runPage+1))+" ("+e._s(e.highestIndex)+" total runs) "),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option fas fa-arrow-right",class:{"o-primary-btn--disabled":e.runPage+1>e.highestIndex/10},on:{click:function(n){return e.changePage(1)}}})],1):e._e(),i("div",{staticClass:"c-previous-runs"},e._l(10,function(n){return i("span",{key:n},[10*e.runPage+n<=e.highestIndex?i("span",{staticClass:"c-single-run"},[e.findRun(n)?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option fas fa-magnifying-glass",class:{"o-selected-btn":e.selectedRun===10*e.runPage+n},on:{click:function(r){return e.selectRun(10*e.runPage+n)}}}):e._e(),i("PreviousSpeedrunInfo",{attrs:{"prev-run-info":e.findRun(n),index:10*e.runPage+n}})],1):e._e()])}),0),i("br"),e._m(0),i("div",{staticClass:"l-speedrun-milestone-tab"},e._l(e.milestones,function(n){return i("SpeedrunMilestoneCompare",{key:n.id,attrs:{milestone:n,"curr-time":e.milestoneTimes[n.id],"ref-time":e.selectedRun?e.previousRuns.find(r=>r.id===e.selectedRun).records[n.id]:null,"best-time":e.bestPreviousTimes[n.id].time,"run-indices":[e.selectedRun,e.bestPreviousTimes[n.id].index]}})}),1)])},v8e=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-legend"},[e("div",{staticClass:"c-legend-cell"},[e("span",{staticClass:"o-box l-milestone-none"}),t._v(" Not reached this run ")]),e("div",{staticClass:"c-legend-cell"},[e("span",{staticClass:"o-box l-milestone-slow"}),t._v(" Slower than comparison ")]),e("div",{staticClass:"c-legend-cell"},[e("span",{staticClass:"o-box l-milestone-fast"}),t._v(" Faster than comparison ")]),e("div",{staticClass:"c-legend-cell"},[e("span",{staticClass:"o-box l-milestone-fastest"}),t._v(" Faster than best ")])])}],b8e=K(y8e,g8e,v8e,!1,null,"35b9b218");const _8e=b8e.exports,E8e={name:"RaPetLevelBar",props:{petConfig:{type:Object,required:!0}},data(){return{isUnlocked:!1,level:0,memories:0,requiredMemories:0,nextLevelEstimate:0}},computed:{pet(){return this.petConfig.pet},shiftDown(){return ui.view.shiftDown},unlocks(){return this.pet.unlocks},importantLevels(){return this.unlocks.map(t=>t.level)},barStyle(){return{width:`${100*Math.min(1,this.memories/this.requiredMemories)}%`,background:this.pet.color}},petStyle(){return{"background-color":this.pet.color}},prevGoal(){const t=this.importantLevels.filter(e=>e<=this.level);return Math.clampMax(t.max(),15)},nextGoal(){const t=this.importantLevels.filter(e=>e>this.level);return t.length===0?25:t.min()},currentLevelGoal(){return this.level+1},classObject(){const t=this.memories>=this.requiredMemories,e=this.pet;return{"c-ra-level-up-btn":!0,"c-ra-pet-btn--available":t,[`c-ra-pet-btn--${e.id}`]:t}},nextUnlock(){return this.pet.unlocks.find(e=>e.level===this.level+1)??!1},showNextScalingUpgrade(){switch(this.pet.name){case"Teresa":return Math.min(12,Math.floor(this.level/2))!==Math.min(12,Math.floor((this.level+1)/2));case"Effarig":return AlchemyResources.all.filter(t=>t.unlockedAt===this.level+1).length>0;case"Enslaved":return!0;case"V":return Math.min(Math.floor(this.level/6),4)!==Math.min(Math.floor((this.level+1)/6),4);default:return!1}},nextScalingUpgrade(){const t=AlchemyResources.all.filter(e=>e.unlockedAt===this.level+1)[0];switch(this.pet.name){case"Teresa":return"You can charge an additional Infinity Upgrade";case"Effarig":return`Unlock the ${t.name} resource in Glyph Alchemy, which
          ${t.description}`;case"Enslaved":return`${formatX(20)} to stored game time, and you can store an additional hour of real time`;case"V":return"You can purchase an additional Triad Study";default:return"false"}},reward(){return typeof this.nextUnlock.reward=="function"?this.nextUnlock.reward():this.nextUnlock.reward}},methods:{update(){const t=this.pet;this.isUnlocked=t.isUnlocked,this.isUnlocked&&(this.memories=t.memories,this.level=t.level,this.requiredMemories=t.requiredMemories,this.nextLevelEstimate=Ra.timeToGoalString(this.pet,this.requiredMemories-this.memories))},isImportant(t){return this.importantLevels.includes(t)}}};var T8e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-ra-bar-container"},[i("div",{staticClass:"c-ra-exp-bar"},[i("div",{staticClass:"c-ra-exp-bar-inner",style:e.barStyle})]),i("div",{class:e.classObject,on:{click:function(n){return e.pet.levelUp()}}},[i("span",{staticClass:"fas fa-arrow-up"}),i("div",{staticClass:"c-ra-pet-upgrade__tooltip"},[i("div",{staticClass:"c-ra-pet-upgrade__tooltip__name"},[e._v(" Level "+e._s(e.pet.name)+" to "+e._s(e.formatInt(e.level+1))+" ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__description"},[e._v(" "+e._s(e.reward)+" "),e.showNextScalingUpgrade?i("div",{style:{"margin-top":e.nextUnlock.reward?"0.6rem":"0"}},[e._v(" "+e._s(e.nextScalingUpgrade)+" ")]):e._e()]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__footer"},[e._v(" Cost: "+e._s(e.quantify("Memory",e.requiredMemories,2,2))+" "),e.memories<=e.requiredMemories?i("span",[e._v(e._s(e.nextLevelEstimate))]):e._e()])])])])},w8e=[],C8e=K(E8e,T8e,w8e,!1,null,null);const S8e=C8e.exports,k8e={name:"RaUpgradeIcon",props:{unlock:{type:Object,required:!0}},data(){return{isUnlocked:!1,level:0,description:""}},computed:{petID(){return this.unlock.pet.id},petName(){return this.unlock.pet.name},icon(){return this.unlock.displayIcon},classObject(){return{"c-ra-upgrade-icon":!0,"c-ra-upgrade-icon--inactive":!this.isUnlocked,[`c-ra-upgrade-icon--${this.petID}`]:!0}},isUseless(){return this.unlock.disabledByPelle}},methods:{update(){const t=this.unlock;this.isUnlocked=t.isUnlocked,this.level=t.level,this.description=t.reward}}};var A8e=function(){var e=this,i=e._self._c;return i("div",{class:e.classObject},[i("div",{domProps:{innerHTML:e._s(e.icon)}}),i("div",{staticClass:"c-ra-pet-upgrade__tooltip"},[i("div",{staticClass:"c-ra-pet-upgrade__tooltip__name"},[e._v(" "+e._s(e.petName)+" Level "+e._s(e.formatInt(e.level))+" ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__description",class:{"o-pelle-disabled":e.isUseless}},[e._v(" "+e._s(e.description)+" ")])])])},R8e=[],I8e=K(k8e,A8e,R8e,!1,null,"3044a86a");const D8e=I8e.exports,x8e={name:"RaPet",components:{RaUpgradeIcon:D8e,RaPetLevelBar:S8e},props:{petConfig:{type:Object,required:!0}},data(){return{isUnlocked:!1,isRaCapped:!1,isCapped:!1,level:0,memories:0,requiredMemories:0,memoryChunks:0,memoryChunksPerSecond:0,memoriesPerSecond:0,memoryMultiplier:1,canGetMemoryChunks:!1,memoryUpgradeCost:0,chunkUpgradeCost:0,memoryUpgradeCapped:!1,chunkUpgradeCapped:!1,currentMemoryMult:0,currentChunkMult:0,nextMemoryUpgradeEstimate:"",nextMemoryChunkUpgradeEstimate:""}},computed:{levelCap(){return Ra.levelCap},showScalingUpgrade(){return this.petConfig.scalingUpgradeVisible(this.level)},scalingUpgradeText(){return this.petConfig.scalingUpgradeText(this.level)},pet(){return this.petConfig.pet},name(){return this.pet.name},petStyle(){return{color:this.pet.color}},unlocks(){return this.pet.unlocks},chunkTooltip(){return`Based on ${this.pet.chunkGain}`},memoryGainTooltip(){return`Based on ${this.pet.memoryGain}`}},methods:{update(){this.isRaCapped=Ra.totalPetLevel===Ra.maxTotalPetLevel;const t=this.pet;this.isCapped=t.level===Ra.levelCap,this.isUnlocked=t.isUnlocked,this.isUnlocked&&(this.level=t.level,this.memories=t.memories,this.requiredMemories=t.requiredMemories,this.memoryChunks=t.memoryChunks,this.memoryChunksPerSecond=t.memoryChunksPerSecond,this.memoriesPerSecond=t.memoryChunks*Ra.productionPerMemoryChunk*this.currentMemoryMult,this.canGetMemoryChunks=t.canGetMemoryChunks,this.memoryMultiplier=t.memoryProductionMultiplier,this.memoryUpgradeCost=t.memoryUpgradeCost,this.chunkUpgradeCost=t.chunkUpgradeCost,this.memoryUpgradeCapped=t.memoryUpgradeCapped,this.chunkUpgradeCapped=t.chunkUpgradeCapped,this.currentMemoryMult=t.memoryUpgradeCurrentMult,this.currentChunkMult=t.chunkUpgradeCurrentMult,this.nextMemoryUpgradeEstimate=Ra.timeToGoalString(t,this.memoryUpgradeCost-this.memories),this.nextMemoryChunkUpgradeEstimate=Ra.timeToGoalString(t,this.chunkUpgradeCost-this.memories))},nextUnlockLevel(){const t=this.pet.unlocks.map(e=>e.level).filter(e=>e>this.level);return t.length===0?25:t.min()},upgradeClassObject(t){const e=t==="memory"?this.memoryUpgradeCost<=this.memories:this.chunkUpgradeCost<=this.memories,i=t==="memory"?this.memoryUpgradeCapped:this.chunkUpgradeCapped,n=this.pet;return{"c-ra-pet-upgrade":!0,"c-ra-pet-upgrade-memory":t==="memory","c-ra-pet-upgrade-chunk":t==="chunk","c-ra-pet-btn--available":e,[`c-ra-pet-btn--${n.id}`]:e,"c-ra-pet-btn--available__capped":i,[`c-ra-pet-btn--${n.id}__capped`]:i}},barStyle(t){const e=t==="memory"?this.memoryUpgradeCost:this.chunkUpgradeCost,i=t==="memory"&&this.memoryUpgradeCapped||t==="chunk"&&this.chunkUpgradeCapped?e:this.memories;return{width:`${100*Math.min(1,i/e)}%`,background:this.pet.color}}}};var M8e=function(){var e=this,i=e._self._c;return e.isUnlocked?i("div",{staticClass:"l-ra-pet-container"},[i("div",{staticClass:"c-ra-pet-header",style:e.petStyle},[i("div",{staticClass:"c-ra-pet-title"},[e._v(" "+e._s(e.pet.id==="enslaved"?"Nameless":e.name)+" Level "+e._s(e.formatInt(e.level))+"/"+e._s(e.formatInt(e.levelCap))+" ")]),e.showScalingUpgrade?i("div",{key:e.level},[e._v(" "+e._s(e.scalingUpgradeText)+" ")]):i("br"),e.isCapped?e._e():i("div",[i("div",[e._v(" "+e._s(e.name)+" "+e._s(e.pet.id==="enslaved"?"have":"has")+" "+e._s(e.quantify("Memory",e.memories,2))+" ")])]),e.isCapped?e._e():i("div",{staticClass:"l-ra-pet-middle-container"},[i("div",{staticClass:"l-ra-pet-upgrade-container"},[i("div",{staticClass:"l-ra-pet-upgrade c-ra-pet-upgrade__top"},[i("div",{class:e.upgradeClassObject("memory"),on:{click:function(n){return e.pet.purchaseMemoryUpgrade()}}},[i("span",{staticClass:"fas fa-brain"}),e.memoryUpgradeCapped?i("div",{staticClass:"c-ra-pet-upgrade__tooltip"},[i("div",{staticClass:"c-ra-pet-upgrade__tooltip__name"},[e._v(" "+e._s(e.name)+"'s Recollection ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__description"},[e._v(" Capped: "+e._s(e.formatX(e.currentMemoryMult,2,2))+" ")])]):i("div",{staticClass:"c-ra-pet-upgrade__tooltip"},[i("div",{staticClass:"c-ra-pet-upgrade__tooltip__name"},[e._v(" "+e._s(e.name)+"'s Recollection ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__description"},[e._v(" Gain "+e._s(e.formatPercents(.3))+" more Memories ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__footer"},[e._v(" Cost: "+e._s(e.quantify("Memory",e.memoryUpgradeCost,2,2))+" "),e.memories<=e.memoryUpgradeCost?i("span",[e._v(" "+e._s(e.nextMemoryUpgradeEstimate)+" ")]):e._e(),i("br"),e._v(" Currently: "+e._s(e.formatX(e.currentMemoryMult,2,2))+" ")])])]),i("div",{staticClass:"c-ra-upgrade-bar"},[i("div",{staticClass:"c-ra-upgrade-bar__inner",style:e.barStyle("memory")})])]),i("div",{staticClass:"l-ra-pet-upgrade c-ra-pet-upgrade__bottom"},[i("div",{class:e.upgradeClassObject("chunk"),on:{click:function(n){return e.pet.purchaseChunkUpgrade()}}},[i("span",{staticClass:"fas fa-dice-d6"}),e.chunkUpgradeCapped?i("div",{staticClass:"c-ra-pet-upgrade__tooltip"},[i("div",{staticClass:"c-ra-pet-upgrade__tooltip__name"},[e._v(" "+e._s(e.name)+"'s Fragmentation ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__description"},[e._v(" Capped: "+e._s(e.formatX(e.currentChunkMult,2,2))+" ")])]):i("div",{staticClass:"c-ra-pet-upgrade__tooltip"},[i("div",{staticClass:"c-ra-pet-upgrade__tooltip__name"},[e._v(" "+e._s(e.name)+"'s Fragmentation ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__description"},[e._v(" Gain "+e._s(e.formatPercents(.5))+" more Memory Chunks ")]),i("div",{staticClass:"c-ra-pet-upgrade__tooltip__footer"},[e._v(" Cost: "+e._s(e.quantify("Memory",e.chunkUpgradeCost,2,2))+" "),e.memories<=e.chunkUpgradeCost?i("span",[e._v(" "+e._s(e.nextMemoryChunkUpgradeEstimate)+" ")]):e._e(),i("br"),e._v(" Currently: "+e._s(e.formatX(e.currentChunkMult,2,2))+" ")])])]),i("div",{staticClass:"c-ra-upgrade-bar c-ra-upgrade-bar--bottom"},[i("div",{staticClass:"c-ra-upgrade-bar__inner",style:e.barStyle("chunk")})])])]),e.isCapped?e._e():i("RaPetLevelBar",{attrs:{"pet-config":e.petConfig}})],1),e.isCapped?e._e():i("div",[i("div",[e._v(" "+e._s(e.quantify("Memory Chunk",e.memoryChunks,2,2))+", "+e._s(e.quantify("Memory",e.memoriesPerSecond,2,2))+"/sec ")]),i("div",[e._v(" Gaining "+e._s(e.quantify("Memory Chunk",e.memoryChunksPerSecond,2,2))+"/sec "),i("span",{attrs:{"ach-tooltip":e.chunkTooltip}},[i("i",{staticClass:"fas fa-question-circle"})])])]),e.memoryMultiplier>1&&!e.isRaCapped?i("div",[e._v(" Multiplying all Memory production by "+e._s(e.format(e.memoryMultiplier,2,3))+" "),i("span",{attrs:{"ach-tooltip":e.memoryGainTooltip}},[i("i",{staticClass:"fas fa-question-circle"})])]):e.isRaCapped?e._e():i("br"),e.isRaCapped?i("div",{staticClass:"l-ra-pet-postcompletion-spacer"}):i("br"),i("div",{staticClass:"l-ra-pet-milestones"},e._l(e.unlocks,function(n,r){return i("RaUpgradeIcon",{key:25*e.level+r,attrs:{unlock:n}})}),1)])]):e._e()},P8e=[],O8e=K(x8e,M8e,P8e,!1,null,"8f1ac903");const N8e=O8e.exports,G8e={name:"RaPetRemembranceButton",props:{petConfig:{type:Object,required:!0}},data(){return{isUnlocked:!1,hasRemembrance:!1}},computed:{pet(){return this.petConfig.pet},name(){return this.pet.name},petStyle(){return{backgroundColor:this.hasRemembrance?this.pet.color:"#555","box-shadow":this.hasRemembrance?"0.1rem 0.1rem 0.1rem rgba(0, 0, 0, 0.7)":"","border-color":this.hasRemembrance?"black":""}}},methods:{update(){const t=this.pet;this.isUnlocked=t.isUnlocked,this.isUnlocked&&(this.hasRemembrance=t.hasRemembrance)},toggleRemembrance(){Ra.petWithRemembrance=Ra.petWithRemembrance===this.pet.name?"":this.pet.name}}};var U8e=function(){var e=this,i=e._self._c;return e.isUnlocked?i("button",{staticClass:"c-ra-pet-remembrance-button",style:e.petStyle,on:{click:e.toggleRemembrance}},[e.hasRemembrance?i("span",[e._v(" Remembrance given to "+e._s(e.name)+" ")]):i("span",[e._v(" Give Remembrance to "+e._s(e.name)+" ")])]):e._e()},L8e=[],B8e=K(G8e,U8e,L8e,!1,null,null);const F8e=B8e.exports,$8e={name:"RaTab",components:{RaPet:N8e,RaPetRemembranceButton:F8e,CelestialQuoteHistory:ip},data(){return{memoriesPerChunk:0,showReality:!1,isRaCapped:!1,totalLevels:0,showRemembrance:!1,hasRemembrance:!1,remembranceReq:0,remembranceMult:1,remembranceNerf:1,petWithRemembrance:"",isRunning:!1,memoryBoosts:""}},computed:{laitelaUnlock:()=>Laitela.isUnlocked,pets:()=>[{pet:Ra.pets.teresa,scalingUpgradeVisible:()=>Ra.unlocks.chargedInfinityUpgrades.isUnlocked,scalingUpgradeText:()=>`You can Charge ${quantifyInt("Infinity Upgrade",Ra.totalCharges)}.`},{pet:Ra.pets.effarig,scalingUpgradeVisible:()=>AlchemyResources.all.filter(t=>t.isUnlocked).length>0,scalingUpgradeText:()=>{const t=AlchemyResources.all.filter(e=>e.isUnlocked).length;return`You have unlocked ${quantifyInt("Alchemy Resource",t)}.`}},{pet:Ra.pets.enslaved,scalingUpgradeVisible:()=>Ra.unlocks.improvedStoredTime.isUnlocked,scalingUpgradeText:()=>`Stored game time
          ${formatX(Ra.unlocks.improvedStoredTime.effects.gameTimeAmplification.effectOrDefault(1),2)} and real time
          +${formatInt(Ra.unlocks.improvedStoredTime.effects.realTimeCap.effectOrDefault(0)/(1e3*3600))} hours`},{pet:Ra.pets.v,scalingUpgradeVisible:()=>Ra.unlocks.unlockHardV.isUnlocked,scalingUpgradeText:()=>{const t=Ra.unlocks.unlockHardV.effectOrDefault(0);return`You have unlocked ${quantifyInt("Triad Study",t)}.`}}],petStyle(){return{color:this.petWithRemembrance===""?"white":this.pets.find(t=>t.pet.name===this.petWithRemembrance).pet.color}},runButtonClassObject(){return{"c-ra-run-button__icon":!0,"c-ra-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runDescription(){return GameDatabase.celestials.descriptions[4].effects().replace(/^\w/u,t=>t.toUpperCase()).split(`
`)},memoryDescription(){return`Within Ra's Reality, Memory Chunks for Celestial Memories
        will be generated based on certain resource amounts.`},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.memoriesPerChunk=Ra.productionPerMemoryChunk,this.isRaCapped=Ra.totalPetLevel===100,this.totalLevels=Ra.totalPetLevel,this.showRemembrance=Ra.unlocks.effarigUnlock.canBeApplied,this.hasRemembrance=Ra.remembrance.isUnlocked,this.remembranceReq=Ra.remembrance.requiredLevels,this.remembranceMult=Ra.remembrance.multiplier,this.remembranceNerf=Ra.remembrance.nerf,this.petWithRemembrance=Ra.petWithRemembrance,this.isRunning=Ra.isRunning,this.memoryBoosts=Ra.memoryBoostResources},startRun(){this.isDoomed||Modal.celestials.show({name:"Ra's",number:4})},toggleMode(){Ra.toggleMode()}}};var H8e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-ra-celestial-tab"},[i("div",{staticClass:"c-ra-memory-header"},[i("CelestialQuoteHistory",{attrs:{celestial:"ra"}}),e.isRaCapped?i("div",[e._v(" All Memories have been returned. ")]):i("div",[e._v(" Each Memory Chunk generates a base of one Memory per second"),e.memoriesPerChunk>1?i("span",[e._v(", which has been increased to "+e._s(e.quantify("Memory",e.memoriesPerChunk,2,3))+" per second")]):e._e(),e._v(". "),i("br"),e._v(" Storing real time prevents Memory Chunk generation, but Memories will still be gained normally. "),e.memoriesPerChunk>1?i("span",[i("br"),e._v(" This is being increased due to "+e._s(e.memoryBoosts)+". ")]):e._e()])],1),e._m(0),i("div",{staticClass:"l-ra-all-pets-container"},e._l(e.pets,function(n,r){return i("RaPet",{key:r,attrs:{"pet-config":n}})}),1),i("div",{staticClass:"l-ra-non-pets"},[i("button",{staticClass:"c-ra-run-button"},[i("h2",{class:{"o-pelle-disabled":e.isDoomed}},[e.isRunning?i("span",[e._v("You are in ")]):i("span",[e._v("Start ")]),e._v(" Ra's Reality ")]),i("div",{class:e.runButtonClassObject,on:{click:e.startRun}},[i("span",{staticClass:"c-ra-run-button__icon__sigil fas fa-sun"})]),e._l(e.runDescription,function(n,r){return i("span",{key:r+"-ra-run-desc"},[e._v(" "+e._s(n)+" ")])}),i("br"),i("span",[e._v(" "+e._s(e.memoryDescription)+" ")])],2),e.showRemembrance&&!e.isRaCapped?i("div",{staticClass:"c-ra-remembrance-unlock"},[i("h1",{style:e.petStyle},[e._v(" Remembrance ")]),i("span",{style:e.petStyle},[e._v(" Whichever Celestial has Remembrance will get "+e._s(e.formatX(e.remembranceMult))+" Memory Chunk gain. The other Celestials will get "+e._s(e.formatX(e.remembranceNerf,1,1))+" Memory Chunk gain. ")]),e.hasRemembrance?i("div",{staticClass:"c-ra-remembrance-unlock-inner"},e._l(e.pets,function(n,r){return i("RaPetRemembranceButton",{key:r,attrs:{"pet-config":n}})}),1):i("div",{staticClass:"c-ra-remembrance-unlock-inner"},[e._v(" Unlocked by getting "+e._s(e.formatInt(e.remembranceReq))+" total Celestial Memory levels (you need "+e._s(e.formatInt(e.remembranceReq-e.totalLevels))+" more) ")])]):e._e()])])},V8e=[function(){var t=this,e=t._self._c;return e("div",[t._v(" Mouse-over the icons below the bar to see descriptions of upgrades, "),e("br"),t._v(" and mouse-over "),e("i",{staticClass:"fas fa-question-circle"}),t._v(" icons for specific resource information. ")])}],q8e=K($8e,H8e,V8e,!1,null,null);const Y8e=q8e.exports,W8e={name:"RealityUpgradeButton",components:{PrimaryToggleButton:cn,DescriptionDisplay:Qs,EffectDisplay:lo,CostDisplay:mc,HintText:gc},props:{upgrade:{type:Object,required:!0}},data(){return{isAvailableForPurchase:!1,automatorPoints:!1,canBeBought:!1,isRebuyable:!1,isBought:!1,isPossible:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,canBeLocked:!1,hasRequirementLock:!1}},computed:{config(){return this.upgrade.config},classObject(){return{"c-reality-upgrade-btn--useless":this.isUseless,"c-reality-upgrade-btn--bought":this.isBought&&!this.isUseless,"c-reality-upgrade-btn--unavailable":!this.isBought&&!this.canBeBought&&this.isAvailableForPurchase,"c-reality-upgrade-btn--possible":!this.isAvailableForPurchase&&this.isPossible,"c-reality-upgrade-btn--locked":!this.isAvailableForPurchase&&!this.isPossible}},requirementConfig(){return{description:this.config.requirement}},canLock(){return this.config.canLock&&!(this.isAvailableForPurchase||this.isBought)},isUseless(){return Pelle.disabledRUPGs.includes(this.upgrade.id)&&Pelle.isDoomed}},watch:{isAutobuyerOn(t){Autobuyer.realityUpgrade(this.upgrade.id).isActive=t}},methods:{update(){const t=this.upgrade;this.isAvailableForPurchase=t.isAvailableForPurchase,this.automatorPoints=this.config.automatorPoints,this.canBeBought=t.canBeBought,this.isRebuyable=t.isRebuyable,this.isBought=!t.isRebuyable&&t.isBought,this.isPossible=t.isPossible,this.isAutoUnlocked=Ra.unlocks.instantECAndRealityUpgradeAutobuyers.canBeApplied,this.canBeLocked=t.config.canLock&&!this.isAvailableForPurchase,this.hasRequirementLock=t.hasPlayerLock,this.isRebuyable&&(this.isAutobuyerOn=Autobuyer.realityUpgrade(t.id).isActive)},toggleLock(t){this.isRebuyable||t.toggleMechanicLock()}}};var j8e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group"},[i("button",{staticClass:"l-reality-upgrade-btn c-reality-upgrade-btn",class:e.classObject,on:{click:[function(n){return!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey?null:e.toggleLock(e.upgrade)},function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey?null:e.upgrade.purchase()}]}},[i("HintText",{staticClass:"l-hint-text--reality-upgrade c-hint-text--reality-upgrade",attrs:{type:"realityUpgrades"}},[e._v(" "+e._s(e.config.name)+" ")]),i("span",{class:{"o-pelle-disabled":e.isUseless}},[i("DescriptionDisplay",{attrs:{config:e.config}}),e.$viewModel.shiftDown===e.isAvailableForPurchase&&!e.isRebuyable?[i("br"),i("DescriptionDisplay",{staticClass:"c-reality-upgrade-btn__requirement",attrs:{config:e.requirementConfig,label:"Requirement:"}})]:[i("EffectDisplay",{attrs:{config:e.config,br:""}}),e.isBought?e._e():i("CostDisplay",{attrs:{config:e.config,br:"",name:"Reality Machine"}})],e.automatorPoints&&!e.isBought?i("b",[e._v(" (+"+e._s(e.formatInt(e.automatorPoints))+" AP) ")]):e._e()],2)],1),e.canBeLocked?i("div",{staticClass:"o-requirement-lock"},[e.hasRequirementLock?i("i",{staticClass:"fas fa-lock"}):e.canLock?i("i",{staticClass:"fas fa-lock-open"}):e._e()]):e._e(),e.isRebuyable&&e.isAutoUnlocked?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon-reality-btn o-primary-btn--reality-upgrade-toggle",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):e._e()],1)},z8e=[],X8e=K(W8e,j8e,z8e,!1,null,"0d02a306");const K8e=X8e.exports,Z8e={name:"RealityUpgradesTab",components:{RealityUpgradeButton:K8e},computed:{upgrades:()=>RealityUpgrades.all,costScalingTooltip:()=>`Prices start increasing faster above ${format(1e30)} RM and then even faster
      above ${format(Decimal.NUMBER_MAX_VALUE,1)} RM`,possibleTooltip:()=>`Checkered upgrades are impossible to unlock this Reality. Striped upgrades are
      still possible.`,lockTooltip:()=>`This will only function if you have not already failed the condition or
      unlocked the upgrade.`},methods:{id(t,e){return(t-1)*5+e-1}}};var Q8e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-reality-upgrade-grid"},[i("div",{staticClass:"c-reality-upgrade-infotext"},[e._v(" Mouseover "),i("i",{staticClass:"fas fa-question-circle"}),e._v(" icons for additional information. "),i("br"),e._v(" The first row of upgrades can be purchased endlessly for increasing costs "),i("span",{attrs:{"ach-tooltip":e.costScalingTooltip}},[i("i",{staticClass:"fas fa-question-circle"})]),e._v(" and the rest are single-purchase. "),i("br"),e._v(" Single-purchase upgrades also have requirements which, once completed, permanently unlock the ability to purchase the upgrades at any point. "),i("span",{attrs:{"ach-tooltip":e.possibleTooltip}},[i("i",{staticClass:"fas fa-question-circle"})]),i("br"),e._v(" Locked upgrades show their requirement and effect by default; unlocked ones show their effect, current bonus, and cost. Hold shift to swap this behavior. "),i("br"),e._v(" You can shift-click upgrades with "),i("i",{staticClass:"fas fa-lock-open"}),e._v(" to make the game prevent you from doing anything this Reality which would cause you to fail their unlock condition. "),i("span",{attrs:{"ach-tooltip":e.lockTooltip}},[i("i",{staticClass:"fas fa-question-circle"})]),i("br"),e._v(" Every completed row of purchased upgrades increases your Glyph level by "+e._s(e.formatInt(1))+". ")]),e._l(5,function(n){return i("div",{key:n,staticClass:"l-reality-upgrade-grid__row"},e._l(5,function(r){return i("RealityUpgradeButton",{key:e.id(n,r),attrs:{upgrade:e.upgrades[e.id(n,r)]}})}),1)})],2)},J8e=[],e9e=K(Z8e,Q8e,J8e,!1,null,"76cefb28");const t9e=e9e.exports,i9e={name:"ReplicantiUpgradeButton",components:{PrimaryButton:yt,PrimaryToggleButton:cn},props:{setup:{type:Object,required:!0}},data(){return{description:"",canBeBought:!1,costDescription:"",isCapped:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,isEC8Running:!1}},computed:{upgrade(){return this.setup.upgrade}},watch:{isAutobuyerOn(t){Autobuyer.replicantiUpgrade(this.upgrade.id).isActive=t}},methods:{update(){const t=this.setup,e=t.upgrade;this.description=t.formatDescription(e.value),this.canBeBought=e.canBeBought,this.isCapped=e.isCapped,this.isCapped||(this.costDescription=t.formatCost(e.cost));const i=Autobuyer.replicantiUpgrade(e.id);this.isAutoUnlocked=i.isUnlocked,this.isAutobuyerOn=i.isActive,this.isEC8Running=EternityChallenge(8).isRunning}}};class cC{constructor(e,i,n){this.upgrade=e,this.formatDescription=i,this.formatCost=n}}var n9e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group l-replicanti-upgrade-button"},[i("PrimaryButton",{staticClass:"o-primary-btn--replicanti-upgrade",attrs:{enabled:e.canBeBought},on:{click:function(n){return e.upgrade.purchase()}}},[i("span",{domProps:{innerHTML:e._s(e.description)}}),e.isCapped?e._e():[i("br"),i("span",[e._v(e._s(e.costDescription))])]],2),e.isAutoUnlocked&&!e.isEC8Running?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon o-primary-btn--replicanti-upgrade-toggle",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):e._e()],1)},r9e=[],s9e=K(i9e,n9e,r9e,!1,null,"d4c91ef4");const a9e=s9e.exports,o9e={name:"ReplicantiGainText",data(){return{remainingTimeText:"",galaxyText:""}},methods:{update(){const t=player.options.updateRate,e=1e3/t,i=Decimal.divide(getGameSpeedupForDisplay()*t*Math.log(player.replicanti.chance+1),getReplicantiInterval()),n=i.dividedBy(Math.LN10),r=Decimal.divide(getGameSpeedupForDisplay()*t*Math.log(player.replicanti.chance+1),getReplicantiInterval(!1)).dividedBy(Math.LN10),s=Replicanti.amount,a=Replicanti.isUncapped&&s.log10()>LOG10_MAX_VALUE;if(a){const C=Math.log10(ReplicantiGrowth.scaleFactor)/ReplicantiGrowth.scaleLog10,S=i.times(C).plus(1).pow(e/C),k=Pelle.isDoomed?100:1e3,R=Decimal.pow10(k*Math.floor(s.log10()/k+1)),I=Decimal.divide(t/1e3,i.times(C)).times(R.divide(s).pow(C).minus(1)),F=I.eq(0)?"an extremely long time":`${TimeSpan.fromSeconds(I.toNumber())}`;this.remainingTimeText=`You are gaining ${formatX(S,2,1)} Replicanti per second (${F} until ${format(R)})`}else this.remainingTimeText="";const o=LOG10_MAX_VALUE/(e*n.toNumber());let c=(LOG10_MAX_VALUE-s.log10())/(e*n.toNumber());c<0&&(c=0);const d=r.times(e/LOG10_MAX_VALUE),p=C=>50*Math.log((C+49.5)/49.5);let m,y,_;RealityUpgrade(6).isBought&&!Pelle.isDoomed?(m=d.divide(RealityUpgrade(6).effectValue),y=p(Replicanti.galaxies.max+Replicanti.galaxies.extra)-p(Replicanti.galaxies.extra),_=p(Replicanti.galaxies.bought+Replicanti.galaxies.extra)-p(Replicanti.galaxies.extra)):(m=d,y=Replicanti.galaxies.max,_=Replicanti.galaxies.bought);const E=d.reciprocal();if(this.remainingTimeText===""&&(c===0?this.remainingTimeText=`At Infinite Replicanti (normally takes
            ${TimeSpan.fromSeconds(E.toNumber())})`:s.lt(100)?this.remainingTimeText=`Approximately ${TimeSpan.fromSeconds(c)} remaining
            until Infinite Replicanti`:this.remainingTimeText=`${TimeSpan.fromSeconds(c)} remaining until Infinite Replicanti`),Replicanti.galaxies.max===0&&!a&&(this.remainingTimeText+=` (${TimeSpan.fromSeconds(o)} total)`),Replicanti.galaxies.max>0)if(player.replicanti.galaxies===Replicanti.galaxies.max)this.galaxyText="You have reached the maximum amount of Replicanti Galaxies";else{this.galaxyText=`You are gaining a Replicanti Galaxy every
            ${TimeSpan.fromSeconds(E.toNumber())}`,d.gte(1)&&(this.galaxyText=`You are gaining ${quantify("Replicanti Galaxy",d,2,1)} per second`);const C=Decimal.divide(y-_,m).toNumber(),S=Replicanti.galaxies.gain;let k=S*E.toNumber();if(Achievement(126).isUnlocked&&!Pelle.isDoomed){const O=s.log10()/LOG10_MAX_VALUE-S;k+=O*E.toNumber()}const R=S>0?k:E.toNumber()-c;this.galaxyText+=` (all Replicanti Galaxies within
            ${TimeSpan.fromSeconds(Math.clampMin(C-R,0))})`}else this.galaxyText=""}}};var l9e=function(){var e=this,i=e._self._c;return i("p",[e._v(e._s(e.remainingTimeText)),i("br"),e._v(e._s(e.galaxyText))])},c9e=[],u9e=K(o9e,l9e,c9e,!1,null,"b9733ca0");const d9e=u9e.exports,h9e={name:"ReplicantiGalaxyButton",components:{PrimaryButton:yt,PrimaryToggleButton:cn},data(){return{isAvailable:!1,isAutoUnlocked:!1,isAutoActive:!1,isAutoEnabled:!1,isDivideUnlocked:!1,boughtGalaxies:0,extraGalaxies:0}},computed:{resetActionDisplay(){return this.isDivideUnlocked&&!Pelle.isDoomed?`Divide Replicanti by ${format(Number.MAX_VALUE,1,1)}`:"Reset Replicanti amount"},galaxyCountDisplay(){const t=this.boughtGalaxies,e=this.extraGalaxies;return`Currently: ${e>0?`${formatInt(t)}+${formatInt(e)}`:formatInt(t)}`},autobuyer(){return Autobuyer.replicantiGalaxy},autobuyerTextDisplay(){const t=this.isAutoActive,e=!this.isAutoEnabled;return`Auto Galaxy ${t?"ON":"OFF"}${e?" (disabled)":""}`}},methods:{update(){const t=Replicanti.galaxies;this.isAvailable=t.canBuyMore,this.boughtGalaxies=t.bought,this.extraGalaxies=t.extra,this.isDivideUnlocked=Achievement(126).isUnlocked;const e=Autobuyer.replicantiGalaxy;this.isAutoUnlocked=e.isUnlocked,this.isAutoActive=e.isActive,this.isAutoEnabled=e.isEnabled},handleAutoToggle(t){Autobuyer.replicantiGalaxy.isActive=t,this.update()},handleClick(){replicantiGalaxyRequest()}}};var f9e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group"},[i("PrimaryButton",{staticClass:"o-primary-btn--replicanti-galaxy",attrs:{enabled:e.isAvailable},on:{click:e.handleClick}},[e._v(" "+e._s(e.resetActionDisplay)+" for a Replicanti Galaxy "),i("br"),e._v(" "+e._s(e.galaxyCountDisplay)+" ")]),e.isAutoUnlocked?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon o-primary-btn--replicanti-galaxy-toggle",attrs:{value:e.isAutoActive,on:e.autobuyerTextDisplay,off:e.autobuyerTextDisplay},on:{input:e.handleAutoToggle}}):e._e()],1)},p9e=[],m9e=K(h9e,f9e,p9e,!1,null,"f81b9c1c");const y9e=m9e.exports,g9e={name:"ReplicantiTab",components:{PrimaryButton:yt,ReplicantiGainText:d9e,ReplicantiUpgradeButton:a9e,ReplicantiGalaxyButton:y9e},data(){return{isUnlocked:!1,isUnlockAffordable:!1,isInEC8:!1,ec8Purchases:0,amount:new Decimal,mult:new Decimal,hasTDMult:!1,multTD:new Decimal,hasDTMult:!1,multDT:new Decimal,hasIPMult:!1,multIP:new Decimal,hasRaisedCap:!1,replicantiCap:new Decimal,capMultText:"",distantRG:0,remoteRG:0,effarigInfinityBonusRG:0,isUncapped:!1,nextEffarigRGThreshold:0,canSeeGalaxyButton:!1,unlockCost:new Decimal,scrambledText:"",maxReplicanti:new Decimal,estimateToMax:0}},computed:{isDoomed:()=>Pelle.isDoomed,replicantiChanceSetup(){return new cC(ReplicantiUpgrade.chance,t=>`Replicate chance: ${formatPercents(t)}`,t=>`+${formatPercents(.01)} Costs: ${format(t)} IP`)},replicantiIntervalSetup(){const t=ReplicantiUpgrade.interval;function e(i){const n=t.applyModifiers(i),r=n.toNumber();return Number.isFinite(r)&&r>1&&t.isCapped?TimeSpan.fromMilliseconds(r).toStringShort(!1):n.lt(.01)?`< ${format(.01,2,2)}ms`:n.gt(1e3)?`${format(n.div(1e3),2,2)}s`:`${format(n,2,2)}ms`}return new cC(t,i=>`Interval: ${e(i)}`,i=>`➜ ${e(t.nextValue)} Costs: ${format(i)} IP`)},maxGalaxySetup(){const t=ReplicantiUpgrade.galaxies;return new cC(t,e=>{let i="Max Replicanti Galaxies: ";const n=t.extra;if(n>0){const r=e+n;i+=`<br>${formatInt(e)} + ${formatInt(n)} = ${formatInt(r)}`}else i+=formatInt(e);return i},e=>`+${formatInt(1)} Costs: ${format(e)} IP`)},boostText(){const t=[];if(t.push(`a <span class="c-replicanti-description__accent">${formatX(this.mult,2,2)}</span>
        multiplier on all Infinity Dimensions`),this.hasTDMult&&t.push(`a <span class="c-replicanti-description__accent">${formatX(this.multTD,2,2)}</span>
          multiplier on all Time Dimensions from a Dilation Upgrade`),this.hasDTMult){const e=GlyphAlteration.isAdded("replication")?"and Replicanti speed ":"";t.push(`a <span class="c-replicanti-description__accent">${formatX(this.multDT,2,2)}</span>
          multiplier to Dilated Time ${e}from Glyphs`)}return this.hasIPMult&&t.push(`a <span class="c-replicanti-description__accent">${formatX(this.multIP)}</span>
          multiplier to Infinity Points from Glyph Alchemy`),t.length===1?`${t[0]}.`:t.length===2?`${t[0]}<br> and ${t[1]}.`:`${t.slice(0,-1).join(",<br>")},<br> and ${t[t.length-1]}.`},hasMaxText:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,toMaxTooltip(){return this.amount.lte(this.replicantiCap)?null:this.estimateToMax.lt(.01)?"Currently Increasing":TimeSpan.fromSeconds(this.estimateToMax.toNumber()).toStringShort()}},methods:{update(){if(this.isUnlocked=Replicanti.areUnlocked,this.unlockCost=new Decimal(1e140).dividedByEffectOf(PelleRifts.vacuum.milestones[1]),this.isDoomed&&(this.scrambledText=this.vacuumText()),!this.isUnlocked){this.isUnlockAffordable=Currency.infinityPoints.gte(this.unlockCost);return}if(this.isInEC8=EternityChallenge(8).isRunning,this.isInEC8&&(this.ec8Purchases=player.eterc8repl),this.amount.copyFrom(Replicanti.amount),this.mult.copyFrom(replicantiMult()),this.hasTDMult=DilationUpgrade.tdMultReplicanti.isBought,this.multTD.copyFrom(DilationUpgrade.tdMultReplicanti.effectValue),this.hasDTMult=getAdjustedGlyphEffect("replicationdtgain")!==0&&!Pelle.isDoomed,this.multDT=Math.clampMin(Decimal.log10(Replicanti.amount)*getAdjustedGlyphEffect("replicationdtgain"),1),this.hasIPMult=AlchemyResource.exponential.amount>0&&!this.isDoomed,this.multIP=Replicanti.amount.powEffectOf(AlchemyResource.exponential),this.isUncapped=PelleRifts.vacuum.milestones[1].canBeApplied,this.hasRaisedCap=EffarigUnlock.infinity.isUnlocked&&!this.isUncapped,this.replicantiCap.copyFrom(replicantiCap()),this.hasRaisedCap){const t=this.replicantiCap.div(Decimal.NUMBER_MAX_VALUE);this.capMultText=TimeStudy(31).canBeApplied?`Base: ${formatX(t.pow(1/TimeStudy(31).effectValue),2)}; after TS31: ${formatX(t,2)}`:formatX(t,2)}this.distantRG=ReplicantiUpgrade.galaxies.distantRGStart,this.remoteRG=ReplicantiUpgrade.galaxies.remoteRGStart,this.effarigInfinityBonusRG=Effarig.bonusRG,this.nextEffarigRGThreshold=Decimal.NUMBER_MAX_VALUE.pow(Effarig.bonusRG+2),this.canSeeGalaxyButton=Replicanti.galaxies.max>=1||PlayerProgress.eternityUnlocked(),this.maxReplicanti.copyFrom(player.records.thisReality.maxReplicanti),this.estimateToMax=this.calculateEstimate()},vacuumText(){return Xn.wordCycle(PelleRifts.vacuum.name)},calculateEstimate(){const t=player.options.updateRate,e=Decimal.divide(getGameSpeedupForDisplay()*t*Math.log(player.replicanti.chance+1),getReplicantiInterval()),i=Math.log10(ReplicantiGrowth.scaleFactor)/ReplicantiGrowth.scaleLog10,n=this.maxReplicanti;return Decimal.divide(t/1e3,e.times(i)).times(n.divide(this.amount).pow(i).minus(1))}}};var v9e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-replicanti-tab"},[i("br"),e.isUnlocked?[e.isDoomed?i("div",{staticClass:"modified-cap"},[e._v(" Your Replicanti cap has been removed due to the second "+e._s(e.scrambledText)+" milestone. ")]):e.hasRaisedCap?i("div",{staticClass:"modified-cap"},[e._v(" Completion of Effarig's Infinity is giving you the following rewards: "),i("br"),e._v(" Your Replicanti cap without TS192 is now "+e._s(e.format(e.replicantiCap,2))+" ("+e._s(e.capMultText)+") "),i("br"),e._v(" "+e._s(e.quantifyInt("extra Replicanti Galaxy",e.effarigInfinityBonusRG))+" (Next Replicanti Galaxy at "+e._s(e.format(e.nextEffarigRGThreshold,2))+" cap) ")]):e._e(),i("p",{staticClass:"c-replicanti-description"},[e._v(" You have "),i("span",{staticClass:"c-replicanti-description__accent"},[e._v(e._s(e.format(e.amount,2,0)))]),e._v(" Replicanti, translated to "),i("br"),i("span",{domProps:{innerHTML:e._s(e.boostText)}})]),e.hasMaxText?i("div",{staticClass:"c-replicanti-description"},[e._v(" Your maximum Replicanti reached this Reality is "),i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.toMaxTooltip,expression:"toMaxTooltip"}],staticClass:"max-accent"},[e._v(e._s(e.format(e.maxReplicanti,2)))]),e._v(". ")]):e._e(),i("br"),e.isInEC8?i("div",[e._v(" You have "+e._s(e.quantifyInt("purchase",e.ec8Purchases))+" left within Eternity Challenge 8. ")]):e._e(),i("div",{staticClass:"l-replicanti-upgrade-row"},[i("ReplicantiUpgradeButton",{attrs:{setup:e.replicantiChanceSetup}}),i("ReplicantiUpgradeButton",{attrs:{setup:e.replicantiIntervalSetup}}),i("ReplicantiUpgradeButton",{attrs:{setup:e.maxGalaxySetup}})],1),i("div",[e._v(" The Max Replicanti Galaxy upgrade can be purchased endlessly, but costs increase "),i("br"),e._v(" more rapidly above "+e._s(e.formatInt(e.distantRG))+" Replicanti Galaxies and even more so above "+e._s(e.formatInt(e.remoteRG))+" Replicanti Galaxies. ")]),i("br"),i("br"),i("ReplicantiGainText"),i("br"),e.canSeeGalaxyButton?i("ReplicantiGalaxyButton"):e._e()]:i("PrimaryButton",{staticClass:"o-primary-btn--replicanti-unlock",attrs:{enabled:e.isUnlockAffordable,onclick:"Replicanti.unlock();"}},[e._v(" Unlock Replicanti "),i("br"),e._v(" Cost: "+e._s(e.format(e.unlockCost))+" IP ")])],2)},b9e=[],_9e=K(g9e,v9e,b9e,!1,null,"37bf26ae");const E9e=_9e.exports,T9e={name:"SecretAchievement",components:{HintText:gc},props:{achievement:{type:Object,required:!0}},data(){return{isUnlocked:!1,isMouseOver:!1,showUnlockState:!1}},computed:{id(){return this.achievement.id},config(){return this.achievement.config},styleObject(){if(this.isUnlocked)return{"background-position":`-${(this.achievement.column-1)*104}px -${(this.achievement.row-1)*104}px`}},classObject(){return{"o-achievement":!0,"o-achievement--hidden":!this.isUnlocked,"o-achievement--unlocked":this.isUnlocked,"o-achievement--secret":!0}},indicatorIconClass(){return this.isUnlocked?"fas fa-check":"fas fa-times"},indicatorClassObject(){return{"o-achievement__indicator":!0,"o-achievement__indicator--locked":!this.isUnlocked}}},beforeDestroy(){clearTimeout(this.mouseOverInterval)},methods:{update(){this.isUnlocked=this.achievement.isUnlocked,this.showUnlockState=player.options.showHintText.achievementUnlockStates},onMouseEnter(){clearTimeout(this.mouseOverInterval),this.isMouseOver=!0},onMouseLeave(){this.mouseOverInterval=setTimeout(()=>this.isMouseOver=!1,300)},onClick(){this.id===11&&SecretAchievement(11).unlock()}}};var w9e=function(){var e=this,i=e._self._c;return i("div",{class:e.classObject,style:e.styleObject,on:{click:e.onClick,mouseenter:e.onMouseEnter,mouseleave:e.onMouseLeave}},[i("HintText",{staticClass:"l-hint-text--achievement",attrs:{type:"achievements"}},[e._v(" S"+e._s(e.id)+" ")]),i("div",{staticClass:"o-achievement__tooltip"},[e.isMouseOver?[i("div",{staticClass:"o-achievement__tooltip__name"},[e._v(" "+e._s(e.config.name)+" (S"+e._s(e.id)+") ")]),e.isUnlocked?i("div",{staticClass:"o-achievement__tooltip__description"},[e._v(" "+e._s(e.config.description)+" ")]):e._e()]:e._e()],2),e.showUnlockState?i("div",{class:e.indicatorClassObject},[i("i",{class:e.indicatorIconClass})]):e._e()],1)},C9e=[],S9e=K(T9e,w9e,C9e,!1,null,null);const k9e=S9e.exports,A9e={name:"SecretAchievementRow",components:{SecretAchievement:k9e},props:{row:{type:Array,required:!0}},data(){return{isCompleted:!1}},computed:{classObject(){return{"l-achievement-grid__row":!0,"c-achievement-grid__row--completed":this.isCompleted}}},methods:{update(){this.isCompleted=this.row.every(t=>t.isUnlocked)}}};var R9e=function(){var e=this,i=e._self._c;return i("div",{class:e.classObject},e._l(e.row,function(n,r){return i("SecretAchievement",{key:r,staticClass:"l-achievement-grid__cell",attrs:{achievement:n}})}),1)},I9e=[],D9e=K(A9e,R9e,I9e,!1,null,null);const x9e=D9e.exports,M9e={name:"SecretAchievementTab",components:{SecretAchievementRow:x9e},computed:{rows:()=>SecretAchievements.allRows}};var P9e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-achievements-tab"},[e._m(0),i("div",{staticClass:"l-achievement-grid"},e._l(e.rows,function(n,r){return i("secret-achievement-row",{key:r,attrs:{row:n}})}),1)])},O9e=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-achievements-tab__header"},[e("span",[t._v(" Secret Achievements are optional and give no bonuses. ")])])}],N9e=K(M9e,P9e,O9e,!1,null,null);const G9e=N9e.exports;var m4={exports:{}};(function(t,e){(function(i,n){t.exports=n()})(typeof self<"u"?self:Si,function(){return function(i){var n={};function r(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return i[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=i,r.c=n,r.d=function(s,a,o){r.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:o})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,a){if(1&a&&(s=r(s)),8&a||4&a&&typeof s=="object"&&s&&s.__esModule)return s;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:s}),2&a&&typeof s!="string")for(var c in s)r.d(o,c,(function(d){return s[d]}).bind(null,c));return o},r.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(a,"a",a),a},r.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},r.p="",r(r.s=1)}([function(i,n,r){},function(i,n,r){r.r(n);var s=typeof window<"u"?window.HTMLElement:Object,a={mounted:function(){this.enforceFocus&&document.addEventListener("focusin",this.focusIn)},methods:{focusIn:function(_){if(this.isActive&&_.target!==this.$el&&!this.$el.contains(_.target)){var E=this.container?this.container:this.isFullPage?null:this.$el.parentElement;(this.isFullPage||E&&E.contains(_.target))&&(_.preventDefault(),this.$el.focus())}}},beforeDestroy:function(){document.removeEventListener("focusin",this.focusIn)}};function o(_,E,C,S,k,R,O,I){var F,P=typeof _=="function"?_.options:_;return E&&(P.render=E,P.staticRenderFns=C,P._compiled=!0),{exports:_,options:P}}var c=o({name:"spinner",props:{color:{type:String,default:"#000"},height:{type:Number,default:64},width:{type:Number,default:64}}},function(){var _=this.$createElement,E=this._self._c||_;return E("svg",{attrs:{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height,stroke:this.color}},[E("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[E("g",{attrs:{transform:"translate(1 1)","stroke-width":"2"}},[E("circle",{attrs:{"stroke-opacity":".25",cx:"18",cy:"18",r:"18"}}),E("path",{attrs:{d:"M36 18c0-9.94-8.06-18-18-18"}},[E("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.8s",repeatCount:"indefinite"}})],1)])])])},[]).exports,d=o({name:"dots",props:{color:{type:String,default:"#000"},height:{type:Number,default:240},width:{type:Number,default:60}}},function(){var _=this.$createElement,E=this._self._c||_;return E("svg",{attrs:{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:this.color,width:this.width,height:this.height}},[E("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[E("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),E("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),E("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[E("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),E("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),E("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[E("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),E("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])},[]).exports,p=o({name:"bars",props:{color:{type:String,default:"#000"},height:{type:Number,default:40},width:{type:Number,default:40}}},function(){var _=this.$createElement,E=this._self._c||_;return E("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",height:this.height,width:this.width,fill:this.color}},[E("rect",{attrs:{x:"0",y:"13",width:"4",height:"5"}},[E("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}}),E("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}})]),E("rect",{attrs:{x:"10",y:"13",width:"4",height:"5"}},[E("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}}),E("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}})]),E("rect",{attrs:{x:"20",y:"13",width:"4",height:"5"}},[E("animate",{attrs:{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}}),E("animate",{attrs:{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}})])])},[]).exports,m=o({name:"vue-loading",mixins:[a],props:{active:Boolean,programmatic:Boolean,container:[Object,Function,s],isFullPage:{type:Boolean,default:!0},enforceFocus:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!1},transition:{type:String,default:"fade"},canCancel:Boolean,onCancel:{type:Function,default:function(){}},color:String,backgroundColor:String,blur:{type:String,default:"2px"},opacity:Number,width:Number,height:Number,zIndex:Number,loader:{type:String,default:"spinner"}},data:function(){return{isActive:this.active}},components:{Spinner:c,Dots:d,Bars:p},beforeMount:function(){this.programmatic&&(this.container?(this.isFullPage=!1,this.container.appendChild(this.$el)):document.body.appendChild(this.$el))},mounted:function(){this.programmatic&&(this.isActive=!0),document.addEventListener("keyup",this.keyPress)},methods:{cancel:function(){this.canCancel&&this.isActive&&(this.hide(),this.onCancel.apply(null,arguments))},hide:function(){var _=this;this.$emit("hide"),this.$emit("update:active",!1),this.programmatic&&(this.isActive=!1,setTimeout(function(){var E;_.$destroy(),(E=_.$el).remove!==void 0?E.remove():E.parentNode.removeChild(E)},150))},disableScroll:function(){this.isFullPage&&this.lockScroll&&document.body.classList.add("vld-shown")},enableScroll:function(){this.isFullPage&&this.lockScroll&&document.body.classList.remove("vld-shown")},keyPress:function(_){_.keyCode===27&&this.cancel()}},watch:{active:function(_){this.isActive=_},isActive:function(_){_?this.disableScroll():this.enableScroll()}},computed:{bgStyle:function(){return{background:this.backgroundColor,opacity:this.opacity,backdropFilter:"blur(".concat(this.blur,")")}}},beforeDestroy:function(){document.removeEventListener("keyup",this.keyPress)}},function(){var _=this,E=_.$createElement,C=_._self._c||E;return C("transition",{attrs:{name:_.transition}},[C("div",{directives:[{name:"show",rawName:"v-show",value:_.isActive,expression:"isActive"}],staticClass:"vld-overlay is-active",class:{"is-full-page":_.isFullPage},style:{zIndex:_.zIndex},attrs:{tabindex:"0","aria-busy":_.isActive,"aria-label":"Loading"}},[C("div",{staticClass:"vld-background",style:_.bgStyle,on:{click:function(S){return S.preventDefault(),_.cancel(S)}}}),C("div",{staticClass:"vld-icon"},[_._t("before"),_._t("default",[C(_.loader,{tag:"component",attrs:{color:_.color,width:_.width,height:_.height}})]),_._t("after")],2)])])},[]).exports,y=function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{show:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E,k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:C,R={programmatic:!0},O=Object.assign({},E,S,R),I=new(_.extend(m))({el:document.createElement("div"),propsData:O}),F=Object.assign({},C,k);return Object.keys(F).map(function(P){I.$slots[P]=F[P]}),I}}};r(0),m.install=function(_){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},S=y(_,E,C);_.$loading=S,_.prototype.$loading=S},n.default=m}]).default})})(m4);var U9e=m4.exports;const L9e=ru(U9e),B9e={name:"ShopButton",props:{purchase:{type:Object,required:!0}},data(){return{currentMult:0,nextMult:0,canAfford:!1,iapDisabled:!1,cost:0,hasChosen:!1,chosenSet:"",lockedCount:0}},computed:{isSingleCosmeticSet(){return this.purchase.config.key==="singleCosmeticSet"},isAllCosmeticSets(){return this.purchase.config.key==="allCosmeticSets"},allSetsUnlocked(){return(this.isSingleCosmeticSet||this.isAllCosmeticSets)&&!this.lockedCount}},methods:{update(){var t;this.currentMult=this.purchase.currentMultForDisplay,this.nextMult=this.purchase.nextMultForDisplay,this.canAfford=this.purchase.canBeBought,this.iapDisabled=!ShopPurchaseData.isIAPEnabled,this.cost=Math.clampMin(this.purchase.cost,0),this.hasChosen=GlyphAppearanceHandler.chosenFromModal!==null,this.chosenSet=((t=GlyphAppearanceHandler.chosenFromModal)==null?void 0:t.name)??"Not Selected",this.lockedCount=GlyphAppearanceHandler.lockedSets.length},openSelectionModal(){Modal.cosmeticSetChoice.show()},performPurchase(){this.isSingleCosmeticSet&&!this.hasChosen||this.purchase.purchase()},purchaseButtonObject(){const t=this.isSingleCosmeticSet&&!this.hasChosen||this.allSetsUnlocked;return{"o-shop-button-button":!0,"o-shop-button-button--disabled":!this.canAfford||t}}}};var F9e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-shop-button-container"},[i("div",{staticClass:"o-shop-button-description"},[e._v(" "+e._s(e.purchase.description)+" "),i("br"),e.purchase.shouldDisplayMult?i("span",{staticClass:"o-shop-button-multiplier",class:{"o-shop-button-multiplier--disabled":e.iapDisabled}},[e._v(" Currently "+e._s(e.purchase.formatEffect(e.currentMult))+", next: "+e._s(e.purchase.formatEffect(e.nextMult))+" ")]):e._e()]),i("div",[e.isSingleCosmeticSet?i("div",[e.allSetsUnlocked?i("div",{staticClass:"o-shop-button-multiplier"},[e._v(" All Sets unlocked! ")]):i("div",[i("button",{staticClass:"o-shop-button-button",on:{click:e.openSelectionModal}},[e._v(" Choose Set ")]),e._v(" Chosen Set: "+e._s(e.chosenSet)+" ")])]):e._e(),e.isAllCosmeticSets?i("div",{staticClass:"o-shop-button-multiplier"},[e.allSetsUnlocked?i("div",[e._v(" All Sets unlocked! ")]):i("div",[e._v(" Will unlock "+e._s(e.quantify("set",e.lockedCount))+" ")])]):e._e()]),i("button",{class:e.purchaseButtonObject(),on:{click:e.performPurchase}},[e._v(" Cost: "+e._s(e.cost)+" "),i("img",{staticClass:"o-shop-button-button__img",attrs:{src:RT}})]),e.purchase.isUnlocked()?e._e():i("div",{staticClass:"o-shop-button-locked-text"},[e._v(" This affects a feature you have not unlocked yet ("+e._s(e.purchase.lockText)+") ")])])},$9e=[],H9e=K(B9e,F9e,$9e,!1,null,"65863291");const V9e=H9e.exports,q9e={name:"ShopTab",components:{ShopButton:V9e,Loading:L9e,PrimaryButton:yt},data(){return{availableSTD:0,spentSTD:0,isLoading:!1,IAPsEnabled:!1,creditsClosed:!1,loggedIn:!1,username:"",canRespec:!1,respecTimeStr:""}},computed:{STEAM(){return CG},purchases(){return ShopPurchase.all},enableText(){return`In-app Purchases: ${this.IAPsEnabled?"Enabled":"Disabled"}`},respecText(){return this.loggedIn?this.canRespec?null:"No respec available! (Purchase STDs or wait 3 days since your last one)":"Not logged in!"},hiddenName(){return player.options.hideGoogleName}},methods:{update(){var t;this.availableSTD=ShopPurchaseData.availableSTD,this.spentSTD=ShopPurchaseData.spentSTD,this.isLoading=!!player.IAP.checkoutSession.id,this.IAPsEnabled=player.IAP.enabled,this.creditsClosed=GameEnd.creditsEverClosed,this.loggedIn=Cloud.loggedIn,this.username=(t=Cloud.user)==null?void 0:t.displayName,this.canRespec=ShopPurchaseData.canRespec,!ShopPurchaseData.respecAvailable&&!this.canRespec&&(this.respecTimeStr=ShopPurchaseData.timeUntilRespec.toStringShort())},showStore(){this.creditsClosed||(SecretAchievement(33).unlock(),this.loggedIn?Modal.shop.show():Modal.message.show("You cannot purchase STD coins without logging in first."))},onCancel(){zn.cancelPurchase(!1)},respec(){this.creditsClosed||!this.loggedIn||!this.canRespec||ShopPurchaseData.respecRequest()},toggleEnable(){ShopPurchaseData.availableSTD<0||(player.IAP.enabled=!player.IAP.enabled,ShopPurchaseData.isIAPEnabled&&Speedrun.setSTDUse(!0))},respecClass(){return{"o-primary-btn--subtab-option":!0,"o-pelle-disabled-pointer":this.creditsClosed,"o-primary-btn--disabled":!this.loggedIn||!this.canRespec}}}};var Y9e=function(){var e=this,i=e._self._c;return i("div",{staticClass:"tab shop"},[i("div",{staticClass:"c-shop-disclaimer"},[e._v(" Disclaimer: These are not required to progress in the game, they are just for supporting the developer. The game is balanced without the use of any microtransactions. ")]),i("div",[e._v(" Note: Shop purchases made on the Android, Steam, and Web versions are separate and non-transferable due to legal reasons. ")]),i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",class:{"o-pelle-disabled-pointer":e.creditsClosed},attrs:{label:"Disable in-app-purchases:"},on:{click:function(n){return e.toggleEnable()}}},[e._v(" "+e._s(e.enableText)+" ")]),e.STEAM?e._e():i("PrimaryButton",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.respecText,expression:"respecText"}],class:e.respecClass(),on:{click:function(n){return e.respec()}}},[e._v(" Respec Shop ")])],1),e.loggedIn&&!e.canRespec&&!e.STEAM?i("div",[e._v(" Time until respec available: "+e._s(e.respecTimeStr)+" ")]):e._e(),e.loggedIn?i("div",{staticClass:"c-login-info"},[e.STEAM?[e._v(" You are logged in as "+e._s(e.username)+". ")]:[e.hiddenName?i("span",[e._v("You are logged in. "),i("i",[e._v("(name hidden)")])]):i("span",[e._v("You are logged in as "+e._s(e.username)+".")]),i("button",{staticClass:"o-shop-button-button",attrs:{onclick:"GameOptions.logout()"}},[e._v(" Disconnect Google Account ")])]],2):i("div",{staticClass:"c-login-info"},[e._v(" You must be logged in to purchase STD coins or use these upgrades. "),i("button",{staticClass:"o-shop-button-button",attrs:{onclick:"GameOptions.login()"}},[e._v(" Login with Google ")])]),i("div",{staticClass:"c-shop-header"},[i("span",[e._v("You have "+e._s(e.availableSTD))]),i("img",{staticClass:"c-shop-header__img",attrs:{src:RT}}),i("button",{staticClass:"o-shop-button-button",class:{"o-shop-button-button--disabled":!e.loggedIn},on:{click:function(n){return e.showStore()}}},[e._v(" Buy More ")])]),e._v(" Note: All numbers on this page are intentionally unaffected by your notation settings "),i("div",{staticClass:"l-shop-buttons-container"},e._l(e.purchases,function(n){return i("ShopButton",{key:n.key,attrs:{purchase:n}})}),1),i("loading",{attrs:{active:e.isLoading,"can-cancel":!0,"on-cancel":e.onCancel,"is-full-page":!0}})],1)},W9e=[],j9e=K(q9e,Y9e,W9e,!1,null,"ff59336f");const z9e=j9e.exports,X9e={name:"SpeedrunMilestoneSingle",props:{milestone:{type:Object,required:!0},display:{type:Boolean,required:!1,default:!1},time:{type:Number,required:!1,default:0}},computed:{displayName(){return this.display?this.milestone.name:"???"},description(){return this.display?typeof this.milestone.description=="function"?this.milestone.description():this.milestone.description:""},timeDisplay(){return this.time?`Completed in ${TimeSpan.fromMilliseconds(this.time).toStringShort(!0,!0,!0)}`:"Not reached yet"},classObject(){return{"l-speedrun-milestone-entry":!0,"l-speedrun-milestone-entry--completed":this.time}}}};var K9e=function(){var e=this,i=e._self._c;return i("div",{class:e.classObject},[i("b",[e._v(e._s(e.displayName))]),i("i",[e._v(e._s(e.description))]),e._v(" "+e._s(e.timeDisplay)+" ")])},Z9e=[],Q9e=K(X9e,K9e,Z9e,!1,null,null);const J9e=Q9e.exports,eWe={name:"SpeedrunMilestonesTab",components:{PrimaryToggleButton:cn,SpeedrunMilestoneSingle:J9e},data(){return{milestoneTimes:[],maxMilestone:1,startTimeStr:"",displayAll:!1,isSpectating:!1}},computed:{milestones:()=>GameDatabase.speedrunMilestones,spectateText(){return this.isSpectating?"Times here are unaffected by END so that you can see your final records":null}},watch:{displayAll(t){player.speedrun.displayAllMilestones=t}},methods:{update(){this.milestoneTimes=[...player.speedrun.records],this.maxMilestone=this.milestoneTimes.map(t=>!!t).lastIndexOf(!0)+1,this.startTimeStr=player.speedrun.startDate===0?"Speedrun not started yet.":`Speedrun started at ${Time.toDateTimeString(player.speedrun.startDate)}`,this.displayAll=player.speedrun.displayAllMilestones,this.isSpectating=GameEnd.endState>END_STATE_MARKERS.SPECTATE_GAME}}};var tWe=function(){var e=this,i=e._self._c;return i("div",[i("PrimaryToggleButton",{staticClass:"o-primary-btn--subtab-option",attrs:{label:"Describe all milestones:"},model:{value:e.displayAll,callback:function(n){e.displayAll=n},expression:"displayAll"}}),i("br"),i("b",[e._v(e._s(e.startTimeStr))]),i("br"),i("b",[e._v(e._s(e.spectateText))]),i("br"),i("div",{staticClass:"l-speedrun-milestone-tab"},e._l(e.milestones,function(n){return i("SpeedrunMilestoneSingle",{key:n.id,attrs:{milestone:n,display:e.displayAll||n.id<=e.maxMilestone,time:e.milestoneTimes[n.id]}})}),1)],1)},iWe=[],nWe=K(eWe,tWe,iWe,!1,null,null);const rWe=nWe.exports,sWe={proton:new Decimal("2.82e-45"),estimate(t){if(!t)return["There is no antimatter yet."];if(t.gt(L.E100000))return[`If you wrote ${formatInt(3)} numbers a second, it would take you`,TimeSpan.fromSeconds(t.log10()/3).toString(),"to write down your antimatter amount."];const e=new Decimal("4.22419e-105"),i=t.times(e);if(i.gt(this.proton)){const r=this.macroScale(i),s=format(i.dividedBy(r.amount),2,1);return[`If every antimatter were a planck volume, you would have
        enough to ${r.verb} ${s} ${r.name}`]}const n=this.microScale(t);return[`If every antimatter were ${format(this.proton.div(n.amount).div(t),2,1)} ${n.name},
      you would have enough to make a proton.`]},microScale(t){const e=this.microObjects;for(let i=0;i<e.length;i++){const n=e[i];if(t.times(n.amount).lt(this.proton))return n}throw"Cannot determine smallest antimatter scale"},macroScale(t){const e=this.macroObjects,i=e.last();if(t.gte(i.amount))return i;let n=0,r=e.length;for(;n!==r;){const s=Math.floor((n+r)/2);e[s].amount.lte(t)?n=s+1:r=s}return e[r-1]},microObjects:[{amount:new Decimal("1e-54"),name:"attometers cubed"},{amount:new Decimal("1e-63"),name:"zeptometers cubed"},{amount:new Decimal("1e-72"),name:"yoctometers cubed"},{amount:new Decimal("4.22419e-105"),name:"planck volumes"}],macroObjects:[{amount:new Decimal("2.82e-45"),name:"protons",verb:"make"},{amount:new Decimal("1e-42"),name:"nuclei",verb:"make"},{amount:new Decimal("7.23e-30"),name:"Hydrogen atoms",verb:"make"},{amount:new Decimal("5e-21"),name:"viruses",verb:"make"},{amount:new Decimal("9e-17"),name:"red blood cells",verb:"make"},{amount:new Decimal("6.2e-11"),name:"grains of sand",verb:"make"},{amount:new Decimal("5e-8"),name:"grains of rice",verb:"make"},{amount:new Decimal("3.555e-6"),name:"teaspoons",verb:"fill"},{amount:new Decimal("7.5e-4"),name:"wine bottles",verb:"fill"},{amount:L.D1,name:"fridge-freezers",verb:"fill"},{amount:new Decimal("2.5e3"),name:"Olympic-sized swimming pools",verb:"fill"},{amount:new Decimal("2.6006e6"),name:"Great Pyramids of Giza",verb:"make"},{amount:new Decimal("3.3e8"),name:"Great Walls of China",verb:"make"},{amount:new Decimal("5e12"),name:"large asteroids",verb:"make"},{amount:new Decimal("4.5e17"),name:"dwarf planets",verb:"make"},{amount:new Decimal("1.08e21"),name:"Earths",verb:"make"},{amount:new Decimal("1.53e24"),name:"Jupiters",verb:"make"},{amount:new Decimal("1.41e27"),name:"Suns",verb:"make"},{amount:new Decimal("5e32"),name:"red giants",verb:"make"},{amount:new Decimal("8e36"),name:"hypergiant stars",verb:"make"},{amount:new Decimal("1.7e45"),name:"nebulas",verb:"make"},{amount:new Decimal("1.7e48"),name:"Oort clouds",verb:"make"},{amount:new Decimal("3.3e55"),name:"Local Bubbles",verb:"make"},{amount:new Decimal("3.3e61"),name:"galaxies",verb:"make"},{amount:new Decimal("5e68"),name:"Local Groups",verb:"make"},{amount:new Decimal("1e73"),name:"Sculptor Voids",verb:"make"},{amount:new Decimal("3.4e80"),name:"observable universes",verb:"make"},{amount:new Decimal("1e113"),name:"Dimensions",verb:"make"},{amount:L.C2P1024,name:"Infinity Dimensions",verb:"make"},{amount:new Decimal("1e65000"),name:"Time Dimensions",verb:"make"}]},aWe={name:"StatisticsTab",components:{PrimaryButton:yt},data(){return{isDoomed:!1,realTimeDoomed:TimeSpan.zero,totalAntimatter:new Decimal(0),realTimePlayed:TimeSpan.zero,timeSinceCreation:0,uniqueNews:0,totalNews:0,secretAchievementCount:0,infinity:{isUnlocked:!1,count:new Decimal(0),banked:new Decimal(0),projectedBanked:new Decimal(0),bankRate:new Decimal(0),hasBest:!1,best:TimeSpan.zero,this:TimeSpan.zero,thisReal:TimeSpan.zero,bestRate:new Decimal(0)},eternity:{isUnlocked:!1,count:new Decimal(0),hasBest:!1,best:TimeSpan.zero,this:TimeSpan.zero,thisReal:TimeSpan.zero,bestRate:new Decimal(0)},reality:{isUnlocked:!1,count:0,best:TimeSpan.zero,bestReal:TimeSpan.zero,this:TimeSpan.zero,thisReal:TimeSpan.zero,totalTimePlayed:TimeSpan.zero,bestRate:new Decimal(0),bestRarity:0},matterScale:[],lastMatterTime:0,paperclips:0,fullTimePlayed:0}},computed:{infinityCountString(){const t=this.infinity.count;return t.gt(0)?`${this.formatDecimalAmount(t)} ${pluralize("Infinity",t.floor())}`:"no Infinities"},eternityCountString(){const t=this.eternity.count;return t.gt(0)?`${this.formatDecimalAmount(t)} ${pluralize("Eternity",t.floor())}`:"no Eternities"},fullGameCompletions(){return player.records.fullGameCompletions},startDate(){return Time.toDateTimeString(player.records.gameCreatedTime)},saveAge(){return TimeSpan.fromMilliseconds(this.timeSinceCreation)}},methods:{update(){const t=player.records;this.totalAntimatter.copyFrom(t.totalAntimatter),this.realTimePlayed.setFrom(t.realTimePlayed),this.fullTimePlayed=TimeSpan.fromMilliseconds(t.previousRunRealTime+t.realTimePlayed),this.uniqueNews=NewsHandler.uniqueTickersSeen,this.totalNews=player.news.totalSeen,this.secretAchievementCount=SecretAchievements.all.filter(m=>m.isUnlocked).length,this.timeSinceCreation=Date.now()-player.records.gameCreatedTime;const e=PlayerProgress.current,i=e.isInfinityUnlocked,n=this.infinity,r=t.bestInfinity;n.isUnlocked=i,i&&(n.count.copyFrom(Currency.infinities),n.banked.copyFrom(Currency.infinitiesBanked),n.projectedBanked=new Decimal(0).plusEffectsOf(Achievement(131).effects.bankedInfinitiesGain,TimeStudy(191)),n.bankRate=n.projectedBanked.div(Math.clampMin(33,t.thisEternity.time)).times(6e4),n.hasBest=r.time<999999999999,n.best.setFrom(r.time),n.this.setFrom(t.thisInfinity.time),n.bestRate.copyFrom(r.bestIPminEternity));const s=e.isEternityUnlocked,a=this.eternity,o=t.bestEternity;a.isUnlocked=s,s&&(a.count.copyFrom(Currency.eternities),a.hasBest=o.time<999999999999,a.best.setFrom(o.time),a.this.setFrom(t.thisEternity.time),a.bestRate.copyFrom(o.bestEPminReality));const c=e.isRealityUnlocked,d=this.reality,p=t.bestReality;d.isUnlocked=c,c&&(d.count=Math.floor(Currency.realities.value),d.best.setFrom(p.time),d.bestReal.setFrom(p.realTime),d.this.setFrom(t.thisReality.time),d.totalTimePlayed.setFrom(t.totalTimePlayed),n.thisReal.setFrom(t.thisInfinity.realTime),n.bankRate=n.projectedBanked.div(Math.clampMin(33,t.thisEternity.realTime)).times(6e4),a.thisReal.setFrom(t.thisEternity.realTime),d.thisReal.setFrom(t.thisReality.realTime),d.bestRate.copyFrom(p.RMmin),d.bestRarity=Math.max(strengthToRarity(p.glyphStrength),0)),this.updateMatterScale(),this.isDoomed=Pelle.isDoomed,this.realTimeDoomed.setFrom(player.records.realTimeDoomed),this.paperclips=player.news.specialTickerData.paperclips},formatDecimalAmount(t){return t.gt(1e9)?format(t,3):formatInt(Math.floor(t.toNumber()))},updateMatterScale(){Date.now()-this.lastMatterTime>1e3&&(this.matterScale=sWe.estimate(Currency.antimatter.value),this.lastMatterTime=Date.now())},realityClassObject(){return{"c-stats-tab-title":!0,"c-stats-tab-reality":!this.isDoomed,"c-stats-tab-doomed":this.isDoomed}}}};var oWe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-stats-tab"},[i("div",[i("PrimaryButton",{attrs:{onclick:"Modal.catchup.show(0)"}},[e._v(" View Content Summary ")]),i("div",{staticClass:"c-stats-tab-title c-stats-tab-general"},[e._v(" General ")]),i("div",{staticClass:"c-stats-tab-general"},[i("div",[e._v("You have made a total of "+e._s(e.format(e.totalAntimatter,2,1))+" antimatter.")]),i("div",[e._v("You have played for "+e._s(e.realTimePlayed)+". (real time)")]),e.reality.isUnlocked?i("div",[e._v(" Your existence has spanned "+e._s(e.reality.totalTimePlayed)+" of time. (game time) ")]):e._e(),i("div",[e._v(" Your save was created on "+e._s(e.startDate)+" ("+e._s(e.saveAge)+" ago) ")]),i("br"),i("div",[e._v(" You have seen "+e._s(e.quantifyInt("news message",e.totalNews))+" in total. ")]),i("div",[e._v(" You have seen "+e._s(e.quantifyInt("unique news message",e.uniqueNews))+". ")]),i("div",[e._v(" You have unlocked "+e._s(e.quantifyInt("Secret Achievement",e.secretAchievementCount))+". ")]),e.paperclips?i("div",[e._v(" You have "+e._s(e.quantifyInt("useless paperclip",e.paperclips))+". ")]):e._e(),e.fullGameCompletions?i("div",[i("br"),i("b",[e._v(" You have completed the entire game "+e._s(e.quantifyInt("time",e.fullGameCompletions))+". "),i("br"),e._v(" You have played for "+e._s(e.fullTimePlayed)+" across all playthroughs. ")])]):e._e()]),i("div",[i("br"),i("div",{staticClass:"c-matter-scale-container c-stats-tab-general"},[e._l(e.matterScale,function(n,r){return i("div",{key:r},[e._v(" "+e._s(n)+" ")])}),e.matterScale.length<2?i("br"):e._e(),e.matterScale.length<3?i("br"):e._e()],2)]),i("br")],1),e.infinity.isUnlocked?i("div",{staticClass:"c-stats-tab-subheader c-stats-tab-general"},[i("div",{staticClass:"c-stats-tab-title c-stats-tab-infinity"},[e._v(" Infinity ")]),i("div",[e._v(" You have "+e._s(e.infinityCountString)),e.eternity.isUnlocked?i("span",[e._v(" this Eternity")]):e._e(),e._v(". ")]),e.infinity.banked.gt(0)?i("div",[e._v(" You have "+e._s(e.formatDecimalAmount(e.infinity.banked.floor()))+" "+e._s(e.pluralize("Banked Infinity",e.infinity.banked.floor()))+". ")]):e._e(),e.infinity.hasBest?i("div",[e._v(" Your fastest Infinity was "+e._s(e.infinity.best.toStringShort())+". ")]):i("div",[e._v(" You have no fastest Infinity"),e.eternity.isUnlocked?i("span",[e._v(" this Eternity")]):e._e(),e._v(". ")]),i("div",[e._v(" You have spent "+e._s(e.infinity.this.toStringShort())+" in this Infinity. "),e.reality.isUnlocked?i("span",[e._v(" ("+e._s(e.infinity.thisReal.toStringShort())+" real time) ")]):e._e()]),i("div",[e._v(" Your best Infinity Points per minute "),e.eternity.count.gt(0)?i("span",[e._v("this Eternity ")]):e._e(),e._v(" is "+e._s(e.format(e.infinity.bestRate,2,2))+". ")]),i("br")]):e._e(),e.eternity.isUnlocked?i("div",{staticClass:"c-stats-tab-subheader c-stats-tab-general"},[i("div",{staticClass:"c-stats-tab-title c-stats-tab-eternity"},[e._v(" Eternity ")]),i("div",[e._v(" You have "+e._s(e.eternityCountString)),e.reality.isUnlocked?i("span",[e._v(" this Reality")]):e._e(),e._v(". ")]),e.infinity.projectedBanked.gt(0)?i("div",[e._v(" You will gain "+e._s(e.formatDecimalAmount(e.infinity.projectedBanked.floor()))+" "+e._s(e.pluralize("Banked Infinity",e.infinity.projectedBanked.floor()))+" on Eternity ("+e._s(e.formatDecimalAmount(e.infinity.bankRate))+" per minute). ")]):e.infinity.banked.gt(0)?i("div",[e._v(" You will gain no Banked Infinities on Eternity. ")]):e._e(),e.eternity.hasBest?i("div",[e._v(" Your fastest Eternity was "+e._s(e.eternity.best.toStringShort())+". ")]):i("div",[e._v(" You have no fastest Eternity"),e.reality.isUnlocked?i("span",[e._v(" this Reality")]):e._e(),e._v(". ")]),i("div",[e._v(" You have spent "+e._s(e.eternity.this.toStringShort())+" in this Eternity. "),e.reality.isUnlocked?i("span",[e._v(" ("+e._s(e.eternity.thisReal.toStringShort())+" real time) ")]):e._e()]),i("div",[e._v(" Your best Eternity Points per minute "),e.reality.isUnlocked?i("span",[e._v("this Reality ")]):e._e(),e._v(" is "+e._s(e.format(e.eternity.bestRate,2,2))+". ")]),i("br")]):e._e(),e.reality.isUnlocked?i("div",{staticClass:"c-stats-tab-subheader c-stats-tab-general"},[i("div",{class:e.realityClassObject()},[e._v(" "+e._s(e.isDoomed?"Doomed Reality":"Reality")+" ")]),i("div",[e._v("You have "+e._s(e.quantifyInt("Reality",e.reality.count))+".")]),i("div",[e._v("Your fastest game-time Reality was "+e._s(e.reality.best.toStringShort())+".")]),i("div",[e._v("Your fastest real-time Reality was "+e._s(e.reality.bestReal.toStringShort())+".")]),i("div",{class:{"c-stats-tab-doomed":e.isDoomed}},[e._v(" You have spent "+e._s(e.reality.this.toStringShort())+" in this "+e._s(e.isDoomed?"Armageddon":"Reality")+". ("+e._s(e.reality.thisReal.toStringShort())+" real time) ")]),e.isDoomed?i("div",{staticClass:"c-stats-tab-doomed"},[e._v(" You have been Doomed for "+e._s(e.realTimeDoomed.toStringShort())+", real time. ")]):e._e(),i("div",[e._v(" Your best Reality Machines per minute is "+e._s(e.format(e.reality.bestRate,2,2))+". ")]),i("div",[e._v("Your best Glyph rarity is "+e._s(e.formatRarity(e.reality.bestRarity))+".")]),i("br")]):e._e()])},lWe=[],cWe=K(aWe,oWe,lWe,!1,null,"1b229bf9");const uWe=cWe.exports,dWe={name:"PerkShopUpgradeButton",components:{DescriptionDisplay:Qs,EffectDisplay:lo,CostDisplay:mc},props:{upgrade:{type:Object,required:!0}},data(){return{isAvailableForPurchase:!1,isCapped:!1}},computed:{isDoomed:()=>Pelle.isDoomed,classObject(){return{"o-teresa-shop-button":!0,"o-teresa-shop-button--available":this.isAvailableForPurchase&&!this.isCapped,"o-teresa-shop-button--capped":this.isCapped,"o-teresa-shop-button--pelle-disabled":this.isDoomed&&(this.upgrade===PerkShopUpgrade.musicGlyph||this.upgrade===PerkShopUpgrade.fillMusicGlyph)}}},methods:{update(){this.isAvailableForPurchase=this.upgrade.isAvailableForPurchase,this.isCapped=this.upgrade.isCapped}}};var hWe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group"},[i("button",{class:e.classObject,on:{click:function(n){return e.upgrade.purchase()}}},[i("DescriptionDisplay",{attrs:{config:e.upgrade.config,length:70}}),i("br"),i("EffectDisplay",{attrs:{config:e.upgrade.config}}),i("br"),e.isCapped?e._e():i("CostDisplay",{attrs:{config:e.upgrade.config,name:"Perk Point"}})],1)])},fWe=[],pWe=K(dWe,hWe,fWe,!1,null,"ef38d24e");const mWe=pWe.exports,yWe={name:"TeresaTab",components:{GlyphSetPreview:Zf,PerkShopUpgradeButton:mWe,CelestialQuoteHistory:ip,CustomizeableTooltip:BT},data(){return{pour:!1,time:new Date().getTime(),pouredAmount:0,isPouredAmountCapped:!1,rm:new Decimal(0),percentage:"",possibleFillPercentage:"",rmMult:0,bestAM:new Decimal(0),bestAMSet:[],lastMachines:new Decimal(0),runReward:0,perkPoints:0,hasReality:!1,hasEPGen:!1,hasPerkShop:!1,raisedPerkShop:!1,isRunning:!1,canUnlockNextPour:!1}},computed:{unlockInfos:()=>TeresaUnlocks.all,pouredAmountCap:()=>Teresa.pouredAmountCap,showRunReward(){return this.bestAM.gt(1)},upgrades(){const t=[PerkShopUpgrade.glyphLevel,PerkShopUpgrade.rmMult,PerkShopUpgrade.bulkDilation,PerkShopUpgrade.autoSpeed,PerkShopUpgrade.musicGlyph];return this.raisedPerkShop&&t.push(PerkShopUpgrade.fillMusicGlyph),t},runButtonClassObject(){return{"c-teresa-run-button__icon":!0,"c-teresa-run-button__icon--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},pourButtonClassObject(){return{"o-teresa-shop-button":!0,"c-teresa-pour":!0,"o-teresa-shop-button--available":!this.isPouredAmountCapped,"o-teresa-shop-button--capped":this.isPouredAmountCapped,"c-teresa-pour--unlock-available":this.canUnlockNextPour,"c-disabled-pour":this.isPouredAmountCapped}},pourText(){return this.isPouredAmountCapped?"Filled":"Pour RM"},runDescription(){return GameDatabase.celestials.descriptions[0].effects()},lastMachinesString(){return this.lastMachines.lt(L.E10000)?`${quantify("Reality Machine",this.lastMachines,2)}`:`${quantify("Imaginary Machine",this.lastMachines.dividedBy(L.E10000),2)}`},unlockInfoTooltipArrowStyle(){return{borderRight:"0.5rem solid var(--color-teresa--base)"}},isDoomed:()=>Pelle.isDoomed},methods:{update(){const t=new Date().getTime();if(this.pour){const e=(t-this.time)/1e3;Teresa.pourRM(e)}else Teresa.timePoured=0;this.time=t,this.pouredAmount=player.celestials.teresa.pouredAmount,this.isPouredAmountCapped=this.pouredAmount===this.pouredAmountCap,this.percentage=`${(Teresa.fill*100).toFixed(2)}%`,this.possibleFillPercentage=`${(Teresa.possibleFill*100).toFixed(2)}%`,this.rmMult=Teresa.rmMultiplier,this.hasReality=TeresaUnlocks.run.isUnlocked,this.hasEPGen=TeresaUnlocks.epGen.isUnlocked,this.hasPerkShop=TeresaUnlocks.shop.isUnlocked,this.raisedPerkShop=Ra.unlocks.perkShopIncrease.canBeApplied,this.bestAM.copyFrom(player.celestials.teresa.bestRunAM),this.bestAMSet=Glyphs.copyForRecords(player.celestials.teresa.bestAMSet),this.lastMachines.copyFrom(player.celestials.teresa.lastRepeatedMachines),this.runReward=Teresa.runRewardMultiplier,this.perkPoints=Currency.perkPoints.value,this.rm.copyFrom(Currency.realityMachines),this.isRunning=Teresa.isRunning,this.canUnlockNextPour=TeresaUnlocks.all.filter(e=>this.rm.plus(this.pouredAmount).gte(e.price)&&!e.isUnlocked).length>0},startRun(){this.isDoomed||Modal.celestials.show({name:"Teresa's",number:0})},unlockDescriptionHeight(t){const e=TeresaUnlocks[Teresa.lastUnlock].price;return`calc(${(100*(Math.log1p(t.price)/Math.log1p(e))).toFixed(2)}% - 0.1rem)`},hasUnlock(t){return t.isUnlocked},unlockInfoTooltipClass(t){return{"c-teresa-unlock-description":!0,"c-teresa-unlock-description--unlocked":this.hasUnlock(t)}}}};var gWe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-teresa-celestial-tab"},[i("CelestialQuoteHistory",{attrs:{celestial:"teresa"}}),i("div",[e._v(" You have "+e._s(e.quantify("Reality Machine",e.rm,2,2))+". ")]),i("div",{staticClass:"l-mechanics-container"},[e.hasReality?i("div",{staticClass:"l-teresa-mechanic-container"},[i("div",{staticClass:"c-teresa-unlock c-teresa-run-button"},[i("span",{class:{"o-pelle-disabled":e.isDoomed}},[e._v(" Start Teresa's Reality. ")]),i("div",{class:e.runButtonClassObject,on:{click:function(n){return e.startRun()}}},[e._v(" Ϟ ")]),e._v(" "+e._s(e.runDescription)+" "),i("br"),i("br"),i("div",[e._v(" This Reality can be repeated for a stronger reward based on the antimatter gained within it. "),i("br"),i("br"),e.showRunReward?i("span",[e._v(" Your record antimatter in Teresa's Reality is "+e._s(e.format(e.bestAM,2))+", achieved with "+e._s(e.lastMachinesString)+". "),i("br"),i("br"),e._v(" Glyph Set used: "),i("GlyphSetPreview",{attrs:{text:"Teresa's Best Glyph Set","text-hidden":!0,"force-name-color":!1,glyphs:e.bestAMSet}})],1):i("span",[e._v(" You have not completed Teresa's Reality yet. ")])])]),e.showRunReward?i("div",{staticClass:"c-teresa-unlock"},[e._v(" Teresa Reality reward: Glyph Sacrifice power "+e._s(e.formatX(e.runReward,2,2))+" ")]):e._e(),e.hasEPGen?i("div",{staticClass:"c-teresa-unlock"},[i("span",{class:{"o-pelle-disabled":e.isDoomed}},[e._v(" Every second, you gain "+e._s(e.formatPercents(.01))+" of your peaked Eternity Points per minute this Reality. ")])]):e._e()]):e._e(),i("div",{staticClass:"l-rm-container l-teresa-mechanic-container"},[i("button",{class:e.pourButtonClassObject,on:{mousedown:function(n){e.pour=!0},touchstart:function(n){e.pour=!0},mouseup:function(n){e.pour=!1},touchend:function(n){e.pour=!1},mouseleave:function(n){e.pour=!1}}},[e._v(" "+e._s(e.pourText)+" ")]),i("div",{staticClass:"c-rm-store"},[i("div",{staticClass:"c-rm-store-inner c-rm-store-inner--light",style:{height:e.possibleFillPercentage}}),i("div",{staticClass:"c-rm-store-inner",style:{height:e.percentage}},[i("div",{staticClass:"c-rm-store-label"},[e._v(" "+e._s(e.formatX(e.rmMult,2,2))+" RM gain "),i("br"),e._v(" "+e._s(e.format(e.pouredAmount,2,2))+"/"+e._s(e.format(e.pouredAmountCap,2,2))+" ")])]),e._l(e.unlockInfos,function(n){return i("CustomizeableTooltip",{key:n.id,attrs:{"content-class":"c-teresa-unlock-description--hover-area",bottom:e.unlockDescriptionHeight(n),right:"0",mode:"right",show:!0,"tooltip-arrow-style":e.unlockInfoTooltipArrowStyle,"tooltip-class":e.unlockInfoTooltipClass(n)},scopedSlots:e._u([{key:"mainContent",fn:function(){return[i("div",{staticClass:"c-teresa-milestone-line",class:{"c-teresa-milestone-line--unlocked":e.hasUnlock(n)}})]},proxy:!0},{key:"tooltipContent",fn:function(){return[i("b",{class:{"o-pelle-disabled":n.pelleDisabled}},[e._v(" "+e._s(e.format(n.price,2,2))+": "+e._s(n.description)+" ")])]},proxy:!0}],null,!0)})})],2)]),e.hasPerkShop?i("div",{staticClass:"c-teresa-shop"},[i("span",{staticClass:"o-teresa-pp"},[e._v(" You have "+e._s(e.quantify("Perk Point",e.perkPoints,2,0))+". ")]),e._l(e.upgrades,function(n){return i("PerkShopUpgradeButton",{key:n.id,attrs:{upgrade:n}})}),e._v(" You can now modify the appearance of your Glyphs to look like Music Glyphs. ")],2):i("div",{staticClass:"l-rm-container-labels l-teresa-mechanic-container"})])],1)},vWe=[],bWe=K(yWe,gWe,vWe,!1,null,"654a3a0b");const _We=bWe.exports,EWe={name:"DilationButton",data(){return{isUnlocked:!1,isRunning:!1,hasGain:!1,requiredForGain:new Decimal,canEternity:!1,eternityGoal:new Decimal,tachyonGain:new Decimal,remnantRequirement:0,showRequirement:!1,creditsClosed:!1}},computed:{disableText(){return Pelle.isDoomed?"Dilation is permanent.":"Disable Dilation."}},methods:{update(){this.isUnlocked=PlayerProgress.dilationUnlocked(),this.isRunning=player.dilation.active,this.remnantRequirement=Pelle.remnantRequirementForDilation,this.showRequirement=Pelle.isDoomed&&!Pelle.canDilateInPelle,this.isRunning&&(this.canEternity=Player.canEternity,this.hasGain=getTachyonGain(!1).gt(0),this.canEternity&&this.hasGain?this.tachyonGain.copyFrom(getTachyonGain(!0)):this.hasGain?this.eternityGoal.copyFrom(Player.eternityGoal):this.requiredForGain.copyFrom(getTachyonReq()),this.creditsClosed=GameEnd.creditsEverClosed)},dilate(){this.creditsClosed||startDilatedEternityRequest()}}};var TWe=function(){var e=this,i=e._self._c;return i("button",{staticClass:"o-dilation-btn",class:e.isUnlocked?"o-dilation-btn--unlocked":"o-dilation-btn--locked",on:{click:function(n){return e.dilate()}}},[e.isUnlocked?e.isRunning?e.canEternity&&e.hasGain?i("span",[e._v(" "+e._s(e.disableText)+" "),i("br"),e._v(" Gain "+e._s(e.quantify("Tachyon Particle",e.tachyonGain,2,1))+". ")]):e.hasGain?i("span",[e._v(" "+e._s(e.disableText)+" "),i("br"),e._v(" Reach "+e._s(e.quantify("Infinity Point",e.eternityGoal,1,0))+" to Eternity and gain Tachyon Particles. ")]):i("span",[e._v(" "+e._s(e.disableText)+" "),i("br"),e._v(" Reach "+e._s(e.format(e.requiredForGain,2,1))+" antimatter to gain more Tachyon Particles. ")]):i("span",[e._v(" Dilate time. "),e.showRequirement?i("div",[e._v(" Requires "+e._s(e.format(e.remnantRequirement,2))+" Remnants ")]):e._e()]):i("span",[e._v("Purchase the Dilation Study to unlock.")])])},wWe=[],CWe=K(EWe,TWe,wWe,!1,null,"c6906d5a");const SWe=CWe.exports,kWe={name:"DilationUpgradeButton",components:{PrimaryToggleButton:cn,DescriptionDisplay:Qs,EffectDisplay:lo,CostDisplay:mc,CustomizeableTooltip:BT},props:{upgrade:{type:Object,required:!0},isRebuyable:{type:Boolean,required:!1,default:!1},showTooltip:{type:Boolean,required:!0}},data(){return{isBought:!1,isCapped:!1,isAffordable:!1,isAutoUnlocked:!1,isAutobuyerOn:!1,boughtAmount:0,currentDT:new Decimal(0),currentDTGain:new Decimal(0),timeEstimate:"",isHovering:!1,hideEstimate:!1}},computed:{classObject(){return this.isUseless?{"o-dilation-upgrade o-pelle-disabled-pointer":!0,"o-pelle-disabled o-dilation-upgrade--useless":this.upgrade.id===7||this.upgrade.id===3}:{"o-dilation-upgrade":!0,"o-dilation-upgrade--rebuyable":this.isRebuyable,"o-dilation-upgrade--available":!this.isBought&&!this.isCapped&&this.isAffordable,"o-dilation-upgrade--unavailable":!this.isBought&&!this.isCapped&&!this.isAffordable,"o-dilation-upgrade--bought":this.isBought,"o-dilation-upgrade--capped":this.isCapped}},isUseless(){const t=this.upgrade.id===3||this.upgrade.id===7;return Pelle.isDoomed&&t}},watch:{isAutobuyerOn(t){Autobuyer.dilationUpgrade(this.upgrade.id).isActive=t}},methods:{update(){const t=this.upgrade;if(this.currentDT.copyFrom(Currency.dilatedTime.value),this.currentDTGain.copyFrom(getDilationGainPerSecond()),this.hideEstimate=this.isAffordable||this.isCapped||this.upgrade.isBought||this.isUseless,this.timeEstimate=this.hideEstimate?null:getDilationTimeEstimate(this.upgrade.cost),this.isRebuyable){this.isAffordable=t.isAffordable,this.isCapped=t.isCapped;const e=Autobuyer.dilationUpgrade(t.id);if(this.boughtAmount=t.boughtAmount,!e)return;this.isAutoUnlocked=e.isUnlocked,this.isAutobuyerOn=e.isActive;return}this.isBought=t.isBought,this.isBought||(this.isAffordable=t.isAffordable)}}};var AWe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-spoon-btn-group"},[i("button",{class:e.classObject,attrs:{"ach-tooltip":e.timeEstimate},on:{click:function(n){return e.upgrade.purchase()},mouseover:function(n){e.isHovering=!0},mouseleave:function(n){e.isHovering=!1}}},[e.timeEstimate?i("CustomizeableTooltip",{attrs:{show:e.showTooltip&&!e.isHovering&&!e.hideEstimate,left:"50%",top:"0"},scopedSlots:e._u([{key:"tooltipContent",fn:function(){return[e._v(" "+e._s(e.timeEstimate)+" ")]},proxy:!0}],null,!1,1945308655)}):e._e(),i("span",[i("DescriptionDisplay",{attrs:{config:e.upgrade.config,length:70,name:"o-dilation-upgrade__description"}}),i("EffectDisplay",{key:e.boughtAmount,attrs:{br:"",config:e.upgrade.config}})],1),!e.isBought&&!e.isCapped?i("CostDisplay",{attrs:{br:"",config:e.upgrade.config,name:"Dilated Time"}}):e._e()],1),e.isRebuyable&&e.isAutoUnlocked?i("PrimaryToggleButton",{staticClass:"l--spoon-btn-group__little-spoon o-primary-btn--dilation-upgrade-toggle",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):e._e()],1)},RWe=[],IWe=K(kWe,AWe,RWe,!1,null,"674bcdc2");const DWe=IWe.exports,xWe={name:"TimeDilationTab",components:{DilationButton:SWe,DilationUpgradeButton:DWe},data(){return{tachyons:new Decimal,dilatedTime:new Decimal,dilatedTimeIncome:new Decimal,galaxyThreshold:new Decimal,baseGalaxies:0,totalGalaxies:0,tachyonGalaxyGain:1,hasPelleDilationUpgrades:!1,galaxyTimeEstimate:"",maxDT:new Decimal,toMaxTooltip:"",isHovering:!1}},computed:{rebuyables(){return[DilationUpgrade.dtGain,DilationUpgrade.galaxyThreshold,DilationUpgrade.tachyonGain]},upgrades(){return[[DilationUpgrade.doubleGalaxies,DilationUpgrade.tdMultReplicanti,DilationUpgrade.ndMultDT],[DilationUpgrade.ipMultDT,DilationUpgrade.timeStudySplit,DilationUpgrade.dilationPenalty]]},dilatedTimeGainText(){return`${this.dilatedTimeIncome.gte(0)?"+":""}${format(this.dilatedTimeIncome,2,1)}`},pelleRebuyables(){return[DilationUpgrade.dtGainPelle,DilationUpgrade.galaxyMultiplier,DilationUpgrade.tickspeedPower]},pelleUpgrades(){return[DilationUpgrade.galaxyThresholdPelle,DilationUpgrade.flatDilationMult]},ttGenerator(){return DilationUpgrade.ttGenerator},baseGalaxyText(){return`${formatInt(this.baseGalaxies)} Base`},hasMaxText:()=>PlayerProgress.realityUnlocked()&&!Pelle.isDoomed,allRebuyables(){const t=[];return t.push(this.rebuyables),this.hasPelleDilationUpgrades&&t.push(this.pelleRebuyables),t},allSingleUpgrades(){const t=[];return t.push(...this.upgrades),this.hasPelleDilationUpgrades&&t.push(this.pelleUpgrades),t.push([this.ttGenerator]),t}},methods:{update(){this.tachyons.copyFrom(Currency.tachyonParticles),this.dilatedTime.copyFrom(Currency.dilatedTime);const t=getDilationGainPerSecond().times(getGameSpeedupForDisplay());if(this.galaxyTimeEstimate=getDilationTimeEstimate(this.galaxyThreshold),PelleRifts.paradox.isActive){const i=player.options.updateRate/1e3,n=1-(1-Pelle.riftDrainPercent)**i,r=this.dilatedTime.add(t.times(i)).times(n/i);this.dilatedTimeIncome=t.minus(r)}else this.dilatedTimeIncome=t;this.galaxyThreshold.copyFrom(player.dilation.nextThreshold),this.baseGalaxies=player.dilation.baseTachyonGalaxies,this.totalGalaxies=player.dilation.totalTachyonGalaxies,this.hasPelleDilationUpgrades=PelleRifts.paradox.milestones[0].canBeApplied,this.baseGalaxies<500&&DilationUpgrade.doubleGalaxies.isBought?this.tachyonGalaxyGain=DilationUpgrade.doubleGalaxies.effectValue:this.tachyonGalaxyGain=1,this.tachyonGalaxyGain*=DilationUpgrade.galaxyMultiplier.effectValue,this.maxDT.copyFrom(player.records.thisReality.maxDT);const e=getDilationTimeEstimate(this.maxDT);this.dilatedTimeIncome.lte(0)?this.toMaxTooltip="No DT gain":this.toMaxTooltip=e.startsWith("<")?"Currently Increasing":e}}};var MWe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-dilation-tab"},[i("span",[e._v(" You have "),i("span",{staticClass:"c-dilation-tab__tachyons"},[e._v(e._s(e.format(e.tachyons,2,1)))]),e._v(" "+e._s(e.pluralize("Tachyon Particle",e.tachyons))+". ")]),i("div",{on:{mouseover:function(n){e.isHovering=!0},mouseleave:function(n){e.isHovering=!1}}},[i("DilationButton")],1),i("span",[e._v(" You have "),i("span",{staticClass:"c-dilation-tab__dilated-time"},[e._v(e._s(e.format(e.dilatedTime,2,1)))]),e._v(" Dilated Time. "),i("span",{staticClass:"c-dilation-tab__dilated-time-income"},[e._v(e._s(e.dilatedTimeGainText)+"/s")])]),i("span",[e._v(" Next "),e.tachyonGalaxyGain>1?i("span",[e._v(e._s(e.formatInt(e.tachyonGalaxyGain)))]):e._e(),e._v(" "+e._s(e.pluralize("Tachyon Galaxy",e.tachyonGalaxyGain))+" at "),i("span",{staticClass:"c-dilation-tab__galaxy-threshold",attrs:{"ach-tooltip":e.galaxyTimeEstimate}},[e._v(e._s(e.format(e.galaxyThreshold,2,1)))]),e._v(" Dilated Time, gained total of "),i("span",{staticClass:"c-dilation-tab__galaxies",attrs:{"ach-tooltip":e.baseGalaxyText}},[e._v(e._s(e.formatInt(e.totalGalaxies)))]),e._v(" "+e._s(e.pluralize("Tachyon Galaxy",e.totalGalaxies))+" ")]),e.hasMaxText?i("span",[e._v(" Your maximum Dilated Time reached this Reality is "),i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.toMaxTooltip,expression:"toMaxTooltip"}],staticClass:"max-accent"},[e._v(e._s(e.format(e.maxDT,2,1)))]),e._v(". ")]):e._e(),i("div",{staticClass:"l-dilation-upgrades-grid"},[e._l(e.allRebuyables,function(n,r){return i("div",{key:"rebuyable"+r,staticClass:"l-dilation-upgrades-grid__row"},e._l(n,function(s){return i("DilationUpgradeButton",{key:s.id,staticClass:"l-dilation-upgrades-grid__cell",attrs:{upgrade:s,"is-rebuyable":!0,"show-tooltip":e.isHovering}})}),1)}),e._l(e.allSingleUpgrades,function(n,r){return i("div",{key:"single"+r,staticClass:"l-dilation-upgrades-grid__row"},e._l(n,function(s){return i("DilationUpgradeButton",{key:s.id,staticClass:"l-dilation-upgrades-grid__cell",attrs:{upgrade:s,"is-rebuyable":!1,"show-tooltip":e.isHovering}})}),1)})],2)])},PWe=[],OWe=K(xWe,MWe,PWe,!1,null,"b92e6b41");const NWe=OWe.exports,GWe={name:"ClassicTimeDimensionRow",components:{GenericDimensionRowText:yy,PrimaryButton:yt,PrimaryToggleButton:cn},props:{tier:{type:Number,required:!0},areAutobuyersUnlocked:{type:Boolean,required:!0}},data(){return{isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:0,rateOfChange:new Decimal(0),cost:new Decimal(0),isAvailableForPurchase:!1,isAutobuyerOn:!1,requirementReached:!1,realityUnlocked:!1,showTTCost:!1,ttCost:0,ttGen:new Decimal,currTT:new Decimal}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${TimeDimension(this.tier).shortDisplayName} Time Dimension`},buttonContents(){return this.showTTCost?this.formattedTTCost:this.formattedEPCost},tooltipContents(){return this.showTTCost?`${this.formattedEPCost}<br>${this.timeEstimate}`:this.isCapped?`Nameless prevents the purchase of more than ${format(1)} Time Dimension`:`Purchased ${quantifyInt("time",this.bought)}`},showRow(){return this.realityUnlocked||this.isUnlocked||this.requirementReached},formattedTTCost(){return`Unlock: ${format(this.ttCost)} TT`},formattedEPCost(){return this.isCapped?"Capped":`${this.showCostTitle?"Cost: ":""}${format(this.cost,2)} EP`},hasLongText(){return this.buttonContents.length>20},showCostTitle(){return this.cost.exponent<1e5},timeEstimate(){if(!this.showTTCost||this.ttGen.eq(0))return"";const t=Decimal.sub(this.ttCost,this.currTT).dividedBy(this.ttGen);return t.gt(0)?`Enough TT in ${TimeSpan.fromSeconds(t.toNumber()).toStringShort()}`:""}},watch:{isAutobuyerOn(t){Autobuyer.timeDimension(this.tier).isActive=t}},methods:{update(){const t=this.tier,e=TimeDimension(t);this.isCapped=Enslaved.isRunning&&e.bought>0,this.isUnlocked=e.isUnlocked,this.multiplier.copyFrom(e.multiplier),this.amount.copyFrom(e.amount),this.bought=e.bought,t<8&&this.rateOfChange.copyFrom(e.rateOfChange),this.cost.copyFrom(e.cost),this.isAvailableForPurchase=e.isAvailableForPurchase,this.isUnlocked||(this.isAvailableForPurchase=e.requirementReached),this.requirementReached=e.requirementReached,this.isAutobuyerOn=Autobuyer.timeDimension(this.tier).isActive,this.realityUnlocked=PlayerProgress.realityUnlocked(),this.showTTCost=!this.isUnlocked&&!this.shiftDown,this.tier>4&&(this.ttCost=TimeStudy.timeDimension(this.tier).cost),this.currTT.copyFrom(Currency.timeTheorems.value),this.ttGen.copyFrom(getTTPerSecond().times(getGameSpeedupFactor()))},buyTimeDimension(){if(!this.isUnlocked){TimeDimension(this.tier).tryUnlock();return}buySingleTimeDimension(this.tier)},buyMaxTimeDimension(){buyMaxTimeDimension(this.tier)}}};var UWe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showRow,expression:"showRow"}],staticClass:"c-dimension-row l-dimension-single-row",class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.requirementReached}},[i("GenericDimensionRowText",{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),"amount-text":e.format(e.amount,2),rate:e.rateOfChange}}),i("div",{staticClass:"l-dim-row-multi-button-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--buy-td o-primary-btn--buy-dim c-dim-tooltip-container",class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyTimeDimension}},[e._v(" "+e._s(e.buttonContents)+" "),i("div",{staticClass:"c-dim-purchase-count-tooltip"},[i("span",{domProps:{innerHTML:e._s(e.tooltipContents)}})])]),e.areAutobuyersUnlocked?i("PrimaryToggleButton",{staticClass:"o-primary-btn--buy-td-auto",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):i("PrimaryButton",{staticClass:"o-primary-btn--buy-td-auto",attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyMaxTimeDimension}},[e._v(" Buy Max ")])],1)],1)},LWe=[],BWe=K(GWe,UWe,LWe,!1,null,null);const FWe=BWe.exports,$We={name:"ClassicTimeDimensionsTab",components:{PrimaryButton:yt,TimeDimensionRow:FWe},data(){return{totalUpgrades:0,multPerTickspeed:0,tickspeedSoftcap:0,timeShards:new Decimal(0),upgradeThreshold:new Decimal(0),shardsPerSecond:new Decimal(0),incomeType:"",areAutobuyersUnlocked:!1,showLockedDimCostNote:!0}},computed:{costIncreases:()=>TimeDimension(1).costIncreaseThresholds},methods:{update(){this.showLockedDimCostNote=!TimeDimension(8).isUnlocked&&player.realities>=1,this.totalUpgrades=player.totalTickGained,this.multPerTickspeed=FreeTickspeed.multToNext,this.tickspeedSoftcap=FreeTickspeed.softcap,this.timeShards.copyFrom(Currency.timeShards),this.upgradeThreshold.copyFrom(FreeTickspeed.fromShards(Currency.timeShards.value).nextShards),this.shardsPerSecond.copyFrom(TimeDimension(1).productionPerRealSecond),this.incomeType=EternityChallenge(7).isRunning?"Eighth Infinity Dimensions":"Time Shards",this.areAutobuyersUnlocked=Autobuyer.timeDimension(1).isUnlocked},maxAll(){tryUnlockTimeDimensions(),maxAllTimeDimensions()},toggleAllAutobuyers(){toggleAllTimeDims()}}};var HWe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-time-dim-tab l-centered-vertical-tab"},[i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.maxAll}},[e._v(" Max all ")]),e.areAutobuyersUnlocked?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.toggleAllAutobuyers}},[e._v(" Toggle all autobuyers ")]):e._e()],1),i("div",[i("p",[e._v(" You have gained "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.formatInt(e.totalUpgrades)))]),e._v(" Tickspeed upgrades from "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.format(e.timeShards,2,1)))]),e._v(" Time Shards. ")]),i("p",[e._v(" Next Tickspeed upgrade at "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.format(e.upgradeThreshold,2,1)))]),e._v(", increasing by "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.formatX(e.multPerTickspeed,2,2)))]),e._v(" per Tickspeed upgrade gained. ")])]),i("div",[e._v(" The amount each additional upgrade requires will start increasing above "+e._s(e.formatInt(e.tickspeedSoftcap))+" Tickspeed upgrades. ")]),i("div",[e._v(" You are getting "+e._s(e.format(e.shardsPerSecond,2,0))+" "+e._s(e.incomeType)+" per second. ")]),i("div",{staticClass:"l-dimensions-container"},e._l(8,function(n){return i("TimeDimensionRow",{key:n,attrs:{tier:n,"are-autobuyers-unlocked":e.areAutobuyersUnlocked}})}),1),i("div",[e._v(" Time Dimension costs jump at "+e._s(e.format(e.costIncreases[0],2,2))+" and "+e._s(e.format(e.costIncreases[1]))+" Eternity Points, "),i("br"),e._v(" and costs increase much faster after "+e._s(e.format(e.costIncreases[2]))+" Eternity Points. "),i("br"),e.showLockedDimCostNote?i("div",[e._v(" Hold shift to see the Eternity Point cost for locked Time Dimensions. ")]):e._e(),e._v(" Any 8th Time Dimensions purchased above "+e._s(e.format(1e8))+" will not further increase the multiplier. ")])])},VWe=[],qWe=K($We,HWe,VWe,!1,null,null);const YWe=qWe.exports,WWe={name:"ModernTimeDimensionRow",components:{GenericDimensionRowText:yy,PrimaryButton:yt,PrimaryToggleButton:cn},props:{tier:{type:Number,required:!0},areAutobuyersUnlocked:{type:Boolean,required:!0}},data(){return{isUnlocked:!1,isCapped:!1,multiplier:new Decimal(0),amount:new Decimal(0),bought:0,rateOfChange:new Decimal(0),cost:new Decimal(0),isAvailableForPurchase:!1,isAutobuyerOn:!1,requirementReached:!1,realityUnlocked:!1,showTTCost:!1,ttCost:0,ttGen:new Decimal,currTT:new Decimal}},computed:{shiftDown(){return ui.view.shiftDown},name(){return`${TimeDimension(this.tier).shortDisplayName} Time Dimension`},buttonContents(){return this.showTTCost?this.formattedTTCost:this.formattedEPCost},tooltipContents(){return this.showTTCost?`${this.formattedEPCost}<br>${this.timeEstimate}`:this.isCapped?`Nameless prevents the purchase of more than ${format(1)} Time Dimension`:`Purchased ${quantifyInt("time",this.bought)}`},showRow(){return this.realityUnlocked||this.isUnlocked||this.requirementReached},formattedTTCost(){return`Unlock: ${format(this.ttCost)} TT`},formattedEPCost(){return this.isCapped?"Capped":`${this.showCostTitle?"Cost: ":""}${format(this.cost,2)} EP`},hasLongText(){return this.buttonContents.length>20},showCostTitle(){return this.cost.exponent<1e5},timeEstimate(){if(!this.showTTCost||this.ttGen.eq(0))return"";const t=Decimal.sub(this.ttCost,this.currTT).dividedBy(this.ttGen);return t.gt(0)?`Enough TT in ${TimeSpan.fromSeconds(t.toNumber()).toStringShort()}`:""}},watch:{isAutobuyerOn(t){Autobuyer.timeDimension(this.tier).isActive=t}},methods:{update(){const t=this.tier,e=TimeDimension(t);this.isCapped=Enslaved.isRunning&&e.bought>0,this.isUnlocked=e.isUnlocked,this.multiplier.copyFrom(e.multiplier),this.amount.copyFrom(e.amount),this.bought=e.bought,t<8&&this.rateOfChange.copyFrom(e.rateOfChange),this.cost.copyFrom(e.cost),this.isAvailableForPurchase=e.isAvailableForPurchase,this.isUnlocked||(this.isAvailableForPurchase=e.requirementReached),this.requirementReached=e.requirementReached,this.isAutobuyerOn=Autobuyer.timeDimension(this.tier).isActive,this.realityUnlocked=PlayerProgress.realityUnlocked(),this.showTTCost=!this.isUnlocked&&!this.shiftDown,this.tier>4&&(this.ttCost=TimeStudy.timeDimension(this.tier).cost),this.currTT.copyFrom(Currency.timeTheorems.value),this.ttGen.copyFrom(getTTPerSecond().times(getGameSpeedupFactor()))},buyTimeDimension(){if(!this.isUnlocked){TimeDimension(this.tier).tryUnlock();return}buySingleTimeDimension(this.tier)},buyMaxTimeDimension(){buyMaxTimeDimension(this.tier)}}};var jWe=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showRow,expression:"showRow"}],staticClass:"c-dimension-row l-dimension-row-time-dim l-dimension-single-row",class:{"c-dim-row--not-reached":!e.isUnlocked&&!e.requirementReached}},[i("GenericDimensionRowText",{attrs:{tier:e.tier,name:e.name,"multiplier-text":e.formatX(e.multiplier,2,1),"amount-text":e.format(e.amount,2),rate:e.rateOfChange}}),i("div",{staticClass:"l-dim-row-multi-button-container c-modern-dim-tooltip-container"},[i("div",{staticClass:"c-modern-dim-purchase-count-tooltip"},[i("span",{domProps:{innerHTML:e._s(e.tooltipContents)}})]),i("PrimaryButton",{staticClass:"o-primary-btn--buy-td o-primary-btn o-primary-btn--new o-primary-btn--buy-dim",class:{"l-dim-row-small-text":e.hasLongText},attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyTimeDimension}},[e._v(" "+e._s(e.buttonContents)+" ")]),e.areAutobuyersUnlocked?i("PrimaryToggleButton",{staticClass:"o-primary-btn--buy-td-auto",attrs:{label:"Auto:"},model:{value:e.isAutobuyerOn,callback:function(n){e.isAutobuyerOn=n},expression:"isAutobuyerOn"}}):i("PrimaryButton",{staticClass:"o-primary-btn--buy-td-auto",attrs:{enabled:e.isAvailableForPurchase&&!e.isCapped},on:{click:e.buyMaxTimeDimension}},[e._v(" Buy Max ")])],1)],1)},zWe=[],XWe=K(WWe,jWe,zWe,!1,null,"ededf91c");const KWe=XWe.exports,ZWe={name:"NewTimeDimensionsTab",components:{PrimaryButton:yt,NewTimeDimensionRow:KWe},data(){return{totalUpgrades:0,multPerTickspeed:0,tickspeedSoftcap:0,timeShards:new Decimal(0),upgradeThreshold:new Decimal(0),shardsPerSecond:new Decimal(0),incomeType:"",areAutobuyersUnlocked:!1,showLockedDimCostNote:!0}},computed:{costIncreases:()=>TimeDimension(1).costIncreaseThresholds},methods:{update(){this.showLockedDimCostNote=!TimeDimension(8).isUnlocked&&player.realities>=1,this.totalUpgrades=player.totalTickGained,this.multPerTickspeed=FreeTickspeed.multToNext,this.tickspeedSoftcap=FreeTickspeed.softcap,this.timeShards.copyFrom(Currency.timeShards),this.upgradeThreshold.copyFrom(FreeTickspeed.fromShards(Currency.timeShards.value).nextShards),this.shardsPerSecond.copyFrom(TimeDimension(1).productionPerSecond),this.incomeType=EternityChallenge(7).isRunning?"Eighth Infinity Dimensions":"Time Shards",this.areAutobuyersUnlocked=Autobuyer.timeDimension(1).isUnlocked},maxAll(){tryUnlockTimeDimensions(),maxAllTimeDimensions()},toggleAllAutobuyers(){toggleAllTimeDims()}}};var QWe=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-time-dim-tab l-centered-vertical-tab"},[i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.maxAll}},[e._v(" Max all ")]),e.areAutobuyersUnlocked?i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.toggleAllAutobuyers}},[e._v(" Toggle all autobuyers ")]):e._e()],1),i("div",[i("p",[e._v(" You have gained "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.formatInt(e.totalUpgrades)))]),e._v(" Tickspeed upgrades from "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.format(e.timeShards,2,1)))]),e._v(" Time Shards. ")]),i("p",[e._v(" Next Tickspeed upgrade at "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.format(e.upgradeThreshold,2,1)))]),e._v(", increasing by "),i("span",{staticClass:"c-time-dim-description__accent"},[e._v(e._s(e.formatX(e.multPerTickspeed,2,2)))]),e._v(" per Tickspeed upgrade gained. ")])]),i("div",[e._v(" The amount each additional upgrade requires will start increasing above "+e._s(e.formatInt(e.tickspeedSoftcap))+" Tickspeed upgrades. ")]),i("div",[e._v("You are getting "+e._s(e.format(e.shardsPerSecond,2,0))+" "+e._s(e.incomeType)+" per second.")]),i("div",{staticClass:"l-dimensions-container"},e._l(8,function(n){return i("NewTimeDimensionRow",{key:n,attrs:{tier:n,"are-autobuyers-unlocked":e.areAutobuyersUnlocked}})}),1),i("div",[e._v(" Time Dimension costs jump at "+e._s(e.format(e.costIncreases[0],2,2))+" and "+e._s(e.format(e.costIncreases[1]))+" Eternity Points, "),i("br"),e._v(" and costs increase much faster after "+e._s(e.format(e.costIncreases[2]))+" Eternity Points. "),i("br"),e.showLockedDimCostNote?i("div",[e._v(" Hold shift to see the Eternity Point cost for locked Time Dimensions. ")]):e._e(),e._v(" Any 8th Time Dimensions purchased above "+e._s(e.format(1e8))+" will not further increase the multiplier. ")])])},JWe=[],eje=K(ZWe,QWe,JWe,!1,null,null);const tje=eje.exports,ije={name:"TimeDimensionsTab",components:{ClassicTimeDimensionsTab:YWe,ModernTimeDimensionsTab:tje},computed:{activeComponent(){return this.$viewModel.newUI?"ModernTimeDimensionsTab":"ClassicTimeDimensionsTab"}}};var nje=function(){var e=this,i=e._self._c;return i(e.activeComponent,{tag:"component"})},rje=[],sje=K(ije,nje,rje,!1,null,null);const aje=sje.exports,oje={name:"DilationTimeStudy",components:{DescriptionDisplay:Qs,TimeStudyButton:IT},props:{setup:{type:Object,required:!0}},data(){return{showRequirement:!1,maxTT:new Decimal,currTT:new Decimal,ttGen:new Decimal}},computed:{study(){return this.setup.study},id(){return this.study.id},requirement(){if(this.id===1)return`Requirement: ${formatInt(5)} EC11 and EC12 completions
          and ${formatInt(this.maxTT)}/${formatInt(TimeStudy.dilation.totalTimeTheoremRequirement)}
          total Time Theorems`;if(this.id===6){const t=Perk.firstPerk.isBought?"":` and ${formatInt(13)} rows of Achievements`;return`Requirement: ${format("1e4000")} Eternity Points${t}`}return""},theoremTimeEstimate(){if(this.study.isBought||!this.study.cost||this.ttGen.eq(0))return null;const t=Decimal.sub(this.study.cost,this.currTT).dividedBy(this.ttGen);return t.gt(0)?`Enough TT in ${TimeSpan.fromSeconds(t.toNumber()).toStringShort()}`:null}},methods:{update(){this.id===1&&(this.maxTT.copyFrom(Currency.timeTheorems.max),this.showRequirement=!this.study.isBought&&!Perk.bypassECDilation.canBeApplied),this.id===6&&(this.showRequirement=!Pelle.isDoomed),this.currTT.copyFrom(Currency.timeTheorems.value),this.ttGen.copyFrom(getTTPerSecond().times(getGameSpeedupFactor()))},clickHandler(){switch(this.id){case 1:return()=>Tab.eternity.dilation.show();case 2:case 3:case 4:case 5:return()=>Tab.dimensions.time.show();case 6:return()=>Tab.reality.glyphs.show();default:throw new Error("Unrecognized Dilation study was clicked")}}}};var lje=function(){var e=this,i=e._self._c;return i("TimeStudyButton",{attrs:{setup:e.setup,"ach-tooltip":e.theoremTimeEstimate,"special-click":e.clickHandler()}},[i("DescriptionDisplay",{attrs:{config:e.study.config}}),e.showRequirement?[i("br"),i("span",[e._v(e._s(e.requirement))])]:e._e()],2)},cje=[],uje=K(oje,lje,cje,!1,null,"32154890");const n2=uje.exports,dje={name:"ECTimeStudy",components:{TimeStudyButton:IT,HintText:gc},props:{setup:{type:Object,required:!0}},data(){return{hasRequirement:!1,requirement:{current:new Decimal,total:new Decimal},completions:0,showTotalCompletions:!1,isRunning:!1,isUnlocked:!1}},computed:{study(){return this.setup.study},id(){return this.study.id},config(){return this.study.config},hasNumberRequirement(){return typeof this.study.requirementCurrent=="number"},formatValue(){return this.config.secondary.formatValue},needsFirstLinebreak(){return this.study.id===7},needsSecondLinebreak(){return[3,4,7].includes(this.study.id)}},methods:{update(){var r;const t=this.id,e=this.study,i=EternityChallenge(t);if(this.hasRequirement=!Perk.studyECRequirement.isBought&&!e.wasRequirementPreviouslyMet,this.completions=i.completions,this.showTotalCompletions=!Enslaved.isRunning||t!==1,this.isRunning=((r=EternityChallenge.current)==null?void 0:r.id)===t,this.isUnlocked=i.isUnlocked,!this.hasRequirement||t>10)return;const n=this.requirement;this.hasNumberRequirement?(n.total=e.requirementTotal,n.current=Math.min(e.requirementCurrent,n.total)):(n.total.copyFrom(e.requirementTotal),n.current.copyFrom(e.requirementCurrent.min(n.total)))}}};var hje=function(){var e=this,i=e._self._c;return i("TimeStudyButton",{attrs:{setup:e.setup}},[i("HintText",{staticClass:"l-hint-text--time-study",attrs:{type:"studies"}},[e._v(" EC"+e._s(e.id)+" ")]),e._v(" Eternity Challenge "+e._s(e.id)+" ("+e._s(e.formatInt(e.completions))),e.showTotalCompletions?i("span",[e._v("/"+e._s(e.formatInt(5)))]):e._e(),e._v(") "),e.hasRequirement?[i("br"),e._v(" Requirement: "),e.needsFirstLinebreak?i("br"):e._e(),e.config.secondary.path?i("span",[e._v("Use only the "+e._s(e.config.secondary.path)+" path")]):i("span",[e._v(" "+e._s(e.formatValue(e.requirement.current))+"/"+e._s(e.formatValue(e.requirement.total))+" "),e.needsSecondLinebreak?i("br"):e._e(),e._v(" "+e._s(e.config.secondary.resource)+" ")])]:e._e(),e.isUnlocked&&!e.isRunning?i("span",[i("br"),e._v("Double click to start")]):e.isRunning?i("span",[i("br"),e._v("Currently Running")]):e._e()],2)},fje=[],pje=K(dje,hje,fje,!1,null,"a0e332fa");const r2=pje.exports,mje={name:"EnslavedTimeStudy",props:{setup:{type:Object,required:!0}},data(){return{isVisible:player.celestials.enslaved.hasSecretStudy}},computed:{enslavedTT:()=>100,styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"l-time-study":!0,"o-time-study":!0,"o-time-study--bought":!0,"o-time-study-normal":!0,"o-time-study-normal--bought":!0,"o-time-study--enslaved":!0,"o-time-study--enslaved-unlocked":this.isVisible}}},methods:{update(){this.isVisible=Enslaved.isRunning&&player.celestials.enslaved.hasSecretStudy},handleClick(){!Enslaved.isRunning||player.celestials.enslaved.hasSecretStudy||(player.celestials.enslaved.hasSecretStudy=!0,EnslavedProgress.secretStudy.giveProgress(),Currency.timeTheorems.add(this.enslavedTT))}}};var yje=function(){var e=this,i=e._self._c;return i("button",{ref:"study",class:e.classObject,style:e.styleObject,on:{click:e.handleClick}},[i("span",[e._v(" ... you ... have great potential ... "),i("br"),i("br"),e._v(" Cost: "+e._s(e.format(-e.enslavedTT))+" Time Theorems ")])])},gje=[],vje=K(mje,yje,gje,!1,null,"fe391706");const bje=vje.exports,_je={name:"HiddenTimeStudyConnection",props:{setup:{type:Object,required:!0},isEnslaved:{type:Boolean,required:!1,default:!1}},data(){return{isVisible:!1}},computed:{classObject(){return{"o-time-study-connection":!0,"o-time-study-connection--bought":!0,"o-time-study-connection--secret":!0,"o-time-study-connection--secret-unlocked":this.isVisible}}},methods:{update(){this.isVisible=this.isEnslaved?Enslaved.isRunning&&player.celestials.enslaved.hasSecretStudy:player.secretUnlocks.viewSecretTS},percents(t){return`${t*100}%`}}};var Eje=function(){var e=this,i=e._self._c;return i("line",{class:e.classObject,attrs:{x1:e.percents(e.setup.x1),y1:e.percents(e.setup.y1),x2:e.percents(e.setup.x2),y2:e.percents(e.setup.y2)}})},Tje=[],wje=K(_je,Eje,Tje,!1,null,"7b3dd00d");const Cje=wje.exports,Sje={name:"NormalTimeStudy",components:{DescriptionDisplay:Qs,EffectDisplay:lo,HintText:gc,TimeStudyButton:IT},props:{setup:{type:Object,required:!0}},data:()=>({showCost:!0,showSTCost:!1}),computed:{study(){return this.setup.study},hintText(){const t=this.study.id;if(!this.setup.path)return t;const e=NormalTimeStudies.pathList.find(i=>i.path===this.setup.path);return`${t} ${e.name}`},isUseless(){return Pelle.uselessTimeStudies.includes(this.study.id)&&Pelle.isDoomed}},methods:{update(){this.showCost=this.study.id!==192||!Enslaved.isRunning,this.showSTCost=VUnlocks.vAchievementUnlock.isUnlocked&&!TimeStudy(this.study.id).isBought&&TimeStudy(this.study.id).costsST()&&!Pelle.isDoomed}}};var kje=function(){var e=this,i=e._self._c;return i("TimeStudyButton",{attrs:{setup:e.setup,"show-cost":e.showCost,"show-st-cost":e.showSTCost}},[i("HintText",{staticClass:"l-hint-text--time-study",attrs:{type:"studies"}},[e._v(" "+e._s(e.hintText)+" ")]),i("span",{class:{"o-pelle-disabled":e.isUseless}},[i("DescriptionDisplay",{attrs:{config:e.study.config}}),i("EffectDisplay",{attrs:{br:"",config:e.study.config}})],1)],1)},Aje=[],Rje=K(Sje,kje,Aje,!1,null,"2e003f1c");const s2=Rje.exports,Ije={name:"SecretTimeStudy",props:{setup:{type:Object,required:!0}},data(){return{isVisible:player.secretUnlocks.viewSecretTS}},computed:{styleObject(){return{top:`${this.setup.top}rem`,left:`${this.setup.left}rem`}},classObject(){return{"l-time-study":!0,"o-time-study":!0,"o-time-study--bought":!0,"o-time-study-normal":!0,"o-time-study-normal--bought":!0,"o-time-study--secret":!this.isVisible,"o-time-study--secret-unlocked":this.isVisible}}},methods:{update(){this.isVisible=player.secretUnlocks.viewSecretTS},handleClick(){if(this.isVisible){const t=Date.now();t-ui.lastClickTime<750?(ui.lastClickTime=0,player.secretUnlocks.viewSecretTS=!1):ui.lastClickTime=t}else ui.lastClickTime=0,player.secretUnlocks.viewSecretTS||(player.secretUnlocks.viewSecretTS=!0,this.$refs.study.addEventListener("transitionend",function t(e){SecretAchievement(21).unlock(),e.target.removeEventListener(e.type,t)}))}}};var Dje=function(){var e=this,i=e._self._c;return i("button",{ref:"study",class:e.classObject,style:e.styleObject,on:{click:e.handleClick}},[e._m(0)])},xje=[function(){var t=this,e=t._self._c;return e("span",[t._v(" Unlock a Secret Achievement "),e("br"),e("br"),t._v(" (Double click to hide) ")])}],Mje=K(Ije,Dje,xje,!1,null,"f42259c7");const Pje=Mje.exports,Oje={name:"TriadTimeStudy",components:{DescriptionDisplay:Qs,EffectDisplay:lo,HintText:gc,TimeStudyButton:IT},props:{setup:{type:Object,required:!0}},computed:{study(){return this.setup.study},id(){return this.study.id},config(){return this.study.config}}};var Nje=function(){var e=this,i=e._self._c;return i("TimeStudyButton",{staticClass:"o-time-study--triad",attrs:{setup:e.setup,"show-st-cost":!0}},[i("HintText",{staticClass:"l-hint-text--time-study",attrs:{type:"studies"}},[e._v(" "+e._s(e.id)+" Triad ")]),i("DescriptionDisplay",{attrs:{config:e.study.config}}),i("EffectDisplay",{attrs:{br:"",config:e.study.config}})],1)},Gje=[],Uje=K(Oje,Nje,Gje,!1,null,"e6ce1e32");const a2=Uje.exports,Lje={name:"TimeStudiesTab",components:{PrimaryButton:yt,NormalTimeStudy:s2,ECTimeStudy:r2,EnslavedTimeStudy:bje,DilationTimeStudy:n2,TriadTimeStudy:a2,SecretTimeStudy:Pje,TimeStudyConnection:OEe,HiddenTimeStudyConnection:Cje},data(){return{respec:player.respec,layoutType:{},vLevel:0,renderedStudyCount:0,renderedConnectionCount:0,isEnslaved:!1,delayTimer:0}},computed:{layout(){return Dm.create(this.layoutType)},allStudies(){return this.layout.studies},studies(){return this.allStudies.slice(0,this.renderedStudyCount)},allConnections(){return this.layout.connections},connections(){return this.allConnections.slice(0,this.renderedConnectionCount)},treeStyleObject(){return{width:`${this.layout.width}rem`,height:`${this.layout.height}rem`}},respecClassObject(){return{"o-primary-btn--subtab-option":!0,"o-primary-btn--respec-active":this.respec}}},watch:{respec(t){player.respec=t},vLevel(){this.$recompute("layout")}},created(){const t=()=>{let e=!1;this.renderedStudyCount<this.allStudies.length&&(this.renderedStudyCount+=2,e=!0),this.renderedConnectionCount<this.allConnections.length&&(this.renderedConnectionCount+=2,e=!0),e&&(this.renderAnimationId=requestAnimationFrame(t))};t(),this.on$(GAME_EVENT.REALITY_RESET_AFTER,()=>{this.delayTimer=player.celestials.enslaved.hasSecretStudy?Date.now():0}),document.body.scrollTop=0},beforeDestroy(){cancelAnimationFrame(this.renderAnimationId)},methods:{update(){this.respec=player.respec,this.layoutType=Dm.current,this.vLevel=Ra.pets.v.level,this.isEnslaved=Enslaved.isRunning||Date.now()-this.delayTimer<1e3},studyComponent(t){switch(t.type){case TIME_STUDY_TYPE.NORMAL:return s2;case TIME_STUDY_TYPE.ETERNITY_CHALLENGE:return r2;case TIME_STUDY_TYPE.DILATION:return n2;case TIME_STUDY_TYPE.TRIAD:return a2}throw"Unknown Time Study type"},exportStudyTree(){player.timestudy.studies.length===0?GameUI.notify.error("You cannot export an empty Time Study Tree!"):(copyToClipboard(GameCache.currentStudyTree.value.exportString),GameUI.notify.info("Exported current Time Studies to your clipboard"))}}};var Bje=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-time-studies-tab"},[i("div",{staticClass:"c-subtab-option-container"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.exportStudyTree}},[e._v(" Export tree ")]),i("PrimaryButton",{class:e.respecClassObject,on:{click:function(n){e.respec=!e.respec}}},[e._v(" Respec Time Studies on next Eternity ")]),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",attrs:{onclick:"Modal.studyString.show({ id: -1 })"}},[e._v(" Import tree ")])],1),i("div",{staticClass:"l-time-study-tree l-time-studies-tab__tree",style:e.treeStyleObject},[e._l(e.studies,function(n){return i(e.studyComponent(n.study),{key:n.study.type.toString()+n.study.id.toString(),tag:"component",attrs:{setup:n}})}),i("SecretTimeStudy",{attrs:{setup:e.layout.secretStudy}}),e.isEnslaved?i("EnslavedTimeStudy",{attrs:{setup:e.layout.enslavedStudy}}):e._e(),i("svg",{staticClass:"l-time-study-connection",style:e.treeStyleObject},[e._l(e.connections,function(n,r){return i("TimeStudyConnection",{key:"connection"+r,attrs:{setup:n}})}),i("HiddenTimeStudyConnection",{attrs:{setup:e.layout.secretStudyConnection}}),e.isEnslaved?i("HiddenTimeStudyConnection",{attrs:{setup:e.layout.enslavedStudyConnection,"is-enslaved":e.isEnslaved}}):e._e()],2)],2)])},Fje=[],$je=K(Lje,Bje,Fje,!1,null,"ccd879de");const Hje=$je.exports,Vje={name:"VUnlockRequirement",props:{dbEntry:{type:Object,required:!0}},data(){return{resource:new Decimal(0),progress:0}},computed:{barProgressStyle(){return{background:this.progress===1?"var(--color-v--base)":"#6b5f2e",width:`${100*this.progress}%`}},textStyle(){return{color:this.progress===1?"black":"var(--color-text)","border-color":"var(--color-text)"}}},methods:{update(){this.resource.copyFrom(new Decimal(this.dbEntry.resource())),this.progress=Math.clampMax(this.dbEntry.progress(),1)}}};var qje=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-v-unlock-bar",style:e.textStyle},[i("div",{staticClass:"c-v-unlock-bar__progress",style:e.barProgressStyle}),e._v(" "+e._s(e.dbEntry.format(e.resource))+" / "+e._s(e.dbEntry.format(e.dbEntry.requirement))+" "+e._s(e.dbEntry.name)+" ")])},Yje=[],Wje=K(Vje,qje,Yje,!1,null,null);const jje=Wje.exports,zje={name:"VTab",components:{CelestialQuoteHistory:ip,VUnlockRequirement:jje,PrimaryButton:yt,GlyphSetPreview:Zf},data(){return{mainUnlock:!1,canUnlockCelestial:!1,totalUnlocks:0,pp:0,showReduction:!1,runRecords:[],runGlyphs:[],isFlipped:!1,wantsFlipped:!0,isRunning:!1,hasAlchemy:!1}},computed:{mainUnlockDB:()=>GameDatabase.celestials.v.mainUnlock,celestialUnlockClassObject(){return{"o-v-milestone":!0,"o-v-milestone--unlocked":this.canUnlockCelestial,"c-v-unlock-button--enabled":this.canUnlockCelestial}},hexGrid(){return this.isFlipped&&this.wantsFlipped?[VRunUnlocks.all[6],{},{},{},{isRunButton:!0},VRunUnlocks.all[7],VRunUnlocks.all[8],{},{}]:[VRunUnlocks.all[0],VRunUnlocks.all[1],{},VRunUnlocks.all[5],{isRunButton:!0},VRunUnlocks.all[2],VRunUnlocks.all[4],VRunUnlocks.all[3],{}]},vUnlock:()=>VUnlocks.vAchievementUnlock,runMilestones(){return[[VUnlocks.shardReduction,VUnlocks.adPow,VUnlocks.fastAutoEC],[VUnlocks.autoAutoClean,VUnlocks.achievementBH,VUnlocks.raUnlock]]},runButtonClassObject(){return{"l-v-hexagon":!0,"c-v-run-button":!0,"c-v-run-button--running":this.isRunning,"c-celestial-run-button--clickable":!this.isDoomed,"o-pelle-disabled-pointer":this.isDoomed}},runDescription(){return GameDatabase.celestials.descriptions[3].effects().replace(/^\w/u,t=>t.toUpperCase())},isDoomed:()=>Pelle.isDoomed},methods:{update(){this.mainUnlock=VUnlocks.vAchievementUnlock.isUnlocked,this.canUnlockCelestial=V.canUnlockCelestial,this.totalUnlocks=V.spaceTheorems,this.pp=Currency.perkPoints.value,this.showReduction=VUnlocks.shardReduction.isUnlocked,this.runRecords=Array.from(player.celestials.v.runRecords),this.runGlyphs=player.celestials.v.runGlyphs.map(t=>Glyphs.copyForRecords(t)),this.isFlipped=V.isFlipped,this.wantsFlipped=player.celestials.v.wantsFlipped,this.isRunning=V.isRunning,this.hasAlchemy=Ra.unlocks.unlockGlyphAlchemy.canBeApplied},unlockCelestial(){V.canUnlockCelestial&&V.unlockCelestial()},startRun(){this.isDoomed||Modal.celestials.show({name:"V's",number:3})},has(t){return t.isUnlocked},mode(t){return t.config.mode===bo.SUBTRACTION?"reduced":"divided"},reductionValue(t){return t.config.mode===bo.SUBTRACTION?formatInt(t.reduction):format(Decimal.pow10(t.reduction))},showRecord(t){return this.runRecords[t.id]>0||t.completions>0},reduceGoals(t){if(!Currency.perkPoints.purchase(t.reductionCost))return;const e=t.config.reductionStepSize?t.config.reductionStepSize:1;player.celestials.v.goalReductionSteps[t.id]+=e;for(const i of VRunUnlocks.all)i.tryComplete();V.checkForUnlocks()},reductionTooltip(t){return`Spend ${quantify("Perk Point",t.reductionCost,2,0)}
        to reduce goal by ${format(t.config.perReductionStep)}`},hexColor(t){const e=t.completions,i=t.config.values.length;if(e===i)return"var(--color-v--base)";const n=255-5*e,r=255-10*e,s=255-20*e;return`rgb(${n},${r},${s})`},toggleFlipped(){player.celestials.v.wantsFlipped=!this.wantsFlipped},createCursedGlyph(){Glyphs.giveCursedGlyph()}}};var Xje=function(){var e=this,i=e._self._c;return i("div",{staticClass:"l-v-celestial-tab"},[i("CelestialQuoteHistory",{attrs:{celestial:"v"}}),e.mainUnlock?i("div",[e.isFlipped?i("div",{staticClass:"c-v-info-text"},[i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option",on:{click:e.toggleFlipped}},[e.wantsFlipped?i("span",[e._v("Hide")]):i("span",[e._v("Show")]),e._v(" Hard V ")]),i("PrimaryButton",{staticClass:"o-primary-btn--subtab-option l-cursed-glyph-creation",on:{click:e.createCursedGlyph}},[e._v(" Create a Cursed Glyph ")]),i("br"),e._v(" Cursed Glyphs can be created here or in the Effarig tab. "),i("br"),e._v(" Cursed Glyphs count as "+e._s(e.formatInt(-3))+" Glyphs for the purposes of all requirements related to Glyph count. "),i("br"),e.isDoomed?e._e():i("span",[e._v("The Black Hole can now be used to slow down time if they are both permanent.")]),i("br"),i("br"),e._v(" Each Hard V-Achievement counts as two V-Achievements and will award "+e._s(e.formatInt(2))+" Space Theorems instead of "+e._s(e.formatInt(1))+". "),i("br"),e._v(" Goal reduction is significantly more expensive for Hard V-Achievements. ")],1):e._e(),e.showReduction?i("div",{staticClass:"c-v-info-text"},[e._v(" You have "+e._s(e.quantify("Perk Point",e.pp,2,0))+". ")]):e._e(),i("div",{staticClass:"l-v-unlocks-container"},e._l(e.hexGrid,function(n,r){return i("li",{key:r+"-v-hex",style:[n.isRunButton?{zIndex:1}:{zIndex:0}]},[n.config?i("div",{staticClass:"l-v-hexagon c-v-unlock",style:"background-color: "+e.hexColor(n)},[i("p",{staticClass:"o-v-unlock-name"},[n.canBeReduced&&e.showReduction?i("br"):e._e(),e._v(e._s(n.config.name)+" ")]),i("p",{staticClass:"o-v-unlock-desc",domProps:{innerHTML:e._s(n.formattedDescription)}}),e.has(e.runMilestones[0][0])&&n.isReduced?i("p",{staticClass:"o-v-unlock-goal-reduction"},[e._v(" Goal has been "+e._s(e.mode(n))+" by "+e._s(e.reductionValue(n))+" ")]):e._e(),i("p",{staticClass:"o-v-unlock-amount"},[e._v(" "+e._s(e.formatInt(n.completions))+"/"+e._s(e.formatInt(n.config.values.length))+" done ")]),e.showRecord(n)?i("div",[i("p",{staticClass:"o-v-unlock-record"},[e._v(" Best: "+e._s(n.config.formatRecord(e.runRecords[n.id]))+" ")]),i("p",[i("GlyphSetPreview",{attrs:{glyphs:e.runGlyphs[n.id],text:n.config.name,"text-hidden":!0}})],1),n.canBeReduced&&e.showReduction?i("div",[i("div",{staticClass:"l-v-goal-reduction-spacer"}),i("button",{staticClass:"o-primary-btn l-v-reduction",class:{"o-primary-btn--disabled":!n.canBeReduced||e.pp<n.reductionCost},attrs:{"ach-tooltip":e.reductionTooltip(n)},on:{click:function(s){return e.reduceGoals(n)}}},[i("i",{staticClass:"fas fa-angle-double-down"})])]):e._e()]):e._e()]):n.isRunButton?i("div",{class:e.runButtonClassObject,on:{click:function(s){return e.startRun()}}},[i("b",{staticClass:"o-v-start-text",class:{"o-pelle-disabled":e.isDoomed}},[e.isRunning?i("span",[e._v("You are in ")]):i("span",[e._v("Start ")]),e._v(" V's Reality. ")]),i("br"),i("div",{style:{"font-size":e.hasAlchemy?"1.2rem":""}},[e._v(" "+e._s(e.runDescription)+" ")]),i("div",{staticClass:"c-v-run-button__line c-v-run-button__line--1"}),i("div",{staticClass:"c-v-run-button__line c-v-run-button__line--2"}),i("div",{staticClass:"c-v-run-button__line c-v-run-button__line--3"})]):i("div",[i("div",{staticClass:"l-v-hexagon l-placeholder-invisible"})])])}),0),i("div",{staticClass:"c-v-info-text"},[e._v(" V-Achievements can only be completed within V's Reality, but are permanent and do not reset upon leaving and re-entering the Reality. ")]),i("div",{staticClass:"c-v-info-text"},[e._v(" You have "+e._s(e.formatInt(e.totalUnlocks))+" V-Achievements done. "),e.isDoomed?e._e():i("span",[e._v(" You gain "+e._s(e.formatInt(1))+" Space Theorem for each completion, allowing you to purchase Time Studies which are normally locked. "),i("br"),e._v(" Space Theorems can also be used as a Currency in the Automator. ")])]),i("br"),i("div",{staticClass:"l-v-milestones-grid"},e._l(e.runMilestones,function(n,r){return i("div",{key:r+"-v-ms-row",staticClass:"l-v-milestones-grid__row"},e._l(n,function(s,a){return i("div",{key:a+r*10+"-v-ms",staticClass:"o-v-milestone",class:{"o-v-milestone--unlocked":e.has(s)}},[i("div",{class:{"o-pelle-disabled":e.isDoomed}},[i("p",[e._v(e._s(s.description))]),i("p",[e._v("Reward: "+e._s(s.rewardText))]),s.formattedEffect?i("p",[e._v(" Currently: "),i("b",[e._v(e._s(s.formattedEffect))])]):e._e()])])}),0)}),0)]):i("div",{staticClass:"c-v-info-text"},[e._l(e.mainUnlockDB,function(n){return i("v-unlock-requirement",{key:n.name,attrs:{"db-entry":n}})}),i("div",{staticClass:"l-v-milestones-grid__row"},[i("div",{class:e.celestialUnlockClassObject,on:{click:e.unlockCelestial}},[i("p",[e._v(e._s(e.vUnlock.description))]),i("p",[e._v(e._s(e.vUnlock.rewardText))])])])],2)],1)},Kje=[],Zje=K(zje,Xje,Kje,!1,null,"d238a752");const Qje=Zje.exports,Jje={AntimatterDimensionsTab:QUe,InfinityDimensionsTab:_6e,TimeDimensionsTab:aje,OptionsSavingTab:Iqe,OptionsVisualTab:eYe,OptionsGameplayTab:pqe,StatisticsTab:uWe,ChallengeRecordsTab:C$e,PastPrestigeRunsTab:dYe,GlyphSetRecordsTab:Q3e,SpeedrunMilestonesTab:rWe,PreviousSpeedrunTab:_8e,NormalAchievementsTab:XVe,SecretAchievementTab:G9e,TeresaTab:_We,EffarigTab:V$e,EnslavedTab:z$e,VTab:Qje,RaTab:Y8e,LaitelaTab:yVe,PelleTab:s8e,AutobuyersTab:yBe,AutomatorTab:VBe,NormalChallengesTab:sqe,InfinityChallengesTab:XHe,EternityChallengesTab:T3e,InfinityUpgradesTab:D6e,BreakInfinityTab:UFe,ReplicantiTab:E9e,TimeStudiesTab:Hje,EternityUpgradesTab:j3e,EternityMilestonesTab:M3e,TimeDilationTab:NWe,GlyphsTab:SHe,RealityUpgradesTab:t9e,ImaginaryUpgradesTab:NHe,PerksTab:QL,BlackHoleTab:wFe,AlchemyTab:qGe,CelestialNavigationTab:p$e,ShopTab:z9e,MultiplierBreakdownTab:IVe},dg={entries:[{name:"Windows Media Player",action(){const t=["https://www.youtube.com/watch?v=dQw4w9WgXcQ","https://youtu.be/rP42C-4zL3w?t=2","https://www.youtube.com/watch?v=fTaWKbD3UK8","https://www.youtube.com/watch?v=fLbP6qpI1YI"];window.open(t[Math.floor(Math.random()*t.length)])},image:"desktop--windows-media-player.png"},{name:"Discord",action(){window.open("https://discord.gg/ST9NaXa")},image:"desktop--discord-logo.png"},{name:"Games",action(){Modal.s12Games.show()},image:"desktop--games.png"}],selected:-1};let uC=!1;const eze={name:"DesktopIcons",data(){return{DesktopIcons:dg}},mounted(){document.body.addEventListener("click",this.clearSelected)},beforeDestroy(){document.body.removeEventListener("click",this.clearSelected),this.clearSelected()},methods:{clearSelected(){uC||(dg.selected=-1)},handleClick(t){dg.selected!==t?(dg.selected=t,uC=!0,setTimeout(()=>uC=!1,0)):dg.entries[t].action()}}};var tze=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-s12-desktop-icons-container"},e._l(e.DesktopIcons.entries,function(n,r){return i("div",{key:n.name,staticClass:"c-s12-desktop-icon",class:{"c-s12-desktop-icon--selected":e.DesktopIcons.selected===r},on:{click:function(s){return e.handleClick(r)}}},[i("div",{staticClass:"c-s12-desktop-icon__inner"},[i("img",{staticClass:"c-s12-desktop-icon__img",attrs:{src:`/images/s12/${n.image}`}}),i("div",{staticClass:"c-s12-desktop-icon__text"},[e._v(" "+e._s(n.name)+" ")])])])}),0)},ize=[],nze=K(eze,tze,ize,!1,null,"950bd5e2");const rze=nze.exports;let o2;const Id={isMinimised:!1,tabs:{hoveringTab:void 0,setHoveringTab(t){this.hoveringTab=t.id,clearTimeout(o2)},unsetHoveringTab(t=!1){if(t){this.hoveringTab=void 0;return}o2=setTimeout(()=>this.hoveringTab=void 0,1e3)},tabButtonPositions:[]}},sze={name:"S12Ui",components:{BigCrunchButton:GR,HeaderChallengeDisplay:LR,HeaderChallengeEffects:BR,NewsTicker:$R,HeaderBlackHole:UR,HeaderPrestigeGroup:FR,GameSpeedDisplay:GT,GameUiComponentFixed:t4,BackgroundAnimations:q5},data(){return{bigCrunch:!1,hasReality:!1,newGameKey:"",tabName:"",S12Windows:Id}},computed:{news(){return this.$viewModel.news},topPadding(){return this.$viewModel.news?"":"padding-top: 3.9rem"},isOldUi(){return!this.$viewModel.newUI}},methods:{update(){const t=!player.break&&Player.canCrunch;this.bigCrunch=t&&Time.bestInfinityRealTime.totalMinutes>1,this.hasReality=PlayerProgress.realityUnlocked(),this.newGameKey=Pelle.isDoomed,this.tabName=Tabs.current[this.$viewModel.subtab].name}}};var aze=function(){var e=this,i=e._self._c;return i("div",{staticClass:"c-s12-window__outer",class:e.S12Windows.isMinimised?"c-s12-window__outer--minimised":"",attrs:{id:"page"}},[i("link",{attrs:{rel:"stylesheet",type:"text/css",href:e.isOldUi?"stylesheets/old-ui.css":"stylesheets/new-ui-styles.css"}}),i("span",{staticClass:"c-s12-close-button",on:{click:function(n){e.S12Windows.isMinimised=!0}}}),i("span",{staticClass:"c-modal__title"},[e._v(" "+e._s(e.tabName)+" ")]),i("div",{key:e.newGameKey,staticClass:"game-container c-s12-window__inner",class:e.isOldUi?"c-old-ui l-old-ui":"",style:e.topPadding},[i("GameUiComponentFixed"),i("BackgroundAnimations"),i("div",{staticClass:"c-s12-window__content-container"},[e.news?i("NewsTicker"):e._e(),i("BigCrunchButton"),e.bigCrunch?e._e():i("div",{staticClass:"tab-container"},[i("HeaderPrestigeGroup"),i("div",{staticClass:"information-header"},[i("HeaderChallengeDisplay"),i("HeaderChallengeEffects"),e.hasReality?i("GameSpeedDisplay"):e._e(),e.hasReality?i("br"):e._e(),i("HeaderBlackHole")],1),e._t("default")],2)],1)],1)])},oze=[],lze=K(sze,aze,oze,!1,null,"57cd7965");const cze=lze.exports,uze={name:"S12Subtabs",props:{tab:{type:Object,required:!0}},data(){return{isAvailable:!0,isHidden:!1,subtabVisibilities:[],tabName:"",S12Windows:Id,windowWidth:0,left:"0px",useCompact:!1}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.isHidden=this.tab.isHidden,this.subtabVisibilities=this.tab.subtabs.map(t=>t.isAvailable),this.windowWidth=window.innerWidth,this.useCompact=this.subtabVisibilities.reduce((t,e)=>t+e)*180>window.innerWidth-10,this.left=this.getSubtabsPosition()},isCurrentSubtab(t){return player.options.lastOpenSubtab[this.tab.id]===t&&!Id.isMinimised},getSubtabsPosition(){if(!this.$refs.subtabs)return"0px";const t=Id.tabs.tabButtonPositions[this.tab.id],i=5+this.$refs.subtabs.offsetWidth/2,n=this.windowWidth-i;return this.isAvailable,this.isHidden,`${Math.clamp(t,i,n)}px`}}};var dze=function(){var e=this,i=e._self._c;return i("div",{ref:"subtabs",staticClass:"c-s12-subtabs",class:{"c-s12-subtabs--show":e.S12Windows.tabs.hoveringTab===e.tab.id,"c-s12-subtabs--compact":e.useCompact},style:{left:e.left},on:{mouseenter:function(n){return e.S12Windows.tabs.setHoveringTab(e.tab)},mouseleave:function(n){return e.S12Windows.tabs.unsetHoveringTab()}}},[e._l(e.tab.subtabs,function(n,r){return[e.subtabVisibilities[r]?i("div",{key:r,staticClass:"c-s12-subtab-btn",class:{"c-s12-subtab-btn--active":e.isCurrentSubtab(n.id)},on:{click:function(s){n.show(!0),e.S12Windows.isMinimised=!1,e.S12Windows.tabs.unsetHoveringTab(!0)}}},[i("span",{staticClass:"c-s12-subtab-btn__text"},[e.useCompact?i("span",{staticClass:"c-s12-subtab-btn__symbol--small",domProps:{innerHTML:e._s(n.symbol)}}):e._e(),e._v(" "+e._s(n.name)+" ")]),e.useCompact?e._e():i("span",{staticClass:"c-s12-subtab-btn__symbol",domProps:{innerHTML:e._s(n.symbol)}}),n.hasNotification?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()]):e._e()]})],2)},hze=[],fze=K(uze,dze,hze,!1,null,"3233322d");const pze=fze.exports,mze={name:"TaskbarIcon",props:{tab:{type:Object,required:!0},tabPosition:{type:Number,required:!0}},data(){return{isAvailable:!0,isHidden:!1,hasNotification:!1,tabName:"",S12Windows:Id}},computed:{isCurrentTab(){return this.tab.isOpen&&!Id.isMinimised}},methods:{update(){this.isAvailable=this.tab.isAvailable,this.isHidden=this.tab.isHidden,this.hasNotification=this.tab.hasNotification,this.tabPosition<Pelle.endTabNames.length?this.tabName=Pelle.transitionText(this.tab.name,Pelle.endTabNames[this.tabPosition],Math.clamp(GameEnd.endState-this.tab.id%4/10,0,1)):this.tabName=this.tab.name,Id.tabs.tabButtonPositions[this.tab.id]=this.getSubtabsPosition()},getSubtabsPosition(){return this.$refs.taskbarIcon?this.$refs.taskbarIcon.offsetLeft+this.$refs.taskbarIcon.offsetWidth/2:"0px"}}};var yze=function(){var e=this,i=e._self._c;return i("div",{ref:"taskbarIcon",class:{"c-taskbar-icon":!0,"c-taskbar-icon--active":e.isCurrentTab},attrs:{title:e.tab.name},on:{mouseenter:function(n){return e.S12Windows.tabs.setHoveringTab(e.tab)},mouseleave:function(n){return e.S12Windows.tabs.unsetHoveringTab()},click:function(n){e.tab.show(!0),e.S12Windows.isMinimised=!1,e.S12Windows.tabs.unsetHoveringTab(!0)}}},[i("img",{staticClass:"c-taskbar-icon__image",attrs:{src:`/images/s12/${e.tab.key}.png`}}),e.hasNotification?i("div",{staticClass:"fas fa-circle-exclamation l-notification-icon"}):e._e()])},gze=[],vze=K(mze,yze,gze,!1,null,"e1b6823b");const bze=vze.exports,_ze=""+new URL("../images/s12/win7-start-menu-inactive.png",import.meta.url).href,Eze=new Audio("audio/s12-startup.mp3"),Tze={name:"S12Taskbar",components:{TaskbarIcon:bze,S12Subtabs:pze},data(){return{isHidden:!1,tabVisibilities:[],S12Windows:Id,startupSound:Eze}},computed:{tabs:()=>Tabs.newUI},methods:{update(){this.isHidden=AutomatorData.isEditorFullscreen,this.tabVisibilities=Tabs.newUI.map(t=>!t.isHidden&&t.isAvailable)}}};var wze=function(){var e=this,i=e._self._c;return e.isHidden?e._e():i("span",[i("div",{staticClass:"c-taskbar"},[i("img",{staticClass:"c-start-icon",attrs:{src:_ze},on:{click:function(n){return e.startupSound.play()}}}),e._l(e.tabs,function(n,r){return[e.tabVisibilities[r]?i("TaskbarIcon",{key:n.name,attrs:{tab:n,"tab-position":r}}):e._e()]}),i("div",{staticClass:"c-s12-show-desktop",on:{click:function(n){e.S12Windows.isMinimised=!0}}})],2),e._l(e.tabs,function(n,r){return[e.tabVisibilities[r]?i("S12Subtabs",{key:n.name,attrs:{tab:n}}):e._e()]})],2)},Cze=[],Sze=K(Tze,wze,Cze,!1,null,"25ab85c0");const kze=Sze.exports,Aze={name:"S12UiFixed",components:{PopupModal:J5,ModalProgressBar:Z5,CelestialQuoteModal:z5,CelestialQuoteHistoryDisplay:j5,FadeAway:K5,CreditsContainer:X5,SpectateGame:e4,NewGame:Q5,S12Taskbar:kze},data(){return{ending:!1}},computed:{view(){return this.$viewModel}},methods:{update(){this.ending=GameEnd.endState>=END_STATE_MARKERS.FADE_AWAY&&!GameEnd.creditsClosed}}};var Rze=function(){var e=this,i=e._self._c;return i("span",[i("div",{staticClass:"c-game-ui--fixed"},[e.view.modal.progressBar?i("ModalProgressBar"):e.view.quotes.current?i("CelestialQuoteModal",{attrs:{quote:e.view.quotes.current}}):e.view.quotes.history?i("CelestialQuoteHistoryDisplay",{attrs:{quotes:e.view.quotes.history}}):e.view.modal.current?i("PopupModal",{attrs:{modal:e.view.modal.current}}):e._e(),e.ending?i("FadeAway"):e._e(),e.ending?i("CreditsContainer"):e._e(),e.ending?i("NewGame"):e._e(),i("SpectateGame")],1),i("S12Taskbar")],1)},Ize=[],Dze=K(Aze,Rze,Ize,!1,null,"a0bd9078");const xze=Dze.exports,Mze={name:"GameUIComponent",components:{...Jje,ClassicUi:hNe,ModernUi:mGe,GameUiComponentFixed:t4,BackgroundAnimations:q5,S12Ui:cze,S12UiFixed:xze,S12DesktopIcons:rze},computed:{view(){return this.$viewModel},isThemeS12(){return this.view.theme==="S12"},uiLayout(){return this.isThemeS12?"S12Ui":this.view.newUI?"ModernUi":"ClassicUi"},containerClass(){return this.view.newUI?"new-ui":"old-ui"},page(){return Tabs.current[this.$viewModel.subtab].config.component},themeCss(){return`stylesheets/theme-${this.view.theme}.css`}}};var Pze=function(){var e=this,i=e._self._c;return e.view.initialized?i("div",{staticClass:"ui-wrapper",class:e.containerClass,attrs:{id:"ui-container"}},[i("div",{staticClass:"c-game-ui",attrs:{id:"ui"}},[i(e.uiLayout,{tag:"component"},[i(e.page,{tag:"component",staticClass:"c-game-tab"})],1),e.isThemeS12?i("S12DesktopIcons"):e._e(),e.view.theme!=="Normal"?i("link",{attrs:{type:"text/css",rel:"stylesheet",href:e.themeCss}}):e._e()],1),e.isThemeS12?e._e():i("GameUiComponentFixed"),e.isThemeS12?e._e():i("BackgroundAnimations"),e.isThemeS12?i("S12UiFixed"):e._e()],1):e._e()},Oze=[],Nze=K(Mze,Pze,Oze,!1,null,"f8d85e37");const l2=Nze.exports;Vue.mixin({computed:{$viewModel(){return H5.view}},created(){this.update&&(this.on$(GAME_EVENT.UPDATE,this.update),Hl.initialized&&this.update());const t=Object.create(null),e=this._computedWatchers;if(e){for(const i in e)Gze(e[i],i,t);this.$recompute=i=>t[i]=!t[i],Vue.observable(t)}},destroyed(){EventHub.ui.offAll(this)},updated(){Xv(this.$el)},methods:{emitClick(){this.$emit("click")},emitInput(t){this.$emit("input",t)},emitClose(){this.$emit("close")},on$(t,e){EventHub.ui.on(t,e,this)},format,formatInt,formatPercents,formatRarity,formatX,formatPow,formatPostBreak,pluralize,quantify,quantifyInt}});function Gze(t,e,i){const n=t.getter;i[e]=!0,t.getter=r=>(i[e],n.call(r,r))}const Uze={complain(){this.checkReactivity(player,"player")},checkReactivity(t,e){if(t!=null){if(t.__ob__!==void 0)throw new Error(`Boi you fukked up - ${e} became REACTIVE (oh shite)`);for(const i in t){if(!Object.prototype.hasOwnProperty.call(t,i))continue;const n=t[i];typeof n=="object"&&this.checkReactivity(n,`${e}.${i}`)}}}},Hl={notify:uMe,events:[],flushPromise:void 0,initialized:!1,globalClickListener:null,touchDevice:"ontouchstart"in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0||window.DocumentTouch&&document instanceof DocumentTouch,dispatch(t,e){const i=this.events.indexOf(t);i!==-1&&this.events.splice(i,1),t!==GAME_EVENT.UPDATE&&this.events.push([t,e]),!this.flushPromise&&(this.flushPromise=Promise.resolve().then(this.flushEvents.bind(this)))},flushEvents(){this.flushPromise=void 0,PerformanceStats.isOn&&PerformanceStats.currentBlocks.length>0&&(Vue.nextTick(()=>PerformanceStats.start("Vue Render")),PerformanceStats.start("Vue Update"));for(const t of this.events)EventHub.ui.dispatch(t[0],t[1]);EventHub.ui.dispatch(GAME_EVENT.UPDATE),Uze.complain(),PerformanceStats.isOn&&PerformanceStats.currentBlocks.length>0&&(PerformanceStats.end(),Vue.nextTick(()=>{PerformanceStats.end("Vue Render"),PerformanceStats.end("Frame Time"),PerformanceStats.render()})),this.events=[]},update(){this.dispatch(GAME_EVENT.UPDATE)}},Lze=function(){let t=0;return{next:()=>t++}}();my.options.defaultClass="general-tooltip";my.options.popover.defaultBaseClass="general-tooltip";my.options.defaultTemplate='<div role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>';Vue.use(my);(function(){const t=Vue.config.optionMergeStrategies.methods;Vue.config.optionMergeStrategies.methods=(e,i,n,r)=>{const s=t(e,i,n,r),a=o=>o&&o.update;return!a(e)||!a(i)||(s.update=function(){e.update.call(this),i.update.call(this)}),s}})();lMe(Vue);cMe(Vue);Vue.use(oMe,{config:{id:"UA-77268961-1"}});const Bze=new Vue({el:"#ui",components:{GameUIComponent:l2},data:H5,computed:{notation(){return Notations.find(this.notationName)},currentGlyphTooltip(){return this.view.tabs.reality.currentGlyphTooltip},scrollWindow(){return this.view.scrollWindow},newUI(){return this.view.newUI}},watch:{currentGlyphTooltip(t){t!==-1&&!Hl.globalClickListener?(Hl.globalClickListener=()=>{this.view.tabs.reality.currentGlyphTooltip=-1,document.removeEventListener("click",Hl.globalClickListener),Hl.globalClickListener=null},document.addEventListener("click",Hl.globalClickListener)):t===-1&&Hl.globalClickListener&&(document.removeEventListener("click",Hl.globalClickListener),Hl.globalClickListener=null)},scrollWindow(t,e){t!==0&&e===0&&this.scroll(Date.now())}},methods:{scroll(t){const e=Date.now();this.view.scrollWindow&&(window.scrollBy(0,this.view.scrollWindow*(e-t)/2),setTimeout(()=>this.scroll(e),20))}},render:t=>t(l2)});class Fze extends yn{constructor(e){super(e),this._row=Math.floor(this.id/10),this._column=this.id%10,this._bitmask=1<<this.column-1,this._inverseBitmask=~this._bitmask,this.registerEvents(e.checkEvent,i=>this.tryUnlock(i))}get name(){return this.config.name}get row(){return this._row}get column(){return this._column}get isPreReality(){return this.row<14}get isPrePelle(){return this.row<18}get isUnlocked(){return(player.achievementBits[this.row-1]&this._bitmask)!==0}get isDisabled(){return Pelle.isDisabled("achievements")&&Pelle.disabledAchievements.includes(this.id)}get isEffectActive(){return this.isUnlocked&&!this.isDisabled}tryUnlock(e){this.isUnlocked||this.config.checkRequirement(e)&&this.unlock()}lock(){player.achievementBits[this.row-1]&=this._inverseBitmask}unlock(e){this.isUnlocked||(player.achievementBits[this.row-1]|=this._bitmask,(this.id===85||this.id===93)&&Autobuyer.bigCrunch.bumpAmount(4),this.id===55&&!PlayerProgress.realityUnlocked()&&Modal.message.show(`Since you performed an Infinity in under a minute, the UI changed on the screen.
        Instead of the Dimensions disappearing, they stay and the Big Crunch button appears on top of them.
        This is purely visual, and is there to prevent flickering.`,{},3),(this.id===148||this.id===166)&&GameCache.staticGlyphWeights.invalidate(),e?GameUI.notify.reality(`Automatically unlocked: ${this.name}`):(GameUI.notify.success(`Achievement: ${this.name}`),gf.activateAchievement(this.id)),player.speedrun.isActive&&!player.speedrun.achievementTimes[this.id]&&(player.speedrun.achievementTimes[this.id]=Math.floor(player.records.realTimePlayed)),ar._power.invalidate(),EventHub.dispatch(GAME_EVENT.ACHIEVEMENT_UNLOCKED))}}const JS=Fze.createAccessor(GameDatabase.achievements.normal),ar={all:JS.index.compact(),get preReality(){return ar.all.filter(t=>t.isPreReality)},get prePelle(){return ar.all.filter(t=>t.isPrePelle)},get allRows(){const t=ar.all.map(e=>e.row).max();return ar.rows(1,t)},get preRealityRows(){const t=ar.preReality.map(e=>e.row).max();return ar.rows(1,t)},get prePelleRows(){const t=ar.prePelle.map(e=>e.row).max();return ar.rows(1,t)},rows:(t,e)=>Array.range(t,e).map(ar.row),row:t=>Array.range(t*10+1,8).map(JS),get effectiveCount(){return ar.all.countWhere(e=>e.isUnlocked)},get period(){return GameCache.achievementPeriod.value},autoAchieveUpdate(t){if(PlayerProgress.realityUnlocked()){if(!player.reality.autoAchieve||RealityUpgrade(8).isLockingMechanics){player.reality.achTimer=Math.clampMax(player.reality.achTimer+t,this.period);return}if(!ar.preReality.every(e=>e.isUnlocked)&&(player.reality.achTimer+=t,!(player.reality.achTimer<this.period))){for(const e of ar.preReality.filter(i=>!i.isUnlocked))if(e.unlock(!0),player.reality.achTimer-=this.period,player.reality.achTimer<this.period)break;player.reality.gainedAutoAchievements=!0}}},get timeToNextAutoAchieve(){return!PlayerProgress.realityUnlocked()||GameCache.achievementPeriod.value===0||ar.preReality.countWhere(t=>!t.isUnlocked)===0?0:this.period-player.reality.achTimer},_power:new Lazy(()=>{const t=ar.allRows.countWhere(n=>n.every(r=>r.isUnlocked)),e=Math.pow(1.25,t)*Math.pow(1.03,ar.effectiveCount),i=getAdjustedGlyphEffect("effarigachievement")*Ra.unlocks.achievementPower.effectOrDefault(1);return Math.pow(e,i)}),get power(){return Pelle.isDisabled("achievementMult")?1:ar._power.value},updateSteamStatus(){for(const t of ar.all.filter(e=>e.isUnlocked))gf.activateAchievement(t.id)}};EventHub.logic.on(GAME_EVENT.PERK_BOUGHT,()=>{player.reality.achTimer=Math.clampMax(player.reality.achTimer,ar.period)});class $ze extends yn{constructor(e){super(e),this._row=Math.floor(this.id/10),this._column=this.id%10,this._bitmask=1<<this.column-1,this._inverseBitmask=~this._bitmask,this.registerEvents(e.checkEvent,i=>this.tryUnlock(i))}get name(){return this.config.name}get row(){return this._row}get column(){return this._column}get isUnlocked(){return(player.secretAchievementBits[this.row-1]&this._bitmask)!==0}tryUnlock(e){this.isUnlocked||this.config.checkRequirement(e)&&this.unlock()}unlock(){this.isUnlocked||(player.secretAchievementBits[this.row-1]|=this._bitmask,GameUI.notify.success(`Secret Achievement: ${this.name}`),EventHub.dispatch(GAME_EVENT.ACHIEVEMENT_UNLOCKED))}lock(){player.secretAchievementBits[this.row-1]&=this._inverseBitmask}}const ek=$ze.createAccessor(GameDatabase.achievements.secret),P0={all:ek.index.compact(),get allRows(){const t=P0.all.map(e=>e.row).max();return P0.rows(1,t)},rows:(t,e)=>Array.range(t,e).map(P0.row),row:t=>Array.range(t*10+1,8).map(ek)};class t0{constructor(e){this.time=0,this.realTime=e}reset(){this.time=0}advance(){const e=this.realTime?Time.unscaledDeltaTime.totalSeconds:Time.deltaTime;this.time+=e}check(e,i){return e?(this.advance(),this.time>=i):(this.reset(),!1)}}const Hze={marathon1:new t0(!1),marathon2:new t0(!1),pain:new t0(!0),stats:new t0(!0)},y4=["powerpow","infinitypow","replicationpow","timepow","dilationpow","timeshardpow","powermult","powerdimboost","powerbuy10","dilationTTgen","infinityinfmult","infinityIP","timeEP","dilationDT","replicationdtgain","replicationspeed","timeetermult","dilationgalaxyThreshold","infinityrate","replicationglyphlevel","timespeed","effarigrm","effarigglyph","effarigblackhole","effarigachievement","effarigforgotten","effarigdimensions","effarigantimatter","cursedgalaxies","cursedtickspeed","curseddimensions","cursedEP","realityglyphlevel","realitygalaxies","realityrow1pow","realityDTglyph","companiondescription","companionEP"],Vze=["power","infinity","replication","time","dilation","effarig"],qze=y4.mapToObject(t=>t,(t,e)=>e);function g4(t){return t*2.5/100+1}function Yze(t){return(t-1)*100/2.5}const tc={inventory:[],active:[],unseen:[],unequipped:[],levelBoost:0,factorsOpen:!1,bestUndoGlyphCount:0,get inventoryList(){return player.reality.glyphs.inventory},get sortedInventoryList(){return this.inventoryList.sort((t,e)=>-t.level*t.strength+e.level*e.strength)},get activeList(){return player.reality.glyphs.active},get activeWithoutCompanion(){return this.activeList.filter(t=>t.type!=="companion")},get allGlyphs(){return this.inventoryList.concat(this.activeList)},get glyphIndexArray(){return this.inventory.filter(t=>t).map(t=>t.idx)},findFreeIndex(t){this.validate();const e=i=>t?i<this.protectedSlots:i>=this.protectedSlots;return this.inventory.findIndex((i,n)=>i===null&&e(n))},get freeInventorySpace(){return this.validate(),this.inventory.filter((t,e)=>t===null&&e>=this.protectedSlots).length},get activeSlotCount(){return Pelle.isDoomed?PelleRifts.vacuum.milestones[0].canBeApplied?1:0:3+Effects.sum(RealityUpgrade(9),RealityUpgrade(24))},get protectedSlots(){return 10*player.reality.glyphs.protectedRows},get totalSlots(){return 120},changeProtectedRows(t){const e=Math.clamp(player.reality.glyphs.protectedRows+t,0,this.totalSlots/10-1),i=e-player.reality.glyphs.protectedRows;if(i>0){let n=0;for(;n<i;){let r=!1;for(let s=this.protectedSlots/10+n;!r&&s<this.totalSlots/10;s++)r=r||this.moveGlyphRow(s,s+1);if(!r)break;this.glyphIndexArray.some(s=>Math.floor(s/10)===this.protectedSlots/10)||n++}}else{let n=0;for(;n<-i;){let r=!1;for(let s=this.protectedSlots/10-n-1;!r&&s>0;s--)r=r||this.moveGlyphRow(s,s-1);if(!r)break;if(!this.glyphIndexArray.some(s=>Math.floor(s/10)===this.protectedSlots/10-1)){n++;for(let s=this.protectedSlots/10-n;s<this.totalSlots/10;s++)this.moveGlyphRow(s,s-1)}}}player.reality.glyphs.protectedRows=e,this.validate(),GameCache.glyphInventorySpace.invalidate()},moveGlyphRow(t,e){if(!player.reality.moveGlyphsOnProtection||t>=this.totalSlots/10||e>=this.totalSlots/10)return!1;if(this.glyphIndexArray.some(i=>Math.floor(i/10)===e)){if([...Array(10).keys()].some(n=>this.inventory[10*t+n]!==null&&this.inventory[10*e+n]!==null))return!1;for(let n=0;n<10;n++){const r=this.inventory[10*t+n];r!==null&&this.moveToSlot(r,10*e+n)}return this.validate(),!0}for(let i=0;i<10;i++){const n=this.inventory[10*t+i];n!==null&&this.moveToSlot(n,10*e+i)}return this.validate(),!0},refreshActive(){this.active=new Array(this.activeSlotCount).fill(null);for(const t of player.reality.glyphs.active){if(this.active[t.idx])throw new Error("Stacked active glyphs?");this.active[t.idx]=t}},refresh(){this.refreshActive(),this.inventory=new Array(this.totalSlots).fill(null);const t=[];for(const e of player.reality.glyphs.inventory)this.inventory[e.idx]?t.push(e):this.inventory[e.idx]=e;for(;t.length;){const e=this.findFreeIndex();if(e>=0){const i=t.shift();this.inventory[e]=i,i.idx=e}else break}for(;t.length;)this.removeFromInventory(t.pop());this.validate(),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)},findByValues(t,e,i={level,strength,effects}){const n=(a,o,c)=>{switch(a){case-1:return c-o;case 0:return o===c?0:-1;case 1:return o-c}return!1},r=(a,o)=>(a&o)===a?countValuesFromBitmask(o-a):-countValuesFromBitmask(a-(a&o)),s=[];for(const a of e){const o=a.type===t.type;let c;switch(i.effects){case-1:c=r(a.effects,t.effects);break;case 0:c=a.effects===t.effects?0:-1;break;case 1:c=r(t.effects,a.effects);break}const d=n(i.strength,a.strength,t.strength)/2.5,p=n(i.level,a.level,t.level)/5e3,m=a.symbol===t.symbol;o&&c>=0&&d>=0&&p>=0&&m&&s.push({glyph:a,gap:d+p+c/10})}return s.sort((a,o)=>a.gap-o.gap),s.map(a=>a.glyph)},findById(t){return player.reality.glyphs.inventory.find(e=>e.id===t)},findByInventoryIndex(t){return this.inventory[t]},activeGlyph(t){return this.active[t]},equip(t,e){const i=Pelle.isDisabled("glyphs")||["effarig","reality","cursed"].includes(t.type);if(Pelle.isDoomed&&i||GameEnd.creditsEverClosed)return;if(t.type!=="companion"){if(RealityUpgrade(9).isLockingMechanics){if(this.activeWithoutCompanion.length>0){RealityUpgrade(9).tryShowWarningModal("equip another non-Companion Glyph");return}if(t.level<3){RealityUpgrade(9).tryShowWarningModal(`equip a Glyph whose level is less than ${formatInt(3)}`);return}}if(RealityUpgrade(24).isLockingMechanics&&this.activeWithoutCompanion.length===0){RealityUpgrade(24).tryShowWarningModal();return}if(ImaginaryUpgrade(25).isLockingMechanics&&this.activeWithoutCompanion.length===1){ImaginaryUpgrade(25).tryShowWarningModal();return}}if(this.validate(),this.findByInventoryIndex(t.idx)!==t)throw new Error("Inconsistent inventory indexing");let n=-1;if(["effarig","reality"].includes(t.type)&&(n=this.active.findIndex(r=>r&&r.type===t.type)),this.active[e]===null){if(n>=0){Modal.message.show(`You may only have one ${t.type.capitalize()} Glyph equipped!`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}this.removeFromInventory(t),this.saveUndo(e),player.reality.glyphs.active.push(t),t.idx=e,this.active[e]=t,this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate()}else{if(n>=0&&n!==e){Modal.message.show(`You may only have one ${t.type.capitalize()} Glyph equipped!`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}if(!player.options.confirmations.glyphReplace){this.swapIntoActive(t,e);return}Modal.glyphReplace.show({targetSlot:e,inventoryIndex:t.idx})}this.removeVisualFlag("unseen",t),this.removeVisualFlag("unequipped",t)},unequipAll(t=!1){this.unequipped=[];const e=t?!1:player.options.respecIntoProtected;for(;player.reality.glyphs.active.length;){const r=this.findFreeIndex(e);if(r<0)break;const s=player.reality.glyphs.active.pop();this.active[s.idx]=null,this.addToInventory(s,r,!0)}this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(!0);const i=player.reality.glyphs.active.length,n=player.records.recentRealities[0][1]<3e3;if(i&&!n){const r=player.options.respecIntoProtected?"Protected slots":"Main Inventory",s=this.findFreeIndex(!player.options.respecIntoProtected)!==-1;setTimeout(()=>Modal.message.show(`${quantifyInt("Glyph",i)} could not be unequipped due to lack
        of space. Free up some space in your ${r}${s?" or switch where you are unequipping to":""}
        in order to unequip ${i===1?"it":"them"}.`,{closeEvent:GAME_EVENT.GLYPHS_CHANGED}),50)}return EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),!player.reality.glyphs.active.length},unequip(t,e){if(this.active[t]===null)return;const i=player.reality.glyphs.active.findIndex(r=>r.idx===t);if(i<0)return;const n=player.reality.glyphs.active.splice(i,1)[0];this.active[t]=null,this.addToInventory(n,e,!0),this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(!0),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)},updateRealityGlyphEffects(){if(player.reality.glyphs.active.filter(e=>e.type==="reality")[0]===void 0){this.levelBoost=0;return}this.levelBoost=getAdjustedGlyphEffectUncached("realityglyphlevel")},moveToSlot(t,e){this.inventory[e]===null?this.moveToEmpty(t,e):this.swap(t,this.inventory[e])},moveToEmpty(t,e){if(this.validate(),this.findByInventoryIndex(t.idx)!==t)throw new Error("Inconsistent inventory indexing");if(this.inventory[e]===null)this.inventory[t.idx]=null,this.inventory[e]=t,t.idx=e,EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED);else throw new Error("Attempted glyph move into non-empty slot");this.validate()},swap(t,e){if(t.idx===e.idx)return;this.validate(),this.inventory[t.idx]=e,this.inventory[e.idx]=t;const i=t.idx;t.idx=e.idx,e.idx=i,this.validate(),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)},addToInventory(t,e,i=!1){this.validate(),i||(t.id=GlyphGenerator.makeID());const n=e<this.protectedSlots;let r=this.findFreeIndex(n);r<0||(e!==void 0&&this.inventory[e]===null&&(r=e),this.inventory[r]=t,t.idx=r,this.applyGamespeed(t),player.records.bestReality.glyphStrength=Math.clampMin(player.records.bestReality.glyphStrength,t.strength),player.reality.glyphs.inventory.push(t),e===void 0&&!i&&this.addVisualFlag("unseen",t),i&&this.addVisualFlag("unequipped",t),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate())},addVisualFlag(t,e){this[t].includes(e.id)||this[t].push(e.id)},removeVisualFlag(t,e){const i=tc[t].indexOf(e.id);i>-1&&tc[t].splice(i,1)},isMusicGlyph(t){return(t==null?void 0:t.cosmetic)==="music"},removeFromInventory(t){if(t.idx===null)return;this.validate();const e=player.reality.glyphs.inventory.indexOf(t);e<0||(this.inventory[t.idx]=null,player.reality.glyphs.inventory.splice(e,1),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate())},validate(){for(const t of player.reality.glyphs.inventory)if(this.inventory[t.idx]!==t)throw new Error("validation error");for(let t=0;t<this.inventory.length;++t)if(this.inventory[t]&&this.inventory[t].idx!==t)throw new Error("backwards validation error")},sort(t){const e=player.reality.glyphs.inventory.filter(o=>o.idx>=this.protectedSlots),i=GameCache.glyphInventorySpace.value,n=["power","infinity","replication","time","dilation","effarig","reality","cursed","companion"],r=n.mapToObject(o=>o,()=>({glyphs:[],padding:0}));for(const o of e)r[o.type].glyphs.push(o);let s=0;for(const o of Object.values(r))o.glyphs.sort(t),o.padding=Math.ceil(o.glyphs.length/10)*10-o.glyphs.length,s+=o.padding;for(;s>i;){let o=n[0];for(const d of n)r[d].padding>r[o].padding&&(o=d);const c=r[o].padding>5?5:1;s-=c,r[o].padding-=c}let a=this.protectedSlots;for(const o of Object.values(r)){for(const c of o.glyphs)this.inventory[a]?this.swap(this.inventory[a],c):this.moveToEmpty(c,a),++a;a+=o.padding}player.reality.autoCollapse&&this.collapseEmptySlots()},sortByLevel(){this.sort((t,e)=>e.level-t.level)},sortByPower(){this.sort((t,e)=>e.level*e.strength-t.level*t.strength)},sortByScore(){this.sort((t,e)=>AutoGlyphProcessor.filterValue(e)-AutoGlyphProcessor.filterValue(t))},sortByEffect(){function t(e){return parseInt(((1<<30)+(e>>>0)).toString(2).split("").reverse().join(""),2)}this.sort((e,i)=>t(i.effects)-t(e.effects))},isObjectivelyUseless(t,e,i){if(player.reality.applyFilterToPurge&&AutoGlyphProcessor.wouldKeep(t))return!1;function n(c,d,p){for(const m of p)if(m.compareValues(m.effect(c.level,c.strength),m.effect(d.level,d.strength))>0)return!0;return!1}const r=(i??this.inventory).concat(this.active).filter(c=>c!==null&&c.type===t.type&&c.id!==t.id&&(c.level>=t.level||c.strength>=t.strength)&&(c.effects&t.effects)===t.effects);let s=t.type==="effarig"||t.type==="reality"?1:5;if(s=Math.clampMax(s,e),r.length<s)return!1;const a=getGlyphEffectsFromBitmask(t.effects).filter(c=>c.id.startsWith(t.type));return r.countWhere(c=>!n(t,c,a))>=s},autoClean(t=5,e=!0){const i=t<5;let n=0;const r=e?void 0:this.fakePurgeInventory();if(!GlyphSacrificeHandler.canSacrifice)return n;for(let s=this.totalSlots-1;s>=this.protectedSlots;--s){const a=(r??this.inventory)[s];a===null||a.type==="companion"||a.type==="cursed"&&t!==0||(a.color!==void 0||a.symbol!==void 0)&&!i||(t===0||this.isObjectivelyUseless(a,t,r))&&(e?AutoGlyphProcessor.getRidOfGlyph(a):r.splice(r.indexOf(a),1),n++)}return player.reality.autoCollapse&&e&&this.collapseEmptySlots(),n},fakePurgeInventory(){return this.inventory.map(t=>t===null?null:{id:t.id,type:t.type,level:t.level,strength:t.strength,effects:t.effects,color:t.color,symbol:t.symbol})},harshAutoClean(){this.autoClean(1)},deleteAllUnprotected(){this.autoClean(0)},deleteAllRejected(t=!0){let e=0;for(const i of tc.inventory)i!==null&&i.idx>=this.protectedSlots&&!AutoGlyphProcessor.wouldKeep(i)&&(t&&AutoGlyphProcessor.getRidOfGlyph(i),e++);return player.reality.autoCollapse&&t&&this.collapseEmptySlots(),e},collapseEmptySlots(){const t=player.reality.glyphs.inventory.filter(e=>e.idx>=this.protectedSlots).sort((e,i)=>e.idx-i.idx);for(let e=0;e<t.length;e++)this.moveToSlot(t[e],this.protectedSlots+e)},processSortingAfterReality(){switch(VUnlocks.autoAutoClean.canBeApplied&&player.reality.autoAutoClean&&this.autoClean(),player.reality.autoSort){case AUTO_SORT_MODE.NONE:break;case AUTO_SORT_MODE.LEVEL:this.sortByLevel();break;case AUTO_SORT_MODE.POWER:this.sortByPower();break;case AUTO_SORT_MODE.EFFECT:this.sortByEffect();break;case AUTO_SORT_MODE.SCORE:this.sortByScore();break;default:throw new Error("Unrecognized auto-sort mode")}},get levelCap(){return 1e6},get instabilityThreshold(){return 1e3+getAdjustedGlyphEffect("effarigglyph")+ImaginaryUpgrade(7).effectOrDefault(0)},get hyperInstabilityThreshold(){return 3e3+this.instabilityThreshold},clearUndo(){player.reality.glyphs.undo=[]},saveUndo(t){const e={targetSlot:t,am:new Decimal(Currency.antimatter.value),ip:new Decimal(Currency.infinityPoints.value),ep:new Decimal(Currency.eternityPoints.value),tt:Currency.timeTheorems.max.minus(TimeTheorems.totalPurchased()),ecs:EternityChallenges.all.map(i=>i.completions),thisInfinityTime:player.records.thisInfinity.time,thisInfinityRealTime:player.records.thisInfinity.realTime,thisEternityTime:player.records.thisEternity.time,thisEternityRealTime:player.records.thisEternity.realTime,thisRealityTime:player.records.thisReality.time,thisRealityRealTime:player.records.thisReality.realTime,storedTime:player.celestials.enslaved.stored,dilationStudies:player.dilation.studies.toBitmask(),dilationUpgrades:player.dilation.upgrades.toBitmask(),dilationRebuyables:DilationUpgrades.rebuyable.mapToObject(i=>i.id,i=>i.boughtAmount),tp:new Decimal(Currency.tachyonParticles.value),dt:new Decimal(Currency.dilatedTime.value)};player.reality.glyphs.undo.push(e)},undo(){const t=tc.findFreeIndex(player.options.respecIntoProtected);if(t===-1||player.reality.glyphs.undo.length===0)return;const e=player.reality.glyphs.undo.pop();if(this.bestUndoGlyphCount=player.requirementChecks.reality.maxGlyphs,this.unequip(e.targetSlot,t),finishProcessReality({reset:!0,glyphUndo:!0,restoreCelestialState:!0}),Currency.antimatter.value=new Decimal(e.am),Currency.infinityPoints.value=new Decimal(e.ip),Currency.eternityPoints.value=new Decimal(e.ep),Currency.timeTheorems.value=new Decimal(e.tt),EternityChallenges.all.map((i,n)=>i.completions=e.ecs[n]),player.records.thisInfinity.time=e.thisInfinityTime,player.records.thisInfinity.realTime=e.thisInfinityRealTime,player.records.thisEternity.time=e.thisEternityTime,player.records.thisEternity.realTime=e.thisEternityRealTime,player.records.thisReality.time=e.thisRealityTime,player.records.thisReality.realTime=e.thisRealityRealTime,player.celestials.enslaved.stored=e.storedTime||0,e.dilationStudies){player.dilation.studies=Array.fromBitmask(e.dilationStudies),player.dilation.upgrades=new Set(Array.fromBitmask(e.dilationUpgrades));for(const i of Object.keys(e.dilationRebuyables))DilationUpgrades.fromId(i).boughtAmount=e.dilationRebuyables[i];Currency.tachyonParticles.value=new Decimal(e.tp),Currency.dilatedTime.value=new Decimal(e.dt)}Player.automatorUnlocked&&AutomatorBackend.state.forceRestart&&AutomatorBackend.start(player.reality.automator.state.editorScript)},copyForRecords(t){return t.map(e=>({type:e.type,level:e.level,strength:e.strength,effects:e.effects,color:e.color,symbol:e.symbol})).sort((e,i)=>i.effects-e.effects)},updateMaxGlyphCount(t=!1){const e=this.activeWithoutCompanion,i=e.length-4*e.filter(n=>n&&n.type==="cursed").length;t&&(player.requirementChecks.reality.maxGlyphs=i),player.requirementChecks.reality.maxGlyphs=Math.max(player.requirementChecks.reality.maxGlyphs,i)},applyGamespeed(t){Ra.unlocks.allGamespeedGlyphs.canBeApplied&&BASIC_GLYPH_TYPES.includes(t.type)&&(t.effects|=1<<GlyphEffects.timespeed.bitmaskIndex,t.type==="time"&&(t.effects|=1<<GlyphEffects.timeshardpow.bitmaskIndex))},swapIntoActive(t,e){this.removeFromInventory(t),this.unequip(e,t.idx),finishProcessReality({reset:!0,glyphUndo:!1,restoreCelestialState:!0}),player.reality.glyphs.active.push(t),this.active[e]=t,t.idx=e,this.updateRealityGlyphEffects(),this.updateMaxGlyphCount(!0),EventHub.dispatch(GAME_EVENT.GLYPHS_EQUIPPED_CHANGED),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED),this.validate()},hash(t){let e=1;for(const i of t){const n=Math.pow(i.level,2)*Math.pow(i.strength,4)*i.effects*i.type.charCodeAt(0);e*=n}return e},giveCursedGlyph(){if(GameCache.glyphInventorySpace.value===0){Modal.message.show("No available inventory space; Sacrifice some Glyphs to free up space.",{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}this.allGlyphs.filter(e=>e!==null&&e.type==="cursed").length>=5?GameUI.notify.error(`You don't need more than ${format(5)} Cursed Glyphs!`):(this.addToInventory(GlyphGenerator.cursedGlyph()),GameUI.notify.error("Created a Cursed Glyph"))}};class Wze extends yn{}const jze=mapGameDataToObject(GameDatabase.reality.glyphSacrifice,t=>new Wze(t));function zze(){for(let t=0;t<player.reality.glyphs.active.length;t++)tk(player.reality.glyphs.active[t]);player.reality.glyphs.inventory=player.reality.glyphs.inventory.filter(t=>t.idx<tc.totalSlots);for(let t=0;t<player.reality.glyphs.inventory.length;t++)tk(player.reality.glyphs.inventory[t]);tc.updateRealityGlyphEffects(),tc.refresh()}function tk(t){t.color===void 0&&t.symbol===void 0&&(t.level=Math.max(1,Math.round(t.level)),t.rawLevel===void 0&&(t.rawLevel=t.level<1e3?t.level:(Math.pow(.004*t.level-3,2)-1)*125+1e3),t.strength===1&&(t.strength=1.5),t.strength=Math.min(g4(100),t.strength))}function Xze(t){return GlyphRarities.find(e=>t>=e.minStrength)}function Kze(t,e=tc.levelBoost,i=!1){const n=t.level;if(!i){if(Pelle.isDoomed)return Math.min(n,Pelle.glyphMaxLevel);if(Enslaved.isRunning)return Math.max(n,Enslaved.glyphLevelMin);if(Effarig.isRunning)return Math.min(n,Effarig.glyphLevelCap)}return BASIC_GLYPH_TYPES.includes(t.type)?n+e:n}function Zze(){tc.unequipAll()||Modal.message.show("Some of your Glyphs could not be unequipped due to lack of inventory space.",{closeEvent:GAME_EVENT.GLYPHS_CHANGED}),player.reality.respec=!1}class v4{constructor(e,i){this.id=e.id,this._defaultSymbol=e.symbol,this._defaultColor=e.color,this.preventBlur=e.preventBlur??!1,this.isUnlocked=e.isUnlocked,this._canCustomize=e.canCustomize,this.fixedSymbolColor=e.fixedSymbolColor??!1,this.isCosmetic=i}get canCustomize(){var e,i;return(!this.isCosmetic||(((e=this.isUnlocked)==null?void 0:e.call(this))??!0))&&(((i=this._canCustomize)==null?void 0:i.call(this))??!0)}get defaultSymbol(){return{symbol:this._defaultSymbol,blur:!this.preventBlur}}get defaultColor(){const e=this.id==="reality"?Xl.realityColor:this._defaultColor,i=!Xl.isLightBG;return{border:e,bg:i===(this.id==="cursed")?"white":"black"}}get currentSymbol(){const e=player.reality.glyphs.cosmetics.symbolMap[this.id];return!player.reality.glyphs.cosmetics.active||!e?this.defaultSymbol:{symbol:e,blur:!(this.preventBlur||Xl.unblurredSymbols.includes(e))}}get currentColor(){const e=player.reality.glyphs.cosmetics.colorMap[this.id];return!player.reality.glyphs.cosmetics.active||!e?this.defaultColor:{...Xl.getColorProps(e),str:e}}get ignoreRarityColor(){return this.isCosmetic||this.fixedSymbolColor}}const Qze=mapGameDataToObject(GameDatabase.reality.glyphTypes,t=>new v4(t,!1)),Jze=mapGameDataToObject(GameDatabase.reality.cosmeticGlyphs,t=>new v4(t,!0)),Jp={...Qze,...Jze,get list(){return Object.keys({...GameDatabase.reality.glyphTypes,...GameDatabase.reality.cosmeticGlyphs}).map(t=>Jp[t])}},Xl={setInModal:null,chosenFromModal:null,get cosmeticsEnabled(){return player.reality.glyphs.cosmetics.active},get symbolMap(){return player.reality.glyphs.cosmetics.symbolMap},get colorMap(){return player.reality.glyphs.cosmetics.colorMap},get availableSymbols(){return Object.values(GameDatabase.reality.glyphCosmeticSets).filter(t=>this.unlockedSets.includes(t.id)).map(t=>t.symbol).filter(t=>t)},get availableColors(){const t=Object.values(GameDatabase.reality.glyphCosmeticSets).filter(a=>this.unlockedSets.includes(a.id)).flatMap(a=>a.color).sort((a,o)=>{const c=d=>{const m=d.split("#")[1],y=[parseInt(m.substring(0,2),16)/255,parseInt(m.substring(2,4),16)/255,parseInt(m.substring(4),16)/255],_=Math.min(...y),E=Math.max(...y);if(E-_<.3)return E;let C;return y[0]===E?C=(y[1]-y[2])/(E-_):y[1]===E?C=2+(y[2]-y[1])/(E-_):C=4+(y[0]-y[1])/(E-_),6+(C+6)%6};return c(a)-c(o)}).filter(a=>a),e=t.filter(a=>a.charAt(0)==="B"),i=t.filter(a=>a.charAt(0)==="W"),n=e.length>i.length?e:i,r=e.length>i.length?i:e,s=[];for(let a=0;a<n.length;a++)a<r.length?s.push([n[a],r[a]]):s.push([n[a]]);return s},get availableTypes(){return Object.values(GameDatabase.reality.cosmeticGlyphs).map(t=>Jp[t.id]).filter(t=>t.isUnlocked()).map(t=>t.id)},get unblurredSymbols(){return Object.values(GameDatabase.reality.glyphCosmeticSets).filter(t=>t.preventBlur).map(t=>t.symbol).flat()},get expectedSetCount(){return ShopPurchaseData.singleCosmeticSet+player.records.fullGameCompletions},get isLightBG(){switch(player.options.glyphBG){case GLYPH_BG_SETTING.AUTO:return!Theme.current().isDark();case GLYPH_BG_SETTING.LIGHT:return!0;case GLYPH_BG_SETTING.DARK:return!1;default:throw new Error("Unrecognized Glyph BG setting")}},getBorderColor(t){return t==="cursed"&&!Jp.cursed.currentColor.str?this.isLightBG?"#ffffff":"#000000":Jp[t].currentColor.border},getRarityColor(t,e){const i=getRarity(t),r=`${Jp[e].currentColor.bg==="white"?"light":"dark"}${player.options.highContrastRarity?"HighContrast":"Color"}`;return i[r]},getColorProps(t){return(t==null?void 0:t.charAt(1))!=="#"?{border:t,bg:this.isLightBG?"white":"black"}:{border:t.substring(1),bg:t.charAt(0)==="B"?"black":"white"}},getBaseColor(t){const e=!this.isLightBG;return t?e?"white":"black":e?"black":"white"},get realityColor(){const t=[182,100,34,3,178,182],e=[127,221,170,169,65,127],i=[51,23,72,244,227,51],n=Date.now()%1e4,r=Math.floor(n/2e3),s=n/2e3-r;return`rgb(${t[r]*(1-s)+t[r+1]*s},
      ${e[r]*(1-s)+e[r+1]*s},
      ${i[r]*(1-s)+i[r+1]*s})`},get unlockedSets(){return ShopPurchase.allCosmeticSets>0?Object.keys(GameDatabase.reality.glyphCosmeticSets):[...new Set(player.reality.glyphs.cosmetics.unlockedFromNG.concat(ShopPurchaseData.unlockedCosmetics))]},get lockedSets(){return Object.keys(GameDatabase.reality.glyphCosmeticSets).filter(t=>!this.unlockedSets.includes(t))},unlockSet(){var r;const t=this.lockedSets,e=(r=Xl.chosenFromModal)==null?void 0:r.id;let i;if(e&&t.includes(e))i=e;else if(!e&&t.length>0)i=t[Math.floor(Math.random()*t.length)];else return;player.reality.glyphs.cosmetics.unlockedFromNG.push(i);const n=GameDatabase.reality.glyphCosmeticSets[i];GameUI.notify.info(`You have unlocked the "${n.name}" Set for Glyph cosmetics!`,1e4),Xl.chosenFromModal=null,this.applyNotification()},applyNotification(){TabNotification.newGlyphCosmetic.clearTrigger(),TabNotification.newGlyphCosmetic.tryTrigger(),player.reality.glyphs.cosmetics.glowNotification=!0},clearInvalidCosmetics(){const t=player.reality.glyphs.active.concat(player.reality.glyphs.inventory),e=Xl.availableSymbols.flat(),i=Xl.availableSymbols.flat();for(const r of t)e.includes(r.symbol)||(r.symbol=void 0),i.includes(r.color)||(r.color=void 0),Xl.availableTypes.includes(r.cosmetic)||(r.cosmetic=void 0);const n=player.reality.glyphs.cosmetics;for(const r of Object.keys(n.symbolMap)){const s=n.symbolMap[r];e.includes(s)||(n.symbolMap[r]=void 0)}for(const r of Object.keys(n.colorMap)){const s=n.symbolMap[r];i.includes(s)||(n.colorMap[r]=void 0)}}};class dC{constructor(e,i){this._id=e,this._adjustApply=i.adjustApply}applyEffect(e){let i=Vv(this._id);this._adjustApply!==void 0&&(i=this._adjustApply(i)),e(i)}}const e7e={dimBoostPower:new dC("powerdimboost",{adjustApply:t=>Math.max(1,t)}),ipMult:new dC("infinityIP",{adjustApply:t=>Decimal.max(1,t)}),epMult:new dC("timeEP",{adjustApply:t=>Decimal.max(1,t)})};function t7e(t){return n7e(t).value}function Vv(t){return GameCache.glyphEffects.value[t]}function i7e(t){return GlyphEffects[t].conversion(Vv(t))}function XR(t){if(!orderedEffectList.includes(t))throw new Error(`Unknown Glyph effect requested "${t}"'`);return player.reality.glyphs.active.filter(e=>(1<<GlyphEffects[t].bitmaskIndex&e.effects)!==0).filter(e=>generatedTypes.includes(e.type)===GlyphEffects[t].isGenerated).map(e=>b4(t,e))}function n7e(t){return GlyphEffects[t].combine(XR(t))}function r7e(t){let e="",i="";for(let n=0;n<GLYPH_TYPES.length;n++)if(t.substring(0,GLYPH_TYPES[n].length)===GLYPH_TYPES[n]){e=GLYPH_TYPES[n],i=t.substring(GLYPH_TYPES[n].length);break}return[e,i]}function s7e(t,e,i,n){const r=Cs.isDoomed&&n!=="companion"?Cs.glyphStrength:i;return getGlyphEffectsFromBitmask(t).map(s=>({id:s.id,value:s.effect(e,r)}))}function b4(t,e){const i=GlyphEffects[t];if(e.effects&1<<i.bitmaskIndex)return i.effect(getAdjustedGlyphLevel(e),Cs.isDoomed?Cs.glyphStrength:e.strength)}function a7e(t){let e=0,i=t;for(;i!==0;)e+=i&1,i>>=1;return e}function o7e(){let t=orderedEffectList.map(s=>({effect:s,values:XR(s)})).filter(s=>s.values.length>0).map(s=>({id:s.effect,value:GlyphEffects[s.effect].combine(s.values)}));const e=t.map(s=>s.id),i=["cursedgalaxies","curseddimensions","cursedEP"],n=["realitygalaxies","effarigdimensions","timeEP"],r=[ii.multiply,ii.multiply,ii.multiplyDecimal];for(let s=0;s<i.length;s++)if(e.includes(i[s])&&e.includes(n[s])){const a=r[s]([Vv(i[s]),Vv(n[s])]);Decimal.lt(a,1)?(t=t.filter(o=>o.id!==n[s]),t.filter(o=>o.id===i[s])[0].value.value=a):(t=t.filter(o=>o.id!==i[s]),t.filter(o=>o.id===n[s])[0].value.value=a)}return t}class pm{static get SECOND_GAUSSIAN_DEFAULT_VALUE(){return 1e6}constructor(e,i){this.seed=e,this.secondGaussian=i}uniform(){const e=xorshift32Update(this.seed);return this.seed=e,e*23283064365386963e-26+.5}normal(){if(this.secondGaussian!==pm.SECOND_GAUSSIAN_DEFAULT_VALUE){const r=this.secondGaussian;return this.secondGaussian=pm.SECOND_GAUSSIAN_DEFAULT_VALUE,r}let e=0,i=0,n=0;do e=this.uniform()*2-1,i=this.uniform()*2-1,n=e*e+i*i;while(n>=1||n===0);return n=Math.sqrt(-2*Math.log(n)/n),this.secondGaussian=i*n,e*n}finalize(){throw new NotImplementedError}get isFake(){throw new NotImplementedError}}const go={uniformityGroups:4,get isUniformityActive(){return player.realities<=5*this.uniformityGroups},fakeSeed:Date.now()%Math.pow(2,32),fakeSecondGaussian:null,RealGlyphRNG:class extends pm{constructor(){super(player.reality.seed,player.reality.secondGaussian)}finalize(){player.reality.seed=this.seed,player.reality.secondGaussian=this.secondGaussian}get isFake(){return!1}},FakeGlyphRNG:class extends pm{constructor(){super(go.fakeSeed,go.fakeSecondGaussian)}finalize(){go.fakeSeed=this.seed,go.fakeSecondGaussian=this.secondGaussian}get isFake(){return!0}},MusicGlyphRNG:class extends pm{constructor(){super(player.reality.musicSeed,player.reality.musicSecondGaussian)}finalize(){player.reality.musicSeed=this.seed,player.reality.musicSecondGaussian=this.secondGaussian}get isFake(){return!1}},startingGlyph(t){return{id:void 0,idx:null,type:"power",strength:1.5,level:t.actualLevel,rawLevel:t.rawLevel,effects:makeGlyphEffectBitmask(["powerpow"])}},randomGlyph(t,e,i=null){const n=e||new go.RealGlyphRNG,r=this.randomStrength(n),s=i||this.randomType(n);let a=this.randomNumberOfEffects(s,r,t.actualLevel,n);s!=="effarig"&&a>4&&(a=4);const o=this.generateEffects(s,a,n);return e===void 0&&n.finalize(),{id:void 0,idx:null,type:s,strength:r,level:t.actualLevel,rawLevel:t.rawLevel,effects:o}},realityGlyph(t){const e=rarityToStrength(100),i=this.generateRealityEffects(t),n=makeGlyphEffectBitmask(i);return{id:void 0,idx:null,type:"reality",strength:e,level:t,rawLevel:t,effects:n}},cursedGlyph(){const t=rarityToStrength(100),e=makeGlyphEffectBitmask(orderedEffectList.filter(i=>i.match("cursed*")));return{id:void 0,idx:null,type:"cursed",strength:t,level:6666,rawLevel:6666,effects:e}},doomedGlyph(t){const e=GlyphEffects.all.filter(r=>r.id.startsWith(t));e.push(GlyphEffects.timespeed);let i=0;for(const r of e)i|=1<<r.bitmaskIndex;const n=Math.max(player.records.bestReality.glyphLevel,5e3);return{id:void 0,idx:null,type:t,strength:3.5,level:n,rawLevel:n,effects:i}},companionGlyph(t){const e=rarityToStrength(t.log10()/1e6),i=orderedEffectList.filter(r=>r.match("companion*")),n=makeGlyphEffectBitmask(i);return{id:void 0,idx:null,type:"companion",strength:e,level:1,rawLevel:1,effects:n}},musicGlyph(){const t=new go.MusicGlyphRNG,e=this.randomGlyph({actualLevel:Math.floor(player.records.bestReality.glyphLevel*.8),rawLevel:1},t);return t.finalize(),e.cosmetic="music",e.fixedCosmetic="music",e},makeID(){return this.maxID+1},get maxID(){return player.reality.glyphs.active.concat(player.reality.glyphs.inventory).reduce((t,e)=>Math.max(t,e.id),0)},get strengthMultiplier(){return Effects.max(1,RealityUpgrade(16))},randomStrength(t){if(Ra.unlocks.maxGlyphRarityAndShardSacrificeBoost.canBeApplied)return rarityToStrength(100);let e=go.gaussianBellCurve(t)*go.strengthMultiplier;const n=(Ra.unlocks.extraGlyphChoicesAndRelicShardRarityAlwaysMax.canBeApplied?1:t.uniform())*Effarig.maxRarityBoost+Effects.sum(Achievement(146),GlyphSacrifice.effarig);return e+=n/40,e=Math.ceil(e*400)/400,Math.min(e,rarityToStrength(100))},randomNumberOfEffects(t,e,i,n){const r=n.uniform(),s=n.uniform();if(t!=="effarig"&&Ra.unlocks.glyphEffectCount.canBeApplied)return 4;const a=Ra.unlocks.glyphEffectCount.canBeApplied?7:4;let o=Math.min(a,Math.floor(Math.pow(r,1-Math.pow(i*e,.5)/100)*1.5+1));return RealityUpgrade(17).isBought&&s<Effects.max(0,RealityUpgrade(17))&&(o=Math.min(o+1,a)),Ra.unlocks.glyphEffectCount.canBeApplied?Math.max(o,4):o},generateRealityEffects(t){const e=realityGlyphEffectLevelThresholds.filter(n=>n<=t).length;return GlyphEffects.all.filter(n=>n.glyphTypes.includes("reality")).sort((n,r)=>n.bitmaskIndex-r.bitmaskIndex).map(n=>n.id).slice(0,e)},generateEffects(t,e,i){const n=GlyphTypes[t].effects.mapToObject(s=>s.bitmaskIndex,()=>i.uniform());if(Array.range(0,7-GlyphTypes[t].effects.length).forEach(()=>i.uniform()),t==="effarig"){const s=n[20]<n[21]?20:21;n[s]=-1}for(const s of[0,12,16])s in n&&(n[s]=2);return Object.keys(n).sort((s,a)=>n[a]-n[s]).slice(0,e).map(Number).toBitmask()},randomType(t,e=[]){const i=generatedTypes.filter(s=>EffarigUnlock.reality.isUnlocked||s!=="effarig"),n=i.map(s=>e.countWhere(a=>a===s)).max(),r=e.length===0?[]:i.filter(s=>e.countWhere(a=>a===s)===n);return GlyphTypes.random(t,r)},uniformGlyphs(t,e,i){const n=Math.floor((i-1)/5),r=(i-1)%5,s=player.reality.initialSeed,a=permutationIndex(5,(31+s%7)*n+s%1123),o=Array.repeat(0,5);for(let y=0;y<r;y++)for(let _=0;_<5;_++)_!==a[y]&&o[_]++;const c=[],d=[16,12,8,0,4],p=Array.range(0,5);p.splice(a[r],1);for(let y=0;y<4;y++){const _=p[y],E=permutationIndex(4,5*_+(7+s%5)*n+s%11);c.push(d[_]+E[o[_]])}const m=[];for(let y=0;y<4;++y){const _=go.randomGlyph(t,e,BASIC_GLYPH_TYPES[p[y]]),E=(s+i+y)%2===0?1<<c[y]:_.effects|1<<c[y],C=RealityUpgrade(17).isBought?3:2;if(countValuesFromBitmask(E)>C){const k=getGlyphEffectsFromBitmask(_.effects).filter(O=>O.isGenerated).map(O=>O.bitmaskIndex).filter(O=>![0,12,16].includes(O)),R=k[Math.abs(s+i)%k.length];_.effects=E&~(1<<R)}else _.effects=E;const S={power:16,infinity:12,time:0};S[_.type]!==void 0&&(_.effects|=1<<S[_.type]),m.push(_)}return m},getRNG(t){return t?new go.FakeGlyphRNG:new go.RealGlyphRNG},gaussianBellCurve(t){const e=Math.sqrt(Math.abs(t.normal(),0)+1);return-.111749606737+e*(.900603878243551+e*(.229108274476697+e*-.017962545983249))},copy(t){return t&&yv({},t)}},l7e={maxSacrificeForEffects:1e100,get logTotalSacrifice(){return BASIC_GLYPH_TYPES.reduce((t,e)=>t+Math.log10(Math.clampMin(player.reality.glyphs.sac[e],1)),0)},get canSacrifice(){return RealityUpgrade(19).isBought},get isRefining(){return Ra.unlocks.unlockGlyphAlchemy.canBeApplied&&AutoGlyphProcessor.sacMode!==AUTO_GLYPH_REJECT.SACRIFICE},handleSpecialGlyphTypes(t){switch(t.type){case"companion":return Modal.deleteCompanion.show(),!0;case"cursed":return Glyphs.removeFromInventory(t),!0}return!1},removeGlyph(t,e=!1){this.handleSpecialGlyphTypes(t)||(this.canSacrifice?this.isRefining?this.attemptRefineGlyph(t,e):this.sacrificeGlyph(t,e):this.deleteGlyph(t,e))},deleteGlyph(t,e){e||!player.options.confirmations.glyphSacrifice?Glyphs.removeFromInventory(t):Modal.glyphDelete.show({idx:t.idx})},glyphSacrificeGain(t){if(!this.canSacrifice||Pelle.isDoomed)return 0;if(t.type==="reality")return .01*t.level*Achievement(171).effectOrDefault(1);const e=Math.pow(Math.clampMax(t.level,1e4)+10,2.5),i=1+Math.clampMin(t.level-1e4,0)/100,n=Ra.unlocks.maxGlyphRarityAndShardSacrificeBoost.effectOrDefault(1);return Math.pow(e*i*t.strength*Teresa.runRewardMultiplier*Achievement(171).effectOrDefault(1),n)},sacrificeGlyph(t,e=!1){if(Pelle.isDoomed||this.handleSpecialGlyphTypes(t))return;const i=this.glyphSacrificeGain(t);if(!e&&player.options.confirmations.glyphSacrifice){Modal.glyphSacrifice.show({idx:t.idx,gain:i});return}player.reality.glyphs.sac[t.type]+=i,GameCache.logTotalGlyphSacrifice.invalidate(),Glyphs.removeFromInventory(t),EventHub.dispatch(GAME_EVENT.GLYPH_SACRIFICED,t)},glyphAlchemyResource(t){const e=GlyphTypes[t.type];return AlchemyResources.all[e.alchemyResource]},levelRefinementValue(t){return Math.pow(t,3)/1e8},glyphRefinementEfficiency:.05,glyphRawRefinementGain(t){if(!Ra.unlocks.unlockGlyphAlchemy.canBeApplied)return 0;const e=this.levelRefinementValue(t.level),i=strengthToRarity(t.strength)/100;return this.glyphRefinementEfficiency*e*i},glyphRefinementGain(t){if(!Ra.unlocks.unlockGlyphAlchemy.canBeApplied||!generatedTypes.includes(t.type))return 0;const e=this.glyphAlchemyResource(t);if(!e.isUnlocked)return 0;const i=this.glyphRawRefinementGain(t);if(e.cap===0)return i;const n=this.glyphEffectiveCap(t)-e.amount;return Math.clamp(n,0,i)},glyphEffectiveCap(t){const i=this.glyphAlchemyResource(t).cap,n=this.highestRefinementValue(t),r=Math.clampMin(i,n);return Math.clampMax(r,Ra.alchemyResourceCap)},highestRefinementValue(t){return this.glyphRawRefinementGain(t)/this.glyphRefinementEfficiency},attemptRefineGlyph(t,e){if(t.type==="reality")return;if(t.type==="cursed"){Glyphs.removeFromInventory(t);return}const i=AlchemyResource.decoherence.isUnlocked;if(!Ra.unlocks.unlockGlyphAlchemy.canBeApplied||this.glyphRefinementGain(t)===0&&!i||i&&AlchemyResources.base.every(r=>r.data.amount>=Ra.alchemyResourceCap)){this.sacrificeGlyph(t,e);return}if(!player.options.confirmations.glyphRefine||e){this.refineGlyph(t);return}const n=this.glyphAlchemyResource(t);Modal.glyphRefine.show({idx:t.idx,resourceName:n.name,resourceAmount:n.amount,gain:this.glyphRefinementGain(t),cap:n.cap})},refineGlyph(t){if(Pelle.isDoomed)return;const e=this.glyphAlchemyResource(t);if(!e.isUnlocked){Glyphs.removeFromInventory(t);return}const i=this.glyphRawRefinementGain(t),n=this.glyphRefinementGain(t);e.amount+=n;const r=i*AlchemyResource.decoherence.effectValue;for(const s of ALCHEMY_BASIC_GLYPH_TYPES)if(s!==t.type){const a=GlyphTypes[s],o=AlchemyResources.all[a.alchemyResource],c=Math.max(o.cap,o.amount);o.amount=Math.clampMax(o.amount+r,c)}e.isBaseResource&&(e.highestRefinementValue=this.highestRefinementValue(t)),Glyphs.removeFromInventory(t)}},c7e={get scoreMode(){return player.reality.glyphs.filter.select},set scoreMode(t){player.reality.glyphs.filter.select=t},get sacMode(){return player.reality.glyphs.filter.trash},set sacMode(t){player.reality.glyphs.filter.trash=t},get types(){return player.reality.glyphs.filter.types},bitmaskIndexOffset(t){switch(t){case"time":return 0;case"dilation":return 4;case"replication":return 8;case"infinity":return 12;case"power":return 16;case"effarig":return 20;default:throw new Error("Unknown glyph type mode in bitmaskIndexOffset")}},filterValue(t){const e=this.types[t.type];if(["companion","reality"].includes(t.type))return 1/0;if(t.type==="cursed")return-1/0;switch(this.scoreMode){case AUTO_GLYPH_SCORE.LOWEST_SACRIFICE:return player.reality.glyphs.sac[t.type]>=GlyphSacrifice[t.type].cap?-1/0:-player.reality.glyphs.sac[t.type];case AUTO_GLYPH_SCORE.EFFECT_COUNT:return strengthToRarity(t.strength)/1e3+getGlyphEffectsFromBitmask(t.effects,0,0).filter(i=>i.isGenerated).length;case AUTO_GLYPH_SCORE.RARITY_THRESHOLD:return strengthToRarity(t.strength);case AUTO_GLYPH_SCORE.SPECIFIED_EFFECT:{const i=countValuesFromBitmask(t.effects);if(i<e.effectCount)return strengthToRarity(t.strength)-200*(e.effectCount-i);const n=countValuesFromBitmask(e.specifiedMask-(e.specifiedMask&t.effects));return strengthToRarity(t.strength)-200*n}case AUTO_GLYPH_SCORE.EFFECT_SCORE:{const i=getGlyphEffectsFromBitmask(t.effects,0,0).filter(s=>s.isGenerated).map(s=>s.bitmaskIndex),n=this.bitmaskIndexOffset(t.type),r=i.map(s=>e.effectScores[s-n]?e.effectScores[s-n]:0).sum();return strengthToRarity(t.strength)+r}case AUTO_GLYPH_SCORE.LOWEST_ALCHEMY:{const i=AlchemyResource[t.type],n=GlyphSacrificeHandler.glyphRefinementGain(t);return i.isUnlocked&&n>0?-i.amount:Number.NEGATIVE_INFINITY}case AUTO_GLYPH_SCORE.ALCHEMY_VALUE:return AlchemyResource[t.type].isUnlocked?GlyphSacrificeHandler.glyphRefinementGain(t):Number.NEGATIVE_INFINITY;default:throw new Error("Unknown glyph score mode in score assignment")}},thresholdValue(t){if(this.types[t.type]===void 0)return-Number.MAX_VALUE;switch(this.scoreMode){case AUTO_GLYPH_SCORE.EFFECT_COUNT:return player.reality.glyphs.filter.simple;case AUTO_GLYPH_SCORE.RARITY_THRESHOLD:case AUTO_GLYPH_SCORE.SPECIFIED_EFFECT:return this.types[t.type].rarity;case AUTO_GLYPH_SCORE.EFFECT_SCORE:return this.types[t.type].score;case AUTO_GLYPH_SCORE.LOWEST_SACRIFICE:case AUTO_GLYPH_SCORE.LOWEST_ALCHEMY:case AUTO_GLYPH_SCORE.ALCHEMY_VALUE:return Number.MAX_VALUE;default:throw new Error("Unknown glyph score mode in threshold check")}},wouldKeep(t){return this.filterValue(t)>=this.thresholdValue(t)},pick(t){const e=i=>{const n=this.filterValue(i),r=this.thresholdValue(i);return r===Number.MAX_VALUE?n:n-r};return t.map(i=>({glyph:i,score:e(i)})).reduce((i,n)=>i.score>n.score?i:n).glyph},getRidOfGlyph(t){if(t.type==="cursed"||t.type==="companion"){GlyphSacrificeHandler.deleteGlyph(t,!0);return}switch(this.sacMode){case AUTO_GLYPH_REJECT.SACRIFICE:GlyphSacrificeHandler.sacrificeGlyph(t,!0);break;case AUTO_GLYPH_REJECT.REFINE:GlyphSacrificeHandler.attemptRefineGlyph(t,!0);break;case AUTO_GLYPH_REJECT.REFINE_TO_CAP:GlyphSacrificeHandler.glyphRefinementGain(t)===0?GlyphSacrificeHandler.sacrificeGlyph(t,!0):GlyphSacrificeHandler.attemptRefineGlyph(t,!0);break;default:throw new Error("Unknown auto Glyph Sacrifice mode")}},hasNegativeEffectScore(){return this.scoreMode===AUTO_GLYPH_SCORE.EFFECT_SCORE&&Object.values(this.types).map(t=>t.effectScores.min()).min()<0},filterModeName(t){switch(t){case AUTO_GLYPH_SCORE.LOWEST_SACRIFICE:return"Lowest Total Glyph Sacrifice";case AUTO_GLYPH_SCORE.EFFECT_COUNT:return"Number of Effects";case AUTO_GLYPH_SCORE.RARITY_THRESHOLD:return"Rarity Threshold";case AUTO_GLYPH_SCORE.SPECIFIED_EFFECT:return"Specified Effect";case AUTO_GLYPH_SCORE.EFFECT_SCORE:return"Effect Score";case AUTO_GLYPH_SCORE.LOWEST_ALCHEMY:return"Lowest Alchemy Resource";case AUTO_GLYPH_SCORE.ALCHEMY_VALUE:return"Refinement Value";default:return"Invalid Glyph filter mode"}},trashModeDesc(t){switch(t){case AUTO_GLYPH_REJECT.SACRIFICE:return"Always sacrifice";case AUTO_GLYPH_REJECT.REFINE:return"Always refine";case AUTO_GLYPH_REJECT.REFINE_TO_CAP:return"Refine to cap, then sacrifice";default:return"Invalid Glyph trash mode"}}};function u7e(){const t=_4(),e=d=>Math.pow(Math.clampMin(1,Math.log(5*d)),3/2),i=Object.values(t).map(d=>e(d.value)).sum(),n=d=>100*e(t[d].value)/i,r=["ep","repl","dt","eternities"],s=[];for(const d of r)s.push({key:d,percent:n(d)});const a=d=>d-Math.floor(d),o=s.sort((d,p)=>a(p.percent)-a(d.percent)).map(d=>d.key),c=100-s.map(d=>Math.floor(d.percent)).reduce((d,p)=>d+p);for(let d=0;d<r.length;d++){const p=o[d];player.celestials.effarig.glyphWeights[p]=Math.floor(n(p))+(d<c?1:0)}}function _4(){let t=Player.canEternity?Currency.eternityPoints.value.plus(gainedEternityPoints()):Currency.eternityPoints.value;t=Decimal.max(player.records.thisReality.maxEP,t);const e=.016,i=Math.pow(Math.max(1,t.pLog10()),.5)*e,n=.4+getAdjustedGlyphEffect("replicationglyphlevel"),r=.025,s=Math.pow(Math.max(1,player.records.thisReality.maxReplicanti.log10()),n)*r,a=1.3+getAdjustedGlyphEffect("realityDTglyph"),o=.025,c=Math.pow(Math.max(1,player.records.thisReality.maxDT.pLog10()),a)*o,d=Effects.max(1,RealityUpgrade(18));return{ep:{name:"EP",value:i,coeff:e,exp:.5},repl:{name:"Replicanti",value:s,coeff:r,exp:n},dt:{name:"DT",value:c,coeff:o,exp:a},eternities:{name:"Eternities",value:d,coeff:.45,exp:.5}}}function d7e(){const t=_4(),e=GameCache.staticGlyphWeights.value,i=1/3,n=5,r=player.celestials.effarig.glyphWeights,s=(_,E)=>{const C=_.value,S=Math.pow(4*E,i);_.value=C>0?Math.pow(C*n,S)/n:0,_.coeff=Math.pow(n,S-1)*Math.pow(_.coeff,S),_.exp*=S};s(t.ep,r.ep/100),s(t.repl,r.repl/100),s(t.dt,r.dt/100),s(t.eternities,r.eternities/100);const a=Ra.unlocks.relicShardGlyphLevelBoost.effectOrDefault(0);let o=t.ep.value*t.repl.value*t.dt.value*t.eternities.value*e.perkShop+a;const c=SingularityMilestone.glyphLevelFromSingularities.effectOrDefault(1);o*=c;let d=o;const p=(_,E,C)=>{if(_<E)return _;const S=(_-E)/C;return E+.5*C*(Math.sqrt(1+4*S)-1)};d=p(d,e.instability,500),d=p(d,e.hyperInstability,400);const m=d>0?o/d:1,y=e.realityUpgrades+e.achievements;return o+=y,d+=y,{ep:t.ep,repl:t.repl,dt:t.dt,eter:t.eternities,perkShop:e.perkShop,scalePenalty:m,rowFactor:e.realityUpgrades,achievementFactor:e.achievements,shardFactor:a,singularityEffect:c,rawLevel:o,actualLevel:Math.max(1,d)}}function h7e(){const t=Effects.max(1,PerkShopUpgrade.glyphLevel),e=Glyphs.instabilityThreshold,i=Glyphs.hyperInstabilityThreshold,n=[Array.range(1,5).every(s=>RealityUpgrade(s).boughtAmount>0)].concat(Array.range(1,4).map(s=>Array.range(1,5).every(a=>RealityUpgrade(5*s+a).isBought))).filter(s=>s).length,r=Effects.sum(Achievement(148),Achievement(166));return{perkShop:t,instability:e,hyperInstability:i,realityUpgrades:n,achievements:r}}const ik={deltaTime:new TimeSpan(0),unscaledDeltaTime:new TimeSpan(0),update(t,e){this.unscaledDeltaTime=TimeSpan.fromMilliseconds(t),this.deltaTime=TimeSpan.fromMilliseconds(e)}},f7e={fromMilliseconds(t){return TimeSpan.fromMilliseconds(t())},toMilliseconds(t,e){Guard.isTimeSpan(t),e(t.totalMilliseconds)},toDateTimeString(t){return new Date(t).toString().replace(/^.{4}(.*:..:..).*$/u,"$1")},get deltaTimeFull(){return ik.deltaTime},get deltaTime(){return this.deltaTimeFull.totalSeconds},get deltaTimeMs(){return this.deltaTimeFull.totalMilliseconds},get unscaledDeltaTime(){return ik.unscaledDeltaTime},get totalTimePlayed(){return this.fromMilliseconds(()=>player.records.totalTimePlayed)},set totalTimePlayed(t){this.toMilliseconds(t,e=>player.records.totalTimePlayed=e)},get timeSinceBlackHole(){return this.fromMilliseconds(()=>{const t=player.records.totalTimePlayed-player.records.timePlayedAtBHUnlock;return Math.max(0,t)})},get realTimeDoomed(){return this.fromMilliseconds(()=>player.records.realTimeDoomed)},set realTimeDoomed(t){this.toMilliseconds(t,e=>player.records.realTimeDoomed=e)},get realTimePlayed(){return this.fromMilliseconds(()=>player.records.realTimePlayed)},set realTimePlayed(t){this.toMilliseconds(t,e=>player.records.realTimePlayed=e)},get thisInfinity(){return this.fromMilliseconds(()=>player.records.thisInfinity.time)},set thisInfinity(t){this.toMilliseconds(t,e=>player.records.thisInfinity.time=e)},get thisInfinityRealTime(){return this.fromMilliseconds(()=>player.records.thisInfinity.realTime)},set thisInfinityRealTime(t){this.toMilliseconds(t,e=>player.records.thisInfinity.realTime=e)},get bestInfinity(){return this.fromMilliseconds(()=>player.records.bestInfinity.time)},set bestInfinity(t){this.toMilliseconds(t,e=>player.records.bestInfinity.time=e)},get bestInfinityRealTime(){return this.fromMilliseconds(()=>player.records.bestInfinity.realTime)},set bestInfinityRealTime(t){this.toMilliseconds(t,e=>player.records.bestInfinity.realTime=e)},get thisEternity(){return this.fromMilliseconds(()=>player.records.thisEternity.time)},set thisEternity(t){this.toMilliseconds(t,e=>player.records.thisEternity.time=e)},get thisEternityRealTime(){return this.fromMilliseconds(()=>player.records.thisEternity.realTime)},set thisEternityRealTime(t){this.toMilliseconds(t,e=>player.records.thisEternity.realTime=e)},get bestEternity(){return this.fromMilliseconds(()=>player.records.bestEternity.time)},set bestEternity(t){this.toMilliseconds(t,e=>player.records.bestEternity.time=e)},get bestEternityRealTime(){return this.fromMilliseconds(()=>player.records.bestEternity.realTime)},set bestEternityRealTime(t){this.toMilliseconds(t,e=>player.records.bestEternity.realTime=e)},get thisReality(){return this.fromMilliseconds(()=>player.records.thisReality.time)},set thisReality(t){this.toMilliseconds(t,e=>player.records.thisReality.time=e)},get thisRealityRealTime(){return this.fromMilliseconds(()=>player.records.thisReality.realTime)},set thisRealityRealTime(t){this.toMilliseconds(t,e=>player.records.thisReality.realTime=e)},get bestReality(){return this.fromMilliseconds(()=>player.records.bestReality.time)},set bestReality(t){this.toMilliseconds(t,e=>player.records.bestReality.time=e)},get bestRealityRealTime(){return this.fromMilliseconds(()=>player.records.bestReality.realTime)},set bestRealityRealTime(t){this.toMilliseconds(t,e=>player.records.bestReality.realTime=e)},get worstChallenge(){return this.fromMilliseconds(()=>GameCache.worstChallengeTime.value)},get challengeSum(){return this.fromMilliseconds(()=>GameCache.challengeTimeSum.value)},get infinityChallengeSum(){return this.fromMilliseconds(()=>GameCache.infinityChallengeTimeSum.value)}};function E4(){let t=Replicanti.galaxies.bought;t*=1+Effects.sum(TimeStudy(132),TimeStudy(133)),t+=Replicanti.galaxies.extra;const e=Math.min(Replicanti.galaxies.bought,ReplicantiUpgrade.galaxies.value);t+=e*Effects.sum(EternityChallenge(8).reward);let i=player.dilation.totalTachyonGalaxies;return i*=1+Math.max(0,Replicanti.amount.log10()/1e6)*AlchemyResource.alternation.effectValue,Math.max(player.galaxies+GalaxyGenerator.galaxies+t+i,0)}function nk(){if(InfinityChallenge(3).isRunning)return L.D1;if(Ra.isRunning)return L.C1D1_1245;let t=E4();const e=Effects.product(InfinityUpgrade.galaxyBoost,InfinityUpgrade.galaxyBoost.chargedEffect,BreakInfinityUpgrade.galaxyBoost,TimeStudy(212),TimeStudy(232),Achievement(86),Achievement(178),InfinityChallenge(5).reward,PelleUpgrade.galaxyPower,PelleRifts.decay.milestones[1]);if(t<3){let r=.8892841262783459;player.galaxies===1&&(r=1/1.11888888),player.galaxies===2&&(r=1/1.11267177),NormalChallenge(5).isRunning&&(r=1/1.08,player.galaxies===1&&(r=1/1.07632),player.galaxies===2&&(r=1/1.072));const s=.02*e;return Pelle.isDoomed&&(t*=.5),t*=Pelle.specialGlyphEffect.power,L.D0_01.clampMin(r-t*s)}let i=.8;return NormalChallenge(5).isRunning&&(i=.83),t-=2,t*=e,t*=getAdjustedGlyphEffect("cursedgalaxies"),t*=getAdjustedGlyphEffect("realitygalaxies"),t*=1+ImaginaryUpgrade(9).effectOrDefault(0),Pelle.isDoomed&&(t*=.5),t*=Pelle.specialGlyphEffect.power,L.D0_965.pow(t-2).times(i)}function p7e(){return!il.isAvailableForPurchase||!il.isAffordable?!1:(NormalChallenge(9).isRunning&&il.multiplySameCosts(),Tutorial.turnOffEffect(TUTORIAL_STATE.TICKSPEED),Currency.antimatter.subtract(il.cost),player.totalTickBought++,player.records.thisInfinity.lastBuyTime=player.records.thisInfinity.time,player.requirementChecks.permanent.singleTickspeed++,NormalChallenge(2).isRunning&&(player.chall2Pow=0),GameUI.update(),!0)}function m7e(){if(!il.isAvailableForPurchase||!il.isAffordable)return;let t=!1;if(Tutorial.turnOffEffect(TUTORIAL_STATE.TICKSPEED),NormalChallenge(9).isRunning){const e=Player.infinityGoal;let i=il.cost;for(;Currency.antimatter.gt(i)&&i.lt(e);)il.multiplySameCosts(),Currency.antimatter.subtract(i),player.totalTickBought++,t=!0,i=il.cost}else{const e=il.costScale.getMaxBought(player.totalTickBought,Currency.antimatter.value,1);if(e===null)return;Currency.antimatter.subtract(Decimal.pow10(e.logPrice)),player.totalTickBought+=e.quantity,t=!0}t&&(player.records.thisInfinity.lastBuyTime=player.records.thisInfinity.time,NormalChallenge(2).isRunning&&(player.chall2Pow=0))}function y7e(){player.totalTickBought=0,player.chall9TickspeedCostBumps=0}const il={get isUnlocked(){return AntimatterDimension(2).bought>0||EternityMilestone.unlockAllND.isReached||PlayerProgress.realityUnlocked()},get isAvailableForPurchase(){return this.isUnlocked&&!EternityChallenge(9).isRunning&&!Laitela.continuumActive&&(player.break||this.cost.lt(Decimal.NUMBER_MAX_VALUE))},get isAffordable(){return Currency.antimatter.gte(this.cost)},get multiplier(){return nk()},get current(){const t=Effarig.isRunning?Effarig.tickspeed:this.baseValue.powEffectOf(DilationUpgrade.tickspeedPower);return player.dilation.active||PelleStrikes.dilation.hasStrike?dilatedValueOf(t):t},get cost(){return this.costScale.calculateCost(player.totalTickBought+player.chall9TickspeedCostBumps)},get costScale(){return new ExponentialCostScaling({baseCost:1e3,baseIncrease:10,costScale:Player.tickSpeedMultDecrease,scalingCostThreshold:Number.MAX_VALUE})},get continuumValue(){return this.isUnlocked?this.costScale.getContinuumValue(Currency.antimatter.value,1)*Laitela.matterExtraPurchaseFactor:0},get baseValue(){return L.E3.timesEffectsOf(Achievement(36),Achievement(45),Achievement(66),Achievement(83)).times(nk().pow(this.totalUpgrades))},get totalUpgrades(){let t;return Laitela.continuumActive?t=this.continuumValue:t=player.totalTickBought,t+player.totalTickGained},get perSecond(){return Decimal.divide(1e3,this.current)},multiplySameCosts(){for(const t of AntimatterDimensions.all)t.cost.e===this.cost.e&&t.costBumps++}},Zo={BASE_SOFTCAP:3e5,GROWTH_RATE:6e-6,GROWTH_EXP:2,multToNext:1.33,get amount(){return player.totalTickGained},get softcap(){let t=Zo.BASE_SOFTCAP;return Enslaved.has(ENSLAVED_UNLOCKS.FREE_TICKSPEED_SOFTCAP)&&(t+=1e5),t},fromShards(t){const e=1+(Effects.min(1.33,TimeStudy(171))-1)*Math.max(getAdjustedGlyphEffect("cursedtickspeed"),1),i=Math.log(e),n=t.ln(),r=Math.max(0,n/i);if(r<=Zo.softcap)return this.multToNext=e,{newAmount:Math.ceil(r),nextShards:Decimal.pow(e,Math.ceil(r))};const s=Zo.softcap*i,a=(n-s)/i,o=Zo.GROWTH_RATE/Zo.GROWTH_EXP/i,c=S=>o*Math.pow(Math.max(S,0),Zo.GROWTH_EXP)+S,d=S=>Zo.GROWTH_EXP*o*Math.pow(Math.max(S,0),Zo.GROWTH_EXP-1)+1,p=S=>S-(c(S)-a)/d(S);let m,y=Math.min(a,Math.pow(a/o,1/Zo.GROWTH_EXP)),_=0;do m=y,y=p(y);while(y<m&&++_<100);const E=Math.floor(y),C=Decimal.exp(s+c(E+1)*i);return this.multToNext=Decimal.exp((c(E+1)-c(E))*i),{newAmount:E+Zo.softcap,nextShards:C}}};function g7e(){let t=L.D1;return t=t.times(Achievements.power),t=t.times(ShopPurchase.dimPurchases.currentMult),t=t.times(ShopPurchase.allDimPurchases.currentMult),EternityChallenge(9).isRunning||(t=t.times(Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate).max(1))),t=t.timesEffectsOf(BreakInfinityUpgrade.totalAMMult,BreakInfinityUpgrade.currentAMMult,BreakInfinityUpgrade.achievementMult,BreakInfinityUpgrade.slowestChallengeMult,InfinityUpgrade.totalTimeMult,InfinityUpgrade.thisInfinityTimeMult,Achievement(48),Achievement(56),Achievement(65),Achievement(72),Achievement(73),Achievement(74),Achievement(76),Achievement(84),Achievement(91),Achievement(92),TimeStudy(91),TimeStudy(101),TimeStudy(161),TimeStudy(193),InfinityChallenge(3),InfinityChallenge(3).reward,InfinityChallenge(8),EternityChallenge(10),AlchemyResource.dimensionality,PelleUpgrade.antimatterDimensionMult),t=t.dividedByEffectOf(InfinityChallenge(6)),t=t.times(getAdjustedGlyphEffect("powermult")),t=t.times(Currency.realityMachines.value.powEffectOf(AlchemyResource.force)),Pelle.isDoomed&&(t=t.dividedBy(10)),t}function v7e(t){if(t<1||t>8)throw new Error(`Invalid Antimatter Dimension tier ${t}`);if(NormalChallenge(10).isRunning&&t>6)return L.D1;if(EternityChallenge(11).isRunning)return Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate).max(1).times(DimBoost.multiplierToNDTier(t));let e=L.D1;e=b7e(e,t),e=_7e(e,t);const i=getAdjustedGlyphEffect("dilationpow");return player.dilation.active||PelleStrikes.dilation.hasStrike?e=dilatedValueOf(e.pow(i)):Enslaved.isRunning&&(e=dilatedValueOf(e)),e=e.timesEffectOf(DilationUpgrade.ndMultDT),Effarig.isRunning?e=Effarig.multiplier(e):V.isRunning&&(e=e.pow(.5)),AlchemyResource.inflation.isUnlocked&&e.gte(AlchemyResource.inflation.effectValue)&&(e=e.pow(1.05)),e}function b7e(t,e){let i=t.times(GameCache.antimatterDimensionCommonMultiplier.value),n;Laitela.continuumActive?n=Vn(e).continuumValue:n=Math.floor(Vn(e).bought/10),i=i.times(Decimal.pow(Df.buyTenMultiplier,n)),i=i.times(DimBoost.multiplierToNDTier(e));let r=L.D1.timesEffectsOf(Vn(e).infinityUpgrade,BreakInfinityUpgrade.infinitiedMult);return r=r.pow(TimeStudy(31).effectOrDefault(1)),i=i.times(r),e===1&&(i=i.timesEffectsOf(InfinityUpgrade.unspentIPMult,InfinityUpgrade.unspentIPMult.chargedEffect,Achievement(28),Achievement(31),Achievement(68),Achievement(71),TimeStudy(234))),e===8&&(i=i.times(Sacrifice.totalBoost)),i=i.timesEffectsOf(e===8?Achievement(23):null,e<8?Achievement(34):null,e<=4?Achievement(64):null,e<8?TimeStudy(71):null,e===8?TimeStudy(214):null,e>1&&e<8?InfinityChallenge(8).reward:null),Achievement(43).isUnlocked&&(i=i.times(1+e/100)),i=i.clampMin(1),i}function _7e(t,e){let i=t;const n=getAdjustedGlyphEffect("powerpow"),r=getAdjustedGlyphEffect("effarigdimensions");return InfinityChallenge(4).isRunning&&player.postC4Tier!==e&&(i=i.pow(InfinityChallenge(4).effectValue)),InfinityChallenge(4).isCompleted&&(i=i.pow(InfinityChallenge(4).reward.effectValue)),i=i.pow(n*r*Ra.momentumValue),i=i.powEffectsOf(Vn(e).infinityUpgrade.chargedEffect,InfinityUpgrade.totalTimeMult.chargedEffect,InfinityUpgrade.thisInfinityTimeMult.chargedEffect,AlchemyResource.power,Achievement(183),PelleRifts.paradox),i=i.pow(getAdjustedGlyphEffect("curseddimensions")),i=i.pow(VUnlocks.adPow.effectOrDefault(1)),PelleStrikes.infinity.hasStrike&&(i=i.pow(.5)),i}function FT(t){t===1&&Tutorial.turnOffEffect(TUTORIAL_STATE.DIM1),t===2&&Tutorial.turnOffEffect(TUTORIAL_STATE.DIM2),Achievement(10+t).unlock(),Achievement(23).tryUnlock(),player.speedrun.isActive&&!player.speedrun.hasStarted&&Speedrun.startTimer(),NormalChallenge(2).isRunning&&(player.chall2Pow=0),(NormalChallenge(4).isRunning||InfinityChallenge(1).isRunning)&&Df.resetAmountUpToTier(t-1),player.postC4Tier=t,player.records.thisInfinity.lastBuyTime=player.records.thisInfinity.time,t!==8&&(player.requirementChecks.eternity.onlyAD8=!1),t!==1&&(player.requirementChecks.eternity.onlyAD1=!1),t===8&&(player.requirementChecks.infinity.noAD8=!1),t===1&&(player.requirementChecks.eternity.noAD1=!1)}function $T(t){const e=Vn(t);if(Laitela.continuumActive||!e.isAvailableForPurchase||!e.isAffordable)return!1;const i=e.cost;return t===8&&Enslaved.isRunning&&Vn(8).bought>=1?!1:(e.currencyAmount=e.currencyAmount.minus(i),e.boughtBefore10===9&&e.challengeCostBump(),e.amount=e.amount.plus(1),e.bought++,t===1&&Achievement(28).tryUnlock(),FT(t),!0)}function E7e(t){const e=Vn(t);if(Laitela.continuumActive||!e.isAvailableForPurchase||!e.isAffordableUntil10)return!1;const i=e.costUntil10;return t===8&&Enslaved.isRunning?$T(8):(e.currencyAmount=e.currencyAmount.minus(i),e.challengeCostBump(),e.amount=e.amount.plus(e.remainingUntil10),e.bought+=e.remainingUntil10,FT(t),!0)}function T7e(t){const e=Vn(t);if(Laitela.continuumActive||!e.isAvailableForPurchase||!e.isAffordable)return!1;const i=e.howManyCanBuy,n=e.cost.times(i);return t===8&&Enslaved.isRunning?$T(8):(e.currencyAmount=e.currencyAmount.minus(n),e.challengeCostBump(),e.amount=e.amount.plus(i),e.bought+=i,FT(t),!0)}function c2(t){if(Laitela.continuumActive)return;const e=Vn(t);e.challengeCostBump(),e.amount=Decimal.round(e.amount.plus(e.remainingUntil10)),e.bought+=e.remainingUntil10,FT(t)}function w7e(){if(!Laitela.continuumActive){player.requirementChecks.infinity.maxAll=!0;for(let t=1;t<9;t++)T4(t);buyMaxTickSpeed()}}function T4(t,e=1/0){const i=Vn(t);if(Laitela.continuumActive||!i.isAvailableForPurchase||!i.isAffordableUntil10)return;const n=i.costUntil10;let r=e;const s=Player.infinityGoal;if(i.cost.gt(s)&&Player.isInAntimatterChallenge)return;if(t===8&&Enslaved.isRunning){$T(8);return}if(i.currencyAmount.gte(n)&&(i.currencyAmount=i.currencyAmount.minus(n),c2(t),r--),r<=0)return;if(NormalChallenge(9).isRunning||InfinityChallenge(5).isRunning){for(;i.isAffordableUntil10&&i.cost.lt(s)&&r>0;)i.currencyAmount=i.currencyAmount.minus(i.costUntil10),c2(t),r--;return}const a=i.costScale.getMaxBought(Math.floor(i.bought/10)+i.costBumps,i.currencyAmount,10);if(a===null)return;let o=a.quantity;o>r&&(o=r),i.amount=i.amount.plus(10*o).round(),i.bought+=10*o,i.currencyAmount=i.currencyAmount.minus(Decimal.pow10(a.logPrice))}class C7e extends kT{constructor(e){super(()=>player.dimensions.antimatter,e);const i=[null,10,100,1e4,1e6,1e9,1e13,1e18,1e24];this._baseCost=i[e];const n=[null,1e3,1e4,1e5,1e6,1e8,1e10,1e12,1e15];this._baseCostMultiplier=n[e];const r=[null,10,100,100,500,2500,2e4,2e5,4e6];this._c6BaseCost=r[e];const s=[null,1e3,5e3,1e4,12e3,18e3,26e3,32e3,42e3];this._c6BaseCostMultiplier=s[e]}get costScale(){return new ExponentialCostScaling({baseCost:NormalChallenge(6).isRunning?this._c6BaseCost:this._baseCost,baseIncrease:NormalChallenge(6).isRunning?this._c6BaseCostMultiplier:this._baseCostMultiplier,costScale:Player.dimensionMultDecrease,scalingCostThreshold:Number.MAX_VALUE})}get cost(){return this.costScale.calculateCost(Math.floor(this.bought/10)+this.costBumps)}get costBumps(){return this.data.costBumps}set costBumps(e){this.data.costBumps=e}get boughtBefore10(){return this.bought%10}get remainingUntil10(){return 10-this.boughtBefore10}get costUntil10(){return this.cost.times(this.remainingUntil10)}get howManyCanBuy(){const e=this.currencyAmount.dividedBy(this.cost);return Decimal.floor(Decimal.max(Decimal.min(e,10-this.boughtBefore10),0)).toNumber()}get infinityUpgrade(){switch(this.tier){case 1:case 8:return InfinityUpgrade.dim18mult;case 2:case 7:return InfinityUpgrade.dim27mult;case 3:case 6:return InfinityUpgrade.dim36mult;case 4:case 5:return InfinityUpgrade.dim45mult}return!1}get rateOfChange(){const e=this.tier;if(e===8||e>3&&EternityChallenge(3).isRunning||e>6&&NormalChallenge(12).isRunning)return L.D0;let i;return e===7&&EternityChallenge(7).isRunning?i=InfinityDimension(1).productionPerSecond.times(10):NormalChallenge(12).isRunning?i=Vn(e+2).productionPerSecond:i=Vn(e+1).productionPerSecond,i.times(10).dividedBy(this.amount.max(1)).times(getGameSpeedupForDisplay())}get isProducing(){const e=this.tier;return EternityChallenge(3).isRunning&&e>4||NormalChallenge(10).isRunning&&e>6||Laitela.isRunning&&e>Laitela.maxAllowedDimension?!1:this.totalAmount.gt(0)}get currencyAmount(){return this.tier>=3&&NormalChallenge(6).isRunning?Vn(this.tier-2).amount:Currency.antimatter.value}set currencyAmount(e){this.tier>=3&&NormalChallenge(6).isRunning?Vn(this.tier-2).amount=e:Currency.antimatter.value=e}get continuumValue(){return this.isAvailableForPurchase?this.tier===8&&Enslaved.isRunning?1:this.costScale.getContinuumValue(this.currencyAmount,10)*Laitela.matterExtraPurchaseFactor:0}get continuumAmount(){return Laitela.continuumActive?Math.floor(10*this.continuumValue):0}get totalAmount(){return this.amount.max(this.continuumAmount)}get isAffordable(){return Laitela.continuumActive||!player.break&&this.cost.gt(Decimal.NUMBER_MAX_VALUE)?!1:this.cost.lte(this.currencyAmount)}get isAffordableUntil10(){return!player.break&&this.cost.gt(Decimal.NUMBER_MAX_VALUE)?!1:this.costUntil10.lte(this.currencyAmount)}get isAvailableForPurchase(){if(!EternityMilestone.unlockAllND.isReached&&this.tier>DimBoost.totalBoosts+4)return!1;const e=this.tier===1||Vn(this.tier-1).totalAmount.gt(0);return!EternityMilestone.unlockAllND.isReached&&!e?!1:this.tier<7||!NormalChallenge(10).isRunning}reset(){this.amount=L.D0,this.bought=0,this.costBumps=0}resetAmount(){this.amount=L.D0}challengeCostBump(){InfinityChallenge(5).isRunning?this.multiplyIC5Costs():NormalChallenge(9).isRunning&&this.multiplySameCosts()}multiplySameCosts(){for(const e of Df.all.filter(i=>i.tier!==this.tier))e.cost.e===this.cost.e&&e.costBumps++;Tickspeed.cost.e===this.cost.e&&player.chall9TickspeedCostBumps++}multiplyIC5Costs(){for(const e of Df.all.filter(i=>i.tier!==this.tier))(this.tier<=4&&e.cost.lt(this.cost)||this.tier>=5&&e.cost.gt(this.cost))&&e.costBumps++}get multiplier(){return GameCache.antimatterDimensionFinalMultipliers[this.tier].value}get cappedProductionInNormalChallenges(){return player.break&&!NormalChallenge.isRunning||InfinityChallenge.isRunning||Enslaved.isRunning?Decimal.MAX_VALUE:L.E315}get productionPerSecond(){const e=this.tier;if(Laitela.isRunning&&e>Laitela.maxAllowedDimension)return L.D0;let i=this.totalAmount;NormalChallenge(12).isRunning&&(e===2&&(i=i.pow(1.6)),e===4&&(i=i.pow(1.4)),e===6&&(i=i.pow(1.2)));let n=i.times(this.multiplier).times(Tickspeed.perSecond);if(NormalChallenge(2).isRunning&&(n=n.times(player.chall2Pow)),e===1&&(NormalChallenge(3).isRunning&&(n=n.times(player.chall3Pow)),n.gt(10))){const r=n.log10();n=Decimal.pow10(Math.pow(r,getAdjustedGlyphEffect("effarigantimatter")))}return n=n.min(this.cappedProductionInNormalChallenges),n}}const Vn=C7e.createAccessor(),Df={all:Vn.index.compact(),reset(){for(const t of Df.all)t.reset();GameCache.dimensionMultDecrease.invalidate()},resetAmountUpToTier(t){for(const e of Df.all.slice(0,t))e.resetAmount()},get buyTenMultiplier(){if(NormalChallenge(7).isRunning)return L.D2.min(1+DimBoost.totalBoosts/5);let t=L.D2.plusEffectsOf(Achievement(141).effects.buyTenMult,EternityChallenge(3).reward);return t=t.timesEffectsOf(InfinityUpgrade.buy10Mult,Achievement(58)).times(getAdjustedGlyphEffect("powerbuy10")),t=t.pow(getAdjustedGlyphEffect("effarigforgotten")).powEffectOf(InfinityUpgrade.buy10Mult.chargedEffect),t=t.pow(ImaginaryUpgrade(14).effectOrDefault(1)),t},tick(t){const e=!player.break||Player.isInAntimatterChallenge;if(e&&Currency.antimatter.gte(Player.infinityGoal))return;let i=EternityChallenge(3).isRunning?3:7,n=1;NormalChallenge(12).isRunning&&(i--,n++);for(let r=i;r>=1;--r)Vn(r+n).produceDimensions(Vn(r),t/10);Vn(1).amount.gt(0)&&(player.requirementChecks.eternity.noAD1=!1),Vn(1).produceCurrency(Currency.antimatter,t),NormalChallenge(12).isRunning&&Vn(2).produceCurrency(Currency.antimatter,t),e&&Currency.antimatter.dropTo(Player.infinityGoal)}};function S7e(){let t=new Decimal(ShopPurchase.allDimPurchases.currentMult).timesEffectsOf(Achievement(75),TimeStudy(82),TimeStudy(92),TimeStudy(162),InfinityChallenge(1).reward,InfinityChallenge(6).reward,EternityChallenge(4).reward,EternityChallenge(9).reward,EternityUpgrade.idMultEP,EternityUpgrade.idMultEternities,EternityUpgrade.idMultICRecords,AlchemyResource.dimensionality,ImaginaryUpgrade(8),PelleRifts.recursion.milestones[1]);return Replicanti.areUnlocked&&Replicanti.amount.gt(1)&&(t=t.times(replicantiMult())),t}function k7e(){const t=Autobuyer.infinityDimension(1).isActive;for(let e=1;e<9;e++)Autobuyer.infinityDimension(e).isActive=!t}class A7e extends kT{constructor(e){super(()=>player.dimensions.infinity,e);const i=[void 0,L.E1100,L.E1900,L.E2400,L.E10500,L.E30000,L.E45000,L.E54000,L.E60000];this._unlockRequirement=i[e];const n=[null,1e3,1e6,1e8,1e10,1e15,1e20,1e25,1e30];this._costMultiplier=n[e];const r=[null,50,30,10,5,5,5,5,5];this._powerMultiplier=r[e];const s=[null,1e8,1e9,1e10,1e20,1e140,1e200,1e250,1e280];this._baseCost=new Decimal(s[e]),this.ipRequirement=s[1]}get cost(){return this.data.cost}set cost(e){this.data.cost=e}get baseAmount(){return this.data.baseAmount}set baseAmount(e){this.data.baseAmount=e}get isUnlocked(){return this.data.isUnlocked}set isUnlocked(e){this.data.isUnlocked=e}get amRequirement(){return this._unlockRequirement}get antimatterRequirementReached(){return player.records.thisEternity.maxAM.gte(this.amRequirement)}get hasIPUnlock(){return this.tier===1&&!PlayerProgress.eternityUnlocked()}get ipRequirementReached(){return!this.hasIPUnlock||Currency.infinityPoints.value.gte(this.ipRequirement)}get canUnlock(){return(Perk.bypassIDAntimatter.canBeApplied||this.antimatterRequirementReached)&&this.ipRequirementReached}get isAvailableForPurchase(){return mm.canBuy()&&this.isUnlocked&&this.isAffordable&&!this.isCapped}get isAffordable(){return Currency.infinityPoints.gte(this.cost)}get rateOfChange(){const e=this.tier;let i=L.D0;e===8?(EternityChallenge(7).reward.applyEffect(r=>i=r.times(10)),EternityChallenge(7).isRunning&&EternityChallenge(7).applyEffect(r=>i=r.times(10))):i=Qo(e+1).productionPerSecond;const n=Decimal.max(this.amount,1);return i.times(10).dividedBy(n).times(getGameSpeedupForDisplay())}get productionPerSecond(){if(EternityChallenge(2).isRunning||EternityChallenge(10).isRunning||Laitela.isRunning&&this.tier>Laitela.maxAllowedDimension)return L.D0;let e=this.amount;return EternityChallenge(11).isRunning?e:(EternityChallenge(7).isRunning&&(e=e.times(Tickspeed.perSecond)),e.times(this.multiplier))}get multiplier(){const e=this.tier;if(EternityChallenge(11).isRunning)return L.D1;let i=GameCache.infinityDimensionCommonMultiplier.value.timesEffectsOf(e===1?Achievement(94):null,e===4?TimeStudy(72):null,e===1?EternityChallenge(2).reward:null);return i=i.times(Decimal.pow(this.powerMultiplier,Math.floor(this.baseAmount/10))),e===1&&(i=i.times(PelleRifts.decay.milestones[0].effectOrDefault(1))),i=i.pow(getAdjustedGlyphEffect("infinitypow")),i=i.pow(getAdjustedGlyphEffect("effarigdimensions")),i=i.pow(getAdjustedGlyphEffect("curseddimensions")),i=i.powEffectOf(AlchemyResource.infinity),i=i.pow(Ra.momentumValue),i=i.powEffectOf(PelleRifts.paradox),(player.dilation.active||PelleStrikes.dilation.hasStrike)&&(i=dilatedValueOf(i)),Effarig.isRunning?i=Effarig.multiplier(i):V.isRunning&&(i=i.pow(.5)),PelleStrikes.powerGalaxies.hasStrike&&(i=i.pow(.5)),i}get isProducing(){const e=this.tier;return EternityChallenge(2).isRunning||EternityChallenge(10).isRunning||Laitela.isRunning&&e>Laitela.maxAllowedDimension?!1:this.amount.gt(0)}get baseCost(){return this._baseCost}get costMultiplier(){let e=this._costMultiplier;return EternityChallenge(12).reward.applyEffect(i=>e=Math.pow(e,i)),e}get powerMultiplier(){return new Decimal(this._powerMultiplier).timesEffectsOf(this._tier===8?GlyphSacrifice.infinity:null).pow(ImaginaryUpgrade(14).effectOrDefault(1))}get purchases(){return this.data.baseAmount/10}get purchaseCap(){return Enslaved.isRunning?1:mm.capIncrease+(this.tier===8?Number.MAX_VALUE:mm.HARDCAP_PURCHASES)}get isCapped(){return this.purchases>=this.purchaseCap}get hardcapIPAmount(){return this._baseCost.times(Decimal.pow(this.costMultiplier,this.purchaseCap))}resetAmount(){this.amount=new Decimal(this.baseAmount)}fullReset(){this.cost=new Decimal(this.baseCost),this.amount=L.D0,this.bought=0,this.baseAmount=0,this.isUnlocked=!1}unlock(){return this.isUnlocked?!0:this.canUnlock?(this.isUnlocked=!0,EventHub.dispatch(GAME_EVENT.INFINITY_DIMENSION_UNLOCKED,this.tier),this.tier===1&&!PlayerProgress.eternityUnlocked()&&Tab.dimensions.infinity.show(),!0):!1}buySingle(){if(!this.isUnlocked)return this.unlock();if(!this.isAvailableForPurchase)return!1;if(ImaginaryUpgrade(15).isLockingMechanics){const e=this.tier===1?"purchase a 1st Infinity Dimension":"purchase a Dimension which will produce 1st IDs";return ImaginaryUpgrade(15).tryShowWarningModal(e),!1}return Currency.infinityPoints.purchase(this.cost),this.cost=Decimal.round(this.cost.times(this.costMultiplier)),this.amount=this.amount.plus(10),this.baseAmount+=10,EternityChallenge(8).isRunning&&(player.eterc8ids-=1),!0}buyMax(e){if(!this.isAvailableForPurchase)return!1;if(ImaginaryUpgrade(15).isLockingMechanics){const r=this.tier===1?"purchase a 1st Infinity Dimension":"purchase a Dimension which will produce 1st IDs";return e||ImaginaryUpgrade(15).tryShowWarningModal(r),!1}let i=this.purchaseCap-this.purchases;EternityChallenge(8).isRunning&&(i=Math.clampMax(i,player.eterc8ids));const n=new LinearCostScaling(Currency.infinityPoints.value,this.cost,this.costMultiplier,i);return n.purchases<=0?!1:(Currency.infinityPoints.purchase(n.totalCost),this.cost=this.cost.times(n.totalCostMultiplier),this.amount=this.amount.plus(10*n.purchases),this.baseAmount+=10*n.purchases,EternityChallenge(8).isRunning&&(player.eterc8ids-=n.purchases),!0)}}const Qo=A7e.createAccessor(),mm={all:Qo.index.compact(),HARDCAP_PURCHASES:2e6,unlockNext(){Qo(8).isUnlocked||this.next().unlock()},next(){if(Qo(8).isUnlocked)throw"All Infinity Dimensions are unlocked";return this.all.first(t=>!t.isUnlocked)},resetAmount(){Currency.infinityPower.reset();for(const t of mm.all)t.resetAmount()},fullReset(){for(const t of mm.all)t.fullReset()},get capIncrease(){return Math.floor(Tesseracts.capIncrease())},get totalDimCap(){return this.HARDCAP_PURCHASES+this.capIncrease},canBuy(){return!EternityChallenge(2).isRunning&&!EternityChallenge(10).isRunning&&(!EternityChallenge(8).isRunning||player.eterc8ids>0)},canAutobuy(){return this.canBuy()&&!EternityChallenge(8).isRunning},tick(t){for(let e=8;e>1;e--)Qo(e).produceDimensions(Qo(e-1),t/10);EternityChallenge(7).isRunning?NormalChallenge(10).isRunning||Qo(1).produceDimensions(AntimatterDimension(7),t):Qo(1).produceCurrency(Currency.infinityPower,t),player.requirementChecks.reality.maxID1=player.requirementChecks.reality.maxID1.clampMin(Qo(1).amount)},tryAutoUnlock(){if(!(!EternityMilestone.autoUnlockID.isReached||Qo(8).isUnlocked)){for(const t of this.all)if(!t.unlock())break}},buyMax(){const t=this.all.filter(e=>e.unlock());t.slice().reverse().forEach(e=>{e.purchases===0&&e.buySingle()}),t.forEach(e=>e.buyMax(!1))},get powerConversionRate(){const t=PelleRifts.paradox.milestones[2].effectOrDefault(1);return(7+getAdjustedGlyphEffect("infinityrate")+PelleUpgrade.infConversion.effectOrDefault(0))*t}};function UE(t,e=!1){const i=js(t);if(t>4){if(!TimeStudy.timeDimension(t).isBought)return!1;if(RealityUpgrade(13).isLockingMechanics&&Currency.eternityPoints.gte(i.cost))return e||RealityUpgrade(13).tryShowWarningModal(),!1}return Currency.eternityPoints.lt(i.cost)||Enslaved.isRunning&&i.bought>0?!1:ImaginaryUpgrade(15).isLockingMechanics&&EternityChallenge(7).completions>0?(e||ImaginaryUpgrade(15).tryShowWarningModal(`purchase a Time Dimension,
        which will produce Infinity Dimensions through EC7`),!1):(Currency.eternityPoints.subtract(i.cost),i.amount=i.amount.plus(1),i.bought+=1,i.cost=i.nextCost(i.bought),!0)}function R7e(){for(const t of Lb.all)t.amount=new Decimal(t.bought);C4()}function I7e(){for(const t of Lb.all)t.cost=new Decimal(t.baseCost),t.amount=L.D0,t.bought=0}function D7e(){const t=Autobuyer.timeDimension(1).isActive;for(let e=1;e<9;e++)Autobuyer.timeDimension(e).isActive=!t}function w4(t,e=1,i=!1){const n=Currency.eternityPoints.value.times(e),r=js(t);if(n.lt(r.cost))return!1;if(t>4){if(!TimeStudy.timeDimension(t).isBought)return!1;if(RealityUpgrade(13).isLockingMechanics)return i||RealityUpgrade(13).tryShowWarningModal(),!1}if(ImaginaryUpgrade(15).isLockingMechanics&&EternityChallenge(7).completions>0)return i||ImaginaryUpgrade(15).tryShowWarningModal(`purchase a Time Dimension,
        which will produce Infinity Dimensions through EC7`),!1;if(Enslaved.isRunning)return UE(t);const s=bulkBuyBinarySearch(n,{costFunction:a=>r.nextCost(a),cumulative:!0,firstCost:r.cost},r.bought);return s?(Currency.eternityPoints.subtract(s.purchasePrice),r.amount=r.amount.plus(s.quantity),r.bought+=s.quantity,r.cost=r.nextCost(r.bought),!0):!1}function x7e(){for(let i=8;i>0&&js(i).bought===0;i--)UE(i,!0);for(let i=8;i>0;i--)w4(i,.01,!0);const t=i=>RealityUpgrade(13).isLockingMechanics?i<5:!0,e=Lb.all.filter(i=>i.isUnlocked&&t(i.tier));for(let i=0;i<1e3;i++){const n=e.reduce((r,s)=>s.cost.gte(r.cost)?r:s);if(!UE(n.tier,!0))break}}function M7e(){let t=new Decimal(ShopPurchase.allDimPurchases.currentMult).timesEffectsOf(Achievement(105),Achievement(128),TimeStudy(93),TimeStudy(103),TimeStudy(151),TimeStudy(221),TimeStudy(301),EternityChallenge(1).reward,EternityChallenge(10).reward,EternityUpgrade.tdMultAchs,EternityUpgrade.tdMultTheorems,EternityUpgrade.tdMultRealTime,Replicanti.areUnlocked&&Replicanti.amount.gt(1)?DilationUpgrade.tdMultReplicanti:null,Pelle.isDoomed?null:RealityUpgrade(22),AlchemyResource.dimensionality,PelleRifts.chaos);return EternityChallenge(9).isRunning&&(t=t.times(Decimal.pow(Math.clampMin(Currency.infinityPower.value.pow(InfinityDimensions.powerConversionRate/7).log2(),1),4).clampMin(1))),t}function C4(){for(let t=1;t<=8;t++){const e=js(t);e.cost=e.nextCost(e.bought)}}class P7e extends kT{constructor(e){super(()=>player.dimensions.time,e);const i=[null,L.D1,L.D5,L.E2,L.E3,L.E2350,L.E2650,L.E3000,L.E3350];this._baseCost=i[e];const n=[null,3,9,27,81,24300,72900,218700,656100];this._costMultiplier=n[e];const r=[null,7322,4627,3382,2665,833,689,562,456];this._e6000ScalingAmount=r[e];const s=[Decimal.NUMBER_MAX_VALUE,L.E1300,L.E6000];this._costIncreaseThresholds=s}get cost(){return this.data.cost}set cost(e){this.data.cost=e}nextCost(e){if(this._tier>4&&e<this.e6000ScalingAmount){const a=Decimal.pow(this.costMultiplier,e).times(this.baseCost);return PelleRifts.paradox.milestones[0].canBeApplied?a.div("1e2250").pow(.5):a}const i=[1,1.5,2.2];for(let a=0;a<this._costIncreaseThresholds.length;a++){const o=Decimal.pow(this.costMultiplier*i[a],e).times(this.baseCost);if(o.lt(this._costIncreaseThresholds[a]))return o}let n=this.costMultiplier;this._tier<=4&&(n*=2.2);const r=this.e6000ScalingAmount+(e-this.e6000ScalingAmount)*Lb.scalingPast1e6000,s=Decimal.pow(n,r).times(this.baseCost);return PelleRifts.paradox.milestones[0].canBeApplied&&this._tier>4?s.div("1e2250").pow(.5):s}get isUnlocked(){return this._tier<5||TimeStudy.timeDimension(this._tier).isBought}get isAvailableForPurchase(){return this.isAffordable}get isAffordable(){return Currency.eternityPoints.gte(this.cost)}get multiplier(){const e=this._tier;if(EternityChallenge(11).isRunning)return L.D1;let i=GameCache.timeDimensionCommonMultiplier.value.timesEffectsOf(e===1?TimeStudy(11):null,e===3?TimeStudy(73):null,e===4?TimeStudy(227):null);const n=js(e),r=e===8?Math.clampMax(n.bought,1e8):n.bought;return i=i.times(Decimal.pow(n.powerMultiplier,r)),i=i.pow(getAdjustedGlyphEffect("timepow")),i=i.pow(getAdjustedGlyphEffect("effarigdimensions")),i=i.pow(getAdjustedGlyphEffect("curseddimensions")),i=i.powEffectOf(AlchemyResource.time),i=i.pow(Ra.momentumValue),i=i.pow(ImaginaryUpgrade(11).effectOrDefault(1)),i=i.powEffectOf(PelleRifts.paradox),(player.dilation.active||PelleStrikes.dilation.hasStrike)&&(i=dilatedValueOf(i)),Effarig.isRunning?i=Effarig.multiplier(i):V.isRunning&&(i=i.pow(.5)),i}get productionPerSecond(){if(EternityChallenge(1).isRunning||EternityChallenge(10).isRunning||Laitela.isRunning&&this.tier>Laitela.maxAllowedDimension)return L.D0;if(EternityChallenge(11).isRunning)return this.amount;let e=this.amount.times(this.multiplier);return EternityChallenge(7).isRunning&&(e=e.times(Tickspeed.perSecond)),this._tier===1&&!EternityChallenge(7).isRunning&&(e=e.pow(getAdjustedGlyphEffect("timeshardpow"))),e}get rateOfChange(){const e=this._tier;if(e===8)return L.D0;const i=js(e+1).productionPerSecond,n=Decimal.max(this.amount,1);return i.times(10).dividedBy(n).times(getGameSpeedupForDisplay())}get isProducing(){const e=this.tier;return EternityChallenge(1).isRunning||EternityChallenge(10).isRunning||Laitela.isRunning&&e>Laitela.maxAllowedDimension?!1:this.amount.gt(0)}get baseCost(){return this._baseCost}get costMultiplier(){return this._costMultiplier}get powerMultiplier(){return L.D4.timesEffectsOf(this._tier===8?GlyphSacrifice.time:null).pow(ImaginaryUpgrade(14).effectOrDefault(1))}get e6000ScalingAmount(){return this._e6000ScalingAmount}get costIncreaseThresholds(){return this._costIncreaseThresholds}get requirementReached(){return this._tier<5||TimeStudy.timeDimension(this._tier).isAffordable&&TimeStudy.timeDimension(this._tier-1).isBought}tryUnlock(){this.isUnlocked||TimeStudy.timeDimension(this._tier).purchase()}}const js=P7e.createAccessor(),Lb={all:js.index.compact(),get scalingPast1e6000(){return 4},tick(t){for(let e=8;e>1;e--)js(e).produceDimensions(js(e-1),t/10);EternityChallenge(7).isRunning?js(1).produceDimensions(InfinityDimension(8),t):js(1).produceCurrency(Currency.timeShards,t),EternityChallenge(7).reward.applyEffect(e=>{InfinityDimension(8).amount=InfinityDimension(8).amount.plus(e.times(t/1e3))})}};function O7e(){if(!js(8).isUnlocked)for(let t=5;t<=8;++t)js(t).isUnlocked||js(t).tryUnlock()}function u2(t){return t.allowedDimPathCount===2&&t.currDimPathCount<2&&TimeStudy.preferredPaths.dimension.path.length<2?(GameUI.notify.error("You haven't selected a second preferred Dimension path."),!0):!1}function N7e(t,e=-1){let i=[];const n=Math.floor(t/10)*10-1,r=TimeStudy(t).path,s=GameCache.currentStudyTree.value,a=(p,m)=>[...Array(Math.clampMin(m-p+1,0)).keys()].map(y=>y+p),o=!Perk.studyECRequirement.isBought;if(i.push(t),i.push(...a(11,Math.min(n,70))),i.push(t),t<71)return i;if(t<111)return i.push(...NormalTimeStudies.paths[r].filter(p=>p<=t)),i;if(e===11&&o)i.push(...NormalTimeStudies.paths[TIME_STUDY_PATH.ANTIMATTER_DIM].filter(p=>p<=t));else if(e===12&&o)i.push(...NormalTimeStudies.paths[TIME_STUDY_PATH.TIME_DIM].filter(p=>p<=t));else if(s.currDimPathCount===s.allowedDimPathCount||s.allowedDimPathCount===3)i.push(...TimeStudy.preferredPaths.dimension.studies),i.push(...a(71,103));else if(TimeStudy.preferredPaths.dimension.path.length>0)i.push(...TimeStudy.preferredPaths.dimension.studies);else if(s.currDimPathCount===0)return GameUI.notify.error("You haven't selected a preferred Dimension path."),i;t>=111&&i.push(111);const c=u2(s);if(t<121)return i;if(t<151)return i.push(...NormalTimeStudies.paths[TimeStudy(t).path].filter(p=>p<=t)),i;const d=s.pacePaths.map(p=>NormalTimeStudies.pathList.find(m=>m.name===p).path);if(V.isFullyCompleted&&!Pelle.isDoomed){const p=NormalTimeStudies.paths[TIME_STUDY_PATH.ACTIVE].concat(NormalTimeStudies.paths[TIME_STUDY_PATH.PASSIVE]).concat(NormalTimeStudies.paths[TIME_STUDY_PATH.IDLE]);i.push(...p)}else if(d.length===1)i.push(...NormalTimeStudies.paths[d[0]]);else if(TimeStudy.preferredPaths.pace.path!==0)i.push(...TimeStudy.preferredPaths.pace.studies);else if(d.length===0)return GameUI.notify.error("You haven't selected a preferred Pace path."),i;return i.push(...a(151,Math.min(t,201))),t<201||(o&&(e===11||e===12)||(TimeStudyTree.commitToGameState(i),i=[],TimeStudy.preferredPaths.dimension.path.length>0&&(i.push(...TimeStudy.preferredPaths.dimension.studies),TimeStudyTree.commitToGameState(i),i=[]),c||u2(GameCache.currentStudyTree.value),i.push(...a(211,Math.min(n,214))),i.push(t)),t<221||!V.isFullyCompleted)||i.push(...a(221,Math.max(t,234))),i}function G7e(t){for(const i of TimeStudy.boughtNormalTS())i.refund();player.timestudy.studies=[],GameCache.timeStudies.invalidate(),player.celestials.v.STSpent=0;const e=TimeStudy.eternityChallenge.current();e!==void 0&&(e.refund(),player.challenge.eternity.unlocked=0),t||Tab.eternity.studies.show(),GameCache.currentStudyTree.invalidate()}class HT extends yn{constructor(e,i){super(e),this.type=i}get cost(){return this.config.cost}get STCost(){const e=this.config.STCost;return VUnlocks.raUnlock.canBeApplied?e-2:e}refund(){Currency.timeTheorems.add(this.cost)}get isAffordable(){return Currency.timeTheorems.gte(this.cost)}get canBeBought(){return!0}}let U7e=class O0{constructor(e){switch(this.spentTheorems=[0,0],this.invalidStudies=[],this.purchasedStudies=[],this.selectedStudies=[],this.startEC=!1,typeof e){case"string":O0.isValidImportString(e)&&this.attemptBuyArray(this.parseStudyImport(e),!1);break;case"object":this.attemptBuyArray([...e],!1),this.selectedStudies=[...e];break;case"undefined":break;default:throw new Error("Unrecognized input parameter for TimeStudyTree constructor")}}static isValidImportString(e){if(e.trim()==="")return!1;let i=e.replaceAll(/ +/gu,"");return O0.sets.forEach((n,r)=>i=i.replaceAll(new RegExp(`${r},?`,"gu"),"")),/^,?((\d{2,3}(-\d{2,3})?)\b,?)*(\|\d{1,2}!?)?$/iu.test(i)}static get currentStudies(){const e=player.timestudy.studies.map(i=>TimeStudy(i));return player.challenge.eternity.unlocked!==0&&e.push(TimeStudy.eternityChallenge(player.challenge.eternity.unlocked)),e}static getECFromString(e){if(!this.isValidImportString(e))return 0;const i=e.split("|");return i.length<1?0:parseInt(i[1],10)}static commitToGameState(e,i=!0,n=!1){for(const r of e){const s=typeof r=="number"?TimeStudy(r):r;s&&!s.isBought&&s.purchase(i),n&&s instanceof ECTimeStudyState&&EternityChallenge(s.id).start(i)}GameCache.currentStudyTree.invalidate()}static get sets(){return new Map([["antimatter",[71,81,91,101]],["infinity",[72,82,92,102]],["time",[73,83,93,103]],["active",[121,131,141]],["passive",[122,132,142]],["idle",[123,133,143]],["light",[221,223,225,227,231,233]],["dark",[222,224,226,228,232,234]],...Ra.unlocks.unlockHardV.canBeApplied?[["triad",[301,302,303,304].slice(0,Ra.unlocks.unlockHardV.effectOrDefault(0))]]:[]])}static truncateInput(e){let i=e.toLowerCase();return this.sets.forEach((n,r)=>i=i.replace(r,n.join())),i.replace(/[|,]$/u,"").replaceAll(" ","").replace(/,{2,}/gu,",").replace(/,\|/gu,"|")}static formatStudyList(e){return e.toLowerCase().replaceAll(" ","").replaceAll(",",", ").replace("|"," | ")}parseStudyImport(e){const i=GameDatabase.eternity.timeStudies.normal.map(c=>c.id),n=[],r=O0.truncateInput(e).split("|")[0];if(r.length){const c=r.split(",");for(const d of c){const p=d.split("-"),m=p[1]?this.studyRangeToArray(p[0],p[1]):p;for(const y of m)if(i.includes(parseInt(y,10))){const _=TimeStudy(y);this.selectedStudies.push(_),n.push(_)}else this.invalidStudies.push(y)}}const s=e.split("|")[1];if(this.startEC=e.endsWith("!"),!s)return n;const a=parseInt(s,10);return!GameDatabase.eternity.timeStudies.ec.map(c=>c.id).includes(a)&&a!==0?(this.invalidStudies.push(`EC${a}`),n):(a!==0&&n.push(TimeStudy.eternityChallenge(a)),n)}studyRangeToArray(e,i){const n=[],r=this.checkTimeStudyNumber(e),s=this.checkTimeStudyNumber(i);if(r!==0&&s!==0)for(let a=r;a<=s;a++)TimeStudy(a)&&n.push(a);return n}checkTimeStudyNumber(e){const i=parseFloat(e);return!TimeStudy(i)||TimeStudy(i).isTriad&&!Ra.canBuyTriad?0:i}attemptBuyArray(e,i){for(const n of e){const r=typeof n=="object"?n:TimeStudy(n);this.hasRequirements(r)&&this.buySingleStudy(r,i)}}hasRequirements(e,i=!1){var a;if(!e||this.purchasedStudies.includes(e))return!1;const n=o=>typeof o=="number"?this.purchasedStudies.includes(TimeStudy(o)):o(),r=e.config;let s;switch(r.reqType){case TS_REQUIREMENT_TYPE.AT_LEAST_ONE:s=r.requirement.some(o=>n(o));break;case TS_REQUIREMENT_TYPE.ALL:s=r.requirement.every(o=>n(o));break;case TS_REQUIREMENT_TYPE.DIMENSION_PATH:s=r.requirement.every(o=>n(o))&&this.currDimPathCount<this.allowedDimPathCount;break;default:throw Error(`Unrecognized TS requirement type: ${this.reqType}`)}if(e instanceof ECTimeStudyState){if(this.purchasedStudies.some(m=>m instanceof ECTimeStudyState))return!1;const o=!Perk.studyECRequirement.isBought&&((a=e.config.secondary.forbiddenStudies)==null?void 0:a.some(m=>n(m)));if(i)return s&&!o;const d=player.timestudy.theorem.plus(TimeTheorems.calculateTimeStudiesCost()).subtract(this.spentTheorems[0]).gte(e.cost),p=Perk.studyECRequirement.isBought||e.isEntryGoalMet;return s&&!o&&(e.isBought||p&&d)}return s}buySingleStudy(e,i){const n=e.config,r=VUnlocks.raUnlock.effectOrDefault(0),s=n.STCost&&n.requiresST.some(c=>this.purchasedStudies.includes(TimeStudy(c)))?Math.clampMin(n.STCost-r,0):0,a=Pelle.isDoomed?0:V.spaceTheorems,o=this.spentTheorems[1]+s<=a;if(i){const c=Currency.timeTheorems.value.add(GameCache.currentStudyTree.value.spentTheorems[0]).clampMax(Number.MAX_VALUE).toNumber();if(!(this.spentTheorems[0]+n.cost<=c)||!o)return}a===0&&s>0||(this.spentTheorems[0]+=n.cost,this.spentTheorems[1]+=s,this.purchasedStudies.push(e))}get currDimPathCount(){return[71,72,73].countWhere(e=>this.purchasedStudies.includes(TimeStudy(e)))}get allowedDimPathCount(){return DilationUpgrade.timeStudySplit.isBought?3:this.purchasedStudies.includes(TimeStudy(201))?2:1}get dimensionPaths(){const e=new Set,i=[TIME_STUDY_PATH.ANTIMATTER_DIM,TIME_STUDY_PATH.INFINITY_DIM,TIME_STUDY_PATH.TIME_DIM];for(const n of i){const r=NormalTimeStudies.pathList.find(s=>s.path===n);for(const s of this.purchasedStudies)if(r.studies.includes(s.id)){e.add(r.name);break}}return Array.from(e)}get pacePaths(){const e=new Set,i=[TIME_STUDY_PATH.ACTIVE,TIME_STUDY_PATH.PASSIVE,TIME_STUDY_PATH.IDLE];for(const n of i){const r=NormalTimeStudies.pathList.find(s=>s.path===n);for(const s of this.purchasedStudies)if(r.studies.includes(s.id)){e.add(r.name);break}}return Array.from(e)}get ec(){const e=this.purchasedStudies.find(i=>i instanceof ECTimeStudyState);return e?e.id:0}get exportString(){return`${this.purchasedStudies.filter(e=>e instanceof NormalTimeStudyState).map(e=>e.id).join(",")}|${this.ec}${player.challenge.eternity.current===0?"":"!"}`}};const xf={};xf.pathList=[{path:TIME_STUDY_PATH.ANTIMATTER_DIM,studies:[71,81,91,101],name:"Antimatter Dims"},{path:TIME_STUDY_PATH.INFINITY_DIM,studies:[72,82,92,102],name:"Infinity Dims"},{path:TIME_STUDY_PATH.TIME_DIM,studies:[73,83,93,103],name:"Time Dims"},{path:TIME_STUDY_PATH.ACTIVE,studies:[121,131,141],name:"Active"},{path:TIME_STUDY_PATH.PASSIVE,studies:[122,132,142],name:"Passive"},{path:TIME_STUDY_PATH.IDLE,studies:[123,133,143],name:"Idle"},{path:TIME_STUDY_PATH.LIGHT,studies:[221,223,225,227,231,233],name:"Light"},{path:TIME_STUDY_PATH.DARK,studies:[222,224,226,228,232,234],name:"Dark"}];xf.paths=xf.pathList.mapToObject(t=>t.path,t=>t.studies);let Gm=class extends HT{constructor(e){const i=e.id>300?TIME_STUDY_TYPE.TRIAD:TIME_STUDY_TYPE.NORMAL;super(e,i);const n=xf.pathList.find(r=>r.studies.includes(this.id));this._path=(n==null?void 0:n.path)??TIME_STUDY_PATH.NONE}get isUnlocked(){var e,i;return((i=(e=this.config).unlocked)==null?void 0:i.call(e))??!0}get isTriad(){return this.id>300}get isBought(){return GameCache.timeStudies.value[this.id]}costsST(){return this.config.requiresST&&this.config.requiresST.some(e=>vi(e).isBought)}checkRequirement(){const e=n=>typeof n=="number"?vi(n).isBought:n(),i=GameCache.currentStudyTree.value;switch(this.config.reqType){case TS_REQUIREMENT_TYPE.AT_LEAST_ONE:return this.config.requirement.some(n=>e(n));case TS_REQUIREMENT_TYPE.ALL:return this.config.requirement.every(n=>e(n));case TS_REQUIREMENT_TYPE.DIMENSION_PATH:return this.config.requirement.every(n=>e(n))&&i&&i.currDimPathCount<i.allowedDimPathCount;default:throw Error(`Unrecognized TS requirement type: ${this.reqType}`)}}checkSetRequirement(){return this.costsST()?!Pelle.isDisabled("V")&&V.availableST>=this.STCost:!0}get canBeBought(){return this.checkRequirement()&&this.checkSetRequirement()}get isEffectActive(){return this.isBought}purchase(e=!1){return this.isBought||!this.isAffordable||!this.canBeBought||GameEnd.creditsEverClosed?!1:ImaginaryUpgrade(19).isLockingMechanics&&player.timestudy.studies.length===8?(e||ImaginaryUpgrade(19).tryShowWarningModal(),!1):(this.costsST()&&(player.celestials.v.STSpent+=this.STCost),player.timestudy.studies.push(this.id),player.requirementChecks.reality.maxStudies=Math.clampMin(player.requirementChecks.reality.maxStudies,player.timestudy.studies.length),this.id>300&&(player.requirementChecks.reality.noTriads=!1),Currency.timeTheorems.subtract(this.cost),GameCache.timeStudies.invalidate(),TimeStudyTree.commitToGameState([vi(this.id)]),this.id===181&&Pelle.isDoomed&&Achievement(186).unlock(),!0)}purchaseUntil(){TimeStudyTree.commitToGameState(buyStudiesUntil(this.id))}get path(){return this._path}};Gm.studies=mapGameData(GameDatabase.eternity.timeStudies.normal,t=>new Gm(t));Gm.all=Gm.studies.filter(t=>t!==void 0);function vi(t){return Gm.studies[t]}vi.boughtNormalTS=function(){return player.timestudy.studies.map(t=>vi(t))};vi.preferredPaths={dimension:{get path(){return player.timestudy.preferredPaths[0]},set path(t){const e=[1,2,3];player.timestudy.preferredPaths[0]=t.filter(i=>e.includes(i))},get studies(){return player.timestudy.preferredPaths[0].flatMap(t=>xf.paths[t])},get usePriority(){return this.path.length>1||vi(201).isBought||DilationUpgrade.timeStudySplit.isBought||PlayerProgress.realityUnlocked()}},pace:{get path(){return player.timestudy.preferredPaths[1]},set path(t){const e=[4,5,6];player.timestudy.preferredPaths[1]=e.includes(t)?t:0},get studies(){return xf.paths[player.timestudy.preferredPaths[1]]}}};let Um=class extends HT{constructor(e){super(e,TIME_STUDY_TYPE.ETERNITY_CHALLENGE),this.invalidateRequirement()}get isBought(){return player.challenge.eternity.unlocked===this.id}purchase(e){if(GameEnd.creditsEverClosed)return!1;EternityChallenge(this.id).hasUnlocked=!0;const i=Date.now();if(this.isBought&&player.challenge.eternity.current===0&&!e)i-ui.lastClickTime<750?(ui.lastClickTime=0,EternityChallenge(this.id).requestStart()):ui.lastClickTime=i;else if(!this.isBought&&this.canBeBought)return ui.lastClickTime=0,player.challenge.eternity.unlocked=this.id,e||Tab.challenges.eternity.show(),player.challenge.eternity.requirementBits|=1<<this.id,Currency.timeTheorems.subtract(this.cost),TimeStudyTree.commitToGameState([vi.eternityChallenge(this.id)]),!0;return!1}purchaseUntil(){const e=[void 0,171,171,171,143,42,121,111,123,151,181,181,181];this.purchase(),TimeStudyTree.commitToGameState(buyStudiesUntil(e[this.id],this.id)),this.id===11?vi(191).purchase():this.id===12&&vi(193).purchase(),this.purchase()}get canBeBought(){return!this.isAffordable||player.challenge.eternity.unlocked!==0||!this.config.requirement.some(e=>vi(e).isBought)?!1:this.allSecondaryRequirementsMet}get challenge(){return EternityChallenge(this.id)}get requirementTotal(){return this.config.secondary.required(this.challenge.completions)}get requirementCurrent(){const e=this.config.secondary.current();return this.cachedCurrentRequirement===void 0?this.cachedCurrentRequirement=e:typeof e=="number"?this.cachedCurrentRequirement=Math.max(this.cachedCurrentRequirement,e):this.cachedCurrentRequirement=this.cachedCurrentRequirement.clampMin(e),this.cachedCurrentRequirement}get allSecondaryRequirementsMet(){return Perk.studyECRequirement.isBought||!this.hasForbiddenStudies&&this.isEntryGoalMet}get hasForbiddenStudies(){var e;return(e=this.config.secondary.forbiddenStudies)==null?void 0:e.some(i=>vi(i).isBought)}get isEntryGoalMet(){if(this.wasRequirementPreviouslyMet||this.config.secondary.forbiddenStudies)return!0;const e=this.requirementCurrent,i=this.requirementTotal;return typeof e=="number"?e>=i:e.gte(i)}get wasRequirementPreviouslyMet(){return this.id===11||this.id===12?!1:(player.challenge.eternity.requirementBits&1<<this.id)!==0}invalidateRequirement(){this.cachedCurrentRequirement=void 0}};Um.studies=mapGameData(GameDatabase.eternity.timeStudies.ec,t=>new Um(t));vi.eternityChallenge=function(t){return Um.studies[t]};vi.eternityChallenge.current=function(){return player.challenge.eternity.unlocked?vi.eternityChallenge(player.challenge.eternity.unlocked):void 0};Um.invalidateCachedRequirements=function(){Um.studies.forEach(t=>t.invalidateRequirement())};let Mf=class extends HT{constructor(e){super(e,TIME_STUDY_TYPE.DILATION)}get isBought(){return player.dilation.studies.includes(this.id)}get canBeBought(){return this.isAffordable&&this.config.requirement()}get description(){return this.config.description}get cost(){return typeof this.config.cost=="function"?this.config.cost():this.config.cost}get totalTimeTheoremRequirement(){return this.id===1?12900:0}purchase(e=!1){if(this.isBought||!this.canBeBought)return!1;if(this.id===1){if(e||Tab.eternity.dilation.show(),Perk.autounlockDilation1.canBeApplied)for(const i of[4,5,6])player.dilation.upgrades.add(i);if(Perk.autounlockDilation2.canBeApplied)for(const i of[7,8,9])player.dilation.upgrades.add(i);Pelle.isDoomed||Currency.tachyonParticles.bumpTo(Perk.startTP.effectOrDefault(0)),Ra.unlocks.unlockDilationStartingTP.canBeApplied&&!isInCelestialReality()&&!Pelle.isDoomed&&Currency.tachyonParticles.bumpTo(getTP(Ra.unlocks.unlockDilationStartingTP.effectOrDefault(0),!1)),TabNotification.dilationAfterUnlock.tryTrigger()}return this.id===6&&(PlayerProgress.realityUnlocked()||(Modal.message.show(`Reality Machine gain for your first Reality is reduced above ${format("1e6000")} Eternity
          Points and capped at ${format("1e8000")} Eternity Points. This is due to balance changes made in the Reality
          update which affect the difficulty of reaching those amounts, such as the increased Time Dimension cost
          scaling above ${format("1e6000")}.`,{},3),EventHub.dispatch(GAME_EVENT.REALITY_FIRST_UNLOCKED)),Perk.autounlockReality.isBought||Tab.reality.glyphs.show()),player.dilation.studies.push(this.id),Currency.timeTheorems.subtract(this.cost),!0}};Mf.studies=mapGameData(GameDatabase.eternity.timeStudies.dilation,t=>new Mf(t));vi.dilation=Mf.studies[1];vi.timeDimension=function(t){return Mf.studies[t-3]};vi.reality=Mf.studies[6];vi.boughtDilationTS=function(){return player.dilation.studies.map(t=>Mf.studies[t])};let S4=class{constructor(e,i,n){this._from=e,this._to=i,this._override=n}get from(){return this._from}get to(){return this._to}get isOverridden(){return this._override!==void 0&&this._override()}get isSatisfied(){return this.isOverridden||this._from.isBought}};vi.allConnections=function(){const t=n=>vi(n),e=n=>vi.eternityChallenge(n);return[[t(11),t(21)],[t(11),t(22)],[t(21),t(31)],[t(22),t(33)],[t(22),t(32)],[t(31),t(41)],[t(32),t(42)],[t(41),t(51)],[t(42),t(51)],[t(42),e(5)],[t(42),t(62),()=>!Perk.bypassEC5Lock.isBought],[t(51),t(61)],[e(5),t(62),()=>Perk.bypassEC5Lock.isBought],[t(61),t(71)],[t(61),t(72)],[t(61),t(73)],[t(71),t(81)],[t(72),t(82)],[t(73),t(83)],[t(81),t(91)],[t(82),t(92)],[t(83),t(93)],[t(91),t(101)],[t(92),t(102)],[t(93),t(103)],[t(101),t(111)],[t(102),t(111)],[t(103),t(111)],[t(111),e(7)],[t(111),t(121)],[t(111),t(122)],[t(111),t(123)],[t(121),t(131)],[t(122),t(132)],[t(123),t(133)],[t(121),e(6)],[t(123),e(8)],[t(131),t(141)],[t(132),t(142)],[t(133),t(143)],[t(141),t(151)],[t(142),t(151)],[t(143),t(151)],[t(143),e(4)],[t(151),e(9)],[t(151),t(161)],[t(151),t(162)],[t(161),t(171)],[t(162),t(171)],[t(171),e(1)],[t(171),e(2)],[t(171),e(3)],[t(171),t(181),()=>!Perk.bypassEC1Lock.isBought||!Perk.bypassEC2Lock.isBought||!Perk.bypassEC3Lock.isBought],[e(1),t(181),()=>Perk.bypassEC1Lock.isBought],[e(2),t(181),()=>Perk.bypassEC2Lock.isBought],[e(3),t(181),()=>Perk.bypassEC3Lock.isBought],[t(181),e(10)],[e(10),t(191)],[e(10),t(192)],[e(10),t(193)],[t(192),t(201)],[t(191),t(211)],[t(191),t(212)],[t(193),t(213)],[t(193),t(214)],[t(211),t(221)],[t(211),t(222)],[t(212),t(223)],[t(212),t(224)],[t(213),t(225)],[t(213),t(226)],[t(214),t(227)],[t(214),t(228)],[t(221),t(231)],[t(222),t(231)],[t(223),t(232)],[t(224),t(232)],[t(225),t(233)],[t(226),t(233)],[t(227),t(234)],[t(228),t(234)],[t(231),e(11)],[t(232),e(11)],[t(233),e(12)],[t(234),e(12)],[e(11),vi.dilation],[e(12),vi.dilation],[vi.dilation,vi.timeDimension(5)],[vi.timeDimension(5),vi.timeDimension(6)],[vi.timeDimension(6),vi.timeDimension(7)],[vi.timeDimension(7),vi.timeDimension(8)],[vi.timeDimension(8),vi.reality]].map(n=>new S4(n[0],n[1],n[2]))}();class L7e{constructor(e,i){this.tier=e,this.amount=i}get isSatisfied(){return AntimatterDimension(this.tier).totalAmount.gte(this.amount)}}let _o=class ca{static get power(){if(NormalChallenge(8).isRunning)return L.D1;let e=Effects.max(2,InfinityUpgrade.dimboostMult,InfinityChallenge(7).reward,InfinityChallenge(7),TimeStudy(81)).toDecimal().timesEffectsOf(TimeStudy(83),TimeStudy(231),Achievement(117),Achievement(142),GlyphEffect.dimBoostPower,PelleRifts.recursion.milestones[0]).powEffectsOf(InfinityUpgrade.dimboostMult.chargedEffect);return GlyphAlteration.isAdded("effarig")&&(e=e.pow(getSecondaryGlyphEffect("effarigforgotten"))),e}static multiplierToNDTier(e){const i=ca.power.pow(this.purchasedBoosts+1-e).clampMin(1),n=ca.power.times(ImaginaryUpgrade(24).effectOrDefault(1)).pow(this.imaginaryBoosts).clampMin(1);return i.times(n)}static get maxDimensionsUnlockable(){return NormalChallenge(10).isRunning?6:8}static get canUnlockNewDimension(){return ca.purchasedBoosts+4<ca.maxDimensionsUnlockable}static get maxBoosts(){return Ra.isRunning?0:InfinityChallenge(1).isRunning?2:NormalChallenge(8).isRunning?5:1/0}static get canBeBought(){return!(ca.purchasedBoosts>=this.maxBoosts||player.records.thisInfinity.maxAM.gt(Player.infinityGoal)&&(!player.break||Player.isInAntimatterChallenge))}static get lockText(){if(ca.purchasedBoosts>=this.maxBoosts){if(Ra.isRunning)return"Locked (Ra's Reality)";if(InfinityChallenge(1).isRunning)return"Locked (Infinity Challenge 1)";if(NormalChallenge(8).isRunning)return"Locked (8th Antimatter Dimension Autobuyer Challenge)"}return null}static get requirement(){return this.bulkRequirement(1)}static bulkRequirement(e){const i=ca.purchasedBoosts+e,n=Math.min(i+3,this.maxDimensionsUnlockable);let r=20;const s=Effects.sum(TimeStudy(211),TimeStudy(222));return n===6&&NormalChallenge(10).isRunning?r+=Math.round((i-3)*(20-s)):n===8&&(r+=Math.round((i-5)*(15-s))),EternityChallenge(5).isRunning&&(r+=Math.pow(i-1,3)+i-1),r-=Effects.sum(InfinityUpgrade.resetBoost),InfinityChallenge(5).isCompleted&&(r-=1),r*=InfinityUpgrade.resetBoost.chargedEffect.effectOrDefault(1),r=Math.round(r),new L7e(n,r)}static get unlockedByBoost(){if(ca.lockText!==null)return ca.lockText;const e=ca.purchasedBoosts,i=EternityMilestone.unlockAllND.isReached;let n="";!i&&e<ca.maxDimensionsUnlockable-4?n=`unlock the ${e+5}th Dimension`:e===4&&!NormalChallenge(10).isRunning&&!EternityChallenge(3).isRunning&&(n="unlock Sacrifice");const r=`give a ${formatX(ca.power,2,1)} multiplier `;let s="to the 1st Dimension";e>0&&(s=`to Dimensions 1-${Math.min(e+1,8)}`),e>=ca.maxDimensionsUnlockable-1&&(s="to all Dimensions");let a;return NormalChallenge(8).isRunning?a=n:n===""?a=`${r} ${s}`:a=`${n} and ${r} ${s}`,a===""?"Dimension Boosts are currently useless":(Perk.antimatterNoReset.isBought||Achievement(111).canBeApplied)&&(!Pelle.isDoomed||PelleUpgrade.dimBoostResetsNothing.isBought)?a[0].toUpperCase()+a.substring(1):`Reset your Dimensions to ${a}`}static get purchasedBoosts(){return Math.floor(player.dimensionBoosts)}static get imaginaryBoosts(){return Ra.isRunning?0:ImaginaryUpgrade(12).effectOrDefault(0)*ImaginaryUpgrade(23).effectOrDefault(1)}static get totalBoosts(){return Math.floor(this.purchasedBoosts+this.imaginaryBoosts)}static get startingDimensionBoosts(){return InfinityUpgrade.skipResetGalaxy.isBought?4:InfinityUpgrade.skipReset3.isBought?3:InfinityUpgrade.skipReset2.isBought?2:InfinityUpgrade.skipReset1.isBought?1:0}};function em(t,e=!1,i=!1,n=!1){if(Currency.antimatter.gt(Player.infinityLimit))return;const r=Math.min(t,_o.maxBoosts-player.dimensionBoosts);EventHub.dispatch(GAME_EVENT.DIMBOOST_BEFORE,r),player.dimensionBoosts=Math.max(0,player.dimensionBoosts+r),resetChallengeStuff();const s=Pelle.isDoomed?PelleUpgrade.dimBoostResetsNothing.canBeApplied:Perk.antimatterNoReset.canBeApplied;(e||!s)&&(AntimatterDimensions.reset(),player.sacrificed=L.D0,resetTickspeed()),k4(n);const a=Pelle.isDoomed?PelleUpgrade.dimBoostResetsNothing.canBeApplied:Achievement(111).isUnlocked||Perk.antimatterNoReset.canBeApplied;!i&&a?Currency.antimatter.bumpTo(Currency.antimatter.startingValue):Currency.antimatter.reset(),EventHub.dispatch(GAME_EVENT.DIMBOOST_AFTER,r)}function k4(t){t||Player.isInAntimatterChallenge||(InfinityUpgrade.skipResetGalaxy.isBought&&player.dimensionBoosts<4?(player.dimensionBoosts=4,player.galaxies===0&&(player.galaxies=1)):InfinityUpgrade.skipReset3.isBought&&player.dimensionBoosts<3?player.dimensionBoosts=3:InfinityUpgrade.skipReset2.isBought&&player.dimensionBoosts<2?player.dimensionBoosts=2:InfinityUpgrade.skipReset1.isBought&&player.dimensionBoosts<1&&(player.dimensionBoosts=1))}function B7e(t){if(!(Currency.antimatter.gt(Player.infinityLimit)||!_o.requirement.isSatisfied)&&_o.canBeBought&&!GameEnd.creditsEverClosed){if(player.options.confirmations.dimensionBoost){Modal.dimensionBoost.show({bulk:t});return}A4(t)}}function A4(t){Currency.antimatter.gt(Player.infinityLimit)||!_o.requirement.isSatisfied||_o.canBeBought&&(Tutorial.turnOffEffect(TUTORIAL_STATE.DIMBOOST),BreakInfinityUpgrade.autobuyMaxDimboosts.isBought&&t?F7e():em(1))}function F7e(){if(_o.canUnlockNewDimension){_o.requirement.isSatisfied&&em(1);return}const t=_o.bulkRequirement(1);if(!t.isSatisfied)return;const e=_o.bulkRequirement(2);if(!e.isSatisfied){em(1);return}const i=e.amount-t.amount,n=AntimatterDimension(t.tier);let r=Math.min(Number.MAX_VALUE,1+Math.floor((n.totalAmount.toNumber()-t.amount)/i));if(_o.bulkRequirement(r).isSatisfied){em(r);return}let s=2;for(;r!==s+1;){const a=Math.floor((r+s)/2);_o.bulkRequirement(a).isSatisfied?s=a:r=a}em(s)}let ym=class{static get isVisible(){return Achievement(18).isUnlocked||PlayerProgress.realityUnlocked()}static get canSacrifice(){return DimBoost.purchasedBoosts>4&&!EternityChallenge(3).isRunning&&this.nextBoost.gt(1)&&AntimatterDimension(8).totalAmount.gt(0)&&Currency.antimatter.lt(Player.infinityLimit)&&!Enslaved.isRunning}static get disabledCondition(){return NormalChallenge(10).isRunning?"8th Dimensions are disabled":EternityChallenge(3).isRunning?"Eternity Challenge 3":DimBoost.purchasedBoosts<5?`Requires ${formatInt(5)} Dimension Boosts`:AntimatterDimension(8).totalAmount.eq(0)?"No 8th Antimatter Dimensions":this.nextBoost.lte(1)?`${formatX(1)} multiplier`:Player.isInAntimatterChallenge?"Challenge goal reached":"Need to Crunch"}static getSacrificeDescription(e){const i=(o,c)=>o in e?e[o]:c;let n=2,r=1,s=`(log₁₀(AD1)/${formatInt(10)})`;i("Challenge8isRunning",NormalChallenge(8).isRunning)?(n=1,s="x"):i("InfinityChallenge2isCompleted",InfinityChallenge(2).isCompleted)&&(n=1/120,r=3,s="AD1");const a=(1+(i("Achievement32",Achievement(32).isEffectActive)?Achievement(32).config.effect:0)+(i("Achievement57",Achievement(57).isEffectActive)?Achievement(57).config.effect:0))*(1+(i("Achievement88",Achievement(88).isEffectActive)?Achievement(88).config.effect:0)+(i("TimeStudy228",TimeStudy(228).isEffectActive)?TimeStudy(228).config.effect:0))*n;return s+(a===1?"":formatPow(a,r,r))}static get sacrificeExponent(){let e;NormalChallenge(8).isRunning?e=1:InfinityChallenge(2).isCompleted?e=1/120:e=2;const i=1+Effects.sum(Achievement(32),Achievement(57)),n=1+Effects.sum(Achievement(88),TimeStudy(228)),r=TimeStudy(304).effectOrDefault(1);return e*i*n*r}static get nextBoost(){const e=AntimatterDimension(1).amount;if(e.eq(0))return L.D1;const i=player.sacrificed.clampMin(1);let n;return NormalChallenge(8).isRunning?n=e.pow(.05).dividedBy(i.pow(.04)).clampMin(1).times(e.pow(.05).dividedBy(i.plus(e).pow(.04))):InfinityChallenge(2).isCompleted?n=e.dividedBy(i):n=new Decimal(e.log10()/10/Math.max(i.log10()/10,1)),n.clampMin(1).pow(this.sacrificeExponent)}static get totalBoost(){if(player.sacrificed.eq(0))return L.D1;if(NormalChallenge(8).isRunning)return player.chall8TotalSacrifice;let e;return InfinityChallenge(2).isCompleted?e=player.sacrificed:e=new Decimal(player.sacrificed.log10()/10),e.clampMin(1).pow(this.sacrificeExponent)}};function R4(){if(!ym.canSacrifice||(!player.break||!InfinityChallenge.isRunning&&NormalChallenge.isRunning)&&Currency.antimatter.gt(Decimal.NUMBER_MAX_VALUE)||NormalChallenge(8).isRunning&&ym.totalBoost.gte(Decimal.NUMBER_MAX_VALUE))return!1;EventHub.dispatch(GAME_EVENT.SACRIFICE_RESET_BEFORE);const t=ym.nextBoost;player.chall8TotalSacrifice=player.chall8TotalSacrifice.times(t),player.sacrificed=player.sacrificed.plus(AntimatterDimension(1).amount);const e=Achievement(118).canBeApplied;return NormalChallenge(8).isRunning?(e||AntimatterDimensions.reset(),Currency.antimatter.reset()):e||AntimatterDimensions.resetAmountUpToTier(NormalChallenge(12).isRunning?6:7),player.requirementChecks.infinity.noSacrifice=!1,EventHub.dispatch(GAME_EVENT.SACRIFICE_RESET_AFTER),!0}function $7e(){!ym.isVisible||!ym.canSacrifice||(player.options.confirmations.sacrifice?Modal.sacrifice.show():R4())}function I4(){vl.display("a-implode",2)}function H7e(){const t=Player.antimatterChallenge;if(!t&&!NormalChallenge(1).isCompleted&&NormalChallenge(1).complete(),!t)return;InfinityChallenge.isRunning&&!InfinityChallenge.current.isCompleted&&TabNotification.ICUnlock.clearTrigger(),t.complete(),t.updateChallengeTime(),player.options.retryChallenge||(player.challenge.normal.current=0,player.challenge.infinity.current=0)}function V7e(){Player.canCrunch&&(GameEnd.creditsEverClosed||(player.options.confirmations.bigCrunch&&(!PlayerProgress.infinityUnlocked()||player.break)?Modal.bigCrunch.show():D4()))}function D4(t=!1){Player.canCrunch&&(!t&&player.options.animations.bigCrunch&&!vl.isDisplaying?(I4(),setTimeout(rk,1e3)):rk())}function rk(t=!1,e=Player.isInAntimatterChallenge&&player.options.retryChallenge){!t&&!Player.canCrunch||(Player.canCrunch&&(EventHub.dispatch(GAME_EVENT.BIG_CRUNCH_BEFORE),q7e(),Pelle.isDoomed&&PelleStrikes.infinity.trigger()),x4(e),EventHub.dispatch(GAME_EVENT.BIG_CRUNCH_AFTER))}function q7e(){Y7e();const t=gainedInfinityPoints();Currency.infinityPoints.add(t),Currency.infinities.add(gainedInfinities().round()),W7e(!PlayerProgress.infinityUnlocked()),j7e()}function Y7e(){player.records.bestInfinity.bestIPminEternity=player.records.bestInfinity.bestIPminEternity.clampMin(player.records.thisInfinity.bestIPmin),player.records.thisInfinity.bestIPmin=L.D0,player.records.thisEternity.bestInfinitiesPerMs=player.records.thisEternity.bestInfinitiesPerMs.clampMin(gainedInfinities().round().dividedBy(Math.clampMin(33,player.records.thisInfinity.realTime)));const t=gainedInfinityPoints();if(addInfinityTime(player.records.thisInfinity.time,player.records.thisInfinity.realTime,t,gainedInfinities().round()),player.records.bestInfinity.time=Math.min(player.records.bestInfinity.time,player.records.thisInfinity.time),player.records.bestInfinity.realTime=Math.min(player.records.bestInfinity.realTime,player.records.thisInfinity.realTime),player.requirementChecks.reality.noInfinities=!1,!player.requirementChecks.infinity.maxAll){const e=t.dividedBy(Math.clampMin(33,player.records.thisInfinity.realTime));player.records.thisEternity.bestIPMsWithoutMaxAll=Decimal.max(e,player.records.thisEternity.bestIPMsWithoutMaxAll)}}function W7e(t){const e=player.records.bestInfinity.time>6e4&&!player.break,i=Player.isInAntimatterChallenge;H7e(),t?Tab.infinity.upgrades.show():(e||i&&!player.options.retryChallenge)&&Tab.dimensions.antimatter.show()}function x4(t){const e=Replicanti.amount,i=player.replicanti.galaxies;M4(t);let n=0;Achievement(95).isUnlocked&&!Pelle.isDoomed&&(Replicanti.amount=e,n+=Math.min(i,1)),TimeStudy(33).isBought&&!Pelle.isDoomed&&(n+=Math.floor(i/2)),PelleUpgrade.replicantiGalaxyNoReset.canBeApplied&&(n=i),player.replicanti.galaxies=Math.clampMax(n,i)}function j7e(){EternityChallenge(4).tryFail()||Effarig.isRunning&&!EffarigUnlock.infinity.isUnlocked&&(EffarigUnlock.infinity.unlock(),beginProcessReality(getRealityProps(!0)))}function M4(t){player.dimensionBoosts=0,player.galaxies=0,player.records.thisInfinity.maxAM=L.D0,Currency.antimatter.reset(),softReset(0,!0,!0,t),InfinityDimensions.resetAmount(),player.replicanti.unl&&(Replicanti.amount=L.D1),player.replicanti.galaxies=0,player.records.thisInfinity.time=0,player.records.thisInfinity.lastBuyTime=0,player.records.thisInfinity.realTime=0,Player.resetRequirements("infinity"),AchievementTimers.marathon2.reset()}function z7e(t){if(InfinityUpgrade.ipGen.isBought){const e=Time.bestInfinity.totalMilliseconds*10;let i;t>=1e300*e?i=Decimal.div(t,e):(player.partInfinityPoint+=t/e,i=Math.floor(player.partInfinityPoint),player.partInfinityPoint-=i);let n=player.records.bestInfinity.time>=999999999999?L.D0:InfinityUpgrade.ipGen.effectValue;Laitela.isRunning&&(n=dilatedValueOf(n));const r=new Decimal(i).times(n);Currency.infinityPoints.add(r)}Currency.infinityPoints.add(BreakInfinityUpgrade.ipGen.effectOrDefault(L.D0).times(t/6e4))}class X7e extends yn{constructor(e,i){super(e),this._upgrade=i}get isEffectActive(){return this._upgrade.isBought&&this._upgrade.isCharged}}class P4 extends Gf{constructor(e){super(e),e.charged&&(this._chargedEffect=new X7e(e.charged,this))}get currency(){return Currency.infinityPoints}get set(){return player.infinityUpgrades}get isAvailableForPurchase(){var e,i;return((i=(e=this.config).checkRequirement)==null?void 0:i.call(e))??!0}get isEffectActive(){return this.isBought&&!this.isCharged}get chargedEffect(){return this._chargedEffect}purchase(){return super.purchase()?(this.config.id.includes("skip")&&skipResetsIfPossible(),EventHub.dispatch(GAME_EVENT.INFINITY_UPGRADE_BOUGHT),!0):this.canCharge?(this.charge(),EventHub.dispatch(GAME_EVENT.INFINITY_UPGRADE_CHARGED),!0):!1}get hasChargeEffect(){return this.config.charged!==void 0}get isCharged(){return player.celestials.ra.charged.has(this.id)}get canCharge(){return this.isBought&&this.hasChargeEffect&&!this.isCharged&&Ra.chargesLeft!==0&&!Pelle.isDisabled("chargedInfinityUpgrades")}charge(){player.celestials.ra.charged.add(this.id)}disCharge(){player.celestials.ra.charged.delete(this.id)}}function K7e(){if(Effarig.isRunning&&Effarig.currentStage===EFFARIG_STAGES.INFINITY)return L.D1;let t=L.D1.times(ShopPurchase.IPPurchases.currentMult).timesEffectsOf(TimeStudy(41),TimeStudy(51),TimeStudy(141),TimeStudy(142),TimeStudy(143),Achievement(85),Achievement(93),Achievement(116),Achievement(125),Achievement(141).effects.ipGain,da.ipMult,DilationUpgrade.ipMultDT,GlyphEffect.ipMult);return t=t.times(Replicanti.amount.powEffectOf(AlchemyResource.exponential)),t}function Z7e(){const t=[da.totalTimeMult,da.dim18mult,da.dim36mult,da.resetBoost,da.buy10Mult,da.dim27mult,da.dim45mult,da.galaxyBoost,da.thisInfinityTimeMult,da.unspentIPMult,da.dimboostMult,da.ipGen];for(const e of t)e.isCharged&&e.disCharge();player.celestials.ra.disCharge=!1,EventHub.dispatch(GAME_EVENT.INFINITY_UPGRADES_DISCHARGED)}class Q7e extends yn{get cost(){return this.purchaseCount>=this.purchasesAtIncrease?this.config.costIncreaseThreshold.times(Decimal.pow(this.costIncrease,this.purchaseCount-this.purchasesAtIncrease)):Decimal.pow(this.costIncrease,this.purchaseCount+1)}get purchaseCount(){return player.IPMultPurchases}get purchasesAtIncrease(){return this.config.costIncreaseThreshold.log10()-1}get hasIncreasedCost(){return this.purchaseCount>=this.purchasesAtIncrease}get costIncrease(){return this.hasIncreasedCost?1e10:10}get isCapped(){return this.cost.gte(this.config.costCap)}get isBought(){return this.isCapped}get isRequirementSatisfied(){return Achievement(41).isUnlocked}get canBeBought(){return!Pelle.isDoomed&&!this.isCapped&&Currency.infinityPoints.gte(this.cost)&&this.isRequirementSatisfied}purchase(e=1){this.canBeBought&&(TimeStudy(181).isBought||Autobuyer.bigCrunch.bumpAmount(L.D2.pow(e)),Currency.infinityPoints.subtract(Decimal.sumGeometricSeries(e,this.cost,this.costIncrease,0)),player.IPMultPurchases+=e,GameUI.update())}buyMax(){if(this.canBeBought){if(!this.hasIncreasedCost){const e=Currency.infinityPoints.value.clampMax(this.config.costIncreaseThreshold),i=Decimal.affordGeometricSeries(e,this.cost,this.costIncrease,0).toNumber();if(i<=0)return;this.purchase(i)}if(this.hasIncreasedCost){const e=Currency.infinityPoints.value.clampMax(this.config.costCap),i=Decimal.affordGeometricSeries(e,this.cost,this.costIncrease,0).toNumber();if(i<=0)return;this.purchase(i)}}}}const da=mapGameDataToObject(GameDatabase.infinity.upgrades,t=>t.id==="ipMult"?new Q7e(t):new P4(t));class O4 extends Gf{get currency(){return Currency.infinityPoints}get set(){return player.infinityUpgrades}onPurchased(){this.id==="postGalaxy"&&(Ib.upgrade5e11IP.tryComplete(),PelleStrikes.powerGalaxies.trigger())}}class J7e extends su{get currency(){return Currency.infinityPoints}get boughtAmount(){return player.infinityRebuyables[this.id]}set boughtAmount(e){player.infinityRebuyables[this.id]=e}get isCapped(){return this.boughtAmount===this.config.maxUpgrades}onPurchased(){var e,i;(i=(e=this.config).onPurchased)==null||i.call(e)}}const eXe=mapGameDataToObject(GameDatabase.infinity.breakUpgrades,t=>t.rebuyable?new J7e(t):new O4(t));function tXe(t){if(Kc(11).isRunning||InfinityChallenge(6).isRunning){if(AntimatterDimension(2).amount.neq(0)){Currency.matter.bumpTo(1);const e=1.03+Math.clampMax(DimBoost.totalBoosts,400)/200+Math.clampMax(player.galaxies,100)/100;Currency.matter.multiply(Decimal.pow(e,t/20))}if(Currency.matter.gt(Currency.antimatter.value)&&Kc(11).isRunning&&!Player.canCrunch){const e=[Currency.antimatter.value,Currency.matter.value];softReset(0,!0,!0),Modal.message.show(`Your ${format(e[0],2,2)} antimatter was annihilated
        by ${format(e[1],2,2)} matter.`,{closeEvent:GAME_EVENT.BIG_CRUNCH_AFTER},1)}}Kc(3).isRunning&&(player.chall3Pow=player.chall3Pow.times(L.D1_00038.pow(t/100)).clampMax(Decimal.NUMBER_MAX_VALUE)),Kc(2).isRunning&&(player.chall2Pow=Math.min(player.chall2Pow+t/100/1800,1)),InfinityChallenge(2).isRunning&&(player.ic2Count>=400?(AntimatterDimension(8).amount.gt(0)&&sacrificeReset(),player.ic2Count%=400):player.ic2Count+=Math.clamp(Date.now()-player.lastUpdate,1,216e5))}class iXe extends yn{get isQuickResettable(){return this.config.isQuickResettable}get isRunning(){const e=this.id!==9&&this.id!==12;return player.challenge.normal.current===this.id||e&&InfinityChallenge(1).isRunning}get isOnlyActiveChallenge(){return player.challenge.normal.current===this.id}get isUnlocked(){if(PlayerProgress.eternityUnlocked()||this.id===0)return!0;const e=GameDatabase.challenges.normal[this.id-1].lockedAt;return Currency.infinitiesTotal.gte(e)}get isDisabled(){return Pelle.isDoomed}get lockedAt(){return GameDatabase.challenges.normal[this.id].lockedAt}requestStart(){if(Tab.challenges.isUnlocked&&!GameEnd.creditsEverClosed){if(!player.options.confirmations.challenges){this.start();return}Modal.startNormalChallenge.show(this.id)}}start(){this.id===1||this.isOnlyActiveChallenge||Tab.challenges.isUnlocked&&(bigCrunchReset(!0,!0),player.challenge.normal.current=this.id,player.challenge.infinity.current=0,Enslaved.isRunning&&EternityChallenge(6).isRunning&&this.id===10&&(EnslavedProgress.challengeCombo.giveProgress(),Enslaved.quotes.ec6C10.show()),Enslaved.isRunning||Tab.dimensions.antimatter.show())}get isCompleted(){return(player.challenge.normal.completedBits&1<<this.id)!==0}complete(){player.challenge.normal.completedBits|=1<<this.id,Achievement(52).tryUnlock(),Achievement(53).tryUnlock(),TabNotification.newAutobuyer.clearTrigger(),GameCache.cheapestAntimatterAutobuyer.invalidate()}get goal(){return Enslaved.isRunning&&Enslaved.BROKEN_CHALLENGES.includes(this.id)?L.E1E15:Decimal.NUMBER_MAX_VALUE}updateChallengeTime(){player.challenge.normal.bestTimes[this.id-2]<=player.records.thisInfinity.time||(player.challenge.normal.bestTimes[this.id-2]=player.records.thisInfinity.time,GameCache.challengeTimeSum.invalidate(),GameCache.worstChallengeTime.invalidate())}exit(){player.challenge.normal.current=0,bigCrunchReset(!0,!1),Enslaved.isRunning||Tab.dimensions.antimatter.show()}}const Kc=iXe.createAccessor(GameDatabase.challenges.normal);Object.defineProperty(Kc,"current",{get:()=>player.challenge.normal.current>0?Kc(player.challenge.normal.current):void 0});Object.defineProperty(Kc,"isRunning",{get:()=>player.challenge.normal.current!==0});const N4={all:Kc.index.compact(),completeAll(){for(const t of N4.all)t.complete()},clearCompletions(){player.challenge.normal.completedBits=0}};function nXe(){if(EternityMilestone.autoIC.isReached){const t=Fh.all.filter(e=>e.isUnlocked&&!e.isCompleted);for(const e of t)e.complete()}}class rXe extends yn{constructor(e,i){super(e),this._challenge=i}get isEffectActive(){return this._challenge.isCompleted}}class sXe extends yn{constructor(e){super(e),this._reward=new rXe(e.reward,this)}get unlockAM(){return this.config.unlockAM}get isUnlocked(){return player.records.thisEternity.maxAM.gte(this.unlockAM)||Achievement(133).isUnlocked&&!Pelle.isDoomed||PelleUpgrade.keepInfinityChallenges.canBeApplied&&Pelle.cel.records.totalAntimatter.gte(this.unlockAM)}get isRunning(){return player.challenge.infinity.current===this.id}requestStart(){if(this.isUnlocked&&!GameEnd.creditsEverClosed){if(!player.options.confirmations.challenges){this.start();return}Modal.startInfinityChallenge.show(this.id)}}start(){!this.isUnlocked||this.isRunning||(bigCrunchReset(!0,!0),player.challenge.normal.current=0,player.challenge.infinity.current=this.id,Enslaved.isRunning||Tab.dimensions.antimatter.show(),player.break=!0,EternityChallenge.isRunning&&Achievement(115).unlock())}get isCompleted(){return(player.challenge.infinity.completedBits&1<<this.id)!==0}complete(){player.challenge.infinity.completedBits|=1<<this.id,EventHub.dispatch(GAME_EVENT.INFINITY_CHALLENGE_COMPLETED)}get isEffectActive(){return this.isRunning}get reward(){return this._reward}get isQuickResettable(){return this.config.isQuickResettable}get goal(){return this.config.goal}updateChallengeTime(){player.challenge.infinity.bestTimes[this.id-1]<=player.records.thisInfinity.time||(player.challenge.infinity.bestTimes[this.id-1]=player.records.thisInfinity.time,GameCache.infinityChallengeTimeSum.invalidate())}exit(){player.challenge.infinity.current=0,bigCrunchReset(!0,!1),Enslaved.isRunning||Tab.dimensions.antimatter.show()}}const Lm=sXe.createAccessor(GameDatabase.challenges.infinity);Object.defineProperty(Lm,"current",{get:()=>player.challenge.infinity.current>0?Lm(player.challenge.infinity.current):void 0});Object.defineProperty(Lm,"isRunning",{get:()=>Lm.current!==void 0});const Fh={all:Lm.index.compact(),completeAll(){for(const t of Fh.all)t.complete()},clearCompletions(){player.challenge.infinity.completedBits=0},get nextIC(){return Fh.all.find(t=>!t.isUnlocked)},get nextICUnlockAM(){var t;return(t=this.nextIC)==null?void 0:t.unlockAM},notifyICUnlock(t){if(!EternityMilestone.autoIC.isReached&&Fh.nextIC!==void 0){for(const e of Fh.all)if(!(e.isUnlocked||e.isCompleted)){if(t.lt(e.unlockAM))break;TabNotification.ICUnlock.clearTrigger(),GameUI.notify.infinity(`You have unlocked Infinity Challenge ${e.id}`,7e3),TabNotification.ICUnlock.tryTrigger()}}},get completed(){return Fh.all.filter(t=>t.isCompleted)}};function aXe(t){player.records.bestEternity.time=Math.min(player.records.thisEternity.time,player.records.bestEternity.time),Currency.eternityPoints.add(gainedEternityPoints());const e=$4();if(Currency.eternities.eq(0)&&e.lte(10)&&Tab.dimensions.time.show(),Currency.eternities.add(e),EternityChallenge.isRunning){const i=EternityChallenge.current;if(i.addCompletion(!1),Perk.studyECBulk.isBought){let n=0;for(;!i.isFullyCompleted&&i.canBeCompleted;)i.addCompletion(!1),n++;AutomatorData.lastECCompletionCount=n,Enslaved.isRunning&&n>5&&EnslavedProgress.ec1.giveProgress()}player.challenge.eternity.requirementBits&=~(1<<i.id),respecTimeStudies(t)}addEternityTime(player.records.thisEternity.time,player.records.thisEternity.realTime,gainedEternityPoints(),e),player.records.thisReality.bestEternitiesPerMs=player.records.thisReality.bestEternitiesPerMs.clampMin(e.div(Math.clampMin(33,player.records.thisEternity.realTime))),player.records.bestEternity.bestEPminReality=player.records.bestEternity.bestEPminReality.max(player.records.thisEternity.bestEPmin),Currency.infinitiesBanked.value=Currency.infinitiesBanked.value.plusEffectsOf(Achievement(131).effects.bankedInfinitiesGain,TimeStudy(191)),Effarig.isRunning&&!EffarigUnlock.eternity.isUnlocked&&(EffarigUnlock.eternity.unlock(),beginProcessReality(getRealityProps(!0)))}function G4(){vl.display("a-eternify",3)}function oXe(){Player.canEternity&&(GameEnd.creditsEverClosed||cXe())}function sk(t,e,i={}){i.switchingDilation&&!Player.canEternity&&(t=!0);const n=player.timestudy.studies.length===0;if(!t){if(!Player.canEternity)return!1;if(RealityUpgrade(10).isLockingMechanics)return RealityUpgrade(10).tryShowWarningModal(),!1;if(RealityUpgrade(12).isLockingMechanics&&EternityChallenge(1).isRunning)return RealityUpgrade(12).tryShowWarningModal(),!1;EventHub.dispatch(GAME_EVENT.ETERNITY_RESET_BEFORE),aXe(e),player.requirementChecks.reality.noEternities=!1}return player.dilation.active&&rewardTP(),t&&(player.challenge.eternity.current=0),L4(),B4(),!qv.keepAutobuyers.isReached&&!(Pelle.isDoomed&&PelleUpgrade.keepAutobuyers.canBeApplied)&&(player.break=!1),player.challenge.eternity.current=0,!i.enteringEC&&!Pelle.isDoomed&&(player.dilation.active=!1),resetInfinityRuns(),InfinityDimensions.fullReset(),Replicanti.reset(),resetChallengeStuff(),AntimatterDimensions.reset(),!i.enteringEC&&player.respec&&(n&&SecretAchievement(34).unlock(),respecTimeStudies(e),player.respec=!1),Currency.infinityPoints.reset(),InfinityDimensions.resetAmount(),player.records.thisInfinity.bestIPmin=L.D0,player.records.bestInfinity.bestIPminEternity=L.D0,player.records.thisEternity.bestEPmin=L.D0,player.records.thisEternity.bestInfinitiesPerMs=L.D0,player.records.thisEternity.bestIPMsWithoutMaxAll=L.D0,resetTimeDimensions(),resetTickspeed(),playerInfinityUpgradesOnReset(),AchievementTimers.marathon2.reset(),F4(),player.records.thisInfinity.maxAM=L.D0,player.records.thisEternity.maxAM=L.D0,Currency.antimatter.reset(),ECTimeStudyState.invalidateCachedRequirements(),PelleStrikes.eternity.trigger(),EventHub.dispatch(GAME_EVENT.ETERNITY_RESET_AFTER),!0}function U4(t){if(!Player.canEternity)return!1;const e=!vl.isDisplaying&&!RealityUpgrade(10).isLockingMechanics&&!(RealityUpgrade(12).isLockingMechanics&&EternityChallenge(1).isRunning)&&(player.dilation.active&&player.options.animations.dilation||!player.dilation.active&&player.options.animations.eternity);return e?player.dilation.active?animateAndUndilate(t):(G4(),setTimeout(()=>{sk(),t&&t()},2250)):(sk(),t&&t()),e}function L4(t){NormalChallenges.clearCompletions(),PelleUpgrade.keepInfinityChallenges.canBeApplied||InfinityChallenges.clearCompletions(),(!t&&qv.keepAutobuyers.isReached||Pelle.isDoomed)&&NormalChallenges.completeAll(),Achievement(133).isUnlocked&&!Pelle.isDoomed&&InfinityChallenges.completeAll(),player.challenge.normal.current=0,player.challenge.infinity.current=0}function B4(){player.sacrificed=L.D0,Currency.infinities.reset(),player.records.bestInfinity.time=999999999999,player.records.bestInfinity.realTime=999999999999,player.records.thisInfinity.time=0,player.records.thisInfinity.lastBuyTime=0,player.records.thisInfinity.realTime=0,player.dimensionBoosts=qv.keepInfinityUpgrades.isReached?4:0,player.galaxies=qv.keepInfinityUpgrades.isReached?1:0,player.partInfinityPoint=0,player.partInfinitied=0,player.IPMultPurchases=0,Currency.infinityPower.reset(),Currency.timeShards.reset(),player.records.thisEternity.time=0,player.records.thisEternity.realTime=0,player.totalTickGained=0,player.eterc8ids=50,player.eterc8repl=40,Player.resetRequirements("eternity")}function F4(){if(player.eternityUpgrades.size<3&&Perk.autounlockEU1.canBeApplied)for(const t of[1,2,3])player.eternityUpgrades.add(t)}function lXe(){if(player.eternityUpgrades.size<6&&Perk.autounlockEU2.canBeApplied){const t=VT.all.filter(e=>e.id>3);for(const e of t)player.eternityPoints.gte(e.cost/1e10)&&player.eternityUpgrades.add(e.id)}}function cXe(){player.dilation.active&&player.options.confirmations.dilation?Modal.exitDilation.show():player.options.confirmations.eternity?Modal.eternity.show():U4()}function $4(){return Pelle.isDisabled("eternityMults")?new Decimal(1):new Decimal(getAdjustedGlyphEffect("timeetermult")).timesEffectsOf(RealityUpgrade(3),Achievement(113)).pow(AlchemyResource.eternity.effectValue)}let H4=class{constructor(e){this.config=e}get isReached(){return Pelle.isDoomed&&this.config.givenByPelle?this.config.givenByPelle():Currency.eternities.gte(this.config.eternities)}};const qv=mapGameDataToObject(GameDatabase.eternity.milestones,t=>new H4(t));class uXe extends Gf{get currency(){return Currency.eternityPoints}get set(){return player.eternityUpgrades}}class dXe extends yn{constructor(){super({}),this.cachedCost=new Lazy(()=>this.costAfterCount(player.epmultUpgrades)),this.cachedEffectValue=new Lazy(()=>L.D5.pow(player.epmultUpgrades))}get isAffordable(){return!Pelle.isDoomed&&Currency.eternityPoints.gte(this.cost)}get cost(){return this.cachedCost.value}get boughtAmount(){return player.epmultUpgrades}set boughtAmount(e){const i=Math.clampMin(e-player.epmultUpgrades,0);player.epmultUpgrades=e,this.cachedCost.invalidate(),this.cachedEffectValue.invalidate(),Autobuyer.eternity.bumpAmount(L.D5.pow(i))}get isCustomEffect(){return!0}get effectValue(){return this.cachedEffectValue.value}purchase(){return this.isAffordable?(Currency.eternityPoints.subtract(this.cost),++this.boughtAmount,!0):!1}buyMax(e){if(!this.isAffordable)return!1;if(RealityUpgrade(15).isLockingMechanics)return e||RealityUpgrade(15).tryShowWarningModal(),!1;const i=bulkBuyBinarySearch(Currency.eternityPoints.value,{costFunction:this.costAfterCount,cumulative:!0,firstCost:this.cost},this.boughtAmount);return i?(Currency.eternityPoints.subtract(i.purchasePrice),this.boughtAmount+=i.quantity,!0):!1}reset(){this.boughtAmount=0}get costIncreaseThresholds(){return[L.E100,Decimal.NUMBER_MAX_VALUE,L.E1300,L.E4000]}costAfterCount(e){const i=VT.epMult.costIncreaseThresholds,n=[50,100,500,1e3];for(let r=0;r<i.length;r++){const s=Decimal.pow(n[r],e).times(500);if(s.lt(i[r]))return s}return L.E3.pow(e+Math.pow(Math.clampMin(e-1334,0),1.2)).times(500)}}const VT=mapGameDataToObject(GameDatabase.eternity.upgrades,t=>new uXe(t));VT.epMult=new dXe;function V4(){initializeChallengeCompletions(),initializeResourcesAfterEternity(),resetInfinityRuns(),InfinityDimensions.fullReset(),Replicanti.reset(),resetChallengeStuff(),AntimatterDimensions.reset(),player.replicanti.galaxies=0,Currency.infinityPoints.reset(),InfinityDimensions.resetAmount(),player.records.bestInfinity.bestIPminEternity=L.D0,player.records.thisEternity.bestEPmin=L.D0,resetTimeDimensions(),resetTickspeed(),player.records.thisInfinity.maxAM=L.D0,player.records.thisEternity.maxAM=L.D0,Currency.antimatter.reset(),playerInfinityUpgradesOnReset(),AchievementTimers.marathon2.reset(),ECTimeStudyState.invalidateCachedRequirements()}class hXe extends yn{constructor(e,i){const n=e.effect,r=Yf([{},e]);r.effect=()=>n(i.completions),super(r),this._challenge=i}get isEffectActive(){return this._challenge.completions>0}}let q4=class extends yn{constructor(e){super(e),this._fullId=`eterc${this.id}`,this._reward=new hXe(e.reward,this)}get fullId(){return this._fullId}get isUnlocked(){return player.challenge.eternity.unlocked===this.id}get isRunning(){return player.challenge.eternity.current===this.id}get isEffectActive(){return this.isRunning}get hasUnlocked(){return(player.reality.unlockedEC&1<<this.id)!==0}set hasUnlocked(e){e&&(player.reality.unlockedEC|=1<<this.id)}get completions(){const e=player.eternityChalls[this.fullId];return e===void 0?0:e}set completions(e){player.eternityChalls[this.fullId]=Math.min(e,this.maxCompletions)}get maxCompletions(){return Enslaved.isRunning&&this.id===1?1e3:5}get remainingCompletions(){return this.maxCompletions-this.completions}get isFullyCompleted(){return this.completions===this.maxCompletions}get maxValidCompletions(){if(this.id!==4&&this.id!==12)return this.maxCompletions;let e=this.completions;for(;e<this.maxCompletions&&this.isWithinRestrictionAtCompletions(e);)e++;return e}get gainedCompletionStatus(){const e={gainedCompletions:0,hasMoreCompletions:!1,totalCompletions:this.completions};if(this.isFullyCompleted)return e;if(!Perk.studyECBulk.isBought)return this.canBeCompleted&&(++e.totalCompletions,e.gainedCompletions=1),e;let i=this.completionsAtIP(player.records.thisEternity.maxIP);const n=this.maxValidCompletions;return i>n&&(i=n,e.failedRestriction=this.config.failedRestriction),e.totalCompletions=i,e.gainedCompletions=i-this.completions,e.hasMoreCompletions=this.completions+e.gainedCompletions<this.maxCompletions,e.nextGoalAt=this.goalAtCompletions(e.totalCompletions),e}get initialGoal(){return Pelle.isDoomed&&this.config.pelleGoal?this.config.pelleGoal:this.config.goal}get goalIncrease(){return Pelle.isDoomed&&this.config.pelleGoalIncrease?this.config.pelleGoalIncrease:this.config.goalIncrease}get currentGoal(){return this.goalAtCompletions(this.completions)}get isGoalReached(){return player.records.thisEternity.maxIP.gte(this.currentGoal)}get canBeCompleted(){return this.isGoalReached&&this.isWithinRestriction}goalAtCompletions(e){return e>0?this.initialGoal.times(this.goalIncrease.pow(Math.min(e,this.maxCompletions-1))):this.initialGoal}completionsAtIP(e){if(e.lt(this.initialGoal))return 0;const i=1+e.dividedBy(this.initialGoal).log10()/this.goalIncrease.log10();return Math.min(Math.floor(i),this.maxCompletions)}addCompletion(e=!1){this.completions++,(this.id===4||this.id===12)&&e&&this.tryFail(!0),this.id===6&&GameCache.dimensionMultDecrease.invalidate(),this.id===11&&GameCache.tickSpeedMultDecrease.invalidate()}requestStart(){if(!(!Tab.challenges.eternity.isUnlocked||this.isRunning)&&!GameEnd.creditsEverClosed){if(!player.options.confirmations.challenges){this.start();return}this.isUnlocked&&Modal.startEternityChallenge.show(this.id)}}start(e){if(Pf.isRunning||!this.isUnlocked)return!1;const i=player.requirementChecks.reality.slowestBH<=1e-300;if(this.id===12&&ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&i)return e||ImaginaryUpgrade(24).tryShowWarningModal("enter Eternity Challenge 12"),!1;if(this.id===7&&ImaginaryUpgrade(15).isLockingMechanics&&TimeDimension(1).amount.gt(0))return e||ImaginaryUpgrade(15).tryShowWarningModal("enter Eternity Challenge 7"),!1;const n=getGameSpeedupFactor();return Player.canEternity&&eternity(!1,e,{enteringEC:!0}),player.challenge.eternity.current=this.id,this.id===12&&(n<.001&&SecretAchievement(42).unlock(),player.requirementChecks.reality.slowestBH=1),Enslaved.isRunning&&(this.id===6&&this.completions===5&&EnslavedProgress.ec6.giveProgress(),!e&&EnslavedProgress.challengeCombo.hasProgress&&Tab.challenges.normal.show()),V4(),!0}get reward(){return this._reward}get isWithinRestriction(){return this.isWithinRestrictionAtCompletions(this.completions)}isWithinRestrictionAtCompletions(e){return this.config.restriction===void 0||this.config.checkRestriction(this.config.restriction(e))}exit(e){Player.isInAntimatterChallenge&&Player.antimatterChallenge.exit(),player.challenge.eternity.current=0,e||(player.respec=!0),eternity(!0)}fail(e=!1){this.exit(!1);let i;e?this.id===4?i=n=>`Auto Eternity Challenge completion completed Eternity Challenge ${this.id} and made the next tier require having less Infinities (${quantifyInt("Infinity",n)} or less) than you had`:this.id===12&&(i=n=>`Auto Eternity Challenge completion completed Eternity Challenge ${this.id} and made the next tier require spending less time in it (${quantify("in-game second",n,0,1)} or less) than you had spent`):this.id===4?i=n=>`You failed Eternity Challenge ${this.id} due to having more than ${quantifyInt("Infinity",n)}`:this.id===12&&(i=n=>`You failed Eternity Challenge ${this.id} due to spending more than ${quantify("in-game second",n,0,1)} in it`),Modal.message.show(`${i(this.config.restriction(this.completions))}, which has caused you to exit it.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER},1),EventHub.dispatch(GAME_EVENT.CHALLENGE_FAILED)}tryFail(e=!1){return this.isRunning&&!this.isWithinRestriction?(this.fail(e),!0):!1}};const Pf=q4.createAccessor(GameDatabase.challenges.eternity);Object.defineProperty(Pf,"current",{get:()=>player.challenge.eternity.current>0?Pf(player.challenge.eternity.current):void 0});Object.defineProperty(Pf,"isRunning",{get:()=>player.challenge.eternity.current!==0});const Pg={all:Pf.index.compact(),get completions(){return Pg.all.map(t=>t.completions).sum()},get maxCompletions(){return Pg.all.map(t=>t.maxCompletions).sum()},get remainingCompletions(){return Pg.all.map(t=>t.remainingCompletions).sum()},autoComplete:{tick(){const t=TimeDimension(1).amount.gt(0),e=RealityUpgrade(12).isLockingMechanics||ImaginaryUpgrade(15).isLockingMechanics&&t&&!Array.range(1,6).some(r=>!Pf(r).isFullyCompleted);if(!player.reality.autoEC||Pelle.isDisabled("autoec")||e){player.reality.lastAutoEC=Math.clampMax(player.reality.lastAutoEC,this.interval);return}if(Ra.unlocks.instantECAndRealityUpgradeAutobuyers.canBeApplied){let r=this.nextChallenge;for(;r!==void 0;){for(;!r.isFullyCompleted;)r.addCompletion(!0);if(r=this.nextChallenge,ImaginaryUpgrade(15).isLockingMechanics&&(r==null?void 0:r.id)===7&&t)break}return}const i=this.interval;let n=this.nextChallenge;for(;player.reality.lastAutoEC-i>0&&n!==void 0;)player.reality.lastAutoEC-=i,n.addCompletion(!0),n=this.nextChallenge;player.reality.lastAutoEC%=i},get nextChallenge(){return Pg.all.find(t=>!t.isFullyCompleted)},get interval(){if(!Perk.autocompleteEC1.canBeApplied)return 1/0;let t=Effects.min(Number.MAX_VALUE,Perk.autocompleteEC1,Perk.autocompleteEC2,Perk.autocompleteEC3);return t/=VUnlocks.fastAutoEC.effectOrDefault(1),TimeSpan.fromMinutes(t).totalMilliseconds}}},$n={glyphs:[],realityProps:void 0,get active(){return Modal.reality.isOpen},get choiceCount(){return Effects.max(1,Perk.firstPerk)*Ra.unlocks.extraGlyphChoicesAndRelicShardRarityAlwaysMax.effectOrDefault(1)},glyphUncommonGuarantee(t,e){const n=e.uniform();let r;do r=GlyphGenerator.randomStrength(e);while(r<1.5);t.some(s=>s.strength>=1.5)||(t[Math.floor(n*t.length)].strength=r)},glyphList(t,e,i){const n=Math.clampMin(t,4);let r=[];const s=i.rng||new GlyphGenerator.RealGlyphRNG,a=[];if(GlyphGenerator.isUniformityActive)r=GlyphGenerator.uniformGlyphs(e,s,player.realities);else{for(let o=0;o<n;++o)a.push(GlyphGenerator.randomType(s,a));for(let o=0;o<n;++o)r.push(GlyphGenerator.randomGlyph(e,s,a[o]))}return this.glyphUncommonGuarantee(r,s),r=r.slice(0,t),!i.rng&&i.isChoosingGlyph&&s.finalize(),r},generate(t,e=gainedGlyphLevel()){this.glyphs=this.glyphList(t,e,{isChoosingGlyph:!0})},update(t){if(this.realityProps!==void 0){if(t.rawLevel>this.realityProps.gainedGlyphLevel.rawLevel){this.realityProps.gainedGlyphLevel.rawLevel=t.rawLevel;for(const e of this.glyphs)e.rawLevel=t.rawLevel}if(t.actualLevel>this.realityProps.gainedGlyphLevel.actualLevel){this.realityProps.gainedGlyphLevel.actualLevel=t.actualLevel;for(const e of this.glyphs)e.level=t.actualLevel,calculateGlyph(e)}}},select(t,e){const i=this.glyphs[t];e?GlyphSacrificeHandler.removeGlyph(i,!0):GameCache.glyphInventorySpace.value>0?Glyphs.addToInventory(i):AutoGlyphProcessor.getRidOfGlyph(i),this.glyphs=[],this.realityProps=void 0},get upcomingGlyphs(){return Perk.firstPerk.isEffectActive?this.glyphList(this.choiceCount,gainedGlyphLevel(),{isChoosingGlyph:!1}):[this.glyphList(4,gainedGlyphLevel(),{isChoosingGlyph:!1})[this.indexWithoutSTART]]},get indexWithoutSTART(){const t=player.realities*(player.reality.initialSeed%5+3);return permutationIndex(4,t)[0]}};function qT(){return player.records.thisReality.maxEP.exponent>=4e3&&TimeStudy.reality.isBought}function Y4(t){const e=Enslaved.boostReality?Enslaved.realityBoostRatio-1:0,n=(AlchemyResource.multiversal.effectValue+1)*(e+1)+player.partSimulatedReality-1;return t&&(player.partSimulatedReality=n-Math.floor(n)),Math.floor(n)}function fXe(){if(!($n.active||!qT())&&!GameEnd.creditsEverClosed){if(player.options.confirmations.glyphSelection||ui.view.shiftDown){Modal.reality.show();return}if(GameCache.glyphInventorySpace.value===0){Modal.message.show("No available inventory space; free up space by shift-clicking Glyphs to get rid of them.",{closeEvent:GAME_EVENT.GLYPHS_CHANGED});return}W4(!1)}}function W4(t,e){player.options.animations.reality?(j4(),setTimeout(ak,3e3,t,e)):ak(t,e)}function ak(t,e){if(qT()){if(player.realities===0)player.reality.seed=player.reality.initialSeed,Glyphs.addToInventory(GlyphGenerator.startingGlyph(gainedGlyphLevel())),Glyphs.addToInventory(GlyphGenerator.companionGlyph(Currency.eternityPoints.value));else if(Perk.firstPerk.isEffectActive)if($n.generate($n.choiceCount),e===void 0)if(EffarigUnlock.glyphFilter.isUnlocked){const i=AutoGlyphProcessor.pick($n.glyphs);(player.options.confirmations.glyphSelection?t:!AutoGlyphProcessor.wouldKeep(i))||GameCache.glyphInventorySpace.value===0?AutoGlyphProcessor.getRidOfGlyph(i):Glyphs.addToInventory(i)}else $n.select(Math.floor(Math.random()*$n.choiceCount),t);else $n.select(e,t);else $n.generate(4),$n.select($n.indexWithoutSTART,t);ZR(KR(!1,!0)),PerkNetwork.updatePerkColor()}}function j4(){document.getElementById("ui").style.userSelect="none",document.getElementById("ui").style.animation="a-realize 10s 1",document.getElementById("realityanimbg").style.animation="a-realizebg 10s 1",document.getElementById("realityanimbg").style.display="block",Theme.current().isDark()?document.getElementById("realityanimbg").style.filter="invert(1)":document.getElementById("realityanimbg").style.filter="",setTimeout(()=>{document.getElementById("realityanimbg").play(),document.getElementById("realityanimbg").currentTime=0,document.getElementById("realityanimbg").play()},2e3),setTimeout(()=>{document.getElementById("ui").style.userSelect="auto",document.getElementById("ui").style.animation="",document.getElementById("realityanimbg").style.animation="",document.getElementById("realityanimbg").style.display="none"},1e4)}function pXe(t,e){let i;const n=$n.glyphList($n.choiceCount,t,{rng:e});let r;EffarigUnlock.glyphFilter.isUnlocked?(i=AutoGlyphProcessor.pick(n),r=AutoGlyphProcessor.wouldKeep(i)):(i=n[0],r=!0),r&&GameCache.glyphInventorySpace.value>0?Glyphs.addToInventory(i):AutoGlyphProcessor.getRidOfGlyph(i)}function KR(t,e=!1){const i={glyphUndo:!1,restoreCelestialState:!1};return t?Object.assign(i,{reset:!0}):Object.assign(i,{reset:!1,gainedRM:MachineHandler.gainedRealityMachines,gainedGlyphLevel:gainedGlyphLevel(),gainedShards:Effarig.shardsGained,simulatedRealities:Y4(!0),alreadyGotGlyph:e})}function mXe(){$n.active||!qT()||ZR(KR(!1,!1))}function yXe(t){const e=t.gainedRM.dividedBy(Math.clampMin(5e-4,Time.thisRealityRealTime.totalMinutes));player.records.bestReality.RMmin.lt(e)&&(player.records.bestReality.RMmin=e,player.records.bestReality.RMminSet=Glyphs.copyForRecords(Glyphs.active.filter(i=>i!==null))),player.records.bestReality.glyphLevel<t.gainedGlyphLevel.actualLevel&&(player.records.bestReality.glyphLevel=t.gainedGlyphLevel.actualLevel,player.records.bestReality.glyphLevelSet=Glyphs.copyForRecords(Glyphs.active.filter(i=>i!==null))),player.records.bestReality.time=Math.min(player.records.thisReality.time,player.records.bestReality.time),player.records.thisReality.realTime<player.records.bestReality.realTime&&(player.records.bestReality.realTime=player.records.thisReality.realTime,player.records.bestReality.speedSet=Glyphs.copyForRecords(Glyphs.active.filter(i=>i!==null)))}function gXe(t){const e=t.simulatedRealities+1,i=e+binomialDistribution(e,Achievement(154).effectOrDefault(0)),n=Currency.realityMachines.gte(MachineHandler.hardcapRM)?L.D0:t.gainedRM;if(Currency.realityMachines.add(n.times(e)),yXe(t),addRealityTime(player.records.thisReality.time,player.records.thisReality.realTime,n,t.gainedGlyphLevel.actualLevel,i,e,MachineHandler.projectedIMCap),Currency.realities.add(i),Currency.perkPoints.add(i),TeresaUnlocks.effarig.canBeApplied&&Currency.relicShards.add(t.gainedShards*e),e>1&&Enslaved.boostReality&&(Time.thisRealityRealTime.totalSeconds<1?player.celestials.enslaved.storedReal*=1-Time.thisRealityRealTime.totalSeconds:player.celestials.enslaved.storedReal=0,Enslaved.boostReality=!1),Teresa.isRunning){const r=Teresa.runRewardMultiplier,s=Teresa.rewardMultiplier(player.antimatter),o=`You have completed Teresa's Reality! ${s>r?`Since you gained more Antimatter, you increased your
      Glyph Sacrifice multiplier from ${format(r,2,2)} to ${format(s,2,2)}`:`You did not gain more Antimatter during this run, so the Glyph Sacrifice multiplier
      from Teresa did not increase`}.`;if(Modal.message.show(o,{},2),Currency.antimatter.gt(player.celestials.teresa.bestRunAM)){player.celestials.teresa.bestRunAM=Currency.antimatter.value,player.celestials.teresa.bestAMSet=Glyphs.copyForRecords(Glyphs.active.filter(d=>d!==null));let c;Currency.imaginaryMachines.value===0?c=player.reality.maxRM:c=L.E10000.times(Currency.imaginaryMachines.value),player.celestials.teresa.lastRepeatedMachines=player.celestials.teresa.lastRepeatedMachines.clampMin(c)}Teresa.quotes.completeReality.show()}Effarig.isRunning&&!EffarigUnlock.reality.isUnlocked&&(EffarigUnlock.reality.unlock(),Effarig.quotes.completeReality.show()),Enslaved.isRunning&&Enslaved.completeRun(),V.isRunning&&V.quotes.realityComplete.show()}function ZR(t){if(t.reset){ok(t);return}EventHub.dispatch(GAME_EVENT.REALITY_RESET_BEFORE);const e=t.simulatedRealities+(t.alreadyGotGlyph?0:1),i=GlyphGenerator.getRNG(!1),n=gainedGlyphLevel();if(ok(t),e<100){for(let m=0;m<e;m++)if($n.generate($n.choiceCount,n),EffarigUnlock.glyphFilter.isUnlocked){const y=$n.glyphList($n.choiceCount,t.gainedGlyphLevel,{rng:i}),_=AutoGlyphProcessor.pick(y);!AutoGlyphProcessor.wouldKeep(_)||GameCache.glyphInventorySpace.value===0?AutoGlyphProcessor.getRidOfGlyph(_):Glyphs.addToInventory(_)}else $n.select(Math.floor(Math.random()*$n.choiceCount),!1);Glyphs.processSortingAfterReality();return}const r={};let s=!1;const a={toGenerate:0,sampleStats:generatedTypes.map(m=>({type:m,count:0,totalSacrifice:0,varProdSacrifice:0})),totalStats:{count:0,totalSacrifice:0,varProdSacrifice:0}},o=(m,y)=>{const _=m.totalSacrifice/m.count;m.totalSacrifice+=y,m.count++;const E=m.totalSacrifice/m.count;m.count!==1&&(m.varProdSacrifice+=(y-_)*(y-E))},c=(m,y)=>{if(m.count===0)return 0;const _=m.totalSacrifice/m.count,E=Math.sqrt(m.varProdSacrifice/m.count);return normalDistribution(_*y,E*Math.sqrt(y))},d=()=>{if(s){const m=$n.glyphList($n.choiceCount,t.gainedGlyphLevel,{rng:i}),y=AutoGlyphProcessor.pick(m),_=GlyphSacrificeHandler.glyphSacrificeGain(y),E=a.sampleStats.find(C=>C.type===y.type);o(E,_),o(a.totalStats,_)}else pXe(t.gainedGlyphLevel,i),VUnlocks.autoAutoClean.canBeApplied&&player.reality.autoAutoClean&&Glyphs.autoClean()},p=Math.min(e,1e4);Async.run(d,e,{batchSize:100,maxTime:33,sleepTime:1,asyncEntry:m=>{GameIntervals.stop(),ui.$viewModel.modal.progressBar={label:"Simulating Amplified Reality",info:()=>`The game is currently calculating all the resources you would gain from repeating the
            Reality you just completed ${formatInt(e)} more times. Pressing "Quick Glyphs" with
            more than ${formatInt(p)} Glyphs remaining will speed up the calculation by automatically
            sacrificing all the remaining Glyphs you would get. Pressing "Skip Glyphs" will ignore all resources
            related to Glyphs and stop the simulation after giving all other resources.
            ${Ra.unlocks.unlockGlyphAlchemy.canBeApplied?`Pressing either button to speed up
            simulation will not update any resources within Glyph Alchemy.`:""}`,progressName:"Realities",current:m,max:e,startTime:Date.now(),buttons:[{text:"Quick Glyphs",condition:(y,_)=>_-y>p,click:()=>{s=!0,a.toGenerate=r.remaining,r.maxIter-=r.remaining-p,r.remaining=p,ui.$viewModel.modal.progressBar.max=r.maxIter}},{text:"Skip Glyphs",condition:()=>!0,click:()=>{r.maxIter-=r.remaining,r.remaining=0}}]}},asyncProgress:m=>{ui.$viewModel.modal.progressBar.current=m},asyncExit:()=>{ui.$viewModel.modal.progressBar=void 0,GameIntervals.start()},then:()=>{if(a.toGenerate>0)if(AutoGlyphProcessor.scoreMode===AUTO_GLYPH_SCORE.LOWEST_SACRIFICE){let m=c(a.totalStats,a.toGenerate);const y=generatedTypes.filter(S=>EffarigUnlock.reality.isUnlocked||S!=="effarig"),_=y.map(S=>player.reality.glyphs.sac[S]).sort((S,k)=>S-k),E=[];for(const S of y)E.push({type:S,value:player.reality.glyphs.sac[S]});const C=Object.values(E).sort((S,k)=>S.value-k.value);for(let S=0;S<_.length-1;S++){let k=0;for(let O=0;O<=S;O++)k+=_[S+1]-_[O];const R=Math.clampMax(k,m);m-=R;for(let O=0;O<=S;O++)_[O]+=R/(S+1);if(m===0)break}for(let S=0;S<_.length;S++)_[S]+=m/_.length;for(let S=0;S<_.length;S++)player.reality.glyphs.sac[C[S].type]=_[S]}else for(const m of a.sampleStats){const y=a.toGenerate*m.count/p;player.reality.glyphs.sac[m.type]+=c(m,y)}},progress:r}),Glyphs.processSortingAfterReality()}function ok(t){const e=Currency.eternityPoints.value.plus(gainedEternityPoints());player.records.bestReality.bestEP.lt(e)&&(player.records.bestReality.bestEP=new Decimal(e),player.records.bestReality.bestEPSet=Glyphs.copyForRecords(Glyphs.active.filter(s=>s!==null)));const i=player.records.thisReality.realTime,n=t.reset;n||gXe(t),t.glyphUndo||(Glyphs.clearUndo(),player.reality.respec&&respecGlyphs(),player.celestials.ra.disCharge&&disChargeAll()),player.options.automatorEvents.clearOnReality&&AutomatorData.clearEventLog(),Player.automatorUnlocked&&AutomatorBackend.state.forceRestart&&AutomatorBackend.start(AutomatorBackend.state.topLevelScript);const r=X4();if(recalculateAllGlyphs(),Glyphs.updateMaxGlyphCount(!0),player.sacrificed=L.D0,_Xe(),initializeChallengeCompletions(!0),Currency.infinities.reset(),Currency.infinitiesBanked.reset(),player.records.bestInfinity.time=999999999999,player.records.bestInfinity.realTime=999999999999,player.records.thisInfinity.time=0,player.records.thisInfinity.lastBuyTime=0,player.records.thisInfinity.realTime=0,player.dimensionBoosts=0,player.galaxies=0,player.partInfinityPoint=0,player.partInfinitied=0,player.break=!1,player.IPMultPurchases=0,Currency.infinityPower.reset(),Currency.timeShards.reset(),Replicanti.reset(!0),Currency.eternityPoints.reset(),EternityUpgrade.epMult.reset(),PelleUpgrade.eternitiesNoReset.canBeApplied||Currency.eternities.reset(),player.records.thisEternity.time=0,player.records.thisEternity.realTime=0,player.records.bestEternity.time=999999999999,player.records.bestEternity.realTime=999999999999,PelleUpgrade.keepEternityUpgrades.canBeApplied||player.eternityUpgrades.clear(),player.totalTickGained=0,PelleUpgrade.keepEternityChallenges.canBeApplied||(player.eternityChalls={}),player.reality.unlockedEC=0,player.reality.lastAutoEC=0,player.challenge.eternity.current=0,PelleUpgrade.timeStudiesNoReset.canBeApplied||(player.challenge.eternity.unlocked=0),player.challenge.eternity.requirementBits=0,player.respec=!1,player.eterc8ids=50,player.eterc8repl=40,t.glyphUndo?player.requirementChecks.reality.maxGlyphs=Math.max(Glyphs.bestUndoGlyphCount,player.requirementChecks.reality.maxGlyphs):Player.resetRequirements("reality"),player.records.thisReality.time=0,player.records.thisReality.realTime=0,player.records.thisReality.maxReplicanti=L.D0,PelleUpgrade.timeStudiesNoReset.canBeApplied||Currency.timeTheorems.reset(),player.celestials.v.STSpent=0,PelleUpgrade.timeStudiesNoReset.canBeApplied||(player.dilation.studies=[],player.dilation.active=!1),PelleUpgrade.dilationUpgradesNoReset.canBeApplied||(player.dilation.upgrades.clear(),player.dilation.rebuyables={1:0,2:0,3:0,11:0,12:0,13:0}),PelleUpgrade.tachyonParticlesNoReset.canBeApplied||Currency.tachyonParticles.reset(),player.dilation.nextThreshold=L.E3,player.dilation.baseTachyonGalaxies=0,player.dilation.totalTachyonGalaxies=0,Currency.dilatedTime.reset(),player.records.thisInfinity.maxAM=L.D0,player.records.thisEternity.maxAM=L.D0,player.records.thisReality.maxDT=L.D0,player.dilation.lastEP=L.DM1,Currency.antimatter.reset(),Enslaved.autoReleaseTick=0,player.celestials.enslaved.hasSecretStudy=!1,player.celestials.laitela.entropy=0,playerInfinityUpgradesOnReset(),resetInfinityRuns(),resetEternityRuns(),InfinityDimensions.fullReset(),fullResetTimeDimensions(),resetChallengeStuff(),AntimatterDimensions.reset(),secondSoftReset(!1),player.celestials.ra.peakGamespeed=1,InfinityDimensions.resetAmount(),player.records.thisInfinity.bestIPmin=L.D0,player.records.bestInfinity.bestIPminEternity=L.D0,player.records.thisEternity.bestEPmin=L.D0,player.records.thisEternity.bestInfinitiesPerMs=L.D0,player.records.thisEternity.bestIPMsWithoutMaxAll=L.D0,player.records.bestEternity.bestEPminReality=L.D0,player.records.thisReality.bestEternitiesPerMs=L.D0,player.records.thisReality.bestRSmin=0,player.records.thisReality.bestRSminVal=0,resetTimeDimensions(),resetTickspeed(),AchievementTimers.marathon2.reset(),Currency.infinityPoints.reset(),RealityUpgrade(10).isBought?z4():Tab.dimensions.antimatter.show(),Lazy.invalidateAll(),ECTimeStudyState.invalidateCachedRequirements(),EventHub.dispatch(GAME_EVENT.REALITY_RESET_AFTER),TeresaUnlocks.startEU.canBeApplied)for(const s of[1,2,3,4,5,6])player.eternityUpgrades.add(s);else RealityUpgrade(14).isBought&&applyEU1();n||Ra.applyAlchemyReactions(i),player.reality.gainedAutoAchievements=!1,player.reality.hasCheckedFilter=!1,(t.restoreCelestialState||player.options.retryCelestial)&&vXe(r),Pelle.isDoomed&&PelleUpgrade.keepAutobuyers.canBeApplied&&Autobuyer.bigCrunch.hasMaxedInterval&&(player.break=!0)}function vXe(t){player.celestials.teresa.run=t.teresa,player.celestials.teresa.run&&Teresa.initializeRun(),player.celestials.effarig.run=t.effarig,player.celestials.effarig.run&&Effarig.initializeRun(),player.celestials.enslaved.run=t.enslaved,player.celestials.enslaved.run&&Enslaved.initializeRun(),player.celestials.v.run=t.v,player.celestials.v.run&&V.initializeRun(),player.celestials.ra.run=t.ra,player.celestials.ra.run&&Ra.initializeRun(),player.celestials.laitela.run=t.laitela,player.celestials.laitela.run&&Laitela.initializeRun()}function z4(){if(NormalChallenges.completeAll(),PelleUpgrade.replicantiStayUnlocked.canBeApplied&&(Replicanti.amount=Replicanti.amount.clampMin(1),Replicanti.unlock(!0)),!Pelle.isDisabled("rupg10")){player.auto.antimatterDims.all=player.auto.antimatterDims.all.map(t=>({isUnlocked:!0,cost:1e14,interval:100,bulk:1e10,mode:t.mode,priority:t.priority,isActive:t.isActive,lastTick:player.records.realTimePlayed}));for(const t of Autobuyers.all)t.data.interval!==void 0&&(t.data.interval=100);player.dimensionBoosts=Math.max(4,player.dimensionBoosts),player.galaxies=Math.max(1,player.galaxies),player.break=!0,Currency.eternities.bumpTo(100),Replicanti.amount=Replicanti.amount.clampMin(1),Replicanti.unlock(!0),applyEU1()}}function X4(){const t={teresa:player.celestials.teresa.run,effarig:player.celestials.effarig.run,enslaved:player.celestials.enslaved.run,v:player.celestials.v.run,ra:player.celestials.ra.run,laitela:player.celestials.laitela.run};return player.celestials.teresa.run=!1,player.celestials.effarig.run=!1,Enslaved.isRunning&&(player.celestials.enslaved.run=!1,(Tabs.current.isHidden||Tabs.current._currentSubtab.isHidden)&&Tab.celestials.enslaved.show(),AutomatorData.recalculateErrors()),player.celestials.v.run=!1,player.celestials.ra.run=!1,player.celestials.laitela.run=!1,t}function bXe(){return Object.values(player.celestials).some(t=>t.run)}function _Xe(){if(!Perk.achievementGroup5.isBought){for(const t of Achievements.preReality)t.lock();player.reality.achTimer=0}}const gm={get scaleLog10(){return Math.log10(Number.MAX_VALUE)},get scaleFactor(){return PelleStrikes.eternity.hasStrike&&Nt.amount.gte(L.E2000)?10:Pelle.isDoomed?2:AlchemyResource.cardinality.effectValue}};function lk(t){t>0&&(player.replicanti.galaxies+=t,player.requirementChecks.eternity.noRG=!1,(Pelle.isDoomed?PelleUpgrade.replicantiGalaxyEM40.canBeApplied:EternityMilestone.replicantiNoReset.isReached)||(player.dimensionBoosts=0,softReset(0,!0,!0)))}function QR(t){if(RealityUpgrade(6).isLockingMechanics){t||RealityUpgrade(6).tryShowWarningModal();return}if(!Nt.galaxies.canBuyMore)return;const e=Nt.galaxies.gain;e<1||(player.replicanti.timer=0,Nt.amount=Achievement(126).isUnlocked&&!Pelle.isDoomed?Decimal.pow10(Nt.amount.log10()-LOG10_MAX_VALUE*e):L.D1,lk(e))}function EXe(){Nt.galaxies.canBuyMore&&(RealityUpgrade(6).isLockingMechanics?RealityUpgrade(6).tryShowWarningModal():player.options.confirmations.replicantiGalaxy?Modal.replicantiGalaxy.show():QR(!1))}function TXe(t,e){const i=e&&!RealityUpgrade(6).isLockingMechanics,n=L.E1.pow(t.plus(Nt.amount.log10()));if(t.gt(Number.MAX_VALUE)||n.eq(0))return i&&lk(Nt.galaxies.max-player.replicanti.galaxies),Nt.amount=Eo(),t;if(!i){const d=t.minus(Eo().log10()-Nt.amount.log10()).clampMin(0);return Nt.amount=Decimal.min(n,Eo()),d}const r=Decimal.NUMBER_MAX_VALUE.log10(),s=t.toNumber()+Nt.amount.log10(),a=Math.floor(Math.min(s/r,Nt.galaxies.max-player.replicanti.galaxies)),o=r*a+Eo().log10()-Nt.amount.log10(),c=t.minus(o).clampMin(0);return Nt.amount=Decimal.pow10(s-r*a).clampMax(Eo()),lk(a),c}function LE(t,e){let i=e||player.replicanti.interval;const n=Nt.amount,r=t===void 0?n.gt(Eo()):t;if(i=new Decimal(i),(TimeStudy(133).isBought&&!Achievement(138).isUnlocked||r)&&(i=i.times(10)),r){let s=(n.log10()-Eo().log10())/gm.scaleLog10;PelleStrikes.eternity.hasStrike&&n.gte(L.E2000)&&(s-=Math.log10(5)*(2e3-Eo().log10())/gm.scaleLog10),i=i.times(Decimal.pow(gm.scaleFactor,s))}return i=i.divide(K4(r)),V.isRunning&&(i=i.pow(2)),i}function K4(t){let e=L.D1;if(e=e.times(PelleRifts.decay.effectValue),e=e.times(Pelle.specialGlyphEffect.replication),e=e.times(ShopPurchase.replicantiPurchases.currentMult),Pelle.isDisabled("replicantiIntervalMult"))return e;const i=Effects.product(TimeStudy(62),TimeStudy(213),RealityUpgrade(2),RealityUpgrade(6),RealityUpgrade(23));return e=e.times(i),TimeStudy(132).isBought&&(e=e.times(Perk.studyPassive.isBought?3:1.5)),!t&&Achievement(134).isUnlocked&&(e=e.times(2)),e=e.times(getAdjustedGlyphEffect("replicationspeed")),GlyphAlteration.isAdded("replication")&&(e=e.times(Math.clampMin(Decimal.log10(Nt.amount)*getSecondaryGlyphEffect("replicationdtgain"),1))),e=e.timesEffectsOf(AlchemyResource.replication,Ra.unlocks.continuousTTBoost.effects.replicanti),e}function Eo(){return EffarigUnlock.infinity.canBeApplied?Currency.infinitiesTotal.value.pow(TimeStudy(31).isBought?120:30).clampMin(1).times(Decimal.NUMBER_MAX_VALUE):Decimal.NUMBER_MAX_VALUE}function wXe(t){if(!player.replicanti.unl)return;const e=Nt.amount;PerformanceStats.start("Replicanti"),EventHub.dispatch(GAME_EVENT.REPLICANTI_TICK_BEFORE);const i=LE(!1),n=Nt.isUncapped,r=Nt.galaxies.areBeingBought;let s=Decimal.divide(t+player.replicanti.timer,i);s.lt(100)?player.replicanti.timer=s.minus(s.floor()).times(i).toNumber():player.replicanti.timer=0,s=s.floor();const a=Nt.amount.times(player.replicanti.chance);if(s.gte(100)||a.gte(10)&&s.gte(1)){let o=Math.log10(gm.scaleFactor)/gm.scaleLog10;V.isRunning&&(o*=2);let c=s.times(Math.log(player.replicanti.chance+1)).times(LOG10_E);if((!n||Nt.amount.lte(Eo()))&&(c=TXe(c,r)),n&&Nt.amount.gte(Eo())&&c.gt(0)){const d=LE(!0).div(i);c=c.div(d),Nt.amount=Decimal.exp(c.div(LOG10_E).times(o).plus(1).ln()/o+Nt.amount.clampMin(1).ln())}}else if(s.gt(1)){const o=Math.floor(s.toNumber()*Math.log2(1+player.replicanti.chance)),c=s.toNumber()-o/Math.log2(1+player.replicanti.chance);Nt.amount=Nt.amount.times(L.D2.pow(poissonDistribution(o)));for(let p=0;p<Math.floor(c);p++){const m=binomialDistribution(Nt.amount,player.replicanti.chance);Nt.amount=Nt.amount.plus(m)}const d=c-Math.floor(c);player.replicanti.timer+=i.times(d).toNumber()}else if(s.eq(1)){const o=binomialDistribution(Nt.amount,player.replicanti.chance);Nt.amount=Nt.amount.plus(o)}if(n||(Nt.amount=Decimal.min(Eo(),Nt.amount)),Pelle.isDoomed&&Nt.amount.log10()-e.log10()>308&&(Nt.amount=e.times(1e308)),r&&Nt.amount.gte(Decimal.NUMBER_MAX_VALUE)){const o=Autobuyer.replicantiGalaxy,c=o.canTick&&o.isEnabled;QR(c&&!Nt.galaxies.isPlayerHoldingR)}player.records.thisReality.maxReplicanti=player.records.thisReality.maxReplicanti.clampMin(Nt.amount),EventHub.dispatch(GAME_EVENT.REPLICANTI_TICK_AFTER),PerformanceStats.end()}function CXe(){return Decimal.pow(Decimal.log2(Nt.amount.clampMin(1)),2).plusEffectOf(TimeStudy(21)).timesEffectOf(TimeStudy(102)).clampMin(1).pow(getAdjustedGlyphEffect("replicationpow"))}class hC{get id(){throw new NotImplementedError}get value(){throw new NotImplementedError}set value(e){throw new NotImplementedError}get nextValue(){throw new NotImplementedError}get cost(){throw new NotImplementedError}set cost(e){throw new Error("Use baseCost to set cost")}get costIncrease(){throw new NotImplementedError}get baseCost(){return this.cost}set baseCost(e){throw new NotImplementedError}get cap(){}get isCapped(){return!1}get autobuyerMilestone(){throw new NotImplementedError}get canBeBought(){return!this.isCapped&&Currency.infinityPoints.gte(this.cost)&&player.eterc8repl!==0}purchase(){this.canBeBought&&(Currency.infinityPoints.subtract(this.cost),this.baseCost=Decimal.times(this.baseCost,this.costIncrease),this.value=this.nextValue,EternityChallenge(8).isRunning&&player.eterc8repl--,GameUI.update())}autobuyerTick(){for(;this.canBeBought;)this.purchase()}}const N0={chance:new class extends hC{get id(){return 1}get value(){return player.replicanti.chance}set value(e){player.replicanti.chance=e}get nextValue(){return this.nearestPercent(this.value+.01)}get cost(){return player.replicanti.chanceCost.dividedByEffectOf(PelleRifts.vacuum.milestones[1])}get baseCost(){return player.replicanti.chanceCost}set baseCost(e){player.replicanti.chanceCost=e}get costIncrease(){return 1e15}get cap(){return 1}get isCapped(){return this.nearestPercent(this.value)>=this.cap}get autobuyerMilestone(){return EternityMilestone.autobuyerReplicantiChance}autobuyerTick(){let e=Currency.infinityPoints.value.times(this.costIncrease-1).dividedBy(this.cost).plus(1).log(this.costIncrease);if(e=Math.round((Math.min(this.value+.01*Math.floor(e),this.cap)-this.value)*100),e<=0)return;const i=this.cost.times(Decimal.pow(this.costIncrease,e).minus(1).dividedBy(this.costIncrease-1));Currency.infinityPoints.subtract(i),this.baseCost=this.baseCost.times(Decimal.pow(this.costIncrease,e)),this.value=this.nearestPercent(this.value+.01*e)}nearestPercent(e){return Math.round(100*e)/100}},interval:new class extends hC{get id(){return 2}get value(){return player.replicanti.interval}set value(e){player.replicanti.interval=e}get nextValue(){return Math.max(this.value*.9,this.cap)}get cost(){return player.replicanti.intervalCost.dividedByEffectOf(PelleRifts.vacuum.milestones[1])}get baseCost(){return player.replicanti.intervalCost}set baseCost(e){player.replicanti.intervalCost=e}get costIncrease(){return 1e10}get cap(){return Effects.min(50,TimeStudy(22))}get isCapped(){return this.value<=this.cap}get autobuyerMilestone(){return EternityMilestone.autobuyerReplicantiInterval}applyModifiers(e){return LE(void 0,e)}},galaxies:new class extends hC{get id(){return 3}get value(){return player.replicanti.boughtGalaxyCap}set value(e){player.replicanti.boughtGalaxyCap=e}get nextValue(){return this.value+1}get cost(){return this.baseCost.dividedByEffectsOf(TimeStudy(233),PelleRifts.vacuum.milestones[1])}get baseCost(){return player.replicanti.galCost}set baseCost(e){player.replicanti.galCost=e}get distantRGStart(){return 100+Effects.sum(GlyphSacrifice.replication)}get remoteRGStart(){return 1e3+Effects.sum(GlyphSacrifice.replication)}get costIncrease(){const e=this.value;let i=EternityChallenge(6).isRunning?L.E2.pow(e).times(L.E2):L.E5.pow(e).times(L.E25);return e>=this.distantRGStart&&(i=i.times(L.E50.pow(e-this.distantRGStart+5))),e>=this.remoteRGStart&&(i=i.times(L.E5.pow(Math.pow(e-this.remoteRGStart+1,2)))),i}get autobuyerMilestone(){return EternityMilestone.autobuyerReplicantiMaxGalaxies}get extra(){return Effects.max(0,TimeStudy(131))+PelleRifts.decay.milestones[2].effectOrDefault(0)}autobuyerTick(){const e=bulkBuyBinarySearch(Currency.infinityPoints.value,{costFunction:i=>this.baseCostAfterCount(i).dividedByEffectOf(TimeStudy(233)),firstCost:this.cost,cumulative:!0},this.value);e&&(Currency.infinityPoints.subtract(e.purchasePrice),this.value+=e.quantity,this.baseCost=this.baseCostAfterCount(this.value))}baseCostAfterCount(e){const n=EternityChallenge(6).isRunning?2:25,r=EternityChallenge(6).isRunning?2:5,s=100+Effects.sum(GlyphSacrifice.replication),a=1e3+Effects.sum(GlyphSacrifice.replication);let o=170+e*n+e*(e-1)/2*r;if(e>s){const p=e-s;o+=50*p*(p+2*5-1)/2}if(e>a){const d=e-a;o+=5*d*(d+1)*(2*d+1)/6}return Decimal.pow10(o)}}},Nt={get areUnlocked(){return player.replicanti.unl},reset(t=!1){const e=t?!1:EternityMilestone.unlockReplicanti.isReached;player.replicanti={unl:e,amount:e?L.D1:L.D0,timer:0,chance:.01,chanceCost:L.E150,interval:1e3,intervalCost:L.E140,boughtGalaxyCap:0,galaxies:0,galCost:L.E170}},unlock(t=!1){const e=L.E140.dividedByEffectOf(PelleRifts.vacuum.milestones[1]);player.replicanti.unl||(t||Currency.infinityPoints.gte(e))&&(t||Currency.infinityPoints.subtract(e),player.replicanti.unl=!0,player.replicanti.timer=0,Nt.amount=L.D1)},get amount(){return player.replicanti.amount},set amount(t){player.replicanti.amount=t},get chance(){return N0.chance.value},galaxies:{isPlayerHoldingR:!1,get bought(){return player.replicanti.galaxies},get extra(){return Math.floor((Effects.sum(TimeStudy(225),TimeStudy(226))+Effarig.bonusRG)*TimeStudy(303).effectOrDefault(1))},get total(){return this.bought+this.extra},get max(){return N0.galaxies.value+N0.galaxies.extra},get canBuyMore(){return Nt.amount.gte(Decimal.NUMBER_MAX_VALUE)?this.bought<this.max:!1},get areBeingBought(){const t=Autobuyer.replicantiGalaxy;return t.canTick&&t.isEnabled||!player.options.confirmations.replicantiGalaxy&&this.isPlayerHoldingR},get gain(){if(!this.canBuyMore)return 0;if(Achievement(126).isUnlocked){const t=Nt.galaxies.max-player.replicanti.galaxies,e=Nt.amount.log10();return Math.min(t,Math.floor(e/LOG10_MAX_VALUE))}return 1}},get isUncapped(){return TimeStudy(192).isBought||PelleRifts.vacuum.milestones[1].canBeApplied}};let ya=class{get amount(){throw new NotImplementedError}set amount(e){throw new NotImplementedError}add(e){this.amount+=e}get currency(){throw new NotImplementedError}get cost(){return this.costBase.times(this.costIncrement.pow(this.amount))}get costBase(){throw new NotImplementedError}get costIncrement(){throw new NotImplementedError}get bulkPossible(){return Perk.ttFree.canBeApplied?Math.floor(this.currency.value.divide(this.cost).log10()/this.costIncrement.log10()+1):Decimal.affordGeometricSeries(this.currency.value,this.cost,this.costIncrement,0).toNumber()}bulkCost(e){return this.cost.times(this.costIncrement.pow(e-1))}purchase(e){if(!this.canAfford)return!1;let i=!1;const n=this.bulkPossible,r=s=>Perk.ttFree.canBeApplied?this.currency.gte(s):this.currency.purchase(s);return e&&r(this.bulkCost(n))&&(Currency.timeTheorems.add(n),this.add(n),i=!0),r(this.cost)&&(Currency.timeTheorems.add(1),this.add(1),i=!0),i&&(player.requirementChecks.reality.noPurchasedTT=!1),Z4.totalPurchased()>114&&PelleStrikes.ECs.trigger(),i}get canAfford(){return this.currency.gte(this.cost)&&!player.eternities.eq(0)}reset(){this.amount=0}};ya.am=new class extends ya{get amount(){return player.timestudy.amBought}set amount(t){player.timestudy.amBought=t}get currency(){return Currency.antimatter}get costBase(){return L.E20000}get costIncrement(){return L.E20000}};ya.ip=new class extends ya{get amount(){return player.timestudy.ipBought}set amount(t){player.timestudy.ipBought=t}get currency(){return Currency.infinityPoints}get costBase(){return L.D1}get costIncrement(){return L.E100}};ya.ep=new class extends ya{get amount(){return player.timestudy.epBought}set amount(t){player.timestudy.epBought=t}get currency(){return Currency.eternityPoints}get costBase(){return L.D1}get costIncrement(){return L.D2}bulkCost(t){return Perk.ttFree.canBeApplied?this.cost.times(this.costIncrement.pow(t-1)):this.costIncrement.pow(t+this.amount).subtract(this.cost)}};const Z4={checkForBuying(t){return PlayerProgress.realityUnlocked()||TimeDimension(1).bought?!0:(t||Modal.message.show(`You need to buy at least ${formatInt(1)} Time Dimension before you can purchase
      Time Theorems.`,{closeEvent:GAME_EVENT.REALITY_RESET_AFTER}),!1)},buyOne(t=!1,e){return!this.checkForBuying(t)||!ya[e].purchase(!1)?0:1},buyOneOfEach(){if(!this.checkForBuying(!0))return 0;const t=this.buyOne(!0,"am"),e=this.buyOne(!0,"ip"),i=this.buyOne(!0,"ep");return t+e+i},buyMax(t=!1){if(!this.checkForBuying(t))return 0;const e=ya.am.purchase(!0),i=ya.ip.purchase(!0),n=ya.ep.purchase(!0);return e+i+n},totalPurchased(){return ya.am.amount+ya.ip.amount+ya.ep.amount},calculateTimeStudiesCost(){let t=TimeStudy.boughtNormalTS().map(i=>i.cost).reduce(Number.sumReducer,0);const e=TimeStudy.eternityChallenge.current();return e!==void 0&&(t+=e.cost),Enslaved.isRunning&&player.celestials.enslaved.hasSecretStudy&&(t-=100),t}};class BE extends Gk{constructor(e){super(e),this.registerEvents(e.checkEvent,()=>this.tryUnlock())}get automatorPoints(){return this.config.automatorPoints?this.config.automatorPoints:0}get name(){return this.config.name}get shortDescription(){return this.config.shortDescription?this.config.shortDescription():""}get requirement(){return typeof this.config.requirement=="function"?this.config.requirement():this.config.requirement}get lockEvent(){return typeof this.config.lockEvent=="function"?this.config.lockEvent():this.config.lockEvent}get currency(){return Currency.realityMachines}get bitIndex(){return this.id}get bits(){return player.reality.upgradeBits}set bits(e){player.reality.upgradeBits=e}get hasPlayerLock(){return(player.reality.reqLock.reality&1<<this.bitIndex)!==0}set hasPlayerLock(e){e?player.reality.reqLock.reality|=1<<this.bitIndex:player.reality.reqLock.reality&=~(1<<this.bitIndex)}get isLockingMechanics(){var i,n;const e=((n=(i=this.config).bypassLock)==null?void 0:n.call(i))??!1;return this.hasPlayerLock&&this.isPossible&&!e&&!this.isAvailableForPurchase}setMechanicLock(e){this.hasPlayerLock=e}toggleMechanicLock(){this.hasPlayerLock=!this.hasPlayerLock}tryShowWarningModal(e){this.isPossible&&!this.isAvailableForPurchase&&Modal.upgradeLock.show({upgrade:this,isImaginary:!1,specialLockText:e})}get isAvailableForPurchase(){return(player.reality.upgReqs&1<<this.id)!==0}get isPossible(){return this.config.hasFailed?!this.config.hasFailed():!0}tryUnlock(){!(PlayerProgress.realityUnlocked()||TimeStudy.reality.isBought)||this.isAvailableForPurchase||!this.config.checkRequirement()||(player.reality.upgReqs|=1<<this.id,GameUI.notify.reality(`You've unlocked a Reality Upgrade: ${this.config.name}`),this.hasPlayerLock=!1)}onPurchased(){EventHub.dispatch(GAME_EVENT.REALITY_UPGRADE_BOUGHT);const e=this.id;(e===9||e===24)&&Glyphs.refreshActive(),e===10&&(applyRUPG10(),playerInfinityUpgradesOnReset(),EventHub.dispatch(GAME_EVENT.REALITY_UPGRADE_TEN_BOUGHT)),e===20&&player.blackHole[0].unlocked&&(player.blackHole[1].unlocked=!0),GameCache.staticGlyphWeights.invalidate()}}class SXe extends su{get currency(){return Currency.realityMachines}get boughtAmount(){return player.reality.rebuyables[this.id]}set boughtAmount(e){player.reality.rebuyables[this.id]=e}}BE.index=mapGameData(GameDatabase.reality.upgrades,t=>t.id<6?new SXe(t):new BE(t));const kXe=t=>BE.index[t],AXe={all:BE.index.compact(),get allBought(){return(player.reality.upgradeBits>>6)+1===1<<GameDatabase.reality.upgrades.length-5}};class FE extends Gk{constructor(e){super(e),this.registerEvents(e.checkEvent,()=>this.tryUnlock())}get name(){return this.config.name}get requirement(){return typeof this.config.requirement=="function"?this.config.requirement():this.config.requirement}get lockEvent(){return typeof this.config.lockEvent=="function"?this.config.lockEvent():this.config.lockEvent}get currency(){return Currency.imaginaryMachines}get bitIndex(){return this.id}get bits(){return player.reality.imaginaryUpgradeBits}set bits(e){player.reality.imaginaryUpgradeBits=e}get hasPlayerLock(){return(player.reality.reqLock.imaginary&1<<this.bitIndex)!==0}set hasPlayerLock(e){e?player.reality.reqLock.imaginary|=1<<this.bitIndex:player.reality.reqLock.imaginary&=~(1<<this.bitIndex)}get isLockingMechanics(){return this.hasPlayerLock&&this.isPossible&&!this.isAvailableForPurchase}setMechanicLock(e){this.hasPlayerLock=e}toggleMechanicLock(){this.hasPlayerLock=!this.hasPlayerLock}tryShowWarningModal(e){this.isPossible&&!this.isAvailableForPurchase&&Modal.upgradeLock.show({upgrade:this,isImaginary:!0,specialLockText:e})}get isAvailableForPurchase(){return(player.reality.imaginaryUpgReqs&1<<this.id)!==0}get isPossible(){return this.config.hasFailed?!this.config.hasFailed():!0}get canBeApplied(){return super.canBeApplied&&!this.pelleDisabled}get pelleDisabled(){return Pelle.isDoomed&&this.config.isDisabledInDoomed}tryUnlock(){!MachineHandler.isIMUnlocked||this.isAvailableForPurchase||!this.config.checkRequirement()||(player.reality.imaginaryUpgReqs|=1<<this.id,GameUI.notify.reality(`You've unlocked an Imaginary Upgrade: ${this.config.name}`),this.hasPlayerLock=!1)}onPurchased(){if(EventHub.dispatch(GAME_EVENT.REALITY_UPGRADE_BOUGHT),this.id>=15&&this.id<=18&&(DarkMatterDimension(this.id-14).amount=L.D1,this.id===17&&Laitela.quotes.thirdDMD.show()),this.id>=15&&this.id<=19&&(TabNotification.laitelaUnlock.clearTrigger(),TabNotification.laitelaUnlock.tryTrigger()),this.id===21&&Laitela.quotes.finalRowIM.show(),this.id===22)for(const e of Object.keys(player.reality.glyphs.sac))player.reality.glyphs.sac[e]=Q4(22).effectValue;this.id===25&&TabNotification.pelleUnlock.tryTrigger()}}class RXe extends su{get currency(){return Currency.imaginaryMachines}get boughtAmount(){return player.reality.imaginaryRebuyables[this.id]}get canBeApplied(){return super.canBeApplied&&!this.pelleDisabled}get pelleDisabled(){return Pelle.isDoomed}set boughtAmount(e){player.reality.imaginaryRebuyables[this.id]=e}onPurchased(){this.id===7&&GameCache.staticGlyphWeights.invalidate()}}FE.index=mapGameData(GameDatabase.reality.imaginaryUpgrades,t=>t.id<=10?new RXe(t):new FE(t));const Q4=t=>FE.index[t],IXe={all:FE.index.compact(),get totalRebuyables(){const t=player.reality.imaginaryRebuyables;let e=0;for(const i in t)e+=t[i];return e},get totalSinglePurchase(){return this.all.countWhere(t=>t.isBought)},get allBought(){return(player.reality.imaginaryUpgradeBits>>6)+1===1<<GameDatabase.reality.imaginaryUpgrades.length-5}};class DXe extends Gf{constructor(e){super(e),this.connectedPerks=[]}get automatorPoints(){return this.config.automatorPoints?this.config.automatorPoints:0}get label(){return this.config.label}get shortDescription(){return this.config.shortDescription?this.config.shortDescription():""}get currency(){return Currency.perkPoints}get set(){return player.reality.perks}get cost(){return 1}get isAvailableForPurchase(){return this.id===0||this.connectedPerks.some(e=>e.isBought)}get canBeApplied(){return this.isBought&&!(Pelle.isDoomed&&Pelle.uselessPerks.includes(this.id))}initializeConnections(){this.connectedPerks=GameDatabase.reality.perkConnections[this.id].map(e=>Bm.find(e))}onPurchased(){if(this.config.bumpCurrency!==void 0&&this.config.bumpCurrency(),this.label==="EU1"&&Currency.eternities.gt(0)&&applyEU1(),this.label==="ACHNR"){Achievements.preReality.some(e=>!e.isUnlocked)&&(player.reality.gainedAutoAchievements=!0);for(const e of Achievements.preReality)e.unlock(!0)}GameCache.achievementPeriod.invalidate(),GameCache.buyablePerks.invalidate(),EventHub.dispatch(GAME_EVENT.PERK_BOUGHT)}}const J4=mapGameDataToObject(GameDatabase.reality.perks,t=>new DXe(t)),Bm={all:J4.all,find(t){return Bm.all.find(e=>e.id===t)}};for(const t of Bm.all)t.initializeConnections();function xXe(){player.reality.perks.every(t=>Bm.find(t)!==void 0)||(dev.respecPerks(),Currency.perkPoints.gte(Bm.all.length)?(dev.buyAllPerks(),Modal.message.show("Some of your Perks were invalid, but you auto-bought all valid perks.")):Modal.message.show("Some of your Perks were invalid, so your Perks have been reset and your Perk Points refunded."))}function eH(){vl.display("a-dilate",2),setTimeout(()=>{JR(),Pelle.isDoomed&&PelleStrikes.dilation.trigger()},1e3)}function tH(t){vl.display("a-undilate",2),setTimeout(()=>{eternity(!1,!1,{switchingDilation:!0}),t&&t()},1e3)}function MXe(){if(!PlayerProgress.dilationUnlocked()||Pelle.isDoomed&&!Pelle.canDilateInPelle)return;const t=player.options.animations.dilation&&!vl.isDisplaying;player.dilation.active?player.options.confirmations.dilation?Modal.exitDilation.show():t?tH():eternity(!1,!1,{switchingDilation:!0}):player.options.confirmations.dilation?Modal.enterDilation.show():t?eH():JR()}function JR(t){return!PlayerProgress.dilationUnlocked()||GameEnd.creditsEverClosed?!1:player.dilation.active?(eternity(!1,t,{switchingDilation:!0}),!1):(Achievement(136).unlock(),eternity(!1,t,{switchingDilation:!0}),player.dilation.active=!0,Pelle.isDoomed&&PelleStrikes.dilation.trigger(),!0)}const PXe=[null,"dtGain","galaxyThreshold","tachyonGain","doubleGalaxies","tdMultReplicanti","ndMultDT","ipMultDT","timeStudySplit","dilationPenalty","ttGenerator","dtGainPelle","galaxyMultiplier","tickspeedPower","galaxyThresholdPelle","flatDilationMult"];function iH(t,e=1){if(GameEnd.creditsEverClosed)return!1;const i=Xs[PXe[t]];if(t>3&&t<11){if(player.dilation.upgrades.has(t)||!Currency.dilatedTime.purchase(i.cost))return!1;player.dilation.upgrades.add(t),t===4&&(player.dilation.totalTachyonGalaxies*=2)}else{const n=player.dilation.rebuyables[t];if(Currency.dilatedTime.lt(i.cost)||n>=i.config.purchaseCap)return!1;let r=Decimal.affordGeometricSeries(Currency.dilatedTime.value,i.config.initialCost,i.config.increment,n).toNumber();r=Math.clampMax(r,e),r=Math.clampMax(r,i.config.purchaseCap-n);const s=Decimal.sumGeometricSeries(r,i.config.initialCost,i.config.increment,n);if(Currency.dilatedTime.subtract(s),player.dilation.rebuyables[t]+=r,t===2&&((!Perk.bypassTGReset.isBought||Pelle.isDoomed)&&Currency.dilatedTime.reset(),player.dilation.nextThreshold=L.E3,player.dilation.baseTachyonGalaxies=0,player.dilation.totalTachyonGalaxies=0),t===3&&!Pelle.isDisabled("tpMults")){let a=Effects.max(1,Perk.retroactiveTP1,Perk.retroactiveTP2,Perk.retroactiveTP3,Perk.retroactiveTP4);Enslaved.isRunning&&(a=Math.pow(a,Enslaved.tachyonNerf)),Currency.tachyonParticles.multiply(Decimal.pow(a,r))}}return!0}function OXe(t){const i=3.65*(t===void 0?Xs.galaxyThreshold.effectValue:t)+.35,n=getAdjustedGlyphEffect("dilationgalaxyThreshold"),r=n===0?1:n,s=Xs.galaxyThresholdPelle.canBeApplied?Xs.galaxyThresholdPelle.effectValue:1;return(1+i*r)**s}function nH(){if(Pelle.isDoomed){const e=Currency.tachyonParticles.value.pow(PelleRifts.paradox.milestones[1].effectOrDefault(1));return new Decimal(e).timesEffectsOf(Xs.dtGain,Xs.dtGainPelle,Xs.flatDilationMult).times(ShopPurchase.dilatedTimePurchases.currentMult**.5).times(Pelle.specialGlyphEffect.dilation).div(1e5)}let t=new Decimal(Currency.tachyonParticles.value).timesEffectsOf(Xs.dtGain,Achievement(132),Achievement(137),RealityUpgrade(1),AlchemyResource.dilation,Ra.unlocks.continuousTTBoost.effects.dilatedTime,Ra.unlocks.peakGamespeedDT);return t=t.times(getAdjustedGlyphEffect("dilationDT")),t=t.times(ShopPurchase.dilatedTimePurchases.currentMult),t=t.times(Math.clampMin(Decimal.log10(Replicanti.amount)*getAdjustedGlyphEffect("replicationdtgain"),1)),Enslaved.isRunning&&!t.eq(0)&&(t=Decimal.pow10(Math.pow(t.plus(1).log10(),.85)-1)),V.isRunning&&(t=t.pow(.5)),t}function eI(){if(Pelle.isDisabled("tpMults"))return new Decimal(1);const t=Enslaved.isRunning?Enslaved.tachyonNerf:1;return L.D1.timesEffectsOf(Xs.tachyonGain,GlyphSacrifice.dilation,Achievement(132),RealityUpgrade(4),RealityUpgrade(8),RealityUpgrade(15)).pow(t)}function NXe(){Currency.tachyonParticles.bumpTo(tI(player.records.thisEternity.maxAM,!0)),player.dilation.lastEP=Currency.eternityPoints.value}function rH(t,e){if(!Player.canEternity&&e)return L.D0;const i=isInCelestialReality()||Pelle.isDoomed?t:Ra.unlocks.unlockDilationStartingTP.effectOrDefault(t);let n=Decimal.pow(Decimal.log10(i)/400,1.5);return Enslaved.isRunning&&(n=n.pow(Enslaved.tachyonNerf)),n}function tI(t,e){return rH(t,e).times(eI())}function GXe(t){return tI(Currency.antimatter.value,t).minus(Currency.tachyonParticles.value).clampMin(0)}function UXe(){let t=Currency.tachyonParticles.value.dividedBy(eI());return Enslaved.isRunning&&(t=t.pow(1/Enslaved.tachyonNerf)),Decimal.pow10(t.times(Math.pow(400,1.5)).pow(2/3).toNumber())}function LXe(t){const e=nH(),i=e.times(getGameSpeedupForDisplay()),n=Currency.dilatedTime.value;if(e.eq(0))return null;if(PelleRifts.paradox.isActive){const r=Pelle.riftDrainPercent,s=i.minus(Decimal.multiply(t,r)),a=i.minus(n.times(r));return s.lt(0)?"Never affordable due to Rift drain":TimeSpan.fromSeconds(a.div(s).ln()/r).toTimeEstimate()}return TimeSpan.fromSeconds(Decimal.sub(t,n).div(i).toNumber()).toTimeEstimate()}function BXe(t){const e=t.log10(),i=.75*Effects.product(Xs.dilationPenalty);return Decimal.pow10(Math.sign(e)*Math.pow(Math.abs(e),i))}class FXe extends Gf{get currency(){return Currency.dilatedTime}get set(){return player.dilation.upgrades}onPurchased(){this.id===4&&(player.dilation.totalTachyonGalaxies*=2),this.id===10&&Ib.upgradeTTgen.tryComplete()}}class $Xe extends su{get currency(){return Currency.dilatedTime}get boughtAmount(){return player.dilation.rebuyables[this.id]}set boughtAmount(e){player.dilation.rebuyables[this.id]=e}get isCapped(){return this.config.reachedCap()}purchase(e){iH(this.config.id,e)}}const Xs=mapGameDataToObject(GameDatabase.eternity.dilation,t=>t.rebuyable?new $Xe(t):new FXe(t)),HXe={rebuyable:[Xs.dtGain,Xs.galaxyThreshold,Xs.tachyonGain],fromId:t=>Xs.all.find(e=>e.id===Number(t))};class fC{constructor(e){const{getAmount:i,setAmount:n,calculateValue:r,initialCost:s,costMult:a}=e;this.incrementAmount=()=>n(i()+1),this._lazyValue=new Lazy(()=>r(i())),this._lazyCost=new Lazy(()=>getHybridCostScaling(i(),1e30,s,a,.2,L.E310,1e5,10)),this.id=e.id,this.hasAutobuyer=e.hasAutobuyer,this.onPurchase=e.onPurchase}get value(){return this._lazyValue.value}get cost(){return this._lazyCost.value}get isAffordable(){return Currency.realityMachines.gte(this.cost)}purchase(){if(!this.isAffordable||this.value===0)return;const e=ns(this.id),i=e.isCharged?1-e.stateProgress:e.stateProgress;Currency.realityMachines.purchase(this.cost),this.incrementAmount(),this._lazyValue.invalidate(),this._lazyCost.invalidate(),this.onPurchase&&this.onPurchase();const n=e.isCharged?e.duration:e.interval;e.updatePhase(n*i-e.phase),e.isPermanent&&(player.blackHole[this.id-1].active=!0),EventHub.dispatch(GAME_EVENT.BLACK_HOLE_UPGRADE_BOUGHT)}}class $E{constructor(e){this.id=e+1;const i=[1,1e3];this.intervalUpgrade=new fC({id:this.id,getAmount:()=>this._data.intervalUpgrades,setAmount:n=>this._data.intervalUpgrades=n,calculateValue:n=>3600/Math.pow(10,e)*Math.pow(.8,n),initialCost:15*i[e],costMult:3.5,hasAutobuyer:!1,onPurchase:()=>{this.isCharged||(this._data.phase=Math.clampMax(this.interval,this._data.phase))}}),this.powerUpgrade=new fC({id:this.id,getAmount:()=>this._data.powerUpgrades,setAmount:n=>this._data.powerUpgrades=n,calculateValue:n=>180/Math.pow(2,e)*Math.pow(1.35,n),initialCost:20*i[e],costMult:2,hasAutobuyer:!0}),this.durationUpgrade=new fC({id:this.id,getAmount:()=>this._data.durationUpgrades,setAmount:n=>this._data.durationUpgrades=n,calculateValue:n=>(10-e*3)*Math.pow(1.3,n),initialCost:10*i[e],costMult:4,hasAutobuyer:!1})}get _data(){return player.blackHole[this.id-1]}get rawInterval(){return this.intervalUpgrade.value*Achievement(145).effectOrDefault(1)}get interval(){return this.isPermanent?0:this.rawInterval}get power(){return this.powerUpgrade.value*Achievement(158).effectOrDefault(1)}get duration(){return this.durationUpgrade.value*Achievement(155).effectOrDefault(1)}get isUnlocked(){return this._data.unlocked&&!Enslaved.isRunning&&!Pelle.isDisabled("blackhole")}get isCharged(){return this._data.active}get timeWithPreviousActiveToNextStateChange(){return this.isCharged?this.duration-this.phase:this.interval-this.phase}get timeToNextStateChange(){const e=this.timeWithPreviousActiveToNextStateChange;return this.id===1?e:this.isCharged?ns(1).isCharged?Math.min(e,ns(1).timeToNextStateChange):ns(1).timeToNextStateChange:ns(1).timeUntilTimeActive(e)}timeUntilTimeActive(e){let i=e;if(this.isCharged){if(i<this.timeToNextStateChange)return i;i-=this.timeToNextStateChange}let n=this.isCharged?this.timeToNextStateChange+this.interval:this.timeToNextStateChange;return n+=Math.floor(i/this.duration)*this.cycleLength,n+=i%this.duration,n}get stateProgress(){return this.isCharged?1-this.phase/this.duration:this.phase/this.interval}get displayState(){if(Pelle.isDisabled("blackhole"))return'<i class="fas fa-ban"></i> Disabled';if(Enslaved.isAutoReleasing)return Enslaved.autoReleaseTick<3?'<i class="fas fa-compress-arrows-alt u-fa-padding"></i> Pulsing':'<i class="fas fa-expand-arrows-alt u-fa-padding"></i> Pulsing';if(Enslaved.isStoringGameTime)return'<i class="fas fa-compress-arrows-alt"></i> Charging';if(Vs.areNegative)return'<i class="fas fa-caret-left"></i> Inverted';if(Vs.arePaused)return'<i class="fas fa-pause"></i> Paused';if(this.isPermanent)return'<i class="fas fa-infinity"></i> Permanent';const e=TimeSpan.fromSeconds(this.timeToNextStateChange).toStringShort(!0);return this.isActive?`<i class="fas fa-play"></i> Active (${e})`:`<i class="fas fa-redo"></i> Inactive (${e})`}get isActive(){return this.isCharged&&(this.id===1||ns(this.id-1).isActive)&&!Pelle.isDisabled("blackhole")}get dutyCycle(){return this.duration/(this.rawInterval+this.duration)}get isPermanent(){return this.dutyCycle>=.9999}get phase(){return this._data.phase}get cycleLength(){return this.interval+this.duration}updatePhase(e){this.isPermanent||(this._data.phase+=e,this.phase>=this.cycleLength&&(this._data.activations+=Math.floor(this.phase/this.cycleLength),this._data.phase%=this.cycleLength),this.isCharged?this.phase>=this.duration&&(this._data.phase-=this.duration,this._data.active=!1,GameUI.notify.showBlackHoles&&GameUI.notify.blackHole(`${this.description(!0)} duration ended.`)):this.phase>=this.interval&&(this._data.phase-=this.interval,this._data.activations++,this._data.active=!0,GameUI.notify.showBlackHoles&&GameUI.notify.blackHole(`${this.description(!0)} has activated!`)))}realTimeWhileActive(e){const i=this.timeUntilNextDeactivation,n=this.interval,r=this.duration,s=this.cycleLength,a=Math.min(i,r),o=Math.floor((e-i)/s),c=r*o,d=(e-i+s)%s,p=Math.max(d-n,0);return a+c+p}get timeUntilNextDeactivation(){return this.isCharged?this.duration-this.phase:this.cycleLength-this.phase}description(e){return RealityUpgrade(20).isBought?`Black Hole ${this.id}`:e?"The Black Hole":"the Black Hole"}}$E.list=Array.range(0,2).map(t=>new $E(t));function ns(t){return $E.list[t-1]}const Vs={ACCELERATION_TIME:5,get list(){return $E.list},get canBeUnlocked(){return Currency.realityMachines.gte(100)&&!this.areUnlocked},get areUnlocked(){return ns(1).isUnlocked},unlock(){this.canBeUnlocked&&(player.blackHole[0].unlocked=!0,Currency.realityMachines.purchase(100),player.records.timePlayedAtBHUnlock=player.records.totalTimePlayed,EventHub.dispatch(GAME_EVENT.BLACK_HOLE_UNLOCKED))},togglePause:(t=!1)=>{if(!Vs.areUnlocked)return;const e=player.requirementChecks.reality.slowestBH<=1e-300;if(ImaginaryUpgrade(24).isLockingMechanics&&Ra.isRunning&&e){t||ImaginaryUpgrade(24).tryShowWarningModal("uninvert your Black Hole");return}player.blackHolePause&&(player.requirementChecks.reality.slowestBH=1),player.blackHolePause=!player.blackHolePause,player.blackHolePauseTime=player.records.realTimePlayed;const i=RealityUpgrade(20).isBought?"Black Holes":"Black Hole",n=player.blackHolePause?Vs.areNegative?"inverted":"paused":"unpaused",r=t?"automatically ":"";GameUI.notify.blackHole(`${i} ${r}${n}`)},get unpauseAccelerationFactor(){return this.arePermanent?1:Math.clamp((player.records.realTimePlayed-player.blackHolePauseTime)/(1e3*this.ACCELERATION_TIME),0,1)},get arePaused(){return player.blackHolePause},get areNegative(){return this.arePaused&&!Enslaved.isRunning&&!Laitela.isRunning&&player.blackHoleNegative<1},get arePermanent(){return Vs.list.every(t=>t.isPermanent)},updatePhases(t){if(!this.areUnlocked||this.arePaused)return;const e=t/1e3,[i,n]=this.autoPauseData(e),r=this.realTimePeriodsWithBlackHoleActive(n,!0);for(const s of this.list){if(!s.isUnlocked)break;s.updatePhase(r[s.id-1])}i&&Vs.togglePause(!0)},calculateOfflineTick(t,e,i){const n=this.calculateSpeedups(),r=this.calculateGameTimeFromRealTime(t,n);if(e===1)return[t,r/t];const s=this.binarySearch(0,t,o=>this.calculateGameTimeFromRealTime(o,n)*e/r,1,i),a=this.calculateGameTimeFromRealTime(s,n)/s;return[s,a]},binarySearch(t,e,i,n,r){let s;for(let a=0;a<100;++a){s=(t+e)/2;const o=i(s)-n;if(Math.abs(o)<r)break;o<0?t=s:e=s}return s},calculateSpeedups(){const t=[GAME_SPEED_EFFECT.FIXED_SPEED,GAME_SPEED_EFFECT.TIME_GLYPH,GAME_SPEED_EFFECT.SINGULARITY_MILESTONE,GAME_SPEED_EFFECT.NERFS],e=getGameSpeedupFactor(t),i=[e];t.push(GAME_SPEED_EFFECT.BLACK_HOLE);for(const n of this.list){if(!n.isUnlocked)break;i.push(getGameSpeedupFactor(t,n.id)/e)}return i},calculateGameTimeFromRealTime(t,e){const[i,n]=this.autoPauseData(t),r=this.realTimePeriodsWithBlackHoleEffective(n,e);return r[0]+=t-n,r.map((s,a)=>s*e[a]).sum()},realTimePeriodsWithBlackHoleEffective(t){const e=this.realTimePeriodsWithBlackHoleActive(t),i=[];for(let n=0;n<e.length-1;n++)i.push(e[n]-e[n+1]);return i.push(e.last()),i},realTimePeriodsWithBlackHoleActive(t){const e=[t];for(const i of this.list){if(!i.isUnlocked)break;const n=i.realTimeWhileActive(e.last());e.push(n)}return e},timeToNextPause(t,e=100){if(t===1){const d=ns(1);if(d.interval<=Vs.ACCELERATION_TIME)return null;const p=(d.isCharged?d.duration:0)+d.interval-d.phase;return p<Vs.ACCELERATION_TIME?p+d.duration+d.interval-Vs.ACCELERATION_TIME:p-Vs.ACCELERATION_TIME}const i=[ns(1).isCharged,ns(2).isCharged],n=[ns(1).phase,ns(2).phase],r=[ns(1).duration,ns(2).duration],s=[ns(1).interval,ns(2).interval];if(s[0]<=Vs.ACCELERATION_TIME&&s[1]<=Vs.ACCELERATION_TIME)return null;const a=[[s[0]],[r[0],s[1]],[r[0],r[1]]];let o=0,c=0;for(let d=0;d<e;d++){const p=i[0]?i[1]?2:1:0,m=a[p],y=p>0?Math.min(m[0]-n[0],m[1]-n[1]):m[0]-n[0];if(p===2){if(o>=Vs.ACCELERATION_TIME)return c-Vs.ACCELERATION_TIME;o=0}else o+=y;c+=y,p>0&&(n[1]+=y,n[1]>=m[1]&&(i[1]=!i[1],n[1]-=m[1])),n[0]+=y,n[0]>=m[0]&&(i[0]=!i[0],n[0]-=m[0])}return null},autoPauseData(t){if(this.arePaused)return[!1,0];if(player.blackHoleAutoPauseMode===BLACK_HOLE_PAUSE_MODE.NO_PAUSE)return[!1,t];const e=this.timeToNextPause(player.blackHoleAutoPauseMode);return e===null||e<1e-9||e>t?[!1,t]:[!0,e]}},VXe={get baseRMCap(){return L.E1000},get hardcapRM(){return this.baseRMCap.times(ImaginaryUpgrade(6).effectOrDefault(1))},get distanceToRMCap(){return this.hardcapRM.minus(Currency.realityMachines.value)},get realityMachineMultiplier(){return ShopPurchase.RMPurchases.currentMult*Teresa.rmMultiplier*Effects.max(1,PerkShopUpgrade.rmMult)*getAdjustedGlyphEffect("effarigrm")*Achievement(167).effectOrDefault(1)},get uncappedRM(){let t=player.records.thisReality.maxEP.plus(gainedEternityPoints()).log10();PlayerProgress.realityUnlocked()||(t>8e3&&(t=8e3),t>6e3&&(t-=(t-6e3)*.75));let e=L.E3.pow(t/4e3-1);return e.gte(1)&&e.lt(10)&&(e=new Decimal(27/4e3*t-26)),e=e.times(this.realityMachineMultiplier),e.floor()},get gainedRealityMachines(){return this.uncappedRM.clampMax(this.hardcapRM)},get isIMUnlocked(){return Currency.realityMachines.value.gte(this.hardcapRM)||Currency.imaginaryMachines.gt(0)},get baseIMCap(){return Math.pow(Math.clampMin(this.uncappedRM.log10()-1e3,0),2)*Math.pow(Math.clampMin(this.uncappedRM.log10()-1e5,1),.2)},get currentIMCap(){return player.reality.iMCap*ImaginaryUpgrade(13).effectOrDefault(1)},get projectedIMCap(){return this.baseIMCap*ImaginaryUpgrade(13).effectOrDefault(1)},updateIMCap(){this.uncappedRM.gte(this.baseRMCap)&&this.baseIMCap>player.reality.iMCap&&(player.records.bestReality.iMCapSet=Glyphs.copyForRecords(Glyphs.active.filter(t=>t!==null)),player.reality.iMCap=this.baseIMCap)},get scaleTimeForIM(){return 60/ImaginaryUpgrade(20).effectOrDefault(1)},gainedImaginaryMachines(t){return(this.currentIMCap-Currency.imaginaryMachines.value)*(1-Math.pow(2,-t/1e3/this.scaleTimeForIM))},estimateIMTimer(t){const e=this.currentIMCap;if(e<=t)return 1/0;const i=Currency.imaginaryMachines.value;return Math.max(0,Math.log2(e/(e-t))-Math.log2(e/(e-i)))*this.scaleTimeForIM}},jt={};jt.hardReset=function(){GameStorage.hardReset()};jt.giveAllAchievements=function(){const t=Achievements.all.concat(SecretAchievements.all);for(const e of t)e.unlock()};jt.multiplyEverythingBy=function(t){t=new Decimal(t),Object.keys(player).forEach(e=>{typeof player[e]=="number"&&(player[e]*=t.toNumber()),player[e]instanceof Decimal&&Decimal.isFinite(player[e])&&(player[e]=player[e].times(t)),typeof player[e]=="object"&&!Decimal.isFinite(player[e])&&Object.keys(player[e]).forEach(i=>{typeof player[e][i]=="number"&&!Decimal.isFinite(player[e][i])&&(player[e][i]*=t.toNumber()),player[e][i]instanceof Decimal&&(player[e][i]=player[e][i].times(t))})})};jt.doubleEverything=function(){jt.multiplyEverythingBy(2)};jt.tripleEverything=function(){jt.multiplyEverythingBy(3)};jt.barrelRoll=function(){vl.display("a-barrel-roll",5)};jt.spin3d=function(){document.body.style.animation===""?document.body.style.animation="a-spin3d 3s infinite":document.body.style.animation=""};jt.spin4d=function(){document.body.style.animation===""?document.body.style.animation="a-spin4d 3s infinite":document.body.style.animation=""};jt.cancerize=function(){Theme.tryUnlock("Design"),Notation.emoji.setAsCurrent()};jt.fixSave=function(){const e=JSON.stringify(player,GameSaveSerializer.jsonConverter).replace(/NaN/gui,"10"),i=JSON.parse(e);if(!i||GameStorage.checkPlayerObject(i)!==""){Modal.message.show("Could not fix the save.");return}GameStorage.loadPlayerObject(i),GameStorage.save()};jt.updateTDCosts=function(){for(let t=1;t<9;t++){const e=TimeDimension(t);e.cost=e.nextCost(e.bought)}};jt.refundTimeDims=function(){for(const t of TimeDimensions.all)t.bought=0;jt.updateTDCosts()};jt.refundEPMult=function(){player.epmultUpgrades=0};jt.refundDilStudies=function(){for(const t of GameDatabase.eternity.timeStudies.dilation)player.dilation.studies.includes(t.id)&&(player.dilation.studies.splice(player.dilation.studies.indexOf(t.id),1),console.log(document.getElementById(`removed dilstudy${t.id}`)),Currency.timeTheorems.add(t.cost))};jt.resetDilation=function(){player.dilation.dilatedTime=L.D0,player.dilation.tachyonParticles=L.D0,player.dilation.rebuyables[1]=0,player.dilation.rebuyables[2]=0,player.dilation.rebuyables[3]=0,player.dilation.baseTachyonGalaxies=0,player.dilation.totalTachyonGalaxies=0};jt.giveSpecialGlyph=function(t,e,i,n=i){if(GameCache.glyphInventorySpace.value===0)return;const r=GlyphGenerator.randomGlyph({actualLevel:i,rawLevel:n});r.symbol=e,r.color=t,Glyphs.addToInventory(r)};jt.giveGlyph=function(t,e=t){GameCache.glyphInventorySpace.value!==0&&Glyphs.addToInventory(GlyphGenerator.randomGlyph({actualLevel:t,rawLevel:e}))};jt.giveRealityGlyph=function(t){GameCache.glyphInventorySpace.value!==0&&Glyphs.addToInventory(GlyphGenerator.realityGlyph(t))};jt.setCompanionGlyphEP=function(t){const e=player.reality.glyphs.active.concat(player.reality.glyphs.inventory).filter(i=>i.type==="companion")[0];e.strength=rarityToStrength(t.log10()/1e6)};jt.decriminalize=function(){SecretAchievement(23).lock(),EventHub.dispatch(GAME_EVENT.ACHIEVEMENT_UNLOCKED)};jt.removeAch=function(t){if(t==="all"){const e=Achievements.all.concat(SecretAchievements.all);for(const i of e)i.lock();return"removed all achievements"}return typeof t=="number"?Achievement(t).lock():t.startsWith("r")?Achievement(parseInt(t.slice(1),10)).lock():t.startsWith("s")?SecretAchievement(parseInt(t.slice(1),10)).lock():"failed to delete achievement"};window.nextNewsMessageId=void 0;jt.setNextNewsMessage=function(t){nextNewsMessageId=t};jt.implode=function(){bigCrunchAnimation()};jt.eternify=function(){eternityAnimation()};jt.dilate=function(){animateAndDilate()};jt.undilate=function(){animateAndUndilate()};jt.realize=function(){runRealityAnimation()};jt.respecPerks=function(){player.reality.perkPoints+=player.reality.perks.size,player.reality.perks=new Set,GameCache.achievementPeriod.invalidate(),GameCache.buyablePerks.invalidate()};function qXe(){return window.location.href.split("//")[1].length>20||sH()}function sH(){const t=window.location.href;return t.includes("file")||t.includes("127.0.0.1")||t.includes("localhost")}jt.togglePerformanceStats=function(){PerformanceStats.toggle()};jt.buyAllPerks=function(){const t=[],e=[Perk.firstPerk];for(;e.length>0&&!(player.reality.perkPoints<1);){const i=e.shift();t.push(i),e.push(...i.connectedPerks.filter(n=>!t.includes(n))),i.purchase()}};jt.printResourceTotals=function(){console.log(`Antimatter: e${Currency.antimatter.exponent.toPrecision(3)}`),console.log(`RM: e${Math.round(MachineHandler.gainedRealityMachines.log10())}`),console.log(`Glyph level: ${100*Math.floor(gainedGlyphLevel().actualLevel/100+.5)}`),console.log(`Tickspeed: e${-Tickspeed.current.exponent.toPrecision(3)}`),console.log(`Gamespeed: ${Math.pow(getGameSpeedupFactor(),1.2).toPrecision(1)}`);const t=100*Math.floor(player.galaxies/100+.5),e=100*Math.floor(Replicanti.galaxies.total/100+.5),i=100*Math.floor(player.dilation.totalTachyonGalaxies/100+.5);console.log(`Galaxies: ${t}+${e}+${i} (${t+e+i})`),console.log(`Tick reduction: e${-Math.round(getTickSpeedMultiplier().log10())}`);let n=L.D1;for(let a=1;a<=8;a++)n=n.times(AntimatterDimension(a).multiplier);console.log(`AD mults: e${n.log10().toPrecision(3)}`);let r=L.D1;for(let a=1;a<=8;a++)r=r.times(InfinityDimension(a).multiplier);console.log(`ID mults: e${r.log10().toPrecision(3)}`);let s=L.D1;for(let a=1;a<=8;a++)s=s.times(TimeDimension(a).multiplier);console.log(`TD mults: e${s.log10().toPrecision(3)}`),console.log(`Tickspeed from TD: ${formatWithCommas(1e3*Math.floor(player.totalTickGained/1e3+.5))}`),console.log(`Infinities: e${Math.round(player.infinities.log10())}`),console.log(`Eternities: e${Math.round(player.eternities.log10())}`),console.log(`Replicanti: e${formatWithCommas(1e5*Math.floor(Replicanti.amount.log10()/1e5+.5))}`),console.log(`TT: e${Math.round(player.timestudy.theorem.log10())}`),console.log(`DT: e${Math.round(player.dilation.dilatedTime.log10())}`),console.log(`TP: e${Math.round(player.dilation.tachyonParticles.log10())}`)};jt.unlockCelestialQuotes=function(t){Quotes[t].all.forEach(e=>e.show())};jt.presentCelestialQuotes=function(t){Quotes[t].all.forEach(e=>e.present())};jt.testReplicantiCode=function(t,e=!1){const i=[[function(){player.infinities=L.E12,player.celestials.effarig.unlockBits=64}],[function(){player.replicanti.interval=1}],[function(){player.timestudy.studies.push(33)}],[function(){player.timestudy.studies.push(62)}],[function(){player.timestudy.studies.push(131)},function(){player.timestudy.studies.push(132)},function(){player.timestudy.studies.push(133)},function(){player.timestudy.studies.push(131,132,133)}],[function(){player.timestudy.studies.push(192)}],[function(){player.timestudy.studies.push(213)}],[function(){player.timestudy.studies.push(225)}],[function(){player.timestudy.studies.push(226)}],[function(){player.achievementBits[8]|=16}],[function(){player.achievementBits[12]|=8}],[function(){player.achievementBits[12]|=128}],[function(){player.reality.perks=new Set([32])}],[function(){Autobuyer.replicantiGalaxy.isActive=!0}],[function(){Replicanti.galaxies.isPlayerHoldingR=!0}],[function(){player.replicanti.boughtGalaxyCap=100},function(){player.replicanti.boughtGalaxyCap=100,player.replicanti.galaxies=50}],[function(){player.reality.upgReqs=64,player.reality.upgradeBits=64}]],n=i.map(o=>o.length+1).reduce((o,c)=>o*c),r=[],s=function(o){Replicanti.galaxies.isPlayerHoldingR=!1,GameStorage.loadPlayerObject(Player.defaultStart),player.infinities=L.D1,player.infinityPoints=L.E150,Replicanti.unlock(),player.replicanti.chance=1;for(let d=0;d<i.length;d++){const p=i.slice(0,d).map(y=>y.length+1).reduce((y,_)=>y*_,1),m=[()=>{}].concat(i[d])[Math.floor(o/p)%(i[d].length+1)];m()}function c(){for(let d=0;d<=5;d++)replicantiLoop(Math.pow(10,d)),r.push(Notation.scientific.formatDecimal(Replicanti.amount,5,5)),r.push(player.replicanti.galaxies),r.push(Replicanti.galaxies.total)}c(),player.antimatter=L.E309,player.records.thisInfinity.maxAM=L.E309,bigCrunchReset(),c()};if(t===void 0){if(4e3*10007<n)throw new Error("Prime p is not large enough to go through all situations.");for(let d=0;d<4e3;d++){const p=d*10007%n;d%100===0&&console.log(`Considering situation #${d}/4000 (${p})`),s(p)}}else s(t);const a=ff.sha512_256(r.toString());if(console.log(a),e)debugger;return a};jt.testGlyphs=function(t){const e=t.glyphLevel||6500,i=t.duration||4e3;let n=Date.now();const r=GameSaveSerializer.serialize(player),s=(R,O)=>({type:R,level:e,strength:3.5,rawLevel:e,idx:null,id:n++,effects:makeGlyphEffectBitmask(O)}),a=R=>s(R,GlyphTypes[R].effects.map(O=>O.id)),o=[s("effarig",["effarigantimatter","effarigdimensions","effarigforgotten","effarigblackhole"]),s("effarig",["effarigantimatter","effarigdimensions","effarigforgotten","effarigachievement"])];function c(R,O){if(O.length===0)return[];if(R===0)return[[]];const I=c(R,O.slice(1)),F=c(R-1,O);return F.forEach(P=>P.push(O[0])),F.concat(I)}const d=c(5,BASIC_GLYPH_TYPES).map(R=>R.map(O=>a(O))),p=c(4,BASIC_GLYPH_TYPES).map(R=>R.map(O=>a(O))),m=o.map(R=>p.map(O=>[R].concat(O))),y=d.concat(...m);function _(R){player.reality.glyphs.active=y[R].map((O,I)=>(O.idx=I,O)),Glyphs.active=Array.from(player.reality.glyphs.active),EventHub.dispatch(GAME_EVENT.GLYPHS_CHANGED)}function E(R){return R.type==="effarig"?o.findIndex(O=>O.id===R.id).toString():GLYPH_SYMBOLS[R.type]}function C(R,O,I=!1){return R.length>=O?R:I?" ".repeat(O-R.length)+R:R+" ".repeat(O-R.length)}function S(R){const O=C(`${Math.floor(100*(R+1)/y.length)}%`,4,!0),I=C(MachineHandler.gainedRealityMachines.toPrecision(2),9),F=C(gainedGlyphLevel().actualLevel,4),P=C(player.eternityPoints.exponent.toString(),6),x=C(player.infinityPoints.exponent.toString(),8),M=C(Currency.antimatter.exponent.toString(),12),q=DimBoost.purchasedBoosts,$=Replicanti.galaxies.total+player.galaxies+player.dilation.totalTachyonGalaxies,B=y[R].map(E).sum();console.log(`${O} ${B} rm=${I} gl=${F} ep=${P} ip=${x} am=${M} dimboosts=${q} galaxies=${$}`),GameStorage.offlineEnabled=!1,GameStorage.import(r),R<y.length-1&&setTimeout(k,100,R+1)}function k(R){_(R),AutomatorBackend.start(),setTimeout(S,i,R)}k(0)};jt.unlockAutomator=function(){player.reality.automator.forceUnlock=!0};jt.forceCloudSave=async function(){const t=await Cloud.load(),e=GameSaveSerializer.deserialize(t),i=GameStorage.currentSlot;e.saves||(e.saves=[]),e.saves[i]=GameStorage.saves[i],Cloud.save(i)};jt.unlockAllCosmeticSets=function(){player.reality.glyphs.cosmetics.unlockedFromNG=Object.keys(GameDatabase.reality.glyphCosmeticSets)};const YXe={BITS_PER_MASK:31,addSeenNews(t){if(!GameDatabase.news.map(r=>r.id).includes(t))return;const e=t.match(/([a-z]+)(\d+)/u),i=e[1],n=parseInt(e[2],10);for(player.news.seen[i]||(player.news.seen[i]=[]);this.BITS_PER_MASK*player.news.seen[i].length<=n;)player.news.seen[i].push(0);player.news.seen[i][Math.floor(n/this.BITS_PER_MASK)]|=1<<n%this.BITS_PER_MASK,player.news.totalSeen++},hasSeenNews(t){const e=t.match(/([a-z]+)(\d+)/u),i=e[1],n=parseInt(e[2],10),r=player.news.seen[i];return!r||this.BITS_PER_MASK*r.length<n?!1:(r[Math.floor(n/this.BITS_PER_MASK)]|=1<<n%this.BITS_PER_MASK)!==0},get uniqueTickersSeen(){let t=0;for(const e of Object.values(player.news.seen))for(const i of e)t+=countValuesFromBitmask(i);return t}},iI={},$c={totalSTD:0,spentSTD:0,respecAvailable:!1,lastRespec:"",unlockedCosmetics:[],get availableSTD(){return this.totalSTD-this.spentSTD},get isIAPEnabled(){return Cloud.loggedIn&&this.availableSTD>=0&&player.IAP.enabled},get timeUntilRespec(){const t=Date.now()-new Date($c.lastRespec).getTime();return TimeSpan.fromMilliseconds(3*86400*1e3-t)},get canRespec(){return this.respecAvailable||this.timeUntilRespec.totalDays<=0},updateLocalSTD(t){this.totalSTD=t.totalSTD,this.spentSTD=t.spentSTD,this.respecAvailable=t.respecAvailable,this.lastRespec=t.lastRespec??0,this.unlockedCosmetics=[...t.unlockedCosmetics??[]];for(const e of Object.keys(GameDatabase.shopPurchases))this[e]=t[e]??0;this.allCosmeticSets>0&&(this.unlockedCosmetics=Object.keys(GameDatabase.reality.glyphCosmeticSets)),$c.isIAPEnabled&&Speedrun.setSTDUse(!0),GameStorage.save()},clearLocalSTD(){this.totalSTD=0,this.spentSTD=0,this.respecAvailable=!1,this.unlockedCosmetics=[];for(const t of Object.keys(GameDatabase.shopPurchases))this[t]=0},async syncSTD(t=!0,e=void 0){if(!Cloud.loggedIn)return;let i;if(e)i=e;else try{i=await(await fetch(`${STD_BACKEND_URL}/STDData?user=${Cloud.user.id}`)).json()}catch{GameUI.notify.error("Could not sync STD purchases!",1e4);return}t&&i.totalSTD>0&&GameUI.notify.info("STD purchases successfully loaded!",1e4),this.updateLocalSTD(i)},respecRequest(){player.options.confirmations.respecIAP?Modal.respecIAP.show():this.respecAll()},async respecAll(){if(!this.canRespec){GameUI.notify.error("You do not have a respec available",1e4);return}let t;try{t=await fetch(`${STD_BACKEND_URL}/respec`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:Cloud.user.id})})}catch{GameUI.notify.error("Unable to respec STD purchases!",1e4);return}const e=await t.json();e.success?GameUI.notify.info("STD respec successful!",1e4):GameUI.notify.error("No purchases to respec!",1e4),this.updateLocalSTD(e.data)}};for(const t of Object.keys(GameDatabase.shopPurchases))$c[t]=0;class WXe extends su{get currency(){return $c.availableSTD}get isAffordable(){return this.currency>=this.cost}get description(){const e=this.config.description;return typeof e=="function"?e():e}get cost(){const e=this.config.cost;return typeof e=="function"?e():e}get purchases(){return $c[this.config.key]??0}set purchases(e){Number.isFinite(e)&&($c[this.config.key]=e)}isUnlocked(){var e,i;return player.records.fullGameCompletions>0||(((i=(e=this.config).isUnlocked)==null?void 0:i.call(e))??!0)}get lockText(){return this.config.lockText}get shouldDisplayMult(){return!!this.config.multiplier}get currentMult(){return this.shouldDisplayMult?this.config.multiplier($c.isIAPEnabled?this.purchases:0):""}get nextMult(){return this.shouldDisplayMult?this.config.multiplier($c.isIAPEnabled?this.purchases+1:0):""}get currentMultForDisplay(){return this.shouldDisplayMult?this.config.multiplier(this.purchases):""}get nextMultForDisplay(){return this.shouldDisplayMult?this.config.multiplier(this.purchases+1):""}formatEffect(e){var i,n;return((n=(i=this.config).formatEffect)==null?void 0:n.call(i,e))||formatX(e,2,0)}async purchase(){var n;if(!this.canBeBought||GameEnd.creditsEverClosed||this.config.instantPurchase&&ui.$viewModel.modal.progressBar)return!1;const e=this.config.key==="singleCosmeticSet"?(n=GlyphAppearanceHandler.chosenFromModal)==null?void 0:n.id:void 0;return(gf.isActive?await gf.purchaseShopItem(this.config.key,this.cost,e):await zn.buyUpgrade(this.config.key,e))?(player.IAP.enabled&&Speedrun.setSTDUse(!0),this.config.instantPurchase&&this.config.onPurchase(),GameUI.update(),!0):!1}}const jXe=mapGameDataToObject(GameDatabase.shopPurchases,t=>new WXe(t));iI.purchaseTimeSkip=function(){Speedrun.setSTDUse(!0),simulateTime(3600*6)};iI.purchaseLongerTimeSkip=function(){Speedrun.setSTDUse(!0),simulateTime(3600*24)};class zXe{constructor(e,i){this._parent=e,this.config=i}get name(){return this.config.name}get symbol(){return this.config.symbol}get isPermanentlyHidden(){return this.config.hideAt<GameEnd.endState&&!GameEnd.creditsClosed}get hidable(){return this.config.hidable}get isHidden(){return Enslaved.isRunning||Pelle.hasGalaxyGenerator?!1:(player.options.hiddenSubtabBits[this._parent.id]&1<<this.id)!==0&&this.hidable}get isUnlocked(){return this.config.condition===void 0||this.config.condition()}get isAvailable(){return!this.isPermanentlyHidden&&(this.isOpen||!this.isHidden&&this.isUnlocked)}get hasNotification(){return player.tabNotifications.has(this._parent.key+this.key)}get key(){return this.config.key}get id(){return this.config.id}show(e){this._parent.show(e,this)}unhideTab(){this._parent.unhideTab(),player.options.hiddenSubtabBits[this._parent.id]&=~(1<<this.id)}toggleVisibility(){this._parent.id===$d.current.id&&this.id===$d.current._currentSubtab.id||(player.options.hiddenSubtabBits[this._parent.id]^=1<<this.id,aH())}get isOpen(){return ui.view.tab===this._parent.key&&ui.view.subtab===this.key}}function d2(t,e){return e.find(i=>i.id===player.options.lastOpenSubtab[t])??e[0]}function XXe(t,e){const i=t.filter(a=>a.isAvailable),n=i.indexOf(e),r=ui.view.shiftDown?-1:1;let s=n+r;return s=s<0?i.length-1:s,s=s>i.length-1?0:s,i[s]}class KXe{constructor(e){this.config=e,this.isOpened=!1;const i=[];for(const n of e.subtabs){const r=new zXe(this,n);this[n.key]=r,i.push(r)}this.subtabs=i,this._currentSubtab=d2(this.id,i)}get name(){return this.config.name}get key(){return this.config.key}get id(){return this.config.id}get isPermanentlyHidden(){return this.config.hideAt<GameEnd.endState&&!GameEnd.creditsClosed}get hidable(){return this.config.hidable}get isHidden(){if(Enslaved.isRunning||Pelle.hasGalaxyGenerator)return!1;const e=this.subtabs.some(i=>i.isAvailable);return((player.options.hiddenTabBits&1<<this.id)!==0||!e)&&this.hidable}get isUnlocked(){return this.config.condition===void 0||this.config.condition()}get isAvailable(){return!this.isPermanentlyHidden&&(this.isOpen||!this.isHidden&&this.isUnlocked)}get isOpen(){return ui.view.tab===this.key}get hasNotification(){return this.subtabs.some(e=>e.hasNotification)}show(e,i=void 0){if(!e&&!player.options.automaticTabSwitching||Quote.isOpen)return;i!==void 0?(Enslaved.isRunning||i.unhideTab(),this._currentSubtab=i):ui.view.tab===this.key&&ui.view.initialized&&e?this._currentSubtab=XXe(this.subtabs,this._currentSubtab):this._currentSubtab=d2(this.id,this.subtabs),this._currentSubtab.isUnlocked||this.resetToUnlocked(),this._currentSubtab.isAvailable||this.resetToAvailable(),ui.view.tab=this.key,ui.view.subtab=this._currentSubtab.key;const n=this.key+this._currentSubtab.key;player.tabNotifications.has(n)&&player.tabNotifications.delete(n),e&&Modal.hideAll(),EventHub.dispatch(GAME_EVENT.TAB_CHANGED,this,this._currentSubtab)}unhideTab(){player.options.hiddenTabBits&=~(1<<this.id)}toggleVisibility(){this.id!==$d.current.id&&(player.options.hiddenTabBits^=1<<this.id,aH())}resetToAvailable(){this._currentSubtab=this.subtabs.find(e=>e.isAvailable),this._currentSubtab===void 0&&(this._currentSubtab=this.subtabs[0],this._currentSubtab.unhideTab())}resetToUnlocked(){this._currentSubtab=this.subtabs.find(e=>e.isUnlocked)}}const Tn=GameDatabase.tabs.mapToObject(t=>t.key,t=>new KXe(t)),$d=function(){return{all:Object.values(Tn),get current(){return $d.all.find(t=>t.isOpen)},oldUI:[Tn.dimensions,Tn.options,Tn.statistics,Tn.achievements,Tn.automation,Tn.challenges,Tn.infinity,Tn.eternity,Tn.reality,Tn.celestials,Tn.shop],newUI:[Tn.dimensions,Tn.automation,Tn.challenges,Tn.infinity,Tn.eternity,Tn.reality,Tn.celestials,Tn.achievements,Tn.statistics,Tn.options,Tn.shop],get currentUIFormat(){return ui.view.newUI?this.newUI:this.oldUI}}}(),aH=()=>{$d.all.filter(t=>t.isUnlocked&&t.hidable).every(t=>t.isHidden)&&SecretAchievement(47).unlock()};EventHub.logic.on(GAME_EVENT.TAB_CHANGED,()=>{const t=$d.current.id;player.options.lastOpenTab=t,player.options.lastOpenSubtab[t]=$d.current._currentSubtab.id});class ZXe{constructor(e){if(this.config=e,e.events)for(const i of e.events)EventHub.logic.on(i,this.tryTrigger.bind(this),this)}get triggered(){return player.triggeredTabNotificationBits&1<<this.config.id}tryTrigger(){if(!this.config.condition()||this.triggered)return;const e=`${Tabs.current.key}${Tabs.current._currentSubtab.key}`;this.config.tabsToHighLight.map(i=>i.parent+i.tab).forEach(i=>{i!==e&&player.tabNotifications.add(i)}),player.triggeredTabNotificationBits|=1<<this.config.id;for(const i of this.config.tabsToHighLight){const n=Tabs.all.find(s=>s.config.key===i.parent),r=n.subtabs.find(s=>s.key===i.tab);n.unhideTab(),r.unhideTab()}}clearTrigger(){player.triggeredTabNotificationBits&=-1-(1<<this.config.id),this.config.tabsToHighLight.map(e=>e.parent+e.tab).forEach(e=>player.tabNotifications.delete(e))}}const QXe=mapGameDataToObject(GameDatabase.tabNotifications,t=>new ZXe(t));let JXe=class{constructor(e,i){switch(this.lines=[],this.warnings=[],i){case"Climb EP":this.templateClimbEP(e);break;case"Grind Eternities":this.templateGrindEternities(e);break;case"Grind Infinities":this.templateGrindInfinities(e);break;case"Complete Eternity Challenge":this.templateDoEC(e);break;case"Unlock Dilation":this.templateUnlockDilation(e);break;default:throw new Error(`Unrecognized template name ${i} in ScriptTemplate`)}}format(e){return typeof e=="number"?Math.round(e):e.lte(1e3)?e.toNumber().toFixed(2):`${e.mantissa.toFixed(2)}e${e.exponent}`}storeTreeData(e){const i=e.treeNowait?" nowait":"";if(e.treePreset){const n=player.timestudy.presets.map((s,a)=>({...s,id:a+1})).find(s=>s.name===e.treePreset||s.id===Number(e.treePreset)),r=n.name?`name ${n.name}`:`id ${n.id}`;this.storedTreeStr=`studies${i} load ${r}`,this.storedTreeObj=new TimeStudyTree(n.studies)}else this.storedTreeStr=`studies${i} purchase ${e.treeStudies}`,this.storedTreeObj=new TimeStudyTree(e.treeStudies);this.storedTreeObj.invalidStudies.length>0&&this.warnings.push("Tree contains invalid Study IDs"),this.storedTreeObj.purchasedStudies.length<this.storedTreeObj.selectedStudies.length&&(this.warnings.push("Tree structure results in some unbought studies when imported with an empty tree"),e.treeNowait||this.warnings.push('Automator may possibly get stuck with "Keep buying Studies" setting'))}parseAutobuyerProp(e,i){switch(e){case"mult":return`${this.format(i)} x highest`;case"time":return`${this.format(i)} seconds`;default:throw new Error(`Unrecognized autobuyer mode ${e} in automator script templates`)}}templateClimbEP(e){this.lines.push("// Template: Climb EP"),this.lines.push(`notify "Running Template Climb EP (to ${format(e.finalEP)})"`),this.storeTreeData(e),this.lines.push(`auto infinity ${this.parseAutobuyerProp(e.autoInfMode,e.autoInfValue)}`),this.lines.push(`auto eternity ${this.parseAutobuyerProp(e.autoEterMode,e.autoEterValue)}`),this.lines.push(`while ep < ${this.format(e.finalEP)} {`),this.lines.push(` ${this.storedTreeStr}`),this.lines.push(" studies respec"),this.lines.push(" wait eternity"),this.lines.push("}")}templateGrindEternities(e){this.lines.push("// Template: Grind Eternities"),this.lines.push(`notify "Running Template Grind Eternities (to ${format(e.eternities)})"`),this.storeTreeData(e),this.lines.push(this.storedTreeStr),this.lines.push("auto eternity 0 ep");const i=Number.MAX_VALUE/Currency.infinityPoints.startingValue.toNumber()*5;this.lines.push(`auto infinity ${this.format(Decimal.pow(i,1/e.crunchesPerEternity))} x highest`),this.lines.push(`wait eternities > ${this.format(e.eternities)}`),this.lines.push("auto eternity off")}templateGrindInfinities(e){if(this.lines.push("// Template: Grind Infinities"),this.lines.push(`notify "Running Template Grind Infinities (to ${format(e.infinities)})"`),this.storeTreeData(e),this.lines.push(this.storedTreeStr),this.lines.push("auto eternity off"),this.lines.push("auto infinity 5s"),e.isBanked){const i=this.storedTreeObj.purchasedStudies.includes(TimeStudy(191));i||this.warnings.push(`TS191 is not reachable from an empty tree; banking anything in this template
        will require Achievement "${Achievement(131).name}"`);const n=i?.1:.05;this.lines.push("// Note: This template attempts to get all the Banked Infinities within a single Eternity"),this.lines.push(`wait infinities > ${this.format(e.infinities.dividedBy(n),2)}`),this.lines.push("eternity")}else this.lines.push(`wait infinities > ${this.format(e.infinities,2)}`)}templateDoEC(e){this.lines.push("// Template: Complete Eternity Challenge"),this.lines.push(`notify "Running Template Complete Eternity Challenge (EC${e.ec})"`),this.lines.push("eternity respec"),this.storeTreeData(e),this.lines.push(this.storedTreeStr);const i=this.storedTreeObj;i.ec===0?(this.lines.push(`unlock ec ${e.ec}`),i.hasRequirements(TimeStudy.eternityChallenge(e.ec),!0)||this.warnings.push("Specified Study Tree cannot reach specified EC")):i.ec!==e.ec&&this.warnings.push("Specified Study Tree already has a different EC unlocked"),this.lines.push(`auto infinity ${this.parseAutobuyerProp(e.autoInfMode,e.autoInfValue)}`),this.lines.push("auto eternity off"),TimeStudy.eternityChallenge(e.ec)||this.warnings.push("Specified template EC does not exist"),this.lines.push(`start ec ${e.ec}`),e.completions>5&&this.warnings.push(`ECs cannot be completed more than ${formatInt(5)} times`),this.lines.push(`wait pending completions >= ${e.completions}`),this.lines.push("eternity")}templateUnlockDilation(e){this.lines.push("// Template: Unlock Dilation"),this.lines.push('notify "Running Template Unlock Dilation"'),this.storeTreeData(e),[231,232,233,234].some(i=>this.storedTreeObj.purchasedStudies.includes(TimeStudy(i)))||this.warnings.push("Specified Study Tree cannot reach Dilation"),this.lines.push("auto infinity off"),this.lines.push(`auto eternity ${this.parseAutobuyerProp(e.autoEterMode,e.autoEterValue)}`),this.lines.push(`while total tt < ${this.format(TimeStudy.dilation.totalTimeTheoremRequirement)} {`),this.lines.push(` ${this.storedTreeStr}`),this.lines.push(" studies respec"),this.lines.push(" wait eternity"),this.lines.push("}"),this.lines.push("unlock dilation")}get script(){return this.lines.join(`
`)}};const eKe=Object.freeze(Object.defineProperty({__proto__:null,AUTOMATOR_COMMAND_STATUS:Ko,AUTOMATOR_MODE:vo,AUTOMATOR_TYPE:wr,AUTOMATOR_VAR_TYPES:t7,Achievement:JS,AchievementTimers:Hze,Achievements:ar,AlchemyReactions:b3,AlchemyResource:Fv,AlchemyResources:MS,AntimatterDimension:Vn,AntimatterDimensions:Df,AutoBackupSlots:Lh,AutoGlyphProcessor:c7e,Autobuyer:Zt,Autobuyers:To,AutomatorBackend:Wc,AutomatorData:Xa,AutomatorHighlighter:jC,AutomatorPoints:i7,AutomatorScript:fd,AutomatorScroller:zC,AwayProgressTypes:Cg,BACKUP_SLOT_TYPE:Gr,BlackHole:ns,BlackHoles:Vs,BreakInfinityUpgrade:eXe,BreakInfinityUpgradeState:O4,Celestials:she,Cloud:kE,ConfirmationTypes:sS,CosmeticGlyphTypes:Jp,Currency:ri,DarkMatterDimension:Oh,DarkMatterDimensionState:T3,DarkMatterDimensions:AE,DeltaTimeState:ik,DilationTimeStudyState:Mf,DilationUpgrade:Xs,DilationUpgrades:HXe,DimBoost:_o,ECTimeStudyState:Um,EFFARIG_STAGES:$s,END_STATE_MARKERS:k3,ENSLAVED_UNLOCKS:xS,Effarig:Bd,EffarigUnlock:I0,Enslaved:fa,EnslavedProgress:D0,EternityChallenge:Pf,EternityChallengeState:q4,EternityChallenges:Pg,EternityMilestone:qv,EternityMilestoneState:H4,EternityUpgrade:VT,FreeTickspeed:Zo,GALAXY_TYPE:qu,Galaxy:Ed,GalaxyGenerator:nhe,GalaxyGeneratorUpgrade:S3,GalaxyGeneratorUpgrades:Bp,GameCache:Kp,GameEnd:rhe,GameIntervals:rB,GameKeyboard:en,GameOptions:GTe,GameSaveSerializer:Wu,GameStorage:Rg,GameUI:Hl,GlyphAlteration:Bde,GlyphAppearanceHandler:Xl,GlyphEffect:e7e,GlyphEffectOrder:qze,GlyphEffects:uT,GlyphGenerator:go,GlyphSacrifice:jze,GlyphSacrificeHandler:l7e,GlyphSelection:$n,GlyphTypes:gA,Glyphs:tc,ImaginaryUpgrade:Q4,ImaginaryUpgrades:IXe,InfinityChallenge:Lm,InfinityChallenges:Fh,InfinityDimension:Qo,InfinityDimensions:mm,InfinityUpgrade:da,InfinityUpgradeState:P4,Laitela:Ad,LineEnum:QU,MachineHandler:VXe,Modal:Ce,NG:wde,NewsHandler:YXe,NormalChallenge:Kc,NormalChallenges:N4,NormalTimeStudies:xf,NormalTimeStudyState:Gm,Notation:Wi,Notations:h3,POWER_DE_PER_ASCENSION:E3,POWER_DM_PER_ASCENSION:_3,Pelle:Cs,PelleRifts:Za,PelleStrikes:ehe,PelleUpgrade:is,PelleUpgradeState:C3,PerformanceStats:kee,Perk:J4,PerkShopUpgrade:Rde,Perks:Bm,Player:iB,PlayerProgress:on,Quote:f3,Quotes:jd,Ra:ci,RealityUpgrade:kXe,RealityUpgrades:AXe,RebuyablePelleUpgradeState:w3,Replicanti:Nt,ReplicantiGrowth:gm,ReplicantiUpgrade:N0,Sacrifice:ym,ScriptTemplate:JXe,SecretAchievement:ek,SecretAchievements:P0,ShopPurchase:jXe,ShopPurchaseData:$c,Singularity:Zde,SingularityMilestone:tv,SingularityMilestones:$v,Speedrun:xde,SpeedrunMilestone:Ib,TUTORIAL_STATE:Ju,Tab:Tn,TabNotification:QXe,Tabs:$d,Teresa:Rf,TeresaUnlocks:p3,Tesseracts:m3,Theme:gi,Themes:xm,Tickspeed:il,Time:f7e,TimeDimension:js,TimeDimensions:Lb,TimeStudy:vi,TimeStudyConnection:S4,TimeStudyState:HT,TimeStudyTree:U7e,TimeTheoremPurchaseType:ya,TimeTheorems:Z4,Tutorial:Tde,UIID:Lze,V:zl,VRunUnlock:y3,VRunUnlocks:g3,VUnlocks:cd,animateAndDilate:eH,animateAndEternity:U4,animateAndUndilate:tH,antimatterDimensionCommonMultiplier:g7e,applyEU1:F4,applyEU2:lXe,applyRUPG10:z4,autoAdjustGlyphWeights:u7e,autoReality:mXe,beginProcessReality:ZR,bigCrunchAnimation:I4,bigCrunchReset:rk,bigCrunchResetRequest:D4,bigCrunchResetValues:x4,blockifyTextAutomator:cv,buyAsManyAsYouCanBuy:T7e,buyDilationUpgrade:iH,buyManyDimension:E7e,buyMaxDimension:T4,buyMaxTickSpeed:m7e,buyMaxTimeDimension:w4,buyOneDimension:$T,buySingleTimeDimension:UE,buyStudiesUntil:N7e,buyTickSpeed:p7e,calculateGlyph:tk,checkPerkValidity:xXe,clearCelestialRuns:X4,countValuesFromBitmask:a7e,dev:jt,dilatedValueOf:BXe,disChargeAll:Z7e,effectiveBaseGalaxies:E4,eternity:sk,eternityAnimation:G4,eternityResetRequest:oXe,findGlyphTypeEffects:JL,finishProcessReality:ok,forbiddenConstantPatterns:XU,fullResetTimeDimensions:I7e,gainedEternities:$4,generatedTypes:Vze,getActiveGlyphEffects:o7e,getAdjustedGlyphEffect:Vv,getAdjustedGlyphEffectUncached:t7e,getAdjustedGlyphLevel:Kze,getBaseTP:rH,getDilationGainPerSecond:nH,getDilationTimeEstimate:LXe,getDimensionFinalMultiplierUncached:v7e,getGlyphEffectValues:XR,getGlyphEffectValuesFromBitmask:s7e,getGlyphEffectsFromBitmask:eB,getGlyphIDsFromBitmask:QQ,getGlyphLevelInputs:d7e,getRarity:Xze,getRealityProps:KR,getReplicantiInterval:LE,getSecondaryGlyphEffect:i7e,getSingleGlyphEffectFromBitmask:b4,getTP:tI,getTachyonGain:GXe,getTachyonGalaxyMult:OXe,getTachyonReq:UXe,getTickSpeedMultiplier:nk,guardFromNaNValues:nB,hasCompilationErrors:KU,infinityDimensionCommonMultiplier:S7e,initializeChallengeCompletions:L4,initializeResourcesAfterEternity:B4,isDevEnvironment:qXe,isInCelestialReality:bXe,isLocalEnvironment:sH,isRealityAvailable:qT,isSecretImport:LTe,makeGlyphEffectBitmask:ZQ,manualBigCrunchResetRequest:V7e,manualRequestDimensionBoost:B7e,manualRequestGalaxyReset:fte,maxAll:w7e,maxAllTimeDimensions:x7e,orderedEffectList:y4,preProductionGenerateIP:z7e,processManualReality:ak,rarityToStrength:g4,realityGlyphEffectLevelThresholds:KQ,recalculateAllGlyphs:zze,replicantiCap:Eo,replicantiGalaxy:QR,replicantiGalaxyRequest:EXe,replicantiLoop:wXe,replicantiMult:CXe,requestDimensionBoost:A4,requestGalaxyReset:yB,requestManualReality:fXe,resetTickspeed:y7e,resetTimeDimensions:R7e,respecGlyphs:Zze,respecTimeStudies:G7e,rewardTP:NXe,runRealityAnimation:j4,sacrificeBtnClick:$7e,sacrificeReset:R4,secondSoftReset:M4,separateEffectKey:r7e,shop:iI,shortcuts:pB,simulatedRealityCount:Y4,skipResetsIfPossible:k4,softReset:em,startDilatedEternity:JR,startDilatedEternityRequest:MXe,startEternityChallenge:V4,startManualReality:W4,staticGlyphWeights:h7e,strengthToRarity:Yze,tachyonGainMultiplier:eI,timeDimensionCommonMultiplier:M7e,toggleAllInfDims:k7e,toggleAllTimeDims:D7e,totalIPMult:K7e,totalReplicantiSpeedMult:K4,tryCompleteInfinityChallenges:nXe,tryImportSecret:BTe,tryUnlockTimeDimensions:O7e,ui:Bze,updateNormalAndInfinityChallenges:tXe,updateTimeDimensionCosts:C4,validateLine:WC},Symbol.toStringTag,{value:"Module"})),tKe=/((CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS)[ +]+(11[_.]0|11[_.]([1-9]|\d{2,})|11[_.]2|11[_.]([3-9]|\d{2,})|(1[2-9]|[2-9]\d|\d{3,})[_.]\d+|12[_.]5|12[_.]([6-9]|\d{2,})|(1[3-9]|[2-9]\d|\d{3,})[_.]\d+|14[_.]0|14[_.]([1-9]|\d{2,})|14[_.]4|14[_.]([5-9]|\d{2,})|14[_.]8|14[_.](9|\d{2,})|(1[5-9]|[2-9]\d|\d{3,})[_.]\d+|15[_.]6|15[_.]([7-9]|\d{2,})|15[_.]8|15[_.](9|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})[_.]\d+|16[_.]0|16[_.]([1-9]|\d{2,})|16[_.]5|16[_.]([6-9]|\d{2,})|(1[7-9]|[2-9]\d|\d{3,})[_.]\d+|17[_.]1|17[_.]([2-9]|\d{2,})|(1[8-9]|[2-9]\d|\d{3,})[_.]\d+)(?:[_.]\d+)?)|(CFNetwork\/8.* Darwin\/17\.0\.\d+)|(CFNetwork\/8.* Darwin\/17\.2\.\d+)|(CFNetwork\/8.* Darwin\/17\.3\.\d+)|(CFNetwork\/8.* Darwin\/17\.\d+)|(Opera\/.+Opera Mobi.+Version\/(80\.0|80\.([1-9]|\d{2,})|(8[1-9]|9\d|\d{3,})\.\d+))|(Opera\/(80\.0|80\.([1-9]|\d{2,})|(8[1-9]|9\d|\d{3,})\.\d+).+Opera Mobi)|(Opera Mobi.+Opera(?:\/|\s+)(80\.0|80\.([1-9]|\d{2,})|(8[1-9]|9\d|\d{3,})\.\d+))|((?:Chrome).*OPR\/(109\.0|109\.([1-9]|\d{2,})|(11\d|[2-9]\d\d|\d{4,})\.\d+|111\.0|111\.([1-9]|\d{2,})|(11[2-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+)\.\d+)|(SamsungBrowser\/(25\.0|25\.([1-9]|\d{2,})|(2[6-9]|[3-9]\d|\d{3,})\.\d+))|(Edge\/(125(?:\.0)?|125(?:\.([1-9]|\d{2,}))?|(12[6-9]|1[3-9]\d|[2-9]\d\d|\d{4,})(?:\.\d+)?))|((Chromium|Chrome)\/(79\.0|79\.([1-9]|\d{2,})|([8-9]\d|\d{3,})\.\d+|103\.0|103\.([1-9]|\d{2,})|(10[4-9]|1[1-9]\d|[2-9]\d\d|\d{4,})\.\d+|109\.0|109\.([1-9]|\d{2,})|(11\d|[2-9]\d\d|\d{4,})\.\d+|116\.0|116\.([1-9]|\d{2,})|(11[7-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|120\.0|120\.([1-9]|\d{2,})|(12[1-9]|1[3-9]\d|[2-9]\d\d|\d{4,})\.\d+)(?:\.\d+)?)|(Version\/(15\.6|15\.([7-9]|\d{2,})|(1[6-9]|[2-9]\d|\d{3,})\.\d+|16\.3|16\.([4-9]|\d{2,})|16\.6|16\.([7-9]|\d{2,})|(1[7-9]|[2-9]\d|\d{3,})\.\d+|17\.4|17\.([5-9]|\d{2,})|(1[8-9]|[2-9]\d|\d{3,})\.\d+)(?:\.\d+)? Safari\/)|(Firefox\/(115\.0|115\.([1-9]|\d{2,})|(11[6-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|127\.0|127\.([1-9]|\d{2,})|(12[8-9]|1[3-9]\d|[2-9]\d\d|\d{4,})\.\d+)\.\d+)|(Firefox\/(115\.0|115\.([1-9]|\d{2,})|(11[6-9]|1[2-9]\d|[2-9]\d\d|\d{4,})\.\d+|127\.0|127\.([1-9]|\d{2,})|(12[8-9]|1[3-9]\d|[2-9]\d\d|\d{4,})\.\d+)(pre|[ab]\d+[a-z]*)?)/,iKe=""+new URL("../images/loading.png",import.meta.url).href,nKe=""+new URL("../images/loading2.webp",import.meta.url).href,rKe=""+new URL("../images/loading3.png",import.meta.url).href,sKe=""+new URL("../images/loading4.png",import.meta.url).href,aKe=""+new URL("../images/loading5.png",import.meta.url).href,oKe=""+new URL("../images/loading6.png",import.meta.url).href;if(GlobalErrorHandler.handled)throw new Error("Initialization failed");GlobalErrorHandler.cleanStart=!0;function lKe(){const t=new Set(["timeMult","dimMult","timeMult2","skipReset1","skipReset2","unspentBonus","27Mult","18Mult","36Mult","resetMult","skipReset3","passiveGen","45Mult","resetBoost","galaxyBoost","skipResetGalaxy","ipOffline"]),e=new Set(["timeMult","dimMult","timeMult2","skipReset1","skipReset2","unspentBonus","27Mult","18Mult","36Mult","resetMult","skipReset3","passiveGen","45Mult","resetBoost","galaxyBoost","skipResetGalaxy","totalMult","currentMult","postGalaxy","challengeMult","achievementMult","infinitiedMult","infinitiedGeneration","autoBuyerUpgrade","autobuyMaxDimboosts","ipOffline"]);if(PelleUpgrade.keepBreakInfinityUpgrades.canBeApplied){player.infinityUpgrades=new Set([...player.infinityUpgrades].filter(i=>e.has(i)));return}if(PelleUpgrade.keepInfinityUpgrades.canBeApplied){player.infinityUpgrades=new Set([...player.infinityUpgrades].filter(i=>t.has(i))),player.infinityRebuyables=[0,0,0],GameCache.tickSpeedMultDecrease.invalidate(),GameCache.dimensionMultDecrease.invalidate();return}RealityUpgrade(10).isBought||EternityMilestone.keepBreakUpgrades.isReached?(player.infinityUpgrades=e,player.infinityRebuyables=[8,7,10]):EternityMilestone.keepInfinityUpgrades.isReached?(player.infinityUpgrades=t,player.infinityRebuyables=[0,0,0]):(player.infinityUpgrades.clear(),player.infinityRebuyables=[0,0,0]),Pelle.isDoomed&&(player.infinityUpgrades.clear(),player.infinityRebuyables=[0,0,0]),GameCache.tickSpeedMultDecrease.invalidate(),GameCache.dimensionMultDecrease.invalidate()}function cKe(){if(Autobuyer.bigCrunch.hasMaxedInterval&&!InfinityChallenge.isRunning){for(const t of Autobuyers.all)t.data.interval!==void 0&&t.maxIntervalForFree();Achievement(61).tryUnlock(),player.break=!player.break,TabNotification.ICUnlock.tryTrigger(),EventHub.dispatch(player.break?GAME_EVENT.BREAK_INFINITY:GAME_EVENT.FIX_INFINITY),GameUI.update()}}function HE(){const t=Effects.min(308,Achievement(103),TimeStudy(111));if(Pelle.isDisabled("IPMults"))return Decimal.pow10(player.records.thisInfinity.maxAM.log10()/t-.75).timesEffectsOf(PelleRifts.vacuum).times(Pelle.specialGlyphEffect.infinity).floor();let e=player.break?Decimal.pow10(player.records.thisInfinity.maxAM.log10()/t-.75):new Decimal(308/t);return Effarig.isRunning&&Effarig.currentStage===EFFARIG_STAGES.ETERNITY&&(e=e.min(L.E200)),e=e.times(GameCache.totalIPMult.value),Teresa.isRunning?e=e.pow(.55):V.isRunning?e=e.pow(.5):Laitela.isRunning&&(e=dilatedValueOf(e)),GlyphAlteration.isAdded("infinity")&&(e=e.pow(getSecondaryGlyphEffect("infinityIP"))),e.floor()}function oH(){return Pelle.isDisabled("EPMults")?Pelle.specialGlyphEffect.time.timesEffectOf(PelleRifts.vacuum.milestones[2]):getAdjustedGlyphEffect("cursedEP").times(ShopPurchase.EPPurchases.currentMult).timesEffectsOf(EternityUpgrade.epMult,TimeStudy(61),TimeStudy(122),TimeStudy(121),TimeStudy(123),RealityUpgrade(12),GlyphEffect.epMult)}function VE(){let t=L.D5.pow(player.records.thisEternity.maxIP.plus(HE()).log10()/(308-PelleRifts.recursion.effectValue.toNumber())-.7).times(oH());return Teresa.isRunning?t=t.pow(.55):V.isRunning?t=t.pow(.5):Laitela.isRunning&&(t=dilatedValueOf(t)),GlyphAlteration.isAdded("time")&&(t=t.pow(getSecondaryGlyphEffect("timeEP"))),t.floor()}function uKe(t){return Decimal.pow10(308*(Decimal.log(Decimal.divide(t,oH()),5)+.7)).clampMin(Number.MAX_VALUE)}function lH(){const t=getGlyphLevelInputs();let e=Math.floor(t.rawLevel);isFinite(e)||(e=0);let i=Math.floor(t.actualLevel);return isFinite(i)||(i=0),{rawLevel:e,actualLevel:i}}function dKe(){player.chall2Pow=1,player.chall3Pow=L.D0_01,Currency.matter.reset(),player.chall8TotalSacrifice=L.D1,player.postC4Tier=1}function hKe(t,e){return Decimal.divide(t,e/(60*1e3))}function fKe(t,e,i,n){let r="";player.challenge.normal.current&&(r=`Normal Challenge ${player.challenge.normal.current}`),player.challenge.infinity.current&&(r=`Infinity Challenge ${player.challenge.infinity.current}`),player.records.recentInfinities.pop(),player.records.recentInfinities.unshift([t,e,i,n,r]),GameCache.bestRunIPPM.invalidate()}function pKe(){player.records.recentInfinities=Array.from({length:10},()=>[Number.MAX_VALUE,Number.MAX_VALUE,L.D1,L.D1,""]),GameCache.bestRunIPPM.invalidate()}function cH(t,e){return Autobuyer.bigCrunch.autoInfinitiesAvailable(e)?Decimal.floor(player.records.thisEternity.bestInfinitiesPerMs.times(t).dividedBy(2)):L.D0}function mKe(t,e,i,n){let r="";if(player.challenge.eternity.current){const a=player.challenge.eternity.current,o=EternityChallenge(a);r=`${player.dilation.active?"Dilated EC":"Eternity Challenge"} ${a} (${formatInt(o.completions)}/${formatInt(o.maxCompletions)})`}else player.dilation.active&&(r="Time Dilation");const s=player.dilation.active?getTachyonGain():L.D0;player.records.recentEternities.pop(),player.records.recentEternities.unshift([t,e,i,n,r,s]),GameCache.averageRealTimePerEternity.invalidate()}function yKe(){player.records.recentEternities=Array.from({length:10},()=>[Number.MAX_VALUE,Number.MAX_VALUE,L.D1,L.D1,"",L.D0]),GameCache.averageRealTimePerEternity.invalidate()}function uH(t,e){return Autobuyer.eternity.autoEternitiesAvailable(e)?Decimal.floor(player.records.thisReality.bestEternitiesPerMs.times(t).dividedBy(2)):L.D0}function gKe(){return player.options.offlineProgress&&!Autobuyer.bigCrunch.autoInfinitiesAvailable()&&!Autobuyer.eternity.autoEternitiesAvailable()}function dH(t){return!EternityMilestone.autoEP.isReached||!gKe()?L.D0:player.records.bestEternity.bestEPminReality.times(TimeSpan.fromMilliseconds(t).totalMinutes/4)}function vKe(t,e,i,n,r,s,a){let o="";const c=[Teresa,Effarig,Enslaved,V,Ra,Laitela];for(const p of c)p.isRunning&&(o=p.displayName);const d=Effarig.shardsGained;player.records.recentRealities.pop(),player.records.recentRealities.unshift([t,e,i.times(s),r,o,n,d*s,a])}function hH(){if(EternityChallenge(4).isRunning||Pelle.isDisabled("InfinitiedMults"))return L.D1;let t=Effects.max(1,Achievement(87)).toDecimal();return t=t.timesEffectsOf(TimeStudy(32),RealityUpgrade(5),RealityUpgrade(7),Achievement(131).effects.infinitiesGain,Achievement(164),Ra.unlocks.continuousTTBoost.effects.infinity),t=t.times(getAdjustedGlyphEffect("infinityinfmult")),t=t.powEffectOf(SingularityMilestone.infinitiedPow),t}function bKe(){GameStorage.save(),location.reload(!0)}const ts={FIXED_SPEED:1,TIME_GLYPH:2,BLACK_HOLE:3,TIME_STORAGE:4,SINGULARITY_MILESTONE:5,NERFS:6};function Hc(t,e){let i;if(t===void 0?i=[ts.FIXED_SPEED,ts.TIME_GLYPH,ts.BLACK_HOLE,ts.TIME_STORAGE,ts.SINGULARITY_MILESTONE,ts.NERFS]:i=t,i.includes(ts.FIXED_SPEED)&&EternityChallenge(12).isRunning)return 1/1e3;let n=1;if(i.includes(ts.BLACK_HOLE)){if(BlackHoles.areNegative)n*=player.blackHoleNegative;else if(!BlackHoles.arePaused)for(const r of BlackHoles.list){if(!r.isUnlocked||!(e===void 0?r.isActive:r.id<=e))break;n*=Math.pow(r.power,BlackHoles.unpauseAccelerationFactor),n*=VUnlocks.achievementBH.effectOrDefault(1)}}if(i.includes(ts.SINGULARITY_MILESTONE)&&(n*=SingularityMilestone.gamespeedFromSingularities.effectOrDefault(1)),i.includes(ts.TIME_GLYPH)&&(n*=getAdjustedGlyphEffect("timespeed"),n=Math.pow(n,getAdjustedGlyphEffect("effarigblackhole"))),Enslaved.isStoringGameTime&&i.includes(ts.TIME_STORAGE)){const r=Ra.unlocks.autoPulseTime.canBeApplied?.99:1;n=n*(1-r)+r}if(i.includes(ts.NERFS)){if(Effarig.isRunning)n=Effarig.multiplier(n).toNumber();else if(Laitela.isRunning){const r=Math.clampMax(Time.thisRealityRealTime.totalMinutes/10,1);n=Math.pow(n,r)}}return n*=PelleUpgrade.timeSpeedMult.effectValue.toNumber(),n=Math.clamp(n,1e-300,1e300),n}function _Ke(){const t=Hc();return Enslaved.isAutoReleasing&&Enslaved.canRelease(!0)&&!BlackHoles.areNegative&&!Pelle.isDisabled("blackhole")?Math.max(Enslaved.autoReleaseSpeed,t):t}function ck(t){return Ra.memoryTick(t,!Enslaved.isStoringRealTime),AlchemyResource.momentum.isUnlocked&&(player.celestials.ra.momentumTime+=t*Achievement(175).effectOrDefault(1)),DarkMatterDimensions.tick(t),Enslaved.isStoringRealTime?(player.records.realTimePlayed+=t,player.records.thisInfinity.realTime+=t,player.records.thisEternity.realTime+=t,player.records.thisReality.realTime+=t,Enslaved.storeRealTime(),Autobuyers.tick(),GameUI.update(),!0):!1}const EKe=1.1;function uk(t,e={}){if(PerformanceStats.start("Frame Time"),PerformanceStats.start("Game Update"),EventHub.dispatch(GAME_EVENT.GAME_TICK_BEFORE),Speedrun.isPausedAtStart()||GameEnd.creditsEverClosed){GameUI.update();return}let i=t;const n=Date.now(),r=i===void 0?Math.clamp(n-player.lastUpdate,1,864e5):i*EKe;if(GameStorage.ignoreBackupTimer||(player.backupTimer+=r),player.options.hibernationCatchup&&t===void 0&&r>6e4){GameIntervals.gameLoop.stop(),pH(r/1e3,!0),ck(r);return}if(ck(r))return;Enslaved.isAutoReleasing&&Enslaved.autoReleaseTick++,Enslaved.autoReleaseTick>=5?(Enslaved.autoReleaseTick=0,Enslaved.useStoredTime(!0),Enslaved.isReleaseTick=!0):Enslaved.isReleaseTick||(Enslaved.nextTickDiff=r),(Enslaved.isReleaseTick||i===void 0)&&(i=Enslaved.nextTickDiff),Autobuyers.tick(),Tutorial.tutorialLoop(),Achievement(165).isUnlocked&&player.celestials.effarig.autoAdjustGlyphWeights&&autoAdjustGlyphWeights(),GameCache.antimatterDimensionCommonMultiplier.invalidate(),GameCache.antimatterDimensionFinalMultipliers.invalidate(),GameCache.infinityDimensionCommonMultiplier.invalidate(),GameCache.timeDimensionCommonMultiplier.invalidate(),GameCache.totalIPMult.invalidate();const s=r,a=EternityChallenge(12).isRunning;if(!Enslaved.isReleaseTick&&!a){let m;if(e.blackHoleSpeedup===void 0?m=Hc():m=e.blackHoleSpeedup,Enslaved.isStoringGameTime&&!a){const y=Hc(),_=Hc([ts.FIXED_SPEED,ts.TIME_GLYPH,ts.BLACK_HOLE,ts.SINGULARITY_MILESTONE]),E=Ra.unlocks.improvedStoredTime.effects.gameTimeAmplification.effectOrDefault(1),C=player.celestials.enslaved.stored;player.celestials.enslaved.stored=Math.clampMax(player.celestials.enslaved.stored+i*(_-y)*E,Enslaved.timeCap),Enslaved.currentBlackHoleStoreAmountPerMs=(player.celestials.enslaved.stored-C)/i,m=y}i*=m}else a&&(i*=Hc(),Enslaved.currentBlackHoleStoreAmountPerMs=0);player.celestials.ra.peakGamespeed=Math.max(player.celestials.ra.peakGamespeed,Hc()),Enslaved.isReleaseTick=!1,Achievement(188).isUnlocked||(player.records.realTimeDoomed+=r,player.records.realTimePlayed+=r,player.records.totalTimePlayed+=i,player.records.thisInfinity.realTime+=r,player.records.thisInfinity.time+=i,player.records.thisEternity.realTime+=r,Enslaved.isRunning&&Enslaved.feltEternity&&!EternityChallenge(12).isRunning?player.records.thisEternity.time+=i*(1+Currency.eternities.value.clampMax(1e66).toNumber()):player.records.thisEternity.time+=i,player.records.thisReality.realTime+=r,player.records.thisReality.time+=i),DeltaTimeState.update(r,i),updateNormalAndInfinityChallenges(i),preProductionGenerateIP(i),Pelle.isDoomed||wKe(),AKe(r),RKe(r);const o=AlchemyResource.uncountability.effectValue*Time.unscaledDeltaTime.totalSeconds;Currency.realities.add(o),Currency.perkPoints.add(o),Perk.autocompleteEC1.canBeApplied&&(player.reality.lastAutoEC+=r),EternityChallenge(12).tryFail(),Achievements._power.invalidate(),TimeDimensions.tick(i),InfinityDimensions.tick(i),AntimatterDimensions.tick(i);const c=Math.clampMin(FreeTickspeed.fromShards(Currency.timeShards.value).newAmount-player.totalTickGained,0);player.totalTickGained+=c,TKe(),tryCompleteInfinityChallenges(),EternityChallenges.autoComplete.tick(),replicantiLoop(i),PlayerProgress.dilationUnlocked()&&Currency.dilatedTime.add(getDilationGainPerSecond().times(i/1e3)),IKe(),Currency.timeTheorems.add(fH().times(i/1e3)),InfinityDimensions.tryAutoUnlock(),BlackHoles.updatePhases(s),Ra.unlocks.autoUnlockDilation.canBeApplied&&Currency.timeTheorems.max.gte(TimeStudy.dilation.totalTimeTheoremRequirement)&&!isInCelestialReality()&&!Pelle.isDoomed&&(Currency.timeTheorems.add(TimeStudy.dilation.cost),TimeStudy.dilation.purchase(!0)),CKe(),GlyphSelection.active&&GlyphSelection.update(lH());const d=player.dilation.active&&Ra.unlocks.autoTP.canBeApplied,p=!isInCelestialReality()&&Ra.unlocks.unlockDilationStartingTP.canBeApplied;if((d||p)&&!Pelle.isDoomed&&rewardTP(),Enslaved.canTickHintTimer&&(player.celestials.enslaved.hintUnlockProgress+=Enslaved.isRunning?r:r*.4,player.celestials.enslaved.hintUnlockProgress>=TimeSpan.fromHours(5).totalMilliseconds&&(EnslavedProgress.hintsUnlocked.giveProgress(),Enslaved.quotes.hintUnlock.show())),SKe(r),Achievements.autoAchieveUpdate(i),V.checkForUnlocks(),AutomatorBackend.update(r),Pelle.gameLoop(r),GalaxyGenerator.loop(r),GameEnd.gameLoop(r),Enslaved.canAmplify||(Enslaved.boostReality=!1),GameEnd.endState<END_STATE_MARKERS.CREDITS_START){if(Tabs.current.isPermanentlyHidden){const m=Tabs.all.reverse().find(y=>!y.isPermanentlyHidden&&y.id!==10);m?m.show(!0):[...Tab.dimensions.subtabs].reverse().find(y=>!y.isPermanentlyHidden).show(!0)}Tabs.current.subtabs.find(m=>m.isOpen).isPermanentlyHidden&&[...Tab.dimensions.subtabs].reverse().find(m=>!m.isPermanentlyHidden).show(!0)}EventHub.dispatch(GAME_EVENT.GAME_TICK_AFTER),GameUI.update(),player.lastUpdate=n,PerformanceStats.end("Game Update")}function TKe(){const t=HE().dividedBy(Math.clampMin(5e-4,Time.thisInfinityRealTime.totalMinutes));t.gt(player.records.thisInfinity.bestIPmin)&&Player.canCrunch&&(player.records.thisInfinity.bestIPmin=t,player.records.thisInfinity.bestIPminVal=HE());const e=VE().dividedBy(Math.clampMin(5e-4,Time.thisEternityRealTime.totalMinutes));e.gt(player.records.thisEternity.bestEPmin)&&Player.canEternity&&(player.records.thisEternity.bestEPmin=e,player.records.thisEternity.bestEPminVal=VE());const i=Effarig.shardsGained/Math.clampMin(5e-4,Time.thisRealityRealTime.totalMinutes);i>player.records.thisReality.bestRSmin&&isRealityAvailable()&&(player.records.thisReality.bestRSmin=i,player.records.thisReality.bestRSminVal=Effarig.shardsGained)}function wKe(){let t=0;if(RealityUpgrade(14).isBought&&(t=L.D1.timesEffectsOf(Achievement(113),RealityUpgrade(3),RealityUpgrade(14)),t=Decimal.times(t,getAdjustedGlyphEffect("timeetermult")),t=new Decimal(Time.deltaTime).times(Decimal.pow(t,AlchemyResource.eternity.effectValue)),player.reality.partEternitied=player.reality.partEternitied.plus(t),Currency.eternities.add(player.reality.partEternitied.floor()),player.reality.partEternitied=player.reality.partEternitied.sub(player.reality.partEternitied.floor())),!EternityChallenge(4).isRunning){let e=L.D0;BreakInfinityUpgrade.infinitiedGen.isBought&&(e=e.plus(.5*Time.deltaTimeMs/Math.clampMin(50,player.records.bestInfinity.time)),e=e.timesEffectsOf(RealityUpgrade(5),RealityUpgrade(7),Ra.unlocks.continuousTTBoost.effects.infinity),e=e.times(getAdjustedGlyphEffect("infinityinfmult"))),RealityUpgrade(11).isBought&&(e=e.plus(RealityUpgrade(11).effectValue.times(Time.deltaTime))),EffarigUnlock.eternity.isUnlocked&&(e=e.plus(hH().times(Currency.eternities.value.minus(t.div(2).floor())).times(Time.deltaTime))),e=e.plus(player.partInfinitied),Currency.infinities.add(e.floor()),player.partInfinitied=e.minus(e.floor()).toNumber()}}function CKe(){if(!TimeDimension(8).isUnlocked&&Perk.autounlockTD.canBeApplied)for(let t=5;t<=8;++t)TimeStudy.timeDimension(t).purchase();Perk.autounlockDilation3.canBeApplied&&buyDilationUpgrade(DilationUpgrade.ttGenerator.id),Perk.autounlockReality.canBeApplied&&TimeStudy.reality.purchase(!0),applyEU2()}function SKe(t){const e=player.celestials.laitela;if(Laitela.isRunning&&(e.entropy>=0&&(e.entropy+=t/1e3*Laitela.entropyGainPerSecond),e.entropy>=1)){let i=`Lai'tela's Reality has been destabilized after ${Time.thisRealityRealTime.toStringShort()}.`;e.entropy=-1;const n={fastestCompletion:e.fastestCompletion,difficultyTier:e.difficultyTier,realityReward:Laitela.realityReward};e.thisCompletion=Time.thisRealityRealTime.totalSeconds,e.fastestCompletion=Math.min(e.thisCompletion,e.fastestCompletion),clearCelestialRuns();const r=Time.thisRealityRealTime.totalSeconds<30;if(r){e.difficultyTier++,e.fastestCompletion=300,i+=kKe(Laitela.maxAllowedDimension+1);for(const s of Laitela.quotes.all)s.requirement&&s.show()}if(Laitela.realityReward>n.realityReward){i+=`<br><br>Dark Matter Multiplier: ${formatX(n.realityReward,2,2)}
      ➜ ${formatX(Laitela.realityReward,2,2)}<br>Best Completion Time: `;const s=n.fastestCompletion===3600||n.fastestCompletion===300&&n.difficultyTier>0;i+=`${s?"None":TimeSpan.fromSeconds(n.fastestCompletion).toStringShort()} ➜
        ${r?"Destabilized":TimeSpan.fromSeconds(e.fastestCompletion).toStringShort()}
        <br>Highest Active Dimension: ${destabilising?`${formatInt(8-n.difficultyTier)} ➜`:""}
        ${formatInt(8-e.difficultyTier)}`,player.records.bestReality.laitelaSet=Glyphs.copyForRecords(Glyphs.active.filter(a=>a!==null))}else i+=` You need to destabilize in faster than
        ${TimeSpan.fromSeconds(e.fastestCompletion).toStringShort()} to improve your multiplier.`;Laitela.isFullyDestabilized&&Ib.completeFullDestabilize.tryComplete(),Modal.message.show(i,{},2)}}function kKe(t){switch(t){case 1:return`<br><br>Lai'tela's Reality will now completely disable production from all Dimensions.
        The Reality can still be entered, but further destabilization is no longer possible.
        For completely destabilizing the Reality, you also get an additional ${formatX(8)} to Dark Energy gain.`;case 2:return`<br><br>Lai'tela's Reality will now disable production from all 2nd Dimensions during
      future runs, but the reward will be ${formatInt(100)} times stronger than before. Completely destabilizing
      the Reality for the final Dimension will give you an additional ${formatX(8)} to Dark Energy gain.`;case 3:return`<br><br>Lai'tela's Reality will now disable production from all 3rd Dimensions during
        future runs, but the reward will be ${formatInt(100)} times stronger than before.`;case 8:return`<br><br>Lai'tela's Reality will now disable production from all 8th Dimensions during
        future runs, but the reward will be ${formatInt(100)} times stronger than before. This boost can be
        repeated for each remaining Dimension by reaching destabilization within ${formatInt(30)} seconds again.`;default:return`<br><br>Lai'tela's Reality will now disable production from all
        ${t}th Dimensions during future runs, but the reward will be
        ${formatInt(100)} times stronger than before.`}}function AKe(t){if(Currency.infinityPoints.add(TimeStudy(181).effectOrDefault(0)),TeresaUnlocks.epGen.canBeApplied&&Currency.eternityPoints.add(player.records.thisEternity.bestEPmin.times(L.D0_01).times(Hc()*t/1e3).timesEffectOf(Ra.unlocks.continuousTTBoost.effects.autoPrestige)),InfinityUpgrade.ipGen.isCharged){const e=MachineHandler.gainedRealityMachines.timesEffectsOf(InfinityUpgrade.ipGen.chargedEffect).times(t/1e3);Currency.realityMachines.add(e)}PelleRifts.chaos.milestones[2].canBeApplied&&Currency.eternityPoints.add(VE().times(L.D0_1).times(t/1e3))}function RKe(t){MachineHandler.updateIMCap(),Currency.imaginaryMachines.add(MachineHandler.gainedImaginaryMachines(t))}function IKe(){const t=Effects.max(1,DilationUpgrade.doubleGalaxies),e=1e3,i=getTachyonGalaxyMult();player.dilation.baseTachyonGalaxies=Math.max(player.dilation.baseTachyonGalaxies,1+Math.floor(Decimal.log(Currency.dilatedTime.value.dividedBy(1e3),i))),player.dilation.nextThreshold=L.E3.times(new Decimal(i).pow(player.dilation.baseTachyonGalaxies)),player.dilation.totalTachyonGalaxies=Math.min(player.dilation.baseTachyonGalaxies*t,e)+Math.max(player.dilation.baseTachyonGalaxies*t-e,0)/t,player.dilation.totalTachyonGalaxies*=DilationUpgrade.galaxyMultiplier.effectValue}function fH(){let t=Effects.product(Ra.unlocks.continuousTTBoost.effects.ttGen,Ra.unlocks.achievementTTMult,Achievement(137),Achievement(156));GlyphAlteration.isAdded("dilation")&&(t*=getSecondaryGlyphEffect("dilationTTgen"));const e=Teresa.isRunning||Enslaved.isRunning||Pelle.isDoomed?0:getAdjustedGlyphEffect("dilationTTgen")*t;let n=(DilationUpgrade.ttGenerator.isBought?DilationUpgrade.ttGenerator.effectValue.times(Pelle.isDoomed?1:t):L.D0).add(e);return n.gt(1)&&(n=n.pow(SingularityMilestone.theoremPowerFromSingularities.effectOrDefault(1))),n}function h2(t,e){if(t>600){const i=Yf([{},player]);Modal.awayProgress.show({playerBefore:e,playerAfter:i,seconds:t})}GameUI.notify.showBlackHoles=!0}function pH(t,e,i){if(t<0)return;let n=Math.floor(t*20);GameUI.notify.showBlackHoles=!1;const r=GameStorage.maxOfflineTicks(1e3*t,GameStorage.offlineTicks??player.options.offlineTicks);n>r&&!i?n=r:n>50&&!e&&i&&(n=50);const s=Yf([{},player]);let a;BlackHoles.areUnlocked&&!BlackHoles.arePaused?a=BlackHoles.calculateGameTimeFromRealTime(t,BlackHoles.calculateSpeedups()):a=Hc()*t;const o=cH(a*1e3),c=uH(a*1e3);c.gt(0)?Currency.eternities.add(c):o.gt(0)?Currency.infinities.add(o):Currency.eternityPoints.add(dH(t*1e3)),InfinityUpgrade.ipOffline.isBought&&player.options.offlineProgress&&Currency.infinityPoints.add(player.records.thisEternity.bestIPMsWithoutMaxAll.times(t*1e3/2)),EventHub.dispatch(GAME_EVENT.OFFLINE_CURRENCY_GAINED);let d=t,p=m=>{const y=d/m;uk(1e3*y),d-=y};if(BlackHoles.areUnlocked&&!BlackHoles.arePaused&&(p=m=>{const[y,_]=BlackHoles.calculateOfflineTick(d,m,1e-4);d-=y,uk(1e3*y,{blackHoleSpeedup:_})}),i){GameIntervals.stop();for(let m=50;m>0;m--)p(m);GameStorage.postLoadStuff(),h2(t,s)}else{const m={};ui.view.modal.progressBar={},Async.run(p,n,{batchSize:1,maxTime:60,sleepTime:1,asyncEntry:y=>{GameIntervals.stop(),ui.$viewModel.modal.progressBar={label:"Offline Progress Simulation",info:()=>`The game is being run at a lower accuracy in order to quickly calculate the resources you
              gained while you were away. See the How To Play entry on "Offline Progress" for technical details. If
              you are impatient and want to get back to the game sooner, you can click the "Speed up" button to
              simulate the rest of the time with half as many ticks (down to a minimum of ${formatInt(500)} ticks
              remaining). The "SKIP" button will instead use all the remaining offline time in ${formatInt(10)}
              ticks.`,progressName:"Ticks",current:y,max:n,startTime:Date.now(),buttons:[{text:"Speed up",condition:(_,E)=>E-_>500,click:()=>{const _=Math.clampMin(Math.floor(m.remaining/2),500);m.maxIter-=m.remaining-_,m.remaining=_,ui.$viewModel.modal.progressBar.max=m.maxIter}},{text:"SKIP",condition:(_,E)=>E-_>10,click:()=>{m.maxIter-=m.remaining-10,m.remaining=10}}]}},asyncProgress:y=>{ui.$viewModel.modal.progressBar.current=y},asyncExit:()=>{ui.$viewModel.modal.progressBar=void 0,GameStorage.postLoadStuff()},then:()=>h2(t,s),progress:m})}}window.onload=function(){const t=nI();GameUI.initialized=t,ui.view.initialized=t,setTimeout(()=>{qh.updateZoom()},500),t||(GameIntervals.stop(),document.getElementById("loading").style.display="none",document.getElementById("browser-warning").style.display="flex")};window.onfocus=function(){mH(!1)};window.onblur=function(){GameKeyboard.stopSpins()};function mH(t){ui.view.shiftDown=t}function DKe(t){Replicanti.galaxies.isPlayerHoldingR=t}function nI(){return tKe.test(navigator.userAgent)}const xKe=["AD: Perfected","AD: Easy","AD: PEGI-3 edition","AD: Fuck","AD but better","AD: Its a feature!","AD: All design","AD: Improved","AD: <insert title here>","AD: Ultimate","AD: Leaked","AD: 2","AD: Blob","AD: Mobile friendly","4D: AD","AD: Visuals","AD: Loading","AD: Corn"];let f2=!1;function MKe(){document.getElementById("loading").style.display="none",vm=0,!f2&&(qh.initialize(),gf.initialize(),kE.init(),GameStorage.load(),Tabs.all.find(t=>t.config.id===player.options.lastOpenTab).show(!0),zn.init(),m8(),document.title=bm(xKe),setInterval(()=>{vm===0&&Math.random()<.05&&dk()},6e4),f2=!0)}const PKe=[[ReferenceError,"player is not defined","Currency is not defined","GameEnd is not defined","news.js is not defined"],[Error,"Loading has failed, retrying","Save is missing","Nan'd values found in player save, resetting","Fuck","Translation has failed","dev.spin4d() is not defined"],[SyntaxError,"Missing ) after argument list","Missing [ before argument list"]];function dk(){const t=bm(PKe),e=t[0],i=bm(t.slice(1)),n=new e(i);console.error(n),alert(`An error occured: ${n.toString()}. Please tell the developer on Discord.`),document.getElementById("start").style.display="none",document.getElementById("loading").style.display="block",vm++,gH()}const OKe=[iKe,nKe,rKe,sKe,oKe],yH=["Loading","Downloading","Decompressing","Checking Integrity","Parsing","Compiling","Loading"],hk=Array(yH.length-1).fill().map(()=>Math.random()).sort((t,e)=>t-e);hk.unshift(0);const p2=Zl(10,60);let vm=0;function gH(){const t=document.getElementById("message"),e=document.getElementById("loading"),i=t.children[0],n=t.children[1];let r=0,s;e.style.backgroundImage=`url("${vm>0?bm(OKe):aKe}")`,e.style.display="block";function a(){const o=Date.now(),c=Math.min((o-s)/1e3,Zl(.2,.5));if(s=o,r+=c,Math.random()<.05&&console.error(new TypeError("Boi you fukked up: loading is NOT WORKING")),r>=p2)document.getElementById("start").style.display="flex";else{const d=Math.min(Math.log10(r+1)/Math.log10(p2),1)*100;if(vm<2&&d>=99.5&&Math.random()<.03)document.getElementById("loading").style.display="none",setTimeout(dk,500);else{const p=hk.findLastIndex(y=>d/100>=y),m=hk[p];vm<2&&d/100-m<.02/(p+1)**1.5&&Math.random()<.03?dk():(i.innerText=`${yH[p]}... ${d.toFixed(2)}%`,n.style.width=`${d}%`,requestAnimationFrame(a))}}}setTimeout(()=>{s=Date.now(),a()},1e3)}function vH(){console.log("🌌 Antimatter Dimensions: Reality Update 🌌"),console.log("👨‍💻 Development Mode 👩‍💻"),gH(),document.getElementById("start").onclick=MKe}window.tweenTime=0;let i0;function bH(t){if(requestAnimationFrame(bH),t===void 0||i0===void 0){i0=t;return}let e=t-i0;i0=t,player.dilation.active&&(e/=Pelle.isDoomed?1.5:10),tweenTime+=e,qs.update(tweenTime)}bH();const NKe=Object.freeze(Object.defineProperty({__proto__:null,GAME_SPEED_EFFECT:ts,addEternityTime:mKe,addInfinityTime:fKe,addRealityTime:vKe,breakInfinity:cKe,browserCheck:nI,gainedEternityPoints:VE,gainedGlyphLevel:lH,gainedInfinities:hH,gainedInfinityPoints:HE,gameLoop:uk,getEternitiedMilestoneReward:uH,getGameSpeedupFactor:Hc,getGameSpeedupForDisplay:_Ke,getInfinitiedMilestoneReward:cH,getOfflineEPGain:dH,getTTPerSecond:fH,init:vH,playerInfinityUpgradesOnReset:lKe,ratePerMinute:hKe,realTimeMechanics:ck,requiredIPForEP:uKe,resetChallengeStuff:dKe,resetEternityRuns:yKe,resetInfinityRuns:pKe,setHoldingR:DKe,setShiftKey:mH,simulateTime:pH,updateRefresh:bKe},Symbol.toStringTag,{value:"Module"}));function zd(t){for(const e in t){if(e==="default")continue;const i=t[e];if(window[e]!==void 0)throw`Property ${e} already exists in global context`;window[e]=i}}zd(w8);zd(bW);zd(g7);zd(C7);zd(I7);zd(XQ);zd(eKe);zd(NKe);function GKe(){if(isLocalEnvironment())return;const t="commit.json";let e;function i(){fetch(t,{method:"GET"}).then(n=>n.json()).then(n=>{n!==void 0&&(e=e??n.sha,e!==n.sha&&Modal.message.show(`Refresh the page (game will be saved), we've got new stuff: "${n.message}" by ${n.author}`,{callback:updateRefresh,closeButton:!0},3))})}setInterval(i,6e4)}nI()&&vH();GKe();
//# sourceMappingURL=index-Bc5X163F.js.map
